/*! For license information please see analysis.bundled.js.LICENSE.txt */
(()=>{var __webpack_modules__={36156:e=>{var t={__root:{"Analyze Data":!1,Workflow:!1,"Shared Data":!1,"Data Libraries":!1,Histories:!1,Workflows:!1,Visualizations:!1,Pages:!1,Visualization:!1,"New Track Browser":!1,"Saved Visualizations":!1,Admin:!1,Help:!1,Support:!1,Search:!1,"Mailing Lists":!1,Videos:!1,Wiki:!1,"How to Cite Galaxy":!1,"Interactive Tours":!1,User:!1,Login:!1,Register:!1,"Log in or Register":!1,"Signed in as":!1,Preferences:!1,"Custom Builds":!1,Logout:!1,"Saved Histories":!1,"Saved Datasets":!1,"Saved Pages":!1,"Account and saved data":!1,"Account registration or login":!1,"Support, contact, and community":!1,"Administer this Galaxy":!1,"Visualize datasets":!1,"Access published resources":!1,"Chain tools into workflows":!1,"Analysis home view":!1,"History Lists":!1,"Histories Shared with Me":!1,"Current History":!1,"Create New":!1,"Copy History":!1,"Share or Publish":!1,"Show Structure":!1,"Extract Workflow":!1,"Delete Permanently":!1,"Dataset Actions":!1,"Copy Datasets":!1,"Dataset Security":!1,"Resume Paused Jobs":!1,"Collapse Expanded Datasets":!1,"Unhide Hidden Datasets":!1,"Delete Hidden Datasets":!1,"Purge Deleted Datasets":!1,Downloads:!1,"Export Tool Citations":!1,"Export History to File":!1,"Other Actions":!1,"Import from File":!1,Webhooks:!1,"This history is empty":!1,"No matching datasets found":!1,"An error occurred while getting updates from the server":!1,"Please contact a Galaxy administrator if the problem persists":!1,"search datasets":!1,"You are currently viewing a deleted history!":!1,"You are over your disk quota":!1,"Tool execution is on hold until your disk usage drops below your allocated quota":!1,All:!1,None:!1,"For all selected":!1,"Edit history tags":!1,"Edit history annotation":!1,"Click to rename history":!1,"Operations on multiple datasets":!1,"Hide datasets":!1,"Unhide datasets":!1,"Delete datasets":!1,"Undelete datasets":!1,"Permanently delete datasets":!1,"This will permanently remove the data in your datasets. Are you sure?":!1,Dataset:!1,Annotation:!1,"This history is empty. Click 'Get Data' on the left tool menu to start":!1,"You must be logged in to create histories":!1,"Unable to purge dataset":!1,"Cannot display datasets removed from disk":!1,"This dataset must finish uploading before it can be viewed":!1,"This dataset is not yet viewable":!1,"View data":!1,Download:!1,"Download dataset":!1,"Additional files":!1,"View details":!1,"This is a new dataset and not all of its data are available yet":!1,"You do not have permission to view this dataset":!1,"The job creating this dataset was cancelled before completion":!1,"This job is waiting to run":!1,"This dataset is currently uploading":!1,"Metadata is being auto-detected":!1,"This job is currently running":!1,'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':!1,"An error occurred with this dataset":!1,"No data":!1,"An error occurred setting the metadata for this dataset":!1,"There was an error getting the data for this dataset":!1,"This dataset has been deleted and removed from disk":!1,"This dataset has been deleted":!1,"This dataset has been hidden":!1,format:!1,database:!1,"Edit attributes":!1,"Cannot edit attributes of datasets removed from disk":!1,"Undelete dataset to edit attributes":!1,"This dataset must finish uploading before it can be edited":!1,"This dataset is not yet editable":!1,Delete:!1,"Dataset is already deleted":!1,"View or report this error":!1,"Run this job again":!1,Visualize:!1,"Visualize in":!1,"Undelete it":!1,"Permanently remove it from disk":!1,"Unhide it":!1,"You may be able to":!1,"set it manually or retry auto-detection":!1,"Edit dataset tags":!1,"Edit dataset annotation":!1,"Tool Help":!1,"Reset passwords":!1,"Search Tool Shed":!1,"Monitor installing repositories":!1,"Manage installed tools":!1,"Reset metadata":!1,"Download local tool":!1,"Tool lineage":!1,"Reload a tool's configuration":!1,"View Tool Error Logs":!1,"Manage Allowlist":!1,"Manage Tool Dependencies":!1,Users:!1,Groups:!1,"API keys":!1,"Impersonate a user":!1,Data:!1,Quotas:!1,Roles:!1,"Local data":!1,"Form Definitions":!1,"Enable/Disable Window Manager":!1,"Show/Hide Window Manager":!1,Tags:!1,"Edit annotation":!1,Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":!1,"Your email address":!1,Report:!1,"Error Report":!1,"Dataset details":!1,"Save permissions.":!1,"Change the datatype to a new type.":!1,"Convert the datatype to a new format.":!1,"Save attributes of the dataset.":!1,"Change data type":!1,"Edit dataset attributes":!1,"Save permissions":!1,"Manage dataset permissions":!1,"Change datatype":!1,"Convert datatype":!1,"Convert to new format":!1,Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":!1,"Location Details":!1,"Deleting selected items":!1,"Please select folders or files":!1,"Please enter paths to import":!1,"Adding datasets from your history":!1,"Create New Folder":!1,"Create New Library":!1,Tours:!1,"Click here to sign out of all sessions.":!1,"Add or remove custom builds using history datasets.":!1,"Associate OpenIDs with your account.":!1,"Customize your Toolbox by displaying or omitting sets of Tools.":!1,"Access your current API key or create a new one.":!1,"Allows you to change your login credentials.":!1,"User preferences":!1,"Sign out":!1,"Manage custom builds":!1,"Manage OpenIDs":!1,"Manage Toolbox filters":!1,"Manage API Key":!1,"Set dataset permissions for new histories":!1,"Change Password":!1,"Manage Information":!1,"Configured Tool Sheds":!1,"Repository Queue":!1,"Repository Status":!1,"Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:!1,"Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":!1,Execute:!1,"Tool request failed":!1,"Copy and insert individual steps":!1,Warning:!1,"An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":!1,Collection:!1,Composite:!1,Regular:!1,"Upload configuration":!1,"FTP files":!1,Reset:!1,Pause:!1,Start:!1,"Choose FTP file":!1,"Choose local file":!1,Build:!1,"Choose FTP files":!1,"Choose local files":!1,Select:!1,"Create a collection of paired datasets":!1,"View all histories":!1,"History options":!1,"Refresh history":!1,"View error logs":!1,"View lineage":!1,"Manage dependencies":!1,"Manage allowlist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:!1,"Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":!1,"Delete custom build.":!1,"Provide the data source.":!1,"Next in History":!1,"Previous in History":!1,"Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":!1,"tool tooltip":!1,"Subscribe to mailing list":!1,"Already have an account?":!1,"Log in here.":!1,"Create a Galaxy account":!1,"Or, register with email":!1,"Forgot password?":!1,"Register here.":!1,"Click here to reset your password.":!1},__ja:{"Analyze Data":"データ解析",Workflow:"ワークフロー","Shared Data":"共有データ","Data Libraries":"データライブラリ",Histories:"ヒストリー",Workflows:"ワークフロー",Visualizations:"可視化",Pages:"ページ",Visualization:"可視化","New Track Browser":"新しい Track Browser","Saved Visualizations":"保存された可視化",Admin:"管理者",Help:"ヘルプ",Support:"サポート",Search:"検索","Mailing Lists":"メーリングリスト",Videos:"動画","Community Hub":"コミュニティハブ","How to Cite Galaxy":"Galaxy を引用する方法","Interactive Tours":"インタラクティブツアー",User:"ユーザー",Login:"ログイン",Register:"登録","Log in or Register":"ログイン/登録",Preferences:"設定","Custom Builds":"カスタムビルド",Logout:"ログアウト","Saved Histories":"保存されたヒストリ","Saved Datasets":"保存されたデータセット","Saved Pages":"保存されたページ","Account and saved data":"アカウントと保存されたデータ","Account registration or login":"アカウントの登録またはログイン","Support, contact, and community":"サポート、コンタクト、コミュニティ","Administer this Galaxy":"この Galaxy の管理者","Visualize datasets":"データセットの可視化","Access published resources":"パブリッシュされたリソースへアクセス","Chain tools into workflows":"ツールとワークフローの連携","Analysis home view":"解析ホーム","History Lists":"ヒストリーリスト","Histories Shared with Me":"私と共有されているヒストリー","Current History":"現在のヒストリー","Create New":"新しく作成","Copy History":"ヒストリーをコピーする","Share or Publish":"共有またはパブリッシュ","Show Structure":"構造を見る","Extract Workflow":"ワークフローを抽出","Delete Permanently":"永久に削除","Dataset Actions":"データセットの操作","Copy Datasets":"データセットをコピー","Dataset Security":"データセットのセキュリティ","Resume Paused Jobs":"一時停止したジョブの再開","Collapse Expanded Datasets":"展開されたデータセットを畳む","Unhide Hidden Datasets":"隠されたデータセットを表示する","Delete Hidden Datasets":"隠されたデータセットを削除する","Purge Deleted Datasets":"削除されたデータセットを永久に削除",Downloads:"ダウンロード","Export Tool Citations":"ツールの引用をエクスポート","Export History to File":"ヒストリーをファイルへエクスポート","Other Actions":"その他のアクション","Import from File":"ファイルからの読み込み",Webhooks:"Webhooks","This history is empty":"ヒストリーは空です","No matching datasets found":"一致するデータセットが見つかりませんでした","Search datasets":"データセットを検索する","You are currently viewing a deleted history!":"消去したヒストリーをみています。","You are over your disk quota":"あなたはディスククォータを超えている",All:"一式",None:"なし","For all selected":"各項目を","Edit history tags":"ヒストリーのタグを編集","Edit history annotation":"ヒストリーのアノテーションを編集","Click to rename history":"ヒストリーの名前を変更するにはクリック","Operations on multiple datasets":"複数のデータセットに対する操作","Permanently delete datasets":"永久にデータセットを削除","This will permanently remove the data in your datasets. Are you sure?":"これは永久にあなたのデータセット内のデータを削除します。本当に？",Dataset:"データセット","This history is empty. Click 'Get Data' on the left tool menu to start":"ヒストリーは空です。解析をはじめるには、左パネルの 'データ取得' をクリック","You must be logged in to create histories":"ヒストリーを作成するためにはログインする必要があります","View data":"データを表示",Download:"ダウンロード","Download dataset":"データセットをダウンロード","View details":"細部を表示","This job is waiting to run":"ジョブは実行待ちです","This job is currently running":"ジョブは実行中です","An error occurred with this dataset":"このジョブの実行中に発生したエラー","No data":"データ無し","This dataset has been deleted and removed from disk":"このデータセットは、永続的にディスクから削除されました","This dataset has been deleted":"このデータセットは削除されました","This dataset has been hidden":"このデータセットは、非表示にされた",format:"フォーマット",database:"データベース","Edit attributes":"変数を編集する",Delete:"削除する","View or report this error":"このエラーを届け出る","Run this job again":"もう一度このジョブを実行する",Visualize:"可視化する","Undelete it":"復元する","Permanently remove it from disk":"永久にディスクから削除","Unhide it":"非表示解除する","Search Tool Shed":"Tool Shed で探す","Search Tool Shed (Beta)":"Tool Shed (Beta) で探す","Monitor installing repositories":"インストールレポジトリのモニタ","Manage installed tools":"インストールしたツールの管理","Reset metadata":"メタデータのリセット","Download local tool":"ローカルツールのダウンロード","Tool lineage":"ツール系統","Reload a tool's configuration":"ツールのコンフィグのリロード","View Tool Error Logs":"ツールのエラーログ","Manage Allowlist":"表示ホワイトリストの管理","Manage Tool Dependencies":"ツール依存関係の管理",Users:"ユーザー",Groups:"グループ","API keys":"API キー","Impersonate a user":"ユーザー偽装",Data:"データ",Quotas:"クォータ",Roles:"ロール","Local data":"ローカルデータ","Form definitions":"フォーム定義",Administration:"管理",Server:"サーバー","Tools and Tool Shed":"ツールと Tool Shed","User Management":"ユーザ管理","Form Definitions":"フォーム定義","Your workflows":"あなたのワークフロー"},__fr:{"Analyze Data":"Analyse de données",Workflow:"Workflow","Shared Data":"Données partagées","Data Libraries":"Bibliothèque de données",Histories:!1,Workflows:!1,Visualizations:"Visualisations",Pages:"Pages",Visualization:!1,"New Track Browser":"Nouveau Navigateur de Tracks/Pistes","Saved Visualizations":"Visualisations sauvegardées",Admin:"Admin",Help:"Aide",Support:"Assistance",Search:!1,"Mailing Lists":"Liste de diffusion",Videos:"Vidéos","Community Hub":"Documentations","How to Cite Galaxy":"Comment citer Galaxy","Interactive Tours":"Guides interactifs",User:"Utilisateur",Login:"Authentification",Register:"Enregistrement","Log in or Register":"Authentification et Enregistrement","Signed in as":"Authentifié en tant que",Preferences:"Préférences","Custom Builds":"Mes génomes Builds de référence",Logout:"Déconnexion","Saved Histories":"Historiques sauvegardés","Saved Datasets":"Jeux de données sauvegardés","Saved Pages":"Pages sauvegardées","Account and saved data":"Compte et données sauvegardées","Account registration or login":"Enregistrement ou authentification","Support, contact, and community":"Support,contact et communauté","Administer this Galaxy":"Outils Admin","Visualize datasets":"Visualiser les jeux de données","Access published resources":"Accéder aux données partagées","Chain tools into workflows":"Relier outils dans un workflow","Analysis home view":"Accueil analyse de données","History Lists":"Tableaux des historiques","Histories Shared with Me":"Historiques partagés avec moi","Current History":"Cet Historique","Create New":"Créer un nouveau","Copy History":"Copier l'Historique","Share or Publish":"Partager et publier","Show Structure":"Montrer la structure","Extract Workflow":"Extraire un Workflow","Delete Permanently":"Supprimer définitivement","Dataset Actions":"Actions sur les jeux de données","Copy Datasets":"Copier des jeux de données","Dataset Security":"Permissions/Sécurité","Resume Paused Jobs":"Reprendre les processus en pause","Collapse Expanded Datasets":"Réduire les données étendues","Unhide Hidden Datasets":"Afficher les données cachées","Delete Hidden Datasets":"Supprimer les données cachées","Purge Deleted Datasets":"Purger les données supprimées",Downloads:"Télécharger","Export Tool Citations":"Exporter les citations des outils","Export History to File":"Exporter l'Historique dans un fichier","Other Actions":"Autres actions","Import from File":"Importer depuis un fichier",Webhooks:"Webhooks","This history is empty":"Cet historique est vide","No matching datasets found":"Aucunes données correspondantes n'ont été trouvées","An error occurred while getting updates from the server":"Une erreur s'est produite lors de la réception des données depuis le serveur","Please contact a Galaxy administrator if the problem persists":"Veuillez contacter un administrateur de l'instance Galaxy si ce problème persiste","search datasets":"Rechercher des données","You are currently viewing a deleted history!":"Vous consultez actuellement un historique supprimé!","You are over your disk quota":"Vous avez dépassé votre quota d'espace disque","Tool execution is on hold until your disk usage drops below your allocated quota":"L'exécution de l'outil est en attente tant que votre utilisation d'espace disque dépasse le quota attribué",All:"Tout",None:"Aucun","For all selected":"Pour toute la sélection","Edit history tags":"Editer les mots-clés de l'historique","Edit history annotation":"Editer l'annotation de l'historique","Click to rename history":"Cliquer pour renommer l'historique","Operations on multiple datasets":"Opérer sur plusieurs jeux de données en même temps","Hide datasets":"Cacher les jeux de données","Unhide datasets":"Afficher les jeux de données cachés","Delete datasets":"Supprimer les jeux de données","Undelete datasets":"Restaurer les jeux de données supprimés","Permanently delete datasets":"Supprimer définitivement les jeux de données","This will permanently remove the data in your datasets. Are you sure?":"Cela supprimera de manière permanente les données de votre historique. Êtes-vous certain?",Dataset:"Jeu de données",Annotation:"Annotation","This history is empty. Click 'Get Data' on the left tool menu to start":"Cet historique est vide. Cliquer sur 'Get Data' au niveau du menu d'outils à gauche pour démarrer","You must be logged in to create histories":"Vous devez être connecté pour créer un historique","load your own data":"Charger vos propres données","get data from an external source":"Charger des données depuis une source externe","Include Deleted Datasets":"Inclure les jeux de données supprimés","Include Hidden Datasets":"Inclure les jeux de données cachés","Unable to purge dataset":"Impossible de purger le jeu de données","Cannot display datasets removed from disk":"Impossible de visualiser les jeux de données supprimés du disque","This dataset must finish uploading before it can be viewed":"Le jeu de données doit être totalement téléversé avant de pouvoir être visualiser","This dataset is not yet viewable":"Ce jeu de données n'est pas visualisable","View data":"Voir les données",Download:!1,"Download dataset":"Télécharger le jeu de données","Additional files":"Fichiers additionnels","View details":"Voir les détails","This is a new dataset and not all of its data are available yet":"Il s'agit d'un nouveau jeu de données et seule une partie des données est accessible pour le moment","You do not have permission to view this dataset":"Vous n'avez pas la permission de voir ce jeu de données","The job creating this dataset was cancelled before completion":"Le processus à l'origine de ce jeu de données a été annulé prématurément","This job is waiting to run":"Ce calcul est en attente de traitement","This dataset is currently uploading":"Ce jeu de données est en cours de téléversement","Metadata is being auto-detected":"Les métadonnées sont auto-détectées","This job is currently running":"Le traitement est en cours",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'Ce traitement est en pause. Utilisez le "Relancer les traitements en pause" dans le menu d\'historique pour le relancer',"An error occurred with this dataset":"Une erreur est survenue avec ce jeu de données","No data":"Aucune donnée","An error occurred setting the metadata for this dataset":"Une erreur est survenue pendant la récupération des métadonnées de ce jeu de données","There was an error getting the data for this dataset":"Il est survenu une erreur durant la récupération du contenu de ce jeu de données","This dataset has been deleted and removed from disk":"Ce jeu de données a été supprimé et effacé du disque","This dataset has been deleted":"Ce jeu de données a été supprimé","This dataset has been hidden":"Ce jeu de données a été caché",format:"format",database:"génome de référence","Edit attributes":"Editer les attributs","Cannot edit attributes of datasets removed from disk":"Impossible d'éditer les attributs de jeux de données effacés du disque","Undelete dataset to edit attributes":"Restaurer le jeu de données pour en éditer les attributs","This dataset must finish uploading before it can be edited":"Ce jeu de données doit être entièrement téléversé avant toute modification","This dataset is not yet editable":"Ce jeu de données n'est pas encore éditable",Delete:"Supprimer","Dataset is already deleted":"Le jeu de données est déjà supprimé","View or report this error":"Voir ou remonter cette erreur","Run this job again":"Exécuter ce traitement à nouveau",Visualize:!1,"Visualize in":"Visualiser via","Undelete it":"Restaurer","Permanently remove it from disk":"Supprimer définitivement du disque","Unhide it":"Rendre visible","You may be able to":"Vous devriez être en mesure de","set it manually or retry auto-detection":"Traitez le manuellement ou retenter la détection automatique","Edit dataset tags":"Editer les mots-clés du jeu de données","Edit dataset annotation":"Editer les annotations du jeu de données","Tool Help":"Aide outil","Reset passwords":"Réinitialiser les mots de passe","Search Tool Shed":"Chercher via un Tool Shed","Monitor installing repositories":"Contrôler les dépôts installés","Manage installed tools":"Gérer les outils installés","Reset metadata":"Réinitialiser les métadonnées","Download local tool":"Télécharger un outil en local","Tool lineage":"Affiliation des outils","Reload a tool's configuration":"Recharger une configuration d'outils","View Tool Error Logs":"Voir les logs d'erreur d'outils","Manage Allowlist":"Gérer la liste autorisée d'outils graphiques","Manage Tool Dependencies":"Gérer les dépendances d'outils",Users:!1,Groups:!1,"API keys":"Clé d'API","Impersonate a user":"Prendre la place d'un utilisateur",Data:!1,Quotas:!1,Roles:!1,"Local data":"Données locales","Form Definitions":"Définitions de formulaires","Enable/Disable Window Manager":"Activer/Désactiver la visu Window Manager","Show/Hide Window Manager":"Montrer/cacher la visu Window Manager",Tags:"Mots-clés","Edit annotation":"Editer les annotations",Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":"N'importe quel commentaire que vous pouvez fournir concernant ce que vous faisiez lorsque le bug est apparu","Your email address":"Votre adresse e-mail",Report:!1,"Error Report":"Rapport d'erreur","Dataset details":"Détails du jeu de données","Save permissions.":"Sauvegarder les permissions","Change the datatype to a new type.":"Changer en un nouveau format de données","Convert the datatype to a new format.":"Convertir le format de données","Save attributes of the dataset.":"Sauvegarder les attributs du jeu de données","Change data type":"Changer le format de données","Edit Dataset Attributes":"Modifier les attributs du jeu de données","Save permissions":"Sauvegarder les permissions","Manage dataset permissions":"Gérer les permissions sur les jeux de données","Change datatype":"Changer le format de données","Convert datatype":"Convertir le format de données","Convert to new format":"Convertir en un nouveau format de données",Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":"Importer dans l'historique","Location Details":"Détails de localisation","Deleting selected items":"Suppression des objets sélectionnés","Please select folders or files":"S'il vous plaît sélectionnez des dossiers ou fichiers","Please enter paths to import":"S'il vous plaît entrer des chemins/URLs à importer","Adding datasets from your history":"Ajouts de jeux de données à partir de votre historique","Create New Folder":"Créer un nouveau dossier","Create New Library":"Créer une nouvelle bibliothèque",Tours:!1,"Click here to sign out of all sessions.":!1,"Add or remove custom builds using history datasets.":!1,"Associate OpenIDs with your account.":!1,"Customize your Toolbox by displaying or omitting sets of Tools.":!1,"Access your current API key or create a new one.":!1,"Enable or disable the communication feature to chat with other users.":!1,"Allows you to change your login credentials.":!1,"User preferences":!1,"Sign out":!1,"Manage custom builds":!1,"Manage OpenIDs":!1,"Manage Toolbox filters":!1,"Manage API Key":!1,"Set dataset permissions for new histories":!1,"Change communication settings":!1,"Change Password":!1,"Manage Information":!1,"Configured Tool Sheds":!1,"Repository Queue":!1,"Repository Status":!1,"Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:!1,"Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":!1,Execute:!1,"Tool request failed":!1,"Copy and insert individual steps":!1,Warning:!1,"An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":!1,Collection:!1,Composite:!1,Regular:!1,"Upload configuration":!1,"FTP files":!1,Reset:!1,Pause:!1,Start:!1,"Choose FTP file":!1,"Choose local file":!1,Build:!1,"Choose FTP files":!1,"Choose local files":!1,Select:!1,"Create a collection of paired datasets":!1,"View all histories":!1,"History options":!1,"Refresh history":!1,"View error logs":!1,"View lineage":!1,"Manage dependencies":!1,"Manage allowlist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:!1,"Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":!1,"Delete custom build.":!1,"Provide the data source.":!1,"Next in History":!1,"Previous in History":!1,"Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":!1,"tool tooltip":!1},__zh:{"Analyze Data":"数据分析",Workflow:"工作流程","Shared Data":"数据共享","Data Libraries":"数据库","Published Histories":"历史","Published Workflows":"流程","Published Visualizations":"可视化","Published Pages":"页面",Visualization:"可视化","New Track Browser":"创建 Track Browser","Saved Visualizations":"已保存的可视化","Create Visualization":"创建可视化",Admin:"管理员",Help:"帮助",Support:"支持",Search:"搜索","Mailing Lists":"邮件列表",Videos:"视频",Wiki:!1,"How to Cite Galaxy":"引用","Interactive Tours":"使用引导",User:"账号管理",Login:"登陆",Register:"注册","Log in or Register":"注册登陆","Signed in as":"您已登陆为",Preferences:"用户偏好性","Custom Builds":"自定义构建集",Logout:"退出","Saved Histories":"保存的历史","Saved Datasets":"保存的数据集","Saved Pages":"保存的页面",Datasets:"我的数据集",Histories:"我的历史","Histories shared with me":"分享给我的历史",Pages:"我的页面",Visualizations:"我的可视化","Account and saved data":"账号及数据保存","Account registration or login":"注册或登录","Support, contact, and community":"社区支持与联系","Administer this Galaxy":"管理您的 Galaxy","Visualize datasets":"数据集可视化","Access published resources":"访问已发布的资源","Chain tools into workflows":"将工具链接到流程中","Analysis home view":"数据分析主页",History:"历史","History Actions":"历史记录操作","History Lists":"历史记录列表","Histories Shared with Me":"分享给您历史","Current History":"当前历史记录","Create New":"创建新的历史",Copy:"复制历史","Share or Publish":"分享或发布历史","Show Structure":"展示结构","Extract Workflow":"提取为工作流","Set Permissions":"设置权限","Make Private":"私有化数据",Delete:"删除","Delete Permanently":"永久删除","Dataset Actions":"数据集操作","Copy Datasets":"复制数据集","Dataset Security":"数据集安全","Resume Paused Jobs":"恢复已暂停的任务","Collapse Expanded Datasets":"折叠已展开的数据集","Unhide Hidden Datasets":"取消隐藏的数据集","Delete Hidden Datasets":"删除隐藏的数据集","Purge Deleted Datasets":"清除已删除的数据集",Downloads:"下载","Export Tool Citations":"导出工具引用的文献","Export History to File":"导出历史到文件","Other Actions":"其他操作","Import from File":"从文件导入",Webhooks:!1,"This history is empty":"您的历史记录为空","No matching datasets found":"未找到匹配的数据集","An error occurred while getting updates from the server":"服务器更新时出现错误","Please contact a Galaxy administrator if the problem persists":"如果问题仍然存在，请联系 Galaxy 管理员","An error was encountered while <% where %>":"当执行以下操作时: <% where %>, 出现错误","search datasets":"搜索数据集","You are currently viewing a deleted history!":"您正在查看已删除的历史记录！","You are over your disk quota":"您已超出了系统分配的磁盘配额","Tool execution is on hold until your disk usage drops below your allocated quota":"工具暂停执行，直到您的磁盘使用量低于您所分配的配额",All:"全选",None:"反选","For all selected":"为每个选定","Edit history tags":"编辑历史标签","Edit history annotation":"编辑历史备注","Click to rename history":"点击以重命名历史","Operations on multiple datasets":"编辑多个数据集","Hide datasets":"隐藏数据集","Unhide datasets":"显示数据集","Delete datasets":"删除数据集","Undelete datasets":"取消删除数据集","Permanently delete datasets":"永久删除数据集","This will permanently remove the data in your datasets. Are you sure?":"本次操作将从您的数据集中用久移除数据。请再次确定？",Dataset:"数据集",Annotation:"备注","This history is empty. Click 'Get Data' on the left tool menu to start":"您的历史记录为空，请单击左边窗格中‘获取数据’","You must be logged in to create histories":"您必须登录后才能创建历史","You can <% loadYourOwn %> or <% externalSource %>":"您可以 <% loadYourOwn %> 或者 <% externalSource %>","You can ":"您可以 "," or ":" 或者 ","load your own data":"上传您的个人数据","get data from an external source":"从其他来源上传数据.","Include Deleted Datasets":"包括删除数据集","Include Hidden Datasets":"包括隐藏数据集","Unable to purge dataset":"无法清除数据集","Cannot display datasets removed from disk":"无法显示已从磁盘中移除的数据集","This dataset must finish uploading before it can be viewed":"此数据集必须先完成上传, 才能查看","This dataset is not yet viewable":"此数据集暂时不可见","View data":"查看数据",Download:"下载","Download dataset":"下载数据集","Additional files":"其他文件","View details":"查看详情","This is a new dataset and not all of its data are available yet":"这是一个新的数据集，并不是所有与它关联的数据都可用","You do not have permission to view this dataset":"您无权查看此数据集","The job creating this dataset was cancelled before completion":"创建此数据集的任务在完成之前已被取消","This job is waiting to run":"您的任务正在等待运行","This dataset is currently uploading":"您的数据集正在上传中","Metadata is being auto-detected":"元数据正在被自动检测中","This job is currently running":"您的任务正在运行中",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'此任务已暂停。您可以使用历史菜单中的 "恢复已暂停的任务" 来恢复',"An error occurred with this dataset":"此数据集发生错误","No data":"没有数据","An error occurred setting the metadata for this dataset":"设置此数据集的元数据时发生错误","There was an error getting the data for this dataset":"获取此数据集的数据时出现错误","This dataset has been deleted and removed from disk":"此数据集已被删除且已经从系统磁盘中被清空","This dataset has been deleted":"此数据集已被删除","This dataset has been hidden":"此数据集已被隐藏",format:"格式",database:"数据库","Edit attributes":"编辑属性","Cannot edit attributes of datasets removed from disk":"无法编辑已从磁盘中移除的数据集的属性","Undelete dataset to edit attributes":"取消删除数据集以编辑属性","This dataset must finish uploading before it can be edited":"该数据集必须先上传完成, 才能编辑","This dataset is not yet editable":"该数据集不可编辑","Dataset is already deleted":"数据集已被删除","View or report this error":"查看或报告当前错误","Run this job again":"重新运行当前任务",Visualize:"可视化","Visualize in":"的可视化","Undelete it":"取消删除","Permanently remove it from disk":"从磁盘中永久移除","Unhide it":"取消隐藏","You may be able to":"您可以","set it manually or retry auto-detection":"手动设置或重新执行自动检测","Edit dataset tags":"编辑数据集标签","Edit dataset annotation":"编辑数据集备注","Tool Help":"工具帮助","Reset passwords":!1,"Search Tool Shed":!1,"Monitor installing repositories":!1,"Manage installed tools":!1,"Reset metadata":!1,"Download local tool":!1,"Tool lineage":!1,"Reload a tool's configuration":!1,"View Tool Error Logs":!1,"Manage Display Whitelist":!1,"Manage Tool Dependencies":!1,Users:!1,Groups:!1,"API keys":!1,"Impersonate a user":!1,Data:!1,Quotas:!1,Roles:!1,"Local data":!1,"Form Definitions":!1,"Enable/Disable Window Manager":"启用/禁用 Window Manager","Show/Hide Window Manager":"显示/隐藏 Window Manager",Tags:"标签","Edit annotation":"编辑备注",Subscript:"下标",Superscript:"上标",Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":"您可以提供的关于 bug 发生时您正在做什么的任何信息。","Your email address":"您的邮箱地址",Report:"报告","Error Report":"错误报告","Dataset details":"数据集详情","Save permissions.":"保存权限","Change the datatype to a new type.":"将数据类型更改为新类型。","Convert the datatype to a new format.":"将数据类型更改为新的格式。","Save attributes of the dataset.":"保存数据集属性。","Change data type":"更改数据类型","Edit Dataset Attributes":"编辑数据集属性","Save permissions":"保存权限","Manage dataset permissions":"管理数据集权限","Change datatype":"更改数据类型","Convert datatype":"转换数据类型","Convert to new format":"转换成新格式",Save:"保存",Permissions:"权限",Datatypes:"数据类型",Convert:"转换",Attributes:"属性","Import into History":"导入到历史记录中","Location Details":"位置的细节","Deleting selected items":"删除选择的条目","Please select folders or files":"请选择目录或者文件","Please enter paths to import":"请填写路径进行导入","Adding datasets from your history":"从您的历史记录中添加数据集","Create New Folder":"创建新的目录","Create New Library":"创建新的库",Tours:"引导","Click here to sign out of all sessions.":"点击这里退出所有会话。","Add or remove custom builds using history datasets.":"从历史的数据集中添加或者移除自定义的构建集。","Associate OpenIDs with your account.":"把 OpenIDs 和您的账号进行关联。","Customize your Toolbox by displaying or omitting sets of Tools.":"通过显示或删除工具来自定义您的工具箱。","Access your current API key or create a new one.":"访问您当前的 API密钥或创建一个新的密钥。","Enable or disable the communication feature to chat with other users.":"启用或禁用与其他用户聊天的通信功能。","Allows you to change your login credentials.":"允许您更改您的登录凭证。","User preferences":"用户偏好性","Sign out":"退出","Manage custom builds":"管理您自定义的构建集","Manage OpenIDs":"管理 OpenIDs","Manage Toolbox filters":"管理工具箱过滤器","Manage API Key":"管理您的 API 密钥","Set dataset permissions for new histories":"为新的历史设置数据集权限","Change communication settings":"修改通信设置","Change Password":"更改密码","Manage Information":"管理您的信息","Configured Galaxy Tool Sheds":"配置 Galaxy Tool Sheds","Repository Installation Queue":"存储库安装队列","Repository Status":"存储卡状态","Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:"分享","Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":"任务提交失败",Execute:"执行","Tool request failed":"工具请求失败","Email notification":"邮件提醒","Send an email notification when the job completes.":"任务完成后发送电子邮件通知。",Workflows:"流程","Copy and insert individual steps":!1,Warning:"警告","An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,"Browse GenomeSpace":!1,Browse:!1,Error:"错误",Close:"关闭","Download from web or upload from disk":"从网页获取或者从本地磁盘上传数据",Collection:"集合数据",Composite:"复合数据",Regular:"常规数据","Upload configuration":"上传配置","FTP files":"FTP 文件",Reset:"重置",Pause:"暂停",Start:"开始","Choose FTP file":"选择 FTP 文件","Choose local file":"选择本地磁盘文件",Build:"构建集","Choose FTP files":"选择 FTP 文件","Choose local files":"选择本地磁盘文件","Paste/Fetch data":"粘贴数据或链接",Select:"选择","Create a collection of paired datasets":"创建一个配对数据的集合","View all histories":"查看所有的历史记录","History options":"历史记录选项","Refresh history":"刷新历史记录","View error logs":!1,"View lineage":!1,"Manage dependencies":!1,"Manage whitelist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:"库","Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":"创建新的构建集","Delete custom build.":"删除自定义的构建集。","Provide the data source.":"提供数据源。","Next in History":"下一个历史记录","Previous in History":"上一个历史记录","Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":"从 URL 或者本地磁盘上传文件","tool tooltip":!1,ja:!0,fr:!0,zh:!0},__es:{"Analyze Data":"Analizar Datos","Tools and Current History":"Herramientas e Historial Actual",Workflow:"Flujo de Trabajo","Shared Data":"Datos Compartidos","Data Libraries":"Bibliotecas de Datos",Histories:"Historiales",Workflows:"Flujos de Trabajo",Visualizations:"Visualizaciones",Pages:"Páginas",Visualization:"Visualización","New Track Browser":"Nuevo Navegador de Pistas","Saved Visualizations":"Visualizaciones Guardadas",Admin:"Administración",Help:"Ayuda",Support:"Soporte",Search:"Buscar","Mailing Lists":"Listas de Correo",Videos:"Videos","Community Hub":"Centro Comunitario","How to Cite Galaxy":"Cómo citar Galaxy","Interactive Tours":"Tours Interactivos","Galaxy Help":"Ayuda de Galaxy","Terms and Conditions":"Términos y Condiciones",User:"Usuario",Login:"Iniciar sesión",Register:"Registro","Log in or Register":"Iniciar sesión o Registrarse","Subscribe to mailing list":!1,"Already have an account?":!1,"Log in here.":!1,"Create a Galaxy account":!1,"Or, register with email":!1,"Forgot password?":"¿Olvidó su contraseña?","Register here.":"Regístrese aquí.","Click here to reset your password.":"Haga clic aquí para restablecer su contraseña.","Signed in as":"Se ha conectado como",Preferences:"Preferencias","Custom Builds":"Construcciones personalizadas","Workflow Invocations":"Invocaciones de Flujos de Trabajo","Active InteractiveTools":"Activar Herramientas Interactivas",Logout:"Cerrar Sesión","Saved Histories":"Historiales Guardados","Saved Datasets":"Conjuntos de Datos Guardados","Saved Pages":"Páginas Guardadas","Using ":"Utilizando ","Account and saved data":"Cuenta y Datos Guardados","Account registration or login":"Crear Cuenta o Iniciar Sesión","Support, contact, and community":"Apoyo, contacto y comunidad","Administer this Galaxy":"Administrar esta instancia de Galaxy","Visualize datasets":"Visualizar conjuntos de datos","Access published resources":"Acceder a los recursos publicados","Chain tools into workflows":"Encadenar herramientas en flujos de trabajo","Analysis home view":"Vista de inicio del análisis",Tools:"Herramientas","Show favorites":"Mostrar favoritos","search tools":"Buscar herramientas","All workflows":"Todos los flujos de trabajo","Upload Data":"Cargar Datos",History:"Historial","History Lists":"Listas de historiales","History Actions":"Acciones del historial","(empty)":"(vacío)","Histories Shared with Me":"Historiales compartidos conmigo","Current History":"Historial actual","Create New":"Crear nuevo","Create new history":"Crear historial huevo",Copy:"Copiar","Share or Publish":"Compartir o Publicar","Show Structure":"Mostrar Estructura","Extract Workflow":"Extraer Flujo de Trabajo","Set Permissions":"Establecer permisos","Make Private":"Hacer privado","Beta Features":"Características Beta","Use Beta History Panel":"Utilizar el panel de historial Beta","Delete Permanently":"Borrar Permanentemente","Dataset Actions":"Acciones de Conjuntos de Datos","Copy Datasets":"Copiar Conjuntos de Datos","Dataset Security":"Seguridad del Conjunto de Datos","Resume Paused Jobs":"Reanudar Trabajos en Pausa","Collapse Expanded Datasets":"Contraer Conjuntos de Datos Expandidos","Unhide Hidden Datasets":"Mostrar Conjuntos de Datos Ocultos","Delete Hidden Datasets":"Eliminar Conjuntos de Datos Ocultos","Purge Deleted Datasets":"Eliminar Definitivamente los Conjuntos de Datos Eliminados",Downloads:"Descargas","Export Tool Citations":"Exportar las Citas de la Herramienta","Export History to File":"Exportar Historial a un Archivo","Other Actions":"Otras Acciones","Import from File":"Importar desde Archivo",Webhooks:"WebHooks","See Galaxy Training Materials":"Ver materiales de entrenamiento de Galaxy","This history is empty":"Este historial está vacío","No matching datasets found":"No se encontraron conjuntos de datos coincidentes","An error occurred while getting updates from the server":"Se ha producido un error al obtener actualizaciones desde el servidor","Please contact a Galaxy administrator if the problem persists":"Por favor, contacte a un administrador de Galaxy si el problema persiste","search datasets":"buscar conjuntos de datos","search all datasets":"buscar todos los conjuntos de datos","search histories":"buscar los historiales","Search tips":"Consejos de búsqueda","clear search (esc)":"limpiar búsqueda (esc)","clear search":"limpiar búsqueda","You are currently viewing a deleted history!":"¡Estás viendo un historial eliminado!","You are over your disk quota":"Has sobrepasado tu espacio disponible de disco","Tool execution is on hold until your disk usage drops below your allocated quota":"La ejecución de la herramienta está en espera hasta que el uso del disco caiga por debajo de tu espacio de disco disponible",All:"Todas",None:"Ninguna","For all selected":"Para los seleccionados","Edit history tags":"Editar etiquetas de historial","Edit history annotation":"Editar anotación del historial","Click to rename history":"Haz clic para cambiar el nombre del historial","Rename history...":"Cambiar el nombre del historial","Switch to":"Cambiar a","Operations on multiple datasets":"Operaciones en conjuntos de datos múltiples","Hide datasets":"Ocultar conjuntos de datos","Unhide datasets":"Mostrar conjuntos de datos","Delete datasets":"Borrar conjuntos de datos","Undelete datasets":"Recuperar conjuntos de datos","Permanently delete datasets":"Eliminar permanentemente conjuntos de datos","This will permanently remove the data in your datasets. Are you sure?":"Esta acción eliminará datos permanentemente. ¿Estás seguro que deseas continuar?",Dataset:"Conjunto de datos",Annotation:"Anotación","This history is empty. Click 'Get Data' on the left tool menu to start":"Este historial está vacío. Haz clic en 'Obtener datos' en el menú de herramientas de la izquierda para iniciar","You must be logged in to create histories":"Debes haber iniciado sesión para crear historiales","Search Workflows":"Buscar Flujos de Trabajo",Updated:"Actualizado",Sharing:"Compartir",Bookmarked:"Página marcada",Create:"Crear",Import:"Importar","Unable to purge dataset":"No se puede eliminar permanentemente el conjunto de datos","Cannot display datasets removed from disk":"No se pueden mostrar conjuntos de datos que han sido eliminados del disco","This dataset must finish uploading before it can be viewed":"Este conjunto de datos debe terminar de cargar antes de visualizarlo","This dataset is not yet viewable":"Este conjunto de datos aún no se puede ver","View data":"Ver datos",Download:"Descargar","Download dataset":"Descargar conjunto de datos","Additional files":"Archivos adicionales","View details":"Ver detalles","This is a new dataset and not all of its data are available yet":"Este es un nuevo conjunto de datos y aún no está completamente disponible","You do not have permission to view this dataset":"No tienes permiso para ver este conjunto de datos","The job creating this dataset was cancelled before completion":"El trabajo que estaba creando este conjunto de datos se canceló antes de completarse","This job is waiting to run":"Este trabajo está a la espera de ser ejecutado","This dataset is currently uploading":"Este conjunto de datos se está cargando actualmente","Metadata is being auto-detected":"Se han detectado metadatos automáticamente","This job is currently running":"Este trabajo se está siendo ejecutando actualmente",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'Este trabajo está en pausa. Utilice la opción "Reanudar trabajos en pausa" en el menú de historial para reanudar',"An error occurred with this dataset":"Se ha producido un error con este conjunto de datos","No data":"Sin datos","An error occurred setting the metadata for this dataset":"Se ha producido un error al establecer los metadatos de este conjunto de datos","There was an error getting the data for this dataset":"Hubo un error al extraer el contenido de este conjunto de datos","This dataset has been deleted and removed from disk":"Este conjunto de datos ha sido eliminado permanentemente del disco","This dataset has been deleted":"Este conjunto de datos ha sido eliminado","This dataset has been hidden":"Este conjunto de datos ha sido ocultado","Copy link":"Copiar vínculo","Visualize this data":"Visualizar estos datos",format:"formato",database:"base de datos","Edit attributes":"Editar atributos","Cannot edit attributes of datasets removed from disk":"No se pueden editar los atributos de conjuntos de datos que han sido eliminados del disco","Undelete dataset to edit attributes":"Recuperar el conjunto de datos para editar atributos","This dataset must finish uploading before it can be edited":"Este conjunto de datos debe terminar de cargar antes de que pueda ser editado","This dataset is not yet editable":"Este conjunto de datos aún no se puede editar",Delete:"Borrar","Dataset is already deleted":"El conjunto de datos ya ha sido eliminado","View or report this error":"Ver o informar de este error","Run this job again":"Ejecutar este trabajo de nuevo",Visualize:"Visualizar","Visualize in":"Visualizar en","Undelete it":"Recuperar","Permanently remove it from disk":"Eliminar permanentemente del disco","Unhide it":"Mostrar","You may be able to":"Podrás","set it manually or retry auto-detection":"configurar manualmente o volver a intentar la detección automática","Edit dataset tags":"Editar etiquetas del conjunto de datos","Edit dataset annotation":"Editar anotación del conjunto de datos","Create Visualization":"Crear Visualización","search visualizations":"buscar visualizaciones",Library:"Biblioteca","exclude restricted":"Excluir restringidos","include deleted":"incluir eliminada",Description:"Descripción",Synopsis:"Sinopsis","per page":"por página",total:"total",Cancel:"Cancelar",Edit:"Editar",Manage:"Administrar",Tags:"Etiquetas","Edit annotation":"Editar anotación","Tool Help":"Ayuda de herramienta","Reset passwords":"Restablecer contraseña","Search Tool Shed":"Buscar en el Tool Shed","Monitor installing repositories":"Monitorear instalación de repositorios","Manage installed tools":"Administrar herramientas instaladas","Reset metadata":"Reconfigurar metadatos","Download local tool":"Descargar herramienta local","Tool lineage":"Linaje de herramientas","Reload a tool's configuration":"Volver a cargar la configuración de una herramienta","View Tool Error Logs":"Ver registros de error de la herramienta","Manage Allowlist":"Administrar lista de permisos","Manage Tool Dependencies":"Administrar dependencias de herramienta",Users:"Usuarios",Groups:"Grupos","API keys":"Llaves API","Impersonate a user":"Acceder como otro usuario",Data:"Datos",Quotas:!1,Roles:!1,"Local data":"Datos locales","Form Definitions":"Definiciones de formulario","Enable/Disable Window Manager":"Habilitar/Deshabilitar Window Manager","Show/Hide Window Manager":"Mostrar/Ocultar Window Manager",Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":"Cualquier comentario adicional que puedas proporcionar sobre lo que estabas haciendo en el momento que se produjo el error.","Your email address":"Tu dirección de correo electrónico",Report:"Reporte","Error Report":"Reporte de error","Dataset details":"Detalles del conjunto de datos","Save permissions.":"Guardar permisos","Change the datatype to a new type.":"Cambiar el tipo de datos a uno nuevo","Convert the datatype to a new format.":"Convertir el tipo de datos a un formato nuevo","Save attributes of the dataset.":"Guardar los atributos del conjunto de datos","Change data type":"Cambiar el tipo de datos","Edit Dataset Attributes":"Editar atributos del conjunto de datos","Save permissions":"Guardar permisos","Manage dataset permissions":"Administrar permisos del conjunto de datos","Change datatype":"Cambiar tipo de datos","Convert datatype":"Convertir tipo de datos","Convert to new format":"Convertir a formato nuevo","This will change the datatype of the existing dataset but not modify its contents. Use this if Galaxy has incorrectly guessed the type of your dataset.":"Esto cambiará el tipo de datos del conjunto de datos existente pero no modificará su contenido. Utilícelo si Galaxy identificó incorrectamente el tipo de su conjunto de datos",Attributes:"Atributos",Convert:"Convertir",Datatypes:"Tipos de datos",Permissions:"Permisos","Auto-detect":"Autodetectar",Save:"Guardar",Name:"Nombre",Info:"Información","Add an annotation or notes to a dataset; annotations are available when a history is viewed.":"Agregar una anotación o notas al conjunto de datos; las anotaciones están disponibles cuando se visualiza un historial","Import into History":"Importar al historial","Location Details":"Detalles de ubicación","Deleting selected items":"Eliminar elementos seleccionados","Please select folders or files":"Por favor, seleccione directorios o archivos","Please enter paths to import":"Por favor, introduce las rutas a importar","Adding datasets from your history":"Agregar conjuntos de datos desde tu historial","Create New Folder":"Crear Nuevo Directorio","Create New Library":"Crear Nueva Biblioteca",Tours:!1,"Click here to sign out of all sessions.":"Haz clic aquí para salir de todas las sesiones","Add or remove custom builds using history datasets.":"Agregar o eliminar construcciones personalizadas usando conjuntos de datos del historial","Associate OpenIDs with your account.":"Asociar OpenIDs a su cuenta","Customize your Toolbox by displaying or omitting sets of Tools.":"Personalizar Toolbox para mostrar u omitir conjuntos de herramientas","Access your current API key or create a new one.":"Acceder a su clave API actual o crear una nueva","Allows you to change your login credentials.":"Permitir modificar tus credenciales de inicio de sesión ","Edit your email, addresses and custom parameters or change your public name.":"Edita tus direcciones de correo y personaliza los parámetros o cambia tu nombre público.","User preferences":"Preferencias de usuario","You are signed in as":"Iniciaste sesión como","Sign out":"Cerrar sesión","Manage custom builds":"Administrar construcciones personalizadas","Manage OpenIDs":"Administrar OpenIDs","Manage Toolbox filters":"Administrar filtros de Toolbox","Manage API Key":"Administrar clave API","Set dataset permissions for new histories":"Establecer permisos de conjuntos de datos para historiales nuevos","Change Password":"Cambiar contraseña","Manage Information":"Manejar información","Manage Third-Party Identities":"Manejar identidades de terceros","Connect or disconnect access to your third-party identities.":"Conectar o desconectar el acceso a tus identidades de terceros.","Set Dataset Permissions for New Histories":"Establecer los permisos de los conjuntos de datos para los nuevos historiales","Grant others default access to newly created histories. Changes made here will only affect histories created after these settings have been stored.":"Otorga a otras personas acceso predeterminado a los historiales recién creados. Los cambios que aquí realices solo afectarán a los historiales creados después de que se hayan almacenado estos ajustes.","Make All Data Private":"Privatizar todos mis datos","Click here to make all data private.":"Haz clic aquí para privatizar todos tus datos","Manage Cloud Authorization":"Manejar autorización para la nube","Add or modify the configuration that grants Galaxy to access your cloud-based resources":"Agregar o modificar la configuración que permite que Galaxy acceda a tus recursos en la nube","Manage Toolbox Filters":"Manejar filtros de la caja de herramientas","Manage Custom Builds":"Administrar compilaciones personalizadas","Enable notifications":"Habilitar notificaciones","Allow push and tab notifcations on job completion. To disable, revoke the site notification privilege in your browser.":"Permitir las notificaciones automáticas y de pestaña al completar un trabajo. Para deshabilitar, en tu navegador revoca los privilegios de notificaciones de sitio","Delete Account":"Eliminar cuenta","Delete your account on this Galaxy server.":"Eliminar tu cuenta del servidor Galaxy.","You are using":"Estás utilizando","of disk space in this Galaxy instance.":"de espacio de disco en esta instancia de Galaxy.","Is your usage more than expected? See the":"¿Utilizarás más espacio del que planeabas originalmente? Ve la",documentation:"documentación","for tips on how to find all of the data in your account.":"para consultar consejos sobre el cómo encontrar todos los datos de tu cuenta","Email address":"Dirección de correo electrónico","If you change your email address you will receive an activation link in the new mailbox and you have to activate your account by visiting it.":"Si cambias tu dirección de correo electrónico recibirás un vínculo de activación en tu nuevo correo. Debes activar tu cuenta recurriendo a esta notificación.","Public name":"Nombre público","Your public name is an identifier that will be used to generate addresses for information you share publicly. Public names must be at least three characters in length and contain only lower-case letters, numbers, dots, underscores, and dashes ('.', '_', '-').":"Tu nombre público es un identificador que será utilizado para generar direcciones de información que compartas al público. Los nombres públicos deben contener al menos tres caracteres de longitud, solo letras minúsculas, números o el símbolo '-'. ",Address:"Dirección","Insert address":"Escribir dirección","Do you want to be able to re-use equivalent jobs ?":"¿Deseas poder reutilizar trabajos equivalentes?",No:"No",Yes:"Sí","If you select yes, you will be able to select for each tool and workflow run if you would like to use this feature.":"Si seleccionas ‘sí’, podrás seleccionar si deseas utilizar esta función para cada herramienta y ejecución de flujo de trabajo.",Localization:"Ubicación","Prefered language":"Idioma de preferencia","Use distributed compute resources":"Utilizar recursos de cómputo distribuido","Remote resource id":"Identificador de recurso remoto","default - Galaxy will decide where to put your jobs":"Por defecto - Galaxy decidirá en donde colocar tus trabajos","Your EGA (European Genome Archive) Account":"Tu cuenta EGA (European Genome Archive)",Username:"Nombre de usuario",Password:"Contraseña","Confirm password":"Confirmar contraseña","Your Dropbox Account":"Tu cuenta Dropbox","Dropbox access token":"Token de acceso de Dropbox","Your B2DROP Account":"Tu cuenta B2DROP","Your OMERO instance connection details":"Detalles de conección de tu instancia OMERO","Your ENA Webin account details":"Detalles de tu cuenta Webin de ENA","ENA Webin ID":"Identificador Webin de ENA","Your CDS API Key":"Tu llave CDS API",Key:"Llave","Configured Tool Sheds":"Tool Sheds configurados","Repository Queue":"Cola de repositorio","Repository Status":"Estado del repositorio","Workflows Missing Tools":"Flujos de trabajo a los que les faltan herramientas","See in Tool Shed":"Ver en Tool Shed",Requirements:!1,Share:!1,"Workflow submission failed":"Error en el envío de flujo de trabajo","Run workflow":"Ejecutar flujo de trabajo","Job submission failed":"Error en envío de trabajo",Execute:!1,"Tool request failed":"Error en solicitud de herramienta","Copy and insert individual steps":"Copiar e insertar pasos individuales",Warning:!1,"An email notification will be sent when the job has completed.":"Se enviará una notificación por correo electrónico cuando el trabajo haya sido completado","Add a step label.":"Agregar una etiqueta de paso","Assign columns":"Asignar columnas","Delete this repeat block":"Borrar este bloque repetido",placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":"Descargar de la red o cargar desde disco",Collection:!1,Composite:!1,Regular:!1,"Upload configuration":"Cargar configuración","FTP files":"Archivos FTP",Reset:!1,Pause:!1,Start:!1,"Choose FTP file":"Elegir archivo FTP","Choose local file":"Elegir archivo local",Build:!1,"Choose FTP files":"Elegir archivos FTP","Choose local files":"Elegir archivos locales",Select:!1,"Create a collection of paired datasets":"Crear una colección de conjuntos de datos pareados","View all histories":"Ver todos los historiales","History options":"Opciones de historial","Refresh history":"Actualizar historial","View error logs":"Ver registros de error","View lineage":"Ver linaje","Manage dependencies":"Administrar dependencias","Manage allowlist":"Administrar lista de permitidos","Manage metadata":"Administrar metadatos","Manage tools":"Administrar herramientas","Monitor installation":"Monitorear instalación","Install new tools":"Instalar nuevas herramientas","Tool Management":"Gestión de herramienta",Forms:!1,"User Management":"Gestión de usuario","Manage jobs":"Administrar trabajos","Display applications":"Mostrar aplicaciones","Data tables":"Tablas de datos","Data types":"Tipos de datos",Server:!1,"Could Not Save":"No se pudo guardar","Saving...":"Guardando",Settings:!1,"Add tracks":"Agregar pistas","New Visualization":"Nueva visualización","Add Data to Saved Visualization":"Agregar datos a visualización guardada","Close visualization":"Cerrar visualización",Circster:!1,Bookmarks:!1,"Add group":"Agregar grupo","Remove parameter from tree":"Eliminar parámetro del árbol","Add parameter to tree":"Agregar parámetro al árbol",Remove:!1,"Select datasets for new tracks":"Seleccionar conjuntos de datos para nuevas pistas","Select a dataset to visualize:":"Seleccionar un conjunto de datos para visualizar",Libraries:!1,"Zoom out":"Alejar","Zoom in":"Acercar","Phyloviz Help":"Ayuda de PhyloViz","Save visualization":"Guardar visualización","PhyloViz Settings":"Ajustes de PhyloViz",Title:"Título","Filtering Dataset":"Filtrando conjunto de datos","Filter Dataset":"Filtrar conjunto de datos","Show individual tracks":"Mostrar pistas individuales","Trackster Error":"Error de Trackster","Tool parameter space visualization":"Visualización del espacio de parámetros de la herramienta",Tool:"Herramienta","Set as overview":"Establecer como descripción general","Set display mode":"Establecer modo de visualización",Filters:!1,"Show composite track":"Mostrar pista compuesta","Edit settings":"Editar configuración","Test title":!1,"Test Title":"Título de prueba","Test button":"Botón de prueba",title:"título","Create new Build":"Crear nueva construcción","Delete custom build.":"Eliminar construcción personalizada","Provide the data source.":"Proporcionar la fuente de datos","Next in History":"Siguiente en historial","Previous in History":"Anterior en historial","Chat online":"Conversar en línea","Multiple collections":"Varias colecciones","Dataset collections":"Colecciones de conjuntos de datos","Dataset collection":"Colección de conjunto de datos","Multiple datasets":"Varios conjuntos de datos","Single dataset":"Conjunto de datos único","Download from URL or upload files from disk":"Descargar desde URL o cargar archivos desde disco","You can load your own data":"Puedes cargar tus propios datos",or:"u","get data from an external source":"obtenerlos de una fuente externa","You can ":"Puedes ","load your own data":"cargar tus propios datos"," or ":" u ","tool tooltip":"Mensaje de información sobre herramientas"},init:function(e){e||(e="undefined"!=typeof window&&window._i18n&&window._i18n.locale?window._i18n.locale:"undefined"!=typeof document&&document.documentElement.lang?document.documentElement.lang:"undefined"!=typeof navigator&&(navigator.languages||navigator.language||navigator.userLanguage)?((e=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||"root").toLowerCase():"root");var t=this["__"+e]||this.__root;if(t)for(var n in t)this[n]=t[n];var i=function(e,t){for(var n in t)switch(typeof e[n]){case"undefined":e[n]=t[n];break;case"object":i(e[n],t[n])}};i(this,this.__root)}};t.init(),e.exports=t},55806:(e,t,n)=>{var i=n(76233),o=n(27672);void 0===o.$&&(o.$=i),void 0===o.jQuery&&(o.jQuery=i),e.exports=i},53515:(e,t,n)=>{var i=n(56667),o=n(27672);void 0===o.bundleEntries&&(o.bundleEntries=i),e.exports=i},40961:(e,t,n)=>{var i=n(59687),o=n(27672);void 0===o.config&&(o.config=i),e.exports=i},92372:function(e,t,n){var i,o=n(55806);"undefined"!=typeof self&&self,i=function(e,t,n){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=206)}([function(e,t,n){"use strict";t.__esModule=!0,t.HTML_CHARACTERS=void 0,t.getParent=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,i=null;null!=e;){if(n===t){i=e;break}e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e=e.host:(n++,e=e.parentNode)}return i},t.closest=d,t.closestDown=function(e,t,n){for(var i=[];e&&(e=d(e,t,n))&&(!n||n.contains(e));)i.push(e),e=e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.host:e.parentNode;var o=i.length;return o?i[o-1]:null},t.isChildOf=function(e,t){var n=e.parentNode,i=[];for("string"==typeof t?i=Array.prototype.slice.call(document.querySelectorAll(t),0):i.push(t);null!=n;){if(i.indexOf(n)>-1)return!0;n=n.parentNode}return!1},t.isChildOfWebComponentTable=function(e){var t,n=!1;function i(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="hot-table".toUpperCase()}for(t=c(e);null!=t;){if(i(t)){n=!0;break}if(t.host&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(n=i(t.host))break;t=t.host}t=t.parentNode}return n},t.polymerWrap=c,t.polymerUnwrap=u,t.index=function(e){var t=0;if(e.previousSibling)for(;e=e.previousSibling;)++t;return t},t.overlayContainsElement=function(e,t){var n=document.querySelector(".ht_clone_"+e);return n?n.contains(t):null},t.hasClass=function(e,t){return i(e,t)},t.addClass=function(e,t){return o(e,t)},t.removeClass=function(e,t){return a(e,t)},t.removeTextNodes=function e(t,n){if(3===t.nodeType)n.removeChild(t);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(t.nodeName)>-1)for(var i=t.childNodes,o=i.length-1;o>=0;o--)e(i[o],t)},t.empty=m,t.fastInnerHTML=function(e,t){v.test(t)?e.innerHTML=t:y(e,t)},t.fastInnerText=y,t.isVisible=function e(t){for(var n=t;u(n)!==document.documentElement;){if(null===n)return!1;if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(n.host){if(n.host.impl)return e(n.host.impl);if(n.host)return e(n.host);throw new Error("Lost in Web Components world")}return!1}if("none"===n.style.display)return!1;n=n.parentNode}return!0},t.offset=function(e){var t,n,i,o,a;if(o=document.documentElement,(0,l.hasCaptionProblem)()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName)return{top:(a=e.getBoundingClientRect()).top+(window.pageYOffset||o.scrollTop)-(o.clientTop||0),left:a.left+(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0)};for(t=e.offsetLeft,n=e.offsetTop,i=e;(e=e.offsetParent)&&e!==document.body;)t+=e.offsetLeft,n+=e.offsetTop,i=e;return i&&"fixed"===i.style.position&&(t+=window.pageXOffset||o.scrollLeft,n+=window.pageYOffset||o.scrollTop),{left:t,top:n}},t.getWindowScrollTop=b,t.getWindowScrollLeft=w,t.getScrollTop=function(e){return e===window?b():e.scrollTop},t.getScrollLeft=function(e){return e===window?w():e.scrollLeft},t.getScrollableElement=function(e){for(var t,n,i,o=e.parentNode,a=["auto","scroll"],s="",r="",l="",d="";o&&o.style&&document.body!==o;){if(t=o.style.overflow,n=o.style.overflowX,i=o.style.overflowY,"scroll"==t||"scroll"==n||"scroll"==i)return o;if(window.getComputedStyle&&(r=(s=window.getComputedStyle(o)).getPropertyValue("overflow"),l=s.getPropertyValue("overflow-y"),d=s.getPropertyValue("overflow-x"),"scroll"===r||"scroll"===d||"scroll"===l))return o;if(o.clientHeight<=o.scrollHeight+1&&(-1!==a.indexOf(i)||-1!==a.indexOf(t)||-1!==a.indexOf(r)||-1!==a.indexOf(l)))return o;if(o.clientWidth<=o.scrollWidth+1&&(-1!==a.indexOf(n)||-1!==a.indexOf(t)||-1!==a.indexOf(r)||-1!==a.indexOf(d)))return o;o=o.parentNode}return window},t.getTrimmingContainer=function(e){for(var t=e.parentNode;t&&t.style&&document.body!==t;){if("visible"!==t.style.overflow&&""!==t.style.overflow)return t;if(window.getComputedStyle){var n=window.getComputedStyle(t);if("visible"!==n.getPropertyValue("overflow")&&""!==n.getPropertyValue("overflow"))return t}t=t.parentNode}return window},t.getStyle=function(e,t){if(e){if(e===window)return"width"===t?window.innerWidth+"px":"height"===t?window.innerHeight+"px":void 0;var n,i=e.style[t];return""!==i&&void 0!==i?i:""!==(n=k(e))[t]&&void 0!==n[t]?n[t]:void 0}},t.getComputedStyle=k,t.outerWidth=function(e){return e.offsetWidth},t.outerHeight=function(e){return(0,l.hasCaptionProblem)()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName?e.offsetHeight+e.firstChild.offsetHeight:e.offsetHeight},t.innerHeight=function(e){return e.clientHeight||e.innerHeight},t.innerWidth=function(e){return e.clientWidth||e.innerWidth},t.addEvent=function(e,t,n){window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEvent=function(e,t,n){window.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getCaretPosition=function(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var n=e.createTextRange(),i=n.duplicate();return n.moveToBookmark(t.getBookmark()),i.setEndPoint("EndToStart",n),i.text.length}return 0},t.getSelectionEndPosition=function(e){if(e.selectionEnd)return e.selectionEnd;if(document.selection){var t=document.selection.createRange();return null==t?0:e.createTextRange().text.indexOf(t.text)+t.text.length}return 0},t.getSelectionText=function(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(e=document.selection.createRange().text),e},t.setCaretPosition=function(e,t,n){if(void 0===n&&(n=t),e.setSelectionRange){e.focus();try{e.setSelectionRange(t,n)}catch(a){var i=e.parentNode,o=i.style.display;i.style.display="block",e.setSelectionRange(t,n),i.style.display=o}}else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",n),a.moveStart("character",t),a.select()}},t.getScrollbarWidth=function(){return void 0===_&&(_=function(){var e=document.createElement("div");e.style.height="200px",e.style.width="100%";var t=document.createElement("div");t.style.boxSizing="content-box",t.style.height="150px",t.style.left="0px",t.style.overflow="hidden",t.style.position="absolute",t.style.top="0px",t.style.width="200px",t.style.visibility="hidden",t.appendChild(e),(document.body||document.documentElement).appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var i=e.offsetWidth;return n==i&&(i=t.clientWidth),(document.body||document.documentElement).removeChild(t),n-i}()),_},t.hasVerticalScrollbar=function(e){return e.offsetWidth!==e.clientWidth},t.hasHorizontalScrollbar=function(e){return e.offsetHeight!==e.clientHeight},t.setOverlayPosition=function(e,t,n){(0,r.isIE8)()||(0,r.isIE9)()?(e.style.top=n,e.style.left=t):(0,r.isSafari)()?e.style["-webkit-transform"]="translate3d("+t+","+n+",0)":e.style.transform="translate3d("+t+","+n+",0)"},t.getCssTransform=function(e){var t;return e.style.transform&&""!==(t=e.style.transform)?["transform",t]:e.style["-webkit-transform"]&&""!==(t=e.style["-webkit-transform"])?["-webkit-transform",t]:-1},t.resetCssTransform=function(e){e.style.transform&&""!==e.style.transform?e.style.transform="":e.style["-webkit-transform"]&&""!==e.style["-webkit-transform"]&&(e.style["-webkit-transform"]="")},t.isInput=C,t.isOutsideInput=function(e){return C(e)&&-1==e.className.indexOf("handsontableInput")&&-1==e.className.indexOf("copyPaste")};var i,o,a,s,r=n(27),l=n(41);function d(e,t,n){for(;null!=e&&e!==n;){if(e.nodeType===Node.ELEMENT_NODE&&(t.indexOf(e.nodeName)>-1||t.indexOf(e)>-1))return e;e=e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.host:e.parentNode}return null}function c(e){return"undefined"!=typeof Polymer&&"function"==typeof wrap?wrap(e):e}function u(e){return"undefined"!=typeof Polymer&&"function"==typeof unwrap?unwrap(e):e}function h(e){var t=[];if(!e||!e.length)return t;for(var n=0;e[n];)t.push(e[n]),n++;return t}if(document.documentElement.classList){var p=((s=document.createElement("div")).classList.add("test","test2"),s.classList.contains("test2"));i=function(e,t){return void 0!==e.classList&&"string"==typeof t&&""!==t&&e.classList.contains(t)},o=function(e,t){if("string"==typeof t&&(t=t.split(" ")),(t=h(t)).length>0)if(p)e.classList.add.apply(e.classList,t);else for(var n=0;t&&t[n];)e.classList.add(t[n]),n++},a=function(e,t){if("string"==typeof t&&(t=t.split(" ")),(t=h(t)).length>0)if(p)e.classList.remove.apply(e.classList,t);else for(var n=0;t&&t[n];)e.classList.remove(t[n]),n++}}else{var f=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)")};i=function(e,t){return void 0!==e.className&&f(t).test(e.className)},o=function(e,t){var n=0,i=e.className;if("string"==typeof t&&(t=t.split(" ")),""===i)i=t.join(" ");else for(;t&&t[n];)f(t[n]).test(i)||(i+=" "+t[n]),n++;e.className=i},a=function(e,t){var n=0,i=e.className;for("string"==typeof t&&(t=t.split(" "));t&&t[n];)i=i.replace(f(t[n])," ").trim(),n++;e.className!==i&&(e.className=i)}}function m(e){for(var t;t=e.lastChild;)e.removeChild(t)}var _,v=t.HTML_CHARACTERS=/(<(.*)>|&(.*);)/,g=!!document.createTextNode("test").textContent;function y(e,t){var n=e.firstChild;n&&3===n.nodeType&&null===n.nextSibling?g?n.textContent=t:n.data=t:(m(e),e.appendChild(document.createTextNode(t)))}function b(){var e=window.scrollY;return void 0===e&&(e=document.documentElement.scrollTop),e}function w(){var e=window.scrollX;return void 0===e&&(e=document.documentElement.scrollLeft),e}function k(e){return e.currentStyle||document.defaultView.getComputedStyle(e)}function C(e){return e&&(["INPUT","SELECT","TEXTAREA"].indexOf(e.nodeName)>-1||"true"===e.contentEditable)}},function(e,t,n){"use strict";function i(e,t,n,i){var o=-1,a=e;Array.isArray(e)||(a=Array.from(e));var s=a.length;for(i&&s&&(n=a[++o]);++o<s;)n=t(n,a[o],o,a);return n}function o(e,t){var n=-1,i=e;Array.isArray(e)||(i=Array.from(e));for(var o=i.length;++n<o&&!1!==t(i[n],n,i););return e}function a(e){return i(e,(function(e,t){return e+t}),0)}t.__esModule=!0,t.to2dArray=function(e){for(var t=0,n=e.length;t<n;)e[t]=[e[t]],t++},t.extendArray=function(e,t){for(var n=0,i=t.length;n<i;)e.push(t[n]),n++},t.pivot=function(e){var t=[];if(!e||0===e.length||!e[0]||0===e[0].length)return t;for(var n=e.length,i=e[0].length,o=0;o<n;o++)for(var a=0;a<i;a++)t[a]||(t[a]=[]),t[a][o]=e[o][a];return t},t.arrayReduce=i,t.arrayFilter=function(e,t){var n=-1,i=e;Array.isArray(e)||(i=Array.from(e));for(var o=i.length,a=[],s=-1;++n<o;){var r=i[n];t(r,n,i)&&(a[++s]=r)}return a},t.arrayMap=function(e,t){var n=-1,i=e;Array.isArray(e)||(i=Array.from(e));for(var o=i.length,a=[],s=-1;++n<o;){var r=i[n];a[++s]=t(r,n,i)}return a},t.arrayEach=o,t.arraySum=a,t.arrayMax=function(e){return i(e,(function(e,t){return e>t?e:t}),Array.isArray(e)?e[0]:void 0)},t.arrayMin=function(e){return i(e,(function(e,t){return e<t?e:t}),Array.isArray(e)?e[0]:void 0)},t.arrayAvg=function(e){return e.length?a(e)/e.length:0},t.arrayFlatten=function e(t){return i(t,(function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])},t.arrayUnique=function(e){var t=[];return o(e,(function(e){-1===t.indexOf(e)&&t.push(e)})),t}},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.duckSchema=function e(t){var n;return Array.isArray(t)?n=[]:(n={},l(t,(function(t,o){"__children"!==o&&(t&&"object"===(void 0===t?"undefined":i(t))&&!Array.isArray(t)?n[o]=e(t):Array.isArray(t)?t.length&&"object"===i(t[0])&&!Array.isArray(t[0])?n[o]=[e(t[0])]:n[o]=[]:n[o]=null)}))),n},t.inherit=function(e,t){return t.prototype.constructor=t,e.prototype=new t,e.prototype.constructor=e,e},t.extend=function(e,t){return l(t,(function(t,n){e[n]=t})),e},t.deepExtend=function e(t,n){l(n,(function(o,a){n[a]&&"object"===i(n[a])?(t[a]||(Array.isArray(n[a])?t[a]=[]:"[object Date]"===Object.prototype.toString.call(n[a])?t[a]=n[a]:t[a]={}),e(t[a],n[a])):t[a]=n[a]}))},t.deepClone=s,t.clone=function(e){var t={};return l(e,(function(e,n){t[n]=e})),t},t.mixin=function(e){e.MIXINS||(e.MIXINS=[]);for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return(0,o.arrayEach)(n,(function(t){e.MIXINS.push(t.MIXIN_NAME),l(t,(function(t,n){if(void 0!==e.prototype[n])throw new Error("Mixin conflict. Property '"+n+"' already exist and cannot be overwritten.");var i;"function"==typeof t?e.prototype[n]=t:Object.defineProperty(e.prototype,n,{get:function(e,t){return e="_"+e,function(){return void 0===this[e]&&(this[e]=function(e){return(Array.isArray(e)||r(e))&&(e=s(e)),e}(t)),this[e]}}(n,t),set:(i=n,i="_"+i,function(e){this[i]=e}),configurable:!0})}))})),e},t.isObjectEqual=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.isObject=r,t.defineGetter=function(e,t,n,i){i.value=n,i.writable=!1!==i.writable,i.enumerable=!1!==i.enumerable,i.configurable=!1!==i.configurable,Object.defineProperty(e,t,i)},t.objectEach=l,t.getProperty=function(e,t){var n=t.split("."),i=e;return l(n,(function(e){if(void 0===(i=i[e]))return i=void 0,!1})),i},t.deepObjectSize=function(e){return r(e)?function e(t){var n=0;return r(t)?l(t,(function(t){n+=e(t)})):n++,n}(e):0},t.createObjectPropListener=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",i="_"+n,o=(a(t={_touched:!1},i,e),a(t,"isTouched",(function(){return this._touched})),t);return Object.defineProperty(o,n,{get:function(){return this[i]},set:function(e){this._touched=!0,this[i]=e},enumerable:!0,configurable:!0}),o},t.hasOwnProperty=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var o=n(1);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return"object"===(void 0===e?"undefined":i(e))?JSON.parse(JSON.stringify(e)):e}function r(e){return"[object Object]"==Object.prototype.toString.call(e)}function l(e,t){for(var n in e)if((!e.hasOwnProperty||e.hasOwnProperty&&Object.prototype.hasOwnProperty.call(e,n))&&!1===t(e[n],n,e))break;return e}},function(e,t,n){var i=n(15),o=n(39),a=n(31),s=n(30),r=n(32),l="prototype",d=function(e,t,n){var c,u,h,p,f=e&d.F,m=e&d.G,_=e&d.S,v=e&d.P,g=e&d.B,y=m?i:_?i[t]||(i[t]={}):(i[t]||{})[l],b=m?o:o[t]||(o[t]={}),w=b[l]||(b[l]={});for(c in m&&(n=t),n)h=((u=!f&&y&&void 0!==y[c])?y:n)[c],p=g&&u?r(h,i):v&&"function"==typeof h?r(Function.call,h):h,y&&s(y,c,h,e&d.U),b[c]!=h&&a(b,c,p),v&&w[c]!=h&&(w[c]=h)};i.core=o,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,e.exports=d},function(e,t,n){"use strict";t.__esModule=!0,t.Viewport=t.TableRenderer=t.Table=t.Settings=t.Selection=t.Scroll=t.Overlays=t.Event=t.Core=t.default=t.Border=t.TopLeftCornerOverlay=t.TopOverlay=t.LeftOverlay=t.DebugOverlay=t.RowFilter=t.ColumnFilter=t.CellRange=t.CellCoords=t.ViewportRowsCalculator=t.ViewportColumnsCalculator=void 0,n(98),n(113),n(114),n(118),n(119),n(121),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(143),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(86),n(158),n(159),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(169),n(170),n(171),n(173),n(174),n(175);var i=C(n(176)),o=C(n(177)),a=C(n(56)),s=C(n(87)),r=C(n(178)),l=C(n(179)),d=C(n(228)),c=C(n(229)),u=C(n(230)),h=C(n(231)),p=C(n(188)),f=C(n(180)),m=C(n(181)),_=C(n(182)),v=C(n(183)),g=C(n(232)),y=C(n(184)),b=C(n(185)),w=C(n(186)),k=C(n(187));function C(e){return e&&e.__esModule?e:{default:e}}t.ViewportColumnsCalculator=i.default,t.ViewportRowsCalculator=o.default,t.CellCoords=a.default,t.CellRange=s.default,t.ColumnFilter=r.default,t.RowFilter=l.default,t.DebugOverlay=d.default,t.LeftOverlay=c.default,t.TopOverlay=u.default,t.TopLeftCornerOverlay=h.default,t.Border=p.default,t.default=f.default,t.Core=f.default,t.Event=m.default,t.Overlays=_.default,t.Scroll=v.default,t.Selection=g.default,t.Settings=y.default,t.Table=b.default,t.TableRenderer=w.default,t.Viewport=k.default},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isNumeric=function(e){var t=void 0===e?"undefined":i(e);return"number"==t?!isNaN(e)&&isFinite(e):"string"==t?!!e.length&&(1==e.length?/\d/.test(e):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(e)):"object"==t&&!(!e||"number"!=typeof e.valueOf()||e instanceof Date)},t.rangeEach=function(e,t,n){var i=-1;for("function"==typeof t?(n=t,t=e):i=e-1;++i<=t&&!1!==n(i););},t.rangeEachReverse=function(e,t,n){var i=e+1;for("function"==typeof t&&(n=t,t=0);--i>=t&&!1!==n(i););},t.valueAccordingPercent=function(e,t){return t=parseInt(t.toString().replace("%",""),10),t=parseInt(e*t/100,10)}},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.getListenersCounter=function(){return l};var o=n(0),a=n(2),s=n(41),r=n(13),l=0,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t||this,this.context.eventListeners||(this.context.eventListeners=[])}return i(e,[{key:"addEventListener",value:function(e,t,n){var i=this,o=this.context;function a(e){e=c(o,e),n.call(this,e)}return this.context.eventListeners.push({element:e,event:t,callback:n,callbackProxy:a}),window.addEventListener?e.addEventListener(t,a,!1):e.attachEvent("on"+t,a),l++,function(){i.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){for(var i=this.context.eventListeners.length,o=void 0;i--;)if((o=this.context.eventListeners[i]).event==t&&o.element==e){if(n&&n!=o.callback)continue;this.context.eventListeners.splice(i,1),o.element.removeEventListener?o.element.removeEventListener(o.event,o.callbackProxy,!1):o.element.detachEvent("on"+o.event,o.callbackProxy),l--}}},{key:"clearEvents",value:function(){if(this.context)for(var e=this.context.eventListeners.length;e--;){var t=this.context.eventListeners[e];t&&this.removeEventListener(t.element,t.event,t.callback)}}},{key:"clear",value:function(){this.clearEvents()}},{key:"destroy",value:function(){this.clearEvents(),this.context=null}},{key:"fireEvent",value:function(e,t){var n,i={bubbles:!0,cancelable:"mousemove"!==t,view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};document.createEvent?(n=document.createEvent("MouseEvents")).initMouseEvent(t,i.bubbles,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget||document.body.parentNode):n=document.createEventObject(),e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+t,n)}}]),e}();function c(e,t){var n="HOT-TABLE",i=void 0,l=void 0,c=void 0,u=void 0,h=void 0,p=void 0;if(t.isTargetWebComponent=!1,t.realTarget=t.target,p=t.stopImmediatePropagation,t.stopImmediatePropagation=function(){p.apply(this),(0,r.stopImmediatePropagation)(this)},!d.isHotTableEnv)return t;for(h=(t=(0,o.polymerWrap)(t)).path?t.path.length:0;h--;){if(t.path[h].nodeName===n)i=!0;else if(i&&t.path[h].shadowRoot){u=t.path[h];break}0!==h||u||(u=t.path[h])}return u||(u=t.target),t.isTargetWebComponent=!0,(0,s.isWebComponentSupportedNatively)()?t.realTarget=t.srcElement||t.toElement:((0,a.hasOwnProperty)(e,"hot")||e.isHotTableEnv||e.wtTable)&&((0,a.hasOwnProperty)(e,"hot")?l=e.hot?e.hot.view.wt.wtTable.TABLE:null:e.isHotTableEnv?l=e.view.activeWt.wtTable.TABLE.parentNode.parentNode:e.wtTable&&(l=e.wtTable.TABLE.parentNode.parentNode),c=(0,o.closest)(t.target,[n],l),t.realTarget=c&&l.querySelector(n)||t.target),Object.defineProperty(t,"target",{get:function(){return(0,o.polymerWrap)(u)},enumerable:!0,configurable:!0}),t}t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var i=t.CONTEXT_MENU_ITEMS_NAMESPACE="ContextMenu:items",o=(t.CONTEXTMENU_ITEMS_ROW_ABOVE=i+".insertRowAbove",t.CONTEXTMENU_ITEMS_ROW_BELOW=i+".insertRowBelow",t.CONTEXTMENU_ITEMS_INSERT_LEFT=i+".insertColumnOnTheLeft",t.CONTEXTMENU_ITEMS_INSERT_RIGHT=i+".insertColumnOnTheRight",t.CONTEXTMENU_ITEMS_REMOVE_ROW=i+".removeRow",t.CONTEXTMENU_ITEMS_REMOVE_COLUMN=i+".removeColumn",t.CONTEXTMENU_ITEMS_UNDO=i+".undo",t.CONTEXTMENU_ITEMS_REDO=i+".redo",t.CONTEXTMENU_ITEMS_READ_ONLY=i+".readOnly",t.CONTEXTMENU_ITEMS_CLEAR_COLUMN=i+".clearColumn",t.CONTEXTMENU_ITEMS_COPY=i+".copy",t.CONTEXTMENU_ITEMS_CUT=i+".cut",t.CONTEXTMENU_ITEMS_FREEZE_COLUMN=i+".freezeColumn",t.CONTEXTMENU_ITEMS_UNFREEZE_COLUMN=i+".unfreezeColumn",t.CONTEXTMENU_ITEMS_MERGE_CELLS=i+".mergeCells",t.CONTEXTMENU_ITEMS_UNMERGE_CELLS=i+".unmergeCells",t.CONTEXTMENU_ITEMS_ADD_COMMENT=i+".addComment",t.CONTEXTMENU_ITEMS_EDIT_COMMENT=i+".editComment",t.CONTEXTMENU_ITEMS_REMOVE_COMMENT=i+".removeComment",t.CONTEXTMENU_ITEMS_READ_ONLY_COMMENT=i+".readOnlyComment",t.CONTEXTMENU_ITEMS_ALIGNMENT=i+".align",t.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT=i+".align.left",t.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER=i+".align.center",t.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT=i+".align.right",t.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY=i+".align.justify",t.CONTEXTMENU_ITEMS_ALIGNMENT_TOP=i+".align.top",t.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE=i+".align.middle",t.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM=i+".align.bottom",t.CONTEXTMENU_ITEMS_BORDERS=i+".borders",t.CONTEXTMENU_ITEMS_BORDERS_TOP=i+".borders.top",t.CONTEXTMENU_ITEMS_BORDERS_RIGHT=i+".borders.right",t.CONTEXTMENU_ITEMS_BORDERS_BOTTOM=i+".borders.bottom",t.CONTEXTMENU_ITEMS_BORDERS_LEFT=i+".borders.left",t.CONTEXTMENU_ITEMS_REMOVE_BORDERS=i+".borders.remove",t.CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD=i+".nestedHeaders.insertChildRow",t.CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD=i+".nestedHeaders.detachFromParent",t.CONTEXTMENU_ITEMS_HIDE_COLUMN=i+".hideColumn",t.CONTEXTMENU_ITEMS_SHOW_COLUMN=i+".showColumn",t.CONTEXTMENU_ITEMS_HIDE_ROW=i+".hideRow",t.CONTEXTMENU_ITEMS_SHOW_ROW=i+".showRow",t.FILTERS_NAMESPACE="Filters:"),a=t.FILTERS_CONDITIONS_NAMESPACE=o+"conditions";t.FILTERS_CONDITIONS_NONE=a+".none",t.FILTERS_CONDITIONS_EMPTY=a+".isEmpty",t.FILTERS_CONDITIONS_NOT_EMPTY=a+".isNotEmpty",t.FILTERS_CONDITIONS_EQUAL=a+".isEqualTo",t.FILTERS_CONDITIONS_NOT_EQUAL=a+".isNotEqualTo",t.FILTERS_CONDITIONS_BEGINS_WITH=a+".beginsWith",t.FILTERS_CONDITIONS_ENDS_WITH=a+".endsWith",t.FILTERS_CONDITIONS_CONTAINS=a+".contains",t.FILTERS_CONDITIONS_NOT_CONTAIN=a+".doesNotContain",t.FILTERS_CONDITIONS_BY_VALUE=a+".byValue",t.FILTERS_CONDITIONS_GREATER_THAN=a+".greaterThan",t.FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL=a+".greaterThanOrEqualTo",t.FILTERS_CONDITIONS_LESS_THAN=a+".lessThan",t.FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL=a+".lessThanOrEqualTo",t.FILTERS_CONDITIONS_BETWEEN=a+".isBetween",t.FILTERS_CONDITIONS_NOT_BETWEEN=a+".isNotBetween",t.FILTERS_CONDITIONS_AFTER=a+".after",t.FILTERS_CONDITIONS_BEFORE=a+".before",t.FILTERS_CONDITIONS_TODAY=a+".today",t.FILTERS_CONDITIONS_TOMORROW=a+".tomorrow",t.FILTERS_CONDITIONS_YESTERDAY=a+".yesterday",t.FILTERS_DIVS_FILTER_BY_CONDITION=o+"labels.filterByCondition",t.FILTERS_DIVS_FILTER_BY_VALUE=o+"labels.filterByValue",t.FILTERS_LABELS_CONJUNCTION=o+"labels.conjunction",t.FILTERS_LABELS_DISJUNCTION=o+"labels.disjunction",t.FILTERS_VALUES_BLANK_CELLS=o+"values.blankCells",t.FILTERS_BUTTONS_SELECT_ALL=o+"buttons.selectAll",t.FILTERS_BUTTONS_CLEAR=o+"buttons.clear",t.FILTERS_BUTTONS_OK=o+"buttons.ok",t.FILTERS_BUTTONS_CANCEL=o+"buttons.cancel",t.FILTERS_BUTTONS_PLACEHOLDER_SEARCH=o+"buttons.placeholder.search",t.FILTERS_BUTTONS_PLACEHOLDER_VALUE=o+"buttons.placeholder.value",t.FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE=o+"buttons.placeholder.secondValue"},function(e,t,n){"use strict";t.__esModule=!0,t.getPluginName=t.getRegistredPluginNames=t.getPlugin=t.registerPlugin=void 0;var i,o=n(16),a=(i=o)&&i.__esModule?i:{default:i},s=n(2),r=n(36),l=new WeakMap;t.registerPlugin=function(e,t){e=(0,r.toUpperCaseFirst)(e),a.default.getSingleton().add("construct",(function(){var n=void 0;l.has(this)||l.set(this,{}),(n=l.get(this))[e]||(n[e]=new t(this))})),a.default.getSingleton().add("afterDestroy",(function(){if(l.has(this)){var e=l.get(this);(0,s.objectEach)(e,(function(e){return e.destroy()})),l.delete(this)}}))},t.getPlugin=function(e,t){if("string"!=typeof t)throw Error('Only strings can be passed as "plugin" parameter');var n=(0,r.toUpperCaseFirst)(t);if(l.has(e)&&l.get(e)[n])return l.get(e)[n]},t.getRegistredPluginNames=function(e){return l.has(e)?Object.keys(l.get(e)):[]},t.getPluginName=function(e,t){var n=null;return l.has(e)&&(0,s.objectEach)(l.get(e),(function(e,i){e===t&&(n=i)})),n}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),a=n(1),s=n(194),r=n(8),l=new WeakMap,d=null,c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,o.defineGetter)(this,"hot",t,{writable:!1}),(0,o.defineGetter)(this,"t",(0,s.getTranslator)(t),{writable:!1}),l.set(this,{hooks:{}}),d=null,this.pluginName=null,this.pluginsInitializedCallbacks=[],this.isPluginsReady=!1,this.enabled=!1,this.initialized=!1,this.hot.addHook("afterPluginsInitialized",(function(){return n.onAfterPluginsInitialized()})),this.hot.addHook("afterUpdateSettings",(function(){return n.onUpdateSettings()})),this.hot.addHook("beforeInit",(function(){return n.init()}))}return i(e,[{key:"init",value:function(){this.pluginName=(0,r.getPluginName)(this.hot,this),this.isEnabled&&this.isEnabled()&&this.enablePlugin(),d||(d=(0,r.getRegistredPluginNames)(this.hot)),d.indexOf(this.pluginName)>=0&&d.splice(d.indexOf(this.pluginName),1),d.length||this.hot.runHooks("afterPluginsInitialized"),this.initialized=!0}},{key:"enablePlugin",value:function(){this.enabled=!0}},{key:"disablePlugin",value:function(){this.eventManager&&this.eventManager.clear(),this.clearHooks(),this.enabled=!1}},{key:"addHook",value:function(e,t){l.get(this).hooks[e]=l.get(this).hooks[e]||[];var n=l.get(this).hooks[e];this.hot.addHook(e,t),n.push(t),l.get(this).hooks[e]=n}},{key:"removeHooks",value:function(e){var t=this;(0,a.arrayEach)(l.get(this).hooks[e]||[],(function(n){t.hot.removeHook(e,n)}))}},{key:"clearHooks",value:function(){var e=this,t=l.get(this).hooks;(0,o.objectEach)(t,(function(t,n){return e.removeHooks(n)})),t.length=0}},{key:"callOnPluginsReady",value:function(e){this.isPluginsReady?e():this.pluginsInitializedCallbacks.push(e)}},{key:"onAfterPluginsInitialized",value:function(){(0,a.arrayEach)(this.pluginsInitializedCallbacks,(function(e){return e()})),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}},{key:"onUpdateSettings",value:function(){this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&this.updatePlugin())}},{key:"updatePlugin",value:function(){}},{key:"destroy",value:function(){var e=this;this.eventManager&&this.eventManager.destroy(),this.clearHooks(),(0,o.objectEach)(this,(function(t,n){"hot"!==n&&"t"!==n&&(e[n]=null)})),delete this.t,delete this.hot}}]),e}();t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=(i=["\n          Your license key of Handsontable Pro has expired.‌‌‌‌ \n          Renew your maintenance plan at https://handsontable.com or downgrade to the previous version of the software.\n          "],o=["\n          Your license key of Handsontable Pro has expired.‌‌‌‌ \n          Renew your maintenance plan at https://handsontable.com or downgrade to the previous version of the software.\n          "],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));t.stringify=function(e){var t=void 0;switch(void 0===e?"undefined":a(e)){case"string":case"number":t=""+e;break;case"object":t=null===e?"":e.toString();break;case"undefined":t="";break;default:t=e.toString()}return t},t.isDefined=function(e){return void 0!==e},t.isUndefined=u,t.isEmpty=h,t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t._injectProductInfo=function(e,t){e=g(e||"");var n="",i=!0,o=function(e){var t=[][p],n=t;if(e[p]!==v("Z"))return!1;for(var i="",o="B<H4P+".split(""),a=v(o.shift());a;a=v(o.shift()||"A"))--a<""[p]?n|=(m(""+m(f(i)+(f(_(e,Math.abs(a),2))+[]).padStart(2,"0")))%97||2)>>1:i=_(e,a,a?1===o[p]?9:8:6);return n===t}(e),a=b(),r=h(e)||"trial"===e;if(r||o)if(o){var l=Math.floor((0,d.default)("13/06/2018","DD/MM/YYYY").toDate().getTime()/864e5),u=y(e);(u>45e3||u!==parseInt(u,10))&&(n="The license key provided to Handsontable Pro is invalid. Make sure you pass it correctly."),n||(l>u+1&&(n=(0,c.toSingleLine)(s)),i=l>u+15)}else n="Evaluation version of Handsontable Pro. Not licensed for use in a production environment.";else n="The license key provided to Handsontable Pro is invalid. Make sure you pass it correctly.";if(a&&(n=!1,i=!1),n&&!w&&(console[r?"info":"warn"](n),w=!0),i&&t.parentNode){var k=document.createElement("div");k.id="hot-display-license-info",k.appendChild(document.createTextNode("Evaluation version of Handsontable Pro.")),k.appendChild(document.createElement("br")),k.appendChild(document.createTextNode("Not licensed for production use.")),t.parentNode.insertBefore(k,t.nextSibling)}};var r,l=n(57),d=(r=l)&&r.__esModule?r:{default:r},c=n(42);function u(e){return void 0===e}function h(e){return null===e||""===e||u(e)}var p="length",f=function(e){return parseInt(e,16)},m=function(e){return parseInt(e,10)},_=function(e,t,n){return e.substr(t,n)},v=function(e){return e.codePointAt(0)-65},g=function(e){return(""+e).replace(/\-/g,"")},y=function(e){return f(_(g(e),f("12"),v("F")))/(f(_(g(e),v("B"),~~![][p]))||9)},b=function(){return"undefined"!=typeof location&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host)},w=!1},function(e,t,n){var i=n(77)("wks"),o=n(50),a=n(15).Symbol,s="function"==typeof a;(e.exports=function(e){return i[e]||(i[e]=s&&a[e]||(s?a:o)("Symbol."+e))}).store=i},function(e,t,n){"use strict";t.__esModule=!0,t.stopImmediatePropagation=function(e){e.isImmediatePropagationEnabled=!1,e.cancelBubble=!0},t.isImmediatePropagationStopped=function(e){return!1===e.isImmediatePropagationEnabled},t.stopPropagation=function(e){"function"==typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.pageX=function(e){return e.pageX?e.pageX:e.clientX+(0,i.getWindowScrollLeft)()},t.pageY=function(e){return e.pageY?e.pageY:e.clientY+(0,i.getWindowScrollTop)()},t.isRightClick=function(e){return 2===e.button},t.isLeftClick=function(e){return 0===e.button};var i=n(0)},function(e,t,n){"use strict";t.__esModule=!0,t.getRegisteredRenderers=t.getRegisteredRendererNames=t.hasRenderer=t.getRenderer=t.registerRenderer=void 0;var i=u(n(40)),o=u(n(242)),a=u(n(243)),s=u(n(244)),r=u(n(245)),l=u(n(246)),d=u(n(248)),c=u(n(249));function u(e){return e&&e.__esModule?e:{default:e}}var h=(0,i.default)("renderers"),p=h.register,f=h.getItem,m=h.hasItem,_=h.getNames,v=h.getValues;p("base",o.default),p("autocomplete",a.default),p("checkbox",s.default),p("html",r.default),p("numeric",l.default),p("password",d.default),p("text",c.default),t.registerRenderer=p,t.getRenderer=function(e){if("function"==typeof e)return e;if(!m(e))throw Error('No registered renderer found under "'+e+'" name');return f(e)},t.hasRenderer=m,t.getRegisteredRendererNames=_,t.getRegisteredRenderers=v},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=n(2),s=["afterCellMetaReset","afterChange","afterChangesObserved","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","afterRender","beforeRenderer","afterRenderer","afterScrollHorizontally","afterScrollVertically","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeRender","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyCol","unmodifyCol","unmodifyRow","modifyColHeader","modifyColWidth","modifyRow","modifyRowHeader","modifyRowHeight","modifyData","modifyRowData","modifyGetCellCoords","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnMove","afterColumnMove","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","modifyColumnHeaderHeight","beforeUndo","afterUndo","beforeRedo","afterRedo","modifyRowHeaderWidth","beforeAutofillInsidePopulate","modifyTransformStart","modifyTransformEnd","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","manualRowHeights","skipLengthCache","afterTrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","hiddenRow","hiddenColumn","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten"],r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalBucket=this.createEmptyBucket()}return i(e,null,[{key:"getSingleton",value:function(){return l}}]),i(e,[{key:"createEmptyBucket",value:function(){var e=Object.create(null);return(0,o.arrayEach)(s,(function(t){return e[t]=[]})),e}},{key:"getBucket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?(e.pluginHookBucket||(e.pluginHookBucket=this.createEmptyBucket()),e.pluginHookBucket):this.globalBucket}},{key:"add",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))(0,o.arrayEach)(t,(function(t){return n.add(e,t,i)}));else{var a=this.getBucket(i);if(void 0===a[e]&&(this.register(e),a[e]=[]),t.skip=!1,-1===a[e].indexOf(t)){var s=!1;t.initialHook&&(0,o.arrayEach)(a[e],(function(n,i){if(n.initialHook)return a[e][i]=t,s=!0,!1})),s||a[e].push(t)}}return this}},{key:"once",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Array.isArray(t)?(0,o.arrayEach)(t,(function(t){return n.once(e,t,i)})):(t.runOnce=!0,this.add(e,t,i))}},{key:"remove",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getBucket(n);return void 0!==i[e]&&i[e].indexOf(t)>=0&&(t.skip=!0,!0)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getBucket(t);return!(void 0===n[e]||!n[e].length)}},{key:"run",value:function(e,t,n,i,o,a,s,r){var l=this.globalBucket[t],d=-1,c=l?l.length:0;if(c)for(;++d<c;)if(l[d]&&!l[d].skip){var u=l[d].call(e,n,i,o,a,s,r);void 0!==u&&(n=u),l[d]&&l[d].runOnce&&this.remove(t,l[d])}var h=this.getBucket(e)[t],p=-1,f=h?h.length:0;if(f)for(;++p<f;)if(h[p]&&!h[p].skip){var m=h[p].call(e,n,i,o,a,s,r);void 0!==m&&(n=m),h[p]&&h[p].runOnce&&this.remove(t,h[p],e)}return n}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,a.objectEach)(this.getBucket(e),(function(e,t,n){return n[t].length=0}))}},{key:"register",value:function(e){this.isRegistered(e)||s.push(e)}},{key:"deregister",value:function(e){this.isRegistered(e)&&s.splice(s.indexOf(e),1)}},{key:"isRegistered",value:function(e){return s.indexOf(e)>=0}},{key:"getRegistered",value:function(){return s}}]),e}(),l=new r;t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.getRegisteredEditors=t.getRegisteredEditorNames=t.hasEditor=t.getEditorInstance=t.getEditor=t.registerEditor=void 0,t.RegisteredEditor=C,t._getEditorInstance=x;var i=m(n(40)),o=m(n(16)),a=m(n(55)),s=m(n(189)),r=m(n(234)),l=m(n(235)),d=m(n(238)),c=m(n(190)),u=m(n(239)),h=m(n(240)),p=m(n(241)),f=m(n(59));function m(e){return e&&e.__esModule?e:{default:e}}var _=new WeakMap,v=(0,i.default)("editors"),g=v.register,y=v.getItem,b=v.hasItem,w=v.getNames,k=v.getValues;function C(e){var t={},n=e;this.getConstructor=function(){return e},this.getInstance=function(e){return e.guid in t||(t[e.guid]=new n(e)),t[e.guid]},o.default.getSingleton().add("afterDestroy",(function(){t[this.guid]=null}))}function x(e,t){var n=void 0;if("function"==typeof e)_.get(e)||S(null,e),n=_.get(e);else{if("string"!=typeof e)throw Error('Only strings and functions can be passed as "editor" parameter');n=y(e)}if(!n)throw Error('No editor registered under name "'+e+'"');return n.getInstance(t)}function S(e,t){var n=new C(t);"string"==typeof e&&g(e,n),_.set(t,n)}S("base",a.default),S("autocomplete",s.default),S("checkbox",r.default),S("date",l.default),S("dropdown",d.default),S("handsontable",c.default),S("numeric",u.default),S("password",h.default),S("select",p.default),S("text",f.default),t.registerEditor=S,t.getEditor=function(e){if(!b(e))throw Error('No registered editor found under "'+e+'" name');return y(e).getConstructor()},t.getEditorInstance=x,t.hasEditor=b,t.getRegisteredEditorNames=w,t.getRegisteredEditors=k},function(e,t,n){var i=n(9);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";t.__esModule=!0,t.normalizeSelection=function(e){return(0,i.arrayMap)(e,(function(e){return{start:e.getTopLeftCorner(),end:e.getBottomRightCorner()}}))},t.isSeparator=function(e){return(0,o.hasClass)(e,"htSeparator")},t.hasSubMenu=function(e){return(0,o.hasClass)(e,"htSubmenu")},t.isDisabled=function(e){return(0,o.hasClass)(e,"htDisabled")},t.isSelectionDisabled=function(e){return(0,o.hasClass)(e,"htSelectionDisabled")},t.getValidSelection=function(e){var t=e.getSelected();return t?t[0]<0?null:t:null},t.prepareVerticalAlignClass=s,t.prepareHorizontalAlignClass=r,t.getAlignmentClasses=function(e,t){var n={};return(0,i.arrayEach)(e,(function(e){for(var i=e.from,o=e.to,a=i.row;a<=o.row;a++)for(var s=i.col;s<=o.col;s++)n[a]||(n[a]=[]),n[a][s]=t(a,s)})),n},t.align=function(e,t,n,o,a){(0,i.arrayEach)(e,(function(e){var i=e.from,s=e.to;if(i.row==s.row&&i.col==s.col)l(i.row,i.col,t,n,o,a);else for(var r=i.row;r<=s.row;r++)for(var d=i.col;d<=s.col;d++)l(r,d,t,n,o,a)}))},t.checkSelectionConsistency=function(e,t){var n=!1;return Array.isArray(e)&&(0,i.arrayEach)(e,(function(e){return e.forAll((function(e,i){if(t(e,i))return n=!0,!1})),n})),n},t.markLabelAsSelected=function(e){return'<span class="selected">'+String.fromCharCode(10003)+"</span>"+e},t.isItemHidden=function(e,t){return!e.hidden||!("function"==typeof e.hidden&&e.hidden.call(t))},t.filterSeparators=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.KEY,n=e.slice(0);return n=function(e){var t=[];return(0,i.arrayEach)(e,(function(e,n){n>0?t[t.length-1].name!==e.name&&t.push(e):t.push(e)})),t}(n=function(e,t){var n=e.slice(0);return n.reverse(),(n=d(n,t)).reverse(),n}(n=d(n,t),t))};var i=n(1),o=(n(5),n(0)),a=n(95);function s(e,t){return-1!=e.indexOf(t)?e:(e=e.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),e+=" "+t)}function r(e,t){return-1!=e.indexOf(t)?e:(e=e.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),e+=" "+t)}function l(e,t,n,i,o,a){var l=o(e,t),d=i;l.className&&(d="vertical"===n?s(l.className,i):r(l.className,i)),a(e,t,"className",d)}function d(e,t){for(var n=e.slice(0);0<n.length&&n[0].name===t;)n.shift();return n}},function(e,t,n){var i=n(18),o=n(100),a=n(73),s=Object.defineProperty;t.f=n(22)?Object.defineProperty:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";t.__esModule=!0,t.KEY_CODES=void 0,t.isPrintableChar=function(e){return 32==e||e>=48&&e<=57||e>=96&&e<=111||e>=186&&e<=192||e>=219&&e<=222||e>=226||e>=65&&e<=90},t.isMetaKey=function(e){return-1!==[o.ARROW_DOWN,o.ARROW_UP,o.ARROW_LEFT,o.ARROW_RIGHT,o.HOME,o.END,o.DELETE,o.BACKSPACE,o.F1,o.F2,o.F3,o.F4,o.F5,o.F6,o.F7,o.F8,o.F9,o.F10,o.F11,o.F12,o.TAB,o.PAGE_DOWN,o.PAGE_UP,o.ENTER,o.ESCAPE,o.SHIFT,o.CAPS_LOCK,o.ALT].indexOf(e)},t.isCtrlKey=function(e){var t=[];return window.navigator.platform.includes("Mac")?t.push(o.COMMAND_LEFT,o.COMMAND_RIGHT,o.COMMAND_FIREFOX):t.push(o.CONTROL),t.includes(e)},t.isCtrlMetaKey=function(e){return[o.CONTROL,o.COMMAND_LEFT,o.COMMAND_RIGHT,o.COMMAND_FIREFOX].includes(e)},t.isKey=function(e,t){var n=t.split("|"),a=!1;return(0,i.arrayEach)(n,(function(t){if(e===o[t])return a=!0,!1})),a};var i=n(1),o=t.KEY_CODES={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL:17,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86}},function(e,t,n){e.exports=!n(23)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(75),o=n(38);e.exports=function(e){return i(o(e))}},function(e,t,n){var i=n(60),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t,n){var i=n(3),o=n(39),a=n(23);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*a((function(){n(1)})),"Object",s)}},function(e,t,n){"use strict";t.__esModule=!0,t.setBrowserMeta=s,t.isChrome=function(){return a.chrome.value},t.isEdge=function(){return a.edge.value},t.isIE=function(){return a.ie.value},t.isIE8=function(){return a.ie8.value},t.isIE9=function(){return a.ie9.value},t.isMSBrowser=function(){return a.ie.value||a.edge.value},t.isMobileBrowser=function(){return a.mobile.value},t.isSafari=function(){return a.safari.value};var i=n(2),o=function(e){var t={value:!1,test:function(n,i){t.value=e(n,i)}};return t},a={chrome:o((function(e,t){return/Chrome/.test(e)&&/Google/.test(t)})),edge:o((function(e){return/Edge/.test(e)})),ie:o((function(e){return/Trident/.test(e)})),ie8:o((function(){return!document.createTextNode("test").textContent})),ie9:o((function(){return!!document.documentMode})),mobile:o((function(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)})),safari:o((function(e,t){return/Safari/.test(e)&&/Apple Computer/.test(t)}))};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userAgent,n=void 0===t?navigator.userAgent:t,o=e.vendor,s=void 0===o?navigator.vendor:o;(0,i.objectEach)(a,(function(e){(0,e.test)(n,s)}))}s()},function(e,t,n){"use strict";t.__esModule=!0,t.getRegisteredValidators=t.getRegisteredValidatorNames=t.hasValidator=t.getValidator=t.registerValidator=void 0;var i=l(n(40)),o=l(n(250)),a=l(n(251)),s=l(n(252)),r=l(n(253));function l(e){return e&&e.__esModule?e:{default:e}}var d=(0,i.default)("validators"),c=d.register,u=d.getItem,h=d.hasItem,p=d.getNames,f=d.getValues;c("autocomplete",o.default),c("date",a.default),c("numeric",s.default),c("time",r.default),t.registerValidator=c,t.getValidator=function(e){if("function"==typeof e)return e;if(!h(e))throw Error('No registered validator found under "'+e+'" name');return u(e)},t.hasValidator=h,t.getRegisteredValidatorNames=p,t.getRegisteredValidators=f},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(15),o=n(31),a=n(29),s=n(50)("src"),r="toString",l=Function[r],d=(""+l).split(r);n(39).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,r){var l="function"==typeof n;l&&(a(n,"name")||o(n,"name",t)),e[t]!==n&&(l&&(a(n,s)||o(n,s,e[t]?""+e[t]:d.join(String(t)))),e===i?e[t]=n:r?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,r,(function(){return"function"==typeof this&&this[s]||l.call(this)}))},function(e,t,n){var i=n(20),o=n(51);e.exports=n(22)?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(63);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var i=n(38);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(50)("meta"),o=n(9),a=n(29),s=n(20).f,r=0,l=Object.isExtensible||function(){return!0},d=!n(23)((function(){return l(Object.preventExtensions({}))})),c=function(e){s(e,i,{value:{i:"O"+ ++r,w:{}}})},u=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!a(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return d&&u.NEED&&l(e)&&!a(e,i)&&c(e),e}}},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(2),s=n(1),r=d(n(6)),l=d(n(180));function d(e){return e&&e.__esModule?e:{default:e}}var c={},u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,a.defineGetter)(this,"wot",t,{writable:!1}),this.instance=this.wot,this.type="",this.mainTableScrollableElement=null,this.TABLE=this.wot.wtTable.TABLE,this.hider=this.wot.wtTable.hider,this.spreader=this.wot.wtTable.spreader,this.holder=this.wot.wtTable.holder,this.wtRootElement=this.wot.wtTable.wtRootElement,this.trimmingContainer=(0,o.getTrimmingContainer)(this.hider.parentNode.parentNode),this.areElementSizesAdjusted=!1,this.updateStateOfRendering()}return i(e,null,[{key:"registerOverlay",value:function(t,n){if(-1===e.CLONE_TYPES.indexOf(t))throw new Error("Unsupported overlay ("+t+").");c[t]=n}},{key:"createOverlay",value:function(e,t){return new c[e](t)}},{key:"hasOverlay",value:function(e){return void 0!==c[e]}},{key:"isOverlayTypeOf",value:function(e,t){return!(!e||!c[t])&&e instanceof c[t]}},{key:"CLONE_TOP",get:function(){return"top"}},{key:"CLONE_BOTTOM",get:function(){return"bottom"}},{key:"CLONE_LEFT",get:function(){return"left"}},{key:"CLONE_TOP_LEFT_CORNER",get:function(){return"top_left_corner"}},{key:"CLONE_BOTTOM_LEFT_CORNER",get:function(){return"bottom_left_corner"}},{key:"CLONE_DEBUG",get:function(){return"debug"}},{key:"CLONE_TYPES",get:function(){return[e.CLONE_TOP,e.CLONE_BOTTOM,e.CLONE_LEFT,e.CLONE_TOP_LEFT_CORNER,e.CLONE_BOTTOM_LEFT_CORNER,e.CLONE_DEBUG]}}]),i(e,[{key:"updateStateOfRendering",value:function(){var e=this.needFullRender;this.needFullRender=this.shouldBeRendered();var t=e!==this.needFullRender;return t&&!this.needFullRender&&this.reset(),t}},{key:"shouldBeRendered",value:function(){return!0}},{key:"updateTrimmingContainer",value:function(){this.trimmingContainer=(0,o.getTrimmingContainer)(this.hider.parentNode.parentNode)}},{key:"updateMainScrollableElement",value:function(){this.mainTableScrollableElement=(0,o.getScrollableElement)(this.wot.wtTable.TABLE)}},{key:"makeClone",value:function(t){if(-1===e.CLONE_TYPES.indexOf(t))throw new Error('Clone type "'+t+'" is not supported.');var n=document.createElement("DIV"),i=document.createElement("TABLE");n.className="ht_clone_"+t+" handsontable",n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.overflow="hidden",i.className=this.wot.wtTable.TABLE.className,n.appendChild(i),this.type=t,this.wot.wtTable.wtRootElement.parentNode.appendChild(n);var a=this.wot.getSetting("preventOverflow");return!0===a||"horizontal"===a&&this.type===e.CLONE_TOP||"vertical"===a&&this.type===e.CLONE_LEFT?this.mainTableScrollableElement=window:this.mainTableScrollableElement=(0,o.getScrollableElement)(this.wot.wtTable.TABLE),new l.default({cloneSource:this.wot,cloneOverlay:this,table:i})}},{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.shouldBeRendered();this.clone&&(this.needFullRender||t)&&this.clone.draw(e),this.needFullRender=t}},{key:"reset",value:function(){if(this.clone){var e=this.clone.wtTable.holder,t=this.clone.wtTable.hider,n=e.style,i=t.style,o=e.parentNode.style;(0,s.arrayEach)([n,i,o],(function(e){e.width="",e.height=""}))}}},{key:"destroy",value:function(){new r.default(this.clone).destroy()}}]),e}();t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.toUpperCaseFirst=function(e){return e[0].toUpperCase()+e.substr(1)},t.equalsIgnoreCase=function(){for(var e=[],t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var a=n.length;a--;){var s=(0,i.stringify)(n[a]).toLowerCase();-1===e.indexOf(s)&&e.push(s)}return 1===e.length},t.randomString=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()},t.isPercentValue=function(e){return/^([0-9][0-9]?%$)|(^100%$)/.test(e)},t.substitute=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(""+e).replace(/(?:\\)?\[([^[\]]+)]/g,(function(e,n){return"\\"===e.charAt(0)?e.substr(1,e.length-1):void 0===t[n]?"":t[n]}))},t.stripTags=function(e){return(e+="").replace(o,"")};var i=n(11);n(5);var o=/<\/?\w+\/?>|<\w+[\s|/][^>]*>/gi},function(e,t,n){var i=n(101),o=n(78);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.__esModule=!0,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"common";o.has(e)||o.set(e,new Map);var t=o.get(e);return{register:function(e,n){t.set(e,n)},getItem:function(e){return t.get(e)},hasItem:function(e){return t.has(e)},getNames:function(){return[].concat(i(t.keys()))},getValues:function(){return[].concat(i(t.values()))}}};var o=t.collection=new Map},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.requestAnimationFrame=function(e){return r.call(window,e)},t.cancelAnimationFrame=function(e){l.call(window,e)},t.isTouchSupported=function(){return"ontouchstart"in window},t.isWebComponentSupportedNatively=function(){var e=document.createElement("div");return!(!e.createShadowRoot||!e.createShadowRoot.toString().match(/\[native code\]/))},t.hasCaptionProblem=function(){return void 0===o&&function(){var e=document.createElement("TABLE");e.style.borderSpacing=0,e.style.borderWidth=0,e.style.padding=0;var t=document.createElement("TBODY");e.appendChild(t),t.appendChild(document.createElement("TR")),t.firstChild.appendChild(document.createElement("TD")),t.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var n=document.createElement("CAPTION");n.innerHTML="c<br>c<br>c<br>c",n.style.padding=0,n.style.margin=0,e.insertBefore(n,t),document.body.appendChild(e),o=e.offsetHeight<2*e.lastChild.offsetHeight,document.body.removeChild(e)}(),o},t.getComparisonFunction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c||(c="object"===("undefined"==typeof Intl?"undefined":i(Intl))?new Intl.Collator(e,t).compare:"function"==typeof String.prototype.localeCompare?function(e,t){return(""+e).localeCompare(t)}:function(e,t){return e===t?0:e>t?-1:1})};for(var o,a=0,s=["ms","moz","webkit","o"],r=window.requestAnimationFrame,l=window.cancelAnimationFrame,d=0;d<s.length&&!r;++d)r=window[s[d]+"RequestAnimationFrame"],l=window[s[d]+"CancelAnimationFrame"]||window[s[d]+"CancelRequestAnimationFrame"];r||(r=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-a)),i=window.setTimeout((function(){e(t+n)}),n);return a=t+n,i}),l||(l=function(e){clearTimeout(e)});var c=void 0},function(e,t,n){"use strict";t.__esModule=!0,t.toSingleLine=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return(0,i.arrayReduce)(e,(function(e,t,i){return e+t.replace(/(?:\r?\n\s+)/g,"")+(n[i]?n[i]:"")}),"").trim()};var i=n(1)},function(e,t,n){"use strict";t.__esModule=!0,t.isFunction=function(e){return"function"==typeof e},t.throttle=o,t.throttleAfterHits=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=o(e,t),a=n;function s(){return a?(a--,e.apply(this,arguments)):i.apply(this,arguments)}return s.clearHits=function(){a=n},s},t.debounce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=null,i=void 0;return function(){var o=this,a=arguments;return n&&clearTimeout(n),n=setTimeout((function(){i=e.apply(o,a)}),t),i}},t.pipe=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0],a=t.slice(1);return function(){return(0,i.arrayReduce)(a,(function(e,t){return t(e)}),o.apply(this,arguments))}},t.partial=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.apply(this,n.concat(i))}},t.curry=function(e){var t=e.length;return function n(i){return function(){for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var r=i.concat(a);return r.length>=t?e.apply(this,r):n(r)}}([])},t.curryRight=function(e){var t=e.length;return function n(i){return function(){for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var r=i.concat(a.reverse());return r.length>=t?e.apply(this,r):n(r)}}([])};var i=n(1);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=0,i={lastCallThrottled:!0},o=null;return function(){var a=this,s=arguments,r=Date.now(),l=!1;i.lastCallThrottled=!0,n||(n=r,l=!0);var d=t-(r-n);return l?(i.lastCallThrottled=!1,e.apply(this,s)):(o&&clearTimeout(o),o=setTimeout((function(){i.lastCallThrottled=!1,e.apply(a,s),n=0,o=void 0}),d)),i}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(9);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var i=n(12)("unscopables"),o=Array.prototype;null==o[i]&&n(31)(o,i,{}),e.exports=function(e){o[i][e]=!0}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),o=n(2),a={_localHooks:Object.create(null),addLocalHook:function(e,t){return this._localHooks[e]||(this._localHooks[e]=[]),this._localHooks[e].push(t),this},runLocalHooks:function(e){for(var t=this,n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];this._localHooks[e]&&(0,i.arrayEach)(this._localHooks[e],(function(e){return e.apply(t,o)}))},clearLocalHooks:function(){return this._localHooks={},this}};(0,o.defineGetter)(a,"MIXIN_NAME","localHooks",{writable:!1,enumerable:!1}),t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.createClassName=a,t.createDefaultCustomBorder=function(){return{width:1,color:"#000"}},t.createSingleEmptyBorder=s,t.createDefaultHtBorder=r,t.createEmptyBorders=function(e,t){return{className:a(e,t),border:{width:1,color:"#000",cornerVisible:!1},row:e,col:t,top:{hide:!0},right:{hide:!0},bottom:{hide:!0},left:{hide:!0}}},t.extendDefaultBorder=function(e,t){return(0,i.hasOwnProperty)(t,"border")&&(e.border=t.border),(0,i.hasOwnProperty)(t,"top")&&(e.top=t.top),(0,i.hasOwnProperty)(t,"right")&&(e.right=t.right),(0,i.hasOwnProperty)(t,"bottom")&&(e.bottom=t.bottom),(0,i.hasOwnProperty)(t,"left")&&(e.left=t.left),e},t.checkSelectionBorders=function(e,t){var n=!1;return(0,o.arrayEach)(e.getSelectedRange(),(function(o){o.forAll((function(o,a){var s=e.getCellMeta(o,a).borders;if(s){if(!t)return n=!0,!1;if(!(0,i.hasOwnProperty)(s[t],"hide"))return n=!0,!1}}))})),n},t.markSelected=function(e){return'<span class="selected">'+String.fromCharCode(10003)+"</span>"+e};var i=n(2),o=n(1);function a(e,t){return"border_row"+e+"col"+t}function s(){return{hide:!0}}function r(){return{width:1,color:"#000",cornerVisible:!1}}},function(e,t){e.exports=!1},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports={}},function(e,t,n){var i=n(20).f,o=n(29),a=n(12)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";t.__esModule=!0,t.EditorState=void 0;var i=n(4),o=n(11),a=t.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"};function s(e){this.instance=e,this.state=a.VIRGIN,this._opened=!1,this._fullEditMode=!1,this._closeCallback=null,this.init()}s.prototype._fireCallbacks=function(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)},s.prototype.init=function(){},s.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},s.prototype.setValue=function(e){throw Error("Editor setValue() method unimplemented")},s.prototype.open=function(){throw Error("Editor open() method unimplemented")},s.prototype.close=function(){throw Error("Editor close() method unimplemented")},s.prototype.prepare=function(e,t,n,i,o,s){this.TD=i,this.row=e,this.col=t,this.prop=n,this.originalValue=o,this.cellProperties=s,this.state=a.VIRGIN},s.prototype.extend=function(){var e=this.constructor;return function(e,t){function n(){}return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e}((function(){e.apply(this,arguments)}),e)},s.prototype.saveValue=function(e,t){var n=void 0,i=void 0;t?((n=this.instance.getSelectedLast())[0]>n[2]&&(i=n[0],n[0]=n[2],n[2]=i),n[1]>n[3]&&(i=n[1],n[1]=n[3],n[3]=i)):n=[this.row,this.col,null,null],this.instance.populateFromArray(n[0],n[1],e,n[2],n[3],"edit")},s.prototype.beginEditing=function(e,t){if(this.state===a.VIRGIN){if(this.instance.view.scrollViewport(new i.CellCoords(this.row,this.col)),this.state=a.EDITING,this.isInFullEditMode()){var n="string"==typeof e?e:(0,o.stringify)(this.originalValue);this.setValue(n)}this.open(t),this._opened=!0,this.focus(),this.instance.view.render(),this.instance.runHooks("afterBeginEditing",this.row,this.col)}},s.prototype.finishEditing=function(e,t,n){var i,o=this;if(n){var s=this._closeCallback;this._closeCallback=function(e){s&&s(e),n(e),o.instance.view.render()}}if(!this.isWaiting())if(this.state!=a.VIRGIN){if(this.state==a.EDITING){if(e)return this.cancelChanges(),void this.instance.view.render();var r=this.getValue();i=this.instance.getSettings().trimWhitespace?[["string"==typeof r?String.prototype.trim.call(r||""):r]]:[[r]],this.state=a.WAITING,this.saveValue(i,t),this.instance.getCellValidator(this.cellProperties)?this.instance.addHookOnce("postAfterValidate",(function(e){o.state=a.FINISHED,o.discardEditor(e)})):(this.state=a.FINISHED,this.discardEditor(!0))}}else this.instance._registerTimeout((function(){o._fireCallbacks(!0)}))},s.prototype.cancelChanges=function(){this.state=a.FINISHED,this.discardEditor()},s.prototype.discardEditor=function(e){this.state===a.FINISHED&&(!1===e&&!0!==this.cellProperties.allowInvalid?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=a.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=a.VIRGIN,this._fireCallbacks(!0)))},s.prototype.enableFullEditMode=function(){this._fullEditMode=!0},s.prototype.isInFullEditMode=function(){return this._fullEditMode},s.prototype.isOpened=function(){return this._opened},s.prototype.isWaiting=function(){return this.state===a.WAITING},s.prototype.checkEditorSection=function(){var e=this.instance.countRows(),t="";return this.row<this.instance.getSettings().fixedRowsTop?t=this.col<this.instance.getSettings().fixedColumnsLeft?"top-left-corner":"top":this.instance.getSettings().fixedRowsBottom&&this.row>=e-this.instance.getSettings().fixedRowsBottom?t=this.col<this.instance.getSettings().fixedColumnsLeft?"bottom-left-corner":"bottom":this.col<this.instance.getSettings().fixedColumnsLeft&&(t="left"),t},t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==t&&void 0!==n?(this.row=t,this.col=n):(this.row=null,this.col=null)}return i(e,[{key:"isValid",value:function(e){return!(this.row<0||this.col<0||this.row>=e.getSetting("totalRows")||this.col>=e.getSetting("totalColumns"))}},{key:"isEqual",value:function(e){return e===this||this.row===e.row&&this.col===e.col}},{key:"isSouthEastOf",value:function(e){return this.row>=e.row&&this.col>=e.col}},{key:"isNorthWestOf",value:function(e){return this.row<=e.row&&this.col<=e.col}},{key:"isSouthWestOf",value:function(e){return this.row>=e.row&&this.col<=e.col}},{key:"isNorthEastOf",value:function(e){return this.row<=e.row&&this.col>=e.col}},{key:"toObject",value:function(){return{row:this.row,col:this.col}}}]),e}();t.default=o},function(t,n){t.exports=e},function(e,t,n){"use strict";t.__esModule=!0,t.log=function(){var e;(0,i.isDefined)(console)&&(e=console).log.apply(e,arguments)},t.warn=function(){var e;(0,i.isDefined)(console)&&(e=console).warn.apply(e,arguments)},t.info=function(){var e;(0,i.isDefined)(console)&&(e=console).info.apply(e,arguments)},t.error=function(){var e;(0,i.isDefined)(console)&&(e=console).error.apply(e,arguments)};var i=n(11)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0),o=c(n(233)),a=n(55),s=c(a),r=c(n(6)),l=n(21),d=(n(27),n(13));function c(e){return e&&e.__esModule?e:{default:e}}var u=s.default.prototype.extend();u.prototype.init=function(){var e=this;this.createElements(),this.eventManager=new r.default(this),this.bindEvents(),this.autoResize=(0,o.default)(),this.holderZIndex=-1,this.instance.addHook("afterDestroy",(function(){e.destroy()}))},u.prototype.prepare=function(e,t,n,i,o,r){var l=this,d=this.state;if(s.default.prototype.prepare.apply(this,arguments),!r.readOnly){this.refreshDimensions(!0);var c=r.allowInvalid,u=r.fragmentSelection;c&&(this.TEXTAREA.value=""),d!==a.EditorState.FINISHED&&this.hideEditableElement(),!u&&this.instance._registerImmediate((function(){return l.focus()}))}},u.prototype.hideEditableElement=function(){this.textareaParentStyle.top="-9999px",this.textareaParentStyle.left="-9999px",this.textareaParentStyle.zIndex="-1"},u.prototype.showEditableElement=function(){this.textareaParentStyle.zIndex=this.holderZIndex>=0?this.holderZIndex:""},u.prototype.getValue=function(){return this.TEXTAREA.value},u.prototype.setValue=function(e){this.TEXTAREA.value=e},u.prototype.beginEditing=function(e,t){this.state===a.EditorState.VIRGIN&&(this.TEXTAREA.value="",s.default.prototype.beginEditing.apply(this,arguments))};var h=function(e){var t,n=this.getActiveEditor();if(t=(e.ctrlKey||e.metaKey)&&!e.altKey,e.target===n.TEXTAREA&&!(0,d.isImmediatePropagationStopped)(e))if(17!==e.keyCode&&224!==e.keyCode&&91!==e.keyCode&&93!==e.keyCode){switch(e.keyCode){case l.KEY_CODES.ARROW_RIGHT:case l.KEY_CODES.ARROW_LEFT:case l.KEY_CODES.ARROW_UP:case l.KEY_CODES.ARROW_DOWN:n.isInFullEditMode()&&(!n.isWaiting()&&!n.allowKeyEventPropagation||!n.isWaiting()&&n.allowKeyEventPropagation&&!n.allowKeyEventPropagation(e.keyCode))&&(0,d.stopImmediatePropagation)(e);break;case l.KEY_CODES.ENTER:var o=this.selection.isMultiple();if(t&&!o||e.altKey){if(n.isOpened()){var a=(0,i.getCaretPosition)(n.TEXTAREA),s=n.getValue(),r=s.slice(0,a)+"\n"+s.slice(a);n.setValue(r),(0,i.setCaretPosition)(n.TEXTAREA,a+1)}else n.beginEditing(n.originalValue+"\n");(0,d.stopImmediatePropagation)(e)}e.preventDefault();break;case l.KEY_CODES.A:case l.KEY_CODES.X:case l.KEY_CODES.C:case l.KEY_CODES.V:t&&(0,d.stopImmediatePropagation)(e);break;case l.KEY_CODES.BACKSPACE:case l.KEY_CODES.DELETE:case l.KEY_CODES.HOME:case l.KEY_CODES.END:(0,d.stopImmediatePropagation)(e)}-1===[l.KEY_CODES.ARROW_UP,l.KEY_CODES.ARROW_RIGHT,l.KEY_CODES.ARROW_DOWN,l.KEY_CODES.ARROW_LEFT].indexOf(e.keyCode)&&n.autoResize.resize(String.fromCharCode(e.keyCode))}else(0,d.stopImmediatePropagation)(e)};u.prototype.open=function(){this.refreshDimensions(),this.showEditableElement(),this.instance.addHook("beforeKeyDown",h)},u.prototype.close=function(e){this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&&this.instance.listen(),this.hideEditableElement(),this.instance.removeHook("beforeKeyDown",h)},u.prototype.focus=function(){this.TEXTAREA.select(),(0,i.setCaretPosition)(this.TEXTAREA,this.TEXTAREA.value.length)},u.prototype.createElements=function(){this.TEXTAREA=document.createElement("TEXTAREA"),this.TEXTAREA.tabIndex=-1,(0,i.addClass)(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),(0,i.addClass)(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.zIndex="-1",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement.appendChild(this.TEXTAREA_PARENT)},u.prototype.getEditedCell=function(){var e=void 0;switch(this.checkEditorSection()){case"top":e=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.holderZIndex=101;break;case"top-left-corner":e=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.holderZIndex=103;break;case"bottom-left-corner":e=this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.holderZIndex=103;break;case"left":e=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.holderZIndex=102;break;case"bottom":e=this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.holderZIndex=102;break;default:e=this.instance.getCell(this.row,this.col),this.holderZIndex=-1}return-1!=e&&-2!=e?e:void 0},u.prototype.refreshValue=function(){var e=this.instance.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()},u.prototype.refreshDimensions=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.state===a.EditorState.EDITING||e)if(this.TD=this.getEditedCell(),this.TD){var t=(0,i.offset)(this.TD),n=(0,i.offset)(this.instance.rootElement),o=this.instance.view.wt.wtOverlays.topOverlay.mainTableScrollableElement,s=this.instance.countRows(),r=o!==window?o.scrollTop:0,l=o!==window?o.scrollLeft:0,d=this.checkEditorSection(),c=["","left"].includes(d)?r:0,u=["","top","bottom"].includes(d)?l:0,h=t.top===n.top?0:1,p=this.instance.getSettings(),f=(this.instance.hasRowHeaders(),this.instance.hasColHeaders()),m=this.TD.style.backgroundColor,_=t.top-n.top-h-c,v=t.left-n.left-1-u,g=void 0;switch(d){case"top":g=(0,i.getCssTransform)(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":g=(0,i.getCssTransform)(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":g=(0,i.getCssTransform)(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":g=(0,i.getCssTransform)(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":g=(0,i.getCssTransform)(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode)}(f&&0===this.instance.getSelectedLast()[0]||p.fixedRowsBottom&&this.instance.getSelectedLast()[0]===s-p.fixedRowsBottom)&&(_+=1),0===this.instance.getSelectedLast()[1]&&(v+=1),g&&-1!=g?this.textareaParentStyle[g[0]]=g[1]:(0,i.resetCssTransform)(this.TEXTAREA_PARENT),this.textareaParentStyle.top=_+"px",this.textareaParentStyle.left=v+"px",this.showEditableElement();var y=this.instance.view.wt.wtViewport.rowsRenderCalculator.startPosition,b=this.instance.view.wt.wtViewport.columnsRenderCalculator.startPosition,w=this.instance.view.wt.wtOverlays.leftOverlay.getScrollPosition(),k=this.instance.view.wt.wtOverlays.topOverlay.getScrollPosition(),C=(0,i.getScrollbarWidth)(),x=this.TD.offsetTop+y-k,S=this.TD.offsetLeft+b-w,M=(0,i.innerWidth)(this.TD)-8,T=(0,i.hasVerticalScrollbar)(o)?C:0,L=(0,i.hasHorizontalScrollbar)(o)?C:0,D=this.instance.view.maximumVisibleElementWidth(S)-9-T,E=this.TD.scrollHeight+1,O=Math.max(this.instance.view.maximumVisibleElementHeight(x)-L,23),A=(0,i.getComputedStyle)(this.TD);this.TEXTAREA.style.fontSize=A.fontSize,this.TEXTAREA.style.fontFamily=A.fontFamily,this.TEXTAREA.style.backgroundColor=m||(0,i.getComputedStyle)(this.TEXTAREA).backgroundColor,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(E,O),maxHeight:O,minWidth:Math.min(M,D),maxWidth:D},!0)}else e||this.close(!0)},u.prototype.bindEvents=function(){var e=this;this.eventManager.addEventListener(this.TEXTAREA,"cut",(function(e){(0,d.stopPropagation)(e)})),this.eventManager.addEventListener(this.TEXTAREA,"paste",(function(e){(0,d.stopPropagation)(e)})),this.instance.addHook("afterScrollHorizontally",(function(){e.refreshDimensions()})),this.instance.addHook("afterScrollVertically",(function(){e.refreshDimensions()})),this.instance.addHook("afterColumnResize",(function(){e.refreshDimensions(),e.focus()})),this.instance.addHook("afterRowResize",(function(){e.refreshDimensions(),e.focus()})),this.instance.addHook("afterDestroy",(function(){e.eventManager.destroy()}))},u.prototype.destroy=function(){this.eventManager.destroy()},t.default=u},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(60),o=Math.max,a=Math.min;e.exports=function(e,t){return(e=i(e))<0?o(e+t,0):a(e,t)}},function(e,t,n){var i=n(30);e.exports=function(e,t,n){for(var o in t)i(e,o,t[o],n);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(32),o=n(104),a=n(105),s=n(18),r=n(25),l=n(106),d={},c={};(t=e.exports=function(e,t,n,u,h){var p,f,m,_,v=h?function(){return e}:l(e),g=i(n,u,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(p=r(e.length);p>y;y++)if((_=t?g(s(f=e[y])[0],f[1]):g(e[y]))===d||_===c)return _}else for(m=v.call(e);!(f=m.next()).done;)if((_=o(m,g,f.value,t))===d||_===c)return _}).BREAK=d,t.RETURN=c},function(e,t,n){"use strict";var i=n(15),o=n(3),a=n(30),s=n(62),r=n(34),l=n(65),d=n(64),c=n(9),u=n(23),h=n(79),p=n(53),f=n(209);e.exports=function(e,t,n,m,_,v){var g=i[e],y=g,b=_?"set":"add",w=y&&y.prototype,k={},C=function(e){var t=w[e];a(w,e,"delete"==e||"has"==e?function(e){return!(v&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(v||w.forEach&&!u((function(){(new y).entries().next()})))){var x=new y,S=x[b](v?{}:-0,1)!=x,M=u((function(){x.has(1)})),T=h((function(e){new y(e)})),L=!v&&u((function(){for(var e=new y,t=5;t--;)e[b](t,t);return!e.has(-0)}));T||((y=t((function(t,n){d(t,y,e);var i=f(new g,t,y);return null!=n&&l(n,_,i[b],i),i}))).prototype=w,w.constructor=y),(M||L)&&(C("delete"),C("has"),_&&C("get")),(L||S)&&C(b),v&&w.clear&&delete w.clear}else y=m.getConstructor(t,e,_,b),s(y.prototype,n),r.NEED=!0;return p(y,e),k[e]=y,o(o.G+o.W+o.F*(y!=g),k),v||m.setStrong(y,e,_),y}},function(e,t,n){var i=n(54),o=n(51),a=n(24),s=n(73),r=n(29),l=n(100),d=Object.getOwnPropertyDescriptor;t.f=n(22)?d:function(e,t){if(e=a(e),t=s(t,!0),l)try{return d(e,t)}catch(e){}if(r(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(32),o=n(75),a=n(33),s=n(25),r=n(210);e.exports=function(e,t){var n=1==e,l=2==e,d=3==e,c=4==e,u=6==e,h=5==e||u,p=t||r;return function(t,r,f){for(var m,_,v=a(t),g=o(v),y=i(r,f,3),b=s(g.length),w=0,k=n?p(t,b):l?p(t,0):void 0;b>w;w++)if((h||w in g)&&(_=y(m=g[w],w,v),e))if(n)k[w]=_;else if(_)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:k.push(m)}else if(c)return!1;return u?-1:d||c?c:k}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var i=n(31),o=n(30),a=n(23),s=n(38),r=n(12);e.exports=function(e,t,n){var l=r(e),d=n(s,l,""[e]),c=d[0],u=d[1];a((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)}))&&(o(String.prototype,e,c),i(RegExp.prototype,l,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)}))}},function(e,t,n){"use strict";t.__esModule=!0,t.DEFAULT_LANGUAGE_CODE=t.getLanguagesDictionaries=t.getDefaultLanguageDictionary=t.hasLanguageDictionary=t.getLanguageDictionary=t.registerLanguageDictionary=void 0;var i=n(2),o=n(198),a=r(n(40)),s=r(n(269));function r(e){return e&&e.__esModule?e:{default:e}}var l=s.default.languageCode,d=(0,a.default)("languagesDictionaries"),c=d.register,u=d.getItem,h=d.hasItem,p=d.getValues;function f(e,t){var n=e;return(0,i.isObject)(e)&&(n=(t=e).languageCode),function(e,t){e!==l&&(0,o.extendNotExistingKeys)(t,u(l))}(n,t),c(n,(0,i.deepClone)(t)),(0,i.deepClone)(t)}function m(e){return h(e)}t.registerLanguageDictionary=f,t.getLanguageDictionary=function(e){return m(e)?(0,i.deepClone)(u(e)):null},t.hasLanguageDictionary=m,t.getDefaultLanguageDictionary=function(){return s.default},t.getLanguagesDictionaries=function(){return p()},t.DEFAULT_LANGUAGE_CODE=l,f(s.default)},function(e,t,n){var i=n(9),o=n(15).document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var i=n(9);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(18),o=n(207),a=n(78),s=n(76)("IE_PROTO"),r=function(){},l="prototype",d=function(){var e,t=n(72)("iframe"),i=a.length;for(t.style.display="none",n(103).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),d=e.F;i--;)delete d[l][a[i]];return d()};e.exports=Object.create||function(e,t){var n;return null!==e?(r[l]=i(e),n=new r,r[l]=null,n[s]=e):n=d(),void 0===t?n:o(n,t)}},function(e,t,n){var i=n(44);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){var i=n(77)("keys"),o=n(50);e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var i=n(39),o=n(15),a="__core-js_shared__",s=o[a]||(o[a]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(49)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(12)("iterator"),o=!1;try{var a=[7][i]();a.return=function(){o=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a=[7],s=a[i]();s.next=function(){return{done:n=!0}},a[i]=function(){return s},e(a)}catch(e){}return n}},function(e,t,n){var i,o,a,s=n(32),r=n(213),l=n(103),d=n(72),c=n(15),u=c.process,h=c.setImmediate,p=c.clearImmediate,f=c.MessageChannel,m=c.Dispatch,_=0,v={},g="onreadystatechange",y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){y.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++_]=function(){r("function"==typeof e?e:Function(e),t)},i(_),_},p=function(e){delete v[e]},"process"==n(44)(u)?i=function(e){u.nextTick(s(y,e,1))}:m&&m.now?i=function(e){m.now(s(y,e,1))}:f?(a=(o=new f).port2,o.port1.onmessage=b,i=s(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):i=g in d("script")?function(e){l.appendChild(d("script"))[g]=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(s(y,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,n){var i=n(15).navigator;e.exports=i&&i.userAgent||""},function(e,t,n){var i=n(101),o=n(78).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){var i=n(144),o=n(38);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var i=n(12)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";var i=n(20),o=n(51);e.exports=function(e,t,n){t in e?i.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){"use strict";var i=n(46),o=n(110),a=n(52),s=n(24);e.exports=n(108)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(56),s=(i=a)&&i.__esModule?i:{default:i},r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.highlight=t,this.from=n,this.to=i}return o(e,[{key:"setHighlight",value:function(e){return this.highlight=e,this}},{key:"setFrom",value:function(e){return this.from=e,this}},{key:"setTo",value:function(e){return this.to=e,this}},{key:"isValid",value:function(e){return this.from.isValid(e)&&this.to.isValid(e)}},{key:"isSingle",value:function(){return this.from.row===this.to.row&&this.from.col===this.to.col}},{key:"getHeight",value:function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}},{key:"getWidth",value:function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}},{key:"includes",value:function(e){var t=e.row,n=e.col,i=this.getTopLeftCorner(),o=this.getBottomRightCorner();return i.row<=t&&o.row>=t&&i.col<=n&&o.col>=n}},{key:"includesRange",value:function(e){return this.includes(e.getTopLeftCorner())&&this.includes(e.getBottomRightCorner())}},{key:"isEqual",value:function(e){return Math.min(this.from.row,this.to.row)===Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(e.from.col,e.to.col)}},{key:"overlaps",value:function(e){return e.isSouthEastOf(this.getTopLeftCorner())&&e.isNorthWestOf(this.getBottomRightCorner())}},{key:"isSouthEastOf",value:function(e){return this.getTopLeftCorner().isSouthEastOf(e)||this.getBottomRightCorner().isSouthEastOf(e)}},{key:"isNorthWestOf",value:function(e){return this.getTopLeftCorner().isNorthWestOf(e)||this.getBottomRightCorner().isNorthWestOf(e)}},{key:"isOverlappingHorizontally",value:function(e){return this.getTopRightCorner().col>=e.getTopLeftCorner().col&&this.getTopRightCorner().col<=e.getTopRightCorner().col||this.getTopLeftCorner().col<=e.getTopRightCorner().col&&this.getTopLeftCorner().col>=e.getTopLeftCorner().col}},{key:"isOverlappingVertically",value:function(e){return this.getBottomRightCorner().row>=e.getTopRightCorner().row&&this.getBottomRightCorner().row<=e.getBottomRightCorner().row||this.getTopRightCorner().row<=e.getBottomRightCorner().row&&this.getTopRightCorner().row>=e.getTopRightCorner().row}},{key:"expand",value:function(e){var t=this.getTopLeftCorner(),n=this.getBottomRightCorner();return(e.row<t.row||e.col<t.col||e.row>n.row||e.col>n.col)&&(this.from=new s.default(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=new s.default(Math.max(n.row,e.row),Math.max(n.col,e.col)),!0)}},{key:"expandByRange",value:function(e){if(this.includesRange(e)||!this.overlaps(e))return!1;var t=this.getTopLeftCorner(),n=this.getBottomRightCorner(),i=this.getDirection(),o=e.getTopLeftCorner(),a=e.getBottomRightCorner(),r=Math.min(t.row,o.row),l=Math.min(t.col,o.col),d=Math.max(n.row,a.row),c=Math.max(n.col,a.col),u=new s.default(r,l),h=new s.default(d,c);return this.from=u,this.to=h,this.setDirection(i),this.highlight.row===this.getBottomRightCorner().row&&"N-S"===this.getVerticalDirection()&&this.flipDirectionVertically(),this.highlight.col===this.getTopRightCorner().col&&"W-E"===this.getHorizontalDirection()&&this.flipDirectionHorizontally(),!0}},{key:"getDirection",value:function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0}},{key:"getVerticalDirection",value:function(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}},{key:"getHorizontalDirection",value:function(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}},{key:"setDirection",value:function(e){switch(e){case"NW-SE":var t=[this.getTopLeftCorner(),this.getBottomRightCorner()];this.from=t[0],this.to=t[1];break;case"NE-SW":var n=[this.getTopRightCorner(),this.getBottomLeftCorner()];this.from=n[0],this.to=n[1];break;case"SE-NW":var i=[this.getBottomRightCorner(),this.getTopLeftCorner()];this.from=i[0],this.to=i[1];break;case"SW-NE":var o=[this.getBottomLeftCorner(),this.getTopRightCorner()];this.from=o[0],this.to=o[1]}}},{key:"flipDirectionVertically",value:function(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE")}}},{key:"flipDirectionHorizontally",value:function(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW")}}},{key:"getTopLeftCorner",value:function(){return new s.default(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}},{key:"getBottomRightCorner",value:function(){return new s.default(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}},{key:"getTopRightCorner",value:function(){return new s.default(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}},{key:"getBottomLeftCorner",value:function(){return new s.default(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}},{key:"isCorner",value:function(e,t){return!!(t&&t.includes(e)&&(this.getTopLeftCorner().isEqual(new s.default(t.from.row,t.from.col))||this.getTopRightCorner().isEqual(new s.default(t.from.row,t.to.col))||this.getBottomLeftCorner().isEqual(new s.default(t.to.row,t.from.col))||this.getBottomRightCorner().isEqual(new s.default(t.to.row,t.to.col))))||e.isEqual(this.getTopLeftCorner())||e.isEqual(this.getTopRightCorner())||e.isEqual(this.getBottomLeftCorner())||e.isEqual(this.getBottomRightCorner())}},{key:"getOppositeCorner",value:function(e,t){if(!(e instanceof s.default))return!1;if(t&&t.includes(e)){if(this.getTopLeftCorner().isEqual(new s.default(t.from.row,t.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new s.default(t.from.row,t.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new s.default(t.to.row,t.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new s.default(t.to.row,t.to.col)))return this.getTopLeftCorner()}return e.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():e.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():e.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():e.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0}},{key:"getBordersSharedWith",value:function(e){if(!this.includesRange(e))return[];var t=Math.min(this.from.row,this.to.row),n=Math.max(this.from.row,this.to.row),i=Math.min(this.from.col,this.to.col),o=Math.max(this.from.col,this.to.col),a=Math.min(e.from.row,e.to.row),s=Math.max(e.from.row,e.to.row),r=Math.min(e.from.col,e.to.col),l=Math.max(e.from.col,e.to.col),d=[];return t==a&&d.push("top"),o==l&&d.push("right"),n==s&&d.push("bottom"),i==r&&d.push("left"),d}},{key:"getInner",value:function(){for(var e=this.getTopLeftCorner(),t=this.getBottomRightCorner(),n=[],i=e.row;i<=t.row;i++)for(var o=e.col;o<=t.col;o++)this.from.row===i&&this.from.col===o||this.to.row===i&&this.to.col===o||n.push(new s.default(i,o));return n}},{key:"getAll",value:function(){for(var e=this.getTopLeftCorner(),t=this.getBottomRightCorner(),n=[],i=e.row;i<=t.row;i++)for(var o=e.col;o<=t.col;o++)e.row===i&&e.col===o?n.push(e):t.row===i&&t.col===o?n.push(t):n.push(new s.default(i,o));return n}},{key:"forAll",value:function(e){for(var t=this.getTopLeftCorner(),n=this.getBottomRightCorner(),i=t.row;i<=n.row;i++)for(var o=t.col;o<=n.col;o++)if(!1===e(i,o))return}},{key:"toObject",value:function(){return{from:this.from.toObject(),to:this.to.toObject()}}}]),e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.getRegisteredCellTypes=t.getRegisteredCellTypeNames=t.hasCellType=t.getCellType=t.registerCellType=void 0;var i=_(n(40)),o=n(17),a=n(14),s=n(28),r=_(n(254)),l=_(n(255)),d=_(n(256)),c=_(n(257)),u=_(n(258)),h=_(n(259)),p=_(n(260)),f=_(n(261)),m=_(n(262));function _(e){return e&&e.__esModule?e:{default:e}}var v=(0,i.default)("cellTypes"),g=v.register,y=v.getItem,b=v.hasItem,w=v.getNames,k=v.getValues;function C(e,t){var n=t.editor,i=t.renderer,r=t.validator;n&&(0,o.registerEditor)(e,n),i&&(0,a.registerRenderer)(e,i),r&&(0,s.registerValidator)(e,r),g(e,t)}C("autocomplete",r.default),C("checkbox",l.default),C("date",d.default),C("dropdown",c.default),C("handsontable",u.default),C("numeric",h.default),C("password",p.default),C("text",f.default),C("time",m.default),t.registerCellType=C,t.getCellType=function(e){if(!b(e))throw Error('You declared cell type "'+e+'" as a string that is not mapped to a known object.\n                 Cell type must be an object or a string mapped to an object registered by "Handsontable.cellTypes.registerCellType" method');return y(e)},t.hasCellType=b,t.getRegisteredCellTypeNames=w,t.getRegisteredCellTypes=k},function(e,t,n){"use strict";t.__esModule=!0;var i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=(i=["Deprecation warning: This method is going to be removed in the next release. \n      If you want to select a cell using props, please use the `selectCell` method."],o=["Deprecation warning: This method is going to be removed in the next release. \n      If you want to select a cell using props, please use the \\`selectCell\\` method."],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));t.default=function(e,t){var n,i,o,N,$,z=this,W=arguments.length>2&&void 0!==arguments[2]&&arguments[2],U=!1,V=this,q=function(){},Z=new _.default(V);(0,v.extend)(q.prototype,A.default.prototype),(0,v.extend)(q.prototype,t),(0,v.extend)(q.prototype,te(t)),(0,j.applyLanguageSetting)(q.prototype,t.language),(0,D.hasValidParameter)(W)&&(0,D.registerAsRootInstance)(this),(0,Y.startObserving)(),this.isDestroyed=!1,this.rootElement=e,this.isHotTableEnv=(0,l.isChildOfWebComponentTable)(this.rootElement),_.default.isHotTableEnv=this.isHotTableEnv,this.container=document.createElement("div"),this.renderCall=!1,e.insertBefore(this.container,e.firstChild),this.guid="ht_"+(0,C.randomString)();var G=(0,L.getTranslator)(V);o=new M.default(V),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid),n={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width","language"],settings:new q,selRange:null,isPopulated:null,scrollable:null,firstRun:!0};var J=new H.Selection(n.settings,{countCols:function(){return V.countCols()},countRows:function(){return V.countRows()},propToCol:function(e){return i.propToCol(e)},isEditorOpened:function(){return!!V.getActiveEditor()&&V.getActiveEditor().isOpened()}});function K(){var e=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue:function(){this.validatorsInQueue++,e=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(e){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==e&&(e=!0,this.onQueueEmpty(this.valid))}}}function X(e,t,n){var o,a,r,d=new K;d.onQueueEmpty=function(){var i;e.length&&(i=V.runHooks("beforeChange",e,t||"edit"),(0,c.isFunction)(i)?(0,u.warn)("Your beforeChange callback returns a function. It's not supported since Handsontable 0.12.1 (and the returned function will not be executed)."):!1===i&&e.splice(0,e.length)),n()};for(var h=e.length-1;h>=0;h--)if(null===e[h])e.splice(h,1);else{var p=s(e[h],4),f=p[0],m=p[1],_=p[3],v=i.propToCol(m),g=V.getCellMeta(f,v);"numeric"===g.type&&"string"==typeof _&&(r=_).length>0&&/^-?[\d\s]*(\.|,)?\d*$/.test(r)&&(e[h][3]=(a=void 0,a=(o=_).replace(",","."),!1===isNaN(parseFloat(a))?parseFloat(a):o)),V.getCellValidator(g)&&(d.addValidatorToQueue(),V.validateCell(e[h][3],g,function(t,n){return function(i){if("boolean"!=typeof i)throw new Error("Validation error: result is not boolean");if(!1===i&&!1===n.allowInvalid){e.splice(t,1),n.valid=!0;var o=V.getCell(n.visualRow,n.visualCol);(0,l.removeClass)(o,V.getSettings().invalidCellClassName),--t}d.removeValidatorFormQueue()}}(h,g),t))}d.checkIfQueueIsEmpty()}function Q(e,t){var o=e.length-1;if(!(o<0)){for(;o>=0;o--){var a=!1;if(null!==e[o]){if(null!=e[o][2]||null!=e[o][3]){if(n.settings.allowInsertRow)for(;e[o][0]>V.countRows()-1;)if(0===i.createRow(void 0,void 0,t)){a=!0;break}if(!a){if("array"===V.dataType&&(!n.settings.columns||0===n.settings.columns.length)&&n.settings.allowInsertColumn)for(;i.propToCol(e[o][1])>V.countCols()-1;)i.createCol(void 0,void 0,t);i.set(e[o][0],e[o][1],e[o][3])}}}else e.splice(o,1)}V.forceFullRender=!0,N.adjustRowsAndCols(),V.runHooks("beforeChangeRender",e,t),$.lockEditor(),V._refreshBorders(null),$.unlockEditor(),V.view.wt.wtOverlays.adjustElementsSize(),V.runHooks("afterChange",e,t||"edit");var s=V.getActiveEditor();s&&(0,h.isDefined)(s.refreshValue)&&s.refreshValue()}}function ee(e,t,n){return"object"===(void 0===e?"undefined":a(e))?e:[[e,t,n]]}function te(e){if((0,v.hasOwnProperty)(e,"type")){var t,n={};for(var i in"object"===a(e.type)?t=e.type:"string"==typeof e.type&&(t=(0,I.getCellType)(e.type)),t)(0,v.hasOwnProperty)(t,i)&&!(0,v.hasOwnProperty)(e,i)&&(n[i]=t[i]);return n}}this.selection=J,this.selection.addLocalHook("beforeSetRangeStart",(function(e){z.runHooks("beforeSetRangeStart",e)})),this.selection.addLocalHook("beforeSetRangeStartOnly",(function(e){z.runHooks("beforeSetRangeStartOnly",e)})),this.selection.addLocalHook("beforeSetRangeEnd",(function(e){z.runHooks("beforeSetRangeEnd",e),e.row<0&&(e.row=z.view.wt.wtTable.getFirstVisibleRow()),e.col<0&&(e.col=z.view.wt.wtTable.getFirstVisibleColumn())})),this.selection.addLocalHook("afterSetRangeEnd",(function(e){var t=(0,v.createObjectPropListener)(!1),n=z.selection.getSelectedRange(),i=n.current(),o=i.from,a=i.to,s=n.size()-1;z.runHooks("afterSelection",o.row,o.col,a.row,a.col,t,s),z.runHooks("afterSelectionByProp",o.row,V.colToProp(o.col),a.row,V.colToProp(a.col),t,s);var r=z.selection.isSelectedByAnyHeader(),d=z.selection.selectedRange.current(),c=!0;U&&(c=!1),t.isTouched()&&(c=!t.value),!1===c||r||(d&&!z.selection.isMultiple()?z.view.scrollViewport(d.from):z.view.scrollViewport(e));var u=z.selection.isSelectedByRowHeader(),h=z.selection.isSelectedByColumnHeader();u&&h?(0,l.addClass)(z.rootElement,["ht__selection--rows","ht__selection--columns"]):u?((0,l.removeClass)(z.rootElement,"ht__selection--columns"),(0,l.addClass)(z.rootElement,"ht__selection--rows")):h?((0,l.removeClass)(z.rootElement,"ht__selection--rows"),(0,l.addClass)(z.rootElement,"ht__selection--columns")):(0,l.removeClass)(z.rootElement,["ht__selection--rows","ht__selection--columns"]),z._refreshBorders(null)})),this.selection.addLocalHook("afterSelectionFinished",(function(e){var t=e.length-1,n=e[t],i=n.from,o=n.to;z.runHooks("afterSelectionEnd",i.row,i.col,o.row,o.col,t),z.runHooks("afterSelectionEndByProp",i.row,V.colToProp(i.col),o.row,V.colToProp(o.col),t)})),this.selection.addLocalHook("afterIsMultipleSelection",(function(e){var t=z.runHooks("afterIsMultipleSelection",e.value);e.value&&(e.value=t)})),this.selection.addLocalHook("beforeModifyTransformStart",(function(e){z.runHooks("modifyTransformStart",e)})),this.selection.addLocalHook("afterModifyTransformStart",(function(e,t,n){z.runHooks("afterModifyTransformStart",e,t,n)})),this.selection.addLocalHook("beforeModifyTransformEnd",(function(e){z.runHooks("modifyTransformEnd",e)})),this.selection.addLocalHook("afterModifyTransformEnd",(function(e,t,n){z.runHooks("afterModifyTransformEnd",e,t,n)})),this.selection.addLocalHook("afterDeselect",(function(){$.destroyEditor(),z._refreshBorders(),(0,l.removeClass)(z.rootElement,["ht__selection--rows","ht__selection--columns"]),z.runHooks("afterDeselect")})),this.selection.addLocalHook("insertRowRequire",(function(e){z.alter("insert_row",e,1,"auto")})),this.selection.addLocalHook("insertColRequire",(function(e){z.alter("insert_col",e,1,"auto")})),N={alter:function(e,t,o,a,r){var l;function d(e,t,n,i){var o=(0,g.arrayMap)(new Array(n),(function(){return e=void 0,"array"===i?e=[]:"object"===i&&(e={}),e;var e}));o.unshift(t,0),e.splice.apply(e,F(o))}o=o||1;var c=function(e){if(0===e.length)return[];var t=[].concat(F(e));t.sort((function(e,t){var n=s(e,1)[0],i=s(t,1)[0];return n===i?0:n>i?1:-1}));var n=(0,g.arrayReduce)(t,(function(e,t){var n=s(t,2),i=n[0],o=n[1],a=e[e.length-1],r=s(a,2),l=r[0]+r[1];if(i<=l){var d=Math.max(o-(l-i),0);a[1]+=d}else e.push([i,o]);return e}),[t[0]]);return n};switch(e){case"insert_row":var u=V.countSourceRows();if(V.getSettings().maxRows===u)return;t=(0,h.isDefined)(t)?t:u,l=i.createRow(t,o,a),d(n.cellSettings,t,o,"array"),l&&(J.isSelected()&&J.selectedRange.current().from.row>=t?(J.selectedRange.current().from.row+=l,J.transformEnd(l,0)):V._refreshBorders());break;case"insert_col":l=i.createCol(t,o,a);for(var p=0,f=V.countSourceRows();p<f;p++)n.cellSettings[p]&&d(n.cellSettings[p],t,o);if(l){if(Array.isArray(V.getSettings().colHeaders)){var m=[t,0];m.length+=l,Array.prototype.splice.apply(V.getSettings().colHeaders,m)}J.isSelected()&&J.selectedRange.current().from.col>=t?(J.selectedRange.current().from.col+=l,J.transformEnd(0,l)):V._refreshBorders()}break;case"remove_row":var _=function(e){var t=0;(0,g.arrayEach)(e,(function(e){var o=s(e,2),r=o[0],l=o[1],d=(0,h.isEmpty)(r)?V.countRows()-1:Math.max(r-t,0);Number.isInteger(r)&&(r=Math.max(r-t,0)),i.removeRow(r,l,a),n.cellSettings.splice(d,l);var c=V.countRows(),u=V.getSettings().fixedRowsTop;u>=d+1&&(V.getSettings().fixedRowsTop-=Math.min(l,u-d));var p=V.getSettings().fixedRowsBottom;p&&d>=c-p&&(V.getSettings().fixedRowsBottom-=Math.min(l,p)),t+=l}))};Array.isArray(t)?_(c(t)):_([[t,o]]),N.adjustRowsAndCols(),V._refreshBorders();break;case"remove_col":var v=function(e){var t=0;(0,g.arrayEach)(e,(function(e){var o=s(e,2),r=o[0],l=o[1],d=(0,h.isEmpty)(r)?V.countCols()-1:Math.max(r-t,0),c=G.toPhysicalColumn(d);Number.isInteger(r)&&(r=Math.max(r-t,0)),i.removeCol(r,l,a);for(var u=0,p=V.countSourceRows();u<p;u++)n.cellSettings[u]&&n.cellSettings[u].splice(c,l);var f=V.getSettings().fixedColumnsLeft;f>=d+1&&(V.getSettings().fixedColumnsLeft-=Math.min(l,f-d)),Array.isArray(V.getSettings().colHeaders)&&(void 0===c&&(c=-1),V.getSettings().colHeaders.splice(c,l)),t+=l}))};Array.isArray(t)?v(c(t)):v([[t,o]]),N.adjustRowsAndCols(),V._refreshBorders();break;default:throw new Error('There is no such action "'+e+'"')}r||N.adjustRowsAndCols()},adjustRowsAndCols:function(){if(n.settings.minRows){var e=V.countRows();if(e<n.settings.minRows)for(var t=0,o=n.settings.minRows;t<o-e;t++)i.createRow(V.countRows(),1,"auto")}if(n.settings.minSpareRows){var a=V.countEmptyRows(!0);if(a<n.settings.minSpareRows)for(;a<n.settings.minSpareRows&&V.countSourceRows()<n.settings.maxRows;a++)i.createRow(V.countRows(),1,"auto")}var s=void 0;if((n.settings.minCols||n.settings.minSpareCols)&&(s=V.countEmptyCols(!0)),n.settings.minCols&&!n.settings.columns&&V.countCols()<n.settings.minCols)for(;V.countCols()<n.settings.minCols;s++)i.createCol(V.countCols(),1,"auto");if(n.settings.minSpareCols&&!n.settings.columns&&"array"===V.dataType&&s<n.settings.minSpareCols)for(;s<n.settings.minSpareCols&&V.countCols()<n.settings.maxCols;s++)i.createCol(V.countCols(),1,"auto");var r=V.countRows(),l=V.countCols();0!==r&&0!==l||J.deselect(),J.isSelected()&&(0,g.arrayEach)(J.selectedRange,(function(e){var t=!1,n=e.from.row,i=e.from.col,o=e.to.row,a=e.to.col;n>r-1?(t=!0,o>(n=r-1)&&(o=n)):o>r-1&&(t=!0,n>(o=r-1)&&(n=o)),i>l-1?(t=!0,a>(i=l-1)&&(a=i)):a>l-1&&(t=!0,i>(a=l-1)&&(i=a)),t&&V.selectCell(n,i,o,a)})),V.view&&V.view.wt.wtOverlays.adjustElementsSize()},populateFromArray:function(e,t,i,o,s,r,l){var d,c,u,p,f,m,_,g,y=[],b={};if(0===(c=t.length))return!1;switch(null===i||i.row,null===i||i.col,s){case"shift_down":for(f=i?i.col-e.col+1:0,m=i?i.row-e.row+1:0,u=0,p=(t=(0,T.translateRowsToColumns)(t)).length,_=Math.max(p,f);u<_;u++)if(u<p){var w;for(d=0,c=t[u].length;d<m-c;d++)t[u].push(t[u][d%c]);t[u].unshift(e.col+u,e.row,0),(w=V).spliceCol.apply(w,F(t[u]))}else{var k;t[u%p][0]=e.col+u,(k=V).spliceCol.apply(k,F(t[u%p]))}break;case"shift_right":for(f=i?i.col-e.col+1:0,m=i?i.row-e.row+1:0,d=0,c=t.length,g=Math.max(c,m);d<g;d++)if(d<c){var C;for(u=0,p=t[d].length;u<f-p;u++)t[d].push(t[d][u%p]);t[d].unshift(e.row+d,e.col,0),(C=V).spliceRow.apply(C,F(t[d]))}else{var x;t[d%c][0]=e.row+d,(x=V).spliceRow.apply(x,F(t[d%c]))}break;default:b.row=e.row,b.col=e.col;var S={row:i&&e?i.row-e.row+1:1,col:i&&e?i.col-e.col+1:1},M=0,L=0,D=!0,E=void 0,O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=t[e%t.length];return null!==n?i[n%i.length]:i},A=t.length,I=i?i.row-e.row+1:0;for(c=i?I:Math.max(A,I),d=0;d<c&&!(i&&b.row>i.row&&I>A||!n.settings.allowInsertRow&&b.row>V.countRows()-1||b.row>=n.settings.maxRows);d++){var P=d-M,R=O(P).length,j=i?i.col-e.col+1:0;if(p=i?j:Math.max(R,j),b.col=e.col,E=V.getCellMeta(b.row,b.col),"CopyPaste.paste"!==o&&"Autofill.autofill"!==o||!E.skipRowOnPaste){for(L=0,u=0;u<p&&!(i&&b.col>i.col&&j>R||!n.settings.allowInsertColumn&&b.col>V.countCols()-1||b.col>=n.settings.maxCols);u++)if(E=V.getCellMeta(b.row,b.col),"CopyPaste.paste"!==o&&"Autofill.fill"!==o||!E.skipColumnOnPaste)if(E.readOnly)b.col++;else{var Y=u-L,H=O(P,Y),N=V.getDataAtCell(b.row,b.col),B={row:P,col:Y};if("Autofill.fill"===o){var $=V.runHooks("beforeAutofillInsidePopulate",B,r,t,l,{},S);$&&(H=(0,h.isUndefined)($.value)?H:$.value)}if(null!==H&&"object"===(void 0===H?"undefined":a(H)))if(null===N||"object"!==(void 0===N?"undefined":a(N)))D=!1;else{var z=(0,v.duckSchema)(N[0]||N),W=(0,v.duckSchema)(H[0]||H);(0,v.isObjectEqual)(z,W)?H=(0,v.deepClone)(H):D=!1}else null!==N&&"object"===(void 0===N?"undefined":a(N))&&(D=!1);D&&y.push([b.row,b.col,H]),D=!0,b.col++}else L++,b.col++,p++;b.row++}else M++,b.row++,c++}V.setDataAtCell(y,null,null,o||"populateFromArray")}}},this.init=function(){o.setData(n.settings.data),V.runHooks("beforeInit"),(0,p.isMobileBrowser)()&&(0,l.addClass)(V.rootElement,"mobile"),this.updateSettings(n.settings,!0),this.view=new S.default(this),$=m.default.getInstance(V,n,J,i),this.forceFullRender=!0,V.runHooks("init"),this.view.render(),"object"===a(n.firstRun)&&(V.runHooks("afterChange",n.firstRun[0],n.firstRun[1]),n.firstRun=!1),V.runHooks("afterInit")},this.validateCell=function(e,t,n,i){var o=V.getCellValidator(t);function a(e){if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]||!0===t.hidden)n(e);else{var i=t.visualCol,o=t.visualRow,a=V.getCell(o,i,!0);a&&"TH"!=a.nodeName&&V.view.wt.wtSettings.settings.cellRenderer(o,i,a),n(e)}}(0,h.isRegExp)(o)&&(o=function(e){return function(t,n){n(e.test(t))}}(o)),(0,c.isFunction)(o)?(e=V.runHooks("beforeValidate",e,t.visualRow,t.prop,i),V._registerTimeout(setTimeout((function(){o.call(t,e,(function(n){n=V.runHooks("afterValidate",n,e,t.visualRow,t.prop,i),t.valid=n,a(n),V.runHooks("postAfterValidate",n,e,t.visualRow,t.prop,i)}))}),0))):V._registerTimeout(setTimeout((function(){t.valid=!0,a(t.valid,!1)}),0))},this.setDataAtCell=function(e,t,n,s){var r,l,d,c=ee(e,t,n),u=[];for(r=0,l=c.length;r<l;r++){if("object"!==a(c[r]))throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof c[r][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");d=i.colToProp(c[r][1]),u.push([c[r][0],d,o.getAtCell(G.toPhysicalRow(c[r][0]),c[r][1]),c[r][2]])}s||"object"!==(void 0===e?"undefined":a(e))||(s=t),V.runHooks("afterSetDataAtCell",u,s),X(u,s,(function(){Q(u,s)}))},this.setDataAtRowProp=function(e,t,n,i){var s,r,l=ee(e,t,n),d=[];for(s=0,r=l.length;s<r;s++)d.push([l[s][0],l[s][1],o.getAtCell(G.toPhysicalRow(l[s][0]),l[s][1]),l[s][2]]);i||"object"!==(void 0===e?"undefined":a(e))||(i=t),V.runHooks("afterSetDataAtRowProp",d,i),X(d,i,(function(){Q(d,i)}))},this.listen=function(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var e=!document.activeElement||document.activeElement&&void 0===document.activeElement.nodeName;document.activeElement&&document.activeElement!==document.body&&!e?document.activeElement.blur():e&&document.body.focus()}V&&!V.isListening()&&(B=V.guid,V.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(B=null,V.runHooks("afterUnlisten"))},this.isListening=function(){return B===V.guid},this.destroyEditor=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];V._refreshBorders(e,t)},this.populateFromArray=function(e,t,n,i,o,s,r,l,d){var c;if("object"!==(void 0===n?"undefined":a(n))||"object"!==a(n[0]))throw new Error("populateFromArray parameter `input` must be an array of arrays");return c="number"==typeof i?new E.CellCoords(i,o):null,N.populateFromArray(new E.CellCoords(e,t),n,c,s,r,l,d)},this.spliceCol=function(e,t,n){var o;return(o=i).spliceCol.apply(o,arguments)},this.spliceRow=function(e,t,n){var o;return(o=i).spliceRow.apply(o,arguments)},this.getSelected=function(){if(J.isSelected())return(0,g.arrayMap)(J.getSelectedRange(),(function(e){var t=e.from,n=e.to;return[t.row,t.col,n.row,n.col]}))},this.getSelectedLast=function(){var e=this.getSelected(),t=void 0;return e&&e.length>0&&(t=e[e.length-1]),t},this.getSelectedRange=function(){if(J.isSelected())return Array.from(J.getSelectedRange())},this.getSelectedRangeLast=function(){var e=this.getSelectedRange(),t=void 0;return e&&e.length>0&&(t=e[e.length-1]),t},this.emptySelectedCells=function(){var e=this;if(J.isSelected()){var t=[];(0,g.arrayEach)(J.getSelectedRange(),(function(n){var i=n.getTopLeftCorner(),o=n.getBottomRightCorner();(0,x.rangeEach)(i.row,o.row,(function(n){(0,x.rangeEach)(i.col,o.col,(function(i){e.getCellMeta(n,i).readOnly||t.push([n,i,""])}))}))})),t.length>0&&this.setDataAtCell(t)}},this.render=function(){V.view&&(V.renderCall=!0,V.forceFullRender=!0,$.lockEditor(),V._refreshBorders(null),$.unlockEditor())},this.loadData=function(e){if(Array.isArray(n.settings.dataSchema)?V.dataType="array":(0,c.isFunction)(n.settings.dataSchema)?V.dataType="function":V.dataType="object",i&&i.destroy(),i=new f.default(V,n,q),"object"===(void 0===e?"undefined":a(e))&&null!==e)e.push&&e.splice||(e=[e]);else{if(null!==e)throw new Error("loadData only accepts array of objects or array of arrays ("+(void 0===e?"undefined":a(e))+" given)");var t;e=[];var s,r=0,l=i.getSchema();for(r=0,s=n.settings.startRows;r<s;r++)if("object"!==V.dataType&&"function"!==V.dataType||!n.settings.dataSchema)if("array"===V.dataType)t=(0,v.deepClone)(l[0]),e.push(t);else{t=[];for(var d=0,u=n.settings.startCols;d<u;d++)t.push(null);e.push(t)}else t=(0,v.deepClone)(l),e.push(t)}n.isPopulated=!1,q.prototype.data=e,Array.isArray(e[0])&&(V.dataType="array"),i.dataSource=e,o.data=e,o.dataType=V.dataType,o.colToProp=i.colToProp.bind(i),o.propToCol=i.propToCol.bind(i),n.cellSettings.length=0,N.adjustRowsAndCols(),V.runHooks("afterLoadData",n.firstRun),n.firstRun?n.firstRun=[null,"loadData"]:(V.runHooks("afterChange",null,"loadData"),V.render()),n.isPopulated=!0},this.getData=function(e,t,n,o){return(0,h.isUndefined)(e)?i.getAll():i.getRange(new E.CellCoords(e,t),new E.CellCoords(n,o),i.DESTINATION_RENDERER)},this.getCopyableText=function(e,t,n,o){return i.getCopyableText(new E.CellCoords(e,t),new E.CellCoords(n,o))},this.getCopyableData=function(e,t){return i.getCopyable(e,i.colToProp(t))},this.getSchema=function(){return i.getSchema()},this.updateSettings=function(e,t){var o,a,s=!1,r=void 0,u=void 0,p=void 0;if((0,h.isDefined)(e.rows))throw new Error('"rows" setting is no longer supported. do you mean startRows, minRows or maxRows?');if((0,h.isDefined)(e.cols))throw new Error('"cols" setting is no longer supported. do you mean startCols, minCols or maxCols?');for(r in e)"data"!==r&&("language"!==r?O.default.getSingleton().getRegistered().indexOf(r)>-1?((0,c.isFunction)(e[r])||Array.isArray(e[r]))&&(e[r].initialHook=!0,V.addHook(r,e[r])):!t&&(0,v.hasOwnProperty)(e,r)&&(q.prototype[r]=e[r]):(o=e.language,a=void 0,a=(0,j.normalizeLanguageCode)(o),(0,R.hasLanguageDictionary)(a)?(V.runHooks("beforeLanguageChange",a),q.prototype.language=a,V.runHooks("afterLanguageChange",a)):(0,j.warnUserAboutLanguageRegistration)(o)));void 0===e.data&&void 0===n.settings.data?V.loadData(null):void 0!==e.data?V.loadData(e.data):void 0!==e.columns&&i.createMap(),p=V.countCols();var f=e.columns||q.prototype.columns;if(f&&(0,c.isFunction)(f)&&(p=V.countSourceCols(),s=!0),void 0===e.cell&&void 0===e.cells&&void 0===e.columns||(n.cellSettings.length=0),p>0){var m=void 0,_=void 0;for(r=0,u=0;r<p;r++)s&&!f(r)||(n.columnSettings[u]=(0,d.columnFactory)(q,n.columnsSettingConflicts),m=n.columnSettings[u].prototype,f&&(_=s?f(r):f[u])&&((0,v.extend)(m,_),(0,v.extend)(m,te(_))),u++)}if((0,h.isDefined)(e.cell))for(var g in e.cell)if((0,v.hasOwnProperty)(e.cell,g)){var y=e.cell[g];V.setCellMetaObject(y.row,y.col,y)}V.runHooks("afterCellMetaReset"),(0,h.isDefined)(e.className)&&(q.prototype.className&&(0,l.removeClass)(V.rootElement,q.prototype.className),e.className&&(0,l.addClass)(V.rootElement,e.className));var b=V.rootElement.style.height;""!==b&&(b=parseInt(V.rootElement.style.height,10));var w=e.height;if((0,c.isFunction)(w)&&(w=w()),t&&V.rootElement.getAttribute("style")&&V.rootElement.setAttribute("data-initialstyle",V.rootElement.getAttribute("style")),null===w){var k=V.rootElement.getAttribute("data-initialstyle");k&&(k.indexOf("height")>-1||k.indexOf("overflow")>-1)?V.rootElement.setAttribute("style",k):(V.rootElement.style.height="",V.rootElement.style.overflow="")}else void 0!==w&&(V.rootElement.style.height=w+"px",V.rootElement.style.overflow="hidden");if(void 0!==e.width){var C=e.width;(0,c.isFunction)(C)&&(C=C()),V.rootElement.style.width=C+"px"}t||(i.clearLengthCache(),V.view&&V.view.wt.wtViewport.resetHasOversizedColumnHeadersMarked(),V.runHooks("afterUpdateSettings",e)),N.adjustRowsAndCols(),V.view&&!n.firstRun&&(V.forceFullRender=!0,$.lockEditor(),V._refreshBorders(null),$.unlockEditor()),t||!V.view||""!==b&&""!==w&&void 0!==w||b===w||V.view.wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){var e=V.getSelectedLast();if(q.prototype.getValue){if((0,c.isFunction)(q.prototype.getValue))return q.prototype.getValue.call(V);if(e)return V.getData()[e[0][0]][q.prototype.getValue]}else if(e)return V.getDataAtCell(e[0],e[1])},this.getSettings=function(){return n.settings},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(e,t,n,i,o){N.alter(e,t,n,i,o)},this.getCell=function(e,t,n){return V.view.getCellAtCoords(new E.CellCoords(e,t),n)},this.getCoords=function(e){return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable,e)},this.colToProp=function(e){return i.colToProp(e)},this.propToCol=function(e){return i.propToCol(e)},this.toVisualRow=function(e){return G.toVisualRow(e)},this.toVisualColumn=function(e){return G.toVisualColumn(e)},this.toPhysicalRow=function(e){return G.toPhysicalRow(e)},this.toPhysicalColumn=function(e){return G.toPhysicalColumn(e)},this.getDataAtCell=function(e,t){return i.get(e,i.colToProp(t))},this.getDataAtRowProp=function(e,t){return i.get(e,t)},this.getDataAtCol=function(e){var t=[];return t.concat.apply(t,F(i.getRange(new E.CellCoords(0,e),new E.CellCoords(n.settings.data.length-1,e),i.DESTINATION_RENDERER)))},this.getDataAtProp=function(e){var t,o=[];return t=i.getRange(new E.CellCoords(0,i.propToCol(e)),new E.CellCoords(n.settings.data.length-1,i.propToCol(e)),i.DESTINATION_RENDERER),o.concat.apply(o,F(t))},this.getSourceData=function(e,t,n,i){return void 0===e?o.getData():o.getByRange(new E.CellCoords(e,t),new E.CellCoords(n,i))},this.getSourceDataArray=function(e,t,n,i){return void 0===e?o.getData(!0):o.getByRange(new E.CellCoords(e,t),new E.CellCoords(n,i),!0)},this.getSourceDataAtCol=function(e){return o.getAtColumn(e)},this.getSourceDataAtRow=function(e){return o.getAtRow(e)},this.getSourceDataAtCell=function(e,t){return o.getAtCell(e,t)},this.getDataAtRow=function(e){return i.getRange(new E.CellCoords(e,0),new E.CellCoords(e,this.countCols()-1),i.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(e,t,n,i){var o=this,a=null,s=null;void 0===e&&(e=0,n=this.countRows(),t=0,i=this.countCols()),void 0===n&&(n=e),void 0===i&&(i=t);var r="mixed";return(0,x.rangeEach)(Math.min(e,n),Math.max(e,n),(function(e){var n=!0;return(0,x.rangeEach)(Math.min(t,i),Math.max(t,i),(function(t){var i=o.getCellMeta(e,t);return s=i.type,a?n=a===s:a=s,n})),r=n?s:"mixed",n})),r},this.removeCellMeta=function(e,t,i){var o=G.toPhysical(e,t),a=s(o,2),r=a[0],l=a[1],d=n.cellSettings[r][l][i];!1!==V.runHooks("beforeRemoveCellMeta",e,t,i,d)&&(delete n.cellSettings[r][l][i],V.runHooks("afterRemoveCellMeta",e,t,i,d)),d=null},this.spliceCellsMeta=function(e,t){for(var i,o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];(i=n.cellSettings).splice.apply(i,[e,t].concat(a))},this.setCellMetaObject=function(e,t,n){if("object"===(void 0===n?"undefined":a(n)))for(var i in n)if((0,v.hasOwnProperty)(n,i)){var o=n[i];this.setCellMeta(e,t,i,o)}},this.setCellMeta=function(e,t,i,o){var a=G.toPhysical(e,t),r=s(a,2),l=r[0],c=r[1];n.columnSettings[c]||(n.columnSettings[c]=(0,d.columnFactory)(q,n.columnsSettingConflicts)),n.cellSettings[l]||(n.cellSettings[l]=[]),n.cellSettings[l][c]||(n.cellSettings[l][c]=new n.columnSettings[c]),n.cellSettings[l][c][i]=o,V.runHooks("afterSetCellMeta",e,t,i,o)},this.getCellsMeta=function(){return(0,g.arrayFlatten)(n.cellSettings)},this.getCellMeta=function(e,t){var o=i.colToProp(t),a=void 0,r=G.toPhysical(e,t),l=s(r,2),c=l[0],u=l[1];if(null===c&&(c=e),n.columnSettings[u]||(n.columnSettings[u]=(0,d.columnFactory)(q,n.columnsSettingConflicts)),n.cellSettings[c]||(n.cellSettings[c]=[]),n.cellSettings[c][u]||(n.cellSettings[c][u]=new n.columnSettings[u]),(a=n.cellSettings[c][u]).row=c,a.col=u,a.visualRow=e,a.visualCol=t,a.prop=o,a.instance=V,V.runHooks("beforeGetCellMeta",e,t,a),(0,v.extend)(a,te(a)),a.cells){var h=a.cells.call(a,c,u,o);h&&((0,v.extend)(a,h),(0,v.extend)(a,te(h)))}return V.runHooks("afterGetCellMeta",e,t,a),a},this.getCellMetaAtRow=function(e){return n.cellSettings[e]},this.isColumnModificationAllowed=function(){return!("object"===V.dataType||V.getSettings().columns)};var ne=(0,T.cellMethodLookupFactory)("renderer");this.getCellRenderer=function(e,t){return(0,w.getRenderer)(ne.call(this,e,t))},this.getCellEditor=(0,T.cellMethodLookupFactory)("editor");var ie=(0,T.cellMethodLookupFactory)("validator");function oe(e){return function(){throw new Error('The "'+e+'" method cannot be called because this Handsontable instance has been destroyed')}}this.getCellValidator=function(e,t){var n=ie.call(this,e,t);return"string"==typeof n&&(n=(0,k.getValidator)(n)),n},this.validateCells=function(e){this._validateCells(e)},this.validateRows=function(e,t){if(!Array.isArray(e))throw new Error("validateRows parameter `rows` must be an array");this._validateCells(t,e)},this.validateColumns=function(e,t){if(!Array.isArray(e))throw new Error("validateColumns parameter `columns` must be an array");this._validateCells(t,void 0,e)},this._validateCells=function(e,t,n){var i=new K;e&&(i.onQueueEmpty=e);for(var o=V.countRows()-1;o>=0;)if(void 0===t||-1!==t.indexOf(o)){for(var a=V.countCols()-1;a>=0;)void 0===n||-1!==n.indexOf(a)?(i.addValidatorToQueue(),V.validateCell(V.getDataAtCell(o,a),V.getCellMeta(o,a),(function(e){if("boolean"!=typeof e)throw new Error("Validation error: result is not boolean");!1===e&&(i.valid=!1),i.removeValidatorFormQueue()}),"validateCells"),a--):a--;o--}else o--;i.checkIfQueueIsEmpty()},this.getRowHeader=function(e){var t=n.settings.rowHeaders;return void 0!==e&&(e=V.runHooks("modifyRowHeader",e)),void 0===e?(t=[],(0,x.rangeEach)(V.countRows()-1,(function(e){t.push(V.getRowHeader(e))}))):Array.isArray(t)&&void 0!==t[e]?t=t[e]:(0,c.isFunction)(t)?t=t(e):t&&"string"!=typeof t&&"number"!=typeof t&&(t=e+1),t},this.hasRowHeaders=function(){return!!n.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==n.settings.colHeaders&&null!==n.settings.colHeaders)return!!n.settings.colHeaders;for(var e=0,t=V.countCols();e<t;e++)if(V.getColHeader(e))return!0;return!1},this.getColHeader=function(e){var t=n.settings.columns&&(0,c.isFunction)(n.settings.columns),i=n.settings.colHeaders;if(void 0===(e=V.runHooks("modifyColHeader",e))){for(var o=[],a=t?V.countSourceCols():V.countCols(),s=0;s<a;s++)o.push(V.getColHeader(s));i=o}else{var r=e,l=function(e){for(var t=[],n=V.countSourceCols(),i=0;i<n;i++)(0,c.isFunction)(V.getSettings().columns)&&V.getSettings().columns(i)&&t.push(i);return t[e]}(e=V.runHooks("modifyCol",e));n.settings.columns&&(0,c.isFunction)(n.settings.columns)&&n.settings.columns(l)&&n.settings.columns(l).title?i=n.settings.columns(l).title:n.settings.columns&&n.settings.columns[e]&&n.settings.columns[e].title?i=n.settings.columns[e].title:Array.isArray(n.settings.colHeaders)&&void 0!==n.settings.colHeaders[e]?i=n.settings.colHeaders[e]:(0,c.isFunction)(n.settings.colHeaders)?i=n.settings.colHeaders(e):n.settings.colHeaders&&"string"!=typeof n.settings.colHeaders&&"number"!=typeof n.settings.colHeaders&&(i=(0,T.spreadsheetColumnLabel)(r))}return i},this._getColWidthFromSettings=function(e){var t=V.getCellMeta(0,e),i=t.width;if(void 0!==i&&i!==n.settings.width||(i=t.colWidths),null!=i){switch(void 0===i?"undefined":a(i)){case"object":i=i[e];break;case"function":i=i(e)}"string"==typeof i&&(i=parseInt(i,10))}return i},this.getColWidth=function(e){var t=V._getColWidthFromSettings(e);return void 0===(t=V.runHooks("modifyColWidth",t,e))&&(t=E.ViewportColumnsCalculator.DEFAULT_WIDTH),t},this._getRowHeightFromSettings=function(e){var t=n.settings.rowHeights;if(null!=t){switch(void 0===t?"undefined":a(t)){case"object":t=t[e];break;case"function":t=t(e)}"string"==typeof t&&(t=parseInt(t,10))}return t},this.getRowHeight=function(e){var t=V._getRowHeightFromSettings(e);return t=V.runHooks("modifyRowHeight",t,e)},this.countSourceRows=function(){return V.runHooks("modifySourceLength")||(V.getSourceData()?V.getSourceData().length:0)},this.countSourceCols=function(){var e=V.getSourceData()&&V.getSourceData()[0]?V.getSourceData()[0]:[];return(0,v.isObject)(e)?(0,v.deepObjectSize)(e):e.length||0},this.countRows=function(){return i.getLength()},this.countCols=function(){var e=this.getSettings().maxCols,t=!1,o=0;if("array"===V.dataType&&(t=n.settings.data&&n.settings.data[0]&&n.settings.data[0].length),t&&(o=n.settings.data[0].length),n.settings.columns)if((0,c.isFunction)(n.settings.columns))if("array"===V.dataType){for(var a=0,s=0;s<o;s++)n.settings.columns(s)&&a++;o=a}else"object"!==V.dataType&&"function"!==V.dataType||(o=i.colToPropCache.length);else o=n.settings.columns.length;else"object"!==V.dataType&&"function"!==V.dataType||(o=i.colToPropCache.length);return Math.min(e,o)},this.rowOffset=function(){return V.view.wt.wtTable.getFirstRenderedRow()},this.colOffset=function(){return V.view.wt.wtTable.getFirstRenderedColumn()},this.countRenderedRows=function(){return V.view.wt.drawn?V.view.wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return V.view.wt.drawn?V.view.wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return V.view.wt.drawn?V.view.wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return V.view.wt.drawn?V.view.wt.wtTable.getVisibleColumnsCount():-1},this.countEmptyRows=function(e){var t=0;return(0,x.rangeEachReverse)(V.countRows()-1,(function(n){if(V.isEmptyRow(n))t+=1;else if(!0===e)return!1})),t},this.countEmptyCols=function(e){if(V.countRows()<1)return 0;var t=0;return(0,x.rangeEachReverse)(V.countCols()-1,(function(n){if(V.isEmptyCol(n))t+=1;else if(!0===e)return!1})),t},this.isEmptyRow=function(e){return n.settings.isEmptyRow.call(V,e)},this.isEmptyCol=function(e){return n.settings.isEmptyCol.call(V,e)},this.selectCell=function(e,t,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return!(0,h.isUndefined)(e)&&!(0,h.isUndefined)(t)&&this.selectCells([[e,t,n,i]],o,a)},this.selectCells=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(U=!0);var n=J.selectCells(e);return n&&t&&V.listen(),U=!1,n},this.selectCellByProp=function(e,t,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return(0,u.warn)((0,y.toSingleLine)(r)),this.selectCells([[e,t,n,i]],o,a)},this.selectColumns=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return J.selectColumns(e,t)},this.selectRows=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return J.selectRows(e,t)},this.deselectCell=function(){J.deselect()},this.selectAll=function(){U=!0,J.selectAll(),U=!1},this.scrollViewportTo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e&&(e<0||e>=V.countRows()))return!1;if(void 0!==t&&(t<0||t>=V.countCols()))return!1;var o=!1;return void 0!==e&&void 0!==t&&(V.view.wt.wtOverlays.topOverlay.scrollTo(e,n),V.view.wt.wtOverlays.leftOverlay.scrollTo(t,i),o=!0),"number"==typeof e&&"number"!=typeof t&&(V.view.wt.wtOverlays.topOverlay.scrollTo(e,n),o=!0),"number"==typeof t&&"number"!=typeof e&&(V.view.wt.wtOverlays.leftOverlay.scrollTo(t,i),o=!0),o},this.destroy=function(){for(var e in V._clearTimeouts(),V._clearImmediates(),V.view&&V.view.destroy(),o&&o.destroy(),o=null,(0,Y.stopObserving)(),(0,l.empty)(V.rootElement),Z.destroy(),$&&$.destroy(),V.runHooks("afterDestroy"),O.default.getSingleton().destroy(V),V)(0,v.hasOwnProperty)(V,e)&&((0,c.isFunction)(V[e])?V[e]=oe(e):"guid"!==e&&(V[e]=null));V.isDestroyed=!0,i&&i.destroy(),i=null,n=null,N=null,J=null,$=null,V=null,q=null},this.getActiveEditor=function(){return $.getActiveEditor()},this.getPlugin=function(e){return(0,b.getPlugin)(this,e)},this.getInstance=function(){return V},this.addHook=function(e,t){O.default.getSingleton().add(e,t,V)},this.hasHook=function(e){return O.default.getSingleton().has(e,V)},this.addHookOnce=function(e,t){O.default.getSingleton().once(e,t,V)},this.removeHook=function(e,t){O.default.getSingleton().remove(e,t,V)},this.runHooks=function(e,t,n,i,o,a,s){return O.default.getSingleton().run(V,e,t,n,i,o,a,s)},this.getTranslatedPhrase=function(e,t){return(0,P.getTranslatedPhrase)(n.settings.language,e,t)},this.timeouts=[],this._registerTimeout=function(e){"function"==typeof e&&(e=setTimeout(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)),this.timeouts.push(e)},this._clearTimeouts=function(){(0,g.arrayEach)(this.timeouts,(function(e){clearTimeout(e)}))},this.immediates=[],this._registerImmediate=function(e){this.immediates.push(setImmediate(e))},this._clearImmediates=function(){(0,g.arrayEach)(this.immediates,(function(e){clearImmediate(e)}))},this._refreshBorders=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];$.destroyEditor(e),V.view.render(),t&&J.isSelected()&&$.prepareEditor()},O.default.getSingleton().run(V,"construct")};var l=n(0),d=n(90),c=n(43),u=n(58),h=n(11),p=n(27),f=N(n(263)),m=N(n(266)),_=N(n(6)),v=n(2),g=n(1),y=n(42),b=n(8),w=n(14),k=n(28),C=n(36),x=n(5),S=N(n(267)),M=N(n(268)),T=n(91),L=n(194),D=n(195),E=n(4),O=N(n(16)),A=N(n(196)),I=n(88),P=n(197),R=n(71),j=n(198),Y=n(199),H=n(272);function N(e){return e&&e.__esModule?e:{default:e}}function F(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var B=null},function(e,t,n){"use strict";t.__esModule=!0,t.columnFactory=function(e,t){function n(){}(0,i.inherit)(n,e);for(var o=0,a=t.length;o<a;o++)n.prototype[t[o]]=void 0;return n};var i=n(2)},function(e,t,n){"use strict";t.__esModule=!0,t.spreadsheetColumnLabel=r,t.spreadsheetColumnIndex=function(e){var t=0;if(e)for(var n=0,i=e.length-1;n<e.length;n+=1,i-=1)t+=Math.pow(s,i)*(a.indexOf(e[n])+1);return--t},t.createSpreadsheetData=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,o=[];for(e=0;e<n;e++){var a=[];for(t=0;t<i;t++)a.push(r(t)+(e+1));o.push(a)}return o},t.createSpreadsheetObjectData=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,o=[];for(e=0;e<n;e++){var a={};for(t=0;t<i;t++)a["prop"+t]=r(t)+(e+1);o.push(a)}return o},t.createEmptySpreadsheetData=function(e,t){for(var n=[],i=void 0,o=0;o<e;o++){i=[];for(var a=0;a<t;a++)i.push("");n.push(i)}return n},t.translateRowsToColumns=function(e){var t,n,i,o,a=[],s=0;for(t=0,n=e.length;t<n;t++)for(i=0,o=e[t].length;i<o;i++)i==s&&(a.push([]),s++),a[i].push(e[t][i]);return a},t.cellMethodLookupFactory=function(e,t){return t=void 0===t||t,function(n,a){return function n(a){if(a){if((0,o.hasOwnProperty)(a,e)&&void 0!==a[e])return a[e];if((0,o.hasOwnProperty)(a,"type")&&a.type){var s;if("string"!=typeof a.type)throw new Error("Cell type must be a string ");if(s=(0,i.getCellType)(a.type),(0,o.hasOwnProperty)(s,e))return s[e];if(t)return}return n(Object.getPrototypeOf(a))}}("number"==typeof n?this.getCellMeta(n,a):n)}};var i=n(88),o=n(2),a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=a.length;function r(e){for(var t=e+1,n="",i=void 0;t>0;)i=(t-1)%s,n=String.fromCharCode(65+i)+n,t=parseInt((t-i)/s,10);return n}},function(e,t,n){"use strict";t.__esModule=!0,t.SELECTION_TYPES=t.SELECTION_TYPE_OBJECT=t.SELECTION_TYPE_ARRAY=t.SELECTION_TYPE_EMPTY=t.SELECTION_TYPE_UNRECOGNIZED=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.detectSelectionType=_,t.normalizeSelectionFactory=v,t.transformSelectionToColumnDistance=function(e){var t=_(e);if(t===l||t===d)return[];var n=v(t),o=new Set;(0,s.arrayEach)(e,(function(e){var t=n(e),a=i(t,4),r=a[1],l=a[3]-r+1;(0,s.arrayEach)(Array.from(new Array(l),(function(e,t){return r+t})),(function(e){o.has(e)||o.add(e)}))}));var a=Array.from(o).sort((function(e,t){return e-t}));return(0,s.arrayReduce)(a,(function(e,t,n,i){return 0!==n&&t===i[n-1]+1?e[e.length-1][1]++:e.push([t,1]),e}),[])},t.transformSelectionToRowDistance=function(e){var t=_(e);if(t===l||t===d)return[];var n=v(t),o=new Set;(0,s.arrayEach)(e,(function(e){var t=n(e),a=i(t,3),r=a[0],l=a[2]-r+1;(0,s.arrayEach)(Array.from(new Array(l),(function(e,t){return r+t})),(function(e){o.has(e)||o.add(e)}))}));var a=Array.from(o).sort((function(e,t){return e-t}));return(0,s.arrayReduce)(a,(function(e,t,n,i){return 0!==n&&t===i[n-1]+1?e[e.length-1][1]++:e.push([t,1]),e}),[])},t.isValidCoord=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return"number"==typeof e&&e>=0&&e<t};var a=n(4),s=n(1),r=n(11),l=t.SELECTION_TYPE_UNRECOGNIZED=0,d=t.SELECTION_TYPE_EMPTY=1,c=t.SELECTION_TYPE_ARRAY=2,u=t.SELECTION_TYPE_OBJECT=3,h=t.SELECTION_TYPES=[u,c],p=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],f=Symbol("root"),m=Symbol("child");function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;if(t!==f&&t!==m)throw new Error("The second argument is used internally only and cannot be overwritten.");var n=Array.isArray(e),i=t===f,s=l;if(n){var r=e[0];0===e.length?s=d:i&&r instanceof a.CellRange?s=u:i&&Array.isArray(r)?s=_(r,m):e.length>=2&&e.length<=4&&!e.some((function(e,t){return!p[t].includes(void 0===e?"undefined":o(e))}))&&(s=c)}return s}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.keepDirection,i=void 0!==n&&n,o=t.propToCol;if(!h.includes(e))throw new Error("Unsupported selection ranges schema type was provided.");return function(t){var n=e===u,a=n?t.from.row:t[0],s=n?t.from.col:t[1],l=n?t.to.row:t[2],d=n?t.to.col:t[3];if("function"==typeof o&&("string"==typeof s&&(s=o(s)),"string"==typeof d&&(d=o(d))),(0,r.isUndefined)(l)&&(l=a),(0,r.isUndefined)(d)&&(d=s),!i){var c=a,h=s,p=l,f=d;a=Math.min(c,p),s=Math.min(h,f),l=Math.max(c,p),d=Math.max(h,f)}return[a,s,l,d]}}},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(1),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return i(e,[{key:"addRow",value:function(e,t){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={row:e};this.rows.push(n),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(e)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"addColumnHeadersRow",value:function(e){if(null!=this.hot.getColHeader(0)){var t={row:-1};this.rows.push(t),this.container=this.createContainer(this.hot.rootElement.className),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tHead.appendChild(this.createColumnHeadersRow()),this.container.container.appendChild(this.table.fragment),t.table=this.table.table}}},{key:"addColumn",value:function(e,t){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={col:e};this.columns.push(n),this.samples=t,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(e)&&this.hot.view.appendColHeader(e,this.table.th),this.table.tBody.appendChild(this.createCol(e)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"getHeights",value:function(e){this.injected||this.injectTable(),(0,a.arrayEach)(this.rows,(function(t){e(t.row,(0,o.outerHeight)(t.table)-1)}))}},{key:"getWidths",value:function(e){this.injected||this.injectTable(),(0,a.arrayEach)(this.columns,(function(t){e(t.col,(0,o.outerWidth)(t.table))}))}},{key:"setSettings",value:function(e){this.settings=e}},{key:"setSetting",value:function(e,t){this.settings||(this.settings={}),this.settings[e]=t}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(e){return this.settings?this.settings[e]:null}},{key:"createColGroupsCol",value:function(){var e=this,t=document.createDocumentFragment();return this.hot.hasRowHeaders()&&t.appendChild(this.createColElement(-1)),this.samples.forEach((function(n){(0,a.arrayEach)(n.strings,(function(n){t.appendChild(e.createColElement(n.col))}))})),t}},{key:"createRow",value:function(e){var t=this,n=document,i=n.createDocumentFragment(),o=n.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(e,o),i.appendChild(o)),this.samples.forEach((function(o){(0,a.arrayEach)(o.strings,(function(o){var a=o.col,s=t.hot.getCellMeta(e,a);s.col=a,s.row=e;var r=t.hot.getCellRenderer(s),l=n.createElement("td");r(t.hot,l,e,a,t.hot.colToProp(a),o.value,s),i.appendChild(l)}))})),i}},{key:"createColumnHeadersRow",value:function(){var e=this,t=document,n=t.createDocumentFragment();if(this.hot.hasRowHeaders()){var i=t.createElement("th");this.hot.view.appendColHeader(-1,i),n.appendChild(i)}return this.samples.forEach((function(i){(0,a.arrayEach)(i.strings,(function(i){var o=i.col,a=t.createElement("th");e.hot.view.appendColHeader(o,a),n.appendChild(a)}))})),n}},{key:"createCol",value:function(e){var t=this,n=document,i=n.createDocumentFragment();return this.samples.forEach((function(o){(0,a.arrayEach)(o.strings,(function(o){var a=o.row,s=t.hot.getCellMeta(a,e);s.col=e,s.row=a;var r=t.hot.getCellRenderer(s),l=n.createElement("td"),d=n.createElement("tr");r(t.hot,l,a,e,t.hot.colToProp(e),o.value,s),d.appendChild(l),i.appendChild(d)}))})),i}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.injected||((e||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(e){var t=document.createElement("col");return t.style.width=this.hot.view.wt.wtTable.getStretchedColumnWidth(e)+"px",t}},{key:"createTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document,n=t.createDocumentFragment(),i=t.createElement("table"),a=t.createElement("thead"),s=t.createElement("tbody"),r=t.createElement("colgroup"),l=t.createElement("tr"),d=t.createElement("th");return this.isVertical()&&i.appendChild(r),this.isHorizontal()&&(l.appendChild(d),a.appendChild(l),i.style.tableLayout="auto",i.style.width="auto"),i.appendChild(a),this.isVertical()&&s.appendChild(l),i.appendChild(s),(0,o.addClass)(i,e),n.appendChild(i),{fragment:n,table:i,tHead:a,tBody:s,colGroup:r,tr:l,th:d}}},{key:"createContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document,n=t.createDocumentFragment(),i=t.createElement("div");return e="htGhostTable htAutoSize "+e.trim(),(0,o.addClass)(i,e),n.appendChild(i),{fragment:n,container:i}}},{key:"isVertical",value:function(){return!(!this.rows.length||this.columns.length)}},{key:"isHorizontal",value:function(){return!(!this.columns.length||this.rows.length)}}]),e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),o=n(2),a=n(5),s={_arrayMap:[],getValueByIndex:function(e){var t=null;return e<this._arrayMap.length&&(t=this._arrayMap[e]),t},getIndexByValue:function(e){var t;return-1===(t=this._arrayMap.indexOf(e))?null:t},insertItems:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=(0,i.arrayMax)(this._arrayMap)+1,s=[];return(0,a.rangeEach)(n-1,(function(n){s.push(t._arrayMap.splice(e+n,0,o+n))})),s},removeItems:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=[];if(Array.isArray(e)){var a=[].concat(this._arrayMap);e.sort((function(e,t){return t-e})),o=(0,i.arrayReduce)(e,(function(e,n){return t._arrayMap.splice(n,1),e.concat(a.slice(n,n+1))}),[])}else o=this._arrayMap.splice(e,n);return o},unshiftItems:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.removeItems(e,t);this._arrayMap=(0,i.arrayMap)(this._arrayMap,(function(e,t){var o=function(e){return(0,i.arrayReduce)(n,(function(t,n){return e>n&&t++,t}),0)}(e);return o&&(e-=o),e}))},shiftItems:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._arrayMap=(0,i.arrayMap)(this._arrayMap,(function(t){return t>=e&&(t+=n),t})),(0,a.rangeEach)(n-1,(function(n){t._arrayMap.splice(e+n,0,e+n)}))},swapIndexes:function(e,t){var n;(n=this._arrayMap).splice.apply(n,[t,0].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this._arrayMap.splice(e,1))))},clearMap:function(){this._arrayMap.length=0}};(0,o.defineGetter)(s,"MIXIN_NAME","arrayMapper",{writable:!1,enumerable:!1}),t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){return{name:i}};var i=t.KEY="---------"},function(e,t,n){"use strict";var i;t.__esModule=!0,t.ITEMS=t.UNDO=t.SEPARATOR=t.ROW_BELOW=t.ROW_ABOVE=t.REMOVE_ROW=t.REMOVE_COLUMN=t.REDO=t.READ_ONLY=t.COLUMN_RIGHT=t.COLUMN_LEFT=t.CLEAR_COLUMN=t.ALIGNMENT=void 0;var o=n(304);Object.defineProperty(t,"ALIGNMENT",{enumerable:!0,get:function(){return o.KEY}});var a=n(305);Object.defineProperty(t,"CLEAR_COLUMN",{enumerable:!0,get:function(){return a.KEY}});var s=n(306);Object.defineProperty(t,"COLUMN_LEFT",{enumerable:!0,get:function(){return s.KEY}});var r=n(307);Object.defineProperty(t,"COLUMN_RIGHT",{enumerable:!0,get:function(){return r.KEY}});var l=n(308);Object.defineProperty(t,"READ_ONLY",{enumerable:!0,get:function(){return l.KEY}});var d=n(309);Object.defineProperty(t,"REDO",{enumerable:!0,get:function(){return d.KEY}});var c=n(310);Object.defineProperty(t,"REMOVE_COLUMN",{enumerable:!0,get:function(){return c.KEY}});var u=n(311);Object.defineProperty(t,"REMOVE_ROW",{enumerable:!0,get:function(){return u.KEY}});var h=n(312);Object.defineProperty(t,"ROW_ABOVE",{enumerable:!0,get:function(){return h.KEY}});var p=n(313);Object.defineProperty(t,"ROW_BELOW",{enumerable:!0,get:function(){return p.KEY}});var f=n(95);Object.defineProperty(t,"SEPARATOR",{enumerable:!0,get:function(){return f.KEY}});var m=n(314);Object.defineProperty(t,"UNDO",{enumerable:!0,get:function(){return m.KEY}}),t.predefinedItems=function(){var e={};return(0,_.objectEach)(A,(function(t,n){e[n]=t()})),e},t.addItem=function(e,t){-1===O.indexOf(e)&&(A[e]=t)};var _=n(2),v=D(o),g=D(a),y=D(s),b=D(r),w=D(l),k=D(d),C=D(c),x=D(u),S=D(h),M=D(p),T=D(f),L=D(m);function D(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=t.ITEMS=[h.KEY,p.KEY,s.KEY,r.KEY,a.KEY,u.KEY,c.KEY,m.KEY,d.KEY,l.KEY,o.KEY,f.KEY],A=(E(i={},f.KEY,T.default),E(i,h.KEY,S.default),E(i,p.KEY,M.default),E(i,s.KEY,y.default),E(i,r.KEY,b.default),E(i,a.KEY,g.default),E(i,u.KEY,x.default),E(i,c.KEY,C.default),E(i,m.KEY,L.default),E(i,d.KEY,k.default),E(i,l.KEY,w.default),E(i,o.KEY,v.default),i)},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=c(["The merged cell declared with {row: ",", col: ",", rowspan: \n    ",", colspan: ","} contains negative values, which is not supported. It \n    will not be added to the collection."],["The merged cell declared with {row: ",", col: ",", rowspan: \n    ",", colspan: ","} contains negative values, which is not supported. It \n    will not be added to the collection."]),a=c(["The merged cell declared at [",", ","] is positioned (or positioned partially) \n       outside of the table range. It was not added to the table, please fix your setup."],["The merged cell declared at [",", ","] is positioned (or positioned partially) \n       outside of the table range. It was not added to the table, please fix your setup."]),s=c(["The merged cell declared at [",", ",'] has both "rowspan" \n     and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has both "rowspan" \n     and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.']),r=c(["The merged cell declared at [",", ",'] has "rowspan" or "colspan" declared as \n      "0", which is not supported. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has "rowspan" or "colspan" declared as \n      "0", which is not supported. It cannot be added to the collection.']),l=n(4),d=n(42);function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.row=t,this.col=n,this.rowspan=i,this.colspan=o,this.removed=!1}return i(e,[{key:"normalize",value:function(e){var t=e.countRows(),n=e.countCols();this.row<0?this.row=0:this.row>t-1&&(this.row=t-1),this.col<0?this.col=0:this.col>n-1&&(this.col=n-1),this.row+this.rowspan>t-1&&(this.rowspan=t-this.row),this.col+this.colspan>n-1&&(this.colspan=n-this.col)}},{key:"includes",value:function(e,t){return this.row<=e&&this.col<=t&&this.row+this.rowspan-1>=e&&this.col+this.colspan-1>=t}},{key:"includesHorizontally",value:function(e){return this.col<=e&&this.col+this.colspan-1>=e}},{key:"includesVertically",value:function(e){return this.row<=e&&this.row+this.rowspan-1>=e}},{key:"shift",value:function(e,t){var n=e[0]||e[1],i=t+Math.abs(e[0]||e[1])-1,o=e[0]?"colspan":"rowspan",a=e[0]?"col":"row",s=Math.min(t,i),r=Math.max(t,i),l=this[a],d=this[a]+this[o]-1;if(l>=t&&(this[a]+=n),n>0)t<=d&&t>l&&(this[o]+=n);else if(n<0){if(s<=l&&r>=d)return this.removed=!0,!1;if(l>=s&&l<=r){var c=r-l+1,u=Math.abs(n)-c;this[a]-=u+n,this[o]-=c}else if(l<=s&&d>=r)this[o]+=n;else if(l<=s&&d>=s&&d<r){var h=d-s+1;this[o]-=h}}return!0}},{key:"isFarther",value:function(e,t){return!e||("down"===t?e.row+e.rowspan-1<this.row+this.rowspan-1:"up"===t?e.row>this.row:"right"===t?e.col+e.colspan-1<this.col+this.colspan-1:"left"===t?e.col>this.col:null)}},{key:"getLastRow",value:function(){return this.row+this.rowspan-1}},{key:"getLastColumn",value:function(){return this.col+this.colspan-1}},{key:"getRange",value:function(){return new l.CellRange(new l.CellCoords(this.row,this.col),new l.CellCoords(this.row,this.col),new l.CellCoords(this.getLastRow(),this.getLastColumn()))}}],[{key:"NEGATIVE_VALUES_WARNING",value:function(e){return(0,d.toSingleLine)(o,e.row,e.col,e.rowspan,e.colspan)}},{key:"IS_OUT_OF_BOUNDS_WARNING",value:function(e){return(0,d.toSingleLine)(a,e.row,e.col)}},{key:"IS_SINGLE_CELL",value:function(e){return(0,d.toSingleLine)(s,e.row,e.col)}},{key:"ZERO_SPAN_WARNING",value:function(e){return(0,d.toSingleLine)(r,e.row,e.col)}},{key:"containsNegativeValues",value:function(e){return e.row<0||e.col<0||e.rowspan<0||e.colspan<0}},{key:"isSingleCell",value:function(e){return 1===e.colspan&&1===e.rowspan}},{key:"containsZeroSpan",value:function(e){return 0===e.colspan||0===e.rowspan}},{key:"isOutOfBounds",value:function(e,t,n){return e.row<0||e.col<0||e.row>=t||e.row+e.rowspan-1>=t||e.col>=n||e.col+e.colspan-1>=n}}]),e}();t.default=u},function(e,t,n){"use strict";var i=n(99),o=n(45),a="Map";e.exports=n(66)(a,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(o(this,a),e);return t&&t.v},set:function(e,t){return i.def(o(this,a),0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var i=n(20).f,o=n(74),a=n(62),s=n(32),r=n(64),l=n(65),d=n(108),c=n(110),u=n(111),h=n(22),p=n(34).fastKey,f=n(45),m=h?"_s":"size",_=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,d){var c=e((function(e,i){r(e,c,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,null!=i&&l(i,n,e[d],e)}));return a(c.prototype,{clear:function(){for(var e=f(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=f(this,t),i=_(n,e);if(i){var o=i.n,a=i.p;delete n._i[i.i],i.r=!0,a&&(a.n=o),o&&(o.p=a),n._f==i&&(n._f=o),n._l==i&&(n._l=a),n[m]--}return!!i},forEach:function(e){f(this,t);for(var n,i=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!_(f(this,t),e)}}),h&&i(c.prototype,"size",{get:function(){return f(this,t)[m]}}),c},def:function(e,t,n){var i,o,a=_(e,t);return a?a.v=n:(e._l=a={i:o=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=a),i&&(i.n=a),e[m]++,"F"!==o&&(e._i[o]=a)),e},getEntry:_,setStrong:function(e,t,n){d(e,t,(function(e,n){this._t=f(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?c(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,c(1))}),n?"entries":"values",!n,!0),u(t)}}},function(e,t,n){e.exports=!n(22)&&!n(23)((function(){return 7!=Object.defineProperty(n(72)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(29),o=n(24),a=n(102)(!1),s=n(76)("IE_PROTO");e.exports=function(e,t){var n,r=o(e),l=0,d=[];for(n in r)n!=s&&i(r,n)&&d.push(n);for(;t.length>l;)i(r,n=t[l++])&&(~a(d,n)||d.push(n));return d}},function(e,t,n){var i=n(24),o=n(25),a=n(61);e.exports=function(e){return function(t,n,s){var r,l=i(t),d=o(l.length),c=a(s,d);if(e&&n!=n){for(;d>c;)if((r=l[c++])!=r)return!0}else for(;d>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(15).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(18);e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&i(a.call(e)),t}}},function(e,t,n){var i=n(52),o=n(12)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,n){var i=n(107),o=n(12)("iterator"),a=n(52);e.exports=n(39).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||a[i(e)]}},function(e,t,n){var i=n(44),o=n(12)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var i=n(49),o=n(3),a=n(30),s=n(31),r=n(52),l=n(208),d=n(53),c=n(109),u=n(12)("iterator"),h=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};e.exports=function(e,t,n,_,v,g,y){l(n,t,_);var b,w,k,C=function(e){if(!h&&e in T)return T[e];switch(e){case p:case f:return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",S=v==f,M=!1,T=e.prototype,L=T[u]||T["@@iterator"]||v&&T[v],D=L||C(v),E=v?S?C("entries"):D:void 0,O="Array"==t&&T.entries||L;if(O&&(k=c(O.call(new e)))!==Object.prototype&&k.next&&(d(k,x,!0),i||"function"==typeof k[u]||s(k,u,m)),S&&L&&L.name!==f&&(M=!0,D=function(){return L.call(this)}),i&&!y||!h&&!M&&T[u]||s(T,u,D),r[t]=D,r[x]=m,v)if(b={values:S?D:C(f),keys:g?D:C(p),entries:E},y)for(w in b)w in T||a(T,w,b[w]);else o(o.P+o.F*(h||M),t,b);return b}},function(e,t,n){var i=n(29),o=n(33),a=n(76)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var i=n(15),o=n(20),a=n(22),s=n(12)("species");e.exports=function(e){var t=i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(9),o=n(18),a=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(32)(Function.call,n(67).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:a}},function(e,t,n){"use strict";var i=n(99),o=n(45);e.exports=n(66)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(o(this,"Set"),e=0===e?0:e,e)}},i)},function(e,t,n){"use strict";var i,o=n(68)(0),a=n(30),s=n(34),r=n(116),l=n(117),d=n(9),c=n(23),u=n(45),h="WeakMap",p=s.getWeak,f=Object.isExtensible,m=l.ufstore,_={},v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(d(e)){var t=p(e);return!0===t?m(u(this,h)).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(u(this,h),e,t)}},y=e.exports=n(66)(h,v,g,l,!0,!0);c((function(){return 7!=(new y).set((Object.freeze||Object)(_),7).get(_)}))&&(r((i=l.getConstructor(v,h)).prototype,g),s.NEED=!0,o(["delete","has","get","set"],(function(e){var t=y.prototype,n=t[e];a(t,e,(function(t,o){if(d(t)&&!f(t)){this._f||(this._f=new i);var a=this._f[e](t,o);return"set"==e?this:a}return n.call(this,t,o)}))})))},function(e,t,n){var i=n(44);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){"use strict";var i=n(37),o=n(69),a=n(54),s=n(33),r=n(75),l=Object.assign;e.exports=!l||n(23)((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i}))?function(e,t){for(var n=s(e),l=arguments.length,d=1,c=o.f,u=a.f;l>d;)for(var h,p=r(arguments[d++]),f=c?i(p).concat(c(p)):i(p),m=f.length,_=0;m>_;)u.call(p,h=f[_++])&&(n[h]=p[h]);return n}:l},function(e,t,n){"use strict";var i=n(62),o=n(34).getWeak,a=n(18),s=n(9),r=n(64),l=n(65),d=n(68),c=n(29),u=n(45),h=d(5),p=d(6),f=0,m=function(e){return e._l||(e._l=new _)},_=function(){this.a=[]},v=function(e,t){return h(e.a,(function(e){return e[0]===t}))};_.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,a){var d=e((function(e,i){r(e,d,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=i&&l(i,n,e[a],e)}));return i(d.prototype,{delete:function(e){if(!s(e))return!1;var n=o(e);return!0===n?m(u(this,t)).delete(e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!s(e))return!1;var n=o(e);return!0===n?m(u(this,t)).has(e):n&&c(n,this._i)}}),d},def:function(e,t,n){var i=o(a(t),!0);return!0===i?m(e).set(t,n):i[e._i]=n,e},ufstore:m}},function(e,t,n){"use strict";var i=n(117),o=n(45),a="WeakSet";n(66)(a,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(o(this,a),e,!0)}},i,!1,!0)},function(e,t,n){"use strict";var i,o,a,s,r=n(49),l=n(15),d=n(32),c=n(107),u=n(3),h=n(9),p=n(63),f=n(64),m=n(65),_=n(212),v=n(80).set,g=n(214)(),y=n(120),b=n(215),w=n(81),k=n(216),C="Promise",x=l.TypeError,S=l.process,M=S&&S.versions,T=M&&M.v8||"",L=l[C],D="process"==c(S),E=function(){},O=o=y.f,A=!!function(){try{var e=L.resolve(1),t=(e.constructor={})[n(12)("species")]=function(e){e(E,E)};return(D||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;g((function(){for(var i=e._v,o=1==e._s,a=0,s=function(t){var n,a,s,r=o?t.ok:t.fail,l=t.resolve,d=t.reject,c=t.domain;try{r?(o||(2==e._h&&Y(e),e._h=1),!0===r?n=i:(c&&c.enter(),n=r(i),c&&(c.exit(),s=!0)),n===t.promise?d(x("Promise-chain cycle")):(a=I(n))?a.call(n,l,d):l(n)):d(i)}catch(e){c&&!s&&c.exit(),d(e)}};n.length>a;)s(n[a++]);e._c=[],e._n=!1,t&&!e._h&&R(e)}))}},R=function(e){v.call(l,(function(){var t,n,i,o=e._v,a=j(e);if(a&&(t=b((function(){D?S.emit("unhandledRejection",o,e):(n=l.onunhandledrejection)?n({promise:e,reason:o}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",o)})),e._h=D||j(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},Y=function(e){v.call(l,(function(){var t;D?S.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})}))},H=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=I(e))?g((function(){var i={_w:n,_d:!1};try{t.call(e,d(N,i,1),d(H,i,1))}catch(e){H.call(i,e)}})):(n._v=e,n._s=1,P(n,!1))}catch(e){H.call({_w:n,_d:!1},e)}}};A||(L=function(e){f(this,L,C,"_h"),p(e),i.call(this);try{e(d(N,this,1),d(H,this,1))}catch(e){H.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(62)(L.prototype,{then:function(e,t){var n=O(_(this,L));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=D?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i;this.promise=e,this.resolve=d(N,e,1),this.reject=d(H,e,1)},y.f=O=function(e){return e===L||e===s?new a(e):o(e)}),u(u.G+u.W+u.F*!A,{Promise:L}),n(53)(L,C),n(111)(C),s=n(39)[C],u(u.S+u.F*!A,C,{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(r||!A),C,{resolve:function(e){return k(r&&this===s?L:this,e)}}),u(u.S+u.F*!(A&&n(79)((function(e){L.all(e).catch(E)}))),C,{all:function(e){var t=this,n=O(t),i=n.resolve,o=n.reject,a=b((function(){var n=[],a=0,s=1;m(e,!1,(function(e){var r=a++,l=!1;n.push(void 0),s++,t.resolve(e).then((function(e){l||(l=!0,n[r]=e,--s||i(n))}),o)})),--s||i(n)}));return a.e&&o(a.v),n.promise},race:function(e){var t=this,n=O(t),i=n.reject,o=b((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,i)}))}));return o.e&&i(o.v),n.promise}})},function(e,t,n){"use strict";var i=n(63);function o(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)}e.exports.f=function(e){return new o(e)}},function(e,t,n){"use strict";var i=n(15),o=n(29),a=n(22),s=n(3),r=n(30),l=n(34).KEY,d=n(23),c=n(77),u=n(53),h=n(50),p=n(12),f=n(122),m=n(217),_=n(218),v=n(115),g=n(18),y=n(9),b=n(24),w=n(73),k=n(51),C=n(74),x=n(123),S=n(67),M=n(20),T=n(37),L=S.f,D=M.f,E=x.f,O=i.Symbol,A=i.JSON,I=A&&A.stringify,P="prototype",R=p("_hidden"),j=p("toPrimitive"),Y={}.propertyIsEnumerable,H=c("symbol-registry"),N=c("symbols"),F=c("op-symbols"),B=Object[P],$="function"==typeof O,z=i.QObject,W=!z||!z[P]||!z[P].findChild,U=a&&d((function(){return 7!=C(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=L(B,t);i&&delete B[t],D(e,t,n),i&&e!==B&&D(B,t,i)}:D,V=function(e){var t=N[e]=C(O[P]);return t._k=e,t},q=$&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Z=function(e,t,n){return e===B&&Z(F,t,n),g(e),t=w(t,!0),g(n),o(N,t)?(n.enumerable?(o(e,R)&&e[R][t]&&(e[R][t]=!1),n=C(n,{enumerable:k(0,!1)})):(o(e,R)||D(e,R,k(1,{})),e[R][t]=!0),U(e,t,n)):D(e,t,n)},G=function(e,t){g(e);for(var n,i=_(t=b(t)),o=0,a=i.length;a>o;)Z(e,n=i[o++],t[n]);return e},J=function(e){var t=Y.call(this,e=w(e,!0));return!(this===B&&o(N,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(N,e)||o(this,R)&&this[R][e])||t)},K=function(e,t){if(e=b(e),t=w(t,!0),e!==B||!o(N,t)||o(F,t)){var n=L(e,t);return!n||!o(N,t)||o(e,R)&&e[R][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=E(b(e)),i=[],a=0;n.length>a;)o(N,t=n[a++])||t==R||t==l||i.push(t);return i},Q=function(e){for(var t,n=e===B,i=E(n?F:b(e)),a=[],s=0;i.length>s;)!o(N,t=i[s++])||n&&!o(B,t)||a.push(N[t]);return a};$||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(F,n),o(this,R)&&o(this[R],e)&&(this[R][e]=!1),U(this,e,k(1,n))};return a&&W&&U(B,e,{configurable:!0,set:t}),V(e)},r(O[P],"toString",(function(){return this._k})),S.f=K,M.f=Z,n(82).f=x.f=X,n(54).f=J,n(69).f=Q,a&&!n(49)&&r(B,"propertyIsEnumerable",J,!0),f.f=function(e){return V(p(e))}),s(s.G+s.W+s.F*!$,{Symbol:O});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ne=T(p.store),ie=0;ne.length>ie;)m(ne[ie++]);s(s.S+s.F*!$,"Symbol",{for:function(e){return o(H,e+="")?H[e]:H[e]=O(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in H)if(H[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!$,"Object",{create:function(e,t){return void 0===t?C(e):G(C(e),t)},defineProperty:Z,defineProperties:G,getOwnPropertyDescriptor:K,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),A&&s(s.S+s.F*(!$||d((function(){var e=O();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t=i[1],(y(t)||void 0!==e)&&!q(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!q(t))return t}),i[1]=t,I.apply(A,i)}}),O[P][j]||n(31)(O[P],j,O[P].valueOf),u(O,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},function(e,t,n){t.f=n(12)},function(e,t,n){var i=n(24),o=n(82).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return o(e)}catch(e){return s.slice()}}(e):o(i(e))}},function(e,t,n){var i=n(9),o=n(34).onFreeze;n(26)("freeze",(function(e){return function(t){return e&&i(t)?e(o(t)):t}}))},function(e,t,n){var i=n(9),o=n(34).onFreeze;n(26)("seal",(function(e){return function(t){return e&&i(t)?e(o(t)):t}}))},function(e,t,n){var i=n(9),o=n(34).onFreeze;n(26)("preventExtensions",(function(e){return function(t){return e&&i(t)?e(o(t)):t}}))},function(e,t,n){var i=n(9);n(26)("isFrozen",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},function(e,t,n){var i=n(9);n(26)("isSealed",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},function(e,t,n){var i=n(9);n(26)("isExtensible",(function(e){return function(t){return!!i(t)&&(!e||e(t))}}))},function(e,t,n){var i=n(24),o=n(67).f;n(26)("getOwnPropertyDescriptor",(function(){return function(e,t){return o(i(e),t)}}))},function(e,t,n){var i=n(33),o=n(109);n(26)("getPrototypeOf",(function(){return function(e){return o(i(e))}}))},function(e,t,n){var i=n(33),o=n(37);n(26)("keys",(function(){return function(e){return o(i(e))}}))},function(e,t,n){n(26)("getOwnPropertyNames",(function(){return n(123).f}))},function(e,t,n){var i=n(3);i(i.S+i.F,"Object",{assign:n(116)})},function(e,t,n){var i=n(3);i(i.S,"Object",{is:n(219)})},function(e,t,n){var i=n(3);i(i.S,"Object",{setPrototypeOf:n(112).set})},function(e,t,n){var i=n(20).f,o=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in o||n(22)&&i(o,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,n){var i=n(3),o=n(24),a=n(25);i(i.S,"String",{raw:function(e){for(var t=o(e.raw),n=a(t.length),i=arguments.length,s=[],r=0;n>r;)s.push(String(t[r++])),r<i&&s.push(String(arguments[r]));return s.join("")}})},function(e,t,n){var i=n(3),o=n(61),a=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var i=n(3),o=n(220)(!1);i(i.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,n){var i=n(3);i(i.P,"String",{repeat:n(142)})},function(e,t,n){"use strict";var i=n(60),o=n(38);e.exports=function(e){var t=String(o(this)),n="",a=i(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t,n){"use strict";var i=n(3),o=n(25),a=n(83),s="startsWith",r=""[s];i(i.P+i.F*n(84)(s),"String",{startsWith:function(e){var t=a(this,e,s),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return r?r.call(t,i,n):t.slice(n,n+i.length)===i}})},function(e,t,n){var i=n(9),o=n(44),a=n(12)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},function(e,t,n){"use strict";var i=n(3),o=n(25),a=n(83),s="endsWith",r=""[s];i(i.P+i.F*n(84)(s),"String",{endsWith:function(e){var t=a(this,e,s),n=arguments.length>1?arguments[1]:void 0,i=o(t.length),l=void 0===n?i:Math.min(o(n),i),d=String(e);return r?r.call(t,d,l):t.slice(l-d.length,l)===d}})},function(e,t,n){"use strict";var i=n(3),o=n(83),a="includes";i(i.P+i.F*n(84)(a),"String",{includes:function(e){return!!~o(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(22)&&"g"!=/./g.flags&&n(20).f(RegExp.prototype,"flags",{configurable:!0,get:n(221)})},function(e,t,n){n(70)("match",1,(function(e,t,n){return[function(n){"use strict";var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i):new RegExp(n)[t](String(i))},n]}))},function(e,t,n){n(70)("replace",2,(function(e,t,n){return[function(i,o){"use strict";var a=e(this),s=null==i?void 0:i[t];return void 0!==s?s.call(i,a,o):n.call(String(a),i,o)},n]}))},function(e,t,n){n(70)("split",2,(function(e,t,i){"use strict";var o=n(144),a=i,s=[].push,r="split",l="length",d="lastIndex";if("c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[l]||2!="ab"[r](/(?:ab)*/)[l]||4!="."[r](/(.?)(.?)/)[l]||"."[r](/()()/)[l]>1||""[r](/.?/)[l]){var c=void 0===/()??/.exec("")[1];i=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!o(e))return a.call(n,e,t);var i,r,u,h,p,f=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),_=0,v=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,m+"g");for(c||(i=new RegExp("^"+g.source+"$(?!\\s)",m));(r=g.exec(n))&&!((u=r.index+r[0][l])>_&&(f.push(n.slice(_,r.index)),!c&&r[l]>1&&r[0].replace(i,(function(){for(p=1;p<arguments[l]-2;p++)void 0===arguments[p]&&(r[p]=void 0)})),r[l]>1&&r.index<n[l]&&s.apply(f,r.slice(1)),h=r[0][l],_=u,f[l]>=v));)g[d]===r.index&&g[d]++;return _===n[l]?!h&&g.test("")||f.push(""):f.push(n.slice(_)),f[l]>v?f.slice(0,v):f}}else"0"[r](void 0,0)[l]&&(i=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(n,o){var a=e(this),s=null==n?void 0:n[t];return void 0!==s?s.call(n,a,o):i.call(String(a),n,o)},i]}))},function(e,t,n){n(70)("search",1,(function(e,t,n){return[function(n){"use strict";var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i):new RegExp(n)[t](String(i))},n]}))},function(e,t,n){"use strict";var i=n(32),o=n(3),a=n(33),s=n(104),r=n(105),l=n(25),d=n(85),c=n(106);o(o.S+o.F*!n(79)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,u,h=a(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,_=void 0!==m,v=0,g=c(h);if(_&&(m=i(m,f>2?arguments[2]:void 0,2)),null==g||p==Array&&r(g))for(n=new p(t=l(h.length));t>v;v++)d(n,v,_?m(h[v],v):h[v]);else for(u=g.call(h),n=new p;!(o=u.next()).done;v++)d(n,v,_?s(u,m,[o.value,v],!0):o.value);return n.length=v,n}})},function(e,t,n){"use strict";var i=n(3),o=n(85);i(i.S+i.F*n(23)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){var i=n(3);i(i.P,"Array",{copyWithin:n(222)}),n(46)("copyWithin")},function(e,t,n){"use strict";var i=n(3),o=n(68)(5),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i(i.P+i.F*s,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(46)(a)},function(e,t,n){"use strict";var i=n(3),o=n(68)(6),a="findIndex",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(46)(a)},function(e,t,n){var i=n(3);i(i.P,"Array",{fill:n(223)}),n(46)("fill")},function(e,t,n){var i=n(3),o=n(15).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,n){var i=n(3);i(i.S,"Number",{isInteger:n(160)})},function(e,t,n){var i=n(9),o=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&o(e)===e}},function(e,t,n){var i=n(3),o=n(160),a=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return o(e)&&a(e)<=9007199254740991}})},function(e,t,n){var i=n(3);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(3);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var i=n(3);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var i=n(3);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){"use strict";var i=n(3),o=n(102)(!0);i(i.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(46)("includes")},function(e,t,n){var i=n(3),o=n(168)(!1);i(i.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){var i=n(37),o=n(24),a=n(54).f;e.exports=function(e){return function(t){for(var n,s=o(t),r=i(s),l=r.length,d=0,c=[];l>d;)a.call(s,n=r[d++])&&c.push(e?[n,s[n]]:s[n]);return c}}},function(e,t,n){var i=n(3),o=n(168)(!0);i(i.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){var i=n(3),o=n(224),a=n(24),s=n(67),r=n(85);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=a(e),l=s.f,d=o(i),c={},u=0;d.length>u;)void 0!==(n=l(i,t=d[u++]))&&r(c,t,n);return c}})},function(e,t,n){"use strict";var i=n(3),o=n(172),a=n(81);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){var i=n(25),o=n(142),a=n(38);e.exports=function(e,t,n,s){var r=String(a(e)),l=r.length,d=void 0===n?" ":String(n),c=i(t);if(c<=l||""==d)return r;var u=c-l,h=o.call(d,Math.ceil(u/d.length));return h.length>u&&(h=h.slice(0,u)),s?h+r:r+h}},function(e,t,n){"use strict";var i=n(3),o=n(172),a=n(81);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){var i=n(3),o=n(80);i(i.G+i.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){for(var i=n(86),o=n(37),a=n(30),s=n(15),r=n(31),l=n(52),d=n(12),c=d("iterator"),u=d("toStringTag"),h=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(p),m=0;m<f.length;m++){var _,v=f[m],g=p[v],y=s[v],b=y&&y.prototype;if(b&&(b[c]||r(b,c,h),b[u]||r(b,u,v),l[v]=h,g))for(_ in i)b[_]||a(b,_,i[_],!0)}},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=new WeakMap,a=function(){function e(t,n,i,a,s,r,l){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(e){return e};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.set(this,{viewportWidth:t,scrollOffset:n,totalColumns:i,columnWidthFn:a,overrideFn:s,onlyFullyVisible:r,stretchingColumnWidthFn:d}),this.count=0,this.startColumn=null,this.endColumn=null,this.startPosition=null,this.stretchAllRatio=0,this.stretchLastWidth=0,this.stretch=l,this.totalTargetWidth=0,this.needVerifyLastColumnWidth=!0,this.stretchAllColumnsWidth=[],this.calculate()}return i(e,null,[{key:"DEFAULT_WIDTH",get:function(){return 50}}]),i(e,[{key:"calculate",value:function(){for(var e=0,t=!0,n=[],i=void 0,a=o.get(this),s=a.onlyFullyVisible,r=a.overrideFn,l=a.scrollOffset,d=a.totalColumns,c=a.viewportWidth,u=0;u<d;u++)if(i=this._getColumnWidth(u),e<=l&&!s&&(this.startColumn=u),e>=l&&e+i<=l+(l>0?c+1:c)&&(null==this.startColumn&&(this.startColumn=u),this.endColumn=u),n.push(e),e+=i,s||(this.endColumn=u),e>=l+c){t=!1;break}if(this.endColumn===d-1&&t)for(this.startColumn=this.endColumn;this.startColumn>0;){var h=n[this.endColumn]+i-n[this.startColumn-1];if((h<=c||!s)&&this.startColumn--,h>c)break}null!==this.startColumn&&r&&r(this),this.startPosition=n[this.startColumn],null==this.startPosition&&(this.startPosition=null),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}},{key:"refreshStretching",value:function(e){if("none"!==this.stretch){this.totalTargetWidth=e;for(var t=o.get(this),n=t.totalColumns,i=0,a=0;a<n;a++){var s=this._getColumnWidth(a),r=t.stretchingColumnWidthFn(void 0,a);"number"==typeof r?e-=r:i+=s}var l=e-i;if("all"===this.stretch&&l>0)this.stretchAllRatio=e/i,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if("last"===this.stretch&&e!==1/0){var d=this._getColumnWidth(n-1),c=l+d;this.stretchLastWidth=c>=0?c:d}}}},{key:"getStretchedColumnWidth",value:function(e,t){var n=null;return"all"===this.stretch&&0!==this.stretchAllRatio?n=this._getStretchedAllColumnWidth(e,t):"last"===this.stretch&&0!==this.stretchLastWidth&&(n=this._getStretchedLastColumnWidth(e)),n}},{key:"_getStretchedAllColumnWidth",value:function(e,t){var n=0,i=o.get(this),a=i.totalColumns;if(!this.stretchAllColumnsWidth[e]){var s=Math.round(t*this.stretchAllRatio),r=i.stretchingColumnWidthFn(s,e);this.stretchAllColumnsWidth[e]=void 0===r?s:isNaN(r)?this._getColumnWidth(e):r}if(this.stretchAllColumnsWidth.length===a&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(var l=0;l<this.stretchAllColumnsWidth.length;l++)n+=this.stretchAllColumnsWidth[l];n!==this.totalTargetWidth&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=this.totalTargetWidth-n)}return this.stretchAllColumnsWidth[e]}},{key:"_getStretchedLastColumnWidth",value:function(e){return e===o.get(this).totalColumns-1?this.stretchLastWidth:null}},{key:"_getColumnWidth",value:function(t){var n=o.get(this).columnWidthFn(t);return void 0===n&&(n=e.DEFAULT_WIDTH),n}}]),e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=new WeakMap,a=function(){function e(t,n,i,a,s,r,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.set(this,{viewportHeight:t,scrollOffset:n,totalRows:i,rowHeightFn:a,overrideFn:s,onlyFullyVisible:r,horizontalScrollbarHeight:l}),this.count=0,this.startRow=null,this.endRow=null,this.startPosition=null,this.calculate()}return i(e,null,[{key:"DEFAULT_HEIGHT",get:function(){return 23}}]),i(e,[{key:"calculate",value:function(){for(var t=0,n=!0,i=[],a=o.get(this),s=a.onlyFullyVisible,r=a.overrideFn,l=a.rowHeightFn,d=a.scrollOffset,c=a.totalRows,u=a.viewportHeight,h=a.horizontalScrollbarHeight||0,p=void 0,f=0;f<c;f++)if(void 0===(p=l(f))&&(p=e.DEFAULT_HEIGHT),t<=d&&!s&&(this.startRow=f),t>=d&&t+p<=d+u-h&&(null===this.startRow&&(this.startRow=f),this.endRow=f),i.push(t),t+=p,s||(this.endRow=f),t>=d+u-h){n=!1;break}if(this.endRow===c-1&&n)for(this.startRow=this.endRow;this.startRow>0;){var m=i[this.endRow]+p-i[this.startRow-1];if((m<=u-h||!s)&&this.startRow--,m>=u-h)break}null!==this.startRow&&r&&r(this),this.startPosition=i[this.startRow],null==this.startPosition&&(this.startPosition=null),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}]),e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t,this.total=n,this.countTH=i}return i(e,[{key:"offsetted",value:function(e){return e+this.offset}},{key:"unOffsetted",value:function(e){return e-this.offset}},{key:"renderedToSource",value:function(e){return this.offsetted(e)}},{key:"sourceToRendered",value:function(e){return this.unOffsetted(e)}},{key:"offsettedTH",value:function(e){return e-this.countTH}},{key:"unOffsettedTH",value:function(e){return e+this.countTH}},{key:"visibleRowHeadedColumnToSourceColumn",value:function(e){return this.renderedToSource(this.offsettedTH(e))}},{key:"sourceColumnToVisibleRowHeadedColumn",value:function(e){return this.unOffsettedTH(this.sourceToRendered(e))}}]),e}();t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t,this.total=n,this.countTH=i}return i(e,[{key:"offsetted",value:function(e){return e+this.offset}},{key:"unOffsetted",value:function(e){return e-this.offset}},{key:"renderedToSource",value:function(e){return this.offsetted(e)}},{key:"sourceToRendered",value:function(e){return this.unOffsetted(e)}},{key:"offsettedTH",value:function(e){return e-this.countTH}},{key:"unOffsettedTH",value:function(e){return e+this.countTH}},{key:"visibleColHeadedRowToSourceRow",value:function(e){return this.renderedToSource(this.offsettedTH(e))}},{key:"sourceRowToVisibleColHeadedRow",value:function(e){return this.unOffsettedTH(this.sourceToRendered(e))}}]),e}();t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(2),s=n(36),r=p(n(181)),l=p(n(182)),d=p(n(183)),c=p(n(184)),u=p(n(185)),h=p(n(187));function p(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=[];if(this.guid="wt_"+(0,s.randomString)(),t.cloneSource?(this.cloneSource=t.cloneSource,this.cloneOverlay=t.cloneOverlay,this.wtSettings=t.cloneSource.wtSettings,this.wtTable=new u.default(this,t.table,t.wtRootElement),this.wtScroll=new d.default(this),this.wtViewport=t.cloneSource.wtViewport,this.wtEvent=new r.default(this),this.selections=this.cloneSource.selections):(this.wtSettings=new c.default(this,t),this.wtTable=new u.default(this,t.table),this.wtScroll=new d.default(this),this.wtViewport=new h.default(this),this.wtEvent=new r.default(this),this.selections=this.getSetting("selections"),this.wtOverlays=new l.default(this),this.exportSettingsAsClassNames()),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var i=0,a=this.wtTable.THEAD.childNodes[0].childNodes.length;i<a;i++)n.push(this.wtTable.THEAD.childNodes[0].childNodes[i].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(e,t){(0,o.fastInnerText)(t,n[e])}])}this.drawn=!1,this.drawInterrupted=!1}return i(e,[{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.drawInterrupted=!1,e||(0,o.isVisible)(this.wtTable.TABLE)?this.wtTable.draw(e):this.drawInterrupted=!0,this}},{key:"getCell",value:function(e){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]))return this.wtTable.getCell(e);var t=this.wtSettings.getSetting("totalRows"),n=this.wtSettings.getSetting("fixedRowsTop"),i=this.wtSettings.getSetting("fixedRowsBottom"),o=this.wtSettings.getSetting("fixedColumnsLeft");if(e.row<n&&e.col<o)return this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(e);if(e.row<n)return this.wtOverlays.topOverlay.clone.wtTable.getCell(e);if(e.col<o&&e.row>=t-i){if(this.wtOverlays.bottomLeftCornerOverlay&&this.wtOverlays.bottomLeftCornerOverlay.clone)return this.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell(e)}else{if(e.col<o)return this.wtOverlays.leftOverlay.clone.wtTable.getCell(e);if(e.row<t&&e.row>t-i&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(e)}return this.wtTable.getCell(e)}},{key:"update",value:function(e,t){return this.wtSettings.update(e,t)}},{key:"scrollVertical",value:function(e){return this.wtOverlays.topOverlay.scrollTo(e),this.getSetting("onScrollVertically"),this}},{key:"scrollHorizontal",value:function(e){return this.wtOverlays.leftOverlay.scrollTo(e),this.getSetting("onScrollHorizontally"),this}},{key:"scrollViewport",value:function(e){return this.wtScroll.scrollViewport(e),this}},{key:"getViewport",value:function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}},{key:"getOverlayName",value:function(){return this.cloneOverlay?this.cloneOverlay.type:"master"}},{key:"isOverlayName",value:function(e){return!!this.cloneOverlay&&this.cloneOverlay.type===e}},{key:"exportSettingsAsClassNames",value:function(){var e=this,t=[],n=[];(0,a.objectEach)({rowHeaders:["array"],columnHeaders:["array"]},(function(i,o){i.indexOf("array")>-1&&e.getSetting(o).length&&n.push("ht"+(0,s.toUpperCaseFirst)(o)),t.push("ht"+(0,s.toUpperCaseFirst)(o))})),(0,o.removeClass)(this.wtTable.wtRootElement.parentNode,t),(0,o.addClass)(this.wtTable.wtRootElement.parentNode,n)}},{key:"getSetting",value:function(e,t,n,i,o){return this.wtSettings.getSetting(e,t,n,i,o)}},{key:"hasSetting",value:function(e){return this.wtSettings.has(e)}},{key:"destroy",value:function(){this.wtOverlays.destroy(),this.wtEvent.destroy()}}]),e}();t.default=f},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(0),a=n(43),s=n(27),r=n(6),l=(i=r)&&i.__esModule?i:{default:i};function d(e){var t=this,n=new l.default(e),i=void 0;this.instance=e;var r=[null,null];this.dblClickTimeout=[null,null];var d=function(e){var n=document.activeElement,i=(0,a.partial)(o.getParent,e.realTarget),s=e.realTarget;if(s!==n&&i(0)!==n&&i(1)!==n){var l=t.parentCell(s);(0,o.hasClass)(s,"corner")?t.instance.getSetting("onCellCornerMouseDown",e,s):l.TD&&t.instance.hasSetting("onCellMouseDown")&&t.instance.getSetting("onCellMouseDown",e,l.coords,l.TD,t.instance),2!==e.button&&l.TD&&(r[0]=l.TD,clearTimeout(t.dblClickTimeout[0]),t.dblClickTimeout[0]=setTimeout((function(){r[0]=null}),1e3))}},c=function(e){t.instance.touchMoving=!0},u=function(e){n.addEventListener(this,"touchmove",c),t.checkIfTouchMove=setTimeout((function(){!0===t.instance.touchMoving&&(t.instance.touchMoving=void 0,n.removeEventListener("touchmove",c,!1)),d(e)}),30)},h=function(e){if(2!==e.button){var n=t.parentCell(e.realTarget);n.TD===r[0]&&n.TD===r[1]?((0,o.hasClass)(e.realTarget,"corner")?t.instance.getSetting("onCellCornerDblClick",e,n.coords,n.TD,t.instance):t.instance.getSetting("onCellDblClick",e,n.coords,n.TD,t.instance),r[0]=null,r[1]=null):n.TD===r[0]?(t.instance.getSetting("onCellMouseUp",e,n.coords,n.TD,t.instance),r[1]=n.TD,clearTimeout(t.dblClickTimeout[1]),t.dblClickTimeout[1]=setTimeout((function(){r[1]=null}),500)):n.TD&&t.instance.hasSetting("onCellMouseUp")&&t.instance.getSetting("onCellMouseUp",e,n.coords,n.TD,t.instance)}},p=function(e){var n=e.target;!1!==function(e){var n=t.parentCell(e).coords;if(i&&n){var o=[n.row,i.from.row],a=o[0],s=o[1],r=[n.col,i.from.col];return a===s&&r[0]===r[1]}return!1}(n)&&!1!==["A","BUTTON","INPUT"].includes(n.tagName)||(e.preventDefault(),h(e))};if(n.addEventListener(this.instance.wtTable.holder,"mousedown",d),n.addEventListener(this.instance.wtTable.TABLE,"mouseover",(function(e){var n,i,a;t.instance.hasSetting("onCellMouseOver")&&(n=t.instance.wtTable.TABLE,i=(0,o.closestDown)(e.realTarget,["TD","TH"],n),a=t.instance.cloneSource||t.instance,i&&i!==a.lastMouseOver&&(0,o.isChildOf)(i,n)&&(a.lastMouseOver=i,t.instance.getSetting("onCellMouseOver",e,t.instance.wtTable.getCoords(i),i,t.instance)))})),n.addEventListener(this.instance.wtTable.TABLE,"mouseout",(function(e){var n=void 0,i=void 0,a=void 0;t.instance.hasSetting("onCellMouseOut")&&(n=t.instance.wtTable.TABLE,i=(0,o.closestDown)(e.realTarget,["TD","TH"],n),a=(0,o.closestDown)(e.relatedTarget,["TD","TH"],n),i&&i!==a&&(0,o.isChildOf)(i,n)&&t.instance.getSetting("onCellMouseOut",e,t.instance.wtTable.getCoords(i),i,t.instance))})),n.addEventListener(this.instance.wtTable.holder,"mouseup",h),this.instance.wtTable.holder.parentNode.parentNode&&(0,s.isMobileBrowser)()&&!t.instance.wtTable.isWorkingOnClone()){var f="."+this.instance.wtTable.holder.parentNode.className.split(" ").join(".");n.addEventListener(this.instance.wtTable.holder,"touchstart",(function(n){i=e.selections.getCell().cellRange,t.instance.touchApplied=!0,(0,o.isChildOf)(n.target,f)&&u.call(n.target,n)})),n.addEventListener(this.instance.wtTable.holder,"touchend",(function(e){t.instance.touchApplied=!1,(0,o.isChildOf)(e.target,f)&&p.call(e.target,e)})),t.instance.momentumScrolling||(t.instance.momentumScrolling={}),n.addEventListener(this.instance.wtTable.holder,"scroll",(function(e){clearTimeout(t.instance.momentumScrolling._timeout),t.instance.momentumScrolling.ongoing||t.instance.getSetting("onBeforeTouchScroll"),t.instance.momentumScrolling.ongoing=!0,t.instance.momentumScrolling._timeout=setTimeout((function(){t.instance.touchApplied||(t.instance.momentumScrolling.ongoing=!1,t.instance.getSetting("onAfterMomentumScroll"))}),200)}))}n.addEventListener(window,"resize",(function(){"none"!==t.instance.getSetting("stretchH")&&t.instance.draw()})),this.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1]),n.destroy()}}d.prototype.parentCell=function(e){var t={},n=this.instance.wtTable.TABLE,i=(0,o.closestDown)(e,["TD","TH"],n);return i?(t.coords=this.instance.wtTable.getCoords(i),t.TD=i):(0,o.hasClass)(e,"wtBorder")&&(0,o.hasClass)(e,"current")?(t.coords=this.instance.selections.getCell().cellRange.highlight,t.TD=this.instance.wtTable.getCell(t.coords)):(0,o.hasClass)(e,"wtBorder")&&(0,o.hasClass)(e,"area")&&this.instance.selections.createOrGetArea().cellRange&&(t.coords=this.instance.selections.createOrGetArea().cellRange.to,t.TD=this.instance.wtTable.getCell(t.coords)),t},t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(1),s=n(21),r=n(27),l=c(n(6)),d=c(n(35));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=parseInt(getComputedStyle(document.body).lineHeight,10),i=1.2*parseInt(getComputedStyle(document.body).fontSize,10);this.wot=t,this.instance=this.wot,this.eventManager=new l.default(this.wot),this.wot.update("scrollbarWidth",(0,o.getScrollbarWidth)()),this.wot.update("scrollbarHeight",(0,o.getScrollbarWidth)()),this.scrollableElement=(0,o.getScrollableElement)(this.wot.wtTable.TABLE),this.prepareOverlays(),this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.overlayScrollPositions={master:{top:0,left:0},top:{top:null,left:0},bottom:{top:null,left:0},left:{top:0,left:null}},this.pendingScrollCallbacks={master:{top:0,left:0},top:{left:0},bottom:{left:0},left:{top:0}},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.delegatedScrollCallback=!1,this.registeredListeners=[],this.browserLineHeight=n||i,this.registerListeners()}return i(e,[{key:"prepareOverlays",value:function(){var e=!1;return this.topOverlay?e=this.topOverlay.updateStateOfRendering()||e:this.topOverlay=d.default.createOverlay(d.default.CLONE_TOP,this.wot),d.default.hasOverlay(d.default.CLONE_BOTTOM)||(this.bottomOverlay={needFullRender:!1,updateStateOfRendering:function(){return!1}}),d.default.hasOverlay(d.default.CLONE_BOTTOM_LEFT_CORNER)||(this.bottomLeftCornerOverlay={needFullRender:!1,updateStateOfRendering:function(){return!1}}),this.bottomOverlay?e=this.bottomOverlay.updateStateOfRendering()||e:this.bottomOverlay=d.default.createOverlay(d.default.CLONE_BOTTOM,this.wot),this.leftOverlay?e=this.leftOverlay.updateStateOfRendering()||e:this.leftOverlay=d.default.createOverlay(d.default.CLONE_LEFT,this.wot),this.topOverlay.needFullRender&&this.leftOverlay.needFullRender&&(this.topLeftCornerOverlay?e=this.topLeftCornerOverlay.updateStateOfRendering()||e:this.topLeftCornerOverlay=d.default.createOverlay(d.default.CLONE_TOP_LEFT_CORNER,this.wot)),this.bottomOverlay.needFullRender&&this.leftOverlay.needFullRender&&(this.bottomLeftCornerOverlay?e=this.bottomLeftCornerOverlay.updateStateOfRendering()||e:this.bottomLeftCornerOverlay=d.default.createOverlay(d.default.CLONE_BOTTOM_LEFT_CORNER,this.wot)),this.wot.getSetting("debug")&&!this.debug&&(this.debug=d.default.createOverlay(d.default.CLONE_DEBUG,this.wot)),e}},{key:"refreshAll",value:function(){this.wot.drawn&&(this.wot.wtTable.holder.parentNode?(this.wot.draw(!0),this.verticalScrolling&&this.leftOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1):this.destroy())}},{key:"registerListeners",value:function(){var e=this,t=this.topOverlay.mainTableScrollableElement,n=this.leftOverlay.mainTableScrollableElement,i=[];for(i.push([document.documentElement,"keydown",function(t){return e.onKeyDown(t)}]),i.push([document.documentElement,"keyup",function(){return e.onKeyUp()}]),i.push([document,"visibilitychange",function(){return e.onKeyUp()}]),i.push([t,"scroll",function(t){return e.onTableScroll(t)}]),t!==n&&i.push([n,"scroll",function(t){return e.onTableScroll(t)}]),window.devicePixelRatio&&window.devicePixelRatio>1||!(0,r.isChrome)()?i.push([this.instance.wtTable.wtRootElement.parentNode,"wheel",function(t){return e.onCloneWheel(t)}]):(this.topOverlay.needFullRender&&i.push([this.topOverlay.clone.wtTable.holder,"wheel",function(t){return e.onCloneWheel(t)}]),this.bottomOverlay.needFullRender&&i.push([this.bottomOverlay.clone.wtTable.holder,"wheel",function(t){return e.onCloneWheel(t)}]),this.leftOverlay.needFullRender&&i.push([this.leftOverlay.clone.wtTable.holder,"wheel",function(t){return e.onCloneWheel(t)}]),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.needFullRender&&i.push([this.topLeftCornerOverlay.clone.wtTable.holder,"wheel",function(t){return e.onCloneWheel(t)}]),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.needFullRender&&i.push([this.bottomLeftCornerOverlay.clone.wtTable.holder,"wheel",function(t){return e.onCloneWheel(t)}])),this.topOverlay.trimmingContainer!==window&&this.leftOverlay.trimmingContainer!==window&&i.push([window,"wheel",function(t){var n=void 0,i=t.wheelDeltaY||t.deltaY,o=t.wheelDeltaX||t.deltaX;e.topOverlay.clone.wtTable.holder.contains(t.realTarget)?n="top":e.bottomOverlay.clone&&e.bottomOverlay.clone.wtTable.holder.contains(t.realTarget)?n="bottom":e.leftOverlay.clone.wtTable.holder.contains(t.realTarget)?n="left":e.topLeftCornerOverlay&&e.topLeftCornerOverlay.clone&&e.topLeftCornerOverlay.clone.wtTable.holder.contains(t.realTarget)?n="topLeft":e.bottomLeftCornerOverlay&&e.bottomLeftCornerOverlay.clone&&e.bottomLeftCornerOverlay.clone.wtTable.holder.contains(t.realTarget)&&(n="bottomLeft"),("top"===n&&0!==i||"left"===n&&0!==o||"bottom"===n&&0!==i||("topLeft"===n||"bottomLeft"===n)&&(0!==i||0!==o))&&t.preventDefault()}]);i.length;){var o=i.pop();this.eventManager.addEventListener(o[0],o[1],o[2]),this.registeredListeners.push(o)}}},{key:"deregisterListeners",value:function(){for(;this.registeredListeners.length;){var e=this.registeredListeners.pop();this.eventManager.removeEventListener(e[0],e[1],e[2])}}},{key:"onTableScroll",value:function(e){var t=this.leftOverlay.mainTableScrollableElement,n=this.topOverlay.mainTableScrollableElement,i=e.target;this.keyPressed&&(n!==window&&i!==window&&!e.target.contains(n)||t!==window&&i!==window&&!e.target.contains(t))||this.syncScrollPositions(e)}},{key:"onCloneWheel",value:function(e){this.scrollableElement!==window&&e.preventDefault();var t=this.leftOverlay.mainTableScrollableElement,n=this.topOverlay.mainTableScrollableElement,i=e.target,o=n!==window&&i!==window&&!e.target.contains(n),a=t!==window&&i!==window&&!e.target.contains(t);this.keyPressed&&(o||a)||this.translateMouseWheelToScroll(e)}},{key:"onKeyDown",value:function(e){this.keyPressed=(0,s.isKey)(e.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}},{key:"onKeyUp",value:function(){this.keyPressed=!1}},{key:"translateMouseWheelToScroll",value:function(e){var t=isNaN(e.deltaY)?-1*e.wheelDeltaY:e.deltaY,n=isNaN(e.deltaX)?-1*e.wheelDeltaX:e.deltaX;return 1===e.deltaMode&&(n+=n*this.browserLineHeight,t+=t*this.browserLineHeight),this.scrollVertically(t),this.scrollHorizontally(n),!1}},{key:"scrollVertically",value:function(e){if(0===e)return 0;this.scrollableElement.scrollTop+=e}},{key:"scrollHorizontally",value:function(e){if(0===e)return 0;this.scrollableElement.scrollLeft+=e}},{key:"syncScrollPositions",value:function(e){if(!this.destroyed){var t=this.topOverlay.clone.wtTable.holder,n=this.leftOverlay.clone.wtTable.holder,i=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop],o=i[0],a=i[1];this.horizontalScrolling=t.scrollLeft!==o,this.verticalScrolling=n.scrollTop!==a,this.horizontalScrolling&&(t.scrollLeft=o),this.verticalScrolling&&(n.scrollTop=a,this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=o)),this.refreshAll()}}},{key:"syncScrollWithMaster",value:function(){var e=this.topOverlay.mainTableScrollableElement,t=e.scrollLeft,n=e.scrollTop;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=t),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=t),this.leftOverlay.needFullRender&&(this.leftOverlay.clone.wtTable.holder.scrollTop=n)}},{key:"updateMainScrollableElements",value:function(){this.deregisterListeners(),this.leftOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement(),this.scrollableElement=(0,o.getScrollableElement)(this.wot.wtTable.TABLE),this.registerListeners()}},{key:"destroy",value:function(){this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.leftOverlay.destroy(),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.destroy(),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone&&this.bottomLeftCornerOverlay.destroy(),this.debug&&this.debug.destroy(),this.destroyed=!0}},{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.topOverlay.areElementSizesAdjusted&&this.leftOverlay.areElementSizesAdjusted){var t=this.wot.wtTable.wtRootElement.parentNode||this.wot.wtTable.wtRootElement,n=t.clientWidth,i=t.clientHeight;n===this.spreaderLastSize.width&&i===this.spreaderLastSize.height||(this.spreaderLastSize.width=n,this.spreaderLastSize.height=i,this.adjustElementsSize())}this.bottomOverlay.clone&&this.bottomOverlay.refresh(e),this.leftOverlay.refresh(e),this.topOverlay.refresh(e),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.refresh(e),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone&&this.bottomLeftCornerOverlay.refresh(e),this.debug&&this.debug.refresh(e)}},{key:"adjustElementsSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.wot.getSetting("totalColumns"),n=this.wot.getSetting("totalRows"),i=this.wot.wtViewport.getRowHeaderWidth(),o=this.wot.wtViewport.getColumnHeaderHeight(),a=this.wot.wtTable.hider.style;a.width=i+this.leftOverlay.sumCellSizes(0,t)+"px",a.height=o+this.topOverlay.sumCellSizes(0,n)+1+"px",this.topOverlay.adjustElementsSize(e),this.leftOverlay.adjustElementsSize(e),this.bottomOverlay.clone&&this.bottomOverlay.adjustElementsSize(e)}},{key:"applyToDOM",value:function(){this.topOverlay.areElementSizesAdjusted&&this.leftOverlay.areElementSizesAdjusted||this.adjustElementsSize(),this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.leftOverlay.applyToDOM()}},{key:"getParentOverlay",value:function(e){if(!e)return null;var t=[this.topOverlay,this.leftOverlay,this.bottomOverlay,this.topLeftCornerOverlay,this.bottomLeftCornerOverlay],n=null;return(0,a.arrayEach)(t,(function(t,i){t&&t.clone&&t.clone.wtTable.TABLE.contains(e)&&(n=t.clone)})),n}}]),e}();t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(5),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t,this.instance=t}return i(e,[{key:"scrollViewport",value:function(e){if(this.wot.drawn){var t=this._getVariables(),n=t.topOverlay,i=t.leftOverlay,o=t.totalRows,a=t.totalColumns,s=t.fixedRowsTop,r=t.fixedRowsBottom,l=t.fixedColumnsLeft;if(e.row<0||e.row>Math.max(o-1,0))throw new Error("row "+e.row+" does not exist");if(e.col<0||e.col>Math.max(a-1,0))throw new Error("column "+e.col+" does not exist");e.row>=s&&e.row<this.getFirstVisibleRow()?n.scrollTo(e.row):e.row>this.getLastVisibleRow()&&e.row<o-r&&n.scrollTo(e.row,!0),e.col>=l&&e.col<this.getFirstVisibleColumn()?i.scrollTo(e.col):e.col>this.getLastVisibleColumn()&&i.scrollTo(e.col,!0)}}},{key:"getFirstVisibleRow",value:function(){var e=this._getVariables(),t=e.topOverlay,n=e.wtTable,i=e.wtViewport,s=e.totalRows,r=e.fixedRowsTop,l=n.getFirstVisibleRow();if(t.mainTableScrollableElement===window){var d=(0,o.offset)(n.wtRootElement),c=(0,o.innerHeight)(n.hider),u=(0,o.innerHeight)(window),h=(0,o.getScrollTop)(window);if(d.top+c-u<=h){var p=i.getColumnHeaderHeight();p+=t.sumCellSizes(0,r),(0,a.rangeEachReverse)(s,1,(function(e){if(p+=t.sumCellSizes(e-1,e),d.top+c-p<=h)return l=e,!1}))}}return l}},{key:"getLastVisibleRow",value:function(){var e=this._getVariables(),t=e.topOverlay,n=e.wtTable,i=e.wtViewport,s=e.totalRows,r=n.getLastVisibleRow();if(t.mainTableScrollableElement===window){var l=(0,o.offset)(n.wtRootElement),d=(0,o.innerHeight)(window),c=(0,o.getScrollTop)(window);if(l.top>c){var u=i.getColumnHeaderHeight();(0,a.rangeEach)(1,s,(function(e){if(u+=t.sumCellSizes(e-1,e),l.top+u-c>=d)return r=e-2,!1}))}}return r}},{key:"getFirstVisibleColumn",value:function(){var e=this._getVariables(),t=e.leftOverlay,n=e.wtTable,i=e.wtViewport,s=e.totalColumns,r=(e.fixedColumnsLeft,n.getFirstVisibleColumn());if(t.mainTableScrollableElement===window){var l=(0,o.offset)(n.wtRootElement),d=(0,o.innerWidth)(n.hider),c=(0,o.innerWidth)(window),u=(0,o.getScrollLeft)(window);if(l.left+d-c<=u){var h=i.getRowHeaderWidth();(0,a.rangeEachReverse)(s,1,(function(e){if(h+=t.sumCellSizes(e-1,e),l.left+d-h<=u)return r=e,!1}))}}return r}},{key:"getLastVisibleColumn",value:function(){var e=this._getVariables(),t=e.leftOverlay,n=e.wtTable,i=e.wtViewport,s=e.totalColumns,r=n.getLastVisibleColumn();if(t.mainTableScrollableElement===window){var l=(0,o.offset)(n.wtRootElement),d=(0,o.innerWidth)(window),c=(0,o.getScrollLeft)(window);if(l.left>c){var u=i.getRowHeaderWidth();(0,a.rangeEach)(1,s,(function(e){if(u+=t.sumCellSizes(e-1,e),l.left+u-c>=d)return r=e-2,!1}))}}return r}},{key:"_getVariables",value:function(){var e=this.wot;return{topOverlay:e.wtOverlays.topOverlay,leftOverlay:e.wtOverlays.leftOverlay,wtTable:e.wtTable,wtViewport:e.wtViewport,totalRows:e.getSetting("totalRows"),totalColumns:e.getSetting("totalColumns"),fixedRowsTop:e.getSetting("fixedRowsTop"),fixedRowsBottom:e.getSetting("fixedRowsBottom"),fixedColumnsLeft:e.getSetting("fixedColumnsLeft")}}}]),e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(2),s=function(){function e(t,n){var i=this;for(var s in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t,this.instance=t,this.defaults={table:void 0,debug:!1,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow:function(){return!1},data:void 0,freezeOverlays:!1,fixedColumnsLeft:0,fixedRowsTop:0,fixedRowsBottom:0,minSpareRows:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:function(e,t,n){var a=i.getSetting("data",e,t);(0,o.fastInnerText)(n,null==a?"":a)},columnWidth:function(e){},rowHeight:function(e){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:function(e){return e},onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null},this.settings={},this.defaults)if((0,a.hasOwnProperty)(this.defaults,s))if(void 0!==n[s])this.settings[s]=n[s];else{if(void 0===this.defaults[s])throw new Error('A required setting "'+s+'" was not provided');this.settings[s]=this.defaults[s]}}return i(e,[{key:"update",value:function(e,t){if(void 0===t)for(var n in e)(0,a.hasOwnProperty)(e,n)&&(this.settings[n]=e[n]);else this.settings[e]=t;return this.wot}},{key:"getSetting",value:function(e,t,n,i,o){return"function"==typeof this.settings[e]?this.settings[e](t,n,i,o):void 0!==t&&Array.isArray(this.settings[e])?this.settings[e][t]:this.settings[e]}},{key:"has",value:function(e){return!!this.settings[e]}}]),e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),r=n(43),l=p(n(56)),d=(p(n(87)),p(n(178))),c=p(n(179)),u=p(n(186)),h=p(n(35));function p(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t,this.instance=this.wot,this.TABLE=n,this.TBODY=null,this.THEAD=null,this.COLGROUP=null,this.tableOffset=0,this.holderOffset=0,(0,s.removeTextNodes)(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;var o=this.wot.wtSettings.settings.rowHeaderWidth;this.wot.wtSettings.settings.rowHeaderWidth=function(){return i._modifyRowHeaderWidth(o)}}return a(e,[{key:"fixTableDomTree",value:function(){this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=document.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=document.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=document.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.wot.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length&&this.THEAD.appendChild(document.createElement("TR"))}},{key:"createSpreader",value:function(e){var t=e.parentNode,n=void 0;return t&&1===t.nodeType&&(0,s.hasClass)(t,"wtHolder")||((n=document.createElement("div")).className="wtSpreader",t&&t.insertBefore(n,e),n.appendChild(e)),n.style.position="relative",n}},{key:"createHider",value:function(e){var t=e.parentNode,n=void 0;return t&&1===t.nodeType&&(0,s.hasClass)(t,"wtHolder")||((n=document.createElement("div")).className="wtHider",t&&t.insertBefore(n,e),n.appendChild(e)),n}},{key:"createHolder",value:function(e){var t=e.parentNode,n=void 0;return t&&1===t.nodeType&&(0,s.hasClass)(t,"wtHolder")||((n=document.createElement("div")).style.position="relative",n.className="wtHolder",t&&t.insertBefore(n,e),this.isWorkingOnClone()||(n.parentNode.className+="ht_master handsontable"),n.appendChild(e)),n}},{key:"alignOverlaysWithTrimmingContainer",value:function(){var e=(0,s.getTrimmingContainer)(this.wtRootElement);this.isWorkingOnClone()||(this.holder.parentNode.style.position="relative",e===window?this.wot.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible"):(this.holder.style.width=(0,s.getStyle)(e,"width"),this.holder.style.height=(0,s.getStyle)(e,"height"),this.holder.style.overflow=""))}},{key:"isWorkingOnClone",value:function(){return!!this.wot.cloneSource}},{key:"draw",value:function(e){var t=this.wot,n=t.wtOverlays,i=t.wtViewport,o=this.instance.getSetting("totalRows"),a=this.wot.getSetting("rowHeaders").length,r=this.wot.getSetting("columnHeaders").length,l=!1;if(!this.isWorkingOnClone()&&(this.holderOffset=(0,s.offset)(this.holder),e=i.createRenderCalculators(e),a&&!this.wot.getSetting("fixedColumnsLeft"))){var u=n.leftOverlay.getScrollPosition(),p=this.correctHeaderWidth;this.correctHeaderWidth=u>0,p!==this.correctHeaderWidth&&(e=!1)}if(this.isWorkingOnClone()||(l=n.prepareOverlays()),e)this.isWorkingOnClone()||i.createVisibleCalculators(),n&&n.refresh(!0);else{this.isWorkingOnClone()?this.tableOffset=this.wot.cloneSource.wtTable.tableOffset:this.tableOffset=(0,s.offset)(this.TABLE);var f=void 0;f=h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_DEBUG)||h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_TOP)||h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_TOP_LEFT_CORNER)?0:h.default.isOverlayTypeOf(this.instance.cloneOverlay,h.default.CLONE_BOTTOM)||h.default.isOverlayTypeOf(this.instance.cloneOverlay,h.default.CLONE_BOTTOM_LEFT_CORNER)?Math.max(o-this.wot.getSetting("fixedRowsBottom"),0):i.rowsRenderCalculator.startRow;var m=void 0;m=h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_DEBUG)||h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_LEFT)||h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_TOP_LEFT_CORNER)||h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_BOTTOM_LEFT_CORNER)?0:i.columnsRenderCalculator.startColumn,this.rowFilter=new c.default(f,o,r),this.columnFilter=new d.default(m,this.wot.getSetting("totalColumns"),a),this.alignOverlaysWithTrimmingContainer(),this._doDraw()}return this.refreshSelections(e),this.isWorkingOnClone()||(n.topOverlay.resetFixedPosition(),n.bottomOverlay.clone&&n.bottomOverlay.resetFixedPosition(),n.leftOverlay.resetFixedPosition(),n.topLeftCornerOverlay&&n.topLeftCornerOverlay.resetFixedPosition(),n.bottomLeftCornerOverlay&&n.bottomLeftCornerOverlay.clone&&n.bottomLeftCornerOverlay.resetFixedPosition()),l&&n.syncScrollWithMaster(),this.wot.drawn=!0,this}},{key:"_doDraw",value:function(){new u.default(this).render()}},{key:"removeClassFromCells",value:function(e){for(var t=this.TABLE.querySelectorAll("."+e),n=0,i=t.length;n<i;n++)(0,s.removeClass)(t[n],e)}},{key:"refreshSelections",value:function(e){if(this.wot.selections){var t=Array.from(this.wot.selections),n=t.length;if(e){for(var i=[],o=0;o<n;o++){for(var a=t[o].settings,s=a.highlightHeaderClassName,r=a.highlightRowClassName,l=a.highlightColumnClassName,d=t[o].classNames,c=d.length,u=0;u<c;u++)i.includes(d[u])||i.push(d[u]);s&&!i.includes(s)&&i.push(s),r&&!i.includes(r)&&i.push(r),l&&!i.includes(l)&&i.push(l)}var h=this.wot.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(h))for(var p=0;p<h.length;p++)i.push(h[p]);for(var f=i.length,m=0;m<f;m++)this.removeClassFromCells(i[m])}for(var _=0;_<n;_++)t[_].draw(this.wot,e)}}},{key:"getCell",value:function(e){var t=e.row,n=e.col,i=this.wot.getSetting("onModifyGetCellCoords",t,n);if(i&&Array.isArray(i)){var a=o(i,2);t=a[0],n=a[1]}if(this.isRowBeforeRenderedRows(t))return-1;if(this.isRowAfterRenderedRows(t))return-2;var s=this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)];return s?s.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(n)]:void 0}},{key:"getColumnHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.THEAD.childNodes[t];if(n)return n.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]}},{key:"getRowHeader",value:function(e){if(0===this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var t=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)];return t?t.childNodes[0]:void 0}},{key:"getCoords",value:function(e){if("TD"!==e.nodeName&&"TH"!==e.nodeName&&(e=(0,s.closest)(e,["TD","TH"])),null===e)return null;var t=e.parentNode,n=t.parentNode,i=(0,s.index)(t),o=e.cellIndex;return(0,s.overlayContainsElement)(h.default.CLONE_TOP_LEFT_CORNER,e)||(0,s.overlayContainsElement)(h.default.CLONE_TOP,e)?"THEAD"===n.nodeName&&(i-=n.childNodes.length):i=n===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(i):this.rowFilter.renderedToSource(i),o=(0,s.overlayContainsElement)(h.default.CLONE_TOP_LEFT_CORNER,e)||(0,s.overlayContainsElement)(h.default.CLONE_LEFT,e)?this.columnFilter.offsettedTH(o):this.columnFilter.visibleRowHeadedColumnToSourceColumn(o),new l.default(i,o)}},{key:"getTrForRow",value:function(e){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)]}},{key:"getFirstRenderedRow",value:function(){return this.wot.wtViewport.rowsRenderCalculator.startRow}},{key:"getFirstVisibleRow",value:function(){return this.wot.wtViewport.rowsVisibleCalculator.startRow}},{key:"getFirstRenderedColumn",value:function(){return this.wot.wtViewport.columnsRenderCalculator.startColumn}},{key:"getFirstVisibleColumn",value:function(){return this.wot.wtViewport.columnsVisibleCalculator.startColumn}},{key:"getLastRenderedRow",value:function(){return this.wot.wtViewport.rowsRenderCalculator.endRow}},{key:"getLastVisibleRow",value:function(){return this.wot.wtViewport.rowsVisibleCalculator.endRow}},{key:"getLastRenderedColumn",value:function(){return this.wot.wtViewport.columnsRenderCalculator.endColumn}},{key:"getLastVisibleColumn",value:function(){return this.wot.wtViewport.columnsVisibleCalculator.endColumn}},{key:"isRowBeforeRenderedRows",value:function(e){return this.rowFilter&&this.rowFilter.sourceToRendered(e)<0&&e>=0}},{key:"isRowAfterViewport",value:function(e){return this.rowFilter&&this.rowFilter.sourceToRendered(e)>this.getLastVisibleRow()}},{key:"isRowAfterRenderedRows",value:function(e){return this.rowFilter&&this.rowFilter.sourceToRendered(e)>this.getLastRenderedRow()}},{key:"isColumnBeforeViewport",value:function(e){return this.columnFilter&&this.columnFilter.sourceToRendered(e)<0&&e>=0}},{key:"isColumnAfterViewport",value:function(e){return this.columnFilter&&this.columnFilter.sourceToRendered(e)>this.getLastVisibleColumn()}},{key:"isLastRowFullyVisible",value:function(){return this.getLastVisibleRow()===this.getLastRenderedRow()}},{key:"isLastColumnFullyVisible",value:function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}},{key:"getRenderedColumnsCount",value:function(){var e=this.wot.wtViewport.columnsRenderCalculator.count,t=this.wot.getSetting("totalColumns");if(this.wot.isOverlayName(h.default.CLONE_DEBUG))e=t;else if(this.wot.isOverlayName(h.default.CLONE_LEFT)||this.wot.isOverlayName(h.default.CLONE_TOP_LEFT_CORNER)||this.wot.isOverlayName(h.default.CLONE_BOTTOM_LEFT_CORNER))return Math.min(this.wot.getSetting("fixedColumnsLeft"),t);return e}},{key:"getRenderedRowsCount",value:function(){var e=this.wot.wtViewport.rowsRenderCalculator.count,t=this.wot.getSetting("totalRows");return this.wot.isOverlayName(h.default.CLONE_DEBUG)?e=t:this.wot.isOverlayName(h.default.CLONE_TOP)||this.wot.isOverlayName(h.default.CLONE_TOP_LEFT_CORNER)?e=Math.min(this.wot.getSetting("fixedRowsTop"),t):(this.wot.isOverlayName(h.default.CLONE_BOTTOM)||this.wot.isOverlayName(h.default.CLONE_BOTTOM_LEFT_CORNER))&&(e=Math.min(this.wot.getSetting("fixedRowsBottom"),t)),e}},{key:"getVisibleRowsCount",value:function(){return this.wot.wtViewport.rowsVisibleCalculator.count}},{key:"allRowsInViewport",value:function(){return this.wot.getSetting("totalRows")==this.getVisibleRowsCount()}},{key:"getRowHeight",value:function(e){var t=this.wot.wtSettings.settings.rowHeight(e),n=this.wot.wtViewport.oversizedRows[e];return void 0!==n&&(t=void 0===t?n:Math.max(t,n)),t}},{key:"getColumnHeaderHeight",value:function(e){var t=this.wot.wtSettings.settings.defaultRowHeight,n=this.wot.wtViewport.oversizedColumnHeaders[e];return void 0!==n&&(t=t?Math.max(t,n):n),t}},{key:"getVisibleColumnsCount",value:function(){return this.wot.wtViewport.columnsVisibleCalculator.count}},{key:"allColumnsInViewport",value:function(){return this.wot.getSetting("totalColumns")==this.getVisibleColumnsCount()}},{key:"getColumnWidth",value:function(e){var t=this.wot.wtSettings.settings.columnWidth;return"function"==typeof t?t=t(e):"object"===(void 0===t?"undefined":i(t))&&(t=t[e]),t||this.wot.wtSettings.settings.defaultColumnWidth}},{key:"getStretchedColumnWidth",value:function(e){var t=this.getColumnWidth(e),n=null==t?this.instance.wtSettings.settings.defaultColumnWidth:t,i=this.wot.wtViewport.columnsRenderCalculator;if(i){var o=i.getStretchedColumnWidth(e,n);o&&(n=o)}return n}},{key:"_modifyRowHeaderWidth",value:function(e){var t=(0,r.isFunction)(e)?e():null;return Array.isArray(t)?(t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)))[t.length-1]=this._correctRowHeaderWidth(t[t.length-1]):t=this._correctRowHeaderWidth(t),t}},{key:"_correctRowHeaderWidth",value:function(e){return"number"!=typeof e&&(e=this.wot.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&e++,e}}]),e}();t.default=f},function(e,t,n){"use strict";t.__esModule=!0;var i,o,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(i=['Performance tip: Handsontable rendered more than 1000 visible rows. Consider limiting the number \n          of rendered rows by specifying the table height and/or turning off the "renderAllRows" option.'],o=['Performance tip: Handsontable rendered more than 1000 visible rows. Consider limiting the number \n          of rendered rows by specifying the table height and/or turning off the "renderAllRows" option.'],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),l=n(0),d=n(58),c=n(42),u=n(35),h=(a=u)&&a.__esModule?a:{default:a},p=!1,f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wtTable=t,this.wot=t.instance,this.instance=t.instance,this.rowFilter=t.rowFilter,this.columnFilter=t.columnFilter,this.TABLE=t.TABLE,this.THEAD=t.THEAD,this.TBODY=t.TBODY,this.COLGROUP=t.COLGROUP,this.rowHeaders=[],this.rowHeaderCount=0,this.columnHeaders=[],this.columnHeaderCount=0,this.fixedRowsTop=0,this.fixedRowsBottom=0}return s(e,[{key:"render",value:function(){if(!this.wtTable.isWorkingOnClone()){var e={};if(this.wot.getSetting("beforeDraw",!0,e),!0===e.skipRender)return}this.rowHeaders=this.wot.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.wot.getSetting("fixedRowsTop"),this.fixedRowsBottom=this.wot.getSetting("fixedRowsBottom"),this.columnHeaders=this.wot.getSetting("columnHeaders"),this.columnHeaderCount=this.columnHeaders.length;var t=this.wtTable.getRenderedColumnsCount(),n=this.wtTable.getRenderedRowsCount(),i=this.wot.getSetting("totalColumns"),o=this.wot.getSetting("totalRows"),a=void 0,s=!1;if((h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_BOTTOM)||h.default.isOverlayTypeOf(this.wot.cloneOverlay,h.default.CLONE_BOTTOM_LEFT_CORNER))&&(this.columnHeaders=[],this.columnHeaderCount=0),i>=0&&(this.adjustAvailableNodes(),s=!0,this.renderColumnHeaders(),this.renderRows(o,n,t),this.wtTable.isWorkingOnClone()||(a=this.wot.wtViewport.getWorkspaceWidth(),this.wot.wtViewport.containerWidth=null),this.adjustColumnWidths(t),this.markOversizedColumnHeaders(),this.adjustColumnHeaderHeights()),s||this.adjustAvailableNodes(),this.removeRedundantRows(n),this.wtTable.isWorkingOnClone()&&!this.wot.isOverlayName(h.default.CLONE_BOTTOM)||this.markOversizedRows(),this.wtTable.isWorkingOnClone())this.wot.isOverlayName(h.default.CLONE_BOTTOM)&&this.wot.cloneSource.wtOverlays.adjustElementsSize();else{this.wot.wtViewport.createVisibleCalculators(),this.wot.wtOverlays.refresh(!1),this.wot.wtOverlays.applyToDOM();var r=(0,l.outerWidth)(this.wtTable.hider),d=(0,l.outerWidth)(this.wtTable.TABLE);if(0!==r&&d!==r&&this.adjustColumnWidths(t),a!==this.wot.wtViewport.getWorkspaceWidth()){this.wot.wtViewport.containerWidth=null;var c=this.wtTable.getFirstRenderedColumn(),u=this.wtTable.getLastRenderedColumn(),p=this.wot.getSetting("defaultColumnWidth"),f=this.wot.getSetting("rowHeaderWidth");if(null!=(f=this.instance.getSetting("onModifyRowHeaderWidth",f)))for(var m=0;m<this.rowHeaderCount;m++){var _=Array.isArray(f)?f[m]:f;_=null==_?p:_,this.COLGROUP.childNodes[m].style.width=_+"px"}for(var v=c;v<u;v++){var g=this.wtTable.getStretchedColumnWidth(v),y=this.columnFilter.sourceToRendered(v);this.COLGROUP.childNodes[y+this.rowHeaderCount].style.width=g+"px"}}this.wot.getSetting("onDraw",!0)}}},{key:"removeRedundantRows",value:function(e){for(;this.wtTable.tbodyChildrenLength>e;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--}},{key:"renderRows",value:function(e,t,n){for(var i=void 0,o=0,a=this.rowFilter.renderedToSource(o),s=this.wtTable.isWorkingOnClone();a<e&&a>=0&&(!p&&o>1e3&&(p=!0,(0,d.warn)((0,c.toSingleLine)(r))),void 0===t||o!==t);){if(i=this.getOrCreateTrForRow(o,i),this.renderRowHeaders(a,i),this.adjustColumns(i,n+this.rowHeaderCount),this.renderCells(a,i,n),s&&!this.wot.isOverlayName(h.default.CLONE_BOTTOM)||this.resetOversizedRow(a),i.firstChild){var l=this.wot.wtTable.getRowHeight(a);l?(l--,i.firstChild.style.height=l+"px"):i.firstChild.style.height=""}o++,a=this.rowFilter.renderedToSource(o)}}},{key:"resetOversizedRow",value:function(e){this.wot.getSetting("externalRowCalculator")||this.wot.wtViewport.oversizedRows&&this.wot.wtViewport.oversizedRows[e]&&(this.wot.wtViewport.oversizedRows[e]=void 0)}},{key:"markOversizedRows",value:function(){if(!this.wot.getSetting("externalRowCalculator")){var e=this.instance.wtTable.TBODY.childNodes.length,t=e*this.instance.wtSettings.settings.defaultRowHeight,n=(0,l.innerHeight)(this.instance.wtTable.TBODY)-1,i=void 0,o=void 0,a=void 0,s=void 0,r=void 0;if(this.instance.getSetting("totalRows"),t!==n||this.instance.getSetting("fixedRowsBottom"))for(;e;)e--,a=this.instance.wtTable.rowFilter.renderedToSource(e),i=this.instance.wtTable.getRowHeight(a),o=(r=(s=this.instance.wtTable.getTrForRow(a)).querySelector("th"))?(0,l.innerHeight)(r):(0,l.innerHeight)(s)-1,(!i&&this.instance.wtSettings.settings.defaultRowHeight<o||i<o)&&(this.instance.wtViewport.oversizedRows[a]=++o)}}},{key:"markOversizedColumnHeaders",value:function(){var e=this.wot.getOverlayName();if(this.columnHeaderCount&&!this.wot.wtViewport.hasOversizedColumnHeadersMarked[e]&&!this.wtTable.isWorkingOnClone()){for(var t=this.wtTable.getRenderedColumnsCount(),n=0;n<this.columnHeaderCount;n++)for(var i=-1*this.rowHeaderCount;i<t;i++)this.markIfOversizedColumnHeader(i);this.wot.wtViewport.hasOversizedColumnHeadersMarked[e]=!0}}},{key:"adjustColumnHeaderHeights",value:function(){for(var e=this.wot.getSetting("columnHeaders"),t=this.wot.wtTable.THEAD.childNodes,n=this.wot.wtViewport.oversizedColumnHeaders,i=0,o=e.length;i<o;i++)if(n[i]){if(!t[i]||0===t[i].childNodes.length)return;t[i].childNodes[0].style.height=n[i]+"px"}}},{key:"markIfOversizedColumnHeader",value:function(e){for(var t=this.wot.wtTable.columnFilter.renderedToSource(e),n=this.columnHeaderCount,i=this.wot.wtSettings.settings.defaultRowHeight,o=void 0,a=void 0,s=void 0,r=this.wot.getSetting("columnHeaderHeight")||[];n;)n--,o=this.wot.wtTable.getColumnHeaderHeight(n),(a=this.wot.wtTable.getColumnHeader(t,n))&&(s=(0,l.innerHeight)(a),(!o&&i<s||o<s)&&(this.wot.wtViewport.oversizedColumnHeaders[n]=s),Array.isArray(r)?null!=r[n]&&(this.wot.wtViewport.oversizedColumnHeaders[n]=r[n]):isNaN(r)||(this.wot.wtViewport.oversizedColumnHeaders[n]=r),this.wot.wtViewport.oversizedColumnHeaders[n]<(r[n]||r)&&(this.wot.wtViewport.oversizedColumnHeaders[n]=r[n]||r))}},{key:"renderCells",value:function(e,t,n){for(var i=void 0,o=void 0,a=0;a<n;a++)o=this.columnFilter.renderedToSource(a),"TH"==(i=0===a?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(o)]:i.nextSibling).nodeName&&(i=_(i,t)),(0,l.hasClass)(i,"hide")||(i.className=""),i.removeAttribute("style"),this.wot.wtSettings.settings.cellRenderer(e,o,i);return i}},{key:"adjustColumnWidths",value:function(e){var t=0,n=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,i=this.wot.getSetting("defaultColumnWidth"),o=this.wot.getSetting("rowHeaderWidth");if(n.offsetHeight<n.scrollHeight&&(t=(0,l.getScrollbarWidth)()),this.wot.wtViewport.columnsRenderCalculator.refreshStretching(this.wot.wtViewport.getViewportWidth()-t),null!=(o=this.instance.getSetting("onModifyRowHeaderWidth",o)))for(var a=0;a<this.rowHeaderCount;a++){var s=Array.isArray(o)?o[a]:o;s=null==s?i:s,this.COLGROUP.childNodes[a].style.width=s+"px"}for(var r=0;r<e;r++){var d=this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(r));this.COLGROUP.childNodes[r+this.rowHeaderCount].style.width=d+"px"}}},{key:"appendToTbody",value:function(e){this.TBODY.appendChild(e),this.wtTable.tbodyChildrenLength++}},{key:"getOrCreateTrForRow",value:function(e,t){var n=void 0;return e>=this.wtTable.tbodyChildrenLength?(n=this.createRow(),this.appendToTbody(n)):n=0===e?this.TBODY.firstChild:t.nextSibling,n.className&&n.removeAttribute("class"),n}},{key:"createRow",value:function(){for(var e=document.createElement("TR"),t=0;t<this.rowHeaderCount;t++)e.appendChild(document.createElement("TH"));return e}},{key:"renderRowHeader",value:function(e,t,n){n.className="",n.removeAttribute("style"),this.rowHeaders[t](e,n,t)}},{key:"renderRowHeaders",value:function(e,t){for(var n=t.firstChild,i=0;i<this.rowHeaderCount;i++)n?"TD"==n.nodeName&&(n=m(n,t)):(n=document.createElement("TH"),t.appendChild(n)),this.renderRowHeader(e,i,n),n=n.nextSibling}},{key:"adjustAvailableNodes",value:function(){this.adjustColGroups(),this.adjustThead()}},{key:"renderColumnHeaders",value:function(){if(this.columnHeaderCount)for(var e=this.wtTable.getRenderedColumnsCount(),t=0;t<this.columnHeaderCount;t++)for(var n=this.getTrForColumnHeaders(t),i=-1*this.rowHeaderCount;i<e;i++){var o=this.columnFilter.renderedToSource(i);this.renderColumnHeader(t,o,n.childNodes[i+this.rowHeaderCount])}}},{key:"adjustColGroups",value:function(){for(var e=this.wtTable.getRenderedColumnsCount();this.wtTable.colgroupChildrenLength<e+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength>e+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--;this.rowHeaderCount&&(0,l.addClass)(this.COLGROUP.childNodes[0],"rowHeader")}},{key:"adjustThead",value:function(){var e=this.wtTable.getRenderedColumnsCount(),t=this.THEAD.firstChild;if(this.columnHeaders.length){for(var n=0,i=this.columnHeaders.length;n<i;n++){for((t=this.THEAD.childNodes[n])||(t=document.createElement("TR"),this.THEAD.appendChild(t)),this.theadChildrenLength=t.childNodes.length;this.theadChildrenLength<e+this.rowHeaderCount;)t.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>e+this.rowHeaderCount;)t.removeChild(t.lastChild),this.theadChildrenLength--}var o=this.THEAD.childNodes.length;if(o>this.columnHeaders.length)for(var a=this.columnHeaders.length;a<o;a++)this.THEAD.removeChild(this.THEAD.lastChild)}else t&&(0,l.empty)(t)}},{key:"getTrForColumnHeaders",value:function(e){return this.THEAD.childNodes[e]}},{key:"renderColumnHeader",value:function(e,t,n){return n.className="",n.removeAttribute("style"),this.columnHeaders[e](t,n,e)}},{key:"adjustColumns",value:function(e,t){for(var n=e.childNodes.length;n<t;){var i=document.createElement("TD");e.appendChild(i),n++}for(;n>t;)e.removeChild(e.lastChild),n--}},{key:"removeRedundantColumns",value:function(e){for(;this.wtTable.tbodyChildrenLength>e;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--}}]),e}();function m(e,t){var n=document.createElement("TH");return t.insertBefore(n,e),t.removeChild(e),n}function _(e,t){var n=document.createElement("TD");return t.insertBefore(n,e),t.removeChild(e),n}t.default=f},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(2),s=d(n(6)),r=d(n(176)),l=d(n(177));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t,this.instance=this.wot,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.eventManager=new s.default(this.wot),this.eventManager.addEventListener(window,"resize",(function(){n.clientHeight=n.getWorkspaceHeight()}))}return i(e,[{key:"getWorkspaceHeight",value:function(){var e=this.instance.wtOverlays.topOverlay.trimmingContainer;return e===window?document.documentElement.clientHeight:(0,o.outerHeight)(e)>0&&e.clientHeight>0?e.clientHeight:1/0}},{key:"getWorkspaceWidth",value:function(){var e=void 0,t=this.wot.getSetting("totalColumns"),n=this.instance.wtOverlays.leftOverlay.trimmingContainer,i=void 0,a=this.wot.getSetting("stretchH"),s=document.documentElement.offsetWidth;return this.wot.getSetting("preventOverflow")?(0,o.outerWidth)(this.instance.wtTable.wtRootElement):(e=this.wot.getSetting("freezeOverlays")?Math.min(s-this.getWorkspaceOffset().left,s):Math.min(this.getContainerFillWidth(),s-this.getWorkspaceOffset().left,s),n===window&&t>0&&this.sumColumnWidths(0,t-1)>e?document.documentElement.clientWidth:n===window||"scroll"!=(i=(0,o.getStyle)(this.instance.wtOverlays.leftOverlay.trimmingContainer,"overflow"))&&"hidden"!=i&&"auto"!=i?"none"!==a&&a?e:Math.max(e,(0,o.outerWidth)(this.instance.wtTable.TABLE)):Math.max(e,n.clientWidth))}},{key:"hasVerticalScroll",value:function(){return this.getWorkspaceActualHeight()>this.getWorkspaceHeight()}},{key:"hasHorizontalScroll",value:function(){return this.getWorkspaceActualWidth()>this.getWorkspaceWidth()}},{key:"sumColumnWidths",value:function(e,t){for(var n=0;e<t;)n+=this.wot.wtTable.getColumnWidth(e),e++;return n}},{key:"getContainerFillWidth",value:function(){if(this.containerWidth)return this.containerWidth;var e,t=this.instance.wtTable.holder,n=void 0;return(n=document.createElement("div")).style.width="100%",n.style.height="1px",t.appendChild(n),e=n.offsetWidth,this.containerWidth=e,t.removeChild(n),e}},{key:"getWorkspaceOffset",value:function(){return(0,o.offset)(this.wot.wtTable.TABLE)}},{key:"getWorkspaceActualHeight",value:function(){return(0,o.outerHeight)(this.wot.wtTable.TABLE)}},{key:"getWorkspaceActualWidth",value:function(){return(0,o.outerWidth)(this.wot.wtTable.TABLE)||(0,o.outerWidth)(this.wot.wtTable.TBODY)||(0,o.outerWidth)(this.wot.wtTable.THEAD)}},{key:"getColumnHeaderHeight",value:function(){return isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=(0,o.outerHeight)(this.wot.wtTable.THEAD)),this.columnHeaderHeight}},{key:"getViewportHeight",value:function(){var e,t=this.getWorkspaceHeight();return t===1/0||(e=this.getColumnHeaderHeight())>0&&(t-=e),t}},{key:"getRowHeaderWidth",value:function(){var e=this.instance.getSetting("rowHeaderWidth"),t=this.instance.getSetting("rowHeaders");if(e){this.rowHeaderWidth=0;for(var n=0,i=t.length;n<i;n++)this.rowHeaderWidth+=e[n]||e}if(this.wot.cloneSource)return this.wot.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth))if(t.length){var a=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var s=0,r=t.length;s<r;s++)a?(this.rowHeaderWidth+=(0,o.outerWidth)(a),a=a.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.instance.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}},{key:"getViewportWidth",value:function(){var e,t=this.getWorkspaceWidth();return t===1/0?t:(e=this.getRowHeaderWidth())>0?t-e:t}},{key:"createRowsCalculator",value:function(){var e,t,n,i=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=void 0,r=void 0,d=void 0,c=void 0;return this.rowHeaderWidth=NaN,s=this.wot.wtSettings.settings.renderAllRows&&!a?1/0:this.getViewportHeight(),(r=this.wot.wtOverlays.topOverlay.getScrollPosition()-this.wot.wtOverlays.topOverlay.getTableParentOffset())<0&&(r=0),e=this.wot.getSetting("fixedRowsTop"),t=this.wot.getSetting("fixedRowsBottom"),n=this.wot.getSetting("totalRows"),e&&(r+=c=this.wot.wtOverlays.topOverlay.sumCellSizes(0,e),s-=c),t&&this.wot.wtOverlays.bottomOverlay.clone&&(s-=c=this.wot.wtOverlays.bottomOverlay.sumCellSizes(n-t,n)),d=this.wot.wtTable.holder.clientHeight===this.wot.wtTable.holder.offsetHeight?0:(0,o.getScrollbarWidth)(),new l.default(s,r,this.wot.getSetting("totalRows"),(function(e){return i.wot.wtTable.getRowHeight(e)}),a?null:this.wot.wtSettings.settings.viewportRowCalculatorOverride,a,d)}},{key:"createColumnsCalculator",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.getViewportWidth(),a=void 0;if(this.columnHeaderHeight=NaN,(a=this.wot.wtOverlays.leftOverlay.getScrollPosition()-this.wot.wtOverlays.leftOverlay.getTableParentOffset())<0&&(a=0),e=this.wot.getSetting("fixedColumnsLeft")){var s=this.wot.wtOverlays.leftOverlay.sumCellSizes(0,e);a+=s,i-=s}return this.wot.wtTable.holder.clientWidth!==this.wot.wtTable.holder.offsetWidth&&(i-=(0,o.getScrollbarWidth)()),new r.default(i,a,this.wot.getSetting("totalColumns"),(function(e){return t.wot.wtTable.getColumnWidth(e)}),n?null:this.wot.wtSettings.settings.viewportColumnCalculatorOverride,n,this.wot.getSetting("stretchH"),(function(e,n){return t.wot.getSetting("onBeforeStretchingColumnWidth",e,n)}))}},{key:"createRenderCalculators",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var t=this.createRowsCalculator(!0),n=this.createColumnsCalculator(!0);this.areAllProposedVisibleRowsAlreadyRendered(t)&&this.areAllProposedVisibleColumnsAlreadyRendered(n)||(e=!1)}return e||(this.rowsRenderCalculator=this.createRowsCalculator(),this.columnsRenderCalculator=this.createColumnsCalculator()),this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,e}},{key:"createVisibleCalculators",value:function(){this.rowsVisibleCalculator=this.createRowsCalculator(!0),this.columnsVisibleCalculator=this.createColumnsCalculator(!0)}},{key:"areAllProposedVisibleRowsAlreadyRendered",value:function(e){return!(!this.rowsVisibleCalculator||e.startRow<this.rowsRenderCalculator.startRow||e.startRow===this.rowsRenderCalculator.startRow&&e.startRow>0||e.endRow>this.rowsRenderCalculator.endRow||e.endRow===this.rowsRenderCalculator.endRow&&e.endRow<this.wot.getSetting("totalRows")-1)}},{key:"areAllProposedVisibleColumnsAlreadyRendered",value:function(e){return!(!this.columnsVisibleCalculator||e.startColumn<this.columnsRenderCalculator.startColumn||e.startColumn===this.columnsRenderCalculator.startColumn&&e.startColumn>0||e.endColumn>this.columnsRenderCalculator.endColumn||e.endColumn===this.columnsRenderCalculator.endColumn&&e.endColumn<this.wot.getSetting("totalColumns")-1)}},{key:"resetHasOversizedColumnHeadersMarked",value:function(){(0,a.objectEach)(this.hasOversizedColumnHeadersMarked,(function(e,t,n){n[t]=void 0}))}}]),e}();t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=n(13),r=n(2),l=n(27),d=u(n(6)),c=u(n(56));function u(e){return e&&e.__esModule?e:{default:e}}u(n(35));var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n&&(this.eventManager=new d.default(t),this.instance=t,this.wot=t,this.settings=n,this.mouseDown=!1,this.main=null,this.top=null,this.left=null,this.bottom=null,this.right=null,this.topStyle=null,this.leftStyle=null,this.bottomStyle=null,this.rightStyle=null,this.cornerDefaultStyle={width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"},this.corner=null,this.cornerStyle=null,this.createBorders(n),this.registerListeners())}return o(e,[{key:"registerListeners",value:function(){var e=this;this.eventManager.addEventListener(document.body,"mousedown",(function(){return e.onMouseDown()})),this.eventManager.addEventListener(document.body,"mouseup",(function(){return e.onMouseUp()}));for(var t=function(t,n){e.eventManager.addEventListener(e.main.childNodes[t],"mouseenter",(function(n){return e.onMouseEnter(n,e.main.childNodes[t])}))},n=0,i=this.main.childNodes.length;n<i;n++)t(n)}},{key:"onMouseDown",value:function(){this.mouseDown=!0}},{key:"onMouseUp",value:function(){this.mouseDown=!1}},{key:"onMouseEnter",value:function(e,t){if(this.mouseDown&&this.wot.getSetting("hideBorderOnMouseDownOver")){e.preventDefault(),(0,s.stopImmediatePropagation)(e);var n=this,i=t.getBoundingClientRect();t.style.display="none",this.eventManager.addEventListener(document.body,"mousemove",(function e(o){(function(e){return e.clientY<Math.floor(i.top)||e.clientY>Math.ceil(i.top+i.height)||e.clientX<Math.floor(i.left)||e.clientX>Math.ceil(i.left+i.width)||void 0})(o)&&(n.eventManager.removeEventListener(document.body,"mousemove",e),t.style.display="block")}))}}},{key:"createBorders",value:function(e){this.main=document.createElement("div");var t=["top","left","bottom","right","corner"],n=this.main.style;n.position="absolute",n.top=0,n.left=0;for(var i=0;i<5;i++){var o=t[i],a=document.createElement("div");a.className="wtBorder "+(this.settings.className||""),this.settings[o]&&this.settings[o].hide&&(a.className+=" hidden"),(n=a.style).backgroundColor=this.settings[o]&&this.settings[o].color?this.settings[o].color:e.border.color,n.height=this.settings[o]&&this.settings[o].width?this.settings[o].width+"px":e.border.width+"px",n.width=this.settings[o]&&this.settings[o].width?this.settings[o].width+"px":e.border.width+"px",this.main.appendChild(a)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),(0,l.isMobileBrowser)()&&this.createMultipleSelectorHandles(),this.disappear(),this.wot.wtTable.bordersHolder||(this.wot.wtTable.bordersHolder=document.createElement("div"),this.wot.wtTable.bordersHolder.className="htBorders",this.wot.wtTable.spreader.appendChild(this.wot.wtTable.bordersHolder)),this.wot.wtTable.bordersHolder.insertBefore(this.main,this.wot.wtTable.bordersHolder.firstChild)}},{key:"createMultipleSelectorHandles",value:function(){this.selectionHandles={topLeft:document.createElement("DIV"),topLeftHitArea:document.createElement("DIV"),bottomRight:document.createElement("DIV"),bottomRightHitArea:document.createElement("DIV")},this.selectionHandles.topLeft.className="topLeftSelectionHandle",this.selectionHandles.topLeftHitArea.className="topLeftSelectionHandle-HitArea",this.selectionHandles.bottomRight.className="bottomRightSelectionHandle",this.selectionHandles.bottomRightHitArea.className="bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style};var e={position:"absolute",height:"40px",width:"40px","border-radius":parseInt(40/1.5,10)+"px"};for(var t in e)(0,r.hasOwnProperty)(e,t)&&(this.selectionHandles.styles.bottomRightHitArea[t]=e[t],this.selectionHandles.styles.topLeftHitArea[t]=e[t]);var n={position:"absolute",height:"10px",width:"10px","border-radius":parseInt(10/1.5,10)+"px",background:"#F5F5FF",border:"1px solid #4285c8"};for(var i in n)(0,r.hasOwnProperty)(n,i)&&(this.selectionHandles.styles.bottomRight[i]=n[i],this.selectionHandles.styles.topLeft[i]=n[i]);this.main.appendChild(this.selectionHandles.topLeft),this.main.appendChild(this.selectionHandles.bottomRight),this.main.appendChild(this.selectionHandles.topLeftHitArea),this.main.appendChild(this.selectionHandles.bottomRightHitArea)}},{key:"isPartRange",value:function(e,t){var n=this.wot.selections.createOrGetArea();return!(!n.cellRange||e==n.cellRange.to.row&&t==n.cellRange.to.col)}},{key:"updateMultipleSelectionHandlesPosition",value:function(e,t,n,i,o,a){var s=parseInt(this.selectionHandles.styles.topLeft.width,10),r=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top=parseInt(n-s,10)+"px",this.selectionHandles.styles.topLeft.left=parseInt(i-s,10)+"px",this.selectionHandles.styles.topLeftHitArea.top=parseInt(n-r/4*3,10)+"px",this.selectionHandles.styles.topLeftHitArea.left=parseInt(i-r/4*3,10)+"px",this.selectionHandles.styles.bottomRight.top=parseInt(n+a,10)+"px",this.selectionHandles.styles.bottomRight.left=parseInt(i+o,10)+"px",this.selectionHandles.styles.bottomRightHitArea.top=parseInt(n+a-r/4,10)+"px",this.selectionHandles.styles.bottomRightHitArea.left=parseInt(i+o-r/4,10)+"px",this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(this.selectionHandles.styles.topLeft.display="block",this.selectionHandles.styles.topLeftHitArea.display="block",this.isPartRange(e,t)?(this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"):(this.selectionHandles.styles.bottomRight.display="block",this.selectionHandles.styles.bottomRightHitArea.display="block")):(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.topLeftHitArea.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"),e==this.wot.wtSettings.getSetting("fixedRowsTop")||t==this.wot.wtSettings.getSetting("fixedColumnsLeft")?(this.selectionHandles.styles.topLeft.zIndex="9999",this.selectionHandles.styles.topLeftHitArea.zIndex="9999"):(this.selectionHandles.styles.topLeft.zIndex="",this.selectionHandles.styles.topLeftHitArea.zIndex="")}},{key:"appear",value:function(e){if(!this.disabled){for(var t=void 0,n=void 0,o=void 0,s=void 0,r=this.wot.wtTable.getRenderedRowsCount(),d=0;d<r;d+=1){var u=this.wot.wtTable.rowFilter.renderedToSource(d);if(u>=e[0]&&u<=e[2]){t=u;break}}for(var h=r-1;h>=0;h-=1){var p=this.wot.wtTable.rowFilter.renderedToSource(h);if(p>=e[0]&&p<=e[2]){n=p;break}}for(var f=this.wot.wtTable.getRenderedColumnsCount(),m=0;m<f;m+=1){var _=this.wot.wtTable.columnFilter.renderedToSource(m);if(_>=e[1]&&_<=e[3]){o=_;break}}for(var v=f-1;v>=0;v-=1){var g=this.wot.wtTable.columnFilter.renderedToSource(v);if(g>=e[1]&&g<=e[3]){s=g;break}}if(void 0!==t&&void 0!==o){var y=this.wot.wtTable.getCell(new c.default(t,o)),b=t!==n||o!==s,w=b?this.wot.wtTable.getCell(new c.default(n,s)):y,k=(0,a.offset)(y),C=b?(0,a.offset)(w):k,x=(0,a.offset)(this.wot.wtTable.TABLE),S=k.top,M=k.left,T=M-x.left-1,L=C.left+(0,a.outerWidth)(w)-M;if(this.isEntireColumnSelected(t,n)){var D=this.getDimensionsFromHeader("columns",o,s,x),E=null;if(D){var O=i(D,3);E=O[0],T=O[1],L=O[2]}E&&(y=E)}var A=S-x.top-1,I=C.top+(0,a.outerHeight)(w)-S;if(this.isEntireRowSelected(o,s)){var P=this.getDimensionsFromHeader("rows",t,n,x),R=null;if(P){var j=i(P,3);R=j[0],A=j[1],I=j[2]}R&&(y=R)}var Y=(0,a.getComputedStyle)(y);parseInt(Y.borderTopWidth,10)>0&&(A+=1,I=I>0?I-1:0),parseInt(Y.borderLeftWidth,10)>0&&(T+=1,L=L>0?L-1:0),this.topStyle.top=A+"px",this.topStyle.left=T+"px",this.topStyle.width=L+"px",this.topStyle.display="block",this.leftStyle.top=A+"px",this.leftStyle.left=T+"px",this.leftStyle.height=I+"px",this.leftStyle.display="block";var H=Math.floor(this.settings.border.width/2);this.bottomStyle.top=A+I-H+"px",this.bottomStyle.left=T+"px",this.bottomStyle.width=L+"px",this.bottomStyle.display="block",this.rightStyle.top=A+"px",this.rightStyle.left=T+L-H+"px",this.rightStyle.height=I+1+"px",this.rightStyle.display="block";var N=this.settings.border.cornerVisible;N="function"==typeof N?N(this.settings.layerLevel):N;var F=this.wot.getSetting("onModifyGetCellCoords",n,s),B=n,$=s;if(F&&Array.isArray(F)){var z=i(F,4);B=z[2],$=z[3]}if((0,l.isMobileBrowser)()||!N||this.isPartRange(B,$))this.cornerStyle.display="none";else{this.cornerStyle.top=A+I-4+"px",this.cornerStyle.left=T+L-4+"px",this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";var W=(0,a.getTrimmingContainer)(this.wot.wtTable.TABLE),U=W===window;U&&(W=document.documentElement),s===this.wot.getSetting("totalColumns")-1&&(U?w.getBoundingClientRect().left:w.offsetLeft)+(0,a.outerWidth)(w)+parseInt(this.cornerDefaultStyle.width,10)/2>=(0,a.innerWidth)(W)&&(this.cornerStyle.left=Math.floor(T+L-3-parseInt(this.cornerDefaultStyle.width,10)/2)+"px",this.cornerStyle.borderRightWidth=0),n===this.wot.getSetting("totalRows")-1&&(U?w.getBoundingClientRect().top:w.offsetTop)+(0,a.outerHeight)(w)+parseInt(this.cornerDefaultStyle.height,10)/2>=(0,a.innerHeight)(W)&&(this.cornerStyle.top=Math.floor(A+I-3-parseInt(this.cornerDefaultStyle.height,10)/2)+"px",this.cornerStyle.borderBottomWidth=0),this.cornerStyle.display="block"}(0,l.isMobileBrowser)()&&this.updateMultipleSelectionHandlesPosition(n,s,A,T,L,I)}else this.disappear()}}},{key:"isEntireColumnSelected",value:function(e,t){return e===this.wot.wtTable.getFirstRenderedRow()&&t===this.wot.wtTable.getLastRenderedRow()}},{key:"isEntireRowSelected",value:function(e,t){return e===this.wot.wtTable.getFirstRenderedColumn()&&t===this.wot.wtTable.getLastRenderedColumn()}},{key:"getDimensionsFromHeader",value:function(e,t,n,i){var o=this,s=this.wot.wtTable.wtRootElement.parentNode,r=null,l=null,d=null,c=null,u=null,h=null,p=null,f=null;switch(e){case"rows":r=function(){var e;return(e=o.wot.wtTable).getRowHeader.apply(e,arguments)},l=function(){return a.outerHeight.apply(void 0,arguments)},d="ht__selection--rows",h="top";break;case"columns":r=function(){var e;return(e=o.wot.wtTable).getColumnHeader.apply(e,arguments)},l=function(){return a.outerWidth.apply(void 0,arguments)},d="ht__selection--columns",h="left"}if(s.className.includes(d)){var m=this.wot.getSetting("columnHeaders").length;if(p=r(t,m-1),f=r(n,m-1),!p||!f)return!1;var _=(0,a.offset)(p),v=(0,a.offset)(f);return p&&f&&(c=_[h]-i[h]-1,u=v[h]+l(f)-_[h]),[p,c,u]}return!1}},{key:"disappear",value:function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none",(0,l.isMobileBrowser)()&&(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none")}}]),e}();t.default=h},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(21),a=n(11),s=n(36),r=n(1),l=n(0),d=n(190),c=(i=d)&&i.__esModule?i:{default:i},u=c.default.prototype.extend();u.prototype.init=function(){c.default.prototype.init.apply(this,arguments),this.query=null,this.strippedChoices=[],this.rawChoices=[]},u.prototype.getValue=function(){var e=this,t=this.rawChoices.find((function(t){return e.stripValueIfNeeded(t)===e.TEXTAREA.value}));return(0,a.isDefined)(t)?t:this.TEXTAREA.value},u.prototype.createElements=function(){c.default.prototype.createElements.apply(this,arguments),(0,l.addClass)(this.htContainer,"autocompleteEditor"),(0,l.addClass)(this.htContainer,-1===window.navigator.platform.indexOf("Mac")?"":"htMacScroll")};var h=!1;function p(e){h=!1;var t=this.getActiveEditor();if((0,o.isPrintableChar)(e.keyCode)||e.keyCode===o.KEY_CODES.BACKSPACE||e.keyCode===o.KEY_CODES.DELETE||e.keyCode===o.KEY_CODES.INSERT){var n=0;if(e.keyCode===o.KEY_CODES.C&&(e.ctrlKey||e.metaKey))return;t.isOpened()||(n+=10),t.htEditor&&t.instance._registerTimeout((function(){t.queryChoices(t.TEXTAREA.value),h=!0}),n)}}u.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",p),c.default.prototype.prepare.apply(this,arguments)},u.prototype.open=function(){this.TEXTAREA_PARENT.style.overflow="auto",c.default.prototype.open.apply(this,arguments),this.TEXTAREA_PARENT.style.overflow="";var e=this.htEditor.getInstance(),t=this,n=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown;this.showEditableElement(),this.focus(),e.updateSettings({colWidths:n?[(0,l.outerWidth)(this.TEXTAREA)-2]:void 0,width:n?(0,l.outerWidth)(this.TEXTAREA)+(0,l.getScrollbarWidth)()+2:void 0,afterRenderer:function(e,n,i,o,s,r){var l=t.cellProperties,d=l.filteringCaseSensitive,c=l.allowHtml,u=void 0,h=void 0;(s=(0,a.stringify)(s))&&!c&&-1!==(u=!0===d?s.indexOf(this.query):s.toLowerCase().indexOf(t.query.toLowerCase()))&&(h=s.substr(u,t.query.length),s=s.replace(h,"<strong>"+h+"</strong>")),e.innerHTML=s},autoColumnSize:!0,modifyColWidth:function(e,t){var i=this.getPlugin("autoColumnSize").widths;return i[t]&&(e=i[t]),n?e:e+15}}),this.htEditor.view.wt.wtTable.holder.parentNode.style["padding-right"]=(0,l.getScrollbarWidth)()+2+"px",h&&(h=!1),t.instance._registerTimeout((function(){t.queryChoices(t.TEXTAREA.value)}))},u.prototype.queryChoices=function(e){var t=this;this.query=e;var n=this.cellProperties.source;"function"==typeof n?n.call(this.cellProperties,e,(function(e){t.rawChoices=e,t.updateChoicesList(t.stripValuesIfNeeded(e))})):Array.isArray(n)?(this.rawChoices=n,this.updateChoicesList(this.stripValuesIfNeeded(n))):this.updateChoicesList([])},u.prototype.updateChoicesList=function(e){var t=(0,l.getCaretPosition)(this.TEXTAREA),n=(0,l.getSelectionEndPosition)(this.TEXTAREA),i=this.cellProperties.sortByRelevance,o=this.cellProperties.filter,a=null,s=null;i&&(a=u.sortByRelevance(this.stripValueIfNeeded(this.getValue()),e,this.cellProperties.filteringCaseSensitive));var d=Array.isArray(a)?a.length:0;if(!1===o)d&&(s=a[0]);else{for(var c=[],h=0,p=e.length;h<p&&!(i&&d<=h);h++)d?c.push(e[a[h]]):c.push(e[h]);s=0,e=c}this.strippedChoices=e,this.htEditor.loadData((0,r.pivot)([e])),this.updateDropdownHeight(),this.flipDropdownIfNeeded(),!0===this.cellProperties.strict&&this.highlightBestMatchingChoice(s),this.instance.listen(!1),(0,l.setCaretPosition)(this.TEXTAREA,t,t===n?void 0:n)},u.prototype.flipDropdownIfNeeded=function(){var e=(0,l.offset)(this.TEXTAREA),t=(0,l.outerHeight)(this.TEXTAREA),n=this.getDropdownHeight(),i=(0,l.getTrimmingContainer)(this.instance.view.wt.wtTable.TABLE),o=i.scrollTop,a=(0,l.outerHeight)(this.instance.view.wt.wtTable.THEAD),s={row:0,col:0};i!==window&&(s=(0,l.offset)(i));var r=e.top-s.top-a+o,d=i.scrollHeight-r-a-t,c=n>d&&r>d;return c?this.flipDropdown(n):this.unflipDropdown(),this.limitDropdownIfNeeded(c?r:d,n),c},u.prototype.limitDropdownIfNeeded=function(e,t){if(t>e){var n,i=0,o=0,a=0;do{i+=a=this.htEditor.getRowHeight(o)||this.htEditor.view.wt.wtSettings.settings.defaultRowHeight,o++}while(i<e);n=i-a,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=parseInt(this.htEditor.rootElement.style.top,10)+t-n+"px"),this.setDropdownHeight(i-a)}},u.prototype.flipDropdown=function(e){var t=this.htEditor.rootElement.style;t.position="absolute",t.top=-e+"px",this.htEditor.flipped=!0},u.prototype.unflipDropdown=function(){var e=this.htEditor.rootElement.style;"absolute"===e.position&&(e.position="",e.top=""),this.htEditor.flipped=void 0},u.prototype.updateDropdownHeight=function(){var e=this.htEditor.getColWidth(0)+(0,l.getScrollbarWidth)()+2,t=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:t?void 0:e}),this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer()},u.prototype.setDropdownHeight=function(e){this.htEditor.updateSettings({height:e})},u.prototype.finishEditing=function(e){e||this.instance.removeHook("beforeKeyDown",p),c.default.prototype.finishEditing.apply(this,arguments)},u.prototype.highlightBestMatchingChoice=function(e){"number"==typeof e?this.htEditor.selectCell(e,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()},u.sortByRelevance=function(e,t,n){var i=[],o=void 0,r=e.length,l=void 0,d=void 0,c=[],u=void 0,h=t.length;if(0===r){for(u=0;u<h;u++)c.push(u);return c}for(u=0;u<h;u++)o=(0,s.stripTags)((0,a.stringify)(t[u])),-1!==(l=n?o.indexOf(e):o.toLowerCase().indexOf(e.toLowerCase()))&&(d=o.length-l-r,i.push({baseIndex:u,index:l,charsLeft:d,value:o}));for(i.sort((function(e,t){if(-1===t.index)return-1;if(-1===e.index)return 1;if(e.index<t.index)return-1;if(t.index<e.index)return 1;if(e.index===t.index){if(e.charsLeft<t.charsLeft)return-1;if(e.charsLeft>t.charsLeft)return 1}return 0})),u=0,h=i.length;u<h;u++)c.push(i[u].baseIndex);return c},u.prototype.getDropdownHeight=function(){var e=this.htEditor.getInstance().getRowHeight(0)||23,t=this.cellProperties.visibleRows;return this.strippedChoices.length>=t?t*e:this.strippedChoices.length*e+8},u.prototype.stripValueIfNeeded=function(e){return this.stripValuesIfNeeded([e])[0]},u.prototype.stripValuesIfNeeded=function(e){var t=this.cellProperties.allowHtml,n=(0,r.arrayMap)(e,(function(e){return(0,a.stringify)(e)}));return(0,r.arrayMap)(n,(function(e){return t?e:(0,s.stripTags)(e)}))},u.prototype.allowKeyEventPropagation=function(e){var t=this.htEditor.getSelectedRangeLast(),n=t?t.from.row:-1,i=!1;return e===o.KEY_CODES.ARROW_DOWN&&n>0&&n<this.htEditor.countRows()-1&&(i=!0),e===o.KEY_CODES.ARROW_UP&&n>-1&&(i=!0),i},u.prototype.discardEditor=function(e){c.default.prototype.discardEditor.apply(this,arguments),this.instance.view.render()},t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(21),a=n(2),s=n(0),r=n(13),l=n(59),d=(i=l)&&i.__esModule?i:{default:i},c=d.default.prototype.extend();c.prototype.createElements=function(){d.default.prototype.createElements.apply(this,arguments);var e=document.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.assignHooks()},c.prototype.prepare=function(e,t,n,i,o,s){d.default.prototype.prepare.apply(this,arguments);var r=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,afterOnCellMouseDown:function(e,t){var n=this.getSourceData(t.row,t.col);void 0!==n&&r.setValue(n),r.instance.destroyEditor()}};this.cellProperties.handsontable&&(0,a.extend)(l,s.handsontable),this.htOptions=l};var u=function(e){if(!(0,r.isImmediatePropagationStopped)(e)){var t,n,i=this.getActiveEditor(),a=i.htEditor.getInstance();if(e.keyCode==o.KEY_CODES.ARROW_DOWN)if(a.getSelectedLast()||a.flipped){if(a.getSelectedLast())if(a.flipped)t=a.getSelectedLast()[0]+1;else if(!a.flipped){n=a.getSelectedLast()[0];var s=a.countRows()-1;t=Math.min(s,n+1)}}else t=0;else e.keyCode==o.KEY_CODES.ARROW_UP&&(!a.getSelectedLast()&&a.flipped?t=a.countRows()-1:a.getSelectedLast()&&(a.flipped?(n=a.getSelectedLast()[0],t=Math.max(0,n-1)):t=(n=a.getSelectedLast()[0])-1));void 0!==t&&(t<0||a.flipped&&t>a.countRows()-1?a.deselectCell():a.selectCell(t,0),a.getData().length&&(e.preventDefault(),(0,r.stopImmediatePropagation)(e),i.instance.listen(),i.TEXTAREA.focus()))}};c.prototype.open=function(){this.instance.addHook("beforeKeyDown",u),d.default.prototype.open.apply(this,arguments),this.htEditor&&this.htEditor.destroy(),this.htEditor=new this.instance.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),(0,s.setCaretPosition)(this.TEXTAREA,0,this.TEXTAREA.value.length)},c.prototype.close=function(){this.htEditor.rootElement.style.display="none",this.instance.removeHook("beforeKeyDown",u),d.default.prototype.close.apply(this,arguments)},c.prototype.focus=function(){d.default.prototype.focus.apply(this,arguments)},c.prototype.beginEditing=function(e){var t=this.instance.getSettings().onBeginEditing;t&&!1===t()||d.default.prototype.beginEditing.apply(this,arguments)},c.prototype.finishEditing=function(e,t){if(this.htEditor&&this.htEditor.isListening()&&this.instance.listen(),this.htEditor&&this.htEditor.getSelectedLast()){var n=this.htEditor.getInstance().getValue();void 0!==n&&this.setValue(n)}return d.default.prototype.finishEditing.apply(this,arguments)},c.prototype.assignHooks=function(){var e=this;this.instance.addHook("afterDestroy",(function(){e.htEditor&&e.htEditor.destroy()}))},t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.getNormalizedDate=function(e){var t=new Date(e);return isNaN(new Date(e+"T00:00").getDate())?t:new Date(t.getTime()+6e4*t.getTimezoneOffset())}},function(e,t,n){"use strict";!function(e){function n(e){return e.split('"').length-1}var i=function(e){var t,i,o,a,s,r,l,d=[],c=0;for((o=e.split("\n")).length>1&&""===o[o.length-1]&&o.pop(),t=0,i=o.length;t<i;t+=1){for(o[t]=o[t].split("\t"),a=0,s=o[t].length;a<s;a+=1)d[c]||(d[c]=[]),r&&0===a?(l=d[c].length-1,d[c][l]=d[c][l]+"\n"+o[t][0],r&&1&n(o[t][0])&&(r=!1,d[c][l]=d[c][l].substring(0,d[c][l].length-1).replace(/""/g,'"'))):a===s-1&&0===o[t][a].indexOf('"')&&1&n(o[t][a])?(d[c].push(o[t][a].substring(1).replace(/""/g,'"')),r=!0):(d[c].push(o[t][a].replace(/""/g,'"')),r=!1);r||(c+=1)}return d},o=function(e){var t,n,i,o,a,s="";for(t=0,n=e.length;t<n;t+=1){for(o=e[t].length,i=0;i<o;i+=1)i>0&&(s+="\t"),"string"==typeof(a=e[t][i])?a.indexOf("\n")>-1?s+='"'+a.replace(/"/g,'""')+'"':s+=a:s+=null==a?"":a;t!==n-1&&(s+="\n")}return s};t.parse=i,t.stringify=o}(window)},function(e,t,n){"use strict";t.__esModule=!0,t.mouseDown=a,t.mouseOver=s,t.handleMouseEvent=function(e,t){var n=t.coords,o=t.selection,a=t.controller;r.get(e.type)({coords:n,selection:o,controller:a,isShiftKey:e.shiftKey,isLeftClick:(0,i.isLeftClick)(e)||"touchstart"===e.type,isRightClick:(0,i.isRightClick)(e)})};var i=n(13),o=n(4);function a(e){var t=e.isShiftKey,n=e.isLeftClick,i=e.isRightClick,a=e.coords,s=e.selection,r=e.controller,l=s.isSelected()?s.getSelectedRange().current():null,d=s.isSelectedByCorner(),c=s.isSelectedByRowHeader();if(s.isSelectedByColumnHeader(),t&&l)a.row>=0&&a.col>=0&&!r.cells?s.setRangeEnd(a):(d||c)&&a.row>=0&&a.col>=0&&!r.cells?s.setRangeEnd(new o.CellCoords(a.row,a.col)):d&&a.row<0&&!r.column?s.setRangeEnd(new o.CellCoords(l.to.row,a.col)):c&&a.col<0&&!r.row?s.setRangeEnd(new o.CellCoords(a.row,l.to.col)):(!d&&!c&&a.col<0||d&&a.col<0)&&!r.row?s.selectRows(l.from.row,a.row):(!d&&!c&&a.row<0||c&&a.row<0)&&!r.column&&s.selectColumns(l.from.col,a.col);else{var u=new o.CellCoords(a.row,a.col);u.row<0&&(u.row=0),u.col<0&&(u.col=0);var h=!s.inInSelection(u),p=n||i&&h;a.row<0&&a.col>=0&&!r.column?p&&s.selectColumns(a.col):a.col<0&&a.row>=0&&!r.row?p&&s.selectRows(a.row):a.col>=0&&a.row>=0&&!r.cells?p&&s.setRangeStart(a):a.col<0&&a.row<0&&s.setRangeStart(a)}}function s(e){var t=e.isLeftClick,n=e.coords,i=e.selection,a=e.controller;if(t){var s=i.isSelectedByRowHeader(),r=i.isSelectedByColumnHeader(),l=i.tableProps.countCols(),d=i.tableProps.countRows();r&&!a.column?i.setRangeEnd(new o.CellCoords(d-1,n.col)):s&&!a.row?i.setRangeEnd(new o.CellCoords(n.row,l-1)):a.cell||i.setRangeEnd(n)}}var r=new Map([["mousedown",a],["mouseover",s],["touchstart",a]])},function(e,t,n){"use strict";t.__esModule=!0,t.RecordTranslator=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.registerIdentity=function(e,t){d.set(e,t)},t.getTranslator=function(e){var t=void 0;if(!(e instanceof s.default)){if(!d.has(e))throw Error("Record translator was not registered for this object identity");e=d.get(e)}return c.has(e)?t=c.get(e):(t=new l(e),c.set(e,t)),t};var o,a=n(89),s=(o=a)&&o.__esModule?o:{default:o},r=n(2),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t}return i(e,[{key:"toVisualRow",value:function(e){return this.hot.runHooks("unmodifyRow",e)}},{key:"toVisualColumn",value:function(e){return this.hot.runHooks("unmodifyCol",e)}},{key:"toVisual",value:function(e,t){return(0,r.isObject)(e)?{row:this.toVisualRow(e.row),column:this.toVisualColumn(e.column)}:[this.toVisualRow(e),this.toVisualColumn(t)]}},{key:"toPhysicalRow",value:function(e){return this.hot.runHooks("modifyRow",e)}},{key:"toPhysicalColumn",value:function(e){return this.hot.runHooks("modifyCol",e)}},{key:"toPhysical",value:function(e,t){return(0,r.isObject)(e)?{row:this.toPhysicalRow(e.row),column:this.toPhysicalColumn(e.column)}:[this.toPhysicalRow(e),this.toPhysicalColumn(t)]}}]),e}();t.RecordTranslator=l;var d=new WeakMap,c=new WeakMap},function(e,t,n){"use strict";t.__esModule=!0,t.registerAsRootInstance=function(e){i.set(e,!0)},t.hasValidParameter=function(e){return e===o},t.isRootInstance=function(e){return i.has(e)};var i=t.holder=new WeakMap,o=t.rootInstanceSymbol=Symbol("rootInstance")},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(11),a=n(2);function s(){}s.prototype={licenseKey:"trial",data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:void 0,colHeaders:null,colWidths:void 0,rowHeights:void 0,columns:void 0,cells:void 0,cell:[],comments:!1,customBorders:!1,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,allowInsertRow:!0,allowInsertColumn:!0,allowRemoveRow:!0,allowRemoveColumn:!0,selectionMode:"multiple",fillHandle:{autoInsertRow:!1},fixedRowsTop:0,fixedRowsBottom:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!0,autoWrapCol:!0,persistentState:void 0,currentRowClassName:void 0,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",activeHeaderClassName:"ht__active_highlight",className:void 0,tableClassName:void 0,stretchH:"none",isEmptyRow:function(e){var t,n,s,r;for(t=0,n=this.countCols();t<n;t++)if(""!==(s=this.getDataAtCell(e,t))&&null!==s&&(0,o.isDefined)(s))return"object"===(void 0===s?"undefined":i(s))&&(r=this.getCellMeta(e,t),(0,a.isObjectEqual)(this.getSchema()[r.prop],s));return!0},isEmptyCol:function(e){var t,n,i;for(t=0,n=this.countRows();t<n;t++)if(""!==(i=this.getDataAtCell(t,e))&&null!==i&&(0,o.isDefined)(i))return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,allowEmpty:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",renderer:void 0,commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,skipColumnOnPaste:!1,search:!1,type:"text",copyable:!0,editor:void 0,autoComplete:void 0,visibleRows:10,trimDropdown:!0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,copyPaste:!0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,mergeCells:!1,viewportRowRenderingOffset:"auto",viewportColumnRenderingOffset:"auto",validator:void 0,disableVisualSelection:!1,sortIndicator:void 0,manualColumnFreeze:void 0,trimWhitespace:!0,settings:void 0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,label:void 0,numericFormat:void 0,language:void 0,selectOptions:void 0,autoColumnSize:void 0,autoRowSize:void 0,dateFormat:void 0,correctFormat:!1,defaultDate:void 0,strict:void 0,allowHtml:!1,renderAllRows:void 0,preventOverflow:!1,bindRowsWithHeaders:void 0,collapsibleColumns:void 0,columnSummary:void 0,dropdownMenu:void 0,filters:void 0,formulas:void 0,ganttChart:void 0,headerTooltips:void 0,hiddenColumns:void 0,hiddenRows:void 0,nestedHeaders:void 0,trimRows:void 0,rowHeaderWidth:void 0,columnHeaderHeight:void 0,observeChanges:void 0,sortFunction:void 0,sortByRelevance:!0,filter:!0,filteringCaseSensitive:!1,dragToScroll:!0},t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.getTranslatedPhrase=function(e,t,n){var r=(0,o.getLanguageDictionary)(e);if(null===r)return null;var l=r[t];if((0,s.isUndefined)(l))return null;var d=function(e,t){var n=e;return(0,i.arrayEach)((0,a.getPhraseFormatters)(),(function(i){n=i(e,t)})),n}(l,n);return Array.isArray(d)?d[0]:d};var i=n(1),o=n(71),a=n(270),s=n(11)},function(e,t,n){"use strict";t.__esModule=!0;var i,o,a=(i=['Language with code "','" was not found. You should register particular language \n    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.'],o=['Language with code "','" was not found. You should register particular language \n    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.'],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));t.extendNotExistingKeys=function(e,t){return(0,r.objectEach)(t,(function(t,n){(0,s.isUndefined)(e[n])&&(e[n]=t)})),e},t.createCellHeadersRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;if(e>t){var o=[i,n];n=o[0],i=o[1]}return n+"-"+i},t.normalizeLanguageCode=u,t.applyLanguageSetting=function(e,t){var n=u(t);(0,c.hasLanguageDictionary)(n)?e.language=n:(e.language=c.DEFAULT_LANGUAGE_CODE,h(t))},t.warnUserAboutLanguageRegistration=h;var s=n(11),r=n(2),l=n(58),d=n(42),c=n(71);function u(e){var t=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(e);return t?t[1].toLowerCase()+"-"+t[2].toUpperCase():e}function h(e){(0,s.isDefined)(e)&&(0,l.error)((0,d.toSingleLine)(a,e))}},function(e,t,n){"use strict";t.__esModule=!0,t.stopObserving=t.startObserving=t.isPressedCtrlKey=t.isPressed=t._resetState=t._getRefCount=void 0;var i,o=n(6),a=(i=o)&&i.__esModule?i:{default:i},s=n(21);n(1);var r=new a.default,l=new Set,d=0;function c(){r.clearEvents(),l.clear(),d=0}t._getRefCount=function(){return d},t._resetState=c,t.isPressed=function(e){return Array.from(l.values()).some((function(t){return(0,s.isKey)(t,e)}))},t.isPressedCtrlKey=function(){return Array.from(l.values()).some((function(e){return(0,s.isCtrlMetaKey)(e)}))},t.startObserving=function(){0===d&&(r.addEventListener(document,"keydown",(function(e){l.has(e.keyCode)||l.add(e.keyCode)})),r.addEventListener(document,"keyup",(function(e){l.has(e.keyCode)&&l.delete(e.keyCode)})),r.addEventListener(document,"visibilitychange",(function(){document.hidden&&l.clear()}))),d+=1},t.stopObserving=function(){d>0&&(d-=1),0===d&&c()}},function(e,t,n){"use strict";t.__esModule=!0,t.HEADER_TYPE=t.FILL_TYPE=t.CELL_TYPE=t.AREA_TYPE=t.ACTIVE_HEADER_TYPE=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(273),a=n(1);function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=t.ACTIVE_HEADER_TYPE="active-header",l=t.AREA_TYPE="area",d=t.CELL_TYPE="cell",c=t.FILL_TYPE="fill",u=t.HEADER_TYPE="header",h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.layerLevel=0,this.cell=(0,o.createHighlight)(d,t),this.fill=(0,o.createHighlight)(c,t),this.areas=new Map,this.headers=new Map,this.activeHeaders=new Map,this.borders=[]}return i(e,[{key:"isEnabledFor",value:function(e){var t=this.options.disableHighlight;return"current"===e&&(e=d),"string"==typeof t&&(t=[t]),!1===t||Array.isArray(t)&&!t.includes(e)}},{key:"useLayerLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.layerLevel=e,this}},{key:"getCell",value:function(){return this.cell}},{key:"getFill",value:function(){return this.fill}},{key:"createOrGetArea",value:function(){var e=this.layerLevel,t=void 0;return this.areas.has(e)?t=this.areas.get(e):(t=(0,o.createHighlight)(l,Object.assign({layerLevel:e},this.options)),this.areas.set(e,t)),t}},{key:"getAreas",value:function(){return[].concat(s(this.areas.values()))}},{key:"createOrGetHeader",value:function(){var e=this.layerLevel,t=void 0;return this.headers.has(e)?t=this.headers.get(e):(t=(0,o.createHighlight)(u,Object.assign({},this.options)),this.headers.set(e,t)),t}},{key:"getHeaders",value:function(){return[].concat(s(this.headers.values()))}},{key:"createOrGetActiveHeader",value:function(){var e=this.layerLevel,t=void 0;return this.activeHeaders.has(e)?t=this.activeHeaders.get(e):(t=(0,o.createHighlight)(r,Object.assign({},this.options)),this.activeHeaders.set(e,t)),t}},{key:"getActiveHeaders",value:function(){return[].concat(s(this.activeHeaders.values()))}},{key:"clear",value:function(){this.cell.clear(),this.fill.clear(),(0,a.arrayEach)(this.areas.values(),(function(e){e.clear()})),(0,a.arrayEach)(this.headers.values(),(function(e){e.clear()})),(0,a.arrayEach)(this.activeHeaders.values(),(function(e){e.clear()}))}},{key:Symbol.iterator,value:function(){return[this.cell,this.fill].concat(s(this.areas.values()),s(this.headers.values()),s(this.activeHeaders.values()),s(this.borders))[Symbol.iterator]()}}]),e}();t.default=h},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),a=n(5),s=n(11),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.samples=null,this.dataFactory=t,this.customSampleCount=null,this.allowDuplicates=!1}return i(e,null,[{key:"SAMPLE_COUNT",get:function(){return 3}}]),i(e,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:e.SAMPLE_COUNT}},{key:"setSampleCount",value:function(e){this.customSampleCount=e}},{key:"setAllowDuplicates",value:function(e){this.allowDuplicates=e}},{key:"generateRowSamples",value:function(e,t){return this.generateSamples("row",t,e)}},{key:"generateColumnSamples",value:function(e,t){return this.generateSamples("col",t,e)}},{key:"generateSamples",value:function(e,t,n){var i=this,o=new Map;return"number"==typeof n&&(n={from:n,to:n}),(0,a.rangeEach)(n.from,n.to,(function(n){var a=i.generateSample(e,t,n);o.set(n,a)})),o}},{key:"generateSample",value:function(e,t,n){var i=this,r=new Map,l=[],d=void 0;return(0,a.rangeEach)(t.from,t.to,(function(t){var a=void 0;if("row"===e)a=i.dataFactory(n,t);else{if("col"!==e)throw new Error("Unsupported sample type");a=i.dataFactory(t,n)}d=(0,o.isObject)(a)?Object.keys(a).length:Array.isArray(a)?a.length:(0,s.stringify)(a).length,r.has(d)||r.set(d,{needed:i.getSampleCount(),strings:[]});var c=r.get(d);if(c.needed&&(!(l.indexOf(a)>-1)||i.allowDuplicates)){var u="row"===e?"col":"row";c.strings.push(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({value:a},u,t)),l.push(a),c.needed--}})),r}}]),e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(5),a="px",s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this._element=null,this.state=0}return i(e,[{key:"appendTo",value:function(e){e.appendChild(this._element),this.state=2}},{key:"build",value:function(){this._element=document.createElement("div"),this.state=1}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(e,t){(0,o.isNumeric)(e)&&(this._element.style.top=e+a),(0,o.isNumeric)(t)&&(this._element.style.left=t+a)}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(e,t){(0,o.isNumeric)(e)&&(this._element.style.width=e+a),(0,o.isNumeric)(t)&&(this._element.style.height=t+a)}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(e,t){(0,o.isNumeric)(e)&&(this._element.style.marginTop=e+a),(0,o.isNumeric)(t)&&(this._element.style.marginLeft=t+a)}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}]),e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o="px",a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this._element=null,this.state=0}return i(e,[{key:"appendTo",value:function(e){e.appendChild(this._element),this.state=2}},{key:"build",value:function(){this._element=document.createElement("div"),this.state=1}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(e,t){void 0!==e&&(this._element.style.top=e+o),void 0!==t&&(this._element.style.left=t+o)}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(e,t){e&&(this._element.style.width=e+o),t&&(this._element.style.height=t+o)}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(e,t){e&&(this._element.style.marginTop=e+o),t&&(this._element.style.marginLeft=t+o)}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}]),e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.applySpanProperties=function(e,t,n,i){t?t.row===n&&t.col===i?(e.setAttribute("rowspan",t.rowspan.toString()),e.setAttribute("colspan",t.colspan.toString())):(e.removeAttribute("rowspan"),e.removeAttribute("colspan"),e.style.display="none"):(e.removeAttribute("rowspan"),e.removeAttribute("colspan"),e.style.display="")}},function(e,t,n){"use strict";var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},s=Error;!function(e){var t=function(e){if(c(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);for(var i in t=[],e)e.hasOwnProperty(i)&&t.push(i);return t};function n(e,i){switch(void 0===e?"undefined":o(e)){case"undefined":case"boolean":case"string":case"number":return e===i;case"object":if(null===e)return null===i;if(c(e)){if(!c(i)||e.length!==i.length)return!1;for(var a=0,s=e.length;a<s;a++)if(!n(e[a],i[a]))return!1;return!0}var r=t(i).length;if(t(e).length!==r)return!1;for(a=0;a<r;a++)if(!n(e[a],i[a]))return!1;return!0;default:return!1}}var i={add:function(e,t){return e[t]=this.value,!0},remove:function(e,t){return delete e[t],!0},replace:function(e,t){return e[t]=this.value,!0},move:function(e,t,n){var i={op:"_get",path:this.from};return g(n,[i]),g(n,[{op:"remove",path:this.from}]),g(n,[{op:"add",path:this.path,value:i.value}]),!0},copy:function(e,t,n){var i={op:"_get",path:this.from};return g(n,[i]),g(n,[{op:"add",path:this.path,value:i.value}]),!0},test:function(e,t){return n(e[t],this.value)},_get:function(e,t){this.value=e[t]}},r={add:function(e,t){return e.splice(t,0,this.value),!0},remove:function(e,t){return e.splice(t,1),!0},replace:function(e,t){return e[t]=this.value,!0},move:i.move,copy:i.copy,test:i.test,_get:i._get},l={add:function(e){for(var t in l.remove.call(this,e),this.value)this.value.hasOwnProperty(t)&&(e[t]=this.value[t]);return!0},remove:function(e){for(var t in e)e.hasOwnProperty(t)&&i.remove.call(this,e,t);return!0},replace:function(e){return g(e,[{op:"remove",path:this.path}]),g(e,[{op:"add",path:this.path,value:this.value}]),!0},move:i.move,copy:i.copy,test:function(e){return JSON.stringify(e)===JSON.stringify(this.value)},_get:function(e){this.value=e}};function d(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}var c,u=[],h=function(e){this.observers=[],this.obj=e},p=function(e,t){this.callback=e,this.observer=t};function f(e){return"object"===(void 0===e?"undefined":o(e))?JSON.parse(JSON.stringify(e)):e}function m(e){for(var t,n=0,i=u.length;n<i;n++)if(u[n].obj===e.object){t=u[n];break}_(t.value,e.object,e.patches,""),e.patches.length&&g(t.value,e.patches);var o=e.patches;return o.length>0&&(e.patches=[],e.callback&&e.callback(o)),o}function _(e,n,i,a){for(var s=t(n),r=t(e),l=!1,c=r.length-1;c>=0;c--){var u=e[p=r[c]];if(n.hasOwnProperty(p)){var h=n[p];"object"==(void 0===u?"undefined":o(u))&&null!=u&&"object"==(void 0===h?"undefined":o(h))&&null!=h?_(u,h,i,a+"/"+d(p)):u!=h&&i.push({op:"replace",path:a+"/"+d(p),value:f(h)})}else i.push({op:"remove",path:a+"/"+d(p)}),l=!0}if(l||s.length!=r.length)for(c=0;c<s.length;c++){var p=s[c];e.hasOwnProperty(p)||i.push({op:"add",path:a+"/"+d(p),value:f(n[p])})}}function v(e){for(var t,n=0,i=e.length;n<i;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function g(e,t,n){for(var o,a,s=!1,d=0,u=t.length;d<u;){o=t[d],d++;for(var h=(o.path||"").split("/"),p=e,f=1,m=h.length,_=void 0;;){if(a=h[f],n&&void 0===_&&(void 0===p[a]?_=h.slice(0,f).join("/"):f==m-1&&(_=o.path),void 0!==_&&this.validator(o,d-1,e,_)),f++,void 0===a&&f>=m){s=l[o.op].call(o,p,a,e);break}if(c(p)){if("-"===a)a=p.length;else{if(n&&!v(a))throw new y("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",d-1,o.path,o);a=parseInt(a,10)}if(f>=m){if(n&&"add"===o.op&&a>p.length)throw new y("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",d-1,o.path,o);s=r[o.op].call(o,p,a,e);break}}else if(a&&-1!=a.indexOf("~")&&(a=a.replace(/~1/g,"/").replace(/~0/g,"~")),f>=m){s=i[o.op].call(o,p,a,e);break}p=p[a]}}return s}e.unobserve=function(e,t){t.unobserve()},e.observe=function(e,t){var n,i=function(e){for(var t=0,n=u.length;t<n;t++)if(u[t].obj===e)return u[t]}(e);if(i?n=function(e,t){for(var n=0,i=e.observers.length;n<i;n++)if(e.observers[n].callback===t)return e.observers[n].observer}(i,t):(i=new h(e),u.push(i)),n)return n;if(n={},i.value=f(e),t){n.callback=t,n.next=null;var o=this.intervals||[100,1e3,1e4,6e4];if(void 0===o.push)throw new s("jsonpatch.intervals must be an array");var a=0,r=function(){m(n)},l=function(){clearTimeout(n.next),n.next=setTimeout((function(){r(),a=0,n.next=setTimeout(d,o[a++])}),0)},d=function e(){r(),a==o.length&&(a=o.length-1),n.next=setTimeout(e,o[a++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",l),window.addEventListener("mouseup",l),window.addEventListener("keydown",l)):(document.documentElement.attachEvent("onmousedown",l),document.documentElement.attachEvent("onmouseup",l),document.documentElement.attachEvent("onkeydown",l))),n.next=setTimeout(d,o[a++])}return n.patches=[],n.object=e,n.unobserve=function(){m(n),clearTimeout(n.next),function(e,t){for(var n=0,i=e.observers.length;n<i;n++)if(e.observers[n].observer===t)return void e.observers.splice(n,1)}(i,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mousedown",l),window.removeEventListener("mouseup",l),window.removeEventListener("keydown",l)):(document.documentElement.detachEvent("onmousedown",l),document.documentElement.detachEvent("onmouseup",l),document.documentElement.detachEvent("onkeydown",l)))},i.observers.push(new p(t,n)),n},e.generate=m,c=Array.isArray?Array.isArray:function(e){return e.push&&"number"==typeof e.length},e.apply=g,e.compare=function(e,t){var n=[];return _(e,t,n,""),n};var y=function(e){function t(t,n,i,o,a){e.call(this,t),this.message=t,this.name=n,this.index=i,this.operation=o,this.tree=a}return a(t,e),t}(s);function b(e){if(void 0===e)return!0;if("array"==typeof e||"object"==(void 0===e?"undefined":o(e)))for(var t in e)if(b(e[t]))return!0;return!1}e.JsonPatchError=y,e.Error=y,e.validator=function(t,n,a,s){if("object"!==(void 0===t?"undefined":o(t))||null===t||c(t))throw new y("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,t,a);if(!i[t.op])throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,t,a);if("string"!=typeof t.path)throw new y("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,t,a);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new y("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,t,a);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,t,a);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&b(t.value))throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,t,a);if(a)if("add"==t.op){var r=t.path.split("/").length,l=s.split("/").length;if(r!==l+1&&r!==l)throw new y("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,t,a)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==s)throw new y("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,t,a)}else if("move"===t.op||"copy"===t.op){var d={op:"_get",path:t.from,value:void 0},u=e.validate([d],a);if(u&&"OPERATION_PATH_UNRESOLVABLE"===u.name)throw new y("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,t,a)}},e.validate=function(e,t){try{if(!c(e))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)t=JSON.parse(JSON.stringify(t)),g.call(this,t,e,!0);else for(var n=0;n<e.length;n++)this.validator(e[n],n)}catch(e){if(e instanceof y)return e;throw e}}}(i||(i={})),t.apply=i.apply,t.observe=i.observe,t.unobserve=i.unobserve,t.generate=i.generate,t.compare=i.compare,t.validate=i.validate,t.validator=i.validator,t.JsonPatchError=i.JsonPatchError,t.Error=i.Error},function(e,t,n){"use strict";t.__esModule=!0,n(98),n(113),n(114),n(118),n(119),n(121),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(143),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(86),n(158),n(159),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(169),n(170),n(171),n(173),n(174),n(175),n(225),n(226),n(227);var i=n(17),o=n(14),a=n(28),s=n(88),r=R(n(89)),l=R(n(282)),d=n(6),c=R(d),u=R(n(16)),h=R(n(93)),p=P(n(1)),f=P(n(27)),m=P(n(91)),_=P(n(191)),v=P(n(41)),g=P(n(43)),y=P(n(11)),b=P(n(5)),w=P(n(2)),k=P(n(90)),C=P(n(36)),x=P(n(21)),S=P(n(0)),M=P(n(13)),T=P(n(283)),L=n(8),D=R(n(196)),E=n(195),O=n(197),A=P(n(7)),I=n(71);function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function R(e){return e&&e.__esModule?e:{default:e}}function j(e,t){var n=new r.default(e,t||{},E.rootInstanceSymbol);return n.init(),n}(0,l.default)(j),j.Core=r.default,j.DefaultSettings=D.default,j.EventManager=c.default,j._getListenersCounter=d.getListenersCounter,j.buildDate="12/06/2018 11:47:13",j.packageName="handsontable",j.version="4.0.0",j.hooks=u.default.getSingleton(),j.__GhostTable=h.default;var Y=[p,f,m,_,v,g,y,b,w,k,C,x],H=[S,M];j.helper={},j.dom={},p.arrayEach(Y,(function(e){p.arrayEach(Object.getOwnPropertyNames(e),(function(t){"_"!==t.charAt(0)&&(j.helper[t]=e[t])}))})),p.arrayEach(H,(function(e){p.arrayEach(Object.getOwnPropertyNames(e),(function(t){"_"!==t.charAt(0)&&(j.dom[t]=e[t])}))})),j.cellTypes={},p.arrayEach((0,s.getRegisteredCellTypeNames)(),(function(e){j.cellTypes[e]=(0,s.getCellType)(e)})),j.cellTypes.registerCellType=s.registerCellType,j.cellTypes.getCellType=s.getCellType,j.editors={},p.arrayEach((0,i.getRegisteredEditorNames)(),(function(e){j.editors[C.toUpperCaseFirst(e)+"Editor"]=(0,i.getEditor)(e)})),j.editors.registerEditor=i.registerEditor,j.editors.getEditor=i.getEditor,j.renderers={},p.arrayEach((0,o.getRegisteredRendererNames)(),(function(e){var t=(0,o.getRenderer)(e);"base"===e&&(j.renderers.cellDecorator=t),j.renderers[C.toUpperCaseFirst(e)+"Renderer"]=t})),j.renderers.registerRenderer=o.registerRenderer,j.renderers.getRenderer=o.getRenderer,j.validators={},p.arrayEach((0,a.getRegisteredValidatorNames)(),(function(e){j.validators[C.toUpperCaseFirst(e)+"Validator"]=(0,a.getValidator)(e)})),j.validators.registerValidator=a.registerValidator,j.validators.getValidator=a.getValidator,j.plugins={},p.arrayEach(Object.getOwnPropertyNames(T),(function(e){var t=T[e];"Base"===e?j.plugins[e+"Plugin"]=t:j.plugins[e]=t})),j.plugins.registerPlugin=L.registerPlugin,j.languages={},j.languages.dictionaryKeys=A,j.languages.getLanguageDictionary=I.getLanguageDictionary,j.languages.getLanguagesDictionaries=I.getLanguagesDictionaries,j.languages.registerLanguageDictionary=I.registerLanguageDictionary,j.languages.getTranslatedPhrase=function(){return O.getTranslatedPhrase.apply(void 0,arguments)},t.default=j},function(e,t,n){var i=n(20),o=n(18),a=n(37);e.exports=n(22)?Object.defineProperties:function(e,t){o(e);for(var n,s=a(t),r=s.length,l=0;r>l;)i.f(e,n=s[l++],t[n]);return e}},function(e,t,n){"use strict";var i=n(74),o=n(51),a=n(53),s={};n(31)(s,n(12)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=i(s,{next:o(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var i=n(9),o=n(112).set;e.exports=function(e,t,n){var a,s=t.constructor;return s!==n&&"function"==typeof s&&(a=s.prototype)!==n.prototype&&i(a)&&o&&o(e,a),e}},function(e,t,n){var i=n(211);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(9),o=n(115),a=n(12)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),i(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var i=n(18),o=n(63),a=n(12)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||null==(n=i(s)[a])?t:o(n)}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(15),o=n(80).set,a=i.MutationObserver||i.WebKitMutationObserver,s=i.process,r=i.Promise,l="process"==n(44)(s);e.exports=function(){var e,t,n,d=function(){var i,o;for(l&&(i=s.domain)&&i.exit();e;){o=e.fn,e=e.next;try{o()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(l)n=function(){s.nextTick(d)};else if(!a||i.navigator&&i.navigator.standalone)if(r&&r.resolve){var c=r.resolve(void 0);n=function(){c.then(d)}}else n=function(){o.call(i,d)};else{var u=!0,h=document.createTextNode("");new a(d).observe(h,{characterData:!0}),n=function(){h.data=u=!u}}return function(i){var o={fn:i,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(18),o=n(9),a=n(120);e.exports=function(e,t){if(i(e),o(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(15),o=n(39),a=n(49),s=n(122),r=n(20).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||r(t,e,{value:s.f(e)})}},function(e,t,n){var i=n(37),o=n(69),a=n(54);e.exports=function(e){var t=i(e),n=o.f;if(n)for(var s,r=n(e),l=a.f,d=0;r.length>d;)l.call(e,s=r[d++])&&t.push(s);return t}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var i=n(60),o=n(38);e.exports=function(e){return function(t,n){var a,s,r=String(o(t)),l=i(n),d=r.length;return l<0||l>=d?e?"":void 0:(a=r.charCodeAt(l))<55296||a>56319||l+1===d||(s=r.charCodeAt(l+1))<56320||s>57343?e?r.charAt(l):a:e?r.slice(l,l+2):s-56320+(a-55296<<10)+65536}}},function(e,t,n){"use strict";var i=n(18);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var i=n(33),o=n(61),a=n(25);e.exports=[].copyWithin||function(e,t){var n=i(this),s=a(n.length),r=o(e,s),l=o(t,s),d=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===d?s:o(d,s))-l,s-r),u=1;for(l<r&&r<l+c&&(u=-1,l+=c-1,r+=c-1);c-- >0;)l in n?n[r]=n[l]:delete n[r],r+=u,l+=u;return n}},function(e,t,n){"use strict";var i=n(33),o=n(61),a=n(25);e.exports=function(e){for(var t=i(this),n=a(t.length),s=arguments.length,r=o(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,d=void 0===l?n:o(l,n);d>r;)t[r++]=e;return t}},function(e,t,n){var i=n(82),o=n(69),a=n(18),s=n(15).Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(0),a=n(35),s=(i=a)&&i.__esModule?i:{default:i},r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clone=n.makeClone(s.default.CLONE_DEBUG),n.clone.wtTable.holder.style.opacity=.4,n.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",(0,o.addClass)(n.clone.wtTable.holder.parentNode,"wtDebugVisible"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(s.default);s.default.registerOverlay(s.default.CLONE_DEBUG,r),t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=n(35),r=(i=s)&&i.__esModule?i:{default:i},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clone=n.makeClone(r.default.CLONE_LEFT),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"shouldBeRendered",value:function(){return!(!this.wot.getSetting("fixedColumnsLeft")&&!this.wot.getSetting("rowHeaders").length)}},{key:"resetFixedPosition",value:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=0,n=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||n&&"horizontal"===n)t=this.getScrollPosition(),(0,a.resetCssTransform)(e);else{var i=this.wot.wtTable.hider.getBoundingClientRect(),o=Math.ceil(i.left),s=Math.ceil(i.right),r=void 0,l=void 0;l=""===(l=this.wot.wtTable.hider.style.top)?0:l,t=r=o<0&&s-e.offsetWidth>0?-o:0,r+="px",(0,a.setOverlayPosition)(e,r,l)}this.adjustHeaderBordersPosition(t),this.adjustElementsSize()}}},{key:"setScrollPosition",value:function(e){this.mainTableScrollableElement===window?window.scrollTo(e,(0,a.getWindowScrollTop)()):this.mainTableScrollableElement.scrollLeft=e}},{key:"onScroll",value:function(){this.wot.getSetting("onScrollVertically")}},{key:"sumCellSizes",value:function(e,t){for(var n=0,i=this.wot.wtSettings.defaultColumnWidth;e<t;)n+=this.wot.wtTable.getStretchedColumnWidth(e)||i,e++;return n}},{key:"adjustElementsSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||e)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize(),e||(this.areElementSizesAdjusted=!0))}},{key:"adjustRootElementSize",value:function(){var e,t=this.wot.wtTable.holder,n=t.clientHeight===t.offsetHeight?0:(0,a.getScrollbarWidth)(),i=this.clone.wtTable.holder.parentNode.style,o=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||"vertical"===o){var s=this.wot.wtViewport.getWorkspaceHeight()-n;s=Math.min(s,(0,a.innerHeight)(this.wot.wtTable.wtRootElement)),i.height=s+"px"}else i.height="";this.clone.wtTable.holder.style.height=i.height,e=(0,a.outerWidth)(this.clone.wtTable.TABLE),i.width=(0===e?e:e+4)+"px"}},{key:"adjustRootChildrenSize",value:function(){var e=(0,a.getScrollbarWidth)();this.clone.wtTable.hider.style.height=this.hider.style.height,this.clone.wtTable.holder.style.height=this.clone.wtTable.holder.parentNode.style.height,0===e&&(e=30),this.clone.wtTable.holder.style.width=parseInt(this.clone.wtTable.holder.parentNode.style.width,10)+e+"px"}},{key:"applyToDOM",value:function(){var e=this.wot.getSetting("totalColumns");if(this.areElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition)this.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px";else{if(0!==e)throw new Error("Incorrect value of the columnsRenderCalculator");this.spreader.style.left="0"}this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}},{key:"syncOverlayOffset",value:function(){"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.top=""}},{key:"scrollTo",value:function(e,t){var n=this.getTableParentOffset(),i=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,o=0;t&&i.offsetWidth!==i.clientWidth&&(o=(0,a.getScrollbarWidth)()),t?(n+=this.sumCellSizes(0,e+1),n-=this.wot.wtViewport.getViewportWidth()):n+=this.sumCellSizes(this.wot.getSetting("fixedColumnsLeft"),e),n+=o,this.setScrollPosition(n)}},{key:"getTableParentOffset",value:function(){var e=0;return this.wot.getSetting("preventOverflow")||this.trimmingContainer!==window||(e=this.wot.wtTable.holderOffset.left),e}},{key:"getScrollPosition",value:function(){return(0,a.getScrollLeft)(this.mainTableScrollableElement)}},{key:"adjustHeaderBordersPosition",value:function(e){var t=this.wot.wtTable.holder.parentNode,n=this.wot.getSetting("rowHeaders"),i=this.wot.getSetting("fixedColumnsLeft");if(this.wot.getSetting("totalRows")?(0,a.removeClass)(t,"emptyRows"):(0,a.addClass)(t,"emptyRows"),i&&!n.length)(0,a.addClass)(t,"innerBorderLeft");else if(!i&&n.length){var o=(0,a.hasClass)(t,"innerBorderLeft");e?(0,a.addClass)(t,"innerBorderLeft"):(0,a.removeClass)(t,"innerBorderLeft"),(!o&&e||o&&!e)&&this.wot.wtOverlays.adjustElementsSize()}}}]),t}(r.default);r.default.registerOverlay(r.default.CLONE_LEFT,l),t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=n(1),r=n(35),l=(i=r)&&i.__esModule?i:{default:i},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clone=n.makeClone(l.default.CLONE_TOP),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"shouldBeRendered",value:function(){return!(!this.wot.getSetting("fixedRowsTop")&&!this.wot.getSetting("columnHeaders").length)}},{key:"resetFixedPosition",value:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=0,n=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||n&&"vertical"===n)t=this.getScrollPosition(),(0,a.resetCssTransform)(e);else{var i=this.wot.wtTable.hider.getBoundingClientRect(),o=Math.ceil(i.top),s=Math.ceil(i.bottom),r=void 0,l=void 0;r=""===(r=this.wot.wtTable.hider.style.left)?0:r,t=l=o<0&&s-e.offsetHeight>0?-o:0,l+="px",(0,a.setOverlayPosition)(e,r,l)}this.adjustHeaderBordersPosition(t),this.adjustElementsSize()}}},{key:"setScrollPosition",value:function(e){this.mainTableScrollableElement===window?window.scrollTo((0,a.getWindowScrollLeft)(),e):this.mainTableScrollableElement.scrollTop=e}},{key:"onScroll",value:function(){this.wot.getSetting("onScrollHorizontally")}},{key:"sumCellSizes",value:function(e,t){for(var n=0,i=this.wot.wtSettings.settings.defaultRowHeight;e<t;){var o=this.wot.wtTable.getRowHeight(e);n+=void 0===o?i:o,e++}return n}},{key:"adjustElementsSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||e)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize(),e||(this.areElementSizesAdjusted=!0))}},{key:"adjustRootElementSize",value:function(){var e,t=this.wot.wtTable.holder,n=t.clientWidth===t.offsetWidth?0:(0,a.getScrollbarWidth)(),i=this.clone.wtTable.holder.parentNode.style,o=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||"horizontal"===o){var s=this.wot.wtViewport.getWorkspaceWidth()-n;s=Math.min(s,(0,a.innerWidth)(this.wot.wtTable.wtRootElement)),i.width=s+"px"}else i.width="";this.clone.wtTable.holder.style.width=i.width,e=(0,a.outerHeight)(this.clone.wtTable.TABLE),i.height=(0===e?e:e+4)+"px"}},{key:"adjustRootChildrenSize",value:function(){var e=(0,a.getScrollbarWidth)();this.clone.wtTable.hider.style.width=this.hider.style.width,this.clone.wtTable.holder.style.width=this.clone.wtTable.holder.parentNode.style.width,0===e&&(e=30),this.clone.wtTable.holder.style.height=parseInt(this.clone.wtTable.holder.parentNode.style.height,10)+e+"px"}},{key:"applyToDOM",value:function(){var e=this.wot.getSetting("totalRows");if(this.areElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==e)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}},{key:"syncOverlayOffset",value:function(){"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.left=""}},{key:"scrollTo",value:function(e,t){var n=this.getTableParentOffset(),i=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,o=0;if(t&&i.offsetHeight!==i.clientHeight&&(o=(0,a.getScrollbarWidth)()),t){var s=this.wot.getSetting("fixedRowsBottom"),r=(this.wot.getSetting("fixedRowsTop"),this.wot.getSetting("totalRows"));n+=this.sumCellSizes(0,e+1),n-=this.wot.wtViewport.getViewportHeight()-this.sumCellSizes(r-s,r),n+=1}else n+=this.sumCellSizes(this.wot.getSetting("fixedRowsTop"),e);n+=o,this.setScrollPosition(n)}},{key:"getTableParentOffset",value:function(){return this.mainTableScrollableElement===window?this.wot.wtTable.holderOffset.top:0}},{key:"getScrollPosition",value:function(){return(0,a.getScrollTop)(this.mainTableScrollableElement)}},{key:"redrawSelectionBorders",value:function(e){if(e&&e.cellRange){var t=e.getBorder(this.wot),n=e.getCorners();t.disappear(),t.appear(n)}}},{key:"redrawAllSelectionsBorders",value:function(){var e=this,t=this.wot.selections;this.redrawSelectionBorders(t.getCell()),(0,s.arrayEach)(t.getAreas(),(function(t){e.redrawSelectionBorders(t)})),this.redrawSelectionBorders(t.getFill()),this.wot.wtTable.wot.wtOverlays.leftOverlay.refresh()}},{key:"adjustHeaderBordersPosition",value:function(e){var t=this.wot.wtTable.holder.parentNode;if(this.wot.getSetting("totalColumns")?(0,a.removeClass)(t,"emptyColumns"):(0,a.addClass)(t,"emptyColumns"),0===this.wot.getSetting("fixedRowsTop")&&this.wot.getSetting("columnHeaders").length>0){var n=(0,a.hasClass)(t,"innerBorderTop");e||0===this.wot.getSetting("totalRows")?(0,a.addClass)(t,"innerBorderTop"):(0,a.removeClass)(t,"innerBorderTop"),(!n&&e||n&&!e)&&(this.wot.wtOverlays.adjustElementsSize(),this.redrawAllSelectionsBorders())}if(0===this.wot.getSetting("rowHeaders").length){var i=this.clone.wtTable.THEAD.querySelectorAll("th:nth-of-type(2)");if(i)for(var o=0;o<i.length;o++)i[o].style["border-left-width"]=0}}}]),t}(l.default);l.default.registerOverlay(l.default.CLONE_TOP,d),t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=n(35),r=(i=s)&&i.__esModule?i:{default:i},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clone=n.makeClone(r.default.CLONE_TOP_LEFT_CORNER),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"shouldBeRendered",value:function(){return!(!this.wot.getSetting("fixedRowsTop")&&!this.wot.getSetting("columnHeaders").length||!this.wot.getSetting("fixedColumnsLeft")&&!this.wot.getSetting("rowHeaders").length)}},{key:"resetFixedPosition",value:function(){if(this.updateTrimmingContainer(),this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=(0,a.outerHeight)(this.clone.wtTable.TABLE),n=(0,a.outerWidth)(this.clone.wtTable.TABLE),i=this.wot.getSetting("preventOverflow");if(this.trimmingContainer===window){var o=this.wot.wtTable.hider.getBoundingClientRect(),s=Math.ceil(o.top),r=Math.ceil(o.left),l=Math.ceil(o.bottom),d=Math.ceil(o.right),c="0",u="0";i&&"vertical"!==i||r<0&&d-e.offsetWidth>0&&(c=-r+"px"),i&&"horizontal"!==i||s<0&&l-e.offsetHeight>0&&(u=-s+"px"),(0,a.setOverlayPosition)(e,c,u)}else(0,a.resetCssTransform)(e);e.style.height=(0===t?t:t+4)+"px",e.style.width=(0===n?n:n+4)+"px"}}}]),t}(r.default);r.default.registerOverlay(r.default.CLONE_TOP_LEFT_CORNER,l),t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),r=c(n(188)),l=c(n(56)),d=c(n(87));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=t,this.cellRange=n||null,this.instanceBorders={},this.classNames=[this.settings.className],this.classNameGenerator=this.linearClassNameGenerator(this.settings.className,this.settings.layerLevel)}return a(e,[{key:"getBorder",value:function(e){return this.instanceBorders[e.guid]||(this.instanceBorders[e.guid]=new r.default(e,this.settings)),this.instanceBorders[e.guid]}},{key:"isEmpty",value:function(){return null===this.cellRange}},{key:"add",value:function(e){return this.isEmpty()?this.cellRange=new d.default(e):this.cellRange.expand(e),this}},{key:"replace",value:function(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1}},{key:"clear",value:function(){return this.cellRange=null,this}},{key:"getCorners",value:function(){var e=this.cellRange.getTopLeftCorner(),t=this.cellRange.getBottomRightCorner();return[e.row,e.col,t.row,t.col]}},{key:"addClassAtCoords",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=e.wtTable.getCell(new l.default(t,n));return"object"===(void 0===r?"undefined":o(r))&&(a&&(i=this.classNameGenerator(r),this.classNames.includes(i)||this.classNames.push(i)),(0,s.addClass)(r,i)),this}},{key:"linearClassNameGenerator",value:function(e,t){return function n(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0===t||0===o)return e;var a=o>=0?o:t,r=0==(a-=1)?e:e+"-"+a;return(0,s.hasClass)(i,r)?e+"-"+(a+1):n(i,a)}}},{key:"draw",value:function(e){if(this.isEmpty())this.settings.border&&this.getBorder(e).disappear();else{for(var t=e.wtTable.getRenderedRowsCount(),n=e.wtTable.getRenderedColumnsCount(),o=this.getCorners(),a=i(o,4),r=a[0],l=a[1],d=a[2],c=a[3],u=0;u<n;u+=1){var h=e.wtTable.columnFilter.renderedToSource(u);if(h>=l&&h<=c){var p=e.wtTable.getColumnHeader(h);if(p){var f=[];this.settings.highlightHeaderClassName&&f.push(this.settings.highlightHeaderClassName),this.settings.highlightColumnClassName&&f.push(this.settings.highlightColumnClassName),(0,s.addClass)(p,f)}}}for(var m=0;m<t;m+=1){var _=e.wtTable.rowFilter.renderedToSource(m);if(_>=r&&_<=d){var v=e.wtTable.getRowHeader(_);if(v){var g=[];this.settings.highlightHeaderClassName&&g.push(this.settings.highlightHeaderClassName),this.settings.highlightRowClassName&&g.push(this.settings.highlightRowClassName),(0,s.addClass)(v,g)}}for(var y=0;y<n;y+=1){var b=e.wtTable.columnFilter.renderedToSource(y);_>=r&&_<=d&&b>=l&&b<=c?this.settings.className&&this.addClassAtCoords(e,_,b,this.settings.className,this.settings.markIntersections):_>=r&&_<=d?this.settings.highlightRowClassName&&this.addClassAtCoords(e,_,b,this.settings.highlightRowClassName):b>=l&&b<=c&&this.settings.highlightColumnClassName&&this.addClassAtCoords(e,_,b,this.settings.highlightColumnClassName);var w=e.getSetting("onAfterDrawSelection",_,b,o,this.settings.layerLevel);"string"==typeof w&&this.addClassAtCoords(e,_,b,w)}}e.getSetting("onBeforeDrawBorders",o,this.settings.className),this.settings.border&&this.getBorder(e).appear(o)}}}]),e}();t.default=u},function(e,t,n){"use strict";e.exports=function(){var e,t={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},n=document.body,i=document.createTextNode(""),o=document.createElement("SPAN"),a=function(e,t,n){e.addEventListener(t,n,!1)},s=function(e,t,n){e.removeEventListener(t,n,!1)},r=function(a){var s,r;a?/^[a-zA-Z \.,\\\/\|0-9]$/.test(a)||(a="."):a="",void 0!==i.textContent?i.textContent=e.value+a:i.data=e.value+a,o.style.fontSize=c(e).fontSize,o.style.fontFamily=c(e).fontFamily,o.style.whiteSpace="pre",n.appendChild(o),s=o.clientWidth+2,n.removeChild(o),e.style.height=t.minHeight+"px",t.minWidth>s?e.style.width=t.minWidth+"px":s>t.maxWidth?e.style.width=t.maxWidth+"px":e.style.width=s+"px",r=e.scrollHeight?e.scrollHeight-1:0,t.minHeight>r?e.style.height=t.minHeight+"px":t.maxHeight<r?(e.style.height=t.maxHeight+"px",e.style.overflowY="visible"):e.style.height=r+"px"},l=function(){window.setTimeout(r,0)},d=function(n,s,d){e=n,function(n){if(n&&n.minHeight)if("inherit"==n.minHeight)t.minHeight=e.clientHeight;else{var a=parseInt(n.minHeight);isNaN(a)||(t.minHeight=a)}if(n&&n.maxHeight)if("inherit"==n.maxHeight)t.maxHeight=e.clientHeight;else{var s=parseInt(n.maxHeight);isNaN(s)||(t.maxHeight=s)}if(n&&n.minWidth)if("inherit"==n.minWidth)t.minWidth=e.clientWidth;else{var r=parseInt(n.minWidth);isNaN(r)||(t.minWidth=r)}if(n&&n.maxWidth)if("inherit"==n.maxWidth)t.maxWidth=e.clientWidth;else{var l=parseInt(n.maxWidth);isNaN(l)||(t.maxWidth=l)}o.firstChild||(o.className="autoResize",o.style.display="inline-block",o.appendChild(i))}(s),"TEXTAREA"==e.nodeName&&(e.style.resize="none",e.style.overflowY="",e.style.height=t.minHeight+"px",e.style.minWidth=t.minWidth+"px",e.style.maxWidth=t.maxWidth+"px",e.style.overflowY="hidden"),d&&(a(e,"change",r),a(e,"cut",l),a(e,"paste",l),a(e,"drop",l),a(e,"keydown",l),a(e,"focus",r),a(e,"compositionstart",l),a(e,"compositionupdate",l),a(e,"compositionend",l)),r()};function c(e){return e.currentStyle||document.defaultView.getComputedStyle(e)}return{init:function(e,t,n){d(e,t,n)},unObserve:function(){s(e,"change",r),s(e,"cut",l),s(e,"paste",l),s(e,"drop",l),s(e,"keydown",l),s(e,"focus",r),s(e,"compositionstart",l),s(e,"compositionupdate",l),s(e,"compositionend",l)},resize:r}}},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(55),s=(i=a)&&i.__esModule?i:{default:i},r=n(0),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"beginEditing",value:function(e,t){if(t&&"mouseup"===t.type){var n=this.TD.querySelector('input[type="checkbox"]');(0,r.hasClass)(n,"htBadValue")||n.click()}}},{key:"finishEditing",value:function(){}},{key:"init",value:function(){}},{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"getValue",value:function(){}},{key:"setValue",value:function(){}},{key:"focus",value:function(){}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=h(n(57)),s=h(n(236));n(237);var r=n(0),l=n(2),d=h(n(6)),c=n(21),u=n(13);function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaultDateFormat="DD/MM/YYYY",n.isCellEdited=!1,n.parentDestroyed=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"init",value:function(){var e=this;if("function"!=typeof a.default)throw new Error("You need to include moment.js to your project.");if("function"!=typeof s.default)throw new Error("You need to include Pikaday to your project.");o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.instance.addHook("afterDestroy",(function(){e.parentDestroyed=!0,e.destroyElements()}))}},{key:"createElements",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createElements",this).call(this),this.datePicker=document.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,(0,r.addClass)(this.datePicker,"htDatepickerHolder"),document.body.appendChild(this.datePicker),this.$datePicker=new s.default(this.getDatePickerConfig()),new d.default(this).addEventListener(this.datePicker,"mousedown",(function(e){return(0,u.stopPropagation)(e)})),this.hideDatepicker()}},{key:"destroyElements",value:function(){this.$datePicker.destroy()}},{key:"prepare",value:function(e,n,i,a,s,r){this._opened=!1,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepare",this).call(this,e,n,i,a,s,r)}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"open",this).call(this),this.showDatepicker(e)}},{key:"close",value:function(){var e=this;this._opened=!1,this.instance._registerTimeout((function(){e.instance._refreshBorders()})),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"close",this).call(this)}},{key:"finishEditing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var i=this.originalValue;void 0!==i&&this.setValue(i)}this.hideDatepicker(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"finishEditing",this).call(this,e,n)}},{key:"showDatepicker",value:function(e){this.$datePicker.config(this.getDatePickerConfig());var t=this.TD.getBoundingClientRect(),n=this.cellProperties.dateFormat||this.defaultDateFormat,i=this.$datePicker.config(),o=void 0,s=this.instance.view.isMouseDown(),l=!!e&&(0,c.isMetaKey)(e.keyCode);this.datePickerStyle.top=window.pageYOffset+t.top+(0,r.outerHeight)(this.TD)+"px",this.datePickerStyle.left=window.pageXOffset+t.left+"px",this.$datePicker._onInputFocus=function(){},i.format=n,this.originalValue?(o=this.originalValue,(0,a.default)(o,n,!0).isValid()&&this.$datePicker.setMoment((0,a.default)(o,n),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),l||s||this.setValue("")):this.cellProperties.defaultDate?(o=this.cellProperties.defaultDate,i.defaultDate=o,(0,a.default)(o,n,!0).isValid()&&this.$datePicker.setMoment((0,a.default)(o,n),!0),l||s||this.setValue("")):this.$datePicker.gotoToday(),this.datePickerStyle.display="block",this.$datePicker.show()}},{key:"hideDatepicker",value:function(){this.datePickerStyle.display="none",this.$datePicker.hide()}},{key:"getDatePickerConfig",value:function(){var e=this,t=this.TEXTAREA,n={};this.cellProperties&&this.cellProperties.datePickerConfig&&(0,l.deepExtend)(n,this.cellProperties.datePickerConfig);var i=n.onSelect,o=n.onClose;return n.field=t,n.trigger=t,n.container=this.datePicker,n.bound=!1,n.format=n.format||this.defaultDateFormat,n.reposition=n.reposition||!1,n.onSelect=function(t){isNaN(t.getTime())||(t=(0,a.default)(t).format(e.cellProperties.dateFormat||e.defaultDateFormat)),e.setValue(t),e.hideDatepicker(),i&&i()},n.onClose=function(){e.parentDestroyed||e.finishEditing(!1),o&&o()},n}}]),t}(h(n(59)).default);t.default=p},function(e,t){e.exports=n},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=r(n(189)),s=r(n(16));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"prepare",value:function(e,n,i,a,s,r){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepare",this).call(this,e,n,i,a,s,r),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}]),t}(a.default);s.default.getSingleton().add("beforeValidate",(function(e,t,n,i){var o=this.getCellMeta(t,this.propToCol(n));o.editor===l&&void 0===o.strict&&(o.filter=!1,o.strict=!0)})),t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(59),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((i=o)&&i.__esModule?i:{default:i}).default);t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=n(0),r=n(59),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"createElements",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createElements",this).call(this),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,(0,s.empty)(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}]),t}(((i=r)&&i.__esModule?i:{default:i}).default);t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(0),s=n(13),r=n(21),l=n(55),d=(i=l)&&i.__esModule?i:{default:i},c=d.default.prototype.extend();c.prototype.init=function(){this.select=document.createElement("SELECT"),(0,a.addClass)(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement.appendChild(this.select),this.registerHooks()},c.prototype.registerHooks=function(){var e=this;this.instance.addHook("afterScrollHorizontally",(function(){return e.refreshDimensions()})),this.instance.addHook("afterScrollVertically",(function(){return e.refreshDimensions()})),this.instance.addHook("afterColumnResize",(function(){return e.refreshDimensions()})),this.instance.addHook("afterRowResize",(function(){return e.refreshDimensions()}))},c.prototype.prepare=function(){d.default.prototype.prepare.apply(this,arguments);var e,t=this.cellProperties.selectOptions;for(var n in e="function"==typeof t?this.prepareOptions(t(this.row,this.col,this.prop)):this.prepareOptions(t),(0,a.empty)(this.select),e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=document.createElement("OPTION");i.value=n,(0,a.fastInnerHTML)(i,e[n]),this.select.appendChild(i)}},c.prototype.prepareOptions=function(e){var t={};if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t[e[n]]=e[n];else"object"==(void 0===e?"undefined":o(e))&&(t=e);return t},c.prototype.getValue=function(){return this.select.value},c.prototype.setValue=function(e){this.select.value=e};var u=function(e){var t=this.getActiveEditor();switch(e.keyCode){case r.KEY_CODES.ARROW_UP:var n=t.select.selectedIndex-1;n>=0&&(t.select[n].selected=!0),(0,s.stopImmediatePropagation)(e),e.preventDefault();break;case r.KEY_CODES.ARROW_DOWN:var i=t.select.selectedIndex+1;i<=t.select.length-1&&(t.select[i].selected=!0),(0,s.stopImmediatePropagation)(e),e.preventDefault()}};c.prototype.open=function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.instance.addHook("beforeKeyDown",u)},c.prototype.close=function(){this._opened=!1,this.select.style.display="none",this.instance.removeHook("beforeKeyDown",u)},c.prototype.focus=function(){this.select.focus()},c.prototype.refreshValue=function(){var e=this.instance.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()},c.prototype.refreshDimensions=function(){if(this.state===l.EditorState.EDITING)if(this.TD=this.getEditedCell(),this.TD){var e,t=(0,a.outerWidth)(this.TD)+1,n=(0,a.outerHeight)(this.TD)+1,i=(0,a.offset)(this.TD),o=(0,a.offset)(this.instance.rootElement),s=(0,a.getScrollableElement)(this.TD),r=i.top-o.top-1-(s.scrollTop||0),d=i.left-o.left-1-(s.scrollLeft||0),c=this.checkEditorSection(),u=this.instance.getSettings();switch(u.rowHeaders,u.colHeaders,c){case"top":e=(0,a.getCssTransform)(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":e=(0,a.getCssTransform)(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":e=(0,a.getCssTransform)(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":e=(0,a.getCssTransform)(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":e=(0,a.getCssTransform)(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode)}0===this.instance.getSelectedLast()[0]&&(r+=1),0===this.instance.getSelectedLast()[1]&&(d+=1);var h=this.select.style;e&&-1!=e?h[e[0]]=e[1]:(0,a.resetCssTransform)(this.select);var p=(0,a.getComputedStyle)(this.TD);parseInt(p.borderTopWidth,10)>0&&(n-=1),parseInt(p.borderLeftWidth,10)>0&&(t-=1),h.height=n+"px",h.minWidth=t+"px",h.top=r+"px",h.left=d+"px",h.margin="0px"}else this.close()},c.prototype.getEditedCell=function(){var e;switch(this.checkEditorSection()){case"top":e=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=101;break;case"corner":e=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=103;break;case"left":e=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=102;break;default:e=this.instance.getCell(this.row,this.col),this.select.style.zIndex=""}return-1!=e&&-2!=e?e:void 0},t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e,t,n,o,a,s,r){var l=[],d=[];r.className&&(t.className?t.className=t.className+" "+r.className:t.className=r.className),r.readOnly&&l.push(r.readOnlyCellClassName),!1===r.valid&&r.invalidCellClassName?l.push(r.invalidCellClassName):d.push(r.invalidCellClassName),!1===r.wordWrap&&r.noWordWrapClassName&&l.push(r.noWordWrapClassName),!s&&r.placeholder&&l.push(r.placeholderCellClassName),(0,i.removeClass)(t,d),(0,i.addClass)(t,l)}},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(0),a=n(6),s=(i=a)&&i.__esModule?i:{default:i},r=n(4),l=n(14),d=document.createElement("DIV");d.className="htAutocompleteWrapper";var c=document.createElement("DIV");c.className="htAutocompleteArrow",c.appendChild(document.createTextNode(String.fromCharCode(9660))),t.default=function(e,t,n,i,a,u,h){d.cloneNode(!0);var p=c.cloneNode(!0);if(h.allowHtml?(0,l.getRenderer)("html").apply(this,arguments):(0,l.getRenderer)("text").apply(this,arguments),t.appendChild(p),(0,o.addClass)(t,"htAutocomplete"),t.firstChild||t.appendChild(document.createTextNode(String.fromCharCode(160))),!e.acArrowListener){var f=new s.default(e);e.acArrowListener=function(a){(0,o.hasClass)(a.target,"htAutocompleteArrow")&&e.view.wt.getSetting("onCellDblClick",null,new r.CellCoords(n,i),t)},f.addEventListener(e.rootElement,"mousedown",e.acArrowListener),e.addHookOnce("afterDestroy",(function(){f.destroy()}))}}},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(0),a=n(36),s=n(6),r=(i=s)&&i.__esModule?i:{default:i},l=n(21),d=n(43),c=n(13),u=n(14),h=new WeakMap,p=new WeakMap;function f(e){return"INPUT"===e.tagName&&"checkbox"===e.getAttribute("type")}t.default=function(e,t,n,i,s,m,_){(0,u.getRenderer)("base").apply(this,arguments),function(e){var t=p.get(e);t||((t=new r.default(e)).addEventListener(e.rootElement,"click",(function(t){return function(e,t){if(!f(e.target))return!1;var n=parseInt(e.target.getAttribute("data-row"),10),i=parseInt(e.target.getAttribute("data-col"),10),o=t.getCellMeta(n,i);o.readOnly&&e.preventDefault()}(t,e)})),t.addEventListener(e.rootElement,"mouseup",(function(t){return function(e,t){f(e.target)&&setTimeout(t.listen,10)}(t,e)})),t.addEventListener(e.rootElement,"change",(function(t){return function(e,t){if(!f(e.target))return!1;var n=parseInt(e.target.getAttribute("data-row"),10),i=parseInt(e.target.getAttribute("data-col"),10),o=t.getCellMeta(n,i);if(!o.readOnly){var a=null;a=e.target.checked?void 0===o.uncheckedTemplate||o.checkedTemplate:void 0!==o.uncheckedTemplate&&o.uncheckedTemplate,t.setDataAtCell(n,i,a)}}(t,e)})),p.set(e,t))}(e);var v=function(){var e=document.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("autocomplete","off"),e.setAttribute("tabindex","-1"),e.cloneNode(!1)}(),g=_.label,y=!1;if(void 0===_.checkedTemplate&&(_.checkedTemplate=!0),void 0===_.uncheckedTemplate&&(_.uncheckedTemplate=!1),(0,o.empty)(t),m===_.checkedTemplate||(0,a.equalsIgnoreCase)(m,_.checkedTemplate)?v.checked=!0:m===_.uncheckedTemplate||(0,a.equalsIgnoreCase)(m,_.uncheckedTemplate)?v.checked=!1:null===m?(0,o.addClass)(v,"noValue"):(v.style.display="none",(0,o.addClass)(v,"htBadValue"),y=!0),v.setAttribute("data-row",n),v.setAttribute("data-col",i),!y&&g){var b="";g.value?b="function"==typeof g.value?g.value.call(this,n,i,s,m):g.value:g.property&&(b=e.getDataAtRowProp(n,g.property));var w=function(e){var t=document.createElement("label");return t.className="htCheckboxRendererLabel",t.appendChild(document.createTextNode(e)),t.cloneNode(!0)}(b);"before"===g.position?w.appendChild(v):w.insertBefore(v,w.firstChild),v=w}function k(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getSelectedRangeLast();if(n){for(var i=n.getTopLeftCorner(),o=i.row,a=i.col,s=n.getBottomRightCorner(),r=s.row,l=s.col,d=[],c=o;c<=r;c+=1)for(var u=a;u<=l;u+=1){var h=e.getCellMeta(c,u);if("checkbox"!==h.type)return;if(!0!==h.readOnly){void 0===h.checkedTemplate&&(h.checkedTemplate=!0),void 0===h.uncheckedTemplate&&(h.uncheckedTemplate=!1);var p=e.getDataAtCell(c,u);!1===t?[h.checkedTemplate,h.checkedTemplate.toString()].includes(p)?d.push([c,u,h.uncheckedTemplate]):[h.uncheckedTemplate,h.uncheckedTemplate.toString(),null,void 0].includes(p)&&d.push([c,u,h.checkedTemplate]):d.push([c,u,h.uncheckedTemplate])}}d.length>0&&e.setDataAtCell(d)}}t.appendChild(v),y&&t.appendChild(document.createTextNode("#bad-value#")),h.has(e)||(h.set(e,!0),e.addHook("beforeKeyDown",(function(t){var n="SPACE|ENTER",i="DELETE|BACKSPACE",o=(0,d.partial)(l.isKey,t.keyCode);o(n+"|"+i)&&!(0,c.isImmediatePropagationStopped)(t)&&function(t){var n=e.getSelectedRangeLast();if(n)for(var i=n.getTopLeftCorner(),o=n.getBottomRightCorner(),a=i.row;a<=o.row;a++)for(var s=i.col;s<=o.col;s++){var r=e.getCellMeta(a,s);if("checkbox"!==r.type)return;var l=e.getCell(a,s);if(null==l)t(a,s,r);else{var d=l.querySelectorAll("input[type=checkbox]");d.length>0&&!r.readOnly&&t(d)}}}((function(){(0,c.stopImmediatePropagation)(t),t.preventDefault()})),o(n)&&k(),o(i)&&k(!0)})))}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0),o=n(14);t.default=function(e,t,n,a,s,r,l){(0,o.getRenderer)("base").apply(this,arguments),null==r&&(r=""),(0,i.fastInnerHTML)(t,r)}},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(247),a=(i=o)&&i.__esModule?i:{default:i},s=n(14),r=n(5);t.default=function(e,t,n,i,o,l,d){if((0,r.isNumeric)(l)){var c=d.numericFormat,u=c&&c.culture||"-",h=c&&c.pattern,p=d.className||"",f=p.length?p.split(" "):[];if(void 0!==u&&!a.default.languages()[u]){var m=u.replace("-",""),_=a.default.allLanguages?a.default.allLanguages[u]:a.default[m];_&&a.default.registerLanguage(_)}a.default.setLanguage(u),l=(0,a.default)(l).format(h||"0"),f.indexOf("htLeft")<0&&f.indexOf("htCenter")<0&&f.indexOf("htRight")<0&&f.indexOf("htJustify")<0&&f.push("htRight"),f.indexOf("htNumeric")<0&&f.push("htNumeric"),d.className=f.join(" ")}(0,s.getRenderer)("text")(e,t,n,i,o,l,d)}},function(e,n){e.exports=t},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0),o=n(14),a=n(5);t.default=function(e,t,n,s,r,l,d){(0,o.getRenderer)("text").apply(this,arguments),l=t.innerHTML;var c=d.hashLength||l.length,u=d.hashSymbol||"*",h="";(0,a.rangeEach)(c-1,(function(){h+=u})),(0,i.fastInnerHTML)(t,h)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0),o=n(11),a=n(14);t.default=function(e,t,n,s,r,l,d){(0,a.getRenderer)("base").apply(this,arguments),!l&&d.placeholder&&(l=d.placeholder);var c=(0,o.stringify)(l);if(e.getSettings().trimWhitespace||(c=c.replace(/ /g,String.fromCharCode(160))),d.rendererTemplate){(0,i.empty)(t);var u=document.createElement("TEMPLATE");u.setAttribute("bind","{{}}"),u.innerHTML=d.rendererTemplate,HTMLTemplateElement.decorate(u),u.model=e.getSourceDataAtRow(n),t.appendChild(u)}else(0,i.fastInnerText)(t,c)}},function(e,t,n){"use strict";function i(e,t){var n=e;return function(e){for(var i=!1,o=0,a=e.length;o<a;o++)if(n===e[o]){i=!0;break}t(i)}}t.__esModule=!0,t.default=function(e,t){null==e&&(e=""),this.allowEmpty&&""===e?t(!0):this.strict&&this.source?"function"==typeof this.source?this.source(e,i(e,t)):i(e,t)(this.source):t(!0)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=!0,i=(0,r.getEditorInstance)("date",this.instance);null==e&&(e="");var o=(0,a.default)(new Date(e)).isValid()||(0,a.default)(e,i.defaultDateFormat).isValid(),s=(0,a.default)(e,this.dateFormat||i.defaultDateFormat,!0).isValid();if(this.allowEmpty&&""===e&&(o=!0,s=!0),o||(n=!1),!o&&s&&(n=!0),o&&!s)if(!0===this.correctFormat){var d=l(e,this.dateFormat),c=this.instance.runHooks("unmodifyRow",this.row),u=this.instance.runHooks("unmodifyCol",this.col);this.instance.setDataAtCell(c,u,d,"dateValidator"),n=!0}else n=!1;t(n)},t.correctFormat=l;var i,o=n(57),a=(i=o)&&i.__esModule?i:{default:i},s=n(191),r=n(17);function l(e,t){var n=(0,a.default)((0,s.getNormalizedDate)(e)),i=(0,a.default)(e,t),o=e.search(/[A-z]/g)>-1;return(n.isValid()&&n.format("x")===i.format("x")||!i.isValid()||o?n:i).format(t)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){null==e&&(e=""),this.allowEmpty&&""===e?t(!0):t(""!==e&&/^-?\d*(\.|,)?\d*$/.test(e))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=!0,i=this.timeFormat||"h:mm:ss a";null===e&&(e=""),e=/^\d{3,}$/.test(e)?parseInt(e,10):e;var o=/^\d{1,2}$/.test(e);o&&(e+=":00");var r=(0,a.default)(e,s,!0).isValid()?(0,a.default)(e):(0,a.default)(e,i),l=r.isValid(),d=(0,a.default)(e,i,!0).isValid()&&!o;if(this.allowEmpty&&""===e&&(l=!0,d=!0),l||(n=!1),!l&&d&&(n=!0),l&&!d)if(!0===this.correctFormat){var c=r.format(i),u=this.instance.runHooks("unmodifyRow",this.row),h=this.instance.runHooks("unmodifyCol",this.col);this.instance.setDataAtCell(u,h,c,"timeValidator"),n=!0}else n=!1;t(n)};var i,o=n(57),a=(i=o)&&i.__esModule?i:{default:i},s=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"]},function(e,t,n){"use strict";t.__esModule=!0;var i=n(17),o=n(14),a=n(28),s="autocomplete";t.default={editor:(0,i.getEditor)(s),renderer:(0,o.getRenderer)(s),validator:(0,a.getValidator)(s)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(17),o=n(14),a="checkbox";t.default={editor:(0,i.getEditor)(a),renderer:(0,o.getRenderer)(a)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(17),o=n(14),a=n(28),s="date";t.default={editor:(0,i.getEditor)(s),renderer:(0,o.getRenderer)("autocomplete"),validator:(0,a.getValidator)(s)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(17),o=n(14),a=n(28);t.default={editor:(0,i.getEditor)("dropdown"),renderer:(0,o.getRenderer)("autocomplete"),validator:(0,a.getValidator)("autocomplete")}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(17),o=n(14);t.default={editor:(0,i.getEditor)("handsontable"),renderer:(0,o.getRenderer)("autocomplete")}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(17),o=n(14),a=n(28),s="numeric";t.default={editor:(0,i.getEditor)(s),renderer:(0,o.getRenderer)(s),validator:(0,a.getValidator)(s),dataType:"number"}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(17),o=n(14),a=(n(28),"password");t.default={editor:(0,i.getEditor)(a),renderer:(0,o.getRenderer)(a),copyable:!1}},function(e,t,n){"use strict";t.__esModule=!0,n(27);var i=n(17),o=n(14),a="text";t.default={editor:(0,i.getEditor)(a),renderer:(0,o.getRenderer)(a)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(17),o=n(14),a=n(28);t.default={editor:(0,i.getEditor)("text"),renderer:(0,o.getRenderer)("text"),validator:(0,a.getValidator)("time")}},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=h(n(192)),a=n(91),s=n(90),r=n(2),l=n(1),d=h(n(264)),c=n(5),u=h(n(265));function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){var i=this;this.instance=e,this.priv=t,this.GridSettings=n,this.dataSource=this.instance.getSettings().data,this.cachedLength=null,this.skipCache=!1,this.latestSourceRowsCount=0,this.dataSource&&this.dataSource[0]?this.duckSchema=this.recursiveDuckSchema(this.dataSource[0]):this.duckSchema={},this.createMap(),this.interval=d.default.create((function(){return i.clearLengthCache()}),"15fps"),this.instance.addHook("skipLengthCache",(function(e){return i.onSkipLengthCache(e)})),this.onSkipLengthCache(500)}h(n(16)),p.prototype.DESTINATION_RENDERER=1,p.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,p.prototype.recursiveDuckSchema=function(e){return(0,r.duckSchema)(e)},p.prototype.recursiveDuckColumns=function(e,t,n){var o,a;if(void 0===t&&(t=0,n=""),"object"===(void 0===e?"undefined":i(e))&&!Array.isArray(e))for(a in e)(0,r.hasOwnProperty)(e,a)&&(null===e[a]?(o=n+a,this.colToPropCache.push(o),this.propToColCache.set(o,t),t++):t=this.recursiveDuckColumns(e[a],t,a+"."));return t},p.prototype.createMap=function(){var e=void 0,t=this.getSchema();if(void 0===t)throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");this.colToPropCache=[],this.propToColCache=new u.default;var n=this.instance.getSettings().columns;if(n){var i=this.instance.getSettings().maxCols,o=Math.min(i,n.length),a=0,s=!1,l=(0,r.deepObjectSize)(t);for("function"==typeof n&&(o=l>0?l:this.instance.countSourceCols(),s=!0),e=0;e<o;e++){var d=s?n(e):n[e];if((0,r.isObject)(d)){if(void 0!==d.data){var c=s?a:e;this.colToPropCache[c]=d.data,this.propToColCache.set(d.data,c)}a++}}}else this.recursiveDuckColumns(t)},p.prototype.colToProp=function(e){return e=this.instance.runHooks("modifyCol",e),!isNaN(e)&&this.colToPropCache&&void 0!==this.colToPropCache[e]?this.colToPropCache[e]:e},p.prototype.propToCol=function(e){var t;return t=void 0===this.propToColCache.get(e)?e:this.propToColCache.get(e),t=this.instance.runHooks("unmodifyCol",t)},p.prototype.getSchema=function(){var e=this.instance.getSettings().dataSchema;return e?"function"==typeof e?e():e:this.duckSchema},p.prototype.createRow=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments[2],o=0;if(("number"!=typeof e||e>=this.instance.countSourceRows())&&(e=this.instance.countSourceRows()),!1===this.instance.runHooks("beforeCreateRow",e,n,i))return 0;for(var a=this.instance.getSettings().maxRows,s=this.instance.countCols(),l=function(){var n=null;"array"===t.instance.dataType?t.instance.getSettings().dataSchema?n=(0,r.deepClone)(t.getSchema()):(n=[],(0,c.rangeEach)(s-1,(function(){return n.push(null)}))):"function"===t.instance.dataType?n=t.instance.getSettings().dataSchema(e):(n={},(0,r.deepExtend)(n,t.getSchema())),e===t.instance.countSourceRows()?t.dataSource.push(n):t.spliceData(e,0,n),o++};o<n&&this.instance.countSourceRows()<a;)l();return this.instance.runHooks("afterCreateRow",e,o,i),this.instance.forceFullRender=!0,o},p.prototype.createCol=function(e,t,n){if(!this.instance.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var i,o,a=this.instance.countSourceRows(),r=this.dataSource,l=0;t||(t=1),("number"!=typeof e||e>=this.instance.countCols())&&(e=this.instance.countCols()),this.instance.runHooks("beforeCreateCol",e,t,n),o=e;for(var d=this.instance.getSettings().maxCols;l<t&&this.instance.countCols()<d;){if(i=(0,s.columnFactory)(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof e||e>=this.instance.countCols()){if(a>0)for(var c=0;c<a;c++)void 0===r[c]&&(r[c]=[]),r[c].push(null);else r.push([null]);this.priv.columnSettings.push(i)}else{for(var u=0;u<a;u++)r[u].splice(o,0,null);this.priv.columnSettings.splice(o,0,i)}l++,o++}return this.instance.runHooks("afterCreateCol",e,l,n),this.instance.forceFullRender=!0,l},p.prototype.removeRow=function(e,t,n){t||(t=1),"number"!=typeof e&&(e=-t),t=this.instance.runHooks("modifyRemovedAmount",t,e),e=(this.instance.countSourceRows()+e)%this.instance.countSourceRows();var i=this.visualRowsToPhysical(e,t);if(!1!==this.instance.runHooks("beforeRemoveRow",e,t,i,n)){var o,a=this.dataSource;(o=this.filterData(e,t))&&(a.length=0,Array.prototype.push.apply(a,o)),this.instance.runHooks("afterRemoveRow",e,t,i,n),this.instance.forceFullRender=!0}},p.prototype.removeCol=function(e,t,n){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");t||(t=1),"number"!=typeof e&&(e=-t),e=(this.instance.countCols()+e)%this.instance.countCols();var i=this.visualColumnsToPhysical(e,t),o=i.slice(0).sort((function(e,t){return t-e}));if(!1!==this.instance.runHooks("beforeRemoveCol",e,t,i,n)){for(var a=!0,s=o.length,r=this.dataSource,l=0;l<s;l++)a&&i[0]!==i[l]-l&&(a=!1);if(a)for(var d=0,c=this.instance.countSourceRows();d<c;d++)r[d].splice(i[0],t);else{for(var u=0,h=this.instance.countSourceRows();u<h;u++)for(var p=0;p<s;p++)r[u].splice(o[p],1);for(var f=0;f<s;f++)this.priv.columnSettings.splice(i[f],1)}this.instance.runHooks("afterRemoveCol",e,t,i,n),this.instance.forceFullRender=!0}},p.prototype.spliceCol=function(e,t,n){var i=arguments.length>=4?[].slice.call(arguments,3):[],o=this.instance.getDataAtCol(e),a=o.slice(t,t+n),s=o.slice(t+n);(0,l.extendArray)(i,s);for(var r=0;r<n;)i.push(null),r++;return(0,l.to2dArray)(i),this.instance.populateFromArray(t,e,i,null,null,"spliceCol"),a},p.prototype.spliceRow=function(e,t,n){var i=arguments.length>=4?[].slice.call(arguments,3):[],o=this.instance.getSourceDataAtRow(e),a=o.slice(t,t+n),s=o.slice(t+n);(0,l.extendArray)(i,s);for(var r=0;r<n;)i.push(null),r++;return this.instance.populateFromArray(e,t,[i],null,null,"spliceRow"),a},p.prototype.spliceData=function(e,t,n){!1!==this.instance.runHooks("beforeDataSplice",e,t,n)&&this.dataSource.splice(e,t,n)},p.prototype.filterData=function(e,t){var n=this.visualRowsToPhysical(e,t);if(!1!==this.instance.runHooks("beforeDataFilter",e,t,n)){var i=this.dataSource.filter((function(e,t){return-1==n.indexOf(t)}));return i}},p.prototype.get=function(e,t){e=this.instance.runHooks("modifyRow",e);var n=this.dataSource[e],i=this.instance.runHooks("modifyRowData",e),o=null;if((n=isNaN(i)?i:n)&&n.hasOwnProperty&&(0,r.hasOwnProperty)(n,t))o=n[t];else if("string"==typeof t&&t.indexOf(".")>-1){var a=t.split("."),s=n;if(!s)return null;for(var l=0,d=a.length;l<d;l++)if(void 0===(s=s[a[l]]))return null;o=s}else"function"==typeof t&&(o=t(this.dataSource.slice(e,e+1)[0]));if(this.instance.hasHook("modifyData")){var c=(0,r.createObjectPropListener)(o);this.instance.runHooks("modifyData",e,this.propToCol(t),c,"get"),c.isTouched()&&(o=c.value)}return o};var f=(0,a.cellMethodLookupFactory)("copyable",!1);p.prototype.getCopyable=function(e,t){return f.call(this.instance,e,this.propToCol(t))?this.get(e,t):""},p.prototype.set=function(e,t,n,i){e=this.instance.runHooks("modifyRow",e,i||"datamapGet");var o=this.dataSource[e],a=this.instance.runHooks("modifyRowData",e);if(o=isNaN(a)?a:o,this.instance.hasHook("modifyData")){var s=(0,r.createObjectPropListener)(n);this.instance.runHooks("modifyData",e,this.propToCol(t),s,"set"),s.isTouched()&&(n=s.value)}if(o&&o.hasOwnProperty&&(0,r.hasOwnProperty)(o,t))o[t]=n;else if("string"==typeof t&&t.indexOf(".")>-1){var l,d=t.split("."),c=o,u=0;for(u=0,l=d.length-1;u<l;u++)void 0===c[d[u]]&&(c[d[u]]={}),c=c[d[u]];c[d[u]]=n}else"function"==typeof t?t(this.dataSource.slice(e,e+1)[0],n):o[t]=n},p.prototype.visualRowsToPhysical=function(e,t){for(var n,i=this.instance.countSourceRows(),o=(i+e)%i,a=[],s=t;o<i&&s;)n=this.instance.runHooks("modifyRow",o),a.push(n),s--,o++;return a},p.prototype.visualColumnsToPhysical=function(e,t){for(var n=this.instance.countCols(),i=(n+e)%n,o=[],a=t;i<n&&a;){var s=this.instance.runHooks("modifyCol",i);o.push(s),a--,i++}return o},p.prototype.clear=function(){for(var e=0;e<this.instance.countSourceRows();e++)for(var t=0;t<this.instance.countCols();t++)this.set(e,this.colToProp(t),"")},p.prototype.clearLengthCache=function(){this.cachedLength=null},p.prototype.getLength=function(){var e=this,t=void 0,n=this.instance.getSettings().maxRows;t=n<0||0===n?0:n||1/0;var i=this.instance.countSourceRows();if(this.instance.hasHook("modifyRow")){var o=this.skipCache;this.interval.start(),i!==this.latestSourceRowsCount&&(o=!0),this.latestSourceRowsCount=i,null===this.cachedLength||o?((0,c.rangeEach)(i-1,(function(t){null===(t=e.instance.runHooks("modifyRow",t))&&--i})),this.cachedLength=i):i=this.cachedLength}else this.interval.stop();return Math.min(i,t)},p.prototype.getAll=function(){var e={row:0,col:0},t={row:Math.max(this.instance.countSourceRows()-1,0),col:Math.max(this.instance.countCols()-1,0)};return e.row-t.row!=0||this.instance.countSourceRows()?this.getRange(e,t,p.prototype.DESTINATION_RENDERER):[]},p.prototype.getRange=function(e,t,n){var i,o,a,s,r,l=[],d=this.instance.getSettings().maxRows,c=this.instance.getSettings().maxCols;if(0===d||0===c)return[];var u=n===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(o=Math.min(Math.max(d-1,0),Math.max(e.row,t.row)),s=Math.min(Math.max(c-1,0),Math.max(e.col,t.col)),i=Math.min(e.row,t.row);i<=o;i++){r=[];var h=this.instance.runHooks("modifyRow",i);for(a=Math.min(e.col,t.col);a<=s&&null!==h;a++)r.push(u.call(this,i,this.colToProp(a)));null!==h&&l.push(r)}return l},p.prototype.getText=function(e,t){return o.default.stringify(this.getRange(e,t,this.DESTINATION_RENDERER))},p.prototype.getCopyableText=function(e,t){return o.default.stringify(this.getRange(e,t,this.DESTINATION_CLIPBOARD_GENERATOR))},p.prototype.onSkipLengthCache=function(e){var t=this;this.skipCache=!0,setTimeout((function(){t.skipCache=!1}),e)},p.prototype.destroy=function(){this.interval.stop(),this.interval=null,this.instance=null,this.priv=null,this.GridSettings=null,this.dataSource=null,this.cachedLength=null,this.duckSchema=null},t.default=p},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.parseDelay=s;var o=n(41),a=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timer=null,this.func=t,this.delay=s(n),this.stopped=!0,this._then=null,this._callback=function(){return i.__callback()}}return i(e,null,[{key:"create",value:function(t,n){return new e(t,n)}}]),i(e,[{key:"start",value:function(){return this.stopped&&(this._then=Date.now(),this.stopped=!1,this.timer=(0,o.requestAnimationFrame)(this._callback)),this}},{key:"stop",value:function(){return this.stopped||(this.stopped=!0,(0,o.cancelAnimationFrame)(this.timer),this.timer=null),this}},{key:"__callback",value:function(){if(this.timer=(0,o.requestAnimationFrame)(this._callback),this.delay){var e=Date.now(),t=e-this._then;t>this.delay&&(this._then=e-t%this.delay,this.func())}else this.func()}}]),e}();function s(e){return"string"==typeof e&&/fps$/.test(e)&&(e=1e3/parseInt(e.replace("fps","")||0,10)),e}t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(){var e={arrayMap:[],weakMap:new WeakMap};return{get:function(i){return t(i)?e.arrayMap[i]:n(i)?e.weakMap.get(i):void 0},set:function(i,o){if(t(i))e.arrayMap[i]=o;else{if(!n(i))throw new Error("Invalid key type");e.weakMap.set(i,o)}},delete:function(i){t(i)?delete e.arrayMap[i]:n(i)&&e.weakMap.delete(i)}};function t(e){return null!==e&&!function(e){return e!=e}(e)&&("string"==typeof e||"number"==typeof e)}function n(e){return null!==e&&("object"==(void 0===e?"undefined":i(e))||"function"==typeof e)}}},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(4),a=n(21),s=n(13),r=n(17),l=n(6),d=(i=l)&&i.__esModule?i:{default:i},c=n(55);function u(e,t,n){var i,l,u=this,h=!1,p=!1;function f(e){var i="function"==typeof t.settings.enterMoves?t.settings.enterMoves(event):t.settings.enterMoves;e?n.transformStart(-i.row,-i.col):n.transformStart(i.row,i.col,!0)}function m(i){if(e.isListening()&&(e.runHooks("beforeKeyDown",i),!h&&229!==i.keyCode&&!(0,s.isImmediatePropagationStopped)(i)&&(t.lastKeyCode=i.keyCode,n.isSelected()))){var r=(i.ctrlKey||i.metaKey)&&!i.altKey;if(!l||l.isWaiting()||(0,a.isMetaKey)(i.keyCode)||(0,a.isCtrlMetaKey)(i.keyCode)||r||u.isEditorOpened()){var d=i.shiftKey?n.setRangeEnd:n.setRangeStart,p=void 0;switch(i.keyCode){case a.KEY_CODES.A:!u.isEditorOpened()&&r&&(e.selectAll(),i.preventDefault(),(0,s.stopPropagation)(i));break;case a.KEY_CODES.ARROW_UP:u.isEditorOpened()&&!l.isWaiting()&&u.closeEditorAndSaveChanges(r),i.shiftKey?n.transformEnd(-1,0):n.transformStart(-1,0),i.preventDefault(),(0,s.stopPropagation)(i);break;case a.KEY_CODES.ARROW_DOWN:u.isEditorOpened()&&!l.isWaiting()&&u.closeEditorAndSaveChanges(r),function(e){e?n.transformEnd(1,0):n.transformStart(1,0)}(i.shiftKey),i.preventDefault(),(0,s.stopPropagation)(i);break;case a.KEY_CODES.ARROW_RIGHT:u.isEditorOpened()&&!l.isWaiting()&&u.closeEditorAndSaveChanges(r),function(e){e?n.transformEnd(0,1):n.transformStart(0,1)}(i.shiftKey),i.preventDefault(),(0,s.stopPropagation)(i);break;case a.KEY_CODES.ARROW_LEFT:u.isEditorOpened()&&!l.isWaiting()&&u.closeEditorAndSaveChanges(r),function(e){e?n.transformEnd(0,-1):n.transformStart(0,-1)}(i.shiftKey),i.preventDefault(),(0,s.stopPropagation)(i);break;case a.KEY_CODES.TAB:p="function"==typeof t.settings.tabMoves?t.settings.tabMoves(i):t.settings.tabMoves,i.shiftKey?n.transformStart(-p.row,-p.col):n.transformStart(p.row,p.col,!0),i.preventDefault(),(0,s.stopPropagation)(i);break;case a.KEY_CODES.BACKSPACE:case a.KEY_CODES.DELETE:e.emptySelectedCells(),u.prepareEditor(),i.preventDefault();break;case a.KEY_CODES.F2:l&&l.enableFullEditMode(),u.openEditor(null,i),i.preventDefault();break;case a.KEY_CODES.ENTER:u.isEditorOpened()?(l&&l.state!==c.EditorState.WAITING&&u.closeEditorAndSaveChanges(r),f(i.shiftKey)):e.getSettings().enterBeginsEditing?(l&&l.enableFullEditMode(),u.openEditor(null,i)):f(i.shiftKey),i.preventDefault(),(0,s.stopImmediatePropagation)(i);break;case a.KEY_CODES.ESCAPE:u.isEditorOpened()&&(u.closeEditorAndRestoreOriginalValue(r),l.focus()),i.preventDefault();break;case a.KEY_CODES.HOME:i.ctrlKey||i.metaKey?d.call(n,new o.CellCoords(0,n.selectedRange.current().from.col)):d.call(n,new o.CellCoords(n.selectedRange.current().from.row,0)),i.preventDefault(),(0,s.stopPropagation)(i);break;case a.KEY_CODES.END:i.ctrlKey||i.metaKey?d.call(n,new o.CellCoords(e.countRows()-1,n.selectedRange.current().from.col)):d.call(n,new o.CellCoords(n.selectedRange.current().from.row,e.countCols()-1)),i.preventDefault(),(0,s.stopPropagation)(i);break;case a.KEY_CODES.PAGE_UP:n.transformStart(-e.countVisibleRows(),0),i.preventDefault(),(0,s.stopPropagation)(i);break;case a.KEY_CODES.PAGE_DOWN:n.transformStart(e.countVisibleRows(),0),i.preventDefault(),(0,s.stopPropagation)(i)}}else u.openEditor("",i)}}i=new d.default(e),this.lockEditor=function(){p=!0},this.unlockEditor=function(){p=!1},this.destroyEditor=function(e){p||this.closeEditor(e)},this.getActiveEditor=function(){return l},this.prepareEditor=function(){var t,n,i,o,a,s,d;p||(l&&l.isWaiting()?this.closeEditor(!1,!1,(function(e){e&&u.prepareEditor()})):(t=e.selection.selectedRange.current().highlight.row,n=e.selection.selectedRange.current().highlight.col,i=e.colToProp(n),o=e.getCell(t,n),a=e.getSourceDataAtCell(e.runHooks("modifyRow",t),n),s=e.getCellMeta(t,n),(d=e.getCellEditor(s))?(l=(0,r.getEditorInstance)(d,e)).prepare(t,n,i,o,a,s):l=void 0))},this.isEditorOpened=function(){return l&&l.isOpened()},this.openEditor=function(e,t){l&&(l.cellProperties.readOnly?t&&t.keyCode===a.KEY_CODES.ENTER&&f():l.beginEditing(e,t))},this.closeEditor=function(e,t,n){l?l.finishEditing(e,t,n):n&&n(!1)},this.closeEditorAndSaveChanges=function(e){return this.closeEditor(!1,e)},this.closeEditorAndRestoreOriginalValue=function(e){return this.closeEditor(!0,e)},this.destroy=function(){h=!0},e.addHook("afterDocumentKeyDown",m),i.addEventListener(document.documentElement,"keydown",(function(t){h||e.runHooks("afterDocumentKeyDown",t)})),i.addEventListener(document.documentElement,"compositionstart",(function(t){!h&&l&&!l.isOpened()&&e.isListening()&&u.openEditor("",t)})),e.view.wt.update("onCellDblClick",(function(e,t,n){"TD"===n.nodeName&&(l&&l.enableFullEditMode(),u.openEditor(null,e))}))}var h=new WeakMap;u.getInstance=function(e,t,n,i){var o=h.get(e);return o||(o=new u(e,t,n,i),h.set(e,o)),o},t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=(n(27),d(n(6))),s=n(13),r=d(n(4)),l=n(193);function d(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=this,n=this;this.eventManager=new a.default(e),this.instance=e,this.settings=e.getSettings(),this.selectionMouseDown=!1;var i=e.rootElement.getAttribute("style");i&&e.rootElement.setAttribute("data-originalstyle",i),(0,o.addClass)(e.rootElement,"handsontable");var d,c=document.createElement("TABLE");(0,o.addClass)(c,"htCore"),e.getSettings().tableClassName&&(0,o.addClass)(c,e.getSettings().tableClassName),this.THEAD=document.createElement("THEAD"),c.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),c.appendChild(this.TBODY),e.table=c,e.container.insertBefore(c,e.container.firstChild),this.eventManager.addEventListener(e.rootElement,"mousedown",(function(e){t.selectionMouseDown=!0,n.isTextSelectionAllowed(e.target)||(u(),e.preventDefault(),window.focus())})),this.eventManager.addEventListener(e.rootElement,"mouseup",(function(e){t.selectionMouseDown=!1})),this.eventManager.addEventListener(e.rootElement,"mousemove",(function(e){t.selectionMouseDown&&!n.isTextSelectionAllowed(e.target)&&(t.settings.fragmentSelection&&u(),e.preventDefault())})),this.eventManager.addEventListener(document.documentElement,"keyup",(function(t){e.selection.isInProgress()&&!t.shiftKey&&e.selection.finish()})),this.isMouseDown=function(){return d},this.eventManager.addEventListener(document.documentElement,"mouseup",(function(t){e.selection.isInProgress()&&(0,s.isLeftClick)(t)&&e.selection.finish(),d=!1,((0,o.isOutsideInput)(document.activeElement)||!e.selection.isSelected()&&!(0,s.isRightClick)(t))&&e.unlisten()})),this.eventManager.addEventListener(document.documentElement,"touchend",(function(){e.selection.isInProgress()&&e.selection.finish()})),this.eventManager.addEventListener(document.documentElement,"mousedown",(function(t){var i=t.target,a=t.target,s=t.x||t.clientX,r=t.y||t.clientY;if(!d&&e.rootElement){if(a===e.view.wt.wtTable.holder){var l=(0,o.getScrollbarWidth)();if(document.elementFromPoint(s+l,r)!==e.view.wt.wtTable.holder||document.elementFromPoint(s,r+l)!==e.view.wt.wtTable.holder)return}else for(;a!==document.documentElement;){if(null===a){if(t.isTargetWebComponent)break;return}if(a===e.rootElement)return;a=a.parentNode}("function"==typeof n.settings.outsideClickDeselects?n.settings.outsideClickDeselects(i):n.settings.outsideClickDeselects)?e.deselectCell():e.destroyEditor(!1,!1)}})),this.eventManager.addEventListener(c,"selectstart",(function(e){n.settings.fragmentSelection||(0,o.isInput)(e.target)||e.preventDefault()}));var u=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},h={debug:function(){return n.settings.debug},externalRowCalculator:this.instance.getPlugin("autoRowSize")&&this.instance.getPlugin("autoRowSize").isEnabled(),table:c,preventOverflow:function(){return t.settings.preventOverflow},stretchH:function(){return n.settings.stretchH},data:e.getDataAtCell,totalRows:function(){return e.countRows()},totalColumns:function(){return e.countCols()},fixedColumnsLeft:function(){return n.settings.fixedColumnsLeft},fixedRowsTop:function(){return n.settings.fixedRowsTop},fixedRowsBottom:function(){return n.settings.fixedRowsBottom},minSpareRows:function(){return n.settings.minSpareRows},renderAllRows:n.settings.renderAllRows,rowHeaders:function(){var t=[];return e.hasRowHeaders()&&t.push((function(e,t){return n.appendRowHeader(e,t)})),e.runHooks("afterGetRowHeaderRenderers",t),t},columnHeaders:function(){var t=[];return e.hasColHeaders()&&t.push((function(e,t){n.appendColHeader(e,t)})),e.runHooks("afterGetColumnHeaderRenderers",t),t},columnWidth:e.getColWidth,rowHeight:e.getRowHeight,cellRenderer:function(e,t,i){var o=n.instance.getCellMeta(e,t),a=n.instance.colToProp(t),s=n.instance.getDataAtRowProp(e,a);n.instance.hasHook("beforeValueRender")&&(s=n.instance.runHooks("beforeValueRender",s,o)),n.instance.runHooks("beforeRenderer",i,e,t,a,s,o),n.instance.getCellRenderer(o)(n.instance,i,e,t,a,s,o),n.instance.runHooks("afterRenderer",i,e,t,a,s,o)},selections:n.instance.selection.highlight,hideBorderOnMouseDownOver:function(){return n.settings.fragmentSelection},onCellMouseDown:function(t,i,o,a){var r={row:!1,column:!1,cell:!1};e.listen(),n.activeWt=a,d=!0,e.runHooks("beforeOnCellMouseDown",t,i,o,r),(0,s.isImmediatePropagationStopped)(t)||((0,l.handleMouseEvent)(t,{coords:i,selection:e.selection,controller:r}),e.runHooks("afterOnCellMouseDown",t,i,o),n.activeWt=n.wt)},onCellMouseOut:function(t,i,o,a){n.activeWt=a,e.runHooks("beforeOnCellMouseOut",t,i,o),(0,s.isImmediatePropagationStopped)(t)||(e.runHooks("afterOnCellMouseOut",t,i,o),n.activeWt=n.wt)},onCellMouseOver:function(t,i,o,a){var r={row:!1,column:!1,cell:!1};n.activeWt=a,e.runHooks("beforeOnCellMouseOver",t,i,o,r),(0,s.isImmediatePropagationStopped)(t)||(d&&(0,l.handleMouseEvent)(t,{coords:i,selection:e.selection,controller:r}),e.runHooks("afterOnCellMouseOver",t,i,o),n.activeWt=n.wt)},onCellMouseUp:function(t,i,o,a){n.activeWt=a,e.runHooks("beforeOnCellMouseUp",t,i,o),e.runHooks("afterOnCellMouseUp",t,i,o),n.activeWt=n.wt},onCellCornerMouseDown:function(t){t.preventDefault(),e.runHooks("afterOnCellCornerMouseDown",t)},onCellCornerDblClick:function(t){t.preventDefault(),e.runHooks("afterOnCellCornerDblClick",t)},beforeDraw:function(e,t){n.beforeRender(e,t)},onDraw:function(e){n.onDraw(e)},onScrollVertically:function(){e.runHooks("afterScrollVertically")},onScrollHorizontally:function(){e.runHooks("afterScrollHorizontally")},onBeforeRemoveCellClassNames:function(){return e.runHooks("beforeRemoveCellClassNames")},onAfterDrawSelection:function(t,n,i,o){return e.runHooks("afterDrawSelection",t,n,i,o)},onBeforeDrawBorders:function(t,n){e.runHooks("beforeDrawBorders",t,n)},onBeforeTouchScroll:function(){e.runHooks("beforeTouchScroll")},onAfterMomentumScroll:function(){e.runHooks("afterMomentumScroll")},onBeforeStretchingColumnWidth:function(t,n){return e.runHooks("beforeStretchingColumnWidth",t,n)},onModifyRowHeaderWidth:function(t){return e.runHooks("modifyRowHeaderWidth",t)},onModifyGetCellCoords:function(t,n,i){return e.runHooks("modifyGetCellCoords",t,n,i)},viewportRowCalculatorOverride:function(t){var i=e.countRows(),o=n.settings.viewportRowRenderingOffset;if("auto"===o&&n.settings.fixedRowsTop&&(o=10),"number"==typeof o&&(t.startRow=Math.max(t.startRow-o,0),t.endRow=Math.min(t.endRow+o,i-1)),"auto"===o){var a=t.startRow+t.endRow-t.startRow,s=Math.ceil(a/i*12);t.startRow=Math.max(t.startRow-s,0),t.endRow=Math.min(t.endRow+s,i-1)}e.runHooks("afterViewportRowCalculatorOverride",t)},viewportColumnCalculatorOverride:function(t){var i=e.countCols(),o=n.settings.viewportColumnRenderingOffset;if("auto"===o&&n.settings.fixedColumnsLeft&&(o=10),"number"==typeof o&&(t.startColumn=Math.max(t.startColumn-o,0),t.endColumn=Math.min(t.endColumn+o,i-1)),"auto"===o){var a=t.startColumn+t.endColumn-t.startColumn,s=Math.ceil(a/i*12);t.startRow=Math.max(t.startColumn-s,0),t.endColumn=Math.min(t.endColumn+s,i-1)}e.runHooks("afterViewportColumnCalculatorOverride",t)},rowHeaderWidth:function(){return n.settings.rowHeaderWidth},columnHeaderHeight:function(){var t=e.runHooks("modifyColumnHeaderHeight");return n.settings.columnHeaderHeight||t}};e.runHooks("beforeInitWalkontable",h),this.wt=new r.default(h),this.activeWt=this.wt,this.eventManager.addEventListener(n.wt.wtTable.spreader,"mousedown",(function(e){e.target===n.wt.wtTable.spreader&&3===e.which&&(0,s.stopPropagation)(e)})),this.eventManager.addEventListener(n.wt.wtTable.spreader,"contextmenu",(function(e){e.target===n.wt.wtTable.spreader&&3===e.which&&(0,s.stopPropagation)(e)})),this.eventManager.addEventListener(document.documentElement,"click",(function(){n.settings.observeDOMVisibility&&n.wt.drawInterrupted&&(n.instance.forceFullRender=!0,n.render())}))}c.prototype.isTextSelectionAllowed=function(e){if((0,o.isInput)(e))return!0;var t=(0,o.isChildOf)(e,this.instance.view.wt.wtTable.spreader);return!(!0!==this.settings.fragmentSelection||!t)||!("cell"!==this.settings.fragmentSelection||!this.isSelectedOnlyCell()||!t)||!(this.settings.fragmentSelection||!this.isCellEdited()||!this.isSelectedOnlyCell())},c.prototype.isSelectedOnlyCell=function(){var e=this.instance.getSelectedLast()||[],t=i(e,4),n=t[0],o=t[1],a=t[2],s=t[3];return void 0!==n&&n===a&&o===s},c.prototype.isCellEdited=function(){var e=this.instance.getActiveEditor();return e&&e.isOpened()},c.prototype.beforeRender=function(e,t){e&&this.instance.runHooks("beforeRender",this.instance.forceFullRender,t)},c.prototype.onDraw=function(e){e&&this.instance.runHooks("afterRender",this.instance.forceFullRender)},c.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.renderCall=!1},c.prototype.getCellAtCoords=function(e,t){var n=this.wt.getCell(e,t);return n<0?null:n},c.prototype.scrollViewport=function(e){this.wt.scrollViewport(e)},c.prototype.appendRowHeader=function(e,t){if(t.firstChild){var n=t.firstChild;if(!(0,o.hasClass)(n,"relative"))return(0,o.empty)(t),void this.appendRowHeader(e,t);this.updateCellHeader(n.querySelector(".rowHeader"),e,this.instance.getRowHeader)}else{var i=document.createElement("div"),a=document.createElement("span");i.className="relative",a.className="rowHeader",this.updateCellHeader(a,e,this.instance.getRowHeader),i.appendChild(a),t.appendChild(i)}this.instance.runHooks("afterGetRowHeader",e,t)},c.prototype.appendColHeader=function(e,t){if(t.firstChild){var n=t.firstChild;(0,o.hasClass)(n,"relative")?this.updateCellHeader(n.querySelector(".colHeader"),e,this.instance.getColHeader):((0,o.empty)(t),this.appendColHeader(e,t))}else{var i=document.createElement("div"),a=document.createElement("span");i.className="relative",a.className="colHeader",this.updateCellHeader(a,e,this.instance.getColHeader),i.appendChild(a),t.appendChild(i)}this.instance.runHooks("afterGetColHeader",e,t)},c.prototype.updateCellHeader=function(e,t,n){var i=t,a=this.wt.wtOverlays.getParentOverlay(e)||this.wt;e.parentNode&&((0,o.hasClass)(e,"colHeader")?i=a.wtTable.columnFilter.sourceToRendered(t):(0,o.hasClass)(e,"rowHeader")&&(i=a.wtTable.rowFilter.sourceToRendered(t))),i>-1?(0,o.fastInnerHTML)(e,n(t)):((0,o.fastInnerText)(e,String.fromCharCode(160)),(0,o.addClass)(e,"cornerHeader"))},c.prototype.maximumVisibleElementWidth=function(e){var t=this.wt.wtViewport.getWorkspaceWidth()-e;return t>0?t:0},c.prototype.maximumVisibleElementHeight=function(e){var t=this.wt.wtViewport.getWorkspaceHeight()-e;return t>0?t:0},c.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},c.prototype.destroy=function(){this.wt.destroy(),this.eventManager.destroy()},t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),a=n(1),s=n(5),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.data=n,this.dataType="array",this.colToProp=function(){},this.propToCol=function(){}}return i(e,[{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.data;return e&&(t=this.getByRange({row:0,col:0},{row:Math.max(this.countRows()-1,0),col:Math.max(this.countColumns()-1,0)},!0)),t}},{key:"setData",value:function(e){this.data=e}},{key:"getAtColumn",value:function(e){var t=this,n=[];return(0,a.arrayEach)(this.data,(function(i){var a=t.colToProp(e);i="string"==typeof a?(0,o.getProperty)(i,a):"function"==typeof a?a(i):i[a],n.push(i)})),n}},{key:"getAtRow",value:function(e){return this.data[e]}},{key:"getAtCell",value:function(e,t){var n=null,i=this.hot.runHooks("modifyRowData",e),a=isNaN(i)?i:this.data[e];if(a){var s=this.colToProp(t);n="string"==typeof s?(0,o.getProperty)(a,s):"function"==typeof s?s(this.data.slice(e,e+1)[0]):a[s]}return n}},{key:"getByRange",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Math.min(e.row,t.row),a=Math.min(e.col,t.col),r=Math.max(e.row,t.row),l=Math.max(e.col,t.col),d=[];return(0,s.rangeEach)(o,r,(function(e){var t=n.getAtRow(e),o=void 0;"array"===n.dataType?o=t.slice(a,l+1):"object"===n.dataType&&(o=i?[]:{},(0,s.rangeEach)(a,l,(function(e){var a=n.colToProp(e);i?o.push(t[a]):o[a]=t[a]}))),d.push(o)})),d}},{key:"countRows",value:function(){return Array.isArray(this.data)?this.data.length:0}},{key:"countColumns",value:function(){var e=0;return Array.isArray(this.data)&&("array"===this.dataType?e=this.data[0].length:"object"===this.dataType&&(e=Object.keys(this.data[0]).length)),e}},{key:"destroy",value:function(){this.data=null,this.hot=null}}]),e}();t.default=r},function(e,t,n){"use strict";var i;t.__esModule=!0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(a(i={languageCode:"en-US"},o.CONTEXTMENU_ITEMS_ROW_ABOVE,"Insert row above"),a(i,o.CONTEXTMENU_ITEMS_ROW_BELOW,"Insert row below"),a(i,o.CONTEXTMENU_ITEMS_INSERT_LEFT,"Insert column left"),a(i,o.CONTEXTMENU_ITEMS_INSERT_RIGHT,"Insert column right"),a(i,o.CONTEXTMENU_ITEMS_REMOVE_ROW,["Remove row","Remove rows"]),a(i,o.CONTEXTMENU_ITEMS_REMOVE_COLUMN,["Remove column","Remove columns"]),a(i,o.CONTEXTMENU_ITEMS_UNDO,"Undo"),a(i,o.CONTEXTMENU_ITEMS_REDO,"Redo"),a(i,o.CONTEXTMENU_ITEMS_READ_ONLY,"Read only"),a(i,o.CONTEXTMENU_ITEMS_CLEAR_COLUMN,"Clear column"),a(i,o.CONTEXTMENU_ITEMS_ALIGNMENT,"Alignment"),a(i,o.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT,"Left"),a(i,o.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER,"Center"),a(i,o.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT,"Right"),a(i,o.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY,"Justify"),a(i,o.CONTEXTMENU_ITEMS_ALIGNMENT_TOP,"Top"),a(i,o.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE,"Middle"),a(i,o.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM,"Bottom"),a(i,o.CONTEXTMENU_ITEMS_FREEZE_COLUMN,"Freeze column"),a(i,o.CONTEXTMENU_ITEMS_UNFREEZE_COLUMN,"Unfreeze column"),a(i,o.CONTEXTMENU_ITEMS_BORDERS,"Borders"),a(i,o.CONTEXTMENU_ITEMS_BORDERS_TOP,"Top"),a(i,o.CONTEXTMENU_ITEMS_BORDERS_RIGHT,"Right"),a(i,o.CONTEXTMENU_ITEMS_BORDERS_BOTTOM,"Bottom"),a(i,o.CONTEXTMENU_ITEMS_BORDERS_LEFT,"Left"),a(i,o.CONTEXTMENU_ITEMS_REMOVE_BORDERS,"Remove border(s)"),a(i,o.CONTEXTMENU_ITEMS_ADD_COMMENT,"Add comment"),a(i,o.CONTEXTMENU_ITEMS_EDIT_COMMENT,"Edit comment"),a(i,o.CONTEXTMENU_ITEMS_REMOVE_COMMENT,"Delete comment"),a(i,o.CONTEXTMENU_ITEMS_READ_ONLY_COMMENT,"Read-only comment"),a(i,o.CONTEXTMENU_ITEMS_MERGE_CELLS,"Merge cells"),a(i,o.CONTEXTMENU_ITEMS_UNMERGE_CELLS,"Unmerge cells"),a(i,o.CONTEXTMENU_ITEMS_COPY,"Copy"),a(i,o.CONTEXTMENU_ITEMS_CUT,"Cut"),a(i,o.CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD,"Insert child row"),a(i,o.CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD,"Detach from parent"),a(i,o.CONTEXTMENU_ITEMS_HIDE_COLUMN,["Hide column","Hide columns"]),a(i,o.CONTEXTMENU_ITEMS_SHOW_COLUMN,["Show column","Show columns"]),a(i,o.CONTEXTMENU_ITEMS_HIDE_ROW,["Hide row","Hide rows"]),a(i,o.CONTEXTMENU_ITEMS_SHOW_ROW,["Show row","Show rows"]),a(i,o.FILTERS_CONDITIONS_NONE,"None"),a(i,o.FILTERS_CONDITIONS_EMPTY,"Is empty"),a(i,o.FILTERS_CONDITIONS_NOT_EMPTY,"Is not empty"),a(i,o.FILTERS_CONDITIONS_EQUAL,"Is equal to"),a(i,o.FILTERS_CONDITIONS_NOT_EQUAL,"Is not equal to"),a(i,o.FILTERS_CONDITIONS_BEGINS_WITH,"Begins with"),a(i,o.FILTERS_CONDITIONS_ENDS_WITH,"Ends with"),a(i,o.FILTERS_CONDITIONS_CONTAINS,"Contains"),a(i,o.FILTERS_CONDITIONS_NOT_CONTAIN,"Does not contain"),a(i,o.FILTERS_CONDITIONS_GREATER_THAN,"Greater than"),a(i,o.FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL,"Greater than or equal to"),a(i,o.FILTERS_CONDITIONS_LESS_THAN,"Less than"),a(i,o.FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL,"Less than or equal to"),a(i,o.FILTERS_CONDITIONS_BETWEEN,"Is between"),a(i,o.FILTERS_CONDITIONS_NOT_BETWEEN,"Is not between"),a(i,o.FILTERS_CONDITIONS_AFTER,"After"),a(i,o.FILTERS_CONDITIONS_BEFORE,"Before"),a(i,o.FILTERS_CONDITIONS_TODAY,"Today"),a(i,o.FILTERS_CONDITIONS_TOMORROW,"Tomorrow"),a(i,o.FILTERS_CONDITIONS_YESTERDAY,"Yesterday"),a(i,o.FILTERS_VALUES_BLANK_CELLS,"Blank cells"),a(i,o.FILTERS_DIVS_FILTER_BY_CONDITION,"Filter by condition"),a(i,o.FILTERS_DIVS_FILTER_BY_VALUE,"Filter by value"),a(i,o.FILTERS_LABELS_CONJUNCTION,"And"),a(i,o.FILTERS_LABELS_DISJUNCTION,"Or"),a(i,o.FILTERS_BUTTONS_SELECT_ALL,"Select all"),a(i,o.FILTERS_BUTTONS_CLEAR,"Clear"),a(i,o.FILTERS_BUTTONS_OK,"OK"),a(i,o.FILTERS_BUTTONS_CANCEL,"Cancel"),a(i,o.FILTERS_BUTTONS_PLACEHOLDER_SEARCH,"Search"),a(i,o.FILTERS_BUTTONS_PLACEHOLDER_VALUE,"Value"),a(i,o.FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE,"Second value"),i);t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.getPhraseFormatters=t.registerPhraseFormatter=void 0,t.register=d,t.getAll=c;var i=a(n(40)),o=a(n(271));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)("phraseFormatters"),r=s.register,l=s.getValues;function d(e,t){r(e,t)}function c(){return l()}t.registerPhraseFormatter=d,t.getPhraseFormatters=c,d("pluralize",o.default)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return Array.isArray(e)&&Number.isInteger(t)?e[t]:e}},function(e,t,n){"use strict";t.__esModule=!0,t.Selection=t.Highlight=t.handleMouseEvent=void 0;var i=s(n(200)),o=s(n(279)),a=n(193);function s(e){return e&&e.__esModule?e:{default:e}}t.handleMouseEvent=a.handleMouseEvent,t.Highlight=i.default,t.Selection=o.default},function(e,t,n){"use strict";t.__esModule=!0,t.createHighlight=void 0;var i=d(n(40)),o=d(n(274)),a=d(n(275)),s=d(n(276)),r=d(n(277)),l=d(n(278));function d(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.default)("highlight/types"),u=c.register,h=c.getItem;u("active-header",o.default),u("area",a.default),u("cell",s.default),u("fill",r.default),u("header",l.default),t.createHighlight=function(e,t){return h(e)(t)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t.default=function(e){var t=e.activeHeaderClassName;return new i.Selection({highlightHeaderClassName:t})}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t.default=function(e){var t=e.layerLevel,n=e.areaCornerVisible;return new i.Selection({className:"area",markIntersections:!0,layerLevel:Math.min(t,7),border:{width:1,color:"#4b89ff",cornerVisible:n}})}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t.default=function(e){var t=e.cellCornerVisible;return new i.Selection({className:"current",border:{width:2,color:"#4b89ff",cornerVisible:t}})}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t.default=function(){return new i.Selection({className:"fill",border:{width:1,color:"#ff0000"}})}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t.default=function(e){var t=e.headerClassName,n=e.rowClassName,o=e.columnClassName;return new i.Selection({className:"highlight",highlightHeaderClassName:t,highlightRowClassName:n,highlightColumnClassName:o})}},function(e,t,n){"use strict";t.__esModule=!0;var i,o,a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(i=["Unsupported format of the selection ranges was passed. To select cells pass \n        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd, columnEnd/columnPropEnd]]) \n        or as an array of CellRange objects."],o=["Unsupported format of the selection ranges was passed. To select cells pass \n        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd, columnEnd/columnPropEnd]]) \n        or as an array of CellRange objects."],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),l=n(200),d=b(l),c=b(n(280)),u=n(4),h=n(199),p=n(2),f=n(11),m=n(1),_=b(n(47)),v=b(n(281)),g=n(92),y=n(42);function b(e){return e&&e.__esModule?e:{default:e}}var w=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=t,this.tableProps=n,this.inProgress=!1,this.selectedByCorner=!1,this.selectedByRowHeader=new Set,this.selectedByColumnHeader=new Set,this.selectedRange=new c.default,this.highlight=new d.default({headerClassName:t.currentHeaderClassName,activeHeaderClassName:t.activeHeaderClassName,rowClassName:t.currentRowClassName,columnClassName:t.currentColClassName,disableHighlight:this.settings.disableVisualSelection,cellCornerVisible:function(){return i.isCellCornerVisible.apply(i,arguments)},areaCornerVisible:function(){return i.isAreaCornerVisible.apply(i,arguments)}}),this.transformation=new v.default(this.selectedRange,{countRows:function(){return i.tableProps.countRows()},countCols:function(){return i.tableProps.countCols()},fixedRowsBottom:function(){return t.fixedRowsBottom},minSpareRows:function(){return t.minSpareRows},minSpareCols:function(){return t.minSpareCols},autoWrapRow:function(){return t.autoWrapRow},autoWrapCol:function(){return t.autoWrapCol}}),this.transformation.addLocalHook("beforeTransformStart",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.runLocalHooks.apply(i,["beforeModifyTransformStart"].concat(t))})),this.transformation.addLocalHook("afterTransformStart",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.runLocalHooks.apply(i,["afterModifyTransformStart"].concat(t))})),this.transformation.addLocalHook("beforeTransformEnd",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.runLocalHooks.apply(i,["beforeModifyTransformEnd"].concat(t))})),this.transformation.addLocalHook("afterTransformEnd",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.runLocalHooks.apply(i,["afterModifyTransformEnd"].concat(t))})),this.transformation.addLocalHook("insertRowRequire",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.runLocalHooks.apply(i,["insertRowRequire"].concat(t))})),this.transformation.addLocalHook("insertColRequire",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.runLocalHooks.apply(i,["insertColRequire"].concat(t))}))}return s(e,[{key:"getSelectedRange",value:function(){return this.selectedRange}},{key:"begin",value:function(){this.inProgress=!0}},{key:"finish",value:function(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1}},{key:"isInProgress",value:function(){return this.inProgress}},{key:"setRangeStart",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="multiple"===this.settings.selectionMode,o=(0,f.isUndefined)(t)?(0,h.isPressedCtrlKey)():t,a=e.row<0,s=e.col<0,r=a&&s;a&&(e.row=0),s&&(e.col=0),this.selectedByCorner=r,this.runLocalHooks("beforeSetRangeStart"+(n?"Only":""),e),(!i||i&&!o&&(0,f.isUndefined)(t))&&this.selectedRange.clear(),this.selectedRange.add(e),0===this.getLayerLevel()&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),!r&&s&&this.selectedByRowHeader.add(this.getLayerLevel()),!r&&a&&this.selectedByColumnHeader.add(this.getLayerLevel()),n||this.setRangeEnd(e)}},{key:"setRangeStartOnly",value:function(e,t){this.setRangeStart(e,t,!0)}},{key:"setRangeEnd",value:function(e){if(!this.selectedRange.isEmpty()){this.runLocalHooks("beforeSetRangeEnd",e),this.begin();var t=this.selectedRange.current();"single"!==this.settings.selectionMode&&t.setTo(new u.CellCoords(e.row,e.col)),this.highlight.getCell().clear(),this.highlight.isEnabledFor(l.CELL_TYPE)&&this.highlight.getCell().add(this.selectedRange.current().highlight);var n=this.getLayerLevel();n<this.highlight.layerLevel&&((0,m.arrayEach)(this.highlight.getAreas(),(function(e){e.clear()})),(0,m.arrayEach)(this.highlight.getHeaders(),(function(e){e.clear()})),(0,m.arrayEach)(this.highlight.getActiveHeaders(),(function(e){e.clear()}))),this.highlight.useLayerLevel(n);var i=this.highlight.createOrGetArea(),o=this.highlight.createOrGetHeader(),a=this.highlight.createOrGetActiveHeader();i.clear(),o.clear(),a.clear(),this.highlight.isEnabledFor(l.AREA_TYPE)&&(this.isMultiple()||n>=1)&&(i.add(t.from).add(t.to),1===n&&(this.highlight.useLayerLevel(n-1).createOrGetArea().add(this.selectedRange.previous().from),this.highlight.useLayerLevel(n))),this.highlight.isEnabledFor(l.HEADER_TYPE)&&("single"===this.settings.selectionMode?o.add(t.highlight):o.add(t.from).add(t.to)),this.isSelectedByRowHeader()&&this.tableProps.countCols()===t.getWidth()&&a.add(new u.CellCoords(t.from.row,-1)).add(new u.CellCoords(t.to.row,-1)),this.isSelectedByColumnHeader()&&this.tableProps.countRows()===t.getHeight()&&a.add(new u.CellCoords(-1,t.from.col)).add(new u.CellCoords(-1,t.to.col)),this.runLocalHooks("afterSetRangeEnd",e)}}},{key:"isMultiple",value:function(){var e=(0,p.createObjectPropListener)(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",e),e.value}},{key:"transformStart",value:function(e,t,n){this.setRangeStart(this.transformation.transformStart(e,t,n))}},{key:"transformEnd",value:function(e,t){this.setRangeEnd(this.transformation.transformEnd(e,t))}},{key:"getLayerLevel",value:function(){return this.selectedRange.size()-1}},{key:"isSelected",value:function(){return!this.selectedRange.isEmpty()}},{key:"isSelectedByRowHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return-1===e?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(e)}},{key:"isSelectedByColumnHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return-1===e?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(e)}},{key:"isSelectedByAnyHeader",value:function(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)}},{key:"isSelectedByCorner",value:function(){return this.selectedByCorner}},{key:"inInSelection",value:function(e){return this.selectedRange.includes(e)}},{key:"isCellCornerVisible",value:function(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}},{key:"isAreaCornerVisible",value:function(e){return(!Number.isInteger(e)||e===this.getLayerLevel())&&this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple()}},{key:"clear",value:function(){this.selectedRange.clear(),this.highlight.clear()}},{key:"deselect",value:function(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}},{key:"selectAll",value:function(){this.clear(),this.setRangeStart(new u.CellCoords(-1,-1)),this.selectedByRowHeader.add(this.getLayerLevel()),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(new u.CellCoords(this.tableProps.countRows()-1,this.tableProps.countCols()-1))}},{key:"selectCells",value:function(e){var t=this,n=(0,g.detectSelectionType)(e);if(n===g.SELECTION_TYPE_EMPTY)return!1;if(n===g.SELECTION_TYPE_UNRECOGNIZED)throw new Error((0,y.toSingleLine)(r));var i=(0,g.normalizeSelectionFactory)(n,{propToCol:function(e){return t.tableProps.propToCol(e)},keepDirection:!0}),o=this.tableProps.countRows(),s=this.tableProps.countCols(),l=!e.some((function(e){var t=i(e),n=a(t,4),r=n[0],l=n[1],d=n[2],c=n[3];return!((0,g.isValidCoord)(r,o)&&(0,g.isValidCoord)(l,s)&&(0,g.isValidCoord)(d,o)&&(0,g.isValidCoord)(c,s))}));return l&&(this.clear(),(0,m.arrayEach)(e,(function(e){var n=i(e),o=a(n,4),s=o[0],r=o[1],l=o[2],d=o[3];t.setRangeStartOnly(new u.CellCoords(s,r),!1),t.setRangeEnd(new u.CellCoords(l,d)),t.finish()}))),l}},{key:"selectColumns",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e="string"==typeof e?this.tableProps.propToCol(e):e,t="string"==typeof t?this.tableProps.propToCol(t):t;var n=this.tableProps.countCols(),i=(0,g.isValidCoord)(e,n)&&(0,g.isValidCoord)(t,n);return i&&(this.setRangeStartOnly(new u.CellCoords(-1,e)),this.setRangeEnd(new u.CellCoords(this.tableProps.countRows()-1,t)),this.finish()),i}},{key:"selectRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.tableProps.countRows(),i=(0,g.isValidCoord)(e,n)&&(0,g.isValidCoord)(t,n);return i&&(this.setRangeStartOnly(new u.CellCoords(e,-1)),this.setRangeEnd(new u.CellCoords(t,this.tableProps.countCols()-1)),this.finish()),i}}]),e}();(0,p.mixin)(w,_.default),t.default=w},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(4),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ranges=[]}return i(e,[{key:"isEmpty",value:function(){return 0===this.size()}},{key:"set",value:function(e){return this.clear(),this.ranges.push(new o.CellRange(e)),this}},{key:"add",value:function(e){return this.ranges.push(new o.CellRange(e)),this}},{key:"current",value:function(){return this.peekByIndex(0)}},{key:"previous",value:function(){return this.peekByIndex(-1)}},{key:"includes",value:function(e){return this.ranges.some((function(t){return t.includes(e)}))}},{key:"clear",value:function(){return this.ranges.length=0,this}},{key:"size",value:function(){return this.ranges.length}},{key:"peekByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.size()+e-1,n=void 0;return t>=0&&(n=this.ranges[t]),n}},{key:Symbol.iterator,value:function(){return this.ranges[Symbol.iterator]()}}]),e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(4),s=n(2),r=n(47),l=(i=r)&&i.__esModule?i:{default:i},d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.range=t,this.options=n}return o(e,[{key:"transformStart",value:function(e,t,n){var i=new a.CellCoords(e,t);this.runLocalHooks("beforeTransformStart",i);var o=this.options.countRows(),s=this.options.countCols(),r=this.options.fixedRowsBottom(),l=this.options.minSpareRows(),d=this.options.minSpareCols(),c=this.options.autoWrapRow(),u=this.options.autoWrapCol(),h=this.range.current().highlight;h.row+e>o-1?n&&l>0&&!(r&&h.row>=o-r-1)?(this.runLocalHooks("insertRowRequire",o),o=this.options.countRows()):u&&(i.row=1-o,i.col=h.col+i.col==s-1?1-s:1):u&&h.row+i.row<0&&h.col+i.col>=0&&(i.row=o-1,i.col=h.col+i.col==0?s-1:-1),h.col+i.col>s-1?n&&d>0?(this.runLocalHooks("insertColRequire",s),s=this.options.countCols()):c&&(i.row=h.row+i.row==o-1?1-o:1,i.col=1-s):c&&h.col+i.col<0&&h.row+i.row>=0&&(i.row=h.row+i.row==0?o-1:-1,i.col=s-1);var p=new a.CellCoords(h.row+i.row,h.col+i.col),f=0,m=0;return p.row<0?(f=-1,p.row=0):p.row>0&&p.row>=o&&(f=1,p.row=o-1),p.col<0?(m=-1,p.col=0):p.col>0&&p.col>=s&&(m=1,p.col=s-1),this.runLocalHooks("afterTransformStart",p,f,m),p}},{key:"transformEnd",value:function(e,t){var n=new a.CellCoords(e,t);this.runLocalHooks("beforeTransformEnd",n);var i=this.options.countRows(),o=this.options.countCols(),s=this.range.current(),r=new a.CellCoords(s.to.row+n.row,s.to.col+n.col),l=0,d=0;return r.row<0?(l=-1,r.row=0):r.row>0&&r.row>=i&&(l=1,r.row=i-1),r.col<0?(d=-1,r.col=0):r.col>0&&r.col>=o&&(d=1,r.col=o-1),this.runLocalHooks("afterTransformEnd",r,l,d),r}}]),e}();(0,s.mixin)(d,l.default),t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t="undefined"!=typeof window&&o;t&&(t.fn.handsontable=function(t){var n=this.first(),i=n.data("handsontable");if("string"!=typeof t){var o=t||{};return i?i.updateSettings(o):(i=new e.Core(n[0],o),n.data("handsontable",i),i.init()),n}var a=[],s=void 0;if(arguments.length>1)for(var r=1,l=arguments.length;r<l;r++)a.push(arguments[r]);if(i){if(void 0===i[t])throw new Error("Handsontable do not provide action: "+t);s=i[t].apply(i,a),"destroy"===t&&n.removeData()}return s})}},function(e,t,n){"use strict";t.__esModule=!0,t.Base=t.UndoRedo=t.TouchScroll=t.Search=t.PersistentState=t.ObserveChanges=t.MultipleSelectionHandles=t.MergeCells=t.ManualRowResize=t.ManualRowMove=t.ManualColumnResize=t.ManualColumnMove=t.ManualColumnFreeze=t.DragToScroll=t.CustomBorders=t.CopyPaste=t.ContextMenu=t.Comments=t.ColumnSorting=t.AutoRowSize=t.AutoFill=t.AutoColumnSize=void 0;var i=S(n(284)),o=S(n(286)),a=S(n(287)),s=S(n(289)),r=S(n(290)),l=S(n(297)),d=S(n(301)),c=S(n(318)),u=S(n(325)),h=S(n(331)),p=S(n(332)),f=S(n(336)),m=S(n(341)),_=S(n(342)),v=S(n(347)),g=S(n(348)),y=S(n(354)),b=S(n(355)),w=S(n(358)),k=S(n(359)),C=S(n(360)),x=S(n(10));function S(e){return e&&e.__esModule?e:{default:e}}t.AutoColumnSize=o.default,t.AutoFill=a.default,t.AutoRowSize=s.default,t.ColumnSorting=r.default,t.Comments=l.default,t.ContextMenu=d.default,t.CopyPaste=c.default,t.CustomBorders=u.default,t.DragToScroll=h.default,t.ManualColumnFreeze=p.default,t.ManualColumnMove=f.default,t.ManualColumnResize=m.default,t.ManualRowMove=_.default,t.ManualRowResize=v.default,t.MergeCells=g.default,t.MultipleSelectionHandles=y.default,t.ObserveChanges=b.default,t.PersistentState=i.default,t.Search=w.default,t.TouchScroll=k.default,t.UndoRedo=C.default,t.Base=x.default},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=d(n(10)),s=n(8),r=d(n(285)),l=d(n(16));function d(e){return e&&e.__esModule?e:{default:e}}l.default.getSingleton().register("persistentStateSave"),l.default.getSingleton().register("persistentStateLoad"),l.default.getSingleton().register("persistentStateReset");var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.storage=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().persistentState}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.storage||(this.storage=new r.default(this.hot.rootElement.id)),this.addHook("persistentStateSave",(function(t,n){return e.saveValue(t,n)})),this.addHook("persistentStateLoad",(function(t,n){return e.loadValue(t,n)})),this.addHook("persistentStateReset",(function(){return e.resetValue()})),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.storage=void 0,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"loadValue",value:function(e,t){t.value=this.storage.loadValue(e)}},{key:"saveValue",value:function(e,t){this.storage.saveValue(e,t)}},{key:"resetValue",value:function(e){void 0===e?this.storage.resetAll():this.storage.reset(e)}},{key:"destroy",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);(0,s.registerPlugin)("persistentState",c),t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.prefix=t,this.savedKeys=[],this.loadSavedKeys()}return i(e,[{key:"saveValue",value:function(e,t){window.localStorage.setItem(this.prefix+"_"+e,JSON.stringify(t)),-1===this.savedKeys.indexOf(e)&&(this.savedKeys.push(e),this.saveSavedKeys())}},{key:"loadValue",value:function(e,t){e=void 0===e?t:e;var n=window.localStorage.getItem(this.prefix+"_"+e);return null===n?void 0:JSON.parse(n)}},{key:"reset",value:function(e){window.localStorage.removeItem(this.prefix+"_"+e)}},{key:"resetAll",value:function(){var e=this;(0,o.arrayEach)(this.savedKeys,(function(t,n){window.localStorage.removeItem(e.prefix+"_"+e.savedKeys[n])})),this.clearSavedKeys()}},{key:"loadSavedKeys",value:function(){var e=window.localStorage.getItem(this.prefix+"__persistentStateKeys"),t="string"==typeof e?JSON.parse(e):void 0;this.savedKeys=t||[]}},{key:"saveSavedKeys",value:function(){window.localStorage.setItem(this.prefix+"__persistentStateKeys",JSON.stringify(this.savedKeys))}},{key:"clearSavedKeys",value:function(){this.savedKeys.length=0,this.saveSavedKeys()}}]),e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=v(n(10)),r=n(1),l=n(41),d=n(0),c=v(n(93)),u=n(2),h=n(5),p=n(8),f=v(n(201)),m=n(36),_=n(4);function v(e){return e&&e.__esModule?e:{default:e}}var g=new WeakMap,y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return g.set(n,{cachedColumnHeaders:[]}),n.widths=[],n.ghostTable=new c.default(n.hot),n.samplesGenerator=new f.default((function(e,t){return n.hot.getCellMeta(e,t).spanned?"":n.hot.getDataAtCell(e,t)})),n.firstCalculation=!0,n.inProgress=!1,n.addHook("beforeColumnResize",(function(e,t,i){return n.onBeforeColumnResize(e,t,i)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),a(t,[{key:"isEnabled",value:function(){return!1!==this.hot.getSettings().autoColumnSize&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var n=this.hot.getSettings().autoColumnSize;n&&null!=n.useHeaders&&this.ghostTable.setSetting("useHeaders",n.useHeaders),this.addHook("afterLoadData",(function(){return e.onAfterLoadData()})),this.addHook("beforeChange",(function(t){return e.onBeforeChange(t)})),this.addHook("beforeRender",(function(t){return e.onBeforeRender(t)})),this.addHook("modifyColWidth",(function(t,n){return e.getColumnWidth(n,t)})),this.addHook("afterInit",(function(){return e.onAfterInit()})),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&this.clearCache(e),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"calculateColumnsWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"number"==typeof e&&(e={from:e,to:e}),"number"==typeof n&&(n={from:n,to:n}),(0,h.rangeEach)(e.from,e.to,(function(e){(i||void 0===t.widths[e]&&!t.hot._getColWidthFromSettings(e))&&t.samplesGenerator.generateColumnSamples(e,n).forEach((function(e,n){return t.ghostTable.addColumn(n,e)}))})),this.ghostTable.columns.length&&(this.ghostTable.getWidths((function(e,n){t.widths[e]=n})),this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},i=0,o=this.hot.countCols()-1,a=null;this.inProgress=!0,this.firstCalculation&&this.getSyncCalculationLimit()&&(this.calculateColumnsWidth({from:0,to:this.getSyncCalculationLimit()},n),this.firstCalculation=!1,i=this.getSyncCalculationLimit()+1),i<o?function s(){if(!e.hot)return(0,l.cancelAnimationFrame)(a),void(e.inProgress=!1);e.calculateColumnsWidth({from:i,to:Math.min(i+t.CALCULATION_STEP,o)},n),(i=i+t.CALCULATION_STEP+1)<o?a=(0,l.requestAnimationFrame)(s):((0,l.cancelAnimationFrame)(a),e.inProgress=!1,e.hot.view.wt.wtOverlays.adjustElementsSize(!0),e.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&e.hot.view.wt.wtOverlays.leftOverlay.clone.draw())}():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings().autoColumnSize,t=e&&(0,u.hasOwnProperty)(e,"samplingRatio")?this.hot.getSettings().autoColumnSize.samplingRatio:void 0,n=e&&(0,u.hasOwnProperty)(e,"allowSampleDuplicates")?this.hot.getSettings().autoColumnSize.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&(0,d.isVisible)(this.hot.view.wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=t.SYNC_CALCULATION_LIMIT,n=this.hot.countCols()-1;return(0,u.isObject)(this.hot.getSettings().autoColumnSize)&&(e=this.hot.getSettings().autoColumnSize.syncLimit,(0,m.isPercentValue)(e)?e=(0,h.valueAccordingPercent)(n,e):e>>=0),Math.min(e,n)}},{key:"getColumnWidth",value:function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===n&&(n=this.widths[e],t&&"number"==typeof n&&(n=Math.max(n,_.ViewportColumnsCalculator.DEFAULT_WIDTH))),n}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view.wt;return e.wtViewport.columnsVisibleCalculator?e.wtTable.getFirstVisibleColumn():e.wtViewport.columnsRenderCalculator?e.wtTable.getFirstRenderedColumn():-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view.wt;return e.wtViewport.columnsVisibleCalculator?e.wtTable.getLastVisibleColumn():e.wtViewport.columnsRenderCalculator?e.wtTable.getLastRenderedColumn():-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),t=g.get(this).cachedColumnHeaders;return(0,r.arrayReduce)(e,(function(e,n,i){var o=t.length;return(o-1<i||t[i]!==n)&&e.push(i),o-1<i?t.push(n):t[i]=n,e}),[])}},{key:"clearCache",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length?(0,r.arrayEach)(t,(function(t){e.widths[t]=void 0})):this.widths.length=0}},{key:"isNeedRecalculate",value:function(){return!!(0,r.arrayFilter)(this.widths,(function(e){return void 0===e})).length}},{key:"onBeforeRender",value:function(){var e=this.hot.renderCall;this.hot.countRows()&&(this.calculateColumnsWidth({from:this.getFirstVisibleColumn(),to:this.getLastVisibleColumn()},void 0,e),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth())}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout((function(){e.hot&&e.recalculateAllColumnsWidth()}),0)}},{key:"onBeforeChange",value:function(e){var t=this,n=(0,r.arrayMap)(e,(function(e){var n=i(e,2),o=(n[0],n[1]);return t.hot.propToCol(o)}));this.clearCache(n)}},{key:"onBeforeColumnResize",value:function(e,t,n){return n&&(this.calculateColumnsWidth(e,void 0,!0),t=this.getColumnWidth(e,void 0,!1)),t}},{key:"onAfterInit",value:function(){g.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"destroy",value:function(){this.ghostTable.clean(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(s.default);(0,p.registerPlugin)("autoColumnSize",y),t.default=y},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=h(n(10)),s=h(n(16)),r=n(0),l=h(n(6)),d=n(8),c=n(4),u=n(288);function h(e){return e&&e.__esModule?e:{default:e}}s.default.getSingleton().register("modifyAutofillRange"),s.default.getSingleton().register("beforeAutofill");var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.eventManager=new l.default(n),n.addingStarted=!1,n.mouseDownOnCellCorner=!1,n.mouseDragOutside=!1,n.handleDraggedCells=0,n.directions=[],n.autoInsertRow=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return this.hot.getSettings().fillHandle}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",(function(t){return e.onAfterCellCornerMouseDown(t)})),this.addHook("afterOnCellCornerDblClick",(function(t){return e.onCellCornerDblClick(t)})),this.addHook("beforeOnCellMouseOver",(function(t,n,i){return e.onBeforeCellMouseOver(n)})),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.clearMappedSettings(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"getSelectionData",value:function(){var e={from:this.hot.getSelectedRangeLast().from,to:this.hot.getSelectedRangeLast().to};return this.hot.getData(e.from.row,e.from.col,e.to.row,e.to.col)}},{key:"fillIn",value:function(){if(this.hot.selection.highlight.getFill().isEmpty())return!1;var e=this.hot.selection.highlight.getFill().getCorners();this.resetSelectionOfDraggedArea();var t=this.getCornersOfSelectedCells();e=this.hot.runHooks("modifyAutofillRange",e,t);var n=(0,u.getDragDirectionAndRange)(t,e),i=n.directionOfDrag,o=n.startOfDragCoords,a=n.endOfDragCoords;if(o&&o.row>-1&&o.col>-1){var s=this.getSelectionData();this.hot.runHooks("beforeAutofill",o,a,s);var r=(0,u.getDeltas)(o,a,s,i),l=s;if(["up","left"].indexOf(i)>-1){l=[];var d=null,c=null;if("up"===i){c=(d=a.row-o.row+1)%s.length;for(var h=0;h<d;h++)l.push(s[(h+(s.length-c))%s.length])}else{c=(d=a.col-o.col+1)%s[0].length;for(var p=0;p<s.length;p++){l.push([]);for(var f=0;f<d;f++)l[p].push(s[p][(f+(s[p].length-c))%s[p].length])}}}this.hot.populateFromArray(o.row,o.col,l,a.row,a.col,this.pluginName+".fill",null,i,r),this.setSelection(e)}else this.hot._refreshBorders();return!0}},{key:"reduceSelectionAreaIfNeeded",value:function(e){return e.row<0&&(e.row=0),e.col<0&&(e.col=0),e}},{key:"getCoordsOfDragAndDropBorders",value:function(e){var t=this.hot.getSelectedRangeLast().getTopLeftCorner(),n=this.hot.getSelectedRangeLast().getBottomRightCorner(),i=void 0;if(this.directions.includes(u.DIRECTIONS.vertical)&&(n.row<e.row||t.row>e.row))i=new c.CellCoords(e.row,n.col);else{if(!this.directions.includes(u.DIRECTIONS.horizontal))return;i=new c.CellCoords(n.row,e.col)}return this.reduceSelectionAreaIfNeeded(i)}},{key:"showBorder",value:function(e){var t=this.getCoordsOfDragAndDropBorders(e);t&&this.redrawBorders(t)}},{key:"addRow",value:function(){var e=this;this.hot._registerTimeout(setTimeout((function(){e.hot.alter("insert_row",void 0,1,e.pluginName+".fill"),e.addingStarted=!1}),200))}},{key:"addNewRowIfNeeded",value:function(){if(this.hot.selection.highlight.getFill().cellRange&&!1===this.addingStarted&&this.autoInsertRow){var e=this.hot.getSelectedLast(),t=this.hot.selection.highlight.getFill().getCorners(),n=this.hot.countRows();e[2]<n-1&&t[2]===n-1&&(this.addingStarted=!0,this.addRow())}}},{key:"getCornersOfSelectedCells",value:function(){return this.hot.selection.isMultiple()?this.hot.selection.highlight.createOrGetArea().getCorners():this.hot.selection.highlight.getCell().getCorners()}},{key:"getIndexOfLastAdjacentFilledInRow",value:function(e){for(var t=this.hot.getData(),n=this.hot.countRows(),i=void 0,o=e[2]+1;o<n;o++){for(var a=e[1];a<=e[3];a++)if(t[o][a])return-1;var s=t[o][e[1]-1],r=t[o][e[3]+1];(s||r)&&(i=o)}return i}},{key:"addSelectionFromStartAreaToSpecificRowIndex",value:function(e,t){this.hot.selection.highlight.getFill().clear().add(new c.CellCoords(e[0],e[1])).add(new c.CellCoords(t,e[3]))}},{key:"setSelection",value:function(e){var t;(t=this.hot).selectCell.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e).concat([!1,!1]))}},{key:"selectAdjacent",value:function(){var e=this.getCornersOfSelectedCells(),t=this.getIndexOfLastAdjacentFilledInRow(e);return-1!==t&&(this.addSelectionFromStartAreaToSpecificRowIndex(e,t),!0)}},{key:"resetSelectionOfDraggedArea",value:function(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}},{key:"redrawBorders",value:function(e){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(e),this.hot.view.render()}},{key:"getIfMouseWasDraggedOutside",value:function(e){var t=(0,r.offset)(this.hot.table).top-(window.pageYOffset||document.documentElement.scrollTop)+(0,r.outerHeight)(this.hot.table),n=(0,r.offset)(this.hot.table).left-(window.pageXOffset||document.documentElement.scrollLeft)+(0,r.outerWidth)(this.hot.table);return e.clientY>t&&e.clientX<=n}},{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(document.documentElement,"mouseup",(function(){return e.onMouseUp()})),this.eventManager.addEventListener(document.documentElement,"mousemove",(function(t){return e.onMouseMove(t)}))}},{key:"onCellCornerDblClick",value:function(){this.selectAdjacent()&&this.fillIn()}},{key:"onAfterCellCornerMouseDown",value:function(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}},{key:"onBeforeCellMouseOver",value:function(e){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells++,this.showBorder(e),this.addNewRowIfNeeded())}},{key:"onMouseUp",value:function(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}},{key:"onMouseMove",value:function(e){var t=this.getIfMouseWasDraggedOutside(e);!1===this.addingStarted&&this.handleDraggedCells>0&&t?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}},{key:"clearMappedSettings",value:function(){this.directions.length=0,this.autoInsertRow=!1}},{key:"mapSettings",value:function(){var e=(0,u.getMappedFillHandleSetting)(this.hot.getSettings().fillHandle);this.directions=e.directions,this.autoInsertRow=e.autoInsertRow}},{key:"destroy",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);(0,d.registerPlugin)("autofill",p),t.default=p},function(e,t,n){"use strict";t.__esModule=!0,t.DIRECTIONS=void 0,t.getDeltas=function(e,t,n,i){var o=n.length,a=n?n[0].length:0,s=[],r=t.row-e.row,l=t.col-e.col;if(-1!==["down","up"].indexOf(i)){for(var d=[],c=0;c<=l;c++){var u=parseInt(n[0][c],10),h=parseInt(n[o-1][c],10),p=("down"===i?h-u:u-h)/(o-1)||0;d.push(p)}s.push(d)}if(-1!==["right","left"].indexOf(i))for(var f=0;f<=r;f++){var m=parseInt(n[f][0],10),_=parseInt(n[f][a-1],10),v=("right"===i?_-m:m-_)/(a-1)||0;s.push([v])}return s},t.getDragDirectionAndRange=function(e,t){var n=void 0,i=void 0,o=void 0;return t[0]===e[0]&&t[1]<e[1]?(o="left",n=new a.CellCoords(t[0],t[1]),i=new a.CellCoords(t[2],e[1]-1)):t[2]===e[2]&&t[0]===e[0]&&t[3]>e[3]?(o="right",n=new a.CellCoords(t[0],e[3]+1),i=new a.CellCoords(t[2],t[3])):t[0]<e[0]&&t[1]===e[1]?(o="up",n=new a.CellCoords(t[0],t[1]),i=new a.CellCoords(e[0]-1,t[3])):t[2]>e[2]&&t[1]===e[1]&&(o="down",n=new a.CellCoords(e[2]+1,t[1]),i=new a.CellCoords(t[2],t[3])),{directionOfDrag:o,startOfDragCoords:n,endOfDragCoords:i}},t.getMappedFillHandleSetting=function(e){var t={};return!0===e?(t.directions=Object.keys(s),t.autoInsertRow=!0):(0,i.isObject)(e)?((0,o.isDefined)(e.autoInsertRow)?e.direction===s.horizontal?t.autoInsertRow=!1:t.autoInsertRow=e.autoInsertRow:t.autoInsertRow=!1,(0,o.isDefined)(e.direction)?t.directions=[e.direction]:t.directions=Object.keys(s)):"string"==typeof e?(t.directions=[e],t.autoInsertRow=!0):(t.directions=[],t.autoInsertRow=!1),t};var i=n(2),o=n(11),a=n(4),s=t.DIRECTIONS={horizontal:"horizontal",vertical:"vertical"}},function(e,t,n){"use strict";t.__esModule=!0;var i=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=m(n(10)),s=n(1),r=n(41),l=n(0),d=m(n(93)),c=n(2),u=n(5),h=n(8),p=m(n(201)),f=n(36);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.heights=[],n.ghostTable=new d.default(n.hot),n.samplesGenerator=new p.default((function(e,t){return e>=0?n.hot.getDataAtCell(e,t):-1===e?n.hot.getColHeader(t):null})),n.firstCalculation=!0,n.inProgress=!1,n.addHook("beforeRowResize",(function(e,t,i){return n.onBeforeRowResize(e,t,i)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 500}}]),o(t,[{key:"isEnabled",value:function(){return!0===this.hot.getSettings().autoRowSize||(0,c.isObject)(this.hot.getSettings().autoRowSize)}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",(function(){return e.onAfterLoadData()})),this.addHook("beforeChange",(function(t){return e.onBeforeChange(t)})),this.addHook("beforeColumnMove",(function(){return e.recalculateAllRowsHeight()})),this.addHook("beforeColumnResize",(function(){return e.recalculateAllRowsHeight()})),this.addHook("beforeColumnSort",(function(){return e.clearCache()})),this.addHook("beforeRender",(function(t){return e.onBeforeRender(t)})),this.addHook("beforeRowMove",(function(t,n){return e.onBeforeRowMove(t,n)})),this.addHook("modifyRowHeight",(function(t,n){return e.getRowHeight(n,t)})),this.addHook("modifyColumnHeaderHeight",(function(){return e.getColumnHeaderHeight()})),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"calculateRowsHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"==typeof e&&(e={from:e,to:e}),"number"==typeof n&&(n={from:n,to:n}),null!==this.hot.getColHeader(0)){var o=this.samplesGenerator.generateRowSamples(-1,n);this.ghostTable.addColumnHeadersRow(o.get(-1))}(0,u.rangeEach)(e.from,e.to,(function(e){(i||void 0===t.heights[e])&&t.samplesGenerator.generateRowSamples(e,n).forEach((function(e,n){t.ghostTable.addRow(n,e)}))})),this.ghostTable.rows.length&&(this.ghostTable.getHeights((function(e,n){t.heights[e]=n})),this.ghostTable.clean())}},{key:"calculateAllRowsHeight",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},i=0,o=this.hot.countRows()-1,a=null;this.inProgress=!0,this.firstCalculation&&this.getSyncCalculationLimit()&&(this.calculateRowsHeight({from:0,to:this.getSyncCalculationLimit()},n),this.firstCalculation=!1,i=this.getSyncCalculationLimit()+1),i<o?function s(){if(!e.hot)return(0,r.cancelAnimationFrame)(a),void(e.inProgress=!1);e.calculateRowsHeight({from:i,to:Math.min(i+t.CALCULATION_STEP,o)},n),(i=i+t.CALCULATION_STEP+1)<o?a=(0,r.requestAnimationFrame)(s):((0,r.cancelAnimationFrame)(a),e.inProgress=!1,e.hot.view.wt.wtOverlays.adjustElementsSize(!0),e.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&e.hot.view.wt.wtOverlays.leftOverlay.clone.draw())}():(this.inProgress=!1,this.hot.view.wt.wtOverlays.adjustElementsSize(!1))}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings().autoRowSize,t=e&&(0,c.hasOwnProperty)(e,"samplingRatio")?this.hot.getSettings().autoRowSize.samplingRatio:void 0,n=e&&(0,c.hasOwnProperty)(e,"allowSampleDuplicates")?this.hot.getSettings().autoRowSize.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllRowsHeight",value:function(){(0,l.isVisible)(this.hot.view.wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllRowsHeight())}},{key:"getSyncCalculationLimit",value:function(){var e=t.SYNC_CALCULATION_LIMIT,n=this.hot.countRows()-1;return(0,c.isObject)(this.hot.getSettings().autoRowSize)&&(e=this.hot.getSettings().autoRowSize.syncLimit,(0,f.isPercentValue)(e)?e=(0,u.valueAccordingPercent)(n,e):e>>=0),Math.min(e,n)}},{key:"getRowHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=t;return void 0!==this.heights[e]&&this.heights[e]>(t||0)&&(n=this.heights[e]),n}},{key:"getColumnHeaderHeight",value:function(){return this.heights[-1]}},{key:"getFirstVisibleRow",value:function(){var e=this.hot.view.wt;return e.wtViewport.rowsVisibleCalculator?e.wtTable.getFirstVisibleRow():e.wtViewport.rowsRenderCalculator?e.wtTable.getFirstRenderedRow():-1}},{key:"getLastVisibleRow",value:function(){var e=this.hot.view.wt;return e.wtViewport.rowsVisibleCalculator?e.wtTable.getLastVisibleRow():e.wtViewport.rowsRenderCalculator?e.wtTable.getLastRenderedRow():-1}},{key:"clearCache",value:function(){this.heights.length=0,this.heights[-1]=void 0}},{key:"clearCacheByRange",value:function(e){var t=this;"number"==typeof e&&(e={from:e,to:e}),(0,u.rangeEach)(Math.min(e.from,e.to),Math.max(e.from,e.to),(function(e){t.heights[e]=void 0}))}},{key:"isNeedRecalculate",value:function(){return!!(0,s.arrayFilter)(this.heights,(function(e){return void 0===e})).length}},{key:"onBeforeRender",value:function(){var e=this.hot.renderCall;this.calculateRowsHeight({from:this.getFirstVisibleRow(),to:this.getLastVisibleRow()},void 0,e);var t=this.hot.getSettings().fixedRowsBottom;if(t){var n=this.hot.countRows()-1;this.calculateRowsHeight({from:n-t,to:n})}this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllRowsHeight()}},{key:"onBeforeRowMove",value:function(e,t){this.clearCacheByRange({from:e,to:t}),this.calculateAllRowsHeight()}},{key:"onBeforeRowResize",value:function(e,t,n){return n&&(this.calculateRowsHeight(e,void 0,!0),t=this.getRowHeight(e)),t}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout((function(){e.hot&&e.recalculateAllRowsHeight()}),0)}},{key:"onBeforeChange",value:function(e){var t=null;1===e.length?t=e[0][0]:e.length>1&&(t={from:e[0][0],to:e[e.length-1][0]}),null!==t&&this.clearCacheByRange(t)}},{key:"destroy",value:function(){this.ghostTable.clean(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);(0,h.registerPlugin)("autoRowSize",_),t.default=_},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=n(0),s=n(2),r=n(11),l=_(n(10)),d=n(8),c=_(n(291)),u=_(n(16)),h=_(n(293)),p=_(n(294)),f=_(n(295)),m=_(n(296));function _(e){return e&&e.__esModule?e:{default:e}}u.default.getSingleton().register("beforeColumnSort"),u.default.getSingleton().register("afterColumnSort");var v="columnSorting",g="ascending",y="descending",b="asc",w="desc",k="none",C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sortIndicators=[],n.sortColumn=void 0,n.sortOrder=k,n.rowsMapper=new h.default(n),n.sortEmptyCells=!1,n.blockPluginTranslation=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().columnSorting}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.setPluginOptions(),(0,r.isUndefined)(this.hot.getSettings().observeChanges)&&this.enableObserveChangesPlugin(),this.addHook("afterTrimRow",(function(){return e.sortByPresetColumnAndOrder()})),this.addHook("afterUntrimRow",(function(){return e.sortByPresetColumnAndOrder()})),this.addHook("modifyRow",(function(t,n){return e.onModifyRow(t,n)})),this.addHook("unmodifyRow",(function(t,n){return e.onUnmodifyRow(t,n)})),this.addHook("afterUpdateSettings",(function(){return e.onAfterUpdateSettings()})),this.addHook("afterGetColHeader",(function(t,n){return e.onAfterGetColHeader(t,n)})),this.addHook("afterOnCellMouseDown",(function(t,n){return e.onAfterOnCellMouseDown(t,n)})),this.addHook("afterCreateRow",(function(t,n){return e.onAfterCreateRow(t,n)})),this.addHook("afterRemoveRow",(function(t,n){return e.onAfterRemoveRow(t,n)})),this.addHook("afterInit",(function(){return e.sortBySettings()})),this.addHook("afterLoadData",(function(){e.rowsMapper.clearMap(),e.hot.view&&e.sortBySettings()})),this.hot.view&&this.sortBySettings(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(e,t){this.setSortingColumn(e,t),(0,r.isUndefined)(this.sortColumn)||!1!==this.hot.runHooks("beforeColumnSort",this.sortColumn,this.sortOrder)&&(this.sortByPresetColumnAndOrder(),this.updateSortIndicator(),this.hot.runHooks("afterColumnSort",this.sortColumn,this.sortOrder),this.hot.render(),this.hot.view.wt.draw(!0),this.saveSortingState())}},{key:"isSorted",value:function(){return this.isEnabled()&&this.sortOrder!==k}},{key:"saveSortingState",value:function(){var e={};(0,r.isDefined)(this.sortColumn)&&(e.sortColumn=this.sortColumn),(0,r.isDefined)(this.sortOrder)&&(e.sortOrder=this.sortOrder),((0,s.hasOwnProperty)(e,"sortColumn")||(0,s.hasOwnProperty)(e,"sortOrder"))&&this.hot.runHooks("persistentStateSave","columnSorting",e)}},{key:"loadSortingState",value:function(){var e={};return this.hot.runHooks("persistentStateLoad","columnSorting",e),e.value}},{key:"setSortingColumn",value:function(e,t){if((0,r.isUndefined)(e))return this.sortColumn=void 0,void(this.sortOrder=k);if(this.sortColumn===e&&(0,r.isUndefined)(t))switch(this.sortOrder){case w:this.sortOrder=k;break;case b:this.sortOrder=w;break;default:this.sortOrder=b}else this.sortOrder=(0,r.isUndefined)(t)?b:t;this.sortColumn=e}},{key:"enableObserveChangesPlugin",value:function(){var e=this;this.hot._registerTimeout(setTimeout((function(){e.hot.updateSettings({observeChanges:!0})}),0))}},{key:"sortByPresetColumnAndOrder",value:function(){if(this.sortOrder!==k){var e=[],t=this.hot.getCellMeta(0,this.sortColumn),n=this.getSortFunctionForColumn(t),i=this.hot.countEmptyRows(),o=void 0;(0,r.isUndefined)(t.columnSorting.sortEmptyCells)&&(t.columnSorting={sortEmptyCells:this.sortEmptyCells}),o=this.hot.getSettings().maxRows===Number.POSITIVE_INFINITY?this.hot.countRows()-this.hot.getSettings().minSpareRows:this.hot.countRows()-i,this.blockPluginTranslation=!0;for(var a=0;a<o;a+=1)e.push([a,this.hot.getDataAtCell(a,this.sortColumn)]);(0,c.default)(e,n(this.sortOrder===b,t));for(var s=e.length;s<this.hot.countRows();s+=1)e.push([s,this.hot.getDataAtCell(s,this.sortColumn)]);this.blockPluginTranslation=!1,this.rowsMapper._arrayMap=e.map((function(e){return e[0]}))}else this.rowsMapper.clearMap()}},{key:"getSortFunctionForColumn",value:function(e){return e.sortFunction?e.sortFunction:"date"===e.type?p.default:"numeric"===e.type?f.default:m.default}},{key:"updateSortIndicator",value:function(){if(this.sortOrder!==k){var e=this.hot.getCellMeta(0,this.sortColumn);this.sortIndicators[this.sortColumn]=e.sortIndicator}}},{key:"setPluginOptions",value:function(){var e=this.hot.getSettings().columnSorting;(0,s.isObject)(e)?this.sortEmptyCells=e.sortEmptyCells||!1:this.sortEmptyCells=!1}},{key:"onModifyRow",value:function(e,t){if(!1===this.blockPluginTranslation&&t!==this.pluginName){var n=this.rowsMapper.getValueByIndex(e);e=null===n?e:n}return e}},{key:"onUnmodifyRow",value:function(e,t){return!1===this.blockPluginTranslation&&t!==this.pluginName&&(e=this.rowsMapper.getIndexByValue(e)),e}},{key:"onAfterGetColHeader",value:function(e,t){if(e<0||!t.parentNode)return!1;var n=t.querySelector(".colHeader"),i=t.parentNode.parentNode.childNodes,o=Array.prototype.indexOf.call(i,t.parentNode);o-=i.length,n&&(this.hot.getSettings().columnSorting&&e>=0&&-1===o&&(0,a.addClass)(n,v),(0,a.removeClass)(n,y),(0,a.removeClass)(n,g),this.sortIndicators[e]&&e===this.sortColumn&&(this.sortOrder===b?(0,a.addClass)(n,g):this.sortOrder===w&&(0,a.addClass)(n,y)))}},{key:"onAfterUpdateSettings",value:function(){this.sortBySettings()}},{key:"sortBySettings",value:function(){var e=this.hot.getSettings().columnSorting,t=this.loadSortingState(),n=void 0,i=void 0;(0,r.isUndefined)(t)?(n=e.column,i=e.sortOrder):(n=t.sortColumn,i=t.sortOrder),"number"==typeof n&&this.sort(n,i)}},{key:"onAfterCreateRow",value:function(e,t){this.rowsMapper.shiftItems(e,t)}},{key:"onAfterRemoveRow",value:function(e,t){this.rowsMapper.unshiftItems(e,t)}},{key:"onAfterOnCellMouseDown",value:function(e,t){t.row>-1||(0,a.hasClass)(e.realTarget,v)&&(t.col!==this.sortColumn&&(this.sortOrder=b),this.sort(t.col))}},{key:"destroy",value:function(){this.rowsMapper.destroy(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(l.default);(0,d.registerPlugin)("columnSorting",C),t.default=C},function(e,t,n){"use strict";t.__esModule=!0,t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(Math.abs(o-i)<=1)return[];var a=Math.ceil((i+o)/2);return e(t,n,i,a),e(t,n,a,o),r(t,n,i,a,o)},t.merge=r;var i,o=n(292),a=(i=o)&&i.__esModule?i:{default:i},s=function(e,t){var n=e.toString(),i=t.toString();return n===i?0:n<i?-1:1};function r(e,t,n,i,o){for(var s=new a.default,r=new a.default,l=i-n,d=o-i,c=Math.max(l,d),u=o-n,h=0;h<c;h+=1)h<l&&s.push(e[n+h]),h<d&&r.push(e[i+h]);for(var p=0;p<u;)s.first&&r.first?t(s.first.data,r.first.data)>0?e[n+p]=r.shift().data:e[n+p]=s.shift().data:s.first?e[n+p]=s.shift().data:e[n+p]=r.shift().data,p+=1;return e}},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function e(t){o(this,e),this.data=t,this.next=null,this.prev=null},s=function(){function e(){o(this,e),this.first=null,this.last=null}return i(e,[{key:"push",value:function(e){var t=new a(e);if(null===this.first)this.first=t,this.last=t;else{var n=this.last;this.last=t,t.prev=n,n.next=t}}},{key:"unshift",value:function(e){var t=new a(e);if(null===this.first)this.first=t,this.last=t;else{var n=this.first;this.first=t,t.next=n,n.prev=t}}},{key:"inorder",value:function(e){for(var t=this.first;t;)e(t),t=t.next}},{key:"remove",value:function(e){if(null===this.first)return!1;for(var t=this.first,n=void 0,i=void 0;t;){if(t.data===e)return n=t.next,i=t.prev,n&&(n.prev=i),i&&(i.next=n),t===this.first&&(this.first=n),t===this.last&&(this.last=i),!0;t=t.next}return!1}},{key:"hasCycle",value:function(){for(var e=this.first,t=this.first;;){if(null===e)return!1;if(null===(e=e.next))return!1;if((e=e.next)===(t=t.next))return!0}}},{key:"pop",value:function(){if(null===this.last)return null;var e=this.last;return this.last=this.last.prev,e}},{key:"shift",value:function(){if(null===this.first)return null;var e=this.first;return this.first=this.first.next,e}},{key:"recursiveReverse",value:function(){if(this.first){!function e(t,n){n&&(e(n,n.next),n.next=t)}(this.first,this.first.next),this.first.next=null;var e=this.first;this.first=this.last,this.last=e}}},{key:"reverse",value:function(){if(this.first&&this.first.next){for(var e=this.first.next,t=this.first,n=void 0;e;)n=e.next,e.next=t,t.prev=e,t=e,e=n;this.first.next=null,this.last.prev=null,n=this.first,this.first=t,this.last=n}}}]),e}();t.NodeStructure=a,t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(94),s=(i=a)&&i.__esModule?i:{default:i},r=n(2),l=n(5),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.columnSorting=t}return o(e,[{key:"createMap",value:function(e){var t=this,n=void 0===e?this._arrayMap.length:e;this._arrayMap.length=0,(0,l.rangeEach)(n-1,(function(e){t._arrayMap[e]=e}))}},{key:"destroy",value:function(){this._arrayMap=null}}]),e}();(0,r.mixin)(d,s.default),t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return function(n,i){if(n[1]===i[1])return 0;if((0,s.isEmpty)(n[1]))return(0,s.isEmpty)(i[1])?0:t.columnSorting.sortEmptyCells&&e?-1:1;if((0,s.isEmpty)(i[1]))return(0,s.isEmpty)(n[1])?0:t.columnSorting.sortEmptyCells&&e?1:-1;var o=(0,a.default)(n[1],t.dateFormat),r=(0,a.default)(i[1],t.dateFormat);return o.isValid()?r.isValid()?r.isAfter(o)?e?-1:1:r.isBefore(o)?e?1:-1:0:-1:1}};var i,o=n(57),a=(i=o)&&i.__esModule?i:{default:i},s=n(11)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return function(n,o){var a=parseFloat(n[1]),s=parseFloat(o[1]);if(a===s||isNaN(a)&&isNaN(s))return 0;if(t.columnSorting.sortEmptyCells){if((0,i.isEmpty)(n[1]))return e?-1:1;if((0,i.isEmpty)(o[1]))return e?1:-1}return isNaN(a)?1:isNaN(s)?-1:a<s?e?-1:1:a>s?e?1:-1:0}};var i=n(11)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return function(n,o){return"string"==typeof n[1]&&(n[1]=n[1].toLowerCase()),"string"==typeof o[1]&&(o[1]=o[1].toLowerCase()),n[1]===o[1]?0:(0,i.isEmpty)(n[1])?(0,i.isEmpty)(o[1])?0:t.columnSorting.sortEmptyCells&&e?-1:1:(0,i.isEmpty)(o[1])?(0,i.isEmpty)(n[1])?0:t.columnSorting.sortEmptyCells&&e?1:-1:isNaN(n[1])&&!isNaN(o[1])?e?1:-1:!isNaN(n[1])&&isNaN(o[1])?e?-1:1:(isNaN(n[1])||isNaN(o[1])||(n[1]=parseFloat(n[1]),o[1]=parseFloat(o[1])),n[1]<o[1]?e?-1:1:n[1]>o[1]?e?1:-1:0)}};var i=n(11)},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=n(0),s=n(2),r=m(n(6)),l=n(4),d=n(8),c=m(n(10)),u=m(n(298)),h=n(19),p=m(n(299)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));function m(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(300);var v=new WeakMap,g="comment",y="value",b="style",w="readOnly",k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.editor=null,n.displaySwitch=null,n.eventManager=null,n.range={},n.mouseDown=!1,n.contextMenuEvent=!1,n.timer=null,v.set(n,{tempEditorDimensions:{},cellBelowCursor:null}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().comments}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.editor||(this.editor=new u.default),this.eventManager||(this.eventManager=new r.default(this)),this.displaySwitch||(this.displaySwitch=new p.default(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",(function(t){return e.addToContextMenu(t)})),this.addHook("afterRenderer",(function(t,n,i,o,a,s){return e.onAfterRenderer(t,s)})),this.addHook("afterScrollHorizontally",(function(){return e.hide()})),this.addHook("afterScrollVertically",(function(){return e.hide()})),this.addHook("afterBeginEditing",(function(t){return e.onAfterBeginEditing(t)})),this.displaySwitch.addLocalHook("hide",(function(){return e.hide()})),this.displaySwitch.addLocalHook("show",(function(t,n){return e.showAtCell(t,n)})),this.registerListeners(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this),this.displaySwitch.updateDelay(this.getDisplayDelaySetting())}},{key:"disablePlugin",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"registerListeners",value:function(){var e=this;this.eventManager.addEventListener(document,"mouseover",(function(t){return e.onMouseOver(t)})),this.eventManager.addEventListener(document,"mousedown",(function(t){return e.onMouseDown(t)})),this.eventManager.addEventListener(document,"mouseup",(function(t){return e.onMouseUp(t)})),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",(function(t){return e.onEditorBlur(t)})),this.eventManager.addEventListener(this.editor.getInputElement(),"mousedown",(function(t){return e.onEditorMouseDown(t)})),this.eventManager.addEventListener(this.editor.getInputElement(),"mouseup",(function(t){return e.onEditorMouseUp(t)}))}},{key:"setRange",value:function(e){this.range=e}},{key:"clearRange",value:function(){this.range={}}},{key:"targetIsCellWithComment",value:function(e){var t=(0,a.closest)(e.target,"TD","TBODY");return!!(t&&(0,a.hasClass)(t,"htCommentCell")&&(0,a.closest)(t,[this.hot.rootElement]))}},{key:"targetIsCommentTextArea",value:function(e){return this.editor.getInputElement()===e.target}},{key:"setComment",value:function(e){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var t=this.editor.getValue(),n="";null!=e?n=e:null!=t&&(n=t);var i=this.range.from.row,o=this.range.from.col;this.updateCommentMeta(i,o,_({},y,n)),this.hot.render()}},{key:"setCommentAtCell",value:function(e,t,n){this.setRange({from:new l.CellCoords(e,t)}),this.setComment(n)}},{key:"removeComment",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,g,void 0),e&&this.hot.render(),this.hide()}},{key:"removeCommentAtCell",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.setRange({from:new l.CellCoords(e,t)}),this.removeComment(n)}},{key:"getComment",value:function(){var e=this.range.from.row,t=this.range.from.col;return this.getCommentMeta(e,t,y)}},{key:"getCommentAtCell",value:function(e,t){return this.getCommentMeta(e,t,y)}},{key:"show",value:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var e=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.refreshEditor(!0),this.editor.setValue(e[g]?e[g][y]:""),this.editor.hidden&&this.editor.show(),!0}},{key:"showAtCell",value:function(e,t){return this.setRange({from:new l.CellCoords(e,t)}),this.show()}},{key:"hide",value:function(){this.editor.hidden||this.editor.hide()}},{key:"refreshEditor",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.range.from&&this.editor.isVisible()){var e=(0,a.getScrollableElement)(this.hot.view.wt.wtTable.TABLE),t=this.hot.view.wt.wtTable.getCell(this.range.from),n=this.range.from.row,i=this.range.from.col,o=(0,a.offset)(t),s=this.hot.view.wt.wtTable.getStretchedColumnWidth(i),r=o.top<0?0:o.top,l=o.left;this.hot.view.wt.wtViewport.hasVerticalScroll()&&e!==window&&(r-=this.hot.view.wt.wtOverlays.topOverlay.getScrollPosition()),this.hot.view.wt.wtViewport.hasHorizontalScroll()&&e!==window&&(l-=this.hot.view.wt.wtOverlays.leftOverlay.getScrollPosition());var d=l+s,c=r,u=this.getCommentMeta(n,i,b),h=this.getCommentMeta(n,i,w);u?this.editor.setSize(u.width,u.height):this.editor.resetSize(),this.editor.setReadOnlyState(h),this.editor.setPosition(d,c)}}},{key:"checkSelectionCommentsConsistency",value:function(){var e=this.hot.getSelectedRangeLast();if(!e)return!1;var t=!1,n=e.from;return this.getCommentMeta(n.row,n.col,y)&&(t=!0),t}},{key:"updateCommentMeta",value:function(e,t,n){var i=this.hot.getCellMeta(e,t)[g],o=void 0;i?(o=(0,s.deepClone)(i),(0,s.deepExtend)(o,n)):o=n,this.hot.setCellMeta(e,t,g,o)}},{key:"getCommentMeta",value:function(e,t,n){var i=this.hot.getCellMeta(e,t);if(i[g])return i[g][n]}},{key:"onMouseDown",value:function(e){if(this.mouseDown=!0,this.hot.view&&this.hot.view.wt){if(!this.contextMenuEvent&&!this.targetIsCommentTextArea(e)){var t=(0,a.closest)(e.target,"TD","TBODY"),n=null;t&&(n=this.hot.view.wt.wtTable.getCoords(t)),(!t||this.range.from&&n&&(this.range.from.row!==n.row||this.range.from.col!==n.col))&&this.hide()}this.contextMenuEvent=!1}}},{key:"onMouseOver",value:function(e){var t=v.get(this);if(t.cellBelowCursor=document.elementFromPoint(e.clientX,e.clientY),!(this.mouseDown||this.editor.isFocused()||(0,a.hasClass)(e.target,"wtBorder")||t.cellBelowCursor!==e.target)&&this.editor)if(this.targetIsCellWithComment(e)){var n=this.hot.view.wt.wtTable.getCoords(e.target),i={from:new l.CellCoords(n.row,n.col)};this.displaySwitch.show(i)}else(0,a.isChildOf)(e.target,document)&&!this.targetIsCommentTextArea(e)&&this.displaySwitch.hide()}},{key:"onMouseUp",value:function(e){this.mouseDown=!1}},{key:"onAfterRenderer",value:function(e,t){t[g]&&t[g][y]&&(0,a.addClass)(e,t.commentedCellClassName)}},{key:"onEditorBlur",value:function(e){this.setComment()}},{key:"onEditorMouseDown",value:function(e){v.get(this).tempEditorDimensions={width:(0,a.outerWidth)(e.target),height:(0,a.outerHeight)(e.target)}}},{key:"onEditorMouseUp",value:function(e){var t=v.get(this),n=(0,a.outerWidth)(e.target),i=(0,a.outerHeight)(e.target);n===t.tempEditorDimensions.width+1&&i===t.tempEditorDimensions.height+2||this.updateCommentMeta(this.range.from.row,this.range.from.col,_({},b,{width:n,height:i}))}},{key:"onContextMenuAddComment",value:function(){var e=this;this.displaySwitch.cancelHiding();var t=this.hot.getSelectedRangeLast();this.contextMenuEvent=!0,this.setRange({from:t.from}),this.show(),setTimeout((function(){e.hot&&(e.hot.deselectCell(),e.editor.focus())}),10)}},{key:"onContextMenuRemoveComment",value:function(){this.contextMenuEvent=!0;for(var e=this.hot.getSelectedRangeLast(),t=e.from,n=e.to,i=t.row;i<=n.row;i++)for(var o=t.col;o<=n.col;o++)this.removeCommentAtCell(i,o,!1);this.hot.render()}},{key:"onContextMenuMakeReadOnly",value:function(){this.contextMenuEvent=!0;for(var e=this.hot.getSelectedRangeLast(),t=e.from,n=e.to,i=t.row;i<=n.row;i++)for(var o=t.col;o<=n.col;o++){var a=!!this.getCommentMeta(i,o,w);this.updateCommentMeta(i,o,_({},w,!a))}}},{key:"addToContextMenu",value:function(e){var t=this;e.items.push({name:"---------"},{key:"commentsAddEdit",name:function(){return t.checkSelectionCommentsConsistency()?t.hot.getTranslatedPhrase(f.CONTEXTMENU_ITEMS_EDIT_COMMENT):t.hot.getTranslatedPhrase(f.CONTEXTMENU_ITEMS_ADD_COMMENT)},callback:function(){return t.onContextMenuAddComment()},disabled:function(){return!(this.getSelectedLast()&&!this.selection.isSelectedByCorner())}},{key:"commentsRemove",name:function(){return this.getTranslatedPhrase(f.CONTEXTMENU_ITEMS_REMOVE_COMMENT)},callback:function(){return t.onContextMenuRemoveComment()},disabled:function(){return t.hot.selection.isSelectedByCorner()}},{key:"commentsReadOnly",name:function(){var e=this,t=this.getTranslatedPhrase(f.CONTEXTMENU_ITEMS_READ_ONLY_COMMENT);return(0,h.checkSelectionConsistency)(this.getSelectedRangeLast(),(function(t,n){var i=e.getCellMeta(t,n)[g];if(i&&(i=i[w]),i)return!0}))&&(t=(0,h.markLabelAsSelected)(t)),t},callback:function(){return t.onContextMenuMakeReadOnly()},disabled:function(){return t.hot.selection.isSelectedByCorner()||!t.checkSelectionCommentsConsistency()}})}},{key:"getDisplayDelaySetting",value:function(){var e=this.hot.getSettings().comments;if((0,s.isObject)(e))return e.displayDelay}},{key:"onAfterBeginEditing",value:function(e,t){this.hide()}},{key:"destroy",value:function(){this.editor&&this.editor.destroy(),this.displaySwitch&&this.displaySwitch.destroy(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(c.default);(0,d.registerPlugin)("comments",k),t.default=k},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.hidden=!0,this.hide()}return i(e,null,[{key:"CLASS_EDITOR_CONTAINER",get:function(){return"htCommentsContainer"}},{key:"CLASS_EDITOR",get:function(){return"htComments"}},{key:"CLASS_INPUT",get:function(){return"htCommentTextArea"}},{key:"CLASS_CELL",get:function(){return"htCommentCell"}}]),i(e,[{key:"setPosition",value:function(e,t){this.editorStyle.left=e+"px",this.editorStyle.top=t+"px"}},{key:"setSize",value:function(e,t){if(e&&t){var n=this.getInputElement();n.style.width=e+"px",n.style.height=t+"px"}}},{key:"resetSize",value:function(){var e=this.getInputElement();e.style.width="",e.style.height=""}},{key:"setReadOnlyState",value:function(e){this.getInputElement().readOnly=e}},{key:"show",value:function(){this.editorStyle.display="block",this.hidden=!1}},{key:"hide",value:function(){this.editorStyle.display="none",this.hidden=!0}},{key:"isVisible",value:function(){return"block"===this.editorStyle.display}},{key:"setValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e||"",this.getInputElement().value=e}},{key:"getValue",value:function(){return this.getInputElement().value}},{key:"isFocused",value:function(){return document.activeElement===this.getInputElement()}},{key:"focus",value:function(){this.getInputElement().focus()}},{key:"createEditor",value:function(){var t,n=document.querySelector("."+e.CLASS_EDITOR_CONTAINER),i=void 0;return n||(n=document.createElement("div"),(0,o.addClass)(n,e.CLASS_EDITOR_CONTAINER),document.body.appendChild(n)),i=document.createElement("div"),(0,o.addClass)(i,e.CLASS_EDITOR),t=document.createElement("textarea"),(0,o.addClass)(t,e.CLASS_INPUT),i.appendChild(t),n.appendChild(i),i}},{key:"getInputElement",value:function(){return this.editor.querySelector("."+e.CLASS_INPUT)}},{key:"destroy",value:function(){this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null}}]),e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(43),s=n(2),r=n(47),l=(i=r)&&i.__esModule?i:{default:i},d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wasLastActionShow=!0,this.showDebounced=null,this.hidingTimer=null,this.updateDelay(t)}return o(e,[{key:"hide",value:function(){var e=this;this.wasLastActionShow=!1,this.hidingTimer=setTimeout((function(){!1===e.wasLastActionShow&&e.runLocalHooks("hide")}),250)}},{key:"show",value:function(e){this.wasLastActionShow=!0,this.showDebounced(e)}},{key:"cancelHiding",value:function(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}},{key:"updateDelay",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.showDebounced=(0,a.debounce)((function(t){e.wasLastActionShow&&e.runLocalHooks("show",t.from.row,t.from.col)}),t)}},{key:"destroy",value:function(){this.clearLocalHooks()}}]),e}();(0,s.mixin)(d,l.default),t.default=d},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=_(n(10)),s=_(n(16)),r=n(1),l=_(n(302)),d=_(n(6)),c=_(n(303)),u=_(n(315)),h=n(8),p=n(13),f=n(0),m=n(96);function _(e){return e&&e.__esModule?e:{default:e}}n(317),s.default.getSingleton().register("afterContextMenuDefaultOptions"),s.default.getSingleton().register("beforeContextMenuShow"),s.default.getSingleton().register("afterContextMenuShow"),s.default.getSingleton().register("afterContextMenuHide"),s.default.getSingleton().register("afterContextMenuExecute");var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.eventManager=new d.default(n),n.commandExecutor=new l.default(n.hot),n.itemsFactory=null,n.menu=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"DEFAULT_ITEMS",get:function(){return[m.ROW_ABOVE,m.ROW_BELOW,m.SEPARATOR,m.COLUMN_LEFT,m.COLUMN_RIGHT,m.SEPARATOR,m.REMOVE_ROW,m.REMOVE_COLUMN,m.SEPARATOR,m.UNDO,m.REDO,m.SEPARATOR,m.READ_ONLY,m.SEPARATOR,m.ALIGNMENT]}}]),o(t,[{key:"isEnabled",value:function(){return this.hot.getSettings().contextMenu}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){this.itemsFactory=new c.default(this.hot,t.DEFAULT_ITEMS);var n=this.hot.getSettings().contextMenu,o={items:this.itemsFactory.getItems(n)};this.registerEvents(),"function"==typeof n.callback&&this.commandExecutor.setCommonCallback(n.callback),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this);var a=function(){if(e.hot){e.hot.runHooks("afterContextMenuDefaultOptions",o),e.itemsFactory.setPredefinedItems(o.items);var t=e.itemsFactory.getItems(n);e.menu=new u.default(e.hot,{className:"htContextMenu",keepInViewport:!0}),e.hot.runHooks("beforeContextMenuSetItems",t),e.menu.setMenuItems(t),e.menu.addLocalHook("beforeOpen",(function(){return e.onMenuBeforeOpen()})),e.menu.addLocalHook("afterOpen",(function(){return e.onMenuAfterOpen()})),e.menu.addLocalHook("afterClose",(function(){return e.onMenuAfterClose()})),e.menu.addLocalHook("executeCommand",(function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.executeCommand.apply(e,n)})),(0,r.arrayEach)(t,(function(t){return e.commandExecutor.registerCommand(t.key,t)}))}};this.callOnPluginsReady((function(){e.isPluginsReady?setTimeout(a,0):a()}))}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(this.hot.rootElement,"contextmenu",(function(t){return e.onContextMenu(t)}))}},{key:"open",value:function(e){this.menu&&(this.menu.open(),this.menu.setPosition({top:parseInt((0,p.pageY)(e),10)-(0,f.getWindowScrollTop)(),left:parseInt((0,p.pageX)(e),10)-(0,f.getWindowScrollLeft)()}),this.menu.hotMenu.isHotTableEnv=this.hot.isHotTableEnv)}},{key:"close",value:function(){this.menu&&this.menu.close()}},{key:"executeCommand",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.commandExecutor.execute.apply(this.commandExecutor,t)}},{key:"onContextMenu",value:function(e){var t=this.hot.getSettings(),n=t.rowHeaders,i=t.colHeaders,o=e.realTarget;this.close(),(0,f.hasClass)(o,"handsontableInput")||(e.preventDefault(),(0,p.stopPropagation)(e),(n||i||function(e){return"TD"===e.nodeName||"TD"===e.parentNode.nodeName}(o)||(0,f.hasClass)(o,"current")&&(0,f.hasClass)(o,"wtBorder"))&&this.open(e))}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeContextMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterContextMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);v.SEPARATOR={name:m.SEPARATOR},(0,h.registerPlugin)("contextMenu",v),t.default=v},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=n(2),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.commands={},this.commonCallback=null}return i(e,[{key:"registerCommand",value:function(e,t){this.commands[e]=t}},{key:"setCommonCallback",value:function(e){this.commonCallback=e}},{key:"execute",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var r=e.split(":");e=r[0];var l=2===r.length?r[1]:null,d=this.commands[e];if(!d)throw new Error("Menu command '"+e+"' not exists.");if(l&&d.submenu&&(d=function(e,t){var n=void 0;return(0,o.arrayEach)(t,(function(t){var i=t.key?t.key.split(":"):null;if(Array.isArray(i)&&i[1]===e)return n=t,!1})),n}(l,d.submenu.items)),!0!==d.disabled&&("function"!=typeof d.disabled||!0!==d.disabled.call(this.hot))&&!(0,a.hasOwnProperty)(d,"submenu")){var c=[];"function"==typeof d.callback&&c.push(d.callback),"function"==typeof this.commonCallback&&c.push(this.commonCallback),i.unshift(r.join(":")),(0,o.arrayEach)(c,(function(e){return e.apply(t.hot,i)}))}}}]),e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),a=n(1),s=n(96),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.predefinedItems=(0,s.predefinedItems)(),this.defaultOrderPattern=n}return i(e,[{key:"setPredefinedItems",value:function(e){var t=this,n={};this.defaultOrderPattern.length=0,(0,o.objectEach)(e,(function(e,i){var o="";e.name===s.SEPARATOR?(n[s.SEPARATOR]=e,o=s.SEPARATOR):isNaN(parseInt(i,10))?(e.key=void 0===e.key?i:e.key,n[i]=e,o=e.key):(n[e.key]=e,o=e.key),t.defaultOrderPattern.push(o)})),this.predefinedItems=n}},{key:"getItems",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[];return e&&e.items?e=e.items:Array.isArray(e)||(e=t),(0,o.isObject)(e)?(0,o.objectEach)(e,(function(e,t){var a=n["string"==typeof e?e:t];a||(a=e),(0,o.isObject)(e)?(0,o.extend)(a,e):"string"==typeof a&&(a={name:a}),void 0===a.key&&(a.key=t),i.push(a)})):(0,a.arrayEach)(e,(function(e,t){var a=n[e];!a&&s.ITEMS.indexOf(e)>=0||(a||(a={name:e,key:""+t}),(0,o.isObject)(e)&&(0,o.extend)(a,e),void 0===a.key&&(a.key=t),i.push(a))})),i}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,this.defaultOrderPattern,this.predefinedItems)}}]),e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0,t.default=function(){return{key:s,name:function(){return this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_ALIGNMENT)},disabled:function(){return!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:s+":left",name:function(){var e=this,t=this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT);return(0,i.checkSelectionConsistency)(this.getSelectedRange(),(function(t,n){var i=e.getCellMeta(t,n).className;if(i&&-1!==i.indexOf("htLeft"))return!0}))&&(t=(0,i.markLabelAsSelected)(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=(0,i.getAlignmentClasses)(t,(function(t,n){return e.getCellMeta(t,n).className})),o="horizontal",a="htLeft";this.runHooks("beforeCellAlignment",n,t,o,a),(0,i.align)(t,o,a,(function(t,n){return e.getCellMeta(t,n)}),(function(t,n,i,o){return e.setCellMeta(t,n,i,o)})),this.render()},disabled:!1},{key:s+":center",name:function(){var e=this,t=this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER);return(0,i.checkSelectionConsistency)(this.getSelectedRange(),(function(t,n){var i=e.getCellMeta(t,n).className;if(i&&-1!==i.indexOf("htCenter"))return!0}))&&(t=(0,i.markLabelAsSelected)(t)),t},callback:function(e,t){var n=this,o=this.getSelectedRange(),a=(0,i.getAlignmentClasses)(o,(function(e,t){return n.getCellMeta(e,t).className})),s="horizontal",r="htCenter";this.runHooks("beforeCellAlignment",a,o,s,r),(0,i.align)(o,s,r,(function(e,t){return n.getCellMeta(e,t)}),(function(e,t,i,o){return n.setCellMeta(e,t,i,o)})),this.render()},disabled:!1},{key:s+":right",name:function(){var e=this,t=this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT);return(0,i.checkSelectionConsistency)(this.getSelectedRange(),(function(t,n){var i=e.getCellMeta(t,n).className;if(i&&-1!==i.indexOf("htRight"))return!0}))&&(t=(0,i.markLabelAsSelected)(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=(0,i.getAlignmentClasses)(t,(function(t,n){return e.getCellMeta(t,n).className})),o="horizontal",a="htRight";this.runHooks("beforeCellAlignment",n,t,o,a),(0,i.align)(t,o,a,(function(t,n){return e.getCellMeta(t,n)}),(function(t,n,i,o){return e.setCellMeta(t,n,i,o)})),this.render()},disabled:!1},{key:s+":justify",name:function(){var e=this,t=this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY);return(0,i.checkSelectionConsistency)(this.getSelectedRange(),(function(t,n){var i=e.getCellMeta(t,n).className;if(i&&-1!==i.indexOf("htJustify"))return!0}))&&(t=(0,i.markLabelAsSelected)(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=(0,i.getAlignmentClasses)(t,(function(t,n){return e.getCellMeta(t,n).className})),o="horizontal",a="htJustify";this.runHooks("beforeCellAlignment",n,t,o,a),(0,i.align)(t,o,a,(function(t,n){return e.getCellMeta(t,n)}),(function(t,n,i,o){return e.setCellMeta(t,n,i,o)})),this.render()},disabled:!1},{name:o.KEY},{key:s+":top",name:function(){var e=this,t=this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_ALIGNMENT_TOP);return(0,i.checkSelectionConsistency)(this.getSelectedRange(),(function(t,n){var i=e.getCellMeta(t,n).className;if(i&&-1!==i.indexOf("htTop"))return!0}))&&(t=(0,i.markLabelAsSelected)(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=(0,i.getAlignmentClasses)(t,(function(t,n){return e.getCellMeta(t,n).className})),o="vertical",a="htTop";this.runHooks("beforeCellAlignment",n,t,o,a),(0,i.align)(t,o,a,(function(t,n){return e.getCellMeta(t,n)}),(function(t,n,i,o){return e.setCellMeta(t,n,i,o)})),this.render()},disabled:!1},{key:s+":middle",name:function(){var e=this,t=this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE);return(0,i.checkSelectionConsistency)(this.getSelectedRange(),(function(t,n){var i=e.getCellMeta(t,n).className;if(i&&-1!==i.indexOf("htMiddle"))return!0}))&&(t=(0,i.markLabelAsSelected)(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=(0,i.getAlignmentClasses)(t,(function(t,n){return e.getCellMeta(t,n).className})),o="vertical",a="htMiddle";this.runHooks("beforeCellAlignment",n,t,o,a),(0,i.align)(t,o,a,(function(t,n){return e.getCellMeta(t,n)}),(function(t,n,i,o){return e.setCellMeta(t,n,i,o)})),this.render()},disabled:!1},{key:s+":bottom",name:function(){var e=this,t=this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM);return(0,i.checkSelectionConsistency)(this.getSelectedRange(),(function(t,n){var i=e.getCellMeta(t,n).className;if(i&&-1!==i.indexOf("htBottom"))return!0}))&&(t=(0,i.markLabelAsSelected)(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=(0,i.getAlignmentClasses)(t,(function(t,n){return e.getCellMeta(t,n).className})),o="vertical",a="htBottom";this.runHooks("beforeCellAlignment",n,t,o,a),(0,i.align)(t,o,a,(function(t,n){return e.getCellMeta(t,n)}),(function(t,n,i,o){return e.setCellMeta(t,n,i,o)})),this.render()},disabled:!1}]}}};var i=n(19),o=n(95),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),s=t.KEY="alignment"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(){return{key:s,name:function(){return this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_CLEAR_COLUMN)},callback:function(e,t){var n=t[0].start.col;this.countRows()&&this.populateFromArray(0,n,[[null]],Math.max(t[0].start.row,t[0].end.row),n,"ContextMenu.clearColumn")},disabled:function(){var e=(0,o.getValidSelection)(this);if(!e)return!0;var t=i(e[0],4),n=t[0],a=t[1],s=t[2],r=(t[3],[n,0,s,this.countCols()-1].join(",")===e.join(","));return a<0||this.countCols()>=this.getSettings().maxCols||r}}};var o=n(19),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),s=t.KEY="clear_column"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(){return{key:s,name:function(){return this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_INSERT_LEFT)},callback:function(e,t){var n=t[Math.max(t.length-1,0)];this.alter("insert_col",n.start.col,1,"ContextMenu.columnLeft")},disabled:function(){var e=(0,o.getValidSelection)(this);if(!e)return!0;if(!this.isColumnModificationAllowed())return!0;var t=i(e[0],4),n=t[0],a=t[1],s=t[2],r=(t[3],[n,0,s,this.countCols()-1].join(",")===e.join(",")),l=1===this.countCols();return a<0||this.countCols()>=this.getSettings().maxCols||!l&&r},hidden:function(){return!this.getSettings().allowInsertColumn}}};var o=n(19),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),s=t.KEY="col_left"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(){return{key:s,name:function(){return this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_INSERT_RIGHT)},callback:function(e,t){var n=t[Math.max(t.length-1,0)];this.alter("insert_col",n.end.col+1,1,"ContextMenu.columnRight")},disabled:function(){var e=(0,o.getValidSelection)(this);if(!e)return!0;if(!this.isColumnModificationAllowed())return!0;var t=i(e[0],4),n=t[0],a=t[1],s=t[2],r=(t[3],[n,0,s,this.countCols()-1].join(",")===e.join(",")),l=1===this.countCols();return a<0||this.countCols()>=this.getSettings().maxCols||!l&&r},hidden:function(){return!this.getSettings().allowInsertColumn}}};var o=n(19),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),s=t.KEY="col_right"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0,t.default=function(){return{key:s,name:function(){var e=this,t=this.getTranslatedPhrase(a.CONTEXTMENU_ITEMS_READ_ONLY);return(0,i.checkSelectionConsistency)(this.getSelectedRange(),(function(t,n){return e.getCellMeta(t,n).readOnly}))&&(t=(0,i.markLabelAsSelected)(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=(0,i.checkSelectionConsistency)(t,(function(t,n){return e.getCellMeta(t,n).readOnly}));(0,o.arrayEach)(t,(function(t){t.forAll((function(t,i){e.setCellMeta(t,i,"readOnly",!n)}))})),this.render()},disabled:function(){return!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())}}};var i=n(19),o=n(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),s=t.KEY="make_read_only"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0,t.default=function(){return{key:o,name:function(){return this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_REDO)},callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),o=t.KEY="redo"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(){return{key:r,name:function(){var e=this.getSelected(),t=0;if(e)if(e.length>1)t=1;else{var n=i(e[0],4);n[1]-n[3]!=0&&(t=1)}return this.getTranslatedPhrase(s.CONTEXTMENU_ITEMS_REMOVE_COLUMN,t)},callback:function(){this.alter("remove_col",(0,a.transformSelectionToColumnDistance)(this.getSelected()),null,"ContextMenu.removeColumn")},disabled:function(){var e=(0,o.getValidSelection)(this),t=this.countCols();return!e||this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner()||!this.isColumnModificationAllowed()||!t},hidden:function(){return!this.getSettings().allowRemoveColumn}}};var o=n(19),a=(n(1),n(92)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),r=t.KEY="remove_col"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(){return{key:r,name:function(){var e=this.getSelected(),t=0;if(e)if(e.length>1)t=1;else{var n=i(e[0],3);n[0]-n[2]!=0&&(t=1)}return this.getTranslatedPhrase(s.CONTEXTMENU_ITEMS_REMOVE_ROW,t)},callback:function(){this.alter("remove_row",(0,a.transformSelectionToRowDistance)(this.getSelected()),null,"ContextMenu.removeRow")},disabled:function(){var e=(0,o.getValidSelection)(this),t=this.countRows();return!e||this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner()||!t},hidden:function(){return!this.getSettings().allowRemoveRow}}};var o=n(19),a=(n(1),n(92)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),r=t.KEY="remove_row"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0,t.default=function(){return{key:a,name:function(){return this.getTranslatedPhrase(o.CONTEXTMENU_ITEMS_ROW_ABOVE)},callback:function(e,t){var n=t[Math.max(t.length-1,0)];this.alter("insert_row",n.start.row,1,"ContextMenu.rowAbove")},disabled:function(){return!(0,i.getValidSelection)(this)||this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden:function(){return!this.getSettings().allowInsertRow}}};var i=n(19),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),a=t.KEY="row_above"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0,t.default=function(){return{key:a,name:function(){return this.getTranslatedPhrase(o.CONTEXTMENU_ITEMS_ROW_BELOW)},callback:function(e,t){var n=t[Math.max(t.length-1,0)];this.alter("insert_row",n.end.row+1,1,"ContextMenu.rowBelow")},disabled:function(){return!(0,i.getValidSelection)(this)||this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden:function(){return!this.getSettings().allowInsertRow}}};var i=n(19),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),a=t.KEY="row_below"},function(e,t,n){"use strict";t.__esModule=!0,t.KEY=void 0,t.default=function(){return{key:o,name:function(){return this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_UNDO)},callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),o=t.KEY="undo"},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=v(n(89)),a=n(0),s=n(1),r=v(n(316)),l=v(n(6)),d=n(2),c=n(11),u=n(43),h=n(19),p=n(21),f=v(n(47)),m=n(96),_=n(13);function v(e){return e&&e.__esModule?e:{default:e}}var g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.options=n||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:215},this.eventManager=new l.default(this),this.container=this.createContainer(this.options.name),this.hotMenu=null,this.hotSubMenus={},this.parentMenu=this.options.parent||null,this.menuItems=null,this.origOutsideClickDeselects=null,this.keyEvent=!1,this.offset={above:0,below:0,left:0,right:0},this._afterScrollCallback=null,this.registerEvents()}return i(e,[{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(document.documentElement,"mousedown",(function(t){return e.onDocumentMouseDown(t)}))}},{key:"setMenuItems",value:function(e){this.menuItems=e}},{key:"setOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.offset[e]=t}},{key:"isSubMenu",value:function(){return null!==this.parentMenu}},{key:"open",value:function(){var e=this;this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";var t=(0,u.debounce)((function(t){return e.openSubMenu(t)}),300),n=this.options.minWidth||215,i=(0,s.arrayFilter)(this.menuItems,(function(t){return(0,h.isItemHidden)(t,e.hot)})),a={data:i=(0,h.filterSeparators)(i,m.SEPARATOR),colHeaders:!1,autoColumnSize:!0,modifyColWidth:function(e){return(0,c.isDefined)(e)&&e<n?n:e},autoRowSize:!1,readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:function(t,n,i,o,a,s){return e.menuItemRenderer(t,n,i,o,a,s)}}],renderAllRows:!0,fragmentSelection:"cell",disableVisualSelection:"area",beforeKeyDown:function(t){return e.onBeforeKeyDown(t)},afterOnCellMouseOver:function(n,i,o){e.isAllSubMenusClosed()?t(i.row):e.openSubMenu(i.row)},rowHeights:function(e){return i[e].name===m.SEPARATOR?1:23}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new o.default(this.container,a),this.hotMenu.addHook("afterInit",(function(){return e.onAfterInit()})),this.hotMenu.addHook("afterSelection",(function(){return e.onAfterSelection.apply(e,arguments)})),this.hotMenu.init(),this.hotMenu.listen(),this.blockMainTableCallbacks(),this.runLocalHooks("afterOpen")}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isOpened()&&(e&&this.parentMenu?this.parentMenu.close():(this.closeAllSubMenus(),this.container.style.display="none",this.releaseMainTableCallbacks(),this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.parentMenu&&this.parentMenu.hotMenu.listen()))}},{key:"openSubMenu",value:function(t){if(!this.hotMenu)return!1;var n=this.hotMenu.getCell(t,0);if(this.closeAllSubMenus(),!n||!(0,h.hasSubMenu)(n))return!1;var i=this.hotMenu.getSourceDataAtRow(t),o=new e(this.hot,{parent:this,name:i.name,className:this.options.className,keepInViewport:!0});return o.setMenuItems(i.submenu.items),o.open(),o.setPosition(n.getBoundingClientRect()),this.hotSubMenus[i.key]=o,o}},{key:"closeSubMenu",value:function(e){var t=this.hotMenu.getSourceDataAtRow(e),n=this.hotSubMenus[t.key];n&&(n.destroy(),delete this.hotSubMenus[t.key])}},{key:"closeAllSubMenus",value:function(){var e=this;(0,s.arrayEach)(this.hotMenu.getData(),(function(t,n){return e.closeSubMenu(n)}))}},{key:"isAllSubMenusClosed",value:function(){return 0===Object.keys(this.hotSubMenus).length}},{key:"destroy",value:function(){this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy()}},{key:"isOpened",value:function(){return null!==this.hotMenu}},{key:"executeCommand",value:function(e){if(this.isOpened()&&this.hotMenu.getSelectedLast()){var t=this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]);if(this.runLocalHooks("select",t,e),!1!==t.isCommand&&t.name!==m.SEPARATOR){var n=this.hot.getSelectedRange(),i=n?(0,h.normalizeSelection)(n):[],o=!0;(!0===t.disabled||"function"==typeof t.disabled&&!0===t.disabled.call(this.hot)||t.submenu)&&(o=!1),this.runLocalHooks("executeCommand",t.key,i,e),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",t.key,i,e),o&&this.close(!0)}}}},{key:"setPosition",value:function(e){var t=new r.default(e);this.options.keepInViewport?(t.fitsBelow(this.container)?this.setPositionBelowCursor(t):t.fitsAbove(this.container)?this.setPositionAboveCursor(t):this.setPositionBelowCursor(t),t.fitsOnRight(this.container)?this.setPositionOnRightOfCursor(t):this.setPositionOnLeftOfCursor(t)):(this.setPositionBelowCursor(t),this.setPositionOnRightOfCursor(t))}},{key:"setPositionAboveCursor",value:function(e){var t=this.offset.above+e.top-this.container.offsetHeight;this.isSubMenu()&&(t=e.top+e.cellHeight-this.container.offsetHeight+3),this.container.style.top=t+"px"}},{key:"setPositionBelowCursor",value:function(e){var t=this.offset.below+e.top;this.isSubMenu()&&(t=e.top-1),this.container.style.top=t+"px"}},{key:"setPositionOnRightOfCursor",value:function(e){var t=void 0;t=this.isSubMenu()?1+e.left+e.cellWidth:this.offset.right+1+e.left,this.container.style.left=t+"px"}},{key:"setPositionOnLeftOfCursor",value:function(e){var t=this.offset.left+e.left-this.container.offsetWidth+(0,a.getScrollbarWidth)()+4;this.container.style.left=t+"px"}},{key:"selectFirstCell",value:function(){var e=this.hotMenu.getCell(0,0);(0,h.isSeparator)(e)||(0,h.isDisabled)(e)||(0,h.isSelectionDisabled)(e)?this.selectNextCell(0,0):this.hotMenu.selectCell(0,0)}},{key:"selectLastCell",value:function(){var e=this.hotMenu.countRows()-1,t=this.hotMenu.getCell(e,0);(0,h.isSeparator)(t)||(0,h.isDisabled)(t)||(0,h.isSelectionDisabled)(t)?this.selectPrevCell(e,0):this.hotMenu.selectCell(e,0)}},{key:"selectNextCell",value:function(e,t){var n=e+1,i=n<this.hotMenu.countRows()?this.hotMenu.getCell(n,t):null;i&&((0,h.isSeparator)(i)||(0,h.isDisabled)(i)||(0,h.isSelectionDisabled)(i)?this.selectNextCell(n,t):this.hotMenu.selectCell(n,t))}},{key:"selectPrevCell",value:function(e,t){var n=e-1,i=n>=0?this.hotMenu.getCell(n,t):null;i&&((0,h.isSeparator)(i)||(0,h.isDisabled)(i)||(0,h.isSelectionDisabled)(i)?this.selectPrevCell(n,t):this.hotMenu.selectCell(n,t))}},{key:"menuItemRenderer",value:function(e,t,n,i,o,s){var r=this,l=e.getSourceDataAtRow(n),c=document.createElement("div"),u=function(e){return e.disableSelection};"function"==typeof s&&(s=s.call(this.hot)),(0,a.empty)(t),(0,a.addClass)(c,"htItemWrapper"),t.appendChild(c),function(e){return new RegExp(m.SEPARATOR,"i").test(e.name)}(l)?(0,a.addClass)(t,"htSeparator"):"function"==typeof l.renderer?((0,a.addClass)(t,"htCustomMenuRenderer"),t.appendChild(l.renderer(e,c,n,i,o,s))):(0,a.fastInnerHTML)(c,s),function(e){return!0===e.disabled||"function"==typeof e.disabled&&!0===e.disabled.call(r.hot)}(l)?((0,a.addClass)(t,"htDisabled"),this.eventManager.addEventListener(t,"mouseenter",(function(){return e.deselectCell()}))):u(l)?((0,a.addClass)(t,"htSelectionDisabled"),this.eventManager.addEventListener(t,"mouseenter",(function(){return e.deselectCell()}))):function(e){return(0,d.hasOwnProperty)(e,"submenu")}(l)?((0,a.addClass)(t,"htSubmenu"),u(l)?this.eventManager.addEventListener(t,"mouseenter",(function(){return e.deselectCell()})):this.eventManager.addEventListener(t,"mouseenter",(function(){return e.selectCell(n,i,void 0,void 0,!1,!1)}))):((0,a.removeClass)(t,"htSubmenu"),(0,a.removeClass)(t,"htDisabled"),u(l)?this.eventManager.addEventListener(t,"mouseenter",(function(){return e.deselectCell()})):this.eventManager.addEventListener(t,"mouseenter",(function(){return e.selectCell(n,i,void 0,void 0,!1,!1)})))}},{key:"createContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=void 0;return e?((0,u.isFunction)(e)&&(e=null===(e=e.call(this.hot))||(0,c.isUndefined)(e)?"":e.toString()),e=e.replace(/[^A-z0-9]/g,"_"),e=this.options.className+"Sub_"+e,t=document.querySelector("."+this.options.className+"."+e)):t=document.querySelector("."+this.options.className),t||(t=document.createElement("div"),(0,a.addClass)(t,"htMenu "+this.options.className),e&&(0,a.addClass)(t,e),document.getElementsByTagName("body")[0].appendChild(t)),t}},{key:"blockMainTableCallbacks",value:function(){this._afterScrollCallback=function(){},this.hot.addHook("afterScrollVertically",this._afterScrollCallback),this.hot.addHook("afterScrollHorizontally",this._afterScrollCallback)}},{key:"releaseMainTableCallbacks",value:function(){this._afterScrollCallback&&(this.hot.removeHook("afterScrollVertically",this._afterScrollCallback),this.hot.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)}},{key:"onBeforeKeyDown",value:function(e){var t=this.hotMenu.getSelectedLast(),n=!1;switch(this.keyEvent=!0,e.keyCode){case p.KEY_CODES.ESCAPE:this.close(),n=!0;break;case p.KEY_CODES.ENTER:t&&(this.hotMenu.getSourceDataAtRow(t[0]).submenu?n=!0:(this.executeCommand(e),this.close(!0)));break;case p.KEY_CODES.ARROW_DOWN:t?this.selectNextCell(t[0],t[1]):this.selectFirstCell(),n=!0;break;case p.KEY_CODES.ARROW_UP:t?this.selectPrevCell(t[0],t[1]):this.selectLastCell(),n=!0;break;case p.KEY_CODES.ARROW_RIGHT:if(t){var i=this.openSubMenu(t[0]);i&&i.selectFirstCell()}n=!0;break;case p.KEY_CODES.ARROW_LEFT:t&&this.isSubMenu()&&(this.close(),this.parentMenu&&this.parentMenu.hotMenu.listen(),n=!0)}n&&(e.preventDefault(),(0,_.stopImmediatePropagation)(e)),this.keyEvent=!1}},{key:"onAfterInit",value:function(){var e=this.hotMenu.getSettings().data,t=this.hotMenu.view.wt.wtTable.hider.style,n=this.hotMenu.view.wt.wtTable.holder.style,i=parseInt(t.width,10),o=(0,s.arrayReduce)(e,(function(e,t){return e+(t.name===m.SEPARATOR?1:26)}),0);n.width=i+22+"px",n.height=o+4+"px",t.height=n.height}},{key:"onAfterSelection",value:function(e,t,n,i,o){!1===this.keyEvent&&(o.value=!0)}},{key:"onDocumentMouseDown",value:function(e){this.isOpened()&&(this.container&&(0,a.isChildOf)(e.target,this.container)&&this.executeCommand(e),(this.options.standalone&&this.hotMenu&&!(0,a.isChildOf)(e.target,this.hotMenu.rootElement)||(this.isAllSubMenusClosed()||this.isSubMenu())&&!(0,a.isChildOf)(e.target,".htMenu")&&(0,a.isChildOf)(e.target,document))&&this.close(!0))}}]),e}();(0,d.mixin)(g,f.default),t.default=g},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(13),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(0,o.getWindowScrollTop)(),i=(0,o.getWindowScrollLeft)(),s=void 0,r=void 0,l=void 0,d=void 0,c=void 0,u=void 0;this.type=this.getSourceType(t),"literal"===this.type?(s=parseInt(t.top,10),l=parseInt(t.left,10),c=t.height||0,u=t.width||0,r=s,d=l,s+=n,l+=i):"event"===this.type&&(s=parseInt((0,a.pageY)(t),10),l=parseInt((0,a.pageX)(t),10),c=t.target.clientHeight,u=t.target.clientWidth,r=s-n,d=l-i),this.top=s,this.topRelative=r,this.left=l,this.leftRelative=d,this.scrollTop=n,this.scrollLeft=i,this.cellHeight=c,this.cellWidth=u}return i(e,[{key:"getSourceType",value:function(e){var t="literal";return e instanceof Event&&(t="event"),t}},{key:"fitsAbove",value:function(e){return this.topRelative>=e.offsetHeight}},{key:"fitsBelow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerHeight;return this.topRelative+e.offsetHeight<=t}},{key:"fitsOnRight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerWidth;return this.leftRelative+this.cellWidth+e.offsetWidth<=t}},{key:"fitsOnLeft",value:function(e){return this.leftRelative>=e.offsetWidth}}]),e}();t.default=s},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=g(n(10)),r=g(n(16)),l=g(n(192)),d=n(4),c=n(0),u=n(1),h=n(5),p=n(8),f=g(n(319)),m=g(n(320)),_=g(n(321)),v=n(323);function g(e){return e&&e.__esModule?e:{default:e}}n(324),r.default.getSingleton().register("afterCopyLimit"),r.default.getSingleton().register("modifyCopyableRange"),r.default.getSingleton().register("beforeCut"),r.default.getSingleton().register("afterCut"),r.default.getSingleton().register("beforePaste"),r.default.getSingleton().register("afterPaste"),r.default.getSingleton().register("beforeCopy"),r.default.getSingleton().register("afterCopy");var y=new WeakMap,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.columnsLimit=1e3,n.copyableRanges=[],n.pasteMode="overwrite",n.rowsLimit=1e3,y.set(n,{isTriggeredByCopy:!1,isTriggeredByCut:!1,isBeginEditing:!1,isFragmentSelectionEnabled:!1}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().copyPaste}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var n=this.hot.getSettings();y.get(this).isFragmentSelectionEnabled=n.fragmentSelection,"object"===i(n.copyPaste)&&(this.pasteMode=n.copyPaste.pasteMode||this.pasteMode,this.rowsLimit=n.copyPaste.rowsLimit||this.rowsLimit,this.columnsLimit=n.copyPaste.columnsLimit||this.columnsLimit),this.addHook("afterContextMenuDefaultOptions",(function(t){return e.onAfterContextMenuDefaultOptions(t)})),this.addHook("afterSelectionEnd",(function(){return e.onAfterSelectionEnd()})),this.focusableElement=(0,v.createElement)(),this.focusableElement.addLocalHook("copy",(function(t){return e.onCopy(t)})).addLocalHook("cut",(function(t){return e.onCut(t)})).addLocalHook("paste",(function(t){return e.onPaste(t)})),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.focusableElement&&(0,v.destroyElement)(this.focusableElement),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"setCopyableText",value:function(){var e=this.hot.getSelectedRangeLast();if(e){var t=e.getTopLeftCorner(),n=e.getBottomRightCorner(),i=t.row,o=t.col,a=n.row,s=n.col,r=Math.min(a,i+this.rowsLimit-1),l=Math.min(s,o+this.columnsLimit-1);this.copyableRanges.length=0,this.copyableRanges.push({startRow:i,startCol:o,endRow:r,endCol:l}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges),a===r&&s===l||this.hot.runHooks("afterCopyLimit",a-i+1,s-o+1,this.rowsLimit,this.columnsLimit)}}},{key:"getRangedCopyableData",value:function(e){var t=this,n=[],i=[],o=[];return(0,u.arrayEach)(e,(function(e){(0,h.rangeEach)(e.startRow,e.endRow,(function(e){-1===i.indexOf(e)&&i.push(e)})),(0,h.rangeEach)(e.startCol,e.endCol,(function(e){-1===o.indexOf(e)&&o.push(e)}))})),(0,u.arrayEach)(i,(function(e){var i=[];(0,u.arrayEach)(o,(function(n){i.push(t.hot.getCopyableData(e,n))})),n.push(i)})),l.default.stringify(n)}},{key:"getRangedData",value:function(e){var t=this,n=[],i=[],o=[];return(0,u.arrayEach)(e,(function(e){(0,h.rangeEach)(e.startRow,e.endRow,(function(e){-1===i.indexOf(e)&&i.push(e)})),(0,h.rangeEach)(e.startCol,e.endCol,(function(e){-1===o.indexOf(e)&&o.push(e)}))})),(0,u.arrayEach)(i,(function(e){var i=[];(0,u.arrayEach)(o,(function(n){i.push(t.hot.getCopyableData(e,n))})),n.push(i)})),n}},{key:"copy",value:function(){y.get(this).isTriggeredByCopy=!0,this.focusableElement.focus(),document.execCommand("copy")}},{key:"cut",value:function(){y.get(this).isTriggeredByCut=!0,this.focusableElement.focus(),document.execCommand("cut")}},{key:"paste",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new _.default;t.clipboardData.setData("text/plain",e),this.onPaste(t)}},{key:"onCopy",value:function(e){var t=y.get(this);if(this.hot.isListening()||t.isTriggeredByCopy){var n=this.hot.getActiveEditor();if(!n||!n.isOpened()){this.setCopyableText(),t.isTriggeredByCopy=!1;var i=this.getRangedData(this.copyableRanges),o="";!!this.hot.runHooks("beforeCopy",i,this.copyableRanges)&&(o=l.default.stringify(i),e&&e.clipboardData?e.clipboardData.setData("text/plain",o):"undefined"==typeof ClipboardEvent&&window.clipboardData.setData("Text",o),this.hot.runHooks("afterCopy",i,this.copyableRanges)),e.preventDefault()}}}},{key:"onCut",value:function(e){var t=y.get(this);if(this.hot.isListening()||t.isTriggeredByCut){var n=this.hot.getActiveEditor();if(!n||!n.isOpened()){this.setCopyableText(),t.isTriggeredByCut=!1;var i=this.getRangedData(this.copyableRanges),o=void 0;!!this.hot.runHooks("beforeCut",i,this.copyableRanges)&&(o=l.default.stringify(i),e&&e.clipboardData?e.clipboardData.setData("text/plain",o):"undefined"==typeof ClipboardEvent&&window.clipboardData.setData("Text",o),this.hot.emptySelectedCells(),this.hot.runHooks("afterCut",i,this.copyableRanges)),e.preventDefault()}}}},{key:"onPaste",value:function(e){var t=this;if(this.hot.isListening()){var n=this.hot.getActiveEditor();if(!n||!n.isOpened()){e&&e.preventDefault&&e.preventDefault();var i,o=void 0;if(e&&void 0!==e.clipboardData?o=e.clipboardData.getData("text/plain"):"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&(o=window.clipboardData.getData("Text")),0!==(i=l.default.parse(o)).length&&this.hot.runHooks("beforePaste",i,this.copyableRanges)){var a=this.hot.getSelectedLast(),s=new d.CellCoords(a[0],a[1]),r=new d.CellCoords(a[2],a[3]),c=new d.CellRange(s,s,r),h=c.getTopLeftCorner(),p=c.getBottomRightCorner(),f=h,m=new d.CellCoords(Math.max(p.row,i.length-1+h.row),Math.max(p.col,i[0].length-1+h.col)),_=r.row-s.row>=i.length-1,v=r.col-s.col>=i[0].length-1;this.hot.addHookOnce("afterChange",(function(e){var n=e?e.length:0;if(n){var i={row:0,col:0},o=-1;(0,u.arrayEach)(e,(function(t,a){var s=n>a+1?e[a+1]:null;s&&(_||(i.row+=Math.max(s[0]-t[0]-1,0)),!v&&t[1]>o&&(o=t[1],i.col+=Math.max(s[1]-t[1]-1,0)))})),t.hot.selectCell(f.row,f.col,m.row+i.row,m.col+i.col)}})),this.hot.populateFromArray(f.row,f.col,i,m.row,m.col,"CopyPaste.paste",this.pasteMode),this.hot.runHooks("afterPaste",i,this.copyableRanges)}}}}},{key:"onAfterContextMenuDefaultOptions",value:function(e){e.items.push({name:"---------"},(0,f.default)(this),(0,m.default)(this))}},{key:"onAfterSelectionEnd",value:function(){var e=y.get(this).isFragmentSelectionEnabled,t=this.hot.getActiveEditor();if(!t||!t.isOpened()){var n=t?t.TEXTAREA:void 0;n?this.focusableElement.setFocusableElement(n):this.focusableElement.useSecondaryElement(),e&&this.focusableElement.getFocusableElement()!==document.activeElement&&(0,c.getSelectionText)()||(this.setCopyableText(),this.focusableElement.focus())}}},{key:"destroy",value:function(){this.focusableElement&&((0,v.destroyElement)(this.focusableElement),this.focusableElement=null),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(s.default);(0,p.registerPlugin)("CopyPaste",b),t.default=b},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{key:"copy",name:function(){return this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_COPY)},callback:function(){e.copy()},disabled:function(){var e=this.getSelected();return!e||e.length>1},hidden:!1}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{key:"cut",name:function(){return this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_CUT)},callback:function(){e.cut()},disabled:function(){var e=this.getSelected();return!e||e.length>1},hidden:!1}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7))},function(e,t,n){"use strict";t.__esModule=!0;var i,o=n(322),a=(i=o)&&i.__esModule?i:{default:i};t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipboardData=new a.default}},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={}}return i(e,[{key:"setData",value:function(e,t){this.data[e]=t}},{key:"getData",value:function(e){return this.data[e]||void 0}}]),e}();t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.destroyElement=t.deactivateElement=t.createElement=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=r(n(6)),a=r(n(47)),s=n(2);function r(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainElement=null,this.eventManager=new o.default(this),this.listenersCount=new WeakSet}return i(e,[{key:"useSecondaryElement",value:function(){var e=function(e){if(p)return p.parentElement||document.body.appendChild(p),p;var t=document.createElement("textarea");return p=t,t.id="HandsontableCopyPaste",t.className="copyPaste",t.tabIndex=-1,t.autocomplete="off",t.wrap="hard",t.value=" ",document.body.appendChild(t),t}();this.listenersCount.has(e)||(this.listenersCount.add(e),h(this.eventManager,e,this)),this.mainElement=e}},{key:"setFocusableElement",value:function(e){this.listenersCount.has(e)||(this.listenersCount.add(e),h(this.eventManager,e,this)),this.mainElement=e}},{key:"getFocusableElement",value:function(){return this.mainElement}},{key:"focus",value:function(){this.mainElement.value=" ",this.mainElement.select()}}]),e}();(0,s.mixin)(l,a.default);var d=0;function c(e){e.eventManager.clear()}var u=function(e,t){return function(n){return t.runLocalHooks(e,n)}};function h(e,t,n){e.addEventListener(t,"copy",u("copy",n)),e.addEventListener(t,"cut",u("cut",n)),e.addEventListener(t,"paste",u("paste",n))}var p=void 0;t.createElement=function(){var e=new l;return d+=1,e},t.deactivateElement=c,t.destroyElement=function(e){e instanceof l&&(d>0&&(d-=1),c(e),d<=0&&(d=0,p&&p.parentNode&&(p.parentNode.removeChild(p),p=null),e.mainElement=null))}},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=g(n(10)),s=n(8),r=n(2),l=n(5),d=n(4),c=(g(n(16)),n(1)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),h=g(n(326)),p=g(n(327)),f=g(n(328)),m=g(n(329)),_=g(n(330)),v=n(48);function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.savedBorderSettings=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().customBorders}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",(function(t){return e.onAfterContextMenuDefaultOptions(t)})),this.addHook("afterInit",(function(){return e.onAfterInit()})),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.clearBorders(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"getSettingIndex",value:function(e){var t=-1;return(0,c.arrayEach)(this.hot.selection.highlight.borders,(function(n,i){if(n.settings.className===e)return t=i,!1})),t}},{key:"insertBorderIntoSettings",value:function(e){var t={row:e.row,col:e.col},n=new d.Selection(e,new d.CellRange(t,t,t)),i=this.getSettingIndex(e.className);i>=0?this.hot.selection.highlight.borders[i]=n:this.hot.selection.highlight.borders.push(n)}},{key:"prepareBorderFromCustomAdded",value:function(e,t,n){var i=(0,v.createEmptyBorders)(e,t);i=(0,v.extendDefaultBorder)(i,n),this.hot.setCellMeta(e,t,"borders",i),this.insertBorderIntoSettings(i)}},{key:"prepareBorderFromCustomAddedRange",value:function(e){var t=this,n=e.range;(0,l.rangeEach)(n.from.row,n.to.row,(function(i){(0,l.rangeEach)(n.from.col,n.to.col,(function(o){var a=(0,v.createEmptyBorders)(i,o),s=0;i===n.from.row&&(s+=1,(0,r.hasOwnProperty)(e,"top")&&(a.top=e.top)),i===n.to.row&&(s+=1,(0,r.hasOwnProperty)(e,"bottom")&&(a.bottom=e.bottom)),o===n.from.col&&(s+=1,(0,r.hasOwnProperty)(e,"left")&&(a.left=e.left)),o===n.to.col&&(s+=1,(0,r.hasOwnProperty)(e,"right")&&(a.right=e.right)),s>0&&(t.hot.setCellMeta(i,o,"borders",a),t.insertBorderIntoSettings(a))}))}))}},{key:"removeBordersFromDom",value:function(e){var t=this.hot.rootElement.querySelectorAll("."+e+":not(td)");(0,l.rangeEach)(0,t.length-1,(function(e){var n=t[e].parentNode;n.parentNode&&n.parentNode.removeChild(n)}))}},{key:"removeAllBorders",value:function(e,t){var n=(0,v.createClassName)(e,t);this.removeBordersFromDom(n),this.hot.removeCellMeta(e,t,"borders")}},{key:"setBorder",value:function(e,t,n,i){var o=this.hot.getCellMeta(e,t).borders;o&&void 0!==o.border||(o=(0,v.createEmptyBorders)(e,t)),o[n]=i?(0,v.createSingleEmptyBorder)():(0,v.createDefaultCustomBorder)(),this.hot.setCellMeta(e,t,"borders",o);var a=(0,v.createClassName)(e,t);this.removeBordersFromDom(a),this.insertBorderIntoSettings(o),this.hot.render()}},{key:"prepareBorder",value:function(e,t,n){var i=this;(0,c.arrayEach)(e,(function(e){var o=e.start,a=e.end;if(o.row===a.row&&o.col===a.col)"noBorders"===t?i.removeAllBorders(o.row,o.col):i.setBorder(o.row,o.col,t,n);else switch(t){case"noBorders":(0,l.rangeEach)(o.col,a.col,(function(e){(0,l.rangeEach)(o.row,a.row,(function(t){i.removeAllBorders(t,e)}))}));break;case"top":(0,l.rangeEach)(o.col,a.col,(function(e){i.setBorder(o.row,e,t,n)}));break;case"right":(0,l.rangeEach)(o.row,a.row,(function(e){i.setBorder(e,a.col,t,n)}));break;case"bottom":(0,l.rangeEach)(o.col,a.col,(function(e){i.setBorder(a.row,e,t,n)}));break;case"left":(0,l.rangeEach)(o.row,a.row,(function(e){i.setBorder(e,o.col,t,n)}))}}))}},{key:"createCustomBorders",value:function(e){var t=this;(0,l.rangeEach)(0,e.length-1,(function(n){e[n].range?t.prepareBorderFromCustomAddedRange(e[n]):t.prepareBorderFromCustomAdded(e[n].row,e[n].col,e[n])})),this.hot.render(),this.hot.view.wt.draw(!0)}},{key:"onAfterContextMenuDefaultOptions",value:function(e){this.hot.getSettings().customBorders&&e.items.push({name:"---------"},{key:"borders",name:function(){return this.getTranslatedPhrase(u.CONTEXTMENU_ITEMS_BORDERS)},disabled:function(){return this.selection.isSelectedByCorner()},submenu:{items:[(0,_.default)(this),(0,m.default)(this),(0,h.default)(this),(0,p.default)(this),(0,f.default)(this)]}})}},{key:"clearBorders",value:function(){var e=this,t=this.hot.rootElement.querySelectorAll('td[class^="border"]');(0,l.rangeEach)(0,t.length-1,(function(n){e.removeBordersFromDom(t[n].className)}))}},{key:"changeBorderSettings",value:function(){var e=this.hot.getSettings().customBorders;if(e)if(Array.isArray(e))this.savedBorderSettings=e,this.createCustomBorders(e);else if(void 0!==e){var t=this.savedBorderSettings?this.savedBorderSettings:e;this.createCustomBorders(t)}}},{key:"onAfterInit",value:function(){this.changeBorderSettings()}},{key:"destroy",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);(0,s.registerPlugin)("customBorders",y),t.default=y},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{key:"borders:bottom",name:function(){var e=this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_BORDERS_BOTTOM);return(0,o.checkSelectionBorders)(this,"bottom")&&(e=(0,o.markSelected)(e)),e},callback:function(t,n){var i=(0,o.checkSelectionBorders)(this,"bottom");e.prepareBorder(n,"bottom",i)}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),o=n(48)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{key:"borders:left",name:function(){var e=this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_BORDERS_LEFT);return(0,o.checkSelectionBorders)(this,"left")&&(e=(0,o.markSelected)(e)),e},callback:function(t,n){var i=(0,o.checkSelectionBorders)(this,"left");e.prepareBorder(n,"left",i)}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),o=n(48)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{key:"borders:no_borders",name:function(){return this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_REMOVE_BORDERS)},callback:function(t,n){e.prepareBorder(n,"noBorders")},disabled:function(){return!(0,o.checkSelectionBorders)(this)}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),o=n(48)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{key:"borders:right",name:function(){var e=this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_BORDERS_RIGHT);return(0,o.checkSelectionBorders)(this,"right")&&(e=(0,o.markSelected)(e)),e},callback:function(t,n){var i=(0,o.checkSelectionBorders)(this,"right");e.prepareBorder(n,"right",i)}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),o=n(48)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{key:"borders:top",name:function(){var e=this.getTranslatedPhrase(i.CONTEXTMENU_ITEMS_BORDERS_TOP);return(0,o.checkSelectionBorders)(this,"top")&&(e=(0,o.markSelected)(e)),e},callback:function(t,n){var i=(0,o.checkSelectionBorders)(this,"top");e.prepareBorder(n,"top",i)}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),o=n(48)},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=l(n(10)),s=l(n(6)),r=n(8);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.eventManager=new s.default(n),n.boundaries=null,n.callback=null,n.listening=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().dragToScroll}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("afterOnCellMouseDown",(function(){return e.setupListening()})),this.addHook("afterOnCellCornerMouseDown",(function(){return e.setupListening()})),this.registerEvents(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.unregisterEvents(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"setBoundaries",value:function(e){this.boundaries=e}},{key:"setCallback",value:function(e){this.callback=e}},{key:"check",value:function(e,t){var n=0,i=0;t<this.boundaries.top?i=t-this.boundaries.top:t>this.boundaries.bottom&&(i=t-this.boundaries.bottom),e<this.boundaries.left?n=e-this.boundaries.left:e>this.boundaries.right&&(n=e-this.boundaries.right),this.callback(n,i)}},{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(document,"mouseup",(function(){return e.onMouseUp()})),this.eventManager.addEventListener(document,"mousemove",(function(t){return e.onMouseMove(t)}))}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"setupListening",value:function(){var e=this.hot.view.wt.wtTable.holder;e!==window&&(this.setBoundaries(e.getBoundingClientRect()),this.setCallback((function(t,n){t<0?e.scrollLeft-=50:t>0&&(e.scrollLeft+=50),n<0?e.scrollTop-=20:n>0&&(e.scrollTop+=20)})),this.listening=!0)}},{key:"onMouseMove",value:function(e){this.listening&&this.check(e.clientX,e.clientY)}},{key:"onMouseUp",value:function(){this.listening=!1}},{key:"destroy",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);(0,r.registerPlugin)("dragToScroll",d),t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=c(n(10)),s=n(8),r=n(1),l=c(n(333)),d=c(n(334));function c(e){return e&&e.__esModule?e:{default:e}}n(335);var u=new WeakMap,h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.set(n,{moveByFreeze:!1,afterFirstUse:!1}),n.frozenColumnsBasePositions=[],n.manualColumnMovePlugin=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualColumnFreeze}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",(function(t){return e.addContextMenuEntry(t)})),this.addHook("afterInit",(function(){return e.onAfterInit()})),this.addHook("beforeColumnMove",(function(t,n){return e.onBeforeColumnMove(t,n)})),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var e=u.get(this);e.afterFirstUse=!1,e.moveByFreeze=!1,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"freezeColumn",value:function(e){var t=u.get(this),n=this.hot.getSettings();t.afterFirstUse||(t.afterFirstUse=!0),n.fixedColumnsLeft===this.hot.countCols()||e<=n.fixedColumnsLeft-1||(t.moveByFreeze=!0,e!==this.getMovePlugin().columnsMapper.getValueByIndex(e)&&(this.frozenColumnsBasePositions[n.fixedColumnsLeft]=e),this.getMovePlugin().moveColumn(e,n.fixedColumnsLeft++))}},{key:"unfreezeColumn",value:function(e){var t=u.get(this),n=this.hot.getSettings();if(t.afterFirstUse||(t.afterFirstUse=!0),!(n.fixedColumnsLeft<=0||e>n.fixedColumnsLeft-1)){var i=this.getBestColumnReturnPosition(e);t.moveByFreeze=!0,n.fixedColumnsLeft--,this.getMovePlugin().moveColumn(e,i+1)}}},{key:"getMovePlugin",value:function(){return this.manualColumnMovePlugin||(this.manualColumnMovePlugin=this.hot.getPlugin("manualColumnMove")),this.manualColumnMovePlugin}},{key:"getBestColumnReturnPosition",value:function(e){var t=this.getMovePlugin(),n=this.hot.getSettings().fixedColumnsLeft,i=t.columnsMapper.getValueByIndex(n),o=void 0;if(null===this.frozenColumnsBasePositions[e]||void 0===this.frozenColumnsBasePositions[e])for(o=t.columnsMapper.getValueByIndex(e);null!==i&&i<=o;)n++,i=t.columnsMapper.getValueByIndex(n);else{for(o=this.frozenColumnsBasePositions[e],this.frozenColumnsBasePositions[e]=void 0;null!==i&&i<=o;)n++,i=t.columnsMapper.getValueByIndex(n);n=i}return n-1}},{key:"addContextMenuEntry",value:function(e){e.items.push({name:"---------"},(0,l.default)(this),(0,d.default)(this))}},{key:"onAfterInit",value:function(){this.getMovePlugin().isEnabled()||this.getMovePlugin().enablePlugin()}},{key:"onBeforeColumnMove",value:function(e,t){var n=u.get(this);if(n.afterFirstUse&&!n.moveByFreeze){var i=this.hot.getSettings().fixedColumnsLeft,o=t<i;if(o||(0,r.arrayEach)(e,(function(e,t,n){if(e<i)return o=!0,!1})),o)return!1}n.moveByFreeze&&(n.moveByFreeze=!1)}},{key:"destroy",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);(0,s.registerPlugin)("manualColumnFreeze",h),t.default=h},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){return{key:"freeze_column",name:function(){return this.getTranslatedPhrase(o.CONTEXTMENU_ITEMS_FREEZE_COLUMN)},callback:function(t,n){var o=i(n,1)[0].start.col;e.freezeColumn(o),this.render(),this.view.wt.wtOverlays.adjustElementsSize(!0)},hidden:function(){var e=this.getSelectedRange(),t=!1;return(void 0===e||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col<=this.getSettings().fixedColumnsLeft-1)&&(t=!0),t}}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7))},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){return{key:"unfreeze_column",name:function(){return this.getTranslatedPhrase(o.CONTEXTMENU_ITEMS_UNFREEZE_COLUMN)},callback:function(t,n){var o=i(n,1)[0].start.col;e.unfreezeColumn(o),this.render(),this.view.wt.wtOverlays.adjustElementsSize(!0)},hidden:function(){var e=this.getSelectedRange(),t=!1;return(void 0===e||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col>=this.getSettings().fixedColumnsLeft)&&(t=!0),t}}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7))},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=m(n(10)),s=m(n(16)),r=n(1),l=n(0),d=n(5),c=m(n(6)),u=n(8),h=m(n(337)),p=m(n(338)),f=m(n(339));function m(e){return e&&e.__esModule?e:{default:e}}n(4),n(340),s.default.getSingleton().register("beforeColumnMove"),s.default.getSingleton().register("afterColumnMove"),s.default.getSingleton().register("unmodifyCol");var _=new WeakMap,v="ht__manualColumnMove",g="show-ui",y="on-moving--columns",b="after-selection--columns",w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return _.set(n,{columnsToMove:[],countCols:0,fixedColumns:0,pressed:void 0,disallowMoving:void 0,target:{eventPageX:void 0,coords:void 0,TD:void 0,col:void 0}}),n.removedColumns=[],n.columnsMapper=new h.default(n),n.eventManager=new c.default(n),n.backlight=new p.default(e),n.guideline=new f.default(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualColumnMove}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",(function(t,n,i,o){return e.onBeforeOnCellMouseDown(t,n,i,o)})),this.addHook("beforeOnCellMouseOver",(function(t,n,i,o){return e.onBeforeOnCellMouseOver(t,n,i,o)})),this.addHook("afterScrollVertically",(function(){return e.onAfterScrollVertically()})),this.addHook("modifyCol",(function(t,n){return e.onModifyCol(t,n)})),this.addHook("beforeRemoveCol",(function(t,n){return e.onBeforeRemoveCol(t,n)})),this.addHook("afterRemoveCol",(function(){return e.onAfterRemoveCol()})),this.addHook("afterCreateCol",(function(t,n){return e.onAfterCreateCol(t,n)})),this.addHook("afterLoadData",(function(){return e.onAfterLoadData()})),this.addHook("unmodifyCol",(function(t){return e.onUnmodifyCol(t)})),this.registerEvents(),(0,l.addClass)(this.hot.rootElement,v),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.onAfterPluginsInitialized(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this.hot.getSettings().manualColumnMove;Array.isArray(e)&&this.columnsMapper.clearMap(),(0,l.removeClass)(this.hot.rootElement,v),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"moveColumn",value:function(e,t){this.moveColumns([e],t)}},{key:"moveColumns",value:function(e,t){var n=this,i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)),o=_.get(this),a=this.hot.runHooks("beforeColumnMove",i,t);o.disallowMoving=!a,!1!==a&&((0,r.arrayEach)(e,(function(e,t,i){i[t]=n.columnsMapper.getValueByIndex(e)})),(0,r.arrayEach)(e,(function(e,i){var o=n.columnsMapper.getIndexByValue(e);o!==t&&n.columnsMapper.moveColumn(o,t+i)})),this.columnsMapper.clearNull()),this.hot.runHooks("afterColumnMove",i,t)}},{key:"changeSelection",value:function(e,t){this.hot.selectColumns(e,t)}},{key:"getColumnsWidth",value:function(e,t){for(var n=0,i=e;i<t;i++)n+=i<0?this.hot.view.wt.wtViewport.getRowHeaderWidth()||0:this.hot.view.wt.wtTable.getStretchedColumnWidth(i)||0;return n}},{key:"initialSettings",value:function(){var e=this.hot.getSettings().manualColumnMove;Array.isArray(e)?this.moveColumns(e,0):void 0!==e&&this.persistentStateLoad()}},{key:"isFixedColumnsLeft",value:function(e){return e<this.hot.getSettings().fixedColumnsLeft}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.columnsMapper._arrayMap)}},{key:"persistentStateLoad",value:function(){var e={};this.hot.runHooks("persistentStateLoad","manualColumnMove",e),e.value&&(this.columnsMapper._arrayMap=e.value)}},{key:"prepareColumnsToMoving",value:function(e,t){var n=[];return(0,d.rangeEach)(e,t,(function(e){n.push(e)})),n}},{key:"refreshPositions",value:function(){var e=_.get(this),t=this.hot.view.wt.wtTable.getFirstVisibleColumn(),n=this.hot.view.wt.wtTable.getLastVisibleColumn(),i=this.hot.view.wt.wtTable,o=this.hot.view.wt.wtOverlays.scrollableElement,a="number"==typeof o.scrollX?o.scrollX:o.scrollLeft,s=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,e.coordsColumn),r=e.target.eventPageX-(e.rootElementOffset-(void 0===o.scrollX?a:0)),l=i.hider.offsetWidth,d=i.TBODY.offsetLeft,c=this.backlight.getOffset().left,u=this.backlight.getSize().width,h=0;if(e.rootElementOffset+i.holder.offsetWidth+a<e.target.eventPageX&&e.coordsColumn<e.countCols&&e.coordsColumn++,e.hasRowHeaders&&(h=this.hot.view.wt.wtOverlays.leftOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsLeft(e.coordsColumn)&&(s+=a),s+=h,e.coordsColumn<0)e.fixedColumns>0?e.target.col=0:e.target.col=t>0?t-1:t;else if(e.target.TD.offsetWidth/2+s<=r){var p=e.coordsColumn>=e.countCols?e.countCols-1:e.coordsColumn;e.target.col=p+1,s+=e.target.TD.offsetWidth,e.target.col>n&&this.hot.scrollViewportTo(void 0,n+1,void 0,!0)}else e.target.col=e.coordsColumn,e.target.col<=t&&e.target.col>=e.fixedColumns&&this.hot.scrollViewportTo(void 0,t-1);e.target.col<=t&&e.target.col>=e.fixedColumns&&this.hot.scrollViewportTo(void 0,t-1);var f=r,m=s;r+u+c>=l?f=l-u-c:r+c<d+h&&(f=d+h+Math.abs(c)),s>=l-1?m=l-1:0===m?m=1:void 0!==o.scrollX&&e.coordsColumn<e.fixedColumns&&(m-=e.rootElementOffset<=o.scrollX?e.rootElementOffset:0),this.backlight.setPosition(null,f),this.guideline.setPosition(null,m)}},{key:"updateColumnsMapper",value:function(){var e=this.hot.countSourceCols(),t=this.columnsMapper._arrayMap.length;if(0===t)this.columnsMapper.createMap(e||this.hot.getSettings().startCols);else if(t<e){var n=e-t;this.columnsMapper.insertItems(t,n)}else if(t>e){var i=e-1,o=[];(0,r.arrayEach)(this.columnsMapper._arrayMap,(function(e,t){e>i&&o.push(t)})),this.columnsMapper.removeItems(o)}}},{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(document.documentElement,"mousemove",(function(t){return e.onMouseMove(t)})),this.eventManager.addEventListener(document.documentElement,"mouseup",(function(){return e.onMouseUp()}))}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(e,t,n,i){var o=this.hot.view.wt.wtTable,a=this.hot.selection.isSelectedByColumnHeader(),s=this.hot.getSelectedRangeLast(),r=_.get(this),d=e.realTarget.className.indexOf("columnSorting")>-1;if(!s||!a||r.pressed||0!==e.button||d)return r.pressed=!1,r.columnsToMove.length=0,void(0,l.removeClass)(this.hot.rootElement,[y,g]);var c=this.guideline.isBuilt()&&!this.guideline.isAppended(),u=this.backlight.isBuilt()&&!this.backlight.isAppended();c&&u&&(this.guideline.appendTo(o.hider),this.backlight.appendTo(o.hider));var h=s.from,p=s.to,f=Math.min(h.col,p.col),m=Math.max(h.col,p.col);if(t.row<0&&t.col>=f&&t.col<=m){i.column=!0,r.pressed=!0,r.target.eventPageX=e.pageX,r.coordsColumn=t.col,r.target.TD=n,r.target.col=t.col,r.columnsToMove=this.prepareColumnsToMoving(f,m),r.hasRowHeaders=!!this.hot.getSettings().rowHeaders,r.countCols=this.hot.countCols(),r.fixedColumns=this.hot.getSettings().fixedColumnsLeft,r.rootElementOffset=(0,l.offset)(this.hot.rootElement).left;var v=r.hasRowHeaders?-1:0,w=o.holder.scrollTop+o.getColumnHeaderHeight(0)+1,k=t.col<r.fixedColumns,C=this.hot.view.wt.wtOverlays.scrollableElement,x=C.scrollX?C.scrollX-r.rootElementOffset:0,S=e.layerX-(k?x:0),M=Math.abs(this.getColumnsWidth(f,t.col)+S);this.backlight.setPosition(w,this.getColumnsWidth(v,f)+M),this.backlight.setSize(this.getColumnsWidth(f,m+1),o.hider.offsetHeight-w),this.backlight.setOffset(null,-1*M),(0,l.addClass)(this.hot.rootElement,y)}else(0,l.removeClass)(this.hot.rootElement,b),r.pressed=!1,r.columnsToMove.length=0}},{key:"onMouseMove",value:function(e){var t=_.get(this);if(t.pressed){if(e.realTarget===this.backlight.element){var n=this.backlight.getSize().width;this.backlight.setSize(0),setTimeout((function(){this.backlight.setPosition(n)}))}t.target.eventPageX=e.pageX,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(e,t,n,i){var o=this.hot.getSelectedRangeLast(),a=_.get(this);o&&a.pressed&&(a.columnsToMove.indexOf(t.col)>-1?(0,l.removeClass)(this.hot.rootElement,g):(0,l.addClass)(this.hot.rootElement,g),i.row=!0,i.column=!0,i.cell=!0,a.coordsColumn=t.col,a.target.TD=n)}},{key:"onMouseUp",value:function(){var e=_.get(this);if(e.coordsColumn=void 0,e.pressed=!1,e.backlightWidth=0,(0,l.removeClass)(this.hot.rootElement,[y,g,b]),this.hot.selection.isSelectedByColumnHeader()&&(0,l.addClass)(this.hot.rootElement,b),!(e.columnsToMove.length<1||void 0===e.target.col||e.columnsToMove.indexOf(e.target.col)>-1)){if(this.moveColumns(e.columnsToMove,e.target.col),this.persistentStateSave(),this.hot.render(),this.hot.view.wt.wtOverlays.adjustElementsSize(!0),!e.disallowMoving){var t=this.columnsMapper.getIndexByValue(e.columnsToMove[0]),n=this.columnsMapper.getIndexByValue(e.columnsToMove[e.columnsToMove.length-1]);this.changeSelection(t,n)}e.columnsToMove.length=0}}},{key:"onAfterScrollVertically",value:function(){var e=this.hot.view.wt.wtTable,t=e.getColumnHeaderHeight(0)+1+e.holder.scrollTop;this.backlight.setPosition(t),this.backlight.setSize(null,e.hider.offsetHeight-t)}},{key:"onAfterCreateCol",value:function(e,t){this.columnsMapper.shiftItems(e,t)}},{key:"onBeforeRemoveCol",value:function(e,t){var n=this;this.removedColumns.length=0,!1!==e&&(0,d.rangeEach)(e,e+t-1,(function(e){n.removedColumns.push(n.hot.runHooks("modifyCol",e,n.pluginName))}))}},{key:"onAfterRemoveCol",value:function(){this.columnsMapper.unshiftItems(this.removedColumns)}},{key:"onAfterLoadData",value:function(){this.updateColumnsMapper()}},{key:"onModifyCol",value:function(e,t){if(t!==this.pluginName){var n=this.columnsMapper.getValueByIndex(e);e=null===n?e:n}return e}},{key:"onUnmodifyCol",value:function(e){var t=this.columnsMapper.getIndexByValue(e);return null===t?e:t}},{key:"onAfterPluginsInitialized",value:function(){this.updateColumnsMapper(),this.initialSettings(),this.backlight.build(),this.guideline.build()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);(0,u.registerPlugin)("ManualColumnMove",w),t.default=w},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(94),s=(i=a)&&i.__esModule?i:{default:i},r=n(1),l=n(2),d=n(5),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manualColumnMove=t}return o(e,[{key:"createMap",value:function(e){var t=this,n=void 0===e?this._arrayMap.length:e;this._arrayMap.length=0,(0,d.rangeEach)(n-1,(function(e){t._arrayMap[e]=e}))}},{key:"destroy",value:function(){this._arrayMap=null}},{key:"moveColumn",value:function(e,t){var n=this._arrayMap[e];this._arrayMap[e]=null,this._arrayMap.splice(t,0,n)}},{key:"clearNull",value:function(){this._arrayMap=(0,r.arrayFilter)(this._arrayMap,(function(e){return null!==e}))}}]),e}();(0,l.mixin)(c,s.default),t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=n(202),r=(i=s)&&i.__esModule?i:{default:i},l=n(0),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"build",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"build",this).call(this),(0,l.addClass)(this._element,"ht__manualColumnMove--backlight")}}]),t}(r.default);t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=n(202),r=(i=s)&&i.__esModule?i:{default:i},l=n(0),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"build",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"build",this).call(this),(0,l.addClass)(this._element,"ht__manualColumnMove--guideline")}}]),t}(r.default);t.default=d},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=h(n(10)),s=n(0),r=h(n(6)),l=n(13),d=n(1),c=n(5),u=n(8);function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.currentTH=null,n.currentCol=null,n.selectedCols=[],n.currentWidth=null,n.newSize=null,n.startY=null,n.startWidth=null,n.startOffset=null,n.handle=document.createElement("DIV"),n.guide=document.createElement("DIV"),n.eventManager=new r.default(n),n.pressed=null,n.dblclick=0,n.autoresizeTimeout=null,n.manualColumnWidths=[],(0,s.addClass)(n.handle,"manualColumnResizer"),(0,s.addClass)(n.guide,"manualColumnResizerGuide"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return this.hot.getSettings().manualColumnResize}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){this.manualColumnWidths=[];var n=this.hot.getSettings().manualColumnResize,i=this.loadManualColumnWidths();this.addHook("modifyColWidth",(function(t,n){return e.onModifyColWidth(t,n)})),this.addHook("beforeStretchingColumnWidth",(function(t,n){return e.onBeforeStretchingColumnWidth(t,n)})),this.addHook("beforeColumnResize",(function(t,n,i){return e.onBeforeColumnResize(t,n,i)})),void 0!==i?this.manualColumnWidths=i:Array.isArray(n)?this.manualColumnWidths=n:this.manualColumnWidths=[],this.bindEvents(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.hot.getSettings().manualColumnResize;Array.isArray(e)?this.manualColumnWidths=e:e||(this.manualColumnWidths=[])}},{key:"disablePlugin",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"saveManualColumnWidths",value:function(){this.hot.runHooks("persistentStateSave","manualColumnWidths",this.manualColumnWidths)}},{key:"loadManualColumnWidths",value:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualColumnWidths",e),e.value}},{key:"setupHandlePosition",value:function(e){var t=this;if(!e.parentNode)return!1;this.currentTH=e;var n=this.hot.view.wt.wtTable.getCoords(e).col,i=(0,s.outerHeight)(this.currentTH);if(n>=0){var o=this.currentTH.getBoundingClientRect();if(this.currentCol=n,this.selectedCols=[],this.hot.selection.isSelected()&&this.hot.selection.isSelectedByColumnHeader()){var a=this.hot.getSelectedRangeLast(),r=a.from,l=a.to,d=r.col,u=l.col;d>=u&&(d=l.col,u=r.col),this.currentCol>=d&&this.currentCol<=u?(0,c.rangeEach)(d,u,(function(e){return t.selectedCols.push(e)})):this.selectedCols.push(this.currentCol)}else this.selectedCols.push(this.currentCol);this.startOffset=o.left-6,this.startWidth=parseInt(o.width,10),this.handle.style.top=o.top+"px",this.handle.style.left=this.startOffset+this.startWidth+"px",this.handle.style.height=i+"px",this.hot.rootElement.appendChild(this.handle)}}},{key:"refreshHandlePosition",value:function(){this.handle.style.left=this.startOffset+this.currentWidth+"px"}},{key:"setupGuidePosition",value:function(){var e=parseInt((0,s.outerHeight)(this.handle),10),t=parseInt(this.handle.style.top,10)+e,n=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);(0,s.addClass)(this.handle,"active"),(0,s.addClass)(this.guide,"active"),this.guide.style.top=t+"px",this.guide.style.left=this.handle.style.left,this.guide.style.height=n-e+"px",this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.left=this.handle.style.left}},{key:"hideHandleAndGuide",value:function(){(0,s.removeClass)(this.handle,"active"),(0,s.removeClass)(this.guide,"active")}},{key:"checkIfColumnHeader",value:function(e){if(e!=this.hot.rootElement){var t=e.parentNode;return"THEAD"===t.tagName||this.checkIfColumnHeader(t)}return!1}},{key:"getTHFromTargetElement",value:function(e){return"TABLE"!=e.tagName?"TH"==e.tagName?e:this.getTHFromTargetElement(e.parentNode):null}},{key:"onMouseOver",value:function(e){if(this.checkIfColumnHeader(e.target)){var t=this.getTHFromTargetElement(e.target);if(!t)return;var n=t.getAttribute("colspan");!t||null!==n&&1!==n||this.pressed||this.setupHandlePosition(t)}}},{key:"afterMouseDownTimeout",value:function(){var e=this,t=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.wt.wtOverlays.adjustElementsSize(!0)},n=function(n,i){var o=e.hot.runHooks("beforeColumnResize",n,e.newSize,!0);void 0!==o&&(e.newSize=o),"all"===e.hot.getSettings().stretchH?e.clearManualSize(n):e.setManualSize(n,e.newSize),i&&t(),e.saveManualColumnWidths(),e.hot.runHooks("afterColumnResize",n,e.newSize,!0)};this.dblclick>=2&&(this.selectedCols.length>1?((0,d.arrayEach)(this.selectedCols,(function(e){n(e)})),t()):(0,d.arrayEach)(this.selectedCols,(function(e){n(e,!0)}))),this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(e){var t=this;(0,s.hasClass)(e.target,"manualColumnResizer")&&(this.setupGuidePosition(),this.pressed=this.hot,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout((function(){return t.afterMouseDownTimeout()}),500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick++,this.startX=(0,l.pageX)(e),this.newSize=this.startWidth)}},{key:"onMouseMove",value:function(e){var t=this;this.pressed&&(this.currentWidth=this.startWidth+((0,l.pageX)(e)-this.startX),(0,d.arrayEach)(this.selectedCols,(function(e){t.newSize=t.setManualSize(e,t.currentWidth)})),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(e){var t=this,n=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.wt.wtOverlays.adjustElementsSize(!0)},i=function(e,i){t.hot.runHooks("beforeColumnResize",e,t.newSize),i&&n(),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",e,t.newSize)};this.pressed&&(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!=this.startWidth&&(this.selectedCols.length>1?((0,d.arrayEach)(this.selectedCols,(function(e){i(e)})),n()):(0,d.arrayEach)(this.selectedCols,(function(e){i(e,!0)}))),this.setupHandlePosition(this.currentTH))}},{key:"bindEvents",value:function(){var e=this;this.eventManager.addEventListener(this.hot.rootElement,"mouseover",(function(t){return e.onMouseOver(t)})),this.eventManager.addEventListener(this.hot.rootElement,"mousedown",(function(t){return e.onMouseDown(t)})),this.eventManager.addEventListener(window,"mousemove",(function(t){return e.onMouseMove(t)})),this.eventManager.addEventListener(window,"mouseup",(function(t){return e.onMouseUp(t)}))}},{key:"setManualSize",value:function(e,t){return t=Math.max(t,20),e=this.hot.runHooks("modifyCol",e),this.manualColumnWidths[e]=t,t}},{key:"clearManualSize",value:function(e){e=this.hot.runHooks("modifyCol",e),this.manualColumnWidths[e]=void 0}},{key:"onModifyColWidth",value:function(e,t){return this.enabled&&(t=this.hot.runHooks("modifyCol",t),this.hot.getSettings().manualColumnResize&&this.manualColumnWidths[t])?this.manualColumnWidths[t]:e}},{key:"onBeforeStretchingColumnWidth",value:function(e,t){var n=this.manualColumnWidths[t];return void 0===n&&(n=e),n}},{key:"onBeforeColumnResize",value:function(){this.hot.view.wt.wtViewport.hasOversizedColumnHeadersMarked={}}}]),t}(a.default);(0,u.registerPlugin)("manualColumnResize",p),t.default=p},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=m(n(10)),s=m(n(16)),r=n(1),l=n(0),d=n(5),c=m(n(6)),u=n(8),h=m(n(343)),p=m(n(344)),f=m(n(345));function m(e){return e&&e.__esModule?e:{default:e}}n(346),s.default.getSingleton().register("beforeRowMove"),s.default.getSingleton().register("afterRowMove"),s.default.getSingleton().register("unmodifyRow");var _=new WeakMap,v="ht__manualRowMove",g="show-ui",y="on-moving--rows",b="after-selection--rows",w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return _.set(n,{rowsToMove:[],pressed:void 0,disallowMoving:void 0,target:{eventPageY:void 0,coords:void 0,TD:void 0,row:void 0}}),n.removedRows=[],n.rowsMapper=new h.default(n),n.eventManager=new c.default(n),n.backlight=new p.default(e),n.guideline=new f.default(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualRowMove}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",(function(t,n,i,o){return e.onBeforeOnCellMouseDown(t,n,i,o)})),this.addHook("beforeOnCellMouseOver",(function(t,n,i,o){return e.onBeforeOnCellMouseOver(t,n,i,o)})),this.addHook("afterScrollHorizontally",(function(){return e.onAfterScrollHorizontally()})),this.addHook("modifyRow",(function(t,n){return e.onModifyRow(t,n)})),this.addHook("beforeRemoveRow",(function(t,n){return e.onBeforeRemoveRow(t,n)})),this.addHook("afterRemoveRow",(function(){return e.onAfterRemoveRow()})),this.addHook("afterCreateRow",(function(t,n){return e.onAfterCreateRow(t,n)})),this.addHook("afterLoadData",(function(){return e.onAfterLoadData()})),this.addHook("beforeColumnSort",(function(t,n){return e.onBeforeColumnSort(t,n)})),this.addHook("unmodifyRow",(function(t){return e.onUnmodifyRow(t)})),this.registerEvents(),(0,l.addClass)(this.hot.rootElement,v),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.onAfterPluginsInitialized(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this.hot.getSettings().manualRowMove;Array.isArray(e)&&this.rowsMapper.clearMap(),(0,l.removeClass)(this.hot.rootElement,v),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"moveRow",value:function(e,t){this.moveRows([e],t)}},{key:"moveRows",value:function(e,t){var n=this,i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)),o=_.get(this),a=this.hot.runHooks("beforeRowMove",i,t);o.disallowMoving=!1===a,o.disallowMoving||((0,r.arrayEach)(e,(function(e,t,i){i[t]=n.rowsMapper.getValueByIndex(e)})),(0,r.arrayEach)(e,(function(e,i){var o=n.rowsMapper.getIndexByValue(e);o!==t&&n.rowsMapper.moveRow(o,t+i)})),this.rowsMapper.clearNull()),this.hot.runHooks("afterRowMove",i,t)}},{key:"changeSelection",value:function(e,t){this.hot.selectRows(e,t)}},{key:"getRowsHeight",value:function(e,t){for(var n=0,i=e;i<t;i++)n+=this.hot.view.wt.wtTable.getRowHeight(i)||23;return n}},{key:"initialSettings",value:function(){var e=this.hot.getSettings().manualRowMove;if(Array.isArray(e))this.moveRows(e,0);else if(void 0!==e){var t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}},{key:"isFixedRowTop",value:function(e){return e<this.hot.getSettings().fixedRowsTop}},{key:"isFixedRowBottom",value:function(e){return e>this.hot.getSettings().fixedRowsBottom}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualRowMove",this.rowsMapper._arrayMap)}},{key:"persistentStateLoad",value:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualRowMove",e),e.value?e.value:[]}},{key:"prepareRowsToMoving",value:function(){var e=this.hot.getSelectedRangeLast(),t=[];if(!e)return t;var n=e.from,i=e.to,o=Math.min(n.row,i.row),a=Math.max(n.row,i.row);return(0,d.rangeEach)(o,a,(function(e){t.push(e)})),t}},{key:"refreshPositions",value:function(){var e=_.get(this),t=e.target.coords,n=this.hot.view.wt.wtTable.getFirstVisibleRow(),i=this.hot.view.wt.wtTable.getLastVisibleRow(),o=this.hot.getSettings().fixedRowsTop,a=this.hot.countRows();t.row<o&&n>0&&this.hot.scrollViewportTo(n-1),t.row>=i&&i<a&&this.hot.scrollViewportTo(i+1,void 0,!0);var s=this.hot.view.wt.wtTable,r=e.target.TD,d=(0,l.offset)(this.hot.rootElement),c=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,t.row),u=e.target.eventPageY-d.top+s.holder.scrollTop,h=s.hider.offsetHeight,p=s.TBODY.offsetTop,f=this.backlight.getOffset().top,m=this.backlight.getSize().height;this.isFixedRowTop(t.row)&&(c+=s.holder.scrollTop),t.row<0?e.target.row=n>0?n-1:n:r.offsetHeight/2+c<=u?(e.target.row=t.row+1,c+=0===t.row?r.offsetHeight-1:r.offsetHeight):e.target.row=t.row;var v=u,g=c;u+m+f>=h?v=h-m-f:u+f<p&&(v=p+Math.abs(f)),c>=h-1&&(g=h-1);var y=0;this.hot.view.wt.wtOverlays.topOverlay&&(y=this.hot.view.wt.wtOverlays.topOverlay.clone.wtTable.TABLE.offsetHeight),t.row>=o&&g-s.holder.scrollTop<y&&this.hot.scrollViewportTo(t.row),this.backlight.setPosition(v),this.guideline.setPosition(g)}},{key:"updateRowsMapper",value:function(){var e=this.hot.countSourceRows(),t=this.rowsMapper._arrayMap.length;if(0===t)this.rowsMapper.createMap(e||this.hot.getSettings().startRows);else if(t<e){var n=e-t;this.rowsMapper.insertItems(t,n)}else if(t>e){var i=e-1,o=[];(0,r.arrayEach)(this.rowsMapper._arrayMap,(function(e,t){e>i&&o.push(t)})),this.rowsMapper.removeItems(o)}}},{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(document.documentElement,"mousemove",(function(t){return e.onMouseMove(t)})),this.eventManager.addEventListener(document.documentElement,"mouseup",(function(){return e.onMouseUp()}))}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeColumnSort",value:function(e,t){_.get(this).disallowMoving=void 0!==t}},{key:"onBeforeOnCellMouseDown",value:function(e,t,n,i){var o=this.hot.view.wt.wtTable,a=this.hot.selection.isSelectedByRowHeader(),s=this.hot.getSelectedRangeLast(),r=_.get(this);if(!s||!a||r.pressed||0!==e.button)return r.pressed=!1,r.rowsToMove.length=0,void(0,l.removeClass)(this.hot.rootElement,[y,g]);var d=this.guideline.isBuilt()&&!this.guideline.isAppended(),c=this.backlight.isBuilt()&&!this.backlight.isAppended();d&&c&&(this.guideline.appendTo(o.hider),this.backlight.appendTo(o.hider));var u=s.from,h=s.to,p=Math.min(u.row,h.row),f=Math.max(u.row,h.row);if(t.col<0&&t.row>=p&&t.row<=f){i.row=!0,r.pressed=!0,r.target.eventPageY=e.pageY,r.target.coords=t,r.target.TD=n,r.rowsToMove=this.prepareRowsToMoving();var m=o.holder.scrollLeft+this.hot.view.wt.wtViewport.getRowHeaderWidth();this.backlight.setPosition(null,m),this.backlight.setSize(o.hider.offsetWidth-m,this.getRowsHeight(p,f+1)),this.backlight.setOffset(-1*(this.getRowsHeight(p,t.row)+e.layerY),null),(0,l.addClass)(this.hot.rootElement,y),this.refreshPositions()}else(0,l.removeClass)(this.hot.rootElement,b),r.pressed=!1,r.rowsToMove.length=0}},{key:"onMouseMove",value:function(e){var t=_.get(this);if(t.pressed){if(e.realTarget===this.backlight.element){var n=this.backlight.getSize().height;this.backlight.setSize(null,0),setTimeout((function(){this.backlight.setPosition(null,n)}))}t.target.eventPageY=e.pageY,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(e,t,n,i){var o=this.hot.getSelectedRangeLast(),a=_.get(this);o&&a.pressed&&(a.rowsToMove.indexOf(t.row)>-1?(0,l.removeClass)(this.hot.rootElement,g):(0,l.addClass)(this.hot.rootElement,g),i.row=!0,i.column=!0,i.cell=!0,a.target.coords=t,a.target.TD=n)}},{key:"onMouseUp",value:function(){var e=_.get(this),t=e.target.row,n=e.rowsToMove.length;if(e.pressed=!1,e.backlightHeight=0,(0,l.removeClass)(this.hot.rootElement,[y,g,b]),this.hot.selection.isSelectedByRowHeader()&&(0,l.addClass)(this.hot.rootElement,b),!(n<1||void 0===t||e.rowsToMove.indexOf(t)>-1||e.rowsToMove[n-1]===t-1)){if(this.moveRows(e.rowsToMove,t),this.persistentStateSave(),this.hot.render(),!e.disallowMoving){var i=this.rowsMapper.getIndexByValue(e.rowsToMove[0]),o=this.rowsMapper.getIndexByValue(e.rowsToMove[n-1]);this.changeSelection(i,o)}e.rowsToMove.length=0}}},{key:"onAfterScrollHorizontally",value:function(){var e=this.hot.view.wt.wtTable,t=this.hot.view.wt.wtViewport.getRowHeaderWidth()+e.holder.scrollLeft;this.backlight.setPosition(null,t),this.backlight.setSize(e.hider.offsetWidth-t)}},{key:"onAfterCreateRow",value:function(e,t){this.rowsMapper.shiftItems(e,t)}},{key:"onBeforeRemoveRow",value:function(e,t){var n=this;this.removedRows.length=0,!1!==e&&(0,d.rangeEach)(e,e+t-1,(function(e){n.removedRows.push(n.hot.runHooks("modifyRow",e,n.pluginName))}))}},{key:"onAfterRemoveRow",value:function(){this.rowsMapper.unshiftItems(this.removedRows)}},{key:"onAfterLoadData",value:function(){this.updateRowsMapper()}},{key:"onModifyRow",value:function(e,t){if(t!==this.pluginName){var n=this.rowsMapper.getValueByIndex(e);e=null===n?e:n}return e}},{key:"onUnmodifyRow",value:function(e){var t=this.rowsMapper.getIndexByValue(e);return null===t?e:t}},{key:"onAfterPluginsInitialized",value:function(){this.updateRowsMapper(),this.initialSettings(),this.backlight.build(),this.guideline.build()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),this.rowsMapper.destroy(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.default);(0,u.registerPlugin)("ManualRowMove",w),t.default=w},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(94),s=(i=a)&&i.__esModule?i:{default:i},r=n(1),l=n(2),d=n(5),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manualRowMove=t}return o(e,[{key:"createMap",value:function(e){var t=this,n=void 0===e?this._arrayMap.length:e;this._arrayMap.length=0,(0,d.rangeEach)(n-1,(function(e){t._arrayMap[e]=e}))}},{key:"destroy",value:function(){this._arrayMap=null}},{key:"moveRow",value:function(e,t){var n=this._arrayMap[e];this._arrayMap[e]=null,this._arrayMap.splice(t,0,n)}},{key:"clearNull",value:function(){this._arrayMap=(0,r.arrayFilter)(this._arrayMap,(function(e){return null!==e}))}}]),e}();(0,l.mixin)(c,s.default),t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=n(203),r=(i=s)&&i.__esModule?i:{default:i},l=n(0),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"build",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"build",this).call(this),(0,l.addClass)(this._element,"ht__manualRowMove--backlight")}}]),t}(r.default);t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=n(203),r=(i=s)&&i.__esModule?i:{default:i},l=n(0),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"build",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"build",this).call(this),(0,l.addClass)(this._element,"ht__manualRowMove--guideline")}}]),t}(r.default);t.default=d},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=h(n(10)),s=n(0),r=h(n(6)),l=n(13),d=n(1),c=n(5),u=n(8);function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.currentTH=null,n.currentRow=null,n.selectedRows=[],n.currentHeight=null,n.newSize=null,n.startY=null,n.startHeight=null,n.startOffset=null,n.handle=document.createElement("DIV"),n.guide=document.createElement("DIV"),n.eventManager=new r.default(n),n.pressed=null,n.dblclick=0,n.autoresizeTimeout=null,n.manualRowHeights=[],(0,s.addClass)(n.handle,"manualRowResizer"),(0,s.addClass)(n.guide,"manualRowResizerGuide"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return this.hot.getSettings().manualRowResize}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){this.manualRowHeights=[];var n=this.hot.getSettings().manualRowResize,i=this.loadManualRowHeights();void 0!==i?this.manualRowHeights=i:Array.isArray(n)?this.manualRowHeights=n:this.manualRowHeights=[],this.addHook("modifyRowHeight",(function(t,n){return e.onModifyRowHeight(t,n)})),this.bindEvents(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.hot.getSettings().manualRowResize;Array.isArray(e)?this.manualRowHeights=e:e||(this.manualRowHeights=[])}},{key:"disablePlugin",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"saveManualRowHeights",value:function(){this.hot.runHooks("persistentStateSave","manualRowHeights",this.manualRowHeights)}},{key:"loadManualRowHeights",value:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualRowHeights",e),e.value}},{key:"setupHandlePosition",value:function(e){var t=this;this.currentTH=e;var n=this.hot.view.wt.wtTable.getCoords(e).row,i=(0,s.outerWidth)(this.currentTH);if(n>=0){var o=this.currentTH.getBoundingClientRect();if(this.currentRow=n,this.selectedRows=[],this.hot.selection.isSelected()&&this.hot.selection.isSelectedByRowHeader()){var a=this.hot.getSelectedRangeLast(),r=a.from,l=a.to,d=r.row,u=l.row;d>=u&&(d=l.row,u=r.row),this.currentRow>=d&&this.currentRow<=u?(0,c.rangeEach)(d,u,(function(e){return t.selectedRows.push(e)})):this.selectedRows.push(this.currentRow)}else this.selectedRows.push(this.currentRow);this.startOffset=o.top-6,this.startHeight=parseInt(o.height,10),this.handle.style.left=o.left+"px",this.handle.style.top=this.startOffset+this.startHeight+"px",this.handle.style.width=i+"px",this.hot.rootElement.appendChild(this.handle)}}},{key:"refreshHandlePosition",value:function(){this.handle.style.top=this.startOffset+this.currentHeight+"px"}},{key:"setupGuidePosition",value:function(){var e=parseInt((0,s.outerWidth)(this.handle),10),t=parseInt(this.handle.style.left,10)+e,n=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);(0,s.addClass)(this.handle,"active"),(0,s.addClass)(this.guide,"active"),this.guide.style.top=this.handle.style.top,this.guide.style.left=t+"px",this.guide.style.width=n-e+"px",this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.top=this.handle.style.top}},{key:"hideHandleAndGuide",value:function(){(0,s.removeClass)(this.handle,"active"),(0,s.removeClass)(this.guide,"active")}},{key:"checkIfRowHeader",value:function(e){if(e!=this.hot.rootElement){var t=e.parentNode;return"TBODY"===t.tagName||this.checkIfRowHeader(t)}return!1}},{key:"getTHFromTargetElement",value:function(e){return"TABLE"!=e.tagName?"TH"==e.tagName?e:this.getTHFromTargetElement(e.parentNode):null}},{key:"onMouseOver",value:function(e){if(this.checkIfRowHeader(e.target)){var t=this.getTHFromTargetElement(e.target);t&&(this.pressed||this.setupHandlePosition(t))}}},{key:"afterMouseDownTimeout",value:function(){var e=this,t=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.wt.wtOverlays.adjustElementsSize(!0)},n=function(n,i){var o=e.hot.runHooks("beforeRowResize",n,e.newSize,!0);void 0!==o&&(e.newSize=o),e.setManualSize(n,e.newSize),i&&t(),e.hot.runHooks("afterRowResize",n,e.newSize,!0)};this.dblclick>=2&&(this.selectedRows.length>1?((0,d.arrayEach)(this.selectedRows,(function(e){n(e)})),t()):(0,d.arrayEach)(this.selectedRows,(function(e){n(e,!0)}))),this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(e){var t=this;(0,s.hasClass)(e.target,"manualRowResizer")&&(this.setupGuidePosition(),this.pressed=this.hot,null==this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout((function(){return t.afterMouseDownTimeout()}),500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick++,this.startY=(0,l.pageY)(e),this.newSize=this.startHeight)}},{key:"onMouseMove",value:function(e){var t=this;this.pressed&&(this.currentHeight=this.startHeight+((0,l.pageY)(e)-this.startY),(0,d.arrayEach)(this.selectedRows,(function(e){t.newSize=t.setManualSize(e,t.currentHeight)})),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(e){var t=this,n=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.wt.wtOverlays.adjustElementsSize(!0)},i=function(e,i){t.hot.runHooks("beforeRowResize",e,t.newSize),i&&n(),t.saveManualRowHeights(),t.hot.runHooks("afterRowResize",e,t.newSize)};this.pressed&&(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!=this.startHeight&&(this.selectedRows.length>1?((0,d.arrayEach)(this.selectedRows,(function(e){i(e)})),n()):(0,d.arrayEach)(this.selectedRows,(function(e){i(e,!0)}))),this.setupHandlePosition(this.currentTH))}},{key:"bindEvents",value:function(){var e=this;this.eventManager.addEventListener(this.hot.rootElement,"mouseover",(function(t){return e.onMouseOver(t)})),this.eventManager.addEventListener(this.hot.rootElement,"mousedown",(function(t){return e.onMouseDown(t)})),this.eventManager.addEventListener(window,"mousemove",(function(t){return e.onMouseMove(t)})),this.eventManager.addEventListener(window,"mouseup",(function(t){return e.onMouseUp(t)}))}},{key:"setManualSize",value:function(e,t){return e=this.hot.runHooks("modifyRow",e),this.manualRowHeights[e]=t,t}},{key:"onModifyRowHeight",value:function(e,t){if(this.enabled){var n=this.hot.getPlugin("autoRowSize"),i=n?n.heights[t]:null;t=this.hot.runHooks("modifyRow",t);var o=this.manualRowHeights[t];if(void 0!==o&&(o===i||o>(e||0)))return o}return e}}]),t}(a.default);(0,u.registerPlugin)("manualRowResize",p),t.default=p},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=w(n(10)),r=w(n(16)),l=n(8),d=n(13),c=n(4),u=w(n(349)),h=w(n(97)),p=w(n(350)),f=w(n(351)),m=w(n(352)),_=n(1),v=n(2),g=n(58),y=n(5),b=n(204);function w(e){return e&&e.__esModule?e:{default:e}}function k(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}n(353),r.default.getSingleton().register("beforeMergeCells"),r.default.getSingleton().register("afterMergeCells"),r.default.getSingleton().register("beforeUnmergeCells"),r.default.getSingleton().register("afterUnmergeCells");var C=new WeakMap,x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return C.set(n,{lastDesiredCoords:null}),n.mergedCellsCollection=null,n.autofillCalculations=null,n.selectionCalculations=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().mergeCells}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.mergedCellsCollection=new u.default(this),this.autofillCalculations=new p.default(this),this.selectionCalculations=new f.default(this),this.addHook("afterInit",(function(){return e.onAfterInit.apply(e,arguments)})),this.addHook("beforeKeyDown",(function(){return e.onBeforeKeyDown.apply(e,arguments)})),this.addHook("modifyTransformStart",(function(){return e.onModifyTransformStart.apply(e,arguments)})),this.addHook("afterModifyTransformStart",(function(){return e.onAfterModifyTransformStart.apply(e,arguments)})),this.addHook("modifyTransformEnd",(function(){return e.onModifyTransformEnd.apply(e,arguments)})),this.addHook("modifyGetCellCoords",(function(){return e.onModifyGetCellCoords.apply(e,arguments)})),this.addHook("beforeSetRangeEnd",(function(){return e.onBeforeSetRangeEnd.apply(e,arguments)})),this.addHook("afterIsMultipleSelection",(function(){return e.onAfterIsMultipleSelection.apply(e,arguments)})),this.addHook("afterRenderer",(function(){return e.onAfterRenderer.apply(e,arguments)})),this.addHook("afterContextMenuDefaultOptions",(function(){return e.addMergeActionsToContextMenu.apply(e,arguments)})),this.addHook("afterGetCellMeta",(function(){return e.onAfterGetCellMeta.apply(e,arguments)})),this.addHook("afterViewportRowCalculatorOverride",(function(){return e.onAfterViewportRowCalculatorOverride.apply(e,arguments)})),this.addHook("afterViewportColumnCalculatorOverride",(function(){return e.onAfterViewportColumnCalculatorOverride.apply(e,arguments)})),this.addHook("modifyAutofillRange",(function(){return e.onModifyAutofillRange.apply(e,arguments)})),this.addHook("afterCreateCol",(function(){return e.onAfterCreateCol.apply(e,arguments)})),this.addHook("afterRemoveCol",(function(){return e.onAfterRemoveCol.apply(e,arguments)})),this.addHook("afterCreateRow",(function(){return e.onAfterCreateRow.apply(e,arguments)})),this.addHook("afterRemoveRow",(function(){return e.onAfterRemoveRow.apply(e,arguments)})),this.addHook("afterChange",(function(){return e.onAfterChange.apply(e,arguments)})),this.addHook("beforeDrawBorders",(function(){return e.onBeforeDrawAreaBorders.apply(e,arguments)})),this.addHook("afterDrawSelection",(function(){return e.onAfterDrawSelection.apply(e,arguments)})),this.addHook("beforeRemoveCellClassNames",(function(){return e.onBeforeRemoveCellClassNames.apply(e,arguments)})),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.clearCollections(),this.hot.render(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){var e=this.hot.getSettings().mergeCells;this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(e),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"validateSetting",value:function(e){var t=!0;return!!e&&(h.default.containsNegativeValues(e)?((0,g.warn)(h.default.NEGATIVE_VALUES_WARNING(e)),t=!1):h.default.isOutOfBounds(e,this.hot.countRows(),this.hot.countCols())?((0,g.warn)(h.default.IS_OUT_OF_BOUNDS_WARNING(e)),t=!1):h.default.isSingleCell(e)?((0,g.warn)(h.default.IS_SINGLE_CELL(e)),t=!1):h.default.containsZeroSpan(e)&&((0,g.warn)(h.default.ZERO_SPAN_WARNING(e)),t=!1),t)}},{key:"generateFromSettings",value:function(e){var t=this;if(Array.isArray(e)){var n,i=[];(0,_.arrayEach)(e,(function(e){if(t.validateSetting(e)){var n=new c.CellCoords(e.row,e.col),o=new c.CellCoords(e.row+e.rowspan-1,e.col+e.colspan-1),a=new c.CellRange(n,n,o);i.push(t.mergeRange(a,!0,!0))}})),i=i.filter((function(e){return!0!==e}));var o=this.getBulkCollectionData(i);(n=this.hot).populateFromArray.apply(n,k(o))}}},{key:"getBulkCollectionData",value:function(e){var t,n=this.getBulkCollectionDataRange(e),o=(t=this.hot).getData.apply(t,k(n)).splice(0);return(0,_.arrayEach)(e,(function(e){var t=i(e,3),a=t[0],s=t[1],r=t[2];(0,_.arrayEach)(r,(function(e,t){(0,_.arrayEach)(e,(function(e,i){o[a-n[0]+t][s-n[1]+i]=e}))}))})),[n[0],n[1],o]}},{key:"getBulkCollectionDataRange",value:function(e){var t=[0,0],n=[0,0],i=null,o=null,a=null;return(0,_.arrayEach)(e,(function(e){i=e[0],o=e[1],a=e[2],t[0]=Math.min(i,t[0]),t[1]=Math.min(o,t[1]),n[0]=Math.max(i+a.length-1,n[0]),n[1]=Math.max(o+a[0].length-1,n[1])})),[].concat(t,n)}},{key:"clearCollections",value:function(){this.mergedCellsCollection.clear()}},{key:"canMergeRange",value:function(e){return!!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||this.validateSetting(e)}},{key:"toggleMergeOnSelection",value:function(){var e=this.hot.getSelectedRangeLast();if(e){e.setDirection("NW-SE");var t=e.from,n=e.to;this.toggleMerge(e),this.hot.selectCell(t.row,t.col,n.row,n.col,!1)}}},{key:"mergeSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(e){e.setDirection("NW-SE");var t=e.from,n=e.to;this.unmergeRange(e,!0),this.mergeRange(e),this.hot.selectCell(t.row,t.col,n.row,n.col,!1)}}},{key:"unmergeSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(e){var t=e.from,n=e.to;this.unmergeRange(e,!0),this.hot.selectCell(t.row,t.col,n.row,n.col,!1)}}},{key:"mergeRange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.getTopLeftCorner(),a=e.getBottomRightCorner(),s={row:o.row,col:o.col,rowspan:a.row-o.row+1,colspan:a.col-o.col+1},r=[],l=null;return!!this.canMergeRange(s,n)&&(this.hot.runHooks("beforeMergeCells",e,n),(0,y.rangeEach)(0,s.rowspan-1,(function(e){(0,y.rangeEach)(0,s.colspan-1,(function(n){var i=null;r[e]||(r[e]=[]),0===e&&0===n?i=t.hot.getDataAtCell(s.row,s.col):t.hot.setCellMeta(s.row+e,s.col+n,"hidden",!0),r[e][n]=i}))})),this.hot.setCellMeta(s.row,s.col,"spanned",!0),!this.mergedCellsCollection.add(s)||(i?l=[s.row,s.col,r]:this.hot.populateFromArray(s.row,s.col,r,void 0,void 0,this.pluginName),this.hot.runHooks("afterMergeCells",e,s,n),l))}},{key:"unmergeRange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.mergedCellsCollection.getWithinRange(e);i&&(this.hot.runHooks("beforeUnmergeCells",e,n),(0,_.arrayEach)(i,(function(e){t.mergedCellsCollection.remove(e.row,e.col),(0,y.rangeEach)(0,e.rowspan-1,(function(n){(0,y.rangeEach)(0,e.colspan-1,(function(i){t.hot.removeCellMeta(e.row+n,e.col+i,"hidden")}))})),t.hot.removeCellMeta(e.row,e.col,"spanned")})),this.hot.render(),this.hot.runHooks("afterUnmergeCells",e,n))}},{key:"toggleMerge",value:function(e){var t=this.mergedCellsCollection.get(e.from.row,e.from.col);t.row===e.from.row&&t.col===e.from.col&&t.row+t.rowspan-1===e.to.row&&t.col+t.colspan-1===e.to.col?this.unmergeRange(e):this.mergeSelection(e)}},{key:"merge",value:function(e,t,n,i){var o=new c.CellCoords(e,t),a=new c.CellCoords(n,i);this.mergeRange(new c.CellRange(o,o,a))}},{key:"unmerge",value:function(e,t,n,i){var o=new c.CellCoords(e,t),a=new c.CellCoords(n,i);this.unmergeRange(new c.CellRange(o,o,a))}},{key:"onAfterInit",value:function(){this.generateFromSettings(this.hot.getSettings().mergeCells),this.hot.render()}},{key:"onBeforeKeyDown",value:function(e){(e.ctrlKey||e.metaKey)&&!e.altKey&&77===e.keyCode&&(this.toggleMerge(this.hot.getSelectedRangeLast()),this.hot.render(),(0,d.stopImmediatePropagation)(e))}},{key:"onAfterIsMultipleSelection",value:function(e){if(e)for(var t=this.mergedCellsCollection.mergedCells,n=this.hot.getSelectedRangeLast(),i=0;i<t.length;i+=1)if(n.highlight.row===t[i].row&&n.highlight.col===t[i].col&&n.to.row===t[i].row+t[i].rowspan-1&&n.to.col===t[i].col+t[i].colspan-1)return!1;return e}},{key:"onModifyTransformStart",value:function(e){var t,n=C.get(this),i=this.hot.getSelectedRangeLast(),o={row:e.row,col:e.col},a=new c.CellCoords(i.highlight.row,i.highlight.col),s=this.mergedCellsCollection.get(a.row,a.col);if(n.lastDesiredCoords||(n.lastDesiredCoords=new c.CellCoords(null,null)),s){var r=new c.CellCoords(s.row,s.col),l=new c.CellCoords(s.row+s.rowspan-1,s.col+s.colspan-1);new c.CellRange(r,r,l).includes(n.lastDesiredCoords)||(n.lastDesiredCoords=new c.CellCoords(null,null)),o.row=n.lastDesiredCoords.row?n.lastDesiredCoords.row-a.row:o.row,o.col=n.lastDesiredCoords.col?n.lastDesiredCoords.col-a.col:o.col,e.row>0?o.row=s.row+s.rowspan-1-a.row+e.row:e.row<0&&(o.row=a.row-s.row+e.row),e.col>0?o.col=s.col+s.colspan-1-a.col+e.col:e.col<0&&(o.col=a.col-s.col+e.col)}t=new c.CellCoords(i.highlight.row+o.row,i.highlight.col+o.col);var d=this.mergedCellsCollection.get(t.row,t.col);d&&(n.lastDesiredCoords=t,o={row:d.row-a.row,col:d.col-a.col}),0!==o.row&&(e.row=o.row),0!==o.col&&(e.col=o.col)}},{key:"onModifyTransformEnd",value:function(e){var t=this,n=this.hot.getSelectedRangeLast(),i=(0,v.clone)(e),o=this.selectionCalculations.getUpdatedSelectionRange(n,e),a=(0,v.clone)(i),s=this.mergedCellsCollection.getWithinRange(o,!0);do{a=(0,v.clone)(i),this.selectionCalculations.getUpdatedSelectionRange(n,i),(0,_.arrayEach)(s,(function(e){t.selectionCalculations.snapDelta(i,n,e)}))}while(i.row!==a.row||i.col!==a.col);e.row=i.row,e.col=i.col}},{key:"onModifyGetCellCoords",value:function(e,t){var n=this.mergedCellsCollection.get(e,t);return n?[n.row,n.col,n.row+n.rowspan-1,n.col+n.colspan-1]:void 0}},{key:"addMergeActionsToContextMenu",value:function(e){e.items.push({name:"---------"},(0,m.default)(this))}},{key:"onAfterRenderer",value:function(e,t,n){var i=this.mergedCellsCollection.get(t,n);(0,b.applySpanProperties)(e,i,t,n)}},{key:"onBeforeSetRangeEnd",value:function(e){var t=this.hot.getSelectedRangeLast();t.highlight=new c.CellCoords(t.highlight.row,t.highlight.col),t.to=e;var n=!1;if(!(0===t.from.row&&t.to.row===this.hot.countRows()-1||0===t.from.col&&t.to.col===this.hot.countCols()-1))do{n=!1;for(var i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1){var o=this.mergedCellsCollection.mergedCells[i].getRange();t.expandByRange(o)&&(e.row=t.to.row,e.col=t.to.col,n=!0)}}while(n)}},{key:"onAfterGetCellMeta",value:function(e,t,n){var i=this.mergedCellsCollection.get(e,t);!i||i.row===e&&i.col===t||(n.copyable=!1)}},{key:"onAfterViewportRowCalculatorOverride",value:function(e){var t=this,n=this.hot.countCols(),i=void 0;(0,y.rangeEach)(0,n-1,(function(n){if((i=t.mergedCellsCollection.get(e.startRow,n))&&i.row<e.startRow)return e.startRow=i.row,t.onAfterViewportRowCalculatorOverride.call(t,e);if(i=t.mergedCellsCollection.get(e.endRow,n)){var o=i.row+i.rowspan-1;if(o>e.endRow)return e.endRow=o,t.onAfterViewportRowCalculatorOverride.call(t,e)}return!0}))}},{key:"onAfterViewportColumnCalculatorOverride",value:function(e){var t=this,n=this.hot.countRows(),i=void 0;(0,y.rangeEach)(0,n-1,(function(n){if((i=t.mergedCellsCollection.get(n,e.startColumn))&&i.col<e.startColumn)return e.startColumn=i.col,t.onAfterViewportColumnCalculatorOverride.call(t,e);if(i=t.mergedCellsCollection.get(n,e.endColumn)){var o=i.col+i.colspan-1;if(o>e.endColumn)return e.endColumn=o,t.onAfterViewportColumnCalculatorOverride.call(t,e)}return!0}))}},{key:"onModifyAutofillRange",value:function(e,t){this.autofillCalculations.correctSelectionAreaSize(t);var n=this.autofillCalculations.getDirection(t,e);if(this.autofillCalculations.dragAreaOverlapsCollections(t,e,n))return e=t;var i=this.mergedCellsCollection.getWithinRange({from:{row:t[0],col:t[1]},to:{row:t[2],col:t[3]}});return i?e=this.autofillCalculations.snapDragArea(t,e,n,i):e}},{key:"onAfterCreateCol",value:function(e,t){this.mergedCellsCollection.shiftCollections("right",e,t)}},{key:"onAfterRemoveCol",value:function(e,t){this.mergedCellsCollection.shiftCollections("left",e,t)}},{key:"onAfterCreateRow",value:function(e,t,n){"auto"!==n&&this.mergedCellsCollection.shiftCollections("down",e,t)}},{key:"onAfterRemoveRow",value:function(e,t){this.mergedCellsCollection.shiftCollections("up",e,t)}},{key:"onAfterChange",value:function(e,t){"Autofill.fill"===t&&this.autofillCalculations.recreateAfterDataPopulation(e)}},{key:"onBeforeDrawAreaBorders",value:function(e,t){if(t&&"area"===t){var n=this.hot.getSelectedRangeLast(),i=this.mergedCellsCollection.getWithinRange(n);(0,_.arrayEach)(i,(function(t){n.getBottomRightCorner().row===t.getLastRow()&&n.getBottomRightCorner().col===t.getLastColumn()&&(e[2]=t.row,e[3]=t.col)}))}}},{key:"onAfterModifyTransformStart",value:function(e,t,n){if(this.enabled){var i=this.mergedCellsCollection.get(e.row,e.col);if(i){var o=t>0,a=t<0,s=n<0,r=n>0,l=i.row+i.rowspan-1==this.hot.countRows()-1,d=0===i.row,c=i.col+i.colspan-1==this.hot.countCols()-1,u=0===i.col;(o&&l||a&&d||r&&c||s&&u)&&(e.row=i.row,e.col=i.col)}}}},{key:"onAfterDrawSelection",value:function(e,t,n,i){return this.selectionCalculations.getSelectedMergedCellClassName(e,t,n,i)}},{key:"onBeforeRemoveCellClassNames",value:function(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}}]),t}(s.default);(0,l.registerPlugin)("mergeCells",x),t.default=x},function(e,t,n){"use strict";t.__esModule=!0;var i,o,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(i=["The merged cell declared at [",", ","], overlaps with the other declared merged \n    cell. The overlapping merged cell was not added to the table, please fix your setup."],o=["The merged cell declared at [",", ","], overlaps with the other declared merged \n    cell. The overlapping merged cell was not added to the table, please fix your setup."],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),l=n(97),d=(a=l)&&a.__esModule?a:{default:a},c=n(4),u=n(5),h=n(58),p=n(1),f=n(204),m=n(42);function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.mergedCells=[],this.hot=t.hot}return s(e,[{key:"get",value:function(e,t){var n=this.mergedCells,i=!1;return(0,p.arrayEach)(n,(function(n){return!(n.row<=e&&n.row+n.rowspan-1>=e&&n.col<=t&&n.col+n.colspan-1>=t&&(i=n,1))})),i}},{key:"getByRange",value:function(e){var t=this.mergedCells,n=!1;return(0,p.arrayEach)(t,(function(t){return!(t.row<=e.from.row&&t.row+t.rowspan-1>=e.to.row&&t.col<=e.from.col&&t.col+t.colspan-1>=e.to.col)||(n=t)})),n}},{key:"getWithinRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mergedCells,i=[];if(!e.includesRange){var o=new c.CellCoords(e.from.row,e.from.col),a=new c.CellCoords(e.to.row,e.to.col);e=new c.CellRange(o,o,a)}return(0,p.arrayEach)(n,(function(n){var o=new c.CellCoords(n.row,n.col),a=new c.CellCoords(n.row+n.rowspan-1,n.col+n.colspan-1),s=new c.CellRange(o,o,a);t?e.overlaps(s)&&i.push(n):e.includesRange(s)&&i.push(n)})),!!i.length&&i}},{key:"add",value:function(t){var n=this.mergedCells,i=t.row,o=t.col,a=t.rowspan,s=t.colspan,r=new d.default(i,o,a,s),l=this.get(i,o),c=this.isOverlapping(r);return l||c?((0,h.warn)(e.IS_OVERLAPPING_WARNING(r)),!1):(this.hot&&r.normalize(this.hot),n.push(r),r)}},{key:"remove",value:function(e,t){var n=this.mergedCells,i=this.get(e,t),o=i?this.mergedCells.indexOf(i):null;return!(!i||!1===o)&&(n.splice(o,1),i)}},{key:"clear",value:function(){var e=this,t=this.mergedCells,n=[],i=[];(0,p.arrayEach)(t,(function(t){var i=e.hot.getCell(t.row,t.col);i&&n.push([i,e.get(t.row,t.col),t.row,t.col])})),this.mergedCells.length=0,(0,p.arrayEach)(n,(function(t,o){(0,u.rangeEach)(0,t.rowspan-1,(function(n){(0,u.rangeEach)(0,t.colspan-1,(function(o){if(0!==o||0!==n){var a=e.hot.getCell(t.row+n,t.col+o);a&&i.push([a,null,null,null])}}))})),n[o][1]=null})),(0,p.arrayEach)(n,(function(e){f.applySpanProperties.apply(void 0,_(e))})),(0,p.arrayEach)(i,(function(e){f.applySpanProperties.apply(void 0,_(e))}))}},{key:"isOverlapping",value:function(e){var t=new c.CellRange(null,new c.CellCoords(e.row,e.col),new c.CellCoords(e.row+e.rowspan-1,e.col+e.colspan-1)),n=!1;return(0,p.arrayEach)(this.mergedCells,(function(e){return!new c.CellRange(null,new c.CellCoords(e.row,e.col),new c.CellCoords(e.row+e.rowspan-1,e.col+e.colspan-1)).overlaps(t)||(n=!0,!1)})),n}},{key:"isMergedParent",value:function(e,t){var n=this.mergedCells,i=!1;return(0,p.arrayEach)(n,(function(n){return n.row!==e||n.col!==t||(i=!0,!1)})),i}},{key:"shiftCollections",value:function(e,t,n){var i=this,o=[0,0];switch(e){case"right":o[0]+=n;break;case"left":o[0]-=n;break;case"down":o[1]+=n;break;case"up":o[1]-=n}(0,p.arrayEach)(this.mergedCells,(function(e){e.shift(o,t)})),(0,u.rangeEachReverse)(this.mergedCells.length-1,0,(function(e){var t=i.mergedCells[e];t&&t.removed&&i.mergedCells.splice(i.mergedCells.indexOf(t),1)}))}}],[{key:"IS_OVERLAPPING_WARNING",value:function(e){return(0,m.toSingleLine)(r,e.row,e.col)}}]),e}();t.default=v},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),s=n(4),r=n(1),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.mergedCellsCollection=this.plugin.mergedCellsCollection,this.currentFillData=null}return o(e,[{key:"correctSelectionAreaSize",value:function(e){if(e[0]===e[2]&&e[1]===e[3]){var t=this.mergedCellsCollection.get(e[0],e[1]);t&&(e[2]=e[0]+t.rowspan-1,e[3]=e[1]+t.colspan-1)}}},{key:"getDirection",value:function(e,t){return t[0]===e[0]&&t[1]===e[1]&&t[3]===e[3]?"down":t[2]===e[2]&&t[1]===e[1]&&t[3]===e[3]?"up":t[1]===e[1]&&t[2]===e[2]?"right":"left"}},{key:"snapDragArea",value:function(e,t,n,o){var a=t.slice(0),s=this.getAutofillSize(e,t,n),r=i(e,4),l=r[0],d=r[1],c=r[2],u=r[3],h=["up","down"].indexOf(n)>-1?c-l+1:u-d+1,p=s-Math.floor(s/h)*h,f=this.getFarthestCollection(e,t,n,o);if(f)if("down"===n){var m=f.row+f.rowspan-l-p;a[2]+m>=this.plugin.hot.countRows()?a[2]-=p:a[2]+=p?m:0}else if("right"===n){var _=f.col+f.colspan-d-p;a[3]+_>=this.plugin.hot.countCols()?a[3]-=p:a[3]+=p?_:0}else if("up"===n){var v=c-p-f.row+1;a[0]+v<0?a[0]+=p:a[0]-=p?v:0}else if("left"===n){var g=u-p-f.col+1;a[1]+g<0?a[1]+=p:a[1]-=p?g:0}return this.updateCurrentFillCache({baseArea:e,dragDirection:n,foundMergedCells:o,fillSize:s,dragArea:a,cycleLength:h}),a}},{key:"updateCurrentFillCache",value:function(e){this.currentFillData||(this.currentFillData={}),(0,a.extend)(this.currentFillData,e)}},{key:"getAutofillSize",value:function(e,t,n){var o=i(e,4),a=o[0],s=o[1],r=o[2],l=o[3],d=i(t,4),c=d[0],u=d[1],h=d[2],p=d[3];switch(n){case"up":return a-c;case"down":return h-r;case"left":return s-u;case"right":return p-l;default:return null}}},{key:"getDragArea",value:function(e,t,n){var o=i(e,4),a=o[0],s=o[1],r=o[2],l=o[3],d=i(t,4),c=d[0],u=d[1],h=d[2],p=d[3];switch(n){case"up":return[c,u,a-1,l];case"down":return[r+1,s,h,l];case"left":return[c,u,r,s-1];case"right":return[a,l+1,h,p];default:return null}}},{key:"getFarthestCollection",value:function(e,t,n,o){var a=i(e,4),s=a[0],l=a[1],d=a[2],c=a[3],u=["up","down"].indexOf(n)>-1,h=u?d:c,p=u?s:l,f=this.getAutofillSize(e,t,n),m=u?d-s+1:c-l+1,_=f-Math.floor(f/m)*m,v=null,g=null,y=null;switch(n){case"up":v="includesVertically",y=h-_+1;break;case"left":v="includesHorizontally",y=h-_+1;break;case"down":v="includesVertically",y=p+_-1;break;case"right":v="includesHorizontally",y=p+_-1}return(0,r.arrayEach)(o,(function(e){e[v](y)&&e.isFarther(g,n)&&(g=e)})),g}},{key:"recreateAfterDataPopulation",value:function(e){if(this.currentFillData){var t=this.getRangeFromChanges(e),n=this.currentFillData.foundMergedCells,i=this.currentFillData.dragDirection,o=function(e,n){switch(i){case"up":return e.row-n>=t.from.row;case"down":return e.row+e.rowspan-1+n<=t.to.row;case"left":return e.col-n>=t.from.column;case"right":return e.col+e.colspan-1+n<=t.to.column;default:return null}},a=0,s=null,r=1;do{for(var l=0;l<n.length;l+=1){if(o(s=n[l],a=r*this.currentFillData.cycleLength))switch(i){case"up":this.plugin.mergedCellsCollection.add({row:s.row-a,rowspan:s.rowspan,col:s.col,colspan:s.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:s.row+a,rowspan:s.rowspan,col:s.col,colspan:s.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:s.row,rowspan:s.rowspan,col:s.col-a,colspan:s.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:s.row,rowspan:s.rowspan,col:s.col+a,colspan:s.colspan})}l===n.length-1&&(r+=1)}}while(o(s,a));this.currentFillData=null,this.plugin.hot.render()}}},{key:"getRangeFromChanges",value:function(e){var t={min:null,max:null},n={min:null,max:null};return(0,r.arrayEach)(e,(function(e){(null===t.min||e[0]<t.min)&&(t.min=e[0]),(null===t.max||e[0]>t.max)&&(t.max=e[0]),(null===n.min||e[1]<n.min)&&(n.min=e[1]),(null===n.max||e[1]>n.max)&&(n.max=e[1])})),{from:{row:t.min,column:n.min},to:{row:t.max,column:n.max}}}},{key:"dragAreaOverlapsCollections",value:function(e,t,n){var o=this.getDragArea(e,t,n),a=i(o,4),r=a[0],l=a[1],d=a[2],c=a[3],u=new s.CellCoords(r,l),h=new s.CellCoords(d,c),p=new s.CellRange(u,u,h);return!!this.mergedCellsCollection.getWithinRange(p,!0)}}]),e}();t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(4),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.fullySelectedMergedCellClassName="fullySelectedMergedCell"}return o(e,[{key:"snapDelta",value:function(e,t,n){var i=t.to,o=i.row+e.row,a=i.col+e.col;e.row?this.jumpOverMergedCell(e,n,o):e.col&&this.jumpOverMergedCell(e,n,a)}},{key:"jumpOverMergedCell",value:function(e,t,n){var i=e.row||e.col,o=null,a=null,s=null;e.row?(o=t.includesVertically(n),a=t.row,s=t.getLastRow()):e.col&&(o=t.includesHorizontally(n),a=t.col,s=t.getLastColumn()),0!==i&&(i>0?o&&n!==a&&(i+=s-n+1):o&&n!==s&&(i-=n-a+1),e.row?e.row=i:e.col&&(e.col=i))}},{key:"getUpdatedSelectionRange",value:function(e,t){return new a.CellRange(e.highlight,e.from,new a.CellCoords(e.to.row+t.row,e.to.col+t.col))}},{key:"getSelectedMergedCellClassName",value:function(e,t,n,o){var a=i(n,4),s=a[0],r=a[1],l=a[2],d=a[3];if(void 0!==o&&e>=s&&e<=l&&t>=r&&t<=d){if(!this.plugin.mergedCellsCollection.isMergedParent(e,t))return;var c=this.plugin.mergedCellsCollection.get(e,t);if(!c)return;if(c.row+c.rowspan-1<=l&&c.col+c.colspan-1<=d)return this.fullySelectedMergedCellClassName+"-"+o;if(this.plugin.selectionCalculations.isMergeCellFullySelected(c,this.plugin.hot.getSelectedRange()))return this.fullySelectedMergedCellClassName+"-multiple"}}},{key:"isMergeCellFullySelected",value:function(e,t){var n=[];if(!t||!e)return!1;for(var i=0;i<e.rowspan;i+=1)for(var o=0;o<e.colspan;o+=1)n.push(new a.CellCoords(e.row+i,e.col+o));for(var s=0;s<n.length;s+=1){for(var r=[],l=0;l<t.length;l+=1)r[l]=t[l].includes(n[s]);if(!r.includes(!0))return!1}return!0}},{key:"getSelectedMergedCellClassNameToRemove",value:function(){for(var e=[],t=0;t<=7;t+=1)e.push(this.fullySelectedMergedCellClassName+"-"+t);return e.push(this.fullySelectedMergedCellClassName+"-multiple"),e}}]),e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{key:"mergeCells",name:function(){var t=this.getSelectedLast();if(t){var n=e.mergedCellsCollection.get(t[0],t[1]);if(n.row===t[0]&&n.col===t[1]&&n.row+n.rowspan-1===t[2]&&n.col+n.colspan-1===t[3])return this.getTranslatedPhrase(o.CONTEXTMENU_ITEMS_UNMERGE_CELLS)}return this.getTranslatedPhrase(o.CONTEXTMENU_ITEMS_MERGE_CELLS)},callback:function(){e.toggleMergeOnSelection()},disabled:function(){var e=this.getSelectedLast();return!e||s.default.isSingleCell({row:e[0],col:e[1],rowspan:e[2]-e[0]+1,colspan:e[3]-e[1]+1})||this.selection.isSelectedByCorner()},hidden:!1}};var i,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),a=n(97),s=(i=a)&&i.__esModule?i:{default:i}},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=(u(n(16)),n(0)),s=n(27),r=u(n(10)),l=u(n(6)),d=n(8),c=n(4);function u(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dragged=[],n.eventManager=null,n.lastSetCell=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return(0,s.isMobileBrowser)()}},{key:"enablePlugin",value:function(){this.enabled||(this.eventManager||(this.eventManager=new l.default(this)),this.registerListeners(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"registerListeners",value:function(){var e=this;function t(t){if(1===e.dragged.length)return e.dragged.splice(0,e.dragged.length),!0;var n=e.dragged.indexOf(t);if(-1==n)return!1;0===n?e.dragged=e.dragged.slice(0,1):1==n&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(this.hot.rootElement,"touchstart",(function(t){var n=void 0;return(0,a.hasClass)(t.target,"topLeftSelectionHandle-HitArea")?(n=e.hot.getSelectedRangeLast(),e.dragged.push("topLeft"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):(0,a.hasClass)(t.target,"bottomRightSelectionHandle-HitArea")?(n=e.hot.getSelectedRangeLast(),e.dragged.push("bottomRight"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):void 0})),this.eventManager.addEventListener(this.hot.rootElement,"touchend",(function(n){return(0,a.hasClass)(n.target,"topLeftSelectionHandle-HitArea")?(t.call(e,"topLeft"),e.touchStartRange=void 0,n.preventDefault(),!1):(0,a.hasClass)(n.target,"bottomRightSelectionHandle-HitArea")?(t.call(e,"bottomRight"),e.touchStartRange=void 0,n.preventDefault(),!1):void 0})),this.eventManager.addEventListener(this.hot.rootElement,"touchmove",(function(t){var n,i=(0,a.getWindowScrollTop)(),o=(0,a.getWindowScrollLeft)(),s=void 0,r=void 0,l=void 0,d=void 0,c=void 0,u=void 0;0!==e.dragged.length&&(n=document.elementFromPoint(t.touches[0].screenX-o,t.touches[0].screenY-i))&&n!==e.lastSetCell&&("TD"!=n.nodeName&&"TH"!=n.nodeName||(-1==(s=e.hot.getCoords(n)).col&&(s.col=0),l=(r=e.hot.getSelectedRangeLast()).getWidth(),d=r.getHeight(),c=r.getDirection(),1==l&&1==d&&e.hot.selection.setRangeEnd(s),null!==(u=e.getCurrentRangeCoords(r,s,e.touchStartRange.direction,c,e.dragged[0])).start&&e.hot.selection.setRangeStart(u.start),e.hot.selection.setRangeEnd(u.end),e.lastSetCell=n),t.preventDefault())}))}},{key:"getCurrentRangeCoords",value:function(e,t,n,i,o){var a=e.getTopLeftCorner(),s=e.getBottomRightCorner(),r=e.getBottomLeftCorner(),l=e.getTopRightCorner(),d={start:null,end:null};switch(n){case"NE-SW":switch(i){case"NE-SW":case"NW-SE":d="topLeft"==o?{start:new c.CellCoords(t.row,e.highlight.col),end:new c.CellCoords(r.row,t.col)}:{start:new c.CellCoords(e.highlight.row,t.col),end:new c.CellCoords(t.row,a.col)};break;case"SE-NW":"bottomRight"==o&&(d={start:new c.CellCoords(s.row,t.col),end:new c.CellCoords(t.row,a.col)})}break;case"NW-SE":switch(i){case"NE-SW":"topLeft"==o?d={start:t,end:r}:d.end=t;break;case"NW-SE":"topLeft"==o?d={start:t,end:s}:d.end=t;break;case"SE-NW":"topLeft"==o?d={start:t,end:a}:d.end=t;break;case"SW-NE":"topLeft"==o?d={start:t,end:l}:d.end=t}break;case"SW-NE":switch(i){case"NW-SE":d="bottomRight"==o?{start:new c.CellCoords(t.row,a.col),end:new c.CellCoords(r.row,t.col)}:{start:new c.CellCoords(a.row,t.col),end:new c.CellCoords(t.row,s.col)};break;case"SW-NE":d="topLeft"==o?{start:new c.CellCoords(e.highlight.row,t.col),end:new c.CellCoords(t.row,s.col)}:{start:new c.CellCoords(t.row,a.col),end:new c.CellCoords(a.row,t.col)};break;case"SE-NW":"bottomRight"==o?d={start:new c.CellCoords(t.row,l.col),end:new c.CellCoords(a.row,t.col)}:"topLeft"==o&&(d={start:r,end:t})}break;case"SE-NW":switch(i){case"NW-SE":case"NE-SW":case"SW-NE":"topLeft"==o&&(d.end=t);break;case"SE-NW":"topLeft"==o?d.end=t:d={start:t,end:a}}}return d}},{key:"isDragged",value:function(){return this.dragged.length>0}}]),t}(r.default);(0,d.registerPlugin)("multipleSelectionHandles",h),t.default=h},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},a=d(n(10)),s=(d(n(205)),d(n(356))),r=n(1),l=n(8);function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.observer=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"isEnabled",value:function(){return this.hot.getSettings().observeChanges}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.observer||(this.observer=new s.default(this.hot.getSourceData()),this._exposePublicApi()),this.observer.addLocalHook("change",(function(t){return e.onDataChange(t)})),this.addHook("afterCreateRow",(function(){return e.onAfterTableAlter()})),this.addHook("afterRemoveRow",(function(){return e.onAfterTableAlter()})),this.addHook("afterCreateCol",(function(){return e.onAfterTableAlter()})),this.addHook("afterRemoveCol",(function(){return e.onAfterTableAlter()})),this.addHook("afterChange",(function(t,n){return e.onAfterTableAlter(n)})),this.addHook("afterLoadData",(function(t){return e.onAfterLoadData(t)})),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.observer&&(this.observer.destroy(),this.observer=null,this._deletePublicApi()),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"onDataChange",value:function(e){var t=this;if(!this.observer.isPaused()){var n=this.pluginName+".change",i={add:function(e){isNaN(e.col)?t.hot.runHooks("afterCreateRow",e.row,1,n):t.hot.runHooks("afterCreateCol",e.col,1,n)},remove:function(e){isNaN(e.col)?t.hot.runHooks("afterRemoveRow",e.row,1,n):t.hot.runHooks("afterRemoveCol",e.col,1,n)},replace:function(e){t.hot.runHooks("afterChange",[[e.row,e.col,null,e.value]],n)}};(0,r.arrayEach)(e,(function(e){i[e.op]&&i[e.op](e)})),this.hot.render()}this.hot.runHooks("afterChangesObserved")}},{key:"onAfterTableAlter",value:function(e){var t=this;"loadData"!==e&&(this.observer.pause(),this.hot.addHookOnce("afterChangesObserved",(function(){return t.observer.resume()})))}},{key:"onAfterLoadData",value:function(e){e||this.observer.setObservedData(this.hot.getSourceData())}},{key:"destroy",value:function(){this.observer&&(this.observer.destroy(),this._deletePublicApi()),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_exposePublicApi",value:function(){var e=this,t=this.hot;t.pauseObservingChanges=function(){return e.observer.pause()},t.resumeObservingChanges=function(){return e.observer.resume()},t.isPausedObservingChanges=function(){return e.observer.isPaused()}}},{key:"_deletePublicApi",value:function(){var e=this.hot;delete e.pauseObservingChanges,delete e.resumeObservingChanges,delete e.isPausedObservingChanges}}]),t}(a.default);t.default=c,(0,l.registerPlugin)("observeChanges",c)},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(205)),a=l(n(47)),s=n(2),r=n(357);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observedData=null,this.observer=null,this.paused=!1,this.setObservedData(t)}return i(e,[{key:"setObservedData",value:function(e){var t=this;this.observer&&o.default.unobserve(this.observedData,this.observer),this.observedData=e,this.observer=o.default.observe(this.observedData,(function(e){return t.onChange(e)}))}},{key:"isPaused",value:function(){return this.paused}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}},{key:"onChange",value:function(e){this.runLocalHooks("change",(0,r.cleanPatches)(e))}},{key:"destroy",value:function(){o.default.unobserve(this.observedData,this.observer),this.observedData=null,this.observer=null}}]),e}();(0,s.mixin)(d,a.default),t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.cleanPatches=function(e){var t=[];return e=(0,o.arrayFilter)(e,(function(e){return!/[/]length/gi.test(e.path)&&!!a(e.path)})),e=(0,o.arrayMap)(e,(function(e){var t=a(e.path);return e.row=t.row,e.col=t.col,e})),e=(0,o.arrayFilter)(e,(function(e){if(-1!==["add","remove"].indexOf(e.op)&&!isNaN(e.col)){if(-1!==t.indexOf(e.col))return!1;t.push(e.col)}return!0})),t.length=0,e},t.parsePath=a;var o=n(1);function a(e){var t=e.match(/^\/(\d+)\/?(.*)?$/);if(!t)return null;var n=i(t,3),o=n[1],a=n[2];return{row:parseInt(o,10),col:/^\d*$/.test(a)?parseInt(a,10):a}}},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=n(10),r=(i=s)&&i.__esModule?i:{default:i},l=n(8),d=n(2),c=n(5),u=n(11),h=function(e,t,n,i,o){e.getCellMeta(t,n).isSearchResult=o},p=function(e,t){return!((0,u.isUndefined)(e)||null===e||!e.toLowerCase||0===e.length||(0,u.isUndefined)(t)||null===t||-1===t.toString().toLowerCase().indexOf(e.toLowerCase()))},f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.callback=h,n.queryMethod=p,n.searchResultClass="htSearchResult",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"isEnabled",value:function(){return this.hot.getSettings().search}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var n=this.hot.getSettings().search;this.updatePluginSettings(n),this.addHook("beforeRenderer",(function(){return e.onBeforeRenderer.apply(e,arguments)})),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var e=this,n=function(){return e.onBeforeRenderer.apply(e,arguments)};this.hot.addHook("beforeRenderer",n),this.hot.addHookOnce("afterRender",(function(){e.hot.removeHook("beforeRenderer",n)})),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"query",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCallback(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getQueryMethod(),o=this.hot.countRows(),a=this.hot.countCols(),s=[],r=this.hot;return(0,c.rangeEach)(0,o-1,(function(o){(0,c.rangeEach)(0,a-1,(function(a){var l=t.hot.getDataAtCell(o,a),d=t.hot.getCellMeta(o,a),c=d.search.callback||n,u=(d.search.queryMethod||i)(e,l);if(u){var h={row:o,col:a,data:l};s.push(h)}c&&c(r,o,a,l,u)}))})),s}},{key:"getCallback",value:function(){return this.callback}},{key:"setCallback",value:function(e){this.callback=e}},{key:"getQueryMethod",value:function(){return this.queryMethod}},{key:"setQueryMethod",value:function(e){this.queryMethod=e}},{key:"getSearchResultClass",value:function(){return this.searchResultClass}},{key:"setSearchResultClass",value:function(e){this.searchResultClass=e}},{key:"updatePluginSettings",value:function(e){(0,d.isObject)(e)&&(e.searchResultClass&&this.setSearchResultClass(e.searchResultClass),e.queryMethod&&this.setQueryMethod(e.queryMethod),e.callback&&this.setCallback(e.callback))}},{key:"onBeforeRenderer",value:function(e,t,n,i,o,a){var s,r=a.className||[],l=[];"string"==typeof r?l=r.split(" "):(s=l).push.apply(s,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)),this.isEnabled()&&a.isSearchResult?l.includes(this.searchResultClass)||l.push(""+this.searchResultClass):l.includes(this.searchResultClass)&&l.splice(l.indexOf(this.searchResultClass),1),a.className=l.join(" ")}},{key:"destroy",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(r.default);(0,l.registerPlugin)("search",f),t.default=f},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=n(0),r=n(1),l=n(10),d=(i=l)&&i.__esModule?i:{default:i},c=n(8),u=n(41),h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollbars=[],n.clones=[],n.lockedCollection=!1,n.freezeOverlays=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"isEnabled",value:function(){return(0,u.isTouchSupported)()}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("afterRender",(function(){return e.onAfterRender()})),this.registerEvents(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.lockedCollection=!1,a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var e=this;this.addHook("beforeTouchScroll",(function(){return e.onBeforeTouchScroll()})),this.addHook("afterMomentumScroll",(function(){return e.onAfterMomentumScroll()}))}},{key:"onAfterRender",value:function(){if(!this.lockedCollection){var e=this.hot.view.wt.wtOverlays,t=e.topOverlay,n=e.bottomOverlay,i=e.leftOverlay,o=e.topLeftCornerOverlay,a=e.bottomLeftCornerOverlay;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(t),n.clone&&this.scrollbars.push(n),this.scrollbars.push(i),o&&this.scrollbars.push(o),a&&a.clone&&this.scrollbars.push(a),this.clones.length=0,t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),i.needFullRender&&this.clones.push(i.clone.wtTable.holder.parentNode),o&&this.clones.push(o.clone.wtTable.holder.parentNode),a&&a.clone&&this.clones.push(a.clone.wtTable.holder.parentNode)}}},{key:"onBeforeTouchScroll",value:function(){this.freezeOverlays=!0,(0,r.arrayEach)(this.clones,(function(e){(0,s.addClass)(e,"hide-tween")}))}},{key:"onAfterMomentumScroll",value:function(){var e=this;this.freezeOverlays=!1,(0,r.arrayEach)(this.clones,(function(e){(0,s.removeClass)(e,"hide-tween"),(0,s.addClass)(e,"show-tween")})),setTimeout((function(){(0,r.arrayEach)(e.clones,(function(e){(0,s.removeClass)(e,"show-tween")}))}),400),(0,r.arrayEach)(this.scrollbars,(function(e){e.refresh(),e.resetFixedPosition()})),this.hot.view.wt.wtOverlays.syncScrollWithMaster()}}]),t}(d.default);(0,c.registerPlugin)("touchScroll",h),t.default=h},function(e,t,n){"use strict";t.__esModule=!0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(16),s=(i=a)&&i.__esModule?i:{default:i},r=n(1),l=n(5),d=n(2),c=n(13),u=(n(4),n(19));function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e){var t=this;this.instance=e,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,e.addHook("afterChange",(function(e,n){e&&"UndoRedo.undo"!==n&&"UndoRedo.redo"!==n&&"MergeCells"!==n&&t.done(new m.ChangeAction(e))})),e.addHook("afterCreateRow",(function(e,n,i){if("UndoRedo.undo"!==i&&"UndoRedo.undo"!==i&&"auto"!==i){var o=new m.CreateRowAction(e,n);t.done(o)}})),e.addHook("beforeRemoveRow",(function(e,n,i,o){if("UndoRedo.undo"!==o&&"UndoRedo.redo"!==o&&"auto"!==o){var a=t.instance.getSourceDataArray();e=(a.length+e)%a.length;var s=(0,d.deepClone)(a.slice(e,e+n));t.done(new m.RemoveRowAction(e,s))}})),e.addHook("afterCreateCol",(function(e,n,i){"UndoRedo.undo"!==i&&"UndoRedo.redo"!==i&&"auto"!==i&&t.done(new m.CreateColumnAction(e,n))})),e.addHook("beforeRemoveCol",(function(n,i,o,a){if("UndoRedo.undo"!==a&&"UndoRedo.redo"!==a&&"auto"!==a){var s=t.instance.getSourceDataArray();n=(t.instance.countCols()+n)%t.instance.countCols();var r=[],d=[],c=[];(0,l.rangeEach)(s.length-1,(function(t){var o=[],a=s[t];(0,l.rangeEach)(n,n+(i-1),(function(t){o.push(a[e.runHooks("modifyCol",t)])})),r.push(o)})),(0,l.rangeEach)(i-1,(function(t){c.push(e.runHooks("modifyCol",n+t))})),Array.isArray(e.getSettings().colHeaders)&&(0,l.rangeEach)(i-1,(function(t){d.push(e.getSettings().colHeaders[e.runHooks("modifyCol",n+t)]||null)}));var u=t.instance.getPlugin("manualColumnMove"),h=u.isEnabled()?u.columnsMapper.__arrayMap:[],p=new m.RemoveColumnAction(n,c,r,d,h);t.done(p)}})),e.addHook("beforeCellAlignment",(function(e,n,i,o){var a=new m.CellAlignmentAction(e,n,i,o);t.done(a)})),e.addHook("beforeFilter",(function(e){t.done(new m.FiltersAction(e))})),e.addHook("beforeRowMove",(function(e,n){!1!==e&&t.done(new m.RowMoveAction(e,n))})),e.addHook("beforeMergeCells",(function(n,i){i||t.done(new m.MergeCellsAction(e,n))})),e.addHook("afterUnmergeCells",(function(n,i){i||t.done(new m.UnmergeCellsAction(e,n))}))}m.prototype.done=function(e){this.ignoreNewActions||(this.doneActions.push(e),this.undoneActions.length=0)},m.prototype.undo=function(){if(this.isUndoAvailable()){var e=this.doneActions.pop(),t=(0,d.deepClone)(e),n=this.instance;if(!1===n.runHooks("beforeUndo",t))return;this.ignoreNewActions=!0;var i=this;e.undo(this.instance,(function(){i.ignoreNewActions=!1,i.undoneActions.push(e)})),n.runHooks("afterUndo",t)}},m.prototype.redo=function(){if(this.isRedoAvailable()){var e=this.undoneActions.pop(),t=(0,d.deepClone)(e),n=this.instance;if(!1===n.runHooks("beforeRedo",t))return;this.ignoreNewActions=!0;var i=this;e.redo(this.instance,(function(){i.ignoreNewActions=!1,i.doneActions.push(e)})),n.runHooks("afterRedo",t)}},m.prototype.isUndoAvailable=function(){return this.doneActions.length>0},m.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},m.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},m.Action=function(){},m.Action.prototype.undo=function(){},m.Action.prototype.redo=function(){},m.ChangeAction=function(e){this.changes=e,this.actionType="change"},(0,d.inherit)(m.ChangeAction,m.Action),m.ChangeAction.prototype.undo=function(e,t){for(var n=(0,d.deepClone)(this.changes),i=e.countEmptyRows(!0),o=e.countEmptyCols(!0),a=0,s=n.length;a<s;a++)n[a].splice(3,1);e.addHookOnce("afterChange",t),e.setDataAtRowProp(n,null,null,"UndoRedo.undo");for(var r=0,l=n.length;r<l;r++)e.getSettings().minSpareRows&&n[r][0]+1+e.getSettings().minSpareRows===e.countRows()&&i===e.getSettings().minSpareRows&&(e.alter("remove_row",parseInt(n[r][0]+1,10),e.getSettings().minSpareRows),e.undoRedo.doneActions.pop()),e.getSettings().minSpareCols&&n[r][1]+1+e.getSettings().minSpareCols===e.countCols()&&o===e.getSettings().minSpareCols&&(e.alter("remove_col",parseInt(n[r][1]+1,10),e.getSettings().minSpareCols),e.undoRedo.doneActions.pop())},m.ChangeAction.prototype.redo=function(e,t){for(var n=(0,d.deepClone)(this.changes),i=0,o=n.length;i<o;i++)n[i].splice(2,1);e.addHookOnce("afterChange",t),e.setDataAtRowProp(n,null,null,"UndoRedo.redo")},m.CreateRowAction=function(e,t){this.index=e,this.amount=t,this.actionType="insert_row"},(0,d.inherit)(m.CreateRowAction,m.Action),m.CreateRowAction.prototype.undo=function(e,t){var n=e.countRows(),i=e.getSettings().minSpareRows;this.index>=n&&this.index-i<n&&(this.index-=i),e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},m.CreateRowAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateRow",t),e.alter("insert_row",this.index,this.amount,"UndoRedo.redo")},m.RemoveRowAction=function(e,t){this.index=e,this.data=t,this.actionType="remove_row"},(0,d.inherit)(m.RemoveRowAction,m.Action),m.RemoveRowAction.prototype.undo=function(e,t){e.alter("insert_row",this.index,this.data.length,"UndoRedo.undo"),e.addHookOnce("afterRender",t),e.populateFromArray(this.index,0,this.data,void 0,void 0,"UndoRedo.undo")},m.RemoveRowAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},m.CreateColumnAction=function(e,t){this.index=e,this.amount=t,this.actionType="insert_col"},(0,d.inherit)(m.CreateColumnAction,m.Action),m.CreateColumnAction.prototype.undo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},m.CreateColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateCol",t),e.alter("insert_col",this.index,this.amount,"UndoRedo.redo")},m.RemoveColumnAction=function(e,t,n,i,o){this.index=e,this.indexes=t,this.data=n,this.amount=this.data[0].length,this.headers=i,this.columnPositions=o.slice(0),this.actionType="remove_col"},(0,d.inherit)(m.RemoveColumnAction,m.Action),m.RemoveColumnAction.prototype.undo=function(e,t){var n,i=this,o=void 0,a=this.indexes.slice(0).sort(),s=function(e,t,n){return n[i.indexes.indexOf(a[t])]},d=[];(0,l.rangeEach)(this.data.length-1,(function(e){d[e]=(0,r.arrayMap)(i.data[e],s)})),n=(0,r.arrayMap)(this.headers,s);var c=[];e.runHooks("beforeCreateCol",this.indexes[0],this.indexes.length,"UndoRedo.undo"),(0,l.rangeEach)(this.data.length-1,(function(t){o=e.getSourceDataAtRow(t),(0,l.rangeEach)(a.length-1,(function(e){o.splice(a[e],0,d[t][e]),c.push([t,a[e],null,d[t][e]])}))})),e.getPlugin("formulas")&&e.getPlugin("formulas").onAfterSetDataAtCell(c),void 0!==this.headers&&(0,l.rangeEach)(n.length-1,(function(t){e.getSettings().colHeaders.splice(a[t],0,n[t])})),e.getPlugin("manualColumnMove")&&(e.getPlugin("manualColumnMove").columnsMapper.__arrayMap=this.columnPositions),e.addHookOnce("afterRender",t),e.runHooks("afterCreateCol",this.indexes[0],this.indexes.length,"UndoRedo.undo"),e.getPlugin("formulas")&&e.getPlugin("formulas").recalculateFull(),e.render()},m.RemoveColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},m.CellAlignmentAction=function(e,t,n,i){this.stateBefore=e,this.range=t,this.type=n,this.alignment=i},m.CellAlignmentAction.prototype.undo=function(e,t){var n=this;(0,r.arrayEach)(this.range,(function(t){for(var i=t.from,o=t.to,a=i.row;a<=o.row;a+=1)for(var s=i.col;s<=o.col;s+=1)e.setCellMeta(a,s,"className",n.stateBefore[a][s]||" htLeft")})),e.addHookOnce("afterRender",t),e.render()},m.CellAlignmentAction.prototype.redo=function(e,t){(0,u.align)(this.range,this.type,this.alignment,(function(t,n){return e.getCellMeta(t,n)}),(function(t,n,i,o){return e.setCellMeta(t,n,i,o)})),e.addHookOnce("afterRender",t),e.render()},m.FiltersAction=function(e){this.conditionsStack=e,this.actionType="filter"},(0,d.inherit)(m.FiltersAction,m.Action),m.FiltersAction.prototype.undo=function(e,t){var n=e.getPlugin("filters");e.addHookOnce("afterRender",t),n.conditionCollection.importAllConditions(this.conditionsStack.slice(0,this.conditionsStack.length-1)),n.filter()},m.FiltersAction.prototype.redo=function(e,t){var n=e.getPlugin("filters");e.addHookOnce("afterRender",t),n.conditionCollection.importAllConditions(this.conditionsStack),n.filter()};var _=function(e){function t(e,n){h(this,t);var i=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.cellRange=n,i.rangeData=e.getData(n.from.row,n.from.col,n.to.row,n.to.col),i}return f(t,e),o(t,[{key:"undo",value:function(e,t){var n=e.getPlugin("mergeCells");e.addHookOnce("afterRender",t),n.unmergeRange(this.cellRange,!0),e.populateFromArray(this.cellRange.from.row,this.cellRange.from.col,this.rangeData,void 0,void 0,"MergeCells")}},{key:"redo",value:function(e,t){var n=e.getPlugin("mergeCells");e.addHookOnce("afterRender",t),n.mergeRange(this.cellRange)}}]),t}(m.Action);m.MergeCellsAction=_;var v=function(e){function t(e,n){h(this,t);var i=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.cellRange=n,i}return f(t,e),o(t,[{key:"undo",value:function(e,t){var n=e.getPlugin("mergeCells");e.addHookOnce("afterRender",t),n.mergeRange(this.cellRange,!0)}},{key:"redo",value:function(e,t){var n=e.getPlugin("mergeCells");e.addHookOnce("afterRender",t),n.unmergeRange(this.cellRange,!0),e.render()}}]),t}(m.Action);function g(){var e=this;void 0===e.getSettings().undo||e.getSettings().undo?e.undoRedo||(e.undoRedo=new m(e),function(e){e.undo=function(){return e.undoRedo.undo()},e.redo=function(){return e.undoRedo.redo()},e.isUndoAvailable=function(){return e.undoRedo.isUndoAvailable()},e.isRedoAvailable=function(){return e.undoRedo.isRedoAvailable()},e.clearUndo=function(){return e.undoRedo.clear()}}(e),e.addHook("beforeKeyDown",y),e.addHook("afterChange",b)):e.undoRedo&&(delete e.undoRedo,function(e){delete e.undo,delete e.redo,delete e.isUndoAvailable,delete e.isRedoAvailable,delete e.clearUndo}(e),e.removeHook("beforeKeyDown",y),e.removeHook("afterChange",b))}function y(e){(e.ctrlKey||e.metaKey)&&!e.altKey&&(89===e.keyCode||e.shiftKey&&90===e.keyCode?(this.undoRedo.redo(),(0,c.stopImmediatePropagation)(e)):90===e.keyCode&&(this.undoRedo.undo(),(0,c.stopImmediatePropagation)(e)))}function b(e,t){if("loadData"===t)return this.undoRedo.clear()}m.UnmergeCellsAction=v,m.RowMoveAction=function(e,t){this.rows=e.slice(),this.target=t},(0,d.inherit)(m.RowMoveAction,m.Action),m.RowMoveAction.prototype.undo=function(e,t){var n=e.getPlugin("manualRowMove");e.addHookOnce("afterRender",t);for(var i=this.rows[0]<this.target?-1*this.rows.length:0,o=this.rows[0]>this.target?this.rows[0]+this.rows.length:this.rows[0],a=[],s=this.rows.length+i,r=i;r<s;r+=1)a.push(this.target+r);n.moveRows(a.slice(),o),e.render(),e.selectCell(this.rows[0],0,this.rows[this.rows.length-1],e.countCols()-1,!1,!1)},m.RowMoveAction.prototype.redo=function(e,t){var n=e.getPlugin("manualRowMove");e.addHookOnce("afterRender",t),n.moveRows(this.rows.slice(),this.target),e.render();var i=this.rows[0]<this.target?this.target-this.rows.length:this.target;e.selectCell(i,0,i+this.rows.length-1,e.countCols()-1,!1,!1)};var w=s.default.getSingleton();w.add("afterInit",g),w.add("afterUpdateSettings",g),w.register("beforeUndo"),w.register("afterUndo"),w.register("beforeRedo"),w.register("afterRedo"),t.default=m}]).default},e.exports=i(n(30381),n(94316),n(84319))},44809:(e,t,n)=>{"use strict";n.r(t);var i,o=n(20615);(i=n.n(o)()).fn.farbtastic=function(e){return i.farbtastic(this,e),this},i.farbtastic=function(e,t){return(e=i(e)[0]).farbtastic||(e.farbtastic=new i._farbtastic(e,t))},i._farbtastic=function(e,t){var n=this;n.linkTo=function(e){return"object"==typeof n.callback&&i(n.callback).unbind("keyup",n.updateValue),n.color=null,"function"==typeof e?n.callback=e:"object"!=typeof e&&"string"!=typeof e||(n.callback=i(e),n.callback.bind("keyup",n.updateValue),n.callback[0].value&&n.setColor(n.callback[0].value)),this},n.updateValue=function(e){this.value&&this.value!=n.color&&n.setColor(this.value)},n.setColor=function(e){var t=n.unpack(e);return n.color!=e&&t&&(n.color=e,n.rgb=t,n.hsl=n.RGBToHSL(n.rgb),n.updateDisplay()),this},n.setHSL=function(e){return n.hsl=e,n.rgb=n.HSLToRGB(e),n.color=n.pack(n.rgb),n.updateDisplay(),this},n.initWidget=function(){var o={width:t.width,height:t.width};i(e).html('<div class="farbtastic" style="position: relative"><div class="farbtastic-solid"></div><canvas class="farbtastic-mask"></canvas><canvas class="farbtastic-overlay"></canvas></div>').find("*").attr(o).css(o).end().find("div>*").css("position","absolute"),i.browser.msie,n.radius=(t.width-t.wheelWidth)/2-1,n.square=Math.floor(.7*(n.radius-t.wheelWidth/2))-1,n.mid=Math.floor(t.width/2),n.markerSize=.3*t.wheelWidth,n.solidFill=i(".farbtastic-solid",e).css({width:2*n.square-1,height:2*n.square-1,left:n.mid-n.square,top:n.mid-n.square}),n.cnvMask=i(".farbtastic-mask",e),n.ctxMask=n.cnvMask[0].getContext("2d"),n.cnvOverlay=i(".farbtastic-overlay",e),n.ctxOverlay=n.cnvOverlay[0].getContext("2d"),n.ctxMask.translate(n.mid,n.mid),n.ctxOverlay.translate(n.mid,n.mid),n.drawCircle(),n.drawMask()},n.drawCircle=function(){new Date;var e,o,a=n.radius,s=t.wheelWidth,r=8/a/24*Math.PI,l=n.ctxMask,d=0;l.save(),l.lineWidth=s/a,l.scale(a,a);for(var c=0;c<=24;++c){var u=c/24,h=u*Math.PI*2,p=Math.sin(d),f=-Math.cos(d);if(x2=Math.sin(h),y2=-Math.cos(h),am=(d+h)/2,tan=1/Math.cos((h-d)/2),xm=Math.sin(am)*tan,ym=-Math.cos(am)*tan,color2=n.pack(n.HSLToRGB([u,1,.5])),c>0)if(i.browser.msie){var m=(1+Math.min(Math.abs(Math.tan(d)),Math.abs(Math.tan(Math.PI/2-d))))/24;e=n.pack(n.HSLToRGB([o-.15*m,1,.5])),color2=n.pack(n.HSLToRGB([u+.15*m,1,.5])),(g=l.createLinearGradient(p,f,x2,y2)).addColorStop(0,e),g.addColorStop(1,color2),l.fillStyle=g;var _=(a+s/2)/a,v=(a-s/2)/a;l.beginPath(),l.moveTo(p*_,f*_),l.quadraticCurveTo(xm*_,ym*_,x2*_,y2*_),l.lineTo(x2*v,y2*v),l.quadraticCurveTo(xm*v,ym*v,p*v,f*v),l.fill()}else{var g;(g=l.createLinearGradient(p,f,x2,y2)).addColorStop(0,e),g.addColorStop(1,color2),l.strokeStyle=g,l.beginPath(),l.moveTo(p,f),l.quadraticCurveTo(xm,ym,x2,y2),l.stroke()}d=h-r,e=color2,o=u}l.restore()},n.drawMask=function(){new Date;var e=2*n.square,t=n.square;function o(e,t,n){for(var i=1/e,o=1/t,a=0;a<=t;++a)for(var s=1-a*o,r=0;r<=e;++r){var l=1-r*i,d=1-2*Math.min(s*l,(1-s)*l);n(r,a,d>0?.5*(2*s-1+d)/d:0,d)}}if(n.ctxMask.getImageData){var a=Math.floor(e/2),s=document.createElement("canvas");s.width=s.height=a+1;var r=s.getContext("2d"),l=r.getImageData(0,0,a+1,a+1),d=0;o(a,a,(function(e,t,n,i){l.data[d++]=l.data[d++]=l.data[d++]=255*n,l.data[d++]=255*i})),r.putImageData(l,0,0),n.ctxMask.drawImage(s,0,0,a+1,a+1,-t,-t,2*t,2*t)}else if(i.browser.msie){var c,u,h=Math.floor(e/6);o(h,6,(function(e,o,a,s){if(0==e&&(c=u,u=[]),a=Math.round(255*a),s=Math.round(255*s),o>0){var r=c[e][0],l=c[e][1],d=n.packDX(r,l),p=n.packDX(a,s),f=Math.round(n.mid+(.333*(o-1)-1)*t),m=Math.round(n.mid+(.333*o-1)*t);i("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(StartColorStr="+d+", EndColorStr="+p+", GradientType=0)",top:f,height:m-f,left:n.mid+(6*e-t-1),width:6-(e==h?Math.round(3):0)}).appendTo(n.cnvMask)}u.push([a,s])}))}else o(a=Math.floor(e/2),a,(function(e,i,o,a){o=Math.round(255*o),n.ctxMask.fillStyle="rgba("+o+", "+o+", "+o+", "+a+")",n.ctxMask.fillRect(2*e-t-1,2*i-t-1,2,2)}))},n.drawMarkers=function(){var e=t.width,i=Math.ceil(n.markerSize/4),o=n.markerSize-i+1,a=6.28*n.hsl[0],s=Math.sin(a)*n.radius,r=-Math.cos(a)*n.radius,l=2*n.square*(.5-n.hsl[1]),d=2*n.square*(.5-n.hsl[2]),c=n.invert?"#fff":"#000",u=n.invert?"#000":"#fff",h=[{x:s,y:r,r:o,c:"#000",lw:i+1},{x:s,y:r,r:n.markerSize,c:"#fff",lw:i},{x:l,y:d,r:o,c:u,lw:i+1},{x:l,y:d,r:n.markerSize,c,lw:i}];n.ctxOverlay.clearRect(-n.mid,-n.mid,e,e);for(var p=0;p<h.length;p++){var f=h[p];n.ctxOverlay.lineWidth=f.lw,n.ctxOverlay.strokeStyle=f.c,n.ctxOverlay.beginPath(),n.ctxOverlay.arc(f.x,f.y,f.r,0,2*Math.PI,!0),n.ctxOverlay.stroke()}},n.updateDisplay=function(){n.invert=.3*n.rgb[0]+.59*n.rgb[1]+.11*n.rgb[2]<=.6,n.solidFill.css("backgroundColor",n.pack(n.HSLToRGB([n.hsl[0],1,.5]))),n.drawMarkers(),"object"==typeof n.callback?(i(n.callback).css({backgroundColor:n.color,color:n.invert?"#fff":"#000"}),i(n.callback).each((function(){"string"==typeof this.value&&this.value!=n.color&&(this.value=n.color)})).change()):"function"==typeof n.callback&&n.callback.call(n,n.color)},n.widgetCoords=function(e){return{x:e.pageX-n.offset.left-n.mid,y:e.pageY-n.offset.top-n.mid}},n.mousedown=function(t){i._farbtastic.dragging||(i(document).bind("mousemove",n.mousemove).bind("mouseup",n.mouseup),i._farbtastic.dragging=!0),n.offset=i(e).offset();var o=n.widgetCoords(t);return n.circleDrag=Math.max(Math.abs(o.x),Math.abs(o.y))>n.square+2,n.mousemove(t),!1},n.mousemove=function(e){var t=n.widgetCoords(e);if(n.circleDrag){var i=Math.atan2(t.x,-t.y)/6.28;n.setHSL([(i+1)%1,n.hsl[1],n.hsl[2]])}else{var o=Math.max(0,Math.min(1,-t.x/n.square/2+.5)),a=Math.max(0,Math.min(1,-t.y/n.square/2+.5));n.setHSL([n.hsl[0],o,a])}return!1},n.mouseup=function(){i(document).unbind("mousemove",n.mousemove),i(document).unbind("mouseup",n.mouseup),i._farbtastic.dragging=!1},n.dec2hex=function(e){return(e<16?"0":"")+e.toString(16)},n.packDX=function(e,t){return"#"+n.dec2hex(t)+n.dec2hex(e)+n.dec2hex(e)+n.dec2hex(e)},n.pack=function(e){var t=Math.round(255*e[0]),i=Math.round(255*e[1]),o=Math.round(255*e[2]);return"#"+n.dec2hex(t)+n.dec2hex(i)+n.dec2hex(o)},n.unpack=function(e){if(7==e.length){function t(t){return parseInt(e.substring(t,t+2),16)/255}return[t(1),t(3),t(5)]}if(4==e.length){function n(t){return parseInt(e.substring(t,t+1),16)/15}return[n(1),n(2),n(3)]}},n.HSLToRGB=function(e){var t,n,i=e[0],o=e[1],a=e[2];return t=2*a-(n=a<=.5?a*(o+1):a+o-a*o),[this.hueToRGB(t,n,i+.33333),this.hueToRGB(t,n,i),this.hueToRGB(t,n,i-.33333)]},n.hueToRGB=function(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(.66666-n)*6:e},n.RGBToHSL=function(e){var t=e[0],n=e[1],i=e[2],o=Math.min(t,n,i),a=Math.max(t,n,i),s=a-o,r=0,l=0,d=(o+a)/2;return d>0&&d<1&&(l=s/(d<.5?2*d:2-2*d)),s>0&&(a==t&&a!=n&&(r+=(n-i)/s),a==n&&a!=i&&(r+=2+(i-t)/s),a==i&&a!=t&&(r+=4+(t-n)/s),r/=6),[r,l,d]},t.callback||(t={callback:t}),t=i.extend({width:300,wheelWidth:(t.width||300)/10,callback:null},t),n.initWidget(),i("canvas.farbtastic-overlay",e).mousedown(n.mousedown),t.callback&&n.linkTo(t.callback),n.color||n.setColor("#808080")}},10340:(e,t,n)=>{"use strict";n.r(t);var i=n(20615),o=n.n(i);!function(e,t,i){var a;a=function(n){var o,a,s,r,l,d,c,u,h,p,f,m,_,v,g,y,b,w,k,C,x,S,M,T,L,D,E,O,A,I={},P=0;o=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:i,normalRangeMax:i,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:i,chartRangeMax:i,chartRangeMinX:i,chartRangeMaxX:i,tooltipFormat:new s('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:i,nullColor:i,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,colorMap:i,tooltipFormat:new s('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new s('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:i,thresholdValue:0,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,tooltipFormat:new s("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:i,tooltipFormat:new s("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new s('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:i,targetColor:"#4a2",chartRangeMax:i,chartRangeMin:i,tooltipFormat:new s("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},a=function(){var e,t;return e=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(e.prototype=n.extend(new arguments[0],arguments[arguments.length-1]),e._super=arguments[0].prototype):e.prototype=arguments[arguments.length-1],arguments.length>2&&((t=Array.prototype.slice.call(arguments,1,-1)).unshift(e.prototype),n.extend.apply(n,t))):e.prototype=arguments[0],e.prototype.cls=e,e},n.SPFormatClass=s=a({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(e,t){this.format=e,this.fclass=t},render:function(e,t,n){var o,a,s,r,l,d=this,c=e;return this.format.replace(this.fre,(function(){return a=arguments[1],s=arguments[3],(o=d.precre.exec(a))?(l=o[2],a=o[1]):l=!1,(r=c[a])===i?"":s&&t&&t[s]?t[s].get?t[s].get(r)||r:t[s][r]||r:(h(r)&&(r=n.get("numberFormatter")?n.get("numberFormatter")(r):_(r,l,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),r)}))}}),n.spformat=function(e,t){return new s(e,t)},r=function(e,t,n){return e<t?t:e>n?n:e},l=function(e,n){var i;return 2===n?(i=t.floor(e.length/2),e.length%2?e[i]:(e[i-1]+e[i])/2):e.length%2?(i=(e.length*n+n)/4)%1?(e[t.floor(i)]+e[t.floor(i)-1])/2:e[i-1]:(i=(e.length*n+2)/4)%1?(e[t.floor(i)]+e[t.floor(i)-1])/2:e[i-1]},d=function(e){var t;switch(e){case"undefined":e=i;break;case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:e==(t=parseFloat(e))&&(e=t)}return e},c=function(e){var t,n=[];for(t=e.length;t--;)n[t]=d(e[t]);return n},u=function(e,t){var n,i,o=[];for(n=0,i=e.length;n<i;n++)e[n]!==t&&o.push(e[n]);return o},h=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},_=function(e,t,i,o,a){var s,r;for(e=(!1===t?parseFloat(e).toString():e.toFixed(t)).split(""),(s=(s=n.inArray(".",e))<0?e.length:s)<e.length&&(e[s]=a),r=s-i;r>0;r-=i)e.splice(r,0,o);return e.join("")},p=function(e,t,n){var i;for(i=t.length;i--;)if((!n||null!==t[i])&&t[i]!==e)return!1;return!0},m=function(e){return n.isArray(e)?e:[e]},f=function(t){var n;e.createStyleSheet?e.createStyleSheet().cssText=t:((n=e.createElement("style")).type="text/css",e.getElementsByTagName("head")[0].appendChild(n),n["string"==typeof e.body.style.WebkitAppearance?"innerText":"innerHTML"]=t)},n.fn.simpledraw=function(t,o,a,s){var r,l;if(a&&(r=this.data("_jqs_vcanvas")))return r;if(!1===n.fn.sparkline.canvas)return!1;if(n.fn.sparkline.canvas===i){var d=e.createElement("canvas");if(d.getContext&&d.getContext("2d"))n.fn.sparkline.canvas=function(e,t,n,i){return new E(e,t,n,i)};else{if(!e.namespaces||e.namespaces.v)return n.fn.sparkline.canvas=!1,!1;e.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),n.fn.sparkline.canvas=function(e,t,n,i){return new O(e,t,n)}}}return t===i&&(t=n(this).innerWidth()),o===i&&(o=n(this).innerHeight()),r=n.fn.sparkline.canvas(t,o,this,s),(l=n(this).data("_jqs_mhandler"))&&l.registerCanvas(r),r},n.fn.cleardraw=function(){var e=this.data("_jqs_vcanvas");e&&e.reset()},n.RangeMapClass=v=a({init:function(e){var t,n,i=[];for(t in e)e.hasOwnProperty(t)&&"string"==typeof t&&t.indexOf(":")>-1&&((n=t.split(":"))[0]=0===n[0].length?-1/0:parseFloat(n[0]),n[1]=0===n[1].length?1/0:parseFloat(n[1]),n[2]=e[t],i.push(n));this.map=e,this.rangelist=i||!1},get:function(e){var t,n,o,a=this.rangelist;if((o=this.map[e])!==i)return o;if(a)for(t=a.length;t--;)if((n=a[t])[0]<=e&&n[1]>=e)return n[2];return i}}),n.range_map=function(e){return new v(e)},g=a({init:function(e,t){var i=n(e);this.$el=i,this.options=t,this.currentPageX=0,this.currentPageY=0,this.el=e,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!t.get("disableTooltips"),this.highlightEnabled=!t.get("disableHighlight")},registerSparkline:function(e){this.splist.push(e),this.over&&this.updateDisplay()},registerCanvas:function(e){var t=n(e.canvas);this.canvas=e,this.$canvas=t,t.mouseenter(n.proxy(this.mouseenter,this)),t.mouseleave(n.proxy(this.mouseleave,this)),t.click(n.proxy(this.mouseclick,this))},reset:function(e){this.splist=[],this.tooltip&&e&&(this.tooltip.remove(),this.tooltip=i)},mouseclick:function(e){var t=n.Event("sparklineClick");t.originalEvent=e,t.sparklines=this.splist,this.$el.trigger(t)},mouseenter:function(t){n(e.body).unbind("mousemove.jqs"),n(e.body).bind("mousemove.jqs",n.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new y(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){n(e.body).unbind("mousemove.jqs");var t,i=this.splist,o=i.length,a=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),t=0;t<o;t++)i[t].clearRegionHighlight()&&(a=!0);a&&this.canvas.render()},mousemove:function(e){this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,this.tooltip&&this.tooltip.updatePosition(e.pageX,e.pageY),this.updateDisplay()},updateDisplay:function(){var e,t,i,o,a=this.splist,s=a.length,r=!1,l=this.$canvas.offset(),d=this.currentPageX-l.left,c=this.currentPageY-l.top;if(this.over){for(t=0;t<s;t++)(i=a[t].setRegionHighlight(this.currentEl,d,c))&&(r=!0);if(r){if((o=n.Event("sparklineRegionChange")).sparklines=this.splist,this.$el.trigger(o),this.tooltip){for(e="",t=0;t<s;t++)e+=a[t].getCurrentRegionTooltip();this.tooltip.setContent(e)}this.disableHighlight||this.canvas.render()}null===i&&this.mouseleave()}}}),y=a({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var i,o=t.get("tooltipClassname","jqstooltip"),a=this.sizeStyle;this.container=t.get("tooltipContainer")||e.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),n("#jqssizetip").remove(),n("#jqstooltip").remove(),this.sizetip=n("<div/>",{id:"jqssizetip",style:a,class:o}),this.tooltip=n("<div/>",{id:"jqstooltip",class:o}).appendTo(this.container),i=this.tooltip.offset(),this.offsetLeft=i.left,this.offsetTop=i.top,this.hidden=!0,n(window).unbind("resize.jqs scroll.jqs"),n(window).bind("resize.jqs scroll.jqs",n.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=n(window).scrollTop(),this.scrollLeft=n(window).scrollLeft(),this.scrollRight=this.scrollLeft+n(window).width(),this.updatePosition()},getSize:function(e){this.sizetip.html(e).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(e){if(!e)return this.tooltip.css("visibility","hidden"),void(this.hidden=!0);this.getSize(e),this.tooltip.html(e).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(e,t){if(e===i){if(this.mousex===i)return;e=this.mousex-this.offsetLeft,t=this.mousey-this.offsetTop}else this.mousex=e-=this.offsetLeft,this.mousey=t-=this.offsetTop;this.height&&this.width&&!this.hidden&&(t-=this.height+this.tooltipOffsetY,e+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),e<this.scrollLeft?e=this.scrollLeft:e+this.width>this.scrollRight&&(e=this.scrollRight-this.width),this.tooltip.css({left:e,top:t}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=i,n(window).unbind("resize.jqs scroll.jqs")}}),n((function(){f('.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}')})),A=[],n.fn.sparkline=function(t,o){return this.each((function(){var a,s,r=new n.fn.sparkline.options(this,o),l=n(this);if(a=function(){var o,a,s,d,c,u,h;"html"===t||t===i?((h=this.getAttribute(r.get("tagValuesAttribute")))!==i&&null!==h||(h=l.html()),o=h.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):o=t,a="auto"===r.get("width")?o.length*r.get("defaultPixelsPerValue"):r.get("width"),"auto"===r.get("height")?r.get("composite")&&n.data(this,"_jqs_vcanvas")||((d=e.createElement("span")).innerHTML="a",l.html(d),s=n(d).innerHeight()||n(d).height(),n(d).remove(),d=null):s=r.get("height"),r.get("disableInteraction")?c=!1:(c=n.data(this,"_jqs_mhandler"))?r.get("composite")||c.reset():(c=new g(this,r),n.data(this,"_jqs_mhandler",c)),!r.get("composite")||n.data(this,"_jqs_vcanvas")?((u=new(n.fn.sparkline[r.get("type")])(this,o,r,a,s)).render(),c&&c.registerSparkline(u)):n.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),n.data(this,"_jqs_errnotify",!0))},n(this).html()&&!r.get("disableHiddenCheck")&&n(this).is(":hidden")||!n(this).parents("body").length){if(!r.get("composite")&&n.data(this,"_jqs_pending"))for(s=A.length;s;s--)A[s-1][0]==this&&A.splice(s-1,1);A.push([this,a]),n.data(this,"_jqs_pending",!0)}else a.call(this)}))},n.fn.sparkline.defaults=o(),n.sparkline_display_visible=function(){var e,t,i,o=[];for(t=0,i=A.length;t<i;t++)e=A[t][0],n(e).is(":visible")&&!n(e).parents().is(":hidden")?(A[t][1].call(e),n.data(A[t][0],"_jqs_pending",!1),o.push(t)):n(e).closest("html").length||n.data(e,"_jqs_pending")||(n.data(A[t][0],"_jqs_pending",!1),o.push(t));for(t=o.length;t;t--)A.splice(o[t-1],1)},n.fn.sparkline.options=a({init:function(e,t){var i,o,a,s;this.userOptions=t=t||{},this.tag=e,this.tagValCache={},a=(o=n.fn.sparkline.defaults).common,this.tagOptionsPrefix=t.enableTagOptions&&(t.tagOptionsPrefix||a.tagOptionsPrefix),i=(s=this.getTagSetting("type"))===I?o[t.type||a.type]:o[s],this.mergedOptions=n.extend({},a,i,t)},getTagSetting:function(e){var t,n,o,a,s=this.tagOptionsPrefix;if(!1===s||s===i)return I;if(this.tagValCache.hasOwnProperty(e))t=this.tagValCache.key;else{if((t=this.tag.getAttribute(s+e))===i||null===t)t=I;else if("["===t.substr(0,1))for(n=(t=t.substr(1,t.length-2).split(",")).length;n--;)t[n]=d(t[n].replace(/(^\s*)|(\s*$)/g,""));else if("{"===t.substr(0,1))for(o=t.substr(1,t.length-2).split(","),t={},n=o.length;n--;)t[(a=o[n].split(":",2))[0].replace(/(^\s*)|(\s*$)/g,"")]=d(a[1].replace(/(^\s*)|(\s*$)/g,""));else t=d(t);this.tagValCache.key=t}return t},get:function(e,t){var n,o=this.getTagSetting(e);return o!==I?o:(n=this.mergedOptions[e])===i?t:n}}),n.fn.sparkline._base=a({disabled:!1,init:function(e,t,o,a,s){this.el=e,this.$el=n(e),this.values=t,this.options=o,this.width=a,this.height=s,this.currentRegion=i},initTarget:function(){var e=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),e))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(e,t){},setRegionHighlight:function(e,t,n){var o,a=this.currentRegion,s=!this.options.get("disableHighlight");return t>this.canvasWidth||n>this.canvasHeight||t<0||n<0?null:a!==(o=this.getRegion(e,t,n))&&(a!==i&&s&&this.removeHighlight(),this.currentRegion=o,o!==i&&s&&this.renderHighlight(),!0)},clearRegionHighlight:function(){return this.currentRegion!==i&&(this.removeHighlight(),this.currentRegion=i,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(e){},getCurrentRegionTooltip:function(){var e,t,o,a,r,l,d,c,u,h,p,f,m,_,v=this.options,g="",y=[];if(this.currentRegion===i)return"";if(e=this.getCurrentRegionFields(),p=v.get("tooltipFormatter"))return p(this,v,e);if(v.get("tooltipChartTitle")&&(g+='<div class="jqs jqstitle">'+v.get("tooltipChartTitle")+"</div>\n"),!(t=this.options.get("tooltipFormat")))return"";if(n.isArray(t)||(t=[t]),n.isArray(e)||(e=[e]),d=this.options.get("tooltipFormatFieldlist"),c=this.options.get("tooltipFormatFieldlistKey"),d&&c){for(u=[],l=e.length;l--;)h=e[l][c],-1!=(_=n.inArray(h,d))&&(u[_]=e[l]);e=u}for(o=t.length,m=e.length,l=0;l<o;l++)for("string"==typeof(f=t[l])&&(f=new s(f)),a=f.fclass||"jqsfield",_=0;_<m;_++)e[_].isNull&&v.get("tooltipSkipNull")||(n.extend(e[_],{prefix:v.get("tooltipPrefix"),suffix:v.get("tooltipSuffix")}),r=f.render(e[_],v.get("tooltipValueLookups"),v),y.push('<div class="'+a+'">'+r+"</div>"));return y.length?g+y.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(e,n){var i,o,a,s,l=n.get("highlightColor"),d=n.get("highlightLighten");if(l)return l;if(d&&(i=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e))){for(a=[],o=4===e.length?16:1,s=0;s<3;s++)a[s]=r(t.round(parseInt(i[s+1],16)*o*d),0,255);return"rgb("+a.join(",")+")"}return e}}),b={changeHighlight:function(e){var t,i=this.currentRegion,o=this.target,a=this.regionShapes[i];a&&(t=this.renderRegion(i,e),n.isArray(t)||n.isArray(a)?(o.replaceWithShapes(a,t),this.regionShapes[i]=n.map(t,(function(e){return e.id}))):(o.replaceWithShape(a,t),this.regionShapes[i]=t.id))},render:function(){var e,t,i,o,a=this.values,s=this.target,r=this.regionShapes;if(this.cls._super.render.call(this)){for(i=a.length;i--;)if(e=this.renderRegion(i))if(n.isArray(e)){for(t=[],o=e.length;o--;)e[o].append(),t.push(e[o].id);r[i]=t}else e.append(),r[i]=e.id;else r[i]=null;s.render()}}},n.fn.sparkline.line=w=a(n.fn.sparkline._base,{type:"line",init:function(e,t,n,i,o){w._super.init.call(this,e,t,n,i,o),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(e,t,n){var o,a=this.regionMap;for(o=a.length;o--;)if(null!==a[o]&&t>=a[o][0]&&t<=a[o][1])return a[o][2];return i},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:null===this.yvalues[e],x:this.xvalues[e],y:this.yvalues[e],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:e}},renderHighlight:function(){var e,t,n=this.currentRegion,o=this.target,a=this.vertices[n],s=this.options,r=s.get("spotRadius"),l=s.get("highlightSpotColor"),d=s.get("highlightLineColor");a&&(r&&l&&(e=o.drawCircle(a[0],a[1],r,i,l),this.highlightSpotId=e.id,o.insertAfterShape(this.lastShapeId,e)),d&&(t=o.drawLine(a[0],this.canvasTop,a[0],this.canvasTop+this.canvasHeight,d),this.highlightLineId=t.id,o.insertAfterShape(this.lastShapeId,t)))},removeHighlight:function(){var e=this.target;this.highlightSpotId&&(e.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(e.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var e,n,i,o,a,s=this.values,r=s.length,l=this.xvalues,d=this.yvalues,c=this.yminmax;for(e=0;e<r;e++)n=s[e],i="string"==typeof s[e],o="object"==typeof s[e]&&s[e]instanceof Array,a=i&&s[e].split(":"),i&&2===a.length?(l.push(Number(a[0])),d.push(Number(a[1])),c.push(Number(a[1]))):o?(l.push(n[0]),d.push(n[1]),c.push(n[1])):(l.push(e),null===s[e]||"null"===s[e]?d.push(null):(d.push(Number(n)),c.push(Number(n))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=t.max.apply(t,c),this.miny=this.minyorg=t.min.apply(t,c),this.maxx=t.max.apply(t,l),this.minx=t.min.apply(t,l),this.xvalues=l,this.yvalues=d,this.yminmax=c},processRangeOptions:function(){var e=this.options,t=e.get("normalRangeMin"),n=e.get("normalRangeMax");t!==i&&(t<this.miny&&(this.miny=t),n>this.maxy&&(this.maxy=n)),e.get("chartRangeMin")!==i&&(e.get("chartRangeClip")||e.get("chartRangeMin")<this.miny)&&(this.miny=e.get("chartRangeMin")),e.get("chartRangeMax")!==i&&(e.get("chartRangeClip")||e.get("chartRangeMax")>this.maxy)&&(this.maxy=e.get("chartRangeMax")),e.get("chartRangeMinX")!==i&&(e.get("chartRangeClipX")||e.get("chartRangeMinX")<this.minx)&&(this.minx=e.get("chartRangeMinX")),e.get("chartRangeMaxX")!==i&&(e.get("chartRangeClipX")||e.get("chartRangeMaxX")>this.maxx)&&(this.maxx=e.get("chartRangeMaxX"))},drawNormalRange:function(e,n,o,a,s){var r=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),d=n+t.round(o-o*((l-this.miny)/s)),c=t.round(o*(l-r)/s);this.target.drawRect(e,d,a,c,i,this.options.get("normalRangeColor")).append()},render:function(){var e,o,a,s,r,l,d,c,u,h,p,f,m,_,g,y,b,k,C,x,S,M,T,L,D=this.options,E=this.target,O=this.canvasWidth,A=this.canvasHeight,I=this.vertices,P=D.get("spotRadius"),R=this.regionMap;if(w._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),M=this.xvalues,T=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(s=r=0,e=this.maxx-this.minx==0?1:this.maxx-this.minx,o=this.maxy-this.miny==0?1:this.maxy-this.miny,a=this.yvalues.length-1,P&&(O<4*P||A<4*P)&&(P=0),P&&(((x=D.get("highlightSpotColor")&&!D.get("disableInteraction"))||D.get("minSpotColor")||D.get("spotColor")&&T[a]===this.miny)&&(A-=t.ceil(P)),(x||D.get("maxSpotColor")||D.get("spotColor")&&T[a]===this.maxy)&&(A-=t.ceil(P),s+=t.ceil(P)),(x||(D.get("minSpotColor")||D.get("maxSpotColor"))&&(T[0]===this.miny||T[0]===this.maxy))&&(r+=t.ceil(P),O-=t.ceil(P)),(x||D.get("spotColor")||D.get("minSpotColor")||D.get("maxSpotColor")&&(T[a]===this.miny||T[a]===this.maxy))&&(O-=t.ceil(P))),A--,D.get("normalRangeMin")===i||D.get("drawNormalOnTop")||this.drawNormalRange(r,s,A,O,o),c=[d=[]],m=_=null,g=T.length,L=0;L<g;L++)u=M[L],p=M[L+1],h=T[L],_=(f=r+t.round((u-this.minx)*(O/e)))+((L<g-1?r+t.round((p-this.minx)*(O/e)):O)-f)/2,R[L]=[m||0,_,L],m=_,null===h?L&&(null!==T[L-1]&&(d=[],c.push(d)),I.push(null)):(h<this.miny&&(h=this.miny),h>this.maxy&&(h=this.maxy),d.length||d.push([f,s+A]),l=[f,s+t.round(A-A*((h-this.miny)/o))],d.push(l),I.push(l));for(y=[],b=[],k=c.length,L=0;L<k;L++)(d=c[L]).length&&(D.get("fillColor")&&(d.push([d[d.length-1][0],s+A]),b.push(d.slice(0)),d.pop()),d.length>2&&(d[0]=[d[0][0],d[1][1]]),y.push(d));for(k=b.length,L=0;L<k;L++)E.drawShape(b[L],D.get("fillColor"),D.get("fillColor")).append();for(D.get("normalRangeMin")!==i&&D.get("drawNormalOnTop")&&this.drawNormalRange(r,s,A,O,o),k=y.length,L=0;L<k;L++)E.drawShape(y[L],D.get("lineColor"),i,D.get("lineWidth")).append();if(P&&D.get("valueSpots"))for((C=D.get("valueSpots")).get===i&&(C=new v(C)),L=0;L<g;L++)(S=C.get(T[L]))&&E.drawCircle(r+t.round((M[L]-this.minx)*(O/e)),s+t.round(A-A*((T[L]-this.miny)/o)),P,i,S).append();P&&D.get("spotColor")&&null!==T[a]&&E.drawCircle(r+t.round((M[M.length-1]-this.minx)*(O/e)),s+t.round(A-A*((T[a]-this.miny)/o)),P,i,D.get("spotColor")).append(),this.maxy!==this.minyorg&&(P&&D.get("minSpotColor")&&(u=M[n.inArray(this.minyorg,T)],E.drawCircle(r+t.round((u-this.minx)*(O/e)),s+t.round(A-A*((this.minyorg-this.miny)/o)),P,i,D.get("minSpotColor")).append()),P&&D.get("maxSpotColor")&&(u=M[n.inArray(this.maxyorg,T)],E.drawCircle(r+t.round((u-this.minx)*(O/e)),s+t.round(A-A*((this.maxyorg-this.miny)/o)),P,i,D.get("maxSpotColor")).append())),this.lastShapeId=E.getLastShapeId(),this.canvasTop=s,E.render()}}}),n.fn.sparkline.bar=k=a(n.fn.sparkline._base,b,{type:"bar",init:function(e,o,a,s,l){var h,p,f,m,_,g,y,b,w,C,x,S,M,T,L,D,E,O,A,I,P,R=parseInt(a.get("barWidth"),10),j=parseInt(a.get("barSpacing"),10),Y=a.get("chartRangeMin"),H=a.get("chartRangeMax"),N=a.get("chartRangeClip"),F=1/0,B=-1/0;for(k._super.init.call(this,e,o,a,s,l),g=0,y=o.length;g<y;g++)((h="string"==typeof(I=o[g])&&I.indexOf(":")>-1)||n.isArray(I))&&(L=!0,h&&(I=o[g]=c(I.split(":"))),I=u(I,null),(p=t.min.apply(t,I))<F&&(F=p),(f=t.max.apply(t,I))>B&&(B=f));this.stacked=L,this.regionShapes={},this.barWidth=R,this.barSpacing=j,this.totalBarWidth=R+j,this.width=s=o.length*R+(o.length-1)*j,this.initTarget(),N&&(M=Y===i?-1/0:Y,T=H===i?1/0:H),_=[],m=L?[]:_;var $=[],z=[];for(g=0,y=o.length;g<y;g++)if(L)for(D=o[g],o[g]=A=[],$[g]=0,m[g]=z[g]=0,E=0,O=D.length;E<O;E++)null!==(I=A[E]=N?r(D[E],M,T):D[E])&&(I>0&&($[g]+=I),F<0&&B>0?I<0?z[g]+=t.abs(I):m[g]+=I:m[g]+=t.abs(I-(I<0?B:F)),_.push(I));else I=N?r(o[g],M,T):o[g],null!==(I=o[g]=d(I))&&_.push(I);this.max=S=t.max.apply(t,_),this.min=x=t.min.apply(t,_),this.stackMax=B=L?t.max.apply(t,$):S,this.stackMin=F=L?t.min.apply(t,_):x,a.get("chartRangeMin")!==i&&(a.get("chartRangeClip")||a.get("chartRangeMin")<x)&&(x=a.get("chartRangeMin")),a.get("chartRangeMax")!==i&&(a.get("chartRangeClip")||a.get("chartRangeMax")>S)&&(S=a.get("chartRangeMax")),this.zeroAxis=w=a.get("zeroAxis",!0),C=x<=0&&S>=0&&w?0:0==w||x>0?x:S,this.xaxisOffset=C,b=L?t.max.apply(t,m)+t.max.apply(t,z):S-x,this.canvasHeightEf=w&&x<0?this.canvasHeight-2:this.canvasHeight-1,x<C?(P=((L&&S>=0?B:S)-C)/b*this.canvasHeight)!==t.ceil(P)&&(this.canvasHeightEf-=2,P=t.ceil(P)):P=this.canvasHeight,this.yoffset=P,n.isArray(a.get("colorMap"))?(this.colorMapByIndex=a.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=a.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new v(this.colorMapByValue))),this.range=b},getRegion:function(e,n,o){var a=t.floor(n/this.totalBarWidth);return a<0||a>=this.values.length?i:a},getCurrentRegionFields:function(){var e,t,n=this.currentRegion,i=m(this.values[n]),o=[];for(t=i.length;t--;)e=i[t],o.push({isNull:null===e,value:e,color:this.calcColor(t,e,n),offset:n});return o},calcColor:function(e,t,o){var a,s,r=this.colorMapByIndex,l=this.colorMapByValue,d=this.options;return a=this.stacked?d.get("stackedBarColor"):t<0?d.get("negBarColor"):d.get("barColor"),0===t&&d.get("zeroColor")!==i&&(a=d.get("zeroColor")),l&&(s=l.get(t))?a=s:r&&r.length>o&&(a=r[o]),n.isArray(a)?a[e%a.length]:a},renderRegion:function(e,o){var a,s,r,l,d,c,u,h,f,m,_=this.values[e],v=this.options,g=this.xaxisOffset,y=[],b=this.range,w=this.stacked,k=this.target,C=e*this.totalBarWidth,x=this.canvasHeightEf,S=this.yoffset;if(u=(_=n.isArray(_)?_:[_]).length,h=_[0],l=p(null,_),m=p(g,_,!0),l)return v.get("nullColor")?(r=o?v.get("nullColor"):this.calcHighlightColor(v.get("nullColor"),v),a=S>0?S-1:S,k.drawRect(C,a,this.barWidth-1,0,r,r)):i;for(d=S,c=0;c<u;c++){if(h=_[c],w&&h===g){if(!m||f)continue;f=!0}s=b>0?t.floor(x*(t.abs(h-g)/b))+1:1,h<g||h===g&&0===S?(a=d,d+=s):(a=S-s,S-=s),r=this.calcColor(c,h,e),o&&(r=this.calcHighlightColor(r,v)),y.push(k.drawRect(C,a,this.barWidth-1,s-1,r,r))}return 1===y.length?y[0]:y}}),n.fn.sparkline.tristate=C=a(n.fn.sparkline._base,b,{type:"tristate",init:function(e,t,o,a,s){var r=parseInt(o.get("barWidth"),10),l=parseInt(o.get("barSpacing"),10);C._super.init.call(this,e,t,o,a,s),this.regionShapes={},this.barWidth=r,this.barSpacing=l,this.totalBarWidth=r+l,this.values=n.map(t,Number),this.width=a=t.length*r+(t.length-1)*l,n.isArray(o.get("colorMap"))?(this.colorMapByIndex=o.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=o.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new v(this.colorMapByValue))),this.initTarget()},getRegion:function(e,n,i){return t.floor(n/this.totalBarWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===i,value:this.values[e],color:this.calcColor(this.values[e],e),offset:e}},calcColor:function(e,t){var n,i=this.values,o=this.options,a=this.colorMapByIndex,s=this.colorMapByValue;return s&&(n=s.get(e))?n:a&&a.length>t?a[t]:i[t]<0?o.get("negBarColor"):i[t]>0?o.get("posBarColor"):o.get("zeroBarColor")},renderRegion:function(e,n){var i,o,a,s,r,l,d=this.values,c=this.options,u=this.target;if(i=u.pixelHeight,a=t.round(i/2),s=e*this.totalBarWidth,d[e]<0?(r=a,o=a-1):d[e]>0?(r=0,o=a-1):(r=a-1,o=2),null!==(l=this.calcColor(d[e],e)))return n&&(l=this.calcHighlightColor(l,c)),u.drawRect(s,r,this.barWidth-1,o-1,l,l)}}),n.fn.sparkline.discrete=x=a(n.fn.sparkline._base,b,{type:"discrete",init:function(e,o,a,s,r){x._super.init.call(this,e,o,a,s,r),this.regionShapes={},this.values=o=n.map(o,Number),this.min=t.min.apply(t,o),this.max=t.max.apply(t,o),this.range=this.max-this.min,this.width=s="auto"===a.get("width")?2*o.length:this.width,this.interval=t.floor(s/o.length),this.itemWidth=s/o.length,a.get("chartRangeMin")!==i&&(a.get("chartRangeClip")||a.get("chartRangeMin")<this.min)&&(this.min=a.get("chartRangeMin")),a.get("chartRangeMax")!==i&&(a.get("chartRangeClip")||a.get("chartRangeMax")>this.max)&&(this.max=a.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===a.get("lineHeight")?t.round(.3*this.canvasHeight):a.get("lineHeight"))},getRegion:function(e,n,i){return t.floor(n/this.itemWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===i,value:this.values[e],offset:e}},renderRegion:function(e,n){var i,o,a,s,l=this.values,d=this.options,c=this.min,u=this.max,h=this.range,p=this.interval,f=this.target,m=this.canvasHeight,_=this.lineHeight,v=m-_;return o=r(l[e],c,u),s=e*p,i=t.round(v-v*((o-c)/h)),a=d.get("thresholdColor")&&o<d.get("thresholdValue")?d.get("thresholdColor"):d.get("lineColor"),n&&(a=this.calcHighlightColor(a,d)),f.drawLine(s,i,s,i+_,a)}}),n.fn.sparkline.bullet=S=a(n.fn.sparkline._base,{type:"bullet",init:function(e,n,o,a,s){var r,l,d;S._super.init.call(this,e,n,o,a,s),this.values=n=c(n),(d=n.slice())[0]=null===d[0]?d[2]:d[0],d[1]=null===n[1]?d[2]:d[1],r=t.min.apply(t,n),l=t.max.apply(t,n),r=o.get("base")===i?r<0?r:0:o.get("base"),this.min=r,this.max=l,this.range=l-r,this.shapes={},this.valueShapes={},this.regiondata={},this.width=a="auto"===o.get("width")?"4.0em":a,this.target=this.$el.simpledraw(a,s,o.get("composite")),n.length||(this.disabled=!0),this.initTarget()},getRegion:function(e,t,n){var o=this.target.getShapeAt(e,t,n);return o!==i&&this.shapes[o]!==i?this.shapes[o]:i},getCurrentRegionFields:function(){var e=this.currentRegion;return{fieldkey:e.substr(0,1),value:this.values[e.substr(1)],region:e}},changeHighlight:function(e){var t,n=this.currentRegion,i=this.valueShapes[n];switch(delete this.shapes[i],n.substr(0,1)){case"r":t=this.renderRange(n.substr(1),e);break;case"p":t=this.renderPerformance(e);break;case"t":t=this.renderTarget(e)}this.valueShapes[n]=t.id,this.shapes[t.id]=n,this.target.replaceWithShape(i,t)},renderRange:function(e,n){var i=this.values[e],o=t.round(this.canvasWidth*((i-this.min)/this.range)),a=this.options.get("rangeColors")[e-2];return n&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(0,0,o-1,this.canvasHeight-1,a,a)},renderPerformance:function(e){var n=this.values[1],i=t.round(this.canvasWidth*((n-this.min)/this.range)),o=this.options.get("performanceColor");return e&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(0,t.round(.3*this.canvasHeight),i-1,t.round(.4*this.canvasHeight)-1,o,o)},renderTarget:function(e){var n=this.values[0],i=t.round(this.canvasWidth*((n-this.min)/this.range)-this.options.get("targetWidth")/2),o=t.round(.1*this.canvasHeight),a=this.canvasHeight-2*o,s=this.options.get("targetColor");return e&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(i,o,this.options.get("targetWidth")-1,a-1,s,s)},render:function(){var e,t,n=this.values.length,i=this.target;if(S._super.render.call(this)){for(e=2;e<n;e++)t=this.renderRange(e).append(),this.shapes[t.id]="r"+e,this.valueShapes["r"+e]=t.id;null!==this.values[1]&&(t=this.renderPerformance().append(),this.shapes[t.id]="p1",this.valueShapes.p1=t.id),null!==this.values[0]&&(t=this.renderTarget().append(),this.shapes[t.id]="t0",this.valueShapes.t0=t.id),i.render()}}}),n.fn.sparkline.pie=M=a(n.fn.sparkline._base,{type:"pie",init:function(e,i,o,a,s){var r,l=0;if(M._super.init.call(this,e,i,o,a,s),this.shapes={},this.valueShapes={},this.values=i=n.map(i,Number),"auto"===o.get("width")&&(this.width=this.height),i.length>0)for(r=i.length;r--;)l+=i[r];this.total=l,this.initTarget(),this.radius=t.floor(t.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(e,t,n){var o=this.target.getShapeAt(e,t,n);return o!==i&&this.shapes[o]!==i?this.shapes[o]:i},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===i,value:this.values[e],percent:this.values[e]/this.total*100,color:this.options.get("sliceColors")[e%this.options.get("sliceColors").length],offset:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.renderSlice(t,e),i=this.valueShapes[t];delete this.shapes[i],this.target.replaceWithShape(i,n),this.valueShapes[t]=n.id,this.shapes[n.id]=t},renderSlice:function(e,n){var o,a,s,r,l,d=this.target,c=this.options,u=this.radius,h=c.get("borderWidth"),p=c.get("offset"),f=2*t.PI,m=this.values,_=this.total,v=p?2*t.PI*(p/360):0;for(r=m.length,s=0;s<r;s++){if(o=v,a=v,_>0&&(a=v+f*(m[s]/_)),e===s)return l=c.get("sliceColors")[s%c.get("sliceColors").length],n&&(l=this.calcHighlightColor(l,c)),d.drawPieSlice(u,u,u-h,o,a,i,l);v=a}},render:function(){var e,n,o=this.target,a=this.values,s=this.options,r=this.radius,l=s.get("borderWidth");if(M._super.render.call(this)){for(l&&o.drawCircle(r,r,t.floor(r-l/2),s.get("borderColor"),i,l).append(),n=a.length;n--;)a[n]&&(e=this.renderSlice(n).append(),this.valueShapes[n]=e.id,this.shapes[e.id]=n);o.render()}}}),n.fn.sparkline.box=T=a(n.fn.sparkline._base,{type:"box",init:function(e,t,i,o,a){T._super.init.call(this,e,t,i,o,a),this.values=n.map(t,Number),this.width="auto"===i.get("width")?"4.0em":o,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var e=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==i&&e.push({field:"lo",value:this.loutlier}),this.routlier!==i&&e.push({field:"ro",value:this.routlier}),this.lwhisker!==i&&e.push({field:"lw",value:this.lwhisker}),this.rwhisker!==i&&e.push({field:"rw",value:this.rwhisker}),e},render:function(){var e,n,o,a,s,r,d,c,u,h,p,f=this.target,m=this.values,_=m.length,v=this.options,g=this.canvasWidth,y=this.canvasHeight,b=v.get("chartRangeMin")===i?t.min.apply(t,m):v.get("chartRangeMin"),w=v.get("chartRangeMax")===i?t.max.apply(t,m):v.get("chartRangeMax"),k=0;if(T._super.render.call(this)){if(v.get("raw"))v.get("showOutliers")&&m.length>5?(n=m[0],e=m[1],a=m[2],s=m[3],r=m[4],d=m[5],c=m[6]):(e=m[0],a=m[1],s=m[2],r=m[3],d=m[4]);else if(m.sort((function(e,t){return e-t})),a=l(m,1),s=l(m,2),o=(r=l(m,3))-a,v.get("showOutliers")){for(e=d=i,u=0;u<_;u++)e===i&&m[u]>a-o*v.get("outlierIQR")&&(e=m[u]),m[u]<r+o*v.get("outlierIQR")&&(d=m[u]);n=m[0],c=m[_-1]}else e=m[0],d=m[_-1];this.quartiles=[a,s,r],this.lwhisker=e,this.rwhisker=d,this.loutlier=n,this.routlier=c,p=g/(w-b+1),v.get("showOutliers")&&(k=t.ceil(v.get("spotRadius")),p=(g-=2*t.ceil(v.get("spotRadius")))/(w-b+1),n<e&&f.drawCircle((n-b)*p+k,y/2,v.get("spotRadius"),v.get("outlierLineColor"),v.get("outlierFillColor")).append(),c>d&&f.drawCircle((c-b)*p+k,y/2,v.get("spotRadius"),v.get("outlierLineColor"),v.get("outlierFillColor")).append()),f.drawRect(t.round((a-b)*p+k),t.round(.1*y),t.round((r-a)*p),t.round(.8*y),v.get("boxLineColor"),v.get("boxFillColor")).append(),f.drawLine(t.round((e-b)*p+k),t.round(y/2),t.round((a-b)*p+k),t.round(y/2),v.get("lineColor")).append(),f.drawLine(t.round((e-b)*p+k),t.round(y/4),t.round((e-b)*p+k),t.round(y-y/4),v.get("whiskerColor")).append(),f.drawLine(t.round((d-b)*p+k),t.round(y/2),t.round((r-b)*p+k),t.round(y/2),v.get("lineColor")).append(),f.drawLine(t.round((d-b)*p+k),t.round(y/4),t.round((d-b)*p+k),t.round(y-y/4),v.get("whiskerColor")).append(),f.drawLine(t.round((s-b)*p+k),t.round(.1*y),t.round((s-b)*p+k),t.round(.9*y),v.get("medianColor")).append(),v.get("target")&&(h=t.ceil(v.get("spotRadius")),f.drawLine(t.round((v.get("target")-b)*p+k),t.round(y/2-h),t.round((v.get("target")-b)*p+k),t.round(y/2+h),v.get("targetColor")).append(),f.drawLine(t.round((v.get("target")-b)*p+k-h),t.round(y/2),t.round((v.get("target")-b)*p+k+h),t.round(y/2),v.get("targetColor")).append()),f.render()}}}),L=a({init:function(e,t,n,i){this.target=e,this.id=t,this.type=n,this.args=i},append:function(){return this.target.appendShape(this),this}}),D=a({_pxregex:/(\d+)(px)?\s*$/i,init:function(e,t,i){e&&(this.width=e,this.height=t,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),n.data(i,"_jqs_vcanvas",this))},drawLine:function(e,t,n,i,o,a){return this.drawShape([[e,t],[n,i]],o,a)},drawShape:function(e,t,n,i){return this._genShape("Shape",[e,t,n,i])},drawCircle:function(e,t,n,i,o,a){return this._genShape("Circle",[e,t,n,i,o,a])},drawPieSlice:function(e,t,n,i,o,a,s){return this._genShape("PieSlice",[e,t,n,i,o,a,s])},drawRect:function(e,t,n,i,o,a){return this._genShape("Rect",[e,t,n,i,o,a])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(e,t){n(t).html(e)},_calculatePixelDims:function(e,t,i){var o;o=this._pxregex.exec(t),this.pixelHeight=o?o[1]:n(i).height(),o=this._pxregex.exec(e),this.pixelWidth=o?o[1]:n(i).width()},_genShape:function(e,t){var n=P++;return t.unshift(n),new L(this,n,e,t)},appendShape:function(e){alert("appendShape not implemented")},replaceWithShape:function(e,t){alert("replaceWithShape not implemented")},insertAfterShape:function(e,t){alert("insertAfterShape not implemented")},removeShapeId:function(e){alert("removeShapeId not implemented")},getShapeAt:function(e,t,n){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),E=a(D,{init:function(t,o,a,s){E._super.init.call(this,t,o,a),this.canvas=e.createElement("canvas"),a[0]&&(a=a[0]),n.data(a,"_jqs_vcanvas",this),n(this.canvas).css({display:"inline-block",width:t,height:o,verticalAlign:"top"}),this._insert(this.canvas,a),this._calculatePixelDims(t,o,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=s,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i,n(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(e,t,n){var o=this.canvas.getContext("2d");return e!==i&&(o.strokeStyle=e),o.lineWidth=n===i?1:n,t!==i&&(o.fillStyle=t),o},reset:function(){this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i},_drawShape:function(e,t,n,o,a){var s,r,l=this._getContext(n,o,a);for(l.beginPath(),l.moveTo(t[0][0]+.5,t[0][1]+.5),s=1,r=t.length;s<r;s++)l.lineTo(t[s][0]+.5,t[s][1]+.5);n!==i&&l.stroke(),o!==i&&l.fill(),this.targetX!==i&&this.targetY!==i&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawCircle:function(e,n,o,a,s,r,l){var d=this._getContext(s,r,l);d.beginPath(),d.arc(n,o,a,0,2*t.PI,!1),this.targetX!==i&&this.targetY!==i&&d.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e),s!==i&&d.stroke(),r!==i&&d.fill()},_drawPieSlice:function(e,t,n,o,a,s,r,l){var d=this._getContext(r,l);d.beginPath(),d.moveTo(t,n),d.arc(t,n,o,a,s,!1),d.lineTo(t,n),d.closePath(),r!==i&&d.stroke(),l&&d.fill(),this.targetX!==i&&this.targetY!==i&&d.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawRect:function(e,t,n,i,o,a,s){return this._drawShape(e,[[t,n],[t+i,n],[t+i,n+o],[t,n+o],[t,n]],a,s)},appendShape:function(e){return this.shapes[e.id]=e,this.shapeseq.push(e.id),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n,i=this.shapeseq;for(this.shapes[t.id]=t,n=i.length;n--;)i[n]==e&&(i[n]=t.id);delete this.shapes[e]},replaceWithShapes:function(e,t){var n,i,o,a=this.shapeseq,s={};for(i=e.length;i--;)s[e[i]]=!0;for(i=a.length;i--;)s[n=a[i]]&&(a.splice(i,1),delete this.shapes[n],o=i);for(i=t.length;i--;)a.splice(o,0,t[i].id),this.shapes[t[i].id]=t[i]},insertAfterShape:function(e,t){var n,i=this.shapeseq;for(n=i.length;n--;)if(i[n]===e)return i.splice(n+1,0,t.id),void(this.shapes[t.id]=t)},removeShapeId:function(e){var t,n=this.shapeseq;for(t=n.length;t--;)if(n[t]===e){n.splice(t,1);break}delete this.shapes[e]},getShapeAt:function(e,t,n){return this.targetX=t,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var e,t,n=this.shapeseq,i=this.shapes,o=n.length;for(this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),t=0;t<o;t++)this["_draw"+(e=i[n[t]]).type].apply(this,e.args);this.interact||(this.shapes={},this.shapeseq=[])}}),O=a(D,{init:function(t,i,o){var a;O._super.init.call(this,t,i,o),o[0]&&(o=o[0]),n.data(o,"_jqs_vcanvas",this),this.canvas=e.createElement("span"),n(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:i,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,o),this._calculatePixelDims(t,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,a='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",a),this.group=n(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(e,t,n,o,a){var s,r,l,d,c,u,h=[];for(u=0,c=t.length;u<c;u++)h[u]=t[u][0]+","+t[u][1];return s=h.splice(0,1),a=a===i?1:a,r=n===i?' stroked="false" ':' strokeWeight="'+a+'px" strokeColor="'+n+'" ',l=o===i?' filled="false"':' fillColor="'+o+'" filled="true" ',d=h[0]===h[h.length-1]?"x ":"",'<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+e+'" '+r+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+s+" l "+h.join(", ")+" "+d+'e"> </v:shape>'},_drawCircle:function(e,t,n,o,a,s,r){return'<v:oval  id="jqsshape'+e+'" '+(a===i?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+a+'" ')+(s===i?' filled="false"':' fillColor="'+s+'" filled="true" ')+' style="position:absolute;top:'+(n-=o)+"px; left:"+(t-=o)+"px; width:"+2*o+"px; height:"+2*o+'px"></v:oval>'},_drawPieSlice:function(e,n,o,a,s,r,l,d){var c,u,h,p,f,m,_;if(s===r)return"";if(r-s==2*t.PI&&(s=0,r=2*t.PI),u=n+t.round(t.cos(s)*a),h=o+t.round(t.sin(s)*a),p=n+t.round(t.cos(r)*a),f=o+t.round(t.sin(r)*a),u===p&&h===f){if(r-s<t.PI)return"";u=p=n+a,h=f=o}return u===p&&h===f&&r-s<t.PI?"":(c=[n-a,o-a,n+a,o+a,u,h,p,f],m=l===i?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',_=d===i?' filled="false"':' fillColor="'+d+'" filled="true" ','<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+e+'" '+m+_+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+n+","+o+" wa "+c.join(", ")+' x e"> </v:shape>')},_drawRect:function(e,t,n,i,o,a,s){return this._drawShape(e,[[t,n],[t,n+o],[t+i,n+o],[t+i,n],[t,n]],a,s)},reset:function(){this.group.innerHTML=""},appendShape:function(e){var t=this["_draw"+e.type].apply(this,e.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var i=n("#jqsshape"+e),o=this["_draw"+t.type].apply(this,t.args);i[0].outerHTML=o},replaceWithShapes:function(e,t){var i,o=n("#jqsshape"+e[0]),a="",s=t.length;for(i=0;i<s;i++)a+=this["_draw"+t[i].type].apply(this,t[i].args);for(o[0].outerHTML=a,i=1;i<e.length;i++)n("#jqsshape"+e[i]).remove()},insertAfterShape:function(e,t){var i=n("#jqsshape"+e),o=this["_draw"+t.type].apply(this,t.args);i[0].insertAdjacentHTML("afterEnd",o)},removeShapeId:function(e){var t=n("#jqsshape"+e);this.group.removeChild(t[0])},getShapeAt:function(e,t,n){return e.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})},"function"==typeof define&&n.amdO?define(["jquery"],a):o()&&!o().fn.sparkline&&a(o())}(document,Math)},8257:(e,t,n)=>{"use strict";n.r(t);var i,o,a,s,r,l=n(20615),d=n.n(l);!function(e,t){function n(t,n){var o,a,s,r=t.nodeName.toLowerCase();return"area"===r?(a=(o=t.parentNode).name,!(!t.href||!a||"map"!==o.nodeName.toLowerCase())&&(!!(s=e("img[usemap=#"+a+"]")[0])&&i(s))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r&&t.href||n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var o=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each((function(){var i=this;setTimeout((function(){e(i).focus(),n&&n.call(i)}),t)})):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,o,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(i=a.css("position"))||"relative"===i||"fixed"===i)&&(o=parseInt(a.css("zIndex"),10),!isNaN(o)&&0!==o))return o;a=a.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++o)}))},removeUniqueId:function(){return this.each((function(){a.test(this.id)&&e(this).removeAttr("id")}))}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(n,i){function o(t,n,i,o){return e.each(a,(function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)})),n}var a="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?r["inner"+i].call(this):this.each((function(){e(this).css(s,o(this,n)+"px")}))},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?r["outer"+i].call(this,t):this.each((function(){e(this).css(s,o(this,t,!0,n)+"px")}))}})),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(t,!o)}}),e((function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"})),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!t.length,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var o,a=e.ui[t].prototype;for(o in i)a.plugins[o]=a.plugins[o]||[],a.plugins[o].push([n,i[o]])},call:function(e,t,n){var i,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0||(t[i]=1,o=t[i]>0,t[i]=0,o)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,i,o,a,s){return e.ui.isOverAxis(t,i,a)&&e.ui.isOverAxis(n,o,s)}}))}(d()),i=d(),a=0,s=Array.prototype.slice,r=i.cleanData,i.cleanData=function(e){for(var t,n=0;null!=(t=e[n]);n++)try{i(t).triggerHandler("remove")}catch(e){}r(e)},i.widget=function(e,t,n){var o,a,s,r,l=e.split(".")[0];e=e.split(".")[1],o=l+"-"+e,n||(n=t,t=i.Widget),i.expr[":"][o.toLowerCase()]=function(e){return!!i.data(e,o)},i[l]=i[l]||{},a=i[l][e],s=i[l][e]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},i.extend(s,a,{version:n.version,_proto:i.extend({},n),_childConstructors:[]}),(r=new t).options=i.widget.extend({},r.options),i.each(n,(function(e,o){i.isFunction(o)&&(n[e]=function(){var n=function(){return t.prototype[e].apply(this,arguments)},i=function(n){return t.prototype[e].apply(this,n)};return function(){var e,t=this._super,a=this._superApply;return this._super=n,this._superApply=i,e=o.apply(this,arguments),this._super=t,this._superApply=a,e}}())})),s.prototype=i.widget.extend(r,{widgetEventPrefix:r.widgetEventPrefix||e},n,{constructor:s,namespace:l,widgetName:e,widgetBaseClass:o,widgetFullName:o}),a?(i.each(a._childConstructors,(function(e,t){var n=t.prototype;i.widget(n.namespace+"."+n.widgetName,s,t._proto)})),delete a._childConstructors):t._childConstructors.push(s),i.widget.bridge(e,s)},i.widget.extend=function(e){for(var t,n,a=s.call(arguments,1),r=0,l=a.length;r<l;r++)for(t in a[r])n=a[r][t],a[r].hasOwnProperty(t)&&n!==o&&(i.isPlainObject(n)?e[t]=i.isPlainObject(e[t])?i.widget.extend({},e[t],n):i.widget.extend({},n):e[t]=n);return e},i.widget.bridge=function(e,t){var n=t.prototype.widgetFullName;i.fn[e]=function(a){var r="string"==typeof a,l=s.call(arguments,1),d=this;return a=!r&&l.length?i.widget.extend.apply(null,[a].concat(l)):a,r?this.each((function(){var t,s=i.data(this,n);return s?i.isFunction(s[a])&&"_"!==a.charAt(0)?(t=s[a].apply(s,l))!==s&&t!==o?(d=t&&t.jquery?d.pushStack(t.get()):t,!1):void 0:i.error("no such method '"+a+"' for "+e+" widget instance"):i.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")})):this.each((function(){var e=i.data(this,n);e?e.option(a||{})._init():new t(a,this)})),d}},i.Widget=function(){},i.Widget._childConstructors=[],i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,t){t=i(t||this.defaultElement||this)[0],this.element=i(t),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=i.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=i(),this.hoverable=i(),this.focusable=i(),t!==this&&(i.data(t,this.widgetName,this),i.data(t,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=i(t.style?t.ownerDocument:t.document||t),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:i.noop,_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(i.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:i.noop,widget:function(){return this.element},option:function(e,t){var n,a,s,r=e;if(0===arguments.length)return i.widget.extend({},this.options);if("string"==typeof e)if(r={},n=e.split("."),e=n.shift(),n.length){for(a=r[e]=i.widget.extend({},this.options[e]),s=0;s<n.length-1;s++)a[n[s]]=a[n[s]]||{},a=a[n[s]];if(e=n.pop(),t===o)return a[e]===o?null:a[e];a[e]=t}else{if(t===o)return this.options[e]===o?null:this.options[e];r[e]=t}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,t){var n,o=this;t?(e=n=i(e),this.bindings=this.bindings.add(e)):(t=e,e=this.element,n=this.widget()),i.each(t,(function(t,a){function s(){if(!0!==o.options.disabled&&!i(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||i.guid++);var r=t.match(/^(\w+)\s*(.*)$/),l=r[1]+o.eventNamespace,d=r[2];d?n.delegate(d,l,s):e.bind(l,s)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){i(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){i(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){i(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){i(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,n){var o,a,s=this.options[e];if(n=n||{},(t=i.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],a=t.originalEvent)for(o in a)o in t||(t[o]=a[o]);return this.element.trigger(t,n),!(i.isFunction(s)&&!1===s.apply(this.element[0],[t].concat(n))||t.isDefaultPrevented())}},i.each({show:"fadeIn",hide:"fadeOut"},(function(e,t){i.Widget.prototype["_"+e]=function(n,o,a){"string"==typeof o&&(o={effect:o});var s,r=o?!0===o||"number"==typeof o?t:o.effect||t:e;"number"==typeof(o=o||{})&&(o={duration:o}),s=!i.isEmptyObject(o),o.complete=a,o.delay&&n.delay(o.delay),s&&i.effects&&(i.effects.effect[r]||!1!==i.uiBackCompat&&i.effects[r])?n[e](o):r!==e&&n[r]?n[r](o.duration,o.easing,a):n.queue((function(t){i(this)[e](),a&&a.call(n[0]),t()}))}})),!1!==i.uiBackCompat&&(i.Widget.prototype._getCreateOptions=function(){return i.metadata&&i.metadata.get(this.element[0])[this.widgetName]}),function(e,t){var n=!1;e(document).mouseup((function(e){n=!1})),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,o=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(o&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(d()),function(e,t){function n(e,t,n){return[parseInt(e[0],10)*(p.test(e[0])?t/100:1),parseInt(e[1],10)*(p.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var o,a=Math.max,s=Math.abs,r=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var n,i,a=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=a.children()[0];return e("body").append(a),n=s.offsetWidth,a.css("overflow","scroll"),n===(i=s.offsetWidth)&&(i=a[0].clientWidth),a.remove(),o=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,a="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,d,p,m,_,v=e(t.of),g=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo(g),b=v[0],w=(t.collision||"flip").split(" "),k={};return 9===b.nodeType?(d=v.width(),p=v.height(),m={top:0,left:0}):e.isWindow(b)?(d=v.width(),p=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):b.preventDefault?(t.at="left top",d=p=0,m={top:b.pageY,left:b.pageX}):(d=v.outerWidth(),p=v.outerHeight(),m=v.offset()),_=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",e=u.exec(i[0]),n=u.exec(i[1]),k[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?_.left+=d:"center"===t.at[0]&&(_.left+=d/2),"bottom"===t.at[1]?_.top+=p:"center"===t.at[1]&&(_.top+=p/2),o=n(k.at,d,p),_.left+=o[0],_.top+=o[1],this.each((function(){var l,c,u=e(this),h=u.outerWidth(),f=u.outerHeight(),b=i(this,"marginLeft"),C=i(this,"marginTop"),x=h+b+i(this,"marginRight")+y.width,S=f+C+i(this,"marginBottom")+y.height,M=e.extend({},_),T=n(k.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?M.left-=h:"center"===t.my[0]&&(M.left-=h/2),"bottom"===t.my[1]?M.top-=f:"center"===t.my[1]&&(M.top-=f/2),M.left+=T[0],M.top+=T[1],e.support.offsetFractions||(M.left=r(M.left),M.top=r(M.top)),l={marginLeft:b,marginTop:C},e.each(["left","top"],(function(n,i){e.ui.position[w[n]]&&e.ui.position[w[n]][i](M,{targetWidth:d,targetHeight:p,elemWidth:h,elemHeight:f,collisionPosition:l,collisionWidth:x,collisionHeight:S,offset:[o[0]+T[0],o[1]+T[1]],my:t.my,at:t.at,within:g,elem:u})})),e.fn.bgiframe&&u.bgiframe(),t.using&&(c=function(e){var n=m.left-M.left,i=n+d-h,o=m.top-M.top,r=o+p-f,l={target:{element:v,left:m.left,top:m.top,width:d,height:p},element:{element:u,left:M.left,top:M.top,width:h,height:f},horizontal:i<0?"left":n>0?"right":"center",vertical:r<0?"top":o>0?"bottom":"middle"};d<h&&s(n+i)<d&&(l.horizontal="center"),p<f&&s(o+r)<p&&(l.vertical="middle"),a(s(n),s(i))>a(s(o),s(r))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),u.offset(e.extend(M,{using:c}))}))},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,r=e.left-t.collisionPosition.marginLeft,l=o-r,d=r+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&d<=0?(n=e.left+l+t.collisionWidth-s-o,e.left+=l-n):e.left=d>0&&l<=0?o:l>d?o+s-t.collisionWidth:o:l>0?e.left+=l:d>0?e.left-=d:e.left=a(e.left-r,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,r=e.top-t.collisionPosition.marginTop,l=o-r,d=r+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&d<=0?(n=e.top+l+t.collisionHeight-s-o,e.top+=l-n):e.top=d>0&&l<=0?o:l>d?o+s-t.collisionHeight:o:l>0?e.top+=l:d>0?e.top-=d:e.top=a(e.top-r,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,a=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-r-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];c<0?((n=e.left+h+p+f+t.collisionWidth-r-a)<0||n<s(c))&&(e.left+=h+p+f):u>0&&((i=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||s(i)<u)&&(e.left+=h+p+f)},top:function(e,t){var n,i,o=t.within,a=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-r-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];c<0?(i=e.top+h+p+f+t.collisionHeight-r-a,e.top+h+p+f>c&&(i<0||i<s(c))&&(e.top+=h+p+f)):u>0&&(n=e.top-t.collisionPosition.marginTop+h+p+f-l,e.top+h+p+f>u&&(n>0||s(n)<u)&&(e.top+=h+p+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,o,a,s=document.getElementsByTagName("body")[0],r=document.createElement("div");for(a in t=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[a]=i[a];t.appendChild(r),(n=s||document.documentElement).insertBefore(t,n.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",o=e(r).offset().left,e.support.offsetFractions=o>10&&o<11,t.innerHTML="",n.removeChild(t)}(),!1!==e.uiBackCompat&&function(e){var n=e.fn.position;e.fn.position=function(i){if(!i||!i.offset)return n.call(this,i);var o=i.offset.split(" "),a=i.at.split(" ");return 1===o.length&&(o[1]=o[0]),/^\d/.test(o[0])&&(o[0]="+"+o[0]),/^\d/.test(o[1])&&(o[1]="+"+o[1]),1===a.length&&(/left|center|right/.test(a[0])?a[1]="center":(a[1]=a[0],a[0]="center")),n.call(this,e.extend(i,{at:a[0]+o[0]+" "+a[1]+o[1],offset:t}))}}(d())}(d()),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var a=e.ui.keyCode;switch(o.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",o);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case a.UP:t=!0,this._keyEvent("previous",o);break;case a.DOWN:t=!0,this._keyEvent("next",o);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case a.TAB:this.menu.active&&this.menu.select(o);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void i.preventDefault();if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(i){i.target!==t.element[0]&&i.target!==n&&!e.contains(n,i.target)&&t.close()}))}))},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(i){t===n&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(d()),function(e,t){var n,i,o,a,s="ui-button ui-widget ui-state-default ui-corner-all",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout((function(){t.button("refresh")}),1)},d=function(t){var n=t.name,i=t.form,o=e([]);return n&&(o=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter((function(){return!this.form}))),o};e.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(c?"":" ui-state-active"),h="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){r.disabled||(e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active"))})).bind("mouseleave"+this.eventNamespace,(function(){r.disabled||e(this).removeClass(u)})).bind("click"+this.eventNamespace,(function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){t.buttonElement.addClass(h)})).bind("blur"+this.eventNamespace,(function(){t.buttonElement.removeClass(h)})),c&&(this.element.bind("change"+this.eventNamespace,(function(){a||t.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(e){r.disabled||(a=!1,i=e.pageX,o=e.pageY)})).bind("mouseup"+this.eventNamespace,(function(e){r.disabled||i===e.pageX&&o===e.pageY||(a=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(r.disabled||a)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(r.disabled||a)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];d(n).not(n).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(r.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",(function(){n=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(r.disabled)return!1;e(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(t){if(r.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace,(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" ui-state-hover ui-state-active  "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?d(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(r),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,o=i.primary&&i.secondary,a=[];i.primary||i.secondary?(this.options.text&&a.push("ui-button-text-icon"+(o?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(a.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(d()),function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!n&&i.not(".ui-state-disabled").length&&(n=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,o,a,s,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",a=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),a===o?s=!0:a=o+a,r=new RegExp("^"+n(a),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return r.test(e(this).children("a").text())})),(i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(a=String.fromCharCode(t.keyCode),r=new RegExp("^"+n(a),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return r.test(e(this).children("a").text())}))),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=a,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});(t=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),i.each((function(){var t=e(this),i=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",i.attr("id"))})),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,a,s,r;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,a=this.activeMenu.scrollTop(),s=this.activeMenu.height(),r=t.height(),o<0?this.activeMenu.scrollTop(a+o):o+r>s&&this.activeMenu.scrollTop(a+o-s+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-o<0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,o;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+o>0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(d()),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,n,i=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(!0===i.range&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),n=i.values&&i.values.length||1,t=o.length;t<n;t++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=o.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(e){e.preventDefault()})).mouseenter((function(){i.disabled||e(this).addClass("ui-state-hover")})).mouseleave((function(){e(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))})).blur((function(){e(this).removeClass("ui-state-focus")})),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t)})),this._on(this.handles,{keydown:function(t){var n,i,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,a)))return}switch(o=this.options.step,n=i=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-o)}this._slide(t,a,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,o,a,s,r,l,d=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var n=Math.abs(i-d.values(t));o>n&&(o=n,a=e(this),s=t)})),!0===c.range&&this.values(1)===c.min&&(s+=1,a=e(this.handles[s])),!1!==this._start(t,s)&&(this._mouseSliding=!0,this._handleIndex=s,a.addClass("ui-state-active").focus(),r=a.offset(),l=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-a.width()/2,top:t.pageY-r.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,o,a;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),a=this._valueMin()+i*o,this._trimAlignValue(a)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,o,a;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&n>i||1===t&&n<i)&&(n=i),n!==this.values(t)&&((o=this.values())[t]=n,a=this._trigger("slide",e,{handle:this.handles[t],value:n,values:o}),i=this.values(t?0:1),!1!==a&&this.values(t,n,!0))):n!==this.value()&&(!1!==(a=this._trigger("slide",e,{handle:this.handles[t],value:n}))&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,o,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,o=arguments[0],a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(o[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,n){var i,o=0;switch(e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<o;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,o,a,s=this.options.range,r=this.options,l=this,d=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[d?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[d?"animate":"css"]({left:n+"%"},r.animate),1===i&&l.range[d?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:r.animate})):(0===i&&l.range.stop(1,1)[d?"animate":"css"]({bottom:n+"%"},r.animate),1===i&&l.range[d?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:r.animate}))),t=n})):(i=this.value(),o=this._valueMin(),a=this._valueMax(),n=a!==o?(i-o)/(a-o)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[d?"animate":"css"](c,r.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:n+"%"},r.animate),"max"===s&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:r.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:n+"%"},r.animate),"max"===s&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:r.animate}))}})}(d())},26822:(e,t,n)=>{"use strict";n.r(t);var i=n(20615);!function(e){e.fn.autocomplete_verheul=function(t){var n;arguments.length>1?(n=t,(t=arguments[1]).url=n):"string"==typeof t&&(t={url:n=t});var i=e.extend({},e.fn.autocomplete_verheul.defaults,t);return this.each((function(){var t=e(this);t.data("autocompleter",new e.Autocompleter(t,e.meta?e.extend({},i,t.data()):i))}))},e.fn.autocomplete_verheul.defaults={inputClass:"acInput",loadingClass:"acLoading",resultsClass:"acResults",selectClass:"acSelect",queryParamName:"q",extraParams:{},remoteDataType:!1,lineSeparator:"\n",cellSeparator:"|",minChars:2,maxItemsToShow:10,delay:400,useCache:!0,maxCacheLength:10,matchSubset:!0,matchCase:!1,matchInside:!0,mustMatch:!1,selectFirst:!1,selectOnly:!1,showResult:null,preventDefaultReturn:1,preventDefaultTab:0,autoFill:!1,filterResults:!0,filter:!0,sortResults:!0,sortFunction:null,onItemSelect:null,onNoMatch:null,onFinish:null,matchStringConverter:null,beforeUseConverter:null,autoWidth:"min-width",useDelimiter:!1,delimiterChar:",",delimiterKeyCode:188,processData:null,onError:null,enabled:!0};var t=function(t){var n,i,o=typeof t;return"string"===o?(n=t,i={}):e.isArray(t)?(n=t[0],i=t.slice(1)):"object"===o&&(n=t.value,i=t.data),"object"!=typeof i&&(i={}),{value:n=String(n),data:i}},n=function(e,t,n){var i=parseInt(e,10);return n=n||{},(isNaN(i)||n.min&&i<n.min)&&(i=t),i},i=function(t,n){var i=[];return e.each(n,(function(e,t){i.push(function(e,t){return[e,encodeURIComponent(t)].join("=")}(e,t))})),i.length&&(t+=-1===t.indexOf("?")?"?":"&",t+=i.join("&")),t};e.Autocompleter=function(t,i){if(!t||!(t instanceof e)||1!==t.length||"INPUT"!==t.get(0).tagName.toUpperCase()&&"TEXTAREA"!==t.get(0).tagName.toUpperCase())throw new Error("Invalid parameter for jquery.Autocompleter, jQuery object with one element with INPUT or TEXTAREA tag expected.");var o=this;this.options=i,this.cacheData_={},this.cacheLength_=0,this.selectClass_="jquery-autocomplete-selected-item",this.keyTimeout_=null,this.finishTimeout_=null,this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1,this.finishOnBlur_=!0,this.options.minChars=n(this.options.minChars,e.fn.autocomplete_verheul.defaults.minChars,{min:0}),this.options.maxItemsToShow=n(this.options.maxItemsToShow,e.fn.autocomplete_verheul.defaults.maxItemsToShow,{min:0}),this.options.maxCacheLength=n(this.options.maxCacheLength,e.fn.autocomplete_verheul.defaults.maxCacheLength,{min:1}),this.options.delay=n(this.options.delay,e.fn.autocomplete_verheul.defaults.delay,{min:0}),2!=this.options.preventDefaultReturn&&(this.options.preventDefaultReturn=this.options.preventDefaultReturn?1:0),2!=this.options.preventDefaultTab&&(this.options.preventDefaultTab=this.options.preventDefaultTab?1:0),this.dom={},this.dom.$elem=t,this.dom.$elem.attr("autocomplete","off").addClass(this.options.inputClass),this.dom.$results=e("<div></div>").hide().addClass(this.options.resultsClass).css({position:"absolute"}),e("body").append(this.dom.$results),t.keydown((function(e){switch(o.lastKeyPressed_=e.keyCode,o.lastKeyPressed_){case o.options.delimiterKeyCode:o.options.useDelimiter&&o.active_&&o.selectCurrent();break;case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 38:return e.preventDefault(),o.active_?o.focusPrev():o.activate(),!1;case 40:return e.preventDefault(),o.active_?o.focusNext():o.activate(),!1;case 9:if(o.active_&&(o.selectCurrent(),o.options.preventDefaultTab))return e.preventDefault(),!1;if(2===o.options.preventDefaultTab)return e.preventDefault(),!1;break;case 13:if(o.active_&&(o.selectCurrent(),o.options.preventDefaultReturn))return e.preventDefault(),!1;if(2===o.options.preventDefaultReturn)return e.preventDefault(),!1;break;case 27:if(o.active_)return e.preventDefault(),o.deactivate(!0),!1;break;default:o.activate()}})),t.on("paste",(function(){o.activate()}));var a=function(){o.deactivate(!0)};t.blur((function(){o.finishOnBlur_&&(o.finishTimeout_=setTimeout(a,200))})),t.parents("form").on("submit",a)},e.Autocompleter.prototype.position=function(){var t=this.dom.$elem.offset(),n=this.dom.$results.outerHeight(),i=e(window).outerHeight(),o=t.top+this.dom.$elem.outerHeight(),a=o+n,s={top:o,left:t.left};if(a>i){var r=t.top-n;r>=0&&(s.top=r)}this.dom.$results.css(s)},e.Autocompleter.prototype.cacheRead=function(e){var t,n,i,o,a;if(this.options.useCache)for(t=(e=String(e)).length,n=this.options.matchSubset?1:t;n<=t;){for(o=this.options.matchInside?t-n:0,a=0;a<=o;){if(i=e.substr(0,n),void 0!==this.cacheData_[i])return this.cacheData_[i];a++}n++}return!1},e.Autocompleter.prototype.cacheWrite=function(e,t){return!!this.options.useCache&&(this.cacheLength_>=this.options.maxCacheLength&&this.cacheFlush(),e=String(e),void 0!==this.cacheData_[e]&&this.cacheLength_++,this.cacheData_[e]=t,this.cacheData_[e])},e.Autocompleter.prototype.cacheFlush=function(){this.cacheData_={},this.cacheLength_=0},e.Autocompleter.prototype.callHook=function(t,n){var i=this.options[t];return!(!i||!e.isFunction(i))&&i(n,this)},e.Autocompleter.prototype.activate=function(){if(this.options.enabled){var e=this;this.keyTimeout_&&clearTimeout(this.keyTimeout_),this.keyTimeout_=setTimeout((function(){e.activateNow()}),this.options.delay)}},e.Autocompleter.prototype.activateNow=function(){var e=this.beforeUseConverter(this.dom.$elem.val());e!==this.lastProcessedValue_&&e!==this.lastSelectedValue_&&this.fetchData(e)},e.Autocompleter.prototype.fetchData=function(e){var t=this,n=function(e,n){t.options.processData&&(e=t.options.processData(e)),t.showResults(t.filterResults(e,n),n)};this.lastProcessedValue_=e,e.length<this.options.minChars?n([],e):this.options.data?n(this.options.data,e):this.fetchRemoteData(e,(function(t){n(t,e)}))},e.Autocompleter.prototype.fetchRemoteData=function(t,n){var i=this.cacheRead(t);if(i)n(i);else{var o=this,a="json"===o.options.remoteDataType?"json":"text",s=function(e){var i=!1;!1!==e&&(i=o.parseRemoteData(e),o.cacheWrite(t,i)),o.dom.$elem.removeClass(o.options.loadingClass),n(i)};this.dom.$elem.addClass(this.options.loadingClass),e.ajax({url:this.makeUrl(t),success:s,error:function(t,n,i){e.isFunction(o.options.onError)?o.options.onError(t,n,i):s(!1)},dataType:a})}},e.Autocompleter.prototype.setExtraParam=function(t,n){var i=e.trim(String(t));return i&&(this.options.extraParams||(this.options.extraParams={}),this.options.extraParams[i]!==n&&(this.options.extraParams[i]=n,this.cacheFlush())),this},e.Autocompleter.prototype.makeUrl=function(t){var n=this.options.url,o=e.extend({},this.options.extraParams);return!1===this.options.queryParamName?n+=encodeURIComponent(t):o[this.options.queryParamName]=t,i(n,o)},e.Autocompleter.prototype.parseRemoteData=function(t){var n,i=t;if("json"===this.options.remoteDataType){switch(n=typeof t){case"object":i=t;break;case"string":i=e.parseJSON(t);break;default:throw new Error("Unexpected remote data type: "+n)}return i}return function(e,t,n){var i,o,a,s,r,l,d=[];for(l=String(e).replace("\r\n","\n").split(t),i=0;i<l.length;i++){for(s=l[i].split(n),a=[],o=0;o<s.length;o++)a.push(decodeURIComponent(s[o]));r=a.shift(),d.push({value:r,data:a})}return d}(i,this.options.lineSeparator,this.options.cellSeparator)},e.Autocompleter.prototype.defaultFilter=function(e,t){if(!e.value)return!1;if(this.options.filterResults){var n=this.matchStringConverter(t),i=this.matchStringConverter(e.value);this.options.matchCase||(n=n.toLowerCase(),i=i.toLowerCase());var o=i.indexOf(n);return this.options.matchInside?o>-1:0===o}return!0},e.Autocompleter.prototype.filterResult=function(t,n){return!1===this.options.filter||(e.isFunction(this.options.filter)?this.options.filter(t,n):this.defaultFilter(t,n))},e.Autocompleter.prototype.filterResults=function(e,n){var i,o,a=[];for(i=0;i<e.length;i++)o=t(e[i]),this.filterResult(o,n)&&a.push(o);return this.options.sortResults&&(a=this.sortResults(a,n)),this.options.maxItemsToShow>0&&this.options.maxItemsToShow<a.length&&(a.length=this.options.maxItemsToShow),a},e.Autocompleter.prototype.sortResults=function(t,n){var i=this,o=this.options.sortFunction;return e.isFunction(o)||(o=function(e,t,n){return function(e,t,n){return e=String(e.value),t=String(t.value),n||(e=e.toLowerCase(),t=t.toLowerCase()),e>t?1:e<t?-1:0}(e,t,i.options.matchCase)}),t.sort((function(e,t){return o(e,t,n,i.options)})),t},e.Autocompleter.prototype.matchStringConverter=function(t,n,i){var o=this.options.matchStringConverter;return e.isFunction(o)&&(t=o(t,n,i)),t},e.Autocompleter.prototype.beforeUseConverter=function(t){t=this.getValue(t);var n=this.options.beforeUseConverter;return e.isFunction(n)&&(t=n(t)),t},e.Autocompleter.prototype.enableFinishOnBlur=function(){this.finishOnBlur_=!0},e.Autocompleter.prototype.disableFinishOnBlur=function(){this.finishOnBlur_=!1},e.Autocompleter.prototype.createItemFromResult=function(t){var n=this,i=e("<li/>");return i.html(this.showResult(t.value,t.data)),i.data({value:t.value,data:t.data}).click((function(){n.selectItem(i)})).mousedown(n.disableFinishOnBlur).mouseup(n.enableFinishOnBlur),i},e.Autocompleter.prototype.getItems=function(){return e(">ul>li",this.dom.$results)},e.Autocompleter.prototype.showResults=function(t,n){var i,o,a,s,r=t.length,l=this,d=e("<ul></ul>"),c=!1,u=!1;if(r){for(i=0;i<r;i++)o=t[i],a=this.createItemFromResult(o),d.append(a),!1===c&&(c=String(o.value),u=a,a.addClass(this.options.firstItemClass)),i===r-1&&a.addClass(this.options.lastItemClass);this.dom.$results.html(d).show(),this.position(),this.options.autoWidth&&(s=this.dom.$elem.outerWidth()-this.dom.$results.outerWidth()+this.dom.$results.width(),this.dom.$results.css(this.options.autoWidth,s)),this.getItems().hover((function(){l.focusItem(this)}),(function(){})),(this.autoFill(c,n)||this.options.selectFirst||this.options.selectOnly&&1===r)&&this.focusItem(u),this.active_=!0}else this.hideResults(),this.active_=!1},e.Autocompleter.prototype.showResult=function(t,n){return e.isFunction(this.options.showResult)?this.options.showResult(t,n):e("<p></p>").text(t).html()},e.Autocompleter.prototype.autoFill=function(e,t){var n,i,o,a;if(this.options.autoFill&&8!==this.lastKeyPressed_&&(n=String(e).toLowerCase(),i=String(t).toLowerCase(),o=e.length,a=t.length,n.substr(0,a)===i)){var s=this.getDelimiterOffsets(),r=s.start?" ":"";this.setValue(r+e);var l=a+s.start+r.length,d=o+s.start+r.length;return this.selectRange(l,d),!0}return!1},e.Autocompleter.prototype.focusNext=function(){this.focusMove(1)},e.Autocompleter.prototype.focusPrev=function(){this.focusMove(-1)},e.Autocompleter.prototype.focusMove=function(t){var i=this.getItems();if(t=n(t,0))for(var o=0;o<i.length;o++)if(e(i[o]).hasClass(this.selectClass_))return void this.focusItem(o+t);this.focusItem(0)},e.Autocompleter.prototype.focusItem=function(t){var n,i=this.getItems();i.length&&(i.removeClass(this.selectClass_).removeClass(this.options.selectClass),"number"==typeof t?(t<0?t=0:t>=i.length&&(t=i.length-1),n=e(i[t])):n=e(t),n&&n.addClass(this.selectClass_).addClass(this.options.selectClass))},e.Autocompleter.prototype.selectCurrent=function(){var t=e("li."+this.selectClass_,this.dom.$results);1===t.length?this.selectItem(t):this.deactivate(!1)},e.Autocompleter.prototype.selectItem=function(e){var t=e.data("value"),n=e.data("data"),i=this.displayValue(t,n),o=this.beforeUseConverter(i);this.lastProcessedValue_=o,this.lastSelectedValue_=o;var a=this.getDelimiterOffsets(),s=this.options.delimiterChar,r=this.dom.$elem,l=0;this.options.useDelimiter&&(r.val().substring(a.start-1,a.start)==s&&" "!=s&&(i=" "+i),r.val().substring(a.end,a.end+1)!=s&&this.lastKeyPressed_!=this.options.delimiterKeyCode?i+=s:l=1),this.setValue(i),this.setCaret(a.start+i.length+l),this.callHook("onItemSelect",{value:t,data:n}),this.deactivate(!0),r.focus()},e.Autocompleter.prototype.displayValue=function(t,n){return e.isFunction(this.options.displayValue)?this.options.displayValue(t,n):t},e.Autocompleter.prototype.hideResults=function(){this.dom.$results.hide()},e.Autocompleter.prototype.deactivate=function(e){this.finishTimeout_&&clearTimeout(this.finishTimeout_),this.keyTimeout_&&clearTimeout(this.keyTimeout_),e&&(this.lastProcessedValue_!==this.lastSelectedValue_&&(this.options.mustMatch&&this.setValue(""),this.callHook("onNoMatch")),this.active_&&this.callHook("onFinish"),this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1),this.hideResults()},e.Autocompleter.prototype.selectRange=function(e,t){var n=this.dom.$elem.get(0);if(n.setSelectionRange)n.focus(),n.setSelectionRange(e,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}},e.Autocompleter.prototype.setCaret=function(e){this.selectRange(e,e)},e.Autocompleter.prototype.getCaret=function(){var e,t,n,i,o,a,s=this.dom.$elem,r=s[0];return r.createTextRange?(t=document.selection,"textarea"!=r.tagName.toLowerCase()?(e=s.val(),(n=t.createRange().duplicate()).moveEnd("character",e.length),i=""===n.text?e.length:e.lastIndexOf(n.text),(n=t.createRange().duplicate()).moveStart("character",-e.length),o=n.text.length):((a=(n=t.createRange()).duplicate()).moveToElementText(r),a.setEndPoint("EndToEnd",n),o=(i=a.text.length-n.text.length)+n.text.length)):(i=s[0].selectionStart,o=s[0].selectionEnd),{start:i,end:o}},e.Autocompleter.prototype.setValue=function(e){if(this.options.useDelimiter){var t=this.dom.$elem.val(),n=this.getDelimiterOffsets();e=t.substring(0,n.start)+e+t.substring(n.end)}this.dom.$elem.val(e)},e.Autocompleter.prototype.getValue=function(e){if(this.options.useDelimiter){var t=this.getDelimiterOffsets();return e.substring(t.start,t.end).trim()}return e},e.Autocompleter.prototype.getDelimiterOffsets=function(){var e=this.dom.$elem.val();if(this.options.useDelimiter){var t=e.substring(0,this.getCaret().start).lastIndexOf(this.options.delimiterChar)+1,n=e.substring(this.getCaret().start).indexOf(this.options.delimiterChar);-1==n&&(n=e.length),n+=this.getCaret().start}else t=0,n=e.length;return{start:t,end:n}}}(n.n(i)())},22862:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);var jqueryVendor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20615),jqueryVendor__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jqueryVendor__WEBPACK_IMPORTED_MODULE_0__),_canLog=!0;function _log(e,t){if(_canLog){var n=Array.prototype.slice.apply(arguments,[1]),i=new Date,o=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();n[0]=o+" - "+n[0];try{switch(e){case"info":window.console.info.apply(window.console,n);break;case"warn":window.console.warn.apply(window.console,n);break;default:window.console.log.apply(window.console,n)}}catch(e){window.console?-2146827850===e.number&&window.console.log(n.join(", ")):_canLog=!1}}}function logMsg(e){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}var getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;(function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(e){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(e)}function noop(){}function offsetString(e){return 0===e?"":e>0?"+"+e:""+e}function _checkBrowser(){var e,t;return t={},(e=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent)).browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),t}function versionCompare(e,t){var n,i,o,a=(""+e).split("."),s=(""+t).split("."),r=Math.min(a.length,s.length);for(o=0;o<r;o++)if(n=parseInt(a[o],10),i=parseInt(s[o],10),isNaN(n)&&(n=a[o]),isNaN(i)&&(i=s[o]),n!=i)return n>i?1:n<i?-1:NaN;return a.length===s.length?0:a.length<s.length?-1:1}var BROWSER=_checkBrowser(),jquerySupports={positionMyOfs:versionCompare($.ui.version,"1.9")>=0},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(e,t,n){this.parent=e,this.tree=t,"string"==typeof n&&(n={title:n}),null==n.key?n.key="_"+t._nodeCount++:n.key=""+n.key,this.data=$.extend({},$.ui.dynatree.nodedatadefaults,n),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(e,t){var n,i=$.extend({},this.data);if(i.activate=this.tree.activeNode===this,i.focus=this.tree.focusNode===this,i.expand=this.bExpanded,i.select=this.bSelected,t&&t(i),e&&this.childList){i.children=[];for(var o=0,a=this.childList.length;o<a;o++)(n=this.childList[o]).isStatusNode()||i.children.push(n.toDict(!0,t))}else delete i.children;return i},fromDict:function(e){var t=e.children;if(void 0===t)return this.data=$.extend(this.data,e),void this.render();(e=$.extend({},e)).children=void 0,this.data=$.extend(this.data,e),this.removeChildren(),this.addChild(t)},_getInnerHtml:function(){var e=this.tree,t=e.options,n=e.cache,i=this.getLevel(),o=this.data,a="";i<t.minExpandLevel?i>1&&(a+=n.tagConnector):!1!==this.hasChildren()?a+=n.tagExpander:a+=n.tagConnector,t.checkbox&&!0!==o.hideCheckbox&&!o.isStatusNode&&(a+=n.tagCheckbox),o.icon?a+="<img src='"+("/"===o.icon.charAt(0)?o.icon:t.imagePath+o.icon)+"' alt='' />":!1===o.icon||(o.iconClass?a+="<span class=' "+o.iconClass+"'></span>":a+=n.tagNodeIcon);var s="";if(t.onCustomRender&&(s=t.onCustomRender.call(e,this)||""),!s){var r=o.tooltip?' title="'+o.tooltip.replace(/\"/g,"&quot;")+'"':"",l=o.href||"#";s=t.noLink||o.noLink?'<span style="display:inline-block;" class="'+t.classNames.title+'"'+r+">"+o.title+"</span>":'<a href="'+l+'" class="'+t.classNames.title+'"'+r+">"+o.title+"</a>"}return a+=s},_fixOrder:function(){var e=this.childList;if(e&&this.ul)for(var t=this.ul.firstChild,n=0,i=e.length-1;n<i;n++){var o=e[n],a=t.dtnode;o!==a?(this.tree.logDebug("_fixOrder: mismatch at index "+n+": "+o+" != "+a),this.ul.insertBefore(o.li,a.li)):t=t.nextSibling}},render:function(e,t){var n=this.tree,i=this.parent,o=this.data,a=n.options,s=a.classNames,r=this.isLastSibling(),l=!1;if(i||this.ul){if(i){this.li||(l=!0,this.li=document.createElement("li"),this.li.dtnode=this,o.key&&a.generateIds&&(this.li.id=a.idPrefix+o.key),this.span=document.createElement("span"),this.span.className=s.title,this.li.appendChild(this.span),i.ul||(i.ul=document.createElement("ul"),i.ul.style.display="none",i.li.appendChild(i.ul)),i.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var d=[];d.push(s.node),o.isFolder&&d.push(s.folder),this.bExpanded&&d.push(s.expanded),!1!==this.hasChildren()&&d.push(s.hasChildren),o.isLazy&&null===this.childList&&d.push(s.lazy),r&&d.push(s.lastsib),this.bSelected&&d.push(s.selected),this.hasSubSel&&d.push(s.partsel),n.activeNode===this&&d.push(s.active),o.addClass&&d.push(o.addClass),d.push(s.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(o.isLazy&&null===this.childList?"d":"")+(r?"l":"")),d.push(s.combinedIconPrefix+(this.bExpanded?"e":"c")+(o.isFolder?"f":"")),this.span.className=d.join(" "),this.li.className=r?s.lastsib:"",l&&a.onCreate&&a.onCreate.call(n,this,this.span),a.onRender&&a.onRender.call(n,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),a.minExpandLevel>1?this.ul.className=s.container+" "+s.noConnector:this.ul.className=s.container;if((this.bExpanded||!0===t)&&this.childList){for(var c=0,u=this.childList.length;c<u;c++)this.childList[c].render(!1,t);this._fixOrder()}if(this.ul){var h="none"===this.ul.style.display,p=!!this.bExpanded;if(e&&a.fx&&h===p){var f=a.fx.duration||200;$(this.ul).animate(a.fx,f)}else this.ul.style.display=this.bExpanded||!i?"":"none"}},getKeyPath:function(e){var t=[],n=this.tree.options.keyPathSeparator;return this.visitParents((function(e){e.parent&&t.unshift(e.data.key)}),!e),n+t.join(n)},getParent:function(){return this.parent},getChildren:function(){if(void 0!==this.hasChildren())return this.childList},hasChildren:function(){if(this.data.isLazy){if(null===this.childList||void 0===this.childList)return;if(0===this.childList.length)return!1;if(1===this.childList.length&&this.childList[0].isStatusNode())return;return!0}return!!this.childList},isFirstSibling:function(){var e=this.parent;return!e||e.childList[0]===this},isLastSibling:function(){var e=this.parent;return!e||e.childList[e.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=1,n=e.length;t<n;t++)if(e[t]===this)return e[t-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=0,n=e.length-1;t<n;t++)if(e[t]===this)return e[t+1];return null},isStatusNode:function(){return!0===this.data.isStatusNode},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},countChildren:function(){var e=this.childList;if(!e)return 0;for(var t=e.length,n=0,i=t;n<i;n++){t+=e[n].countChildren()}return t},sortChildren:function(e,t){var n=this.childList;if(n){if(e=e||function(e,t){var n=e.data.title.toLowerCase(),i=t.data.title.toLowerCase();return n===i?0:n>i?1:-1},n.sort(e),t)for(var i=0,o=n.length;i<o;i++)n[i].childList&&n[i].sortChildren(e,"$norender$");"$norender$"!==t&&this.render()}},_setStatusNode:function(e){var t=this.childList?this.childList[0]:null;if(e)t?(e.isStatusNode=!0,e.key="_statusNode",t.data=e,t.render()):(e.isStatusNode=!0,e.key="_statusNode",t=this.addChild(e));else if(t&&t.isStatusNode()){try{this.ul&&(this.ul.removeChild(t.li),t.li=null)}catch(e){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(e,t){var n=t&&t.tooltip?t.tooltip:null,i=t&&t.info?" ("+t.info+")":"";switch(e){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+i,tooltip:n,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+i,tooltip:n,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+e+"'."}},_parentList:function(e,t){for(var n=[],i=t?this:this.parent;i;)(e||i.parent)&&n.unshift(i),i=i.parent;return n},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},_getTypeForOuterNodeEvent:function(e){var t=this.tree.options.classNames,n=e.target;if(n.className.indexOf(t.node)<0)return null;for(var i=e.pageX-n.offsetLeft,o=e.pageY-n.offsetTop,a=0,s=n.childNodes.length;a<s;a++){var r=n.childNodes[a],l=r.offsetLeft-n.offsetLeft,d=r.offsetTop-n.offsetTop,c=r.clientWidth,u=r.clientHeight;if(i>=l&&i<=l+c&&o>=d&&o<=d+u){if(r.className==t.title)return"title";if(r.className==t.expander)return"expander";if(r.className==t.checkbox||r.className==t.radio)return"checkbox";if(r.className==t.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(e){var t=e&&e.target?e.target.className:"",n=this.tree.options.classNames;return t.indexOf(n.title)>=0?"title":t.indexOf(n.expander)>=0?"expander":t.indexOf(n.checkbox)>=0||t.indexOf(n.radio)>=0?"checkbox":t.indexOf(n.nodeIcon)>=0?"icon":t.indexOf(n.empty)>=0||t.indexOf(n.vline)>=0||t.indexOf(n.connector)>=0?"prefix":t.indexOf(n.node)>=0?this._getTypeForOuterNodeEvent(e):null},isVisible:function(){for(var e=this._parentList(!0,!1),t=0,n=e.length;t<n;t++)if(!e[t].bExpanded)return!1;return!0},makeVisible:function(){for(var e=this._parentList(!0,!1),t=0,n=e.length;t<n;t++)e[t]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(e,t){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",e,t,this);var n=this.tree.options;if(!this.data.isStatusNode)if(e){if(t&&n.onQueryActivate&&!1===n.onQueryActivate.call(this.tree,e,this))return;if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}n.activeVisible&&this.makeVisible(),this.tree.activeNode=this,n.persist&&$.cookie(n.cookieId+"-active",this.data.key,n.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(n.classNames.active),t&&n.onActivate&&n.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(n.onQueryActivate&&!1===n.onQueryActivate.call(this.tree,!1,this))return;$(this.span).removeClass(n.classNames.active),n.persist&&$.cookie(n.cookieId+"-active","",n.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,t&&n.onDeactivate&&n.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var e=!0,t=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:e=!1,t=!0;break;case 3:e=t=!0}null===this.parent&&(t=!1),t&&(this.toggleExpand(),this.focus()),e&&this.activate()},_setSubSel:function(e){e?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var e;if(!this.hasChildren())return e=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),e;var t,n,i=this.childList,o=!0,a=!0;for(t=0,n=i.length;t<n;t++){var s=i[t]._updatePartSelectionState();!1!==s&&(a=!1),!0!==s&&(o=!1)}return e=!!o||!a&&void 0,this._setSubSel(void 0===e),this.bSelected=!0===e,e},_fixSelectionState:function(){var e,t,n;if(this.bSelected)for(this.visit((function(e){e.parent._setSubSel(!0),e.data.unselectable||e._select(!0,!1,!1)})),e=this.parent;e;){e._setSubSel(!0);var i=!0;for(t=0,n=e.childList.length;t<n;t++){var o=e.childList[t];if(!o.bSelected&&!o.data.isStatusNode&&!o.data.unselectable){i=!1;break}}i&&e._select(!0,!1,!1),e=e.parent}else for(this._setSubSel(!1),this.visit((function(e){e._setSubSel(!1),e._select(!1,!1,!1)})),e=this.parent;e;){e._select(!1,!1,!1);var a=!1;for(t=0,n=e.childList.length;t<n;t++)if(e.childList[t].bSelected||e.childList[t].hasSubSel){a=!0;break}e._setSubSel(a),e=e.parent}},_select:function(e,t,n){var i=this.tree.options;this.data.isStatusNode||this.bSelected!==e&&(t&&i.onQuerySelect&&!1===i.onQuerySelect.call(this.tree,e,this)||(1==i.selectMode&&e&&this.tree.visit((function(e){if(e.bSelected)return e._select(!1,!1,!1),!1})),this.bSelected=e,e?(i.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(i.classNames.selected),n&&3===i.selectMode&&this._fixSelectionState(),t&&i.onSelect&&i.onSelect.call(this.tree,!0,this)):(i.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(i.classNames.selected),n&&3===i.selectMode&&this._fixSelectionState(),t&&i.onSelect&&i.onSelect.call(this.tree,!1,this))))},select:function(e){return this.data.unselectable?this.bSelected:this._select(!1!==e,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var e=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===e.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(e){this.tree.logWarning("_loadContent: failed - %o",e),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(e,t){if(this.bExpanded!==e){this.tree.logDebug("dtnode._expand(%o) - %o",e,this);var n=this.tree.options;if(!e&&this.getLevel()<n.minExpandLevel)this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",e,this);else if(!n.onQueryExpand||!1!==n.onQueryExpand.call(this.tree,e,this)){this.bExpanded=e,n.persist&&(e?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var i=!(this.data.isLazy&&null===this.childList||this._isLoading||t);if(this.render(i),this.bExpanded&&this.parent&&n.autoCollapse)for(var o=this._parentList(!1,!0),a=0,s=o.length;a<s;a++)o[a].collapseSiblings();n.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),e&&this.data.isLazy&&null===this.childList&&!this._isLoading?this._loadContent():n.onExpand&&n.onExpand.call(this.tree,e,this)}}else this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",e,this)},isExpanded:function(){return this.bExpanded},expand:function(e){e=!1!==e,(this.childList||this.data.isLazy||!e)&&(null!==this.parent||e)&&this._expand(e)},scheduleAction:function(e,t){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var n=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout((function(){n.tree.logDebug("setTimeout: trigger expand"),n.expand(!0)}),t);break;case"activate":this.tree.timer=setTimeout((function(){n.tree.logDebug("setTimeout: trigger activate"),n.activate()}),t);break;default:throw"Invalid mode "+e}this.tree.logDebug("setTimeout(%s, %s): %s",e,t,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var e=this.parent.childList,t=0,n=e.length;t<n;t++)e[t]!==this&&e[t].bExpanded&&e[t]._expand(!1)},_onClick:function(e){var t=this.getEventTargetType(e);if("expander"===t)this.toggleExpand(),this.focus();else if("checkbox"===t)this.toggleSelect(),this.focus();else{this._userActivate();var n=this.span.getElementsByTagName("a");if(!n[0])return!0;BROWSER.msie&&parseInt(BROWSER.version,10)<9||n[0].focus()}e.preventDefault()},_onDblClick:function(e){},_onKeydown:function(e){var t,n=!0;switch(e.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(t=this.getPrevSibling();t&&t.bExpanded&&t.childList;)t=t.childList[t.childList.length-1];!t&&this.parent&&this.parent.parent&&(t=this.parent),t&&t.focus();break;case 40:if(this.bExpanded&&this.childList)t=this.childList[0];else for(var i=this._parentList(!1,!0),o=i.length-1;o>=0&&!(t=i[o].getNextSibling());o--);t&&t.focus();break;default:n=!1}n&&e.preventDefault()},_onKeypress:function(e){},_onFocus:function(e){var t=this.tree.options;"blur"==e.type||"focusout"==e.type?(t.onBlur&&t.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(t.classNames.focused),this.tree.tnFocused=null,t.persist&&$.cookie(t.cookieId+"-focus","",t.cookie)):"focus"!=e.type&&"focusin"!=e.type||(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(t.classNames.focused)),this.tree.tnFocused=this,t.onFocus&&t.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(t.classNames.focused),t.persist&&$.cookie(t.cookieId+"-focus",this.data.key,t.cookie))},visit:function(e,t){var n=!0;if(!0===t&&(!1===(n=e(this))||"skip"===n))return n;if(this.childList)for(var i=0,o=this.childList.length;i<o&&!1!==(n=this.childList[i].visit(e,!0));i++);return n},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var n=this.parent;n;){if(!1===e(n))return!1;n=n.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(e){var t=this.childList;if(1===t.length){if(e!==t[0])throw"removeChild: invalid child";return this.removeChildren()}e===this.tree.activeNode&&e.deactivate(),this.tree.options.persist&&(e.bSelected&&this.tree.persistence.clearSelect(e.data.key),e.bExpanded&&this.tree.persistence.clearExpand(e.data.key)),e.removeChildren(!0),this.ul&&e.li&&this.ul.removeChild(e.li);for(var n=0,i=t.length;n<i;n++)if(t[n]===e){this.childList.splice(n,1);break}},removeChildren:function(e,t){this.tree.logDebug("%s.removeChildren(%o)",this,e);var n=this.tree,i=this.childList;if(i){for(var o=0,a=i.length;o<a;o++){var s=i[o];s!==n.activeNode||t||s.deactivate(),this.tree.options.persist&&!t&&(s.bSelected&&this.tree.persistence.clearSelect(s.data.key),s.bExpanded&&this.tree.persistence.clearExpand(s.data.key)),s.removeChildren(!0,t),this.ul&&s.li&&$("li",$(this.ul)).remove()}this.childList=null}e||(this._isLoading=!1,this.render())},setTitle:function(e){this.fromDict({title:e})},reload:function(e){throw"Use reloadChildren() instead"},reloadChildren:function(e){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(e){var t=this,n="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(n,(function(i,o,a){if(t.tree.$tree.unbind(n),t.tree.logDebug("loaded %o, %o, %o",i,o,a),o!==t)throw"got invalid load event";e.call(t.tree,o,a)}))}this.removeChildren(),this._loadContent()},_loadKeyPath:function(e,t){var n=this.tree;if(n.logDebug("%s._loadKeyPath(%s)",this,e),""===e)throw"Key path must not be empty";var i=e.split(n.options.keyPathSeparator);if(""===i[0])throw"Key path must be relative (don't start with '/')";var o=i.shift();if(this.childList)for(var a=0,s=this.childList.length;a<s;a++){var r=this.childList[a];if(r.data.key===o){if(0===i.length)t.call(n,r,"ok");else if(!r.data.isLazy||null!==r.childList&&void 0!==r.childList)t.call(n,r,"loaded"),r._loadKeyPath(i.join(n.options.keyPathSeparator),t);else{n.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,e,r);var l=this;r.reloadChildren((function(o,a){a?(n.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",o,e,o),t.call(n,r,"loaded"),o._loadKeyPath(i.join(n.options.keyPathSeparator),t)):(n.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",l,e),t.call(n,r,"error"))}))}return}}t.call(n,void 0,"notfound",o,0===i.length),n.logWarning("Node not found: "+o)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(e,t){var n=this.tree,i=n.options,o=n.persistence;if(e.parent=this,null===this.childList?this.childList=[]:t||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(i.classNames.lastsib),t){var a=$.inArray(t,this.childList);if(a<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(a,0,e)}else this.childList.push(e);var s=n.isInitializing();if(i.persist&&o.cookiesFound&&s?(o.activeKey===e.data.key&&(n.activeNode=e),o.focusedKey===e.data.key&&(n.focusNode=e),e.bExpanded=$.inArray(e.data.key,o.expandedKeyList)>=0,e.bSelected=$.inArray(e.data.key,o.selectedKeyList)>=0):(e.data.activate&&(n.activeNode=e,i.persist&&(o.activeKey=e.data.key)),e.data.focus&&(n.focusNode=e,i.persist&&(o.focusedKey=e.data.key)),e.bExpanded=!0===e.data.expand,e.bExpanded&&i.persist&&o.addExpand(e.data.key),e.bSelected=!0===e.data.select,e.bSelected&&i.persist&&o.addSelect(e.data.key)),i.minExpandLevel>=e.getLevel()&&(this.bExpanded=!0),e.bSelected&&3==i.selectMode)for(var r=this;r;)r.hasSubSel||r._setSubSel(!0),r=r.parent;return n.bEnableUpdate&&this.render(),e},addChild:function(e,t){if("string"==typeof e)throw"Invalid data type for "+e;if(e&&0!==e.length){if(e instanceof DynaTreeNode)return this._addChildNode(e,t);e.length||(e=[e]);for(var n=this.tree.enableUpdate(!1),i=null,o=0,a=e.length;o<a;o++){var s=e[o],r=this._addChildNode(new DynaTreeNode(this,this.tree,s),t);i||(i=r),s.children&&r.addChild(s.children,null)}return this.tree.enableUpdate(n),i}},append:function(e){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(e,null)},appendAjax:function(e){var t=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),e.debugLazyDelay){var n=e.debugLazyDelay;return e.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+n),void setTimeout((function(){t.appendAjax(e)}),n)}var i=e.success,o=e.error,a="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,s=$.extend({},this.tree.options.ajaxDefaults,e,{success:function(e,n,o){var s=t.tree.phase,r=t.tree.options;t.tree.phase="init",r.postProcess?e=r.postProcess.call(this,e,this.dataType):e&&e.hasOwnProperty("d")&&(e="string"==typeof e.d?$.parseJSON(e.d):e.d),$.isArray(e)&&0===e.length||t.addChild(e,null),t.tree.phase="postInit",i&&i.call(r,t,e,n),t.tree.logDebug("trigger "+a),t.tree.$tree.trigger(a,[t,!0]),t.tree.phase=s,t.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(e)&&0===e.length&&(t.childList=[],t.render())},error:function(e,n,i){t.tree.logWarning("appendAjax failed:",n,":\n",e,"\n",i),o&&o.call(s,t,e,n,i),t.tree.$tree.trigger(a,[t,!1]),t.setLazyNodeStatus(DTNodeStatus_Error,{info:n,tooltip:""+i})}});$.ajax(s)},move:function(e,t){var n;if(this!==e){if(!this.parent)throw"Cannot move system root";void 0!==t&&"over"!=t||(t="child");var i=this.parent,o="child"===t?e:e.parent;if(o.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if((n=$.inArray(this,this.parent.childList))<0)throw"Internal error";this.parent.childList.splice(n,1)}if(this.parent.ul&&this.li&&this.parent.ul.removeChild(this.li),this.parent=o,o.hasChildren())switch(t){case"child":o.childList.push(this);break;case"before":if((n=$.inArray(e,o.childList))<0)throw"Internal error";o.childList.splice(n,0,this);break;case"after":if((n=$.inArray(e,o.childList))<0)throw"Internal error";o.childList.splice(n+1,0,this);break;default:throw"Invalid mode "+t}else o.childList=[this];if(o.ul||(o.ul=document.createElement("ul"),o.ul.style.display="none",o.li&&o.li.appendChild(o.ul)),this.li&&o.ul.appendChild(this.li),this.tree!==e.tree)throw this.visit((function(t){t.tree=e.tree}),null,!0),"Not yet implemented.";i.isDescendantOf(o)||i.render(),o.isDescendantOf(i)||o.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(e,t){var n=new DynaTreeStatus(e,t);return n.read(),n.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(e,t){void 0===e&&(e=$.ui.dynatree.prototype.options.cookieId),t=$.extend({},$.ui.dynatree.prototype.options.cookie,t),this.cookieId=e,this.cookieOpts=t,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(e){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var e=$.cookie(this.cookieId+"-active");this.activeKey=e||"",e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-focus"),this.focusedKey=e||"",e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=e?e.split(","):[],e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-select"),this.selectedKeyList=e?e.split(","):[],e&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(e){$.inArray(e,this.expandedKeyList)<0&&(this.expandedKeyList.push(e),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(e){var t=$.inArray(e,this.expandedKeyList);t>=0&&(this.expandedKeyList.splice(t,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(e){$.inArray(e,this.selectedKeyList)<0&&(this.selectedKeyList.push(e),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(e){var t=$.inArray(e,this.selectedKeyList);t>=0&&(this.selectedKeyList.splice(t,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return!0===this.cookiesFound},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();function _initDragAndDrop(e){var t=e.options.dnd||null;t&&(t.onDragStart||t.onDrop)&&_registerDnd(),t&&t.onDragStart&&e.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!0===t.revert&&function(e){if(logMsg("draggable.revert(), dropped=",e),"boolean"==typeof e)return!e;var t=$.ui.ddmanager&&$.ui.ddmanager.current&&$.ui.ddmanager.current.helper;return t&&t.hasClass("dynatree-drop-reject")},scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(e){var t=$.ui.dynatree.getNode(e.target);return t?t.tree._onDragEvent("helper",t,null,e,null,null):"<div></div>"},start:function(e,t){return!!t.helper.data("dtSourceNode")}}),t&&t.onDrop&&e.$tree.droppable({addClasses:!1,tolerance:"pointer",greedy:!1})}DynaTree.version="@@Version",DynaTree.prototype={initialize:function(e){this.phase="init",this.$widget=e,this.options=e.options,this.$tree=e.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(e){this.$widget;var t=this.options,n=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==t.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),t.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),t.minExpandLevel=1),t.classNames!==$.ui.dynatree.prototype.options.classNames&&(t.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,t.classNames)),t.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(t.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,t.ajaxDefaults)),t.dnd!==$.ui.dynatree.prototype.options.dnd&&(t.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,t.dnd)),t.imagePath||$("script").each((function(){if(this.src.search(/.*dynatree[^\/]*\.js$/i)>=0)return this.src.indexOf("/")>=0?t.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":t.imagePath="skin/",n.logDebug("Guessing imagePath from '%s': '%s'",this.src,t.imagePath),!1})),this.persistence=new DynaTreeStatus(t.cookieId,t.cookie),t.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+t.classNames.empty+"'></span>",tagVline:"<span class='"+t.classNames.vline+"'></span>",tagExpander:"<span class='"+t.classNames.expander+"'></span>",tagConnector:"<span class='"+t.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+t.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+t.classNames.checkbox+"'></span>",lastentry:void 0},(t.children||t.initAjax&&t.initAjax.url||t.initId)&&$(this.divTree).empty();var i=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var o=this.tnRoot,a=t.persist&&this.persistence.isReloading(),s=!1,r=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),t.children?o.addChild(t.children):t.initAjax&&t.initAjax.url?(s=!0,o.data.isLazy=!0,this._reloadAjax(e)):t.initId?this._createFromTag(o,$("#"+t.initId)):(this._createFromTag(o,i),i.remove()),this._checkConsistency(),s||3!=t.selectMode||o._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(r),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",t.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),s||(t.onPostInit&&t.onPostInit.call(this,a,!1),e&&e.call(this,"ok")),this.phase="idle"},_reloadAjax:function(e){var t=this.options;if(!t.initAjax||!t.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var n=this.persistence,i=$.extend({},t.initAjax);i.addActiveKey&&(i.data.activeKey=n.activeKey),i.addFocusedKey&&(i.data.focusedKey=n.focusedKey),i.addExpandedKeyList&&(i.data.expandedKeyList=n.expandedKeyList.join(",")),i.addSelectedKeyList&&(i.data.selectedKeyList=n.selectedKeyList.join(",")),i.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),i.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var o=n.isReloading();i.success=function(n,i,a){3==t.selectMode&&n.tree.tnRoot._updatePartSelectionState(),t.onPostInit&&t.onPostInit.call(n.tree,o,!1),e&&e.call(n.tree,"ok")},i.error=function(n,i,a,s){t.onPostInit&&t.onPostInit.call(n.tree,o,!0,i,a,s),e&&e.call(n.tree,"error",i,a,s)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(i)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(e){var t=this.tnRoot.toDict(!0);return e?t:t.children},serializeArray:function(e){for(var t=this.getSelectedNodes(e),n=this.$tree.attr("name")||this.$tree.attr("id"),i=[],o=0,a=t.length;o<a;o++)i.push({name:n,value:t[o].data.key});return i},getPersistData:function(){return this.persistence.toDict()},logDebug:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(e){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(e){this._load(e)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(e){var t=document.getElementById(this.options.idPrefix+e);if(t)return t.dtnode?t.dtnode:null;var n=null;return this.visit((function(t){if(t.data.key===e)return n=t,!1}),!0),n},getActiveNode:function(){return this.activeNode},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.activate(),e&&t.focus())},getSelectedNodes:function(e){var t=[];return this.tnRoot.visit((function(n){if(n.bSelected&&(t.push(n),!0===e))return"skip"})),t},activateKey:function(e){var t=null===e?null:this.getNodeByKey(e);return t?(t.focus(),t.activate(),t):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(e,t){var n=e.split(this.options.keyPathSeparator);return""===n[0]&&n.shift(),n[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),n.shift()),e=n.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(e,t)},selectKey:function(e,t){var n=this.getNodeByKey(e);return n?(n.select(t),n):null},enableUpdate:function(e){return this.bEnableUpdate==e?e:(this.bEnableUpdate=e,e&&this.redraw(),!e)},count:function(){return this.tnRoot.countChildren()},visit:function(e,t){return this.tnRoot.visit(e,t)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each((function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=iPos>=0?$.trim(title.substring(0,iPos)):$.trim(title)}var data={title,tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=""+$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)}))},_checkConsistency:function(){},_setDndStatus:function(e,t,n,i,o){var a,s=e?$(e.span):null,r=$(t.span),l=0,d="center";if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===i||"before"===i||"over"===i){switch(i){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),d="top";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),d="bottom";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),r.addClass("dynatree-drop-target"),l=8}a=jquerySupports.positionMyOfs?{my:"left"+offsetString(l)+" center",at:"left "+d,of:r}:{my:"left center",at:"left "+d,of:r,offset:l+" 0"},this.$dndMarker.show().position(a)}else r.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===i?r.addClass("dynatree-drop-after"):r.removeClass("dynatree-drop-after"),"before"===i?r.addClass("dynatree-drop-before"):r.removeClass("dynatree-drop-before"),!0===o?(s&&s.addClass("dynatree-drop-accept"),r.addClass("dynatree-drop-accept"),n.addClass("dynatree-drop-accept")):(s&&s.removeClass("dynatree-drop-accept"),r.removeClass("dynatree-drop-accept"),n.removeClass("dynatree-drop-accept")),!1===o?(s&&s.addClass("dynatree-drop-reject"),r.addClass("dynatree-drop-reject"),n.addClass("dynatree-drop-reject")):(s&&s.removeClass("dynatree-drop-reject"),r.removeClass("dynatree-drop-reject"),n.removeClass("dynatree-drop-reject"))},_onDragEvent:function(e,t,n,i,o,a){var s,r,l,d=this.options.dnd,c=null,u=$(t.span);switch(e){case"helper":var h=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append(u.find(".dynatree-title").clone());$("ul.dynatree-container",t.tree.divTree).append(h),h.data("dtSourceNode",t),c=h;break;case"start":t.isStatusNode()?c=!1:d.onDragStart&&(c=d.onDragStart(t)),!1===c?(this.logDebug("tree.onDragStart() cancelled"),o.helper.trigger("mouseup"),o.helper.hide()):u.addClass("dynatree-drag-source");break;case"enter":c=!!(l=d.onDragEnter?d.onDragEnter(t,n,o,a):null)&&($.isArray(l)?{over:$.inArray("over",l)>=0,before:$.inArray("before",l)>=0,after:$.inArray("after",l)>=0}:{over:!0===l||"over"===l,before:!0===l||"before"===l,after:!0===l||"after"===l}),o.helper.data("enterResponse",c);break;case"over":if(s=null,!1===(r=o.helper.data("enterResponse")));else if("string"==typeof r)s=r;else{var p=u.offset(),f={x:i.pageX-p.left,y:i.pageY-p.top},m={x:f.x/u.width(),y:f.y/u.height()};r.after&&m.y>.75||!r.over&&r.after&&m.y>.5?s="after":r.before&&m.y<=.25||!r.over&&r.before&&m.y<=.5?s="before":r.over&&(s="over"),d.preventVoidMoves&&(t===n||"before"===s&&n&&t===n.getNextSibling()||"after"===s&&n&&t===n.getPrevSibling()||"over"===s&&n&&n.parent===t&&n.isLastSibling())&&(s=null),o.helper.data("hitMode",s)}"over"===s&&d.autoExpandMS&&!1!==t.hasChildren()&&!t.bExpanded&&t.scheduleAction("expand",d.autoExpandMS),s&&d.onDragOver&&("over"!==(c=d.onDragOver(t,n,s,o,a))&&"before"!==c&&"after"!==c||(s=c)),this._setDndStatus(n,t,o.helper,s,!1!==c&&null!==s);break;case"drop":var _=o.helper.hasClass("dynatree-drop-reject");(s=o.helper.data("hitMode"))&&d.onDrop&&!_&&d.onDrop(t,n,s,o,a);break;case"leave":t.scheduleAction("cancel"),o.helper.data("enterResponse",null),o.helper.data("hitMode",null),this._setDndStatus(n,t,o.helper,"out",void 0),d.onDragLeave&&d.onDragLeave(t,n,o,a);break;case"stop":u.removeClass("dynatree-drag-source"),d.onDragStop&&d.onDragStop(t);break;default:throw"Unsupported drag event: "+e}return c},cancelDrag:function(){var e=$.ui.ddmanager.current;e&&e.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){if(versionCompare($.ui.version,"1.8")<0)return this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create();this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){this.options.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var e="click.dynatree dblclick.dynatree";function t(e){e=$.event.fix(e||window.event);var t=$.ui.dynatree.getNode(e.target);return!!t&&t._onFocus(e)}this.options.keyboard&&(e+=" keypress.dynatree keydown.dynatree"),this.element.bind(e,(function(e){var t=$.ui.dynatree.getNode(e.target);if(!t)return!0;var n=t.tree,i=n.options;n.logDebug("event(%s): dtnode: %s",e.type,t);var o=n.phase;n.phase="userEvent";try{switch(e.type){case"click":return(!i.onClick||!1!==i.onClick.call(n,t,e))&&t._onClick(e);case"dblclick":return(!i.onDblClick||!1!==i.onDblClick.call(n,t,e))&&t._onDblClick(e);case"keydown":return(!i.onKeydown||!1!==i.onKeydown.call(n,t,e))&&t._onKeydown(e);case"keypress":return(!i.onKeypress||!1!==i.onKeypress.call(n,t,e))&&t._onKeypress(e)}}catch(i){n.logWarning("bind(%o): dtnode: %o, error: %o",e,t,i)}finally{n.phase=o}}));var n=this.tree.divTree;n.addEventListener?(n.addEventListener("focus",t,!0),n.addEventListener("blur",t,!0)):n.onfocusin=n.onfocusout=t},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),versionCompare($.ui.version,"1.8")<0&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.extend($.ui.dynatree,{version:"1.2.8",buildType:"release",_DynaTreeClass:DynaTree,_DynaTreeNodeClass:DynaTreeNode,getNode:function(e){if(e instanceof DynaTreeNode)return e;for(void 0!==e.selector&&(e=e[0]);e;){if(e.dtnode)return e.dtnode;e=e.parentNode}return null},getPersistData:DynaTreeStatus._getTreePersistData}),$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,revert:!1,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",radio:"dynatree-radio",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:void 0},versionCompare($.ui.version,"1.8")<0&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(e,t){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null;if(i)return n.offset.click.top=-2,n.offset.click.left=16,i.tree._onDragEvent("start",i,null,e,t,n)},drag:function(e,t){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null,o=t.helper.data("dtTargetNode")||null,a=$.ui.dynatree.getNode(e.target);if(e.target&&!a&&$(e.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0)return;t.helper.data("dtTargetNode",a),o&&o!==a&&o.tree._onDragEvent("leave",o,i,e,t,n),a&&a.tree.options.dnd.onDrop&&(a===o?a.tree._onDragEvent("over",a,i,e,t,n):a.tree._onDragEvent("enter",a,i,e,t,n))},stop:function(e,t){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null,o=t.helper.data("dtTargetNode")||null,a="mouseup"==e.type&&1==e.which;logMsg("draggable-connectToDynatree.stop: targetNode(from event): %s, dtTargetNode: %s",o,t.helper.data("dtTargetNode")),a||logMsg("Drag was cancelled"),o&&(a&&o.tree._onDragEvent("drop",o,i,e,t,n),o.tree._onDragEvent("leave",o,i,e,t,n)),i&&i.tree._onDragEvent("stop",i,null,e,t,n)}}),didRegisterDnd=!0)}})(jqueryVendor__WEBPACK_IMPORTED_MODULE_0___default())},58900:(e,t,n)=>{"use strict";n.r(t);var i=n(20615);!function(e){e.fn.drag=function(t,n,i){var o="string"==typeof t?t:"",a=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==o.indexOf("drag")&&(o="drag"+o),i=(t==a?n:i)||{},a?this.bind(o,i,a):this.trigger(o)};var t=e.event,n=t.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,i.datakey),o=t.data||{};n.related+=1,e.each(i.defaults,(function(e,t){void 0!==o[e]&&(n[e]=o[e])}))},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){if(!e.data(this,i.datakey)){var n=e.extend({related:0},i.defaults);e.data(this,i.datakey,n),t.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(e.data(this,i.datakey)||{}).related||(e.removeData(this,i.datakey),t.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(o){if(!i.touched){var a,s=o.data;if(!(0!=o.which&&s.which>0&&o.which!=s.which)&&!e(o.target).is(s.not)&&(!s.handle||e(o.target).closest(s.handle,o.currentTarget).length)&&(i.touched="touchstart"==o.type?this:null,s.propagates=1,s.mousedown=this,s.interactions=[i.interaction(this,s)],s.target=o.target,s.pageX=o.pageX,s.pageY=o.pageY,s.dragging=null,a=i.hijack(o,"draginit",s),s.propagates))return(a=i.flatten(a))&&a.length&&(s.interactions=[],e.each(a,(function(){s.interactions.push(i.interaction(this,s))}))),s.propagates=s.interactions.length,!1!==s.drop&&n.drop&&n.drop.handler(o,s),i.textselect(!1),i.touched?t.add(i.touched,"touchmove touchend",i.handler,s):t.add(document,"mousemove mouseup",i.handler,s),!(!i.touched||s.live)&&void 0}},interaction:function(t,n){var o=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new i.callback,droppable:[],offset:o}},handler:function(o){var a=o.data;switch(o.type){case!a.dragging&&"touchmove":o.preventDefault();case!a.dragging&&"mousemove":if(Math.pow(o.pageX-a.pageX,2)+Math.pow(o.pageY-a.pageY,2)<Math.pow(a.distance,2))break;o.target=a.target,i.hijack(o,"dragstart",a),a.propagates&&(a.dragging=!0);case"touchmove":o.preventDefault();case"mousemove":if(a.dragging){if(i.hijack(o,"drag",a),a.propagates){!1!==a.drop&&n.drop&&n.drop.handler(o,a);break}o.type="mouseup"}default:i.touched?t.remove(i.touched,"touchmove touchend",i.handler):t.remove(document,"mousemove mouseup",i.handler),a.dragging?(!1!==a.drop&&n.drop&&n.drop.handler(o,a),i.hijack(o,"dragend",a)):i.hijack(o,"dragclickonly",a),i.textselect(!0),!1===a.click&&a.dragging&&e.data(a.mousedown,"suppress.click",(new Date).getTime()+5),a.dragging=i.touched=!1}},hijack:function(n,o,a,s,r){if(a){var l,d,c,u={event:n.originalEvent,type:n.type},h=o.indexOf("drop")?"drag":"drop",p=s||0,f=isNaN(s)?a.interactions.length:s;n.type=o,n.originalEvent=null,a.results=[];do{if(d=a.interactions[p]){if("dragend"!==o&&d.cancelled)continue;c=i.properties(n,a,d),d.results=[],e(r||d[h]||a.droppable).each((function(s,r){if(c.target=r,n.isPropagationStopped=function(){return!1},!1===(l=r?t.dispatch.call(r,n,c):null)?("drag"==h&&(d.cancelled=!0,a.propagates-=1),"drop"==o&&(d[h][s]=null)):"dropinit"==o&&d.droppable.push(i.element(l)||r),"dragstart"==o&&(d.proxy=e(i.element(l)||d.drag)[0]),d.results.push(l),delete n.result,"dropinit"!==o)return l})),a.results[p]=i.flatten(d.results),"dropinit"==o&&(d.droppable=i.flatten(d.droppable)),"dragstart"!=o||d.cancelled||c.update()}}while(++p<f);return n.type=u.type,n.originalEvent=u.event,i.flatten(a.results)}},properties:function(e,t,n){var o=n.callback;return o.drag=n.drag,o.proxy=n.proxy||n.drag,o.startX=t.pageX,o.startY=t.pageY,o.deltaX=e.pageX-t.pageX,o.deltaY=e.pageY-t.pageY,o.originalX=n.offset.left,o.originalY=n.offset.top,o.offsetX=o.originalX+o.deltaX,o.offsetY=o.originalY+o.deltaY,o.drop=i.flatten((n.drop||[]).slice()),o.available=i.flatten((n.droppable||[]).slice()),o.update(),o},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,(function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?i.flatten(t):t}))},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,(function(e){n.drop.locate(this,e)}))}};var o=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return o.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var a=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&e.each(a.props,(function(e,n){t[n]=i[n]}))}return t}};n.draginit=n.dragstart=n.dragend=i}(n.n(i)())},62268:(e,t,n)=>{"use strict";n.r(t);var i=n(20615);!function(e){e.fn.drop=function(t,n,i){var o="string"==typeof t?t:"",a=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==o.indexOf("drop")&&(o="drop"+o),i=(t==a?n:i)||{},a?this.bind(o,i,a):this.trigger(o)},e.drop=function(t){t=t||{},n.multi=!0===t.multi?1/0:!1===t.multi?1:isNaN(t.multi)?n.multi:t.multi,n.delay=t.delay||n.delay,n.tolerance=e.isFunction(t.tolerance)?t.tolerance:null===t.tolerance?null:n.tolerance,n.mode=t.mode||n.mode||"intersect"};var t=e.event.special,n=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){e.data(this,n.datakey).related+=1},remove:function(){e.data(this,n.datakey).related-=1},setup:function(){if(!e.data(this,n.datakey)){e.data(this,n.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),n.targets.push(this)}},teardown:function(){if(!(e.data(this,n.datakey)||{}).related){e.removeData(this,n.datakey);var t=this;n.targets=e.grep(n.targets,(function(e){return e!==t}))}},handler:function(i,o){var a;if(o)switch(i.type){case"mousedown":case"touchstart":a=e(n.targets),"string"==typeof o.drop&&(a=a.filter(o.drop)),a.each((function(){var t=e.data(this,n.datakey);t.active=[],t.anyactive=0,t.winner=0})),o.droppable=a,t.drag.hijack(i,"dropinit",o);break;case"mousemove":case"touchmove":n.event=i,n.timer||n.tolerate(o);break;case"mouseup":case"touchend":n.timer=clearTimeout(n.timer),o.propagates&&(t.drag.hijack(i,"drop",o),t.drag.hijack(i,"dropend",o))}},locate:function(t,i){var o=e.data(t,n.datakey),a=e(t),s=a.offset()||{},r=a.outerHeight(),l=a.outerWidth(),d={elem:t,width:l,height:r,top:s.top,left:s.left,right:s.left+l,bottom:s.top+r};return o&&(o.location=d,o.index=i,o.elem=t),d},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,n){return this.contains(n,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,n){return Math.max(0,Math.min(n.bottom,t.bottom)-Math.max(n.top,t.top))*Math.max(0,Math.min(n.right,t.right)-Math.max(n.left,t.left))},fit:function(e,t,n){return this.contains(n,t)?1:0},middle:function(e,t,n){return this.contains(n,[t.left+.5*t.width,t.top+.5*t.height])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(i){var o,a,s,r,l,d,c,u,h=0,p=i.interactions.length,f=[n.event.pageX,n.event.pageY],m=n.tolerance||n.modes[n.mode];do{if(u=i.interactions[h]){if(!u)return;u.drop=[],l=[],d=u.droppable.length,m&&(s=n.locate(u.proxy)),o=0;do{if(c=u.droppable[o]){if(!(a=(r=e.data(c,n.datakey)).location))continue;r.winner=m?m.call(n,n.event,s,a):n.contains(a,f)?1:0,l.push(r)}}while(++o<d);l.sort(n.sort),o=0;do{(r=l[o])&&(r.winner&&u.drop.length<n.multi?(r.active[h]||r.anyactive||(!1!==t.drag.hijack(n.event,"dropstart",i,h,r.elem)[0]?(r.active[h]=1,r.anyactive+=1):r.winner=0),r.winner&&u.drop.push(r.elem)):r.active[h]&&1==r.anyactive&&(t.drag.hijack(n.event,"dropend",i,h,r.elem),r.active[h]=0,r.anyactive-=1))}while(++o<d)}}while(++h<p);n.last&&f[0]==n.last.pageX&&f[1]==n.last.pageY?delete n.timer:n.timer=setTimeout((function(){n.tolerate(i)}),n.delay),n.last=n.event}};t.dropinit=t.dropstart=t.dropend=n}(n.n(i)())},80510:(e,t,n)=>{"use strict";n.r(t);var i=n(20615);!function(e){e.fn._hover=e.fn.hover,e.fn.hover=function(e,t,n){return n&&this.bind("hoverstart",e),t&&this.bind("hoverend",n||t),e?this.bind("hover",n?t:e):this.trigger("hover")};var t=e.event.special.hover={delay:100,speed:100,setup:function(i){i=e.extend({speed:t.speed,delay:t.delay,hovered:0},i||{}),e.event.add(this,"mouseenter mouseleave",n,i)},teardown:function(){e.event.remove(this,"mouseenter mouseleave",n)}};function n(t){var i=t.data||t;switch(t.type){case"mouseenter":i.dist2=0,i.event=t,t.type="hoverstart",!1!==e.event.dispatch.call(this,t)&&(i.elem=this,e.event.add(this,"mousemove",n,i),i.timer=setTimeout(o,i.delay));break;case"mousemove":i.dist2+=Math.pow(t.pageX-i.event.pageX,2)+Math.pow(t.pageY-i.event.pageY,2),i.event=t;break;case"mouseleave":clearTimeout(i.timer),i.hovered?(t.type="hoverend",e.event.dispatch.call(this,t),i.hovered--):e.event.remove(i.elem,"mousemove",n);break;default:i.dist2<=Math.pow(i.speed*(i.delay/1e3),2)?(e.event.remove(i.elem,"mousemove",n),i.event.type="hover",!1!==e.event.dispatch.call(i.elem,i.event)&&i.hovered++):i.timer=setTimeout(o,i.delay),i.dist2=0}function o(){n(i)}}}(n.n(i)())},77766:(e,t,n)=>{"use strict";n.r(t);var i=n(20615),o=n.n(i);!function(e){var t={};t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData;var n=!!e.fn.prop;function i(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function o(t){var n=t.target,i=e(n);if(!i.is("[type=submit],[type=image]")){var o=i.closest("[type=submit]");if(0===o.length)return;n=o[0]}var a=this;if(a.clk=n,"image"==n.type)if(void 0!==t.offsetX)a.clk_x=t.offsetX,a.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var s=i.offset();a.clk_x=t.pageX-s.left,a.clk_y=t.pageY-s.top}else a.clk_x=t.pageX-n.offsetLeft,a.clk_y=t.pageY-n.offsetTop;setTimeout((function(){a.clk=a.clk_x=a.clk_y=null}),100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(i){if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var o,s,r,l=this;"function"==typeof i?i={success:i}:void 0===i&&(i={}),o=i.type||this.attr2("method"),(r=(r="string"==typeof(s=i.url||this.attr2("action"))?e.trim(s):"")||window.location.href||"")&&(r=(r.match(/^([^#]+)/)||[])[1]),i=e.extend(!0,{url:r,success:e.ajaxSettings.success,type:o||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var d={};if(this.trigger("form-pre-serialize",[this,i,d]),d.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&!1===i.beforeSerialize(this,i))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var c=i.traditional;void 0===c&&(c=e.ajaxSettings.traditional);var u,h=[],p=this.formToArray(i.semantic,h);if(i.data&&(i.extraData=i.data,u=e.param(i.data,c)),i.beforeSubmit&&!1===i.beforeSubmit(p,this,i))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,i,d]),d.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=e.param(p,c);u&&(f=f?f+"&"+u:u),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+f,i.data=null):i.data=f;var m=[];if(i.resetForm&&m.push((function(){l.resetForm()})),i.clearForm&&m.push((function(){l.clearForm(i.includeHidden)})),!i.dataType&&i.target){var _=i.success||function(){};m.push((function(t){var n=i.replaceTarget?"replaceWith":"html";e(i.target)[n](t).each(_,arguments)}))}else i.success&&m.push(i.success);if(i.success=function(e,t,n){for(var o=i.context||this,a=0,s=m.length;a<s;a++)m[a].apply(o,[e,t,n||l,l])},i.error){var v=i.error;i.error=function(e,t,n){var o=i.context||this;v.apply(o,[e,t,n,l])}}if(i.complete){var g=i.complete;i.complete=function(e,t){var n=i.context||this;g.apply(n,[e,t,l])}}var y=e("input[type=file]:enabled",this).filter((function(){return""!==e(this).val()})).length>0,b="multipart/form-data",w=l.attr("enctype")==b||l.attr("encoding")==b,k=t.fileapi&&t.formdata;a("fileAPI :"+k);var C,x=(y||w)&&!k;!1!==i.iframe&&(i.iframe||x)?i.closeKeepAlive?e.get(i.closeKeepAlive,(function(){C=M(p)})):C=M(p):C=(y||w)&&k?function(t){for(var n=new FormData,a=0;a<t.length;a++)n.append(t[a].name,t[a].value);if(i.extraData){var s=function(t){var n,o,a=e.param(t,i.traditional).split("&"),s=a.length,r=[];for(n=0;n<s;n++)a[n]=a[n].replace(/\+/g," "),o=a[n].split("="),r.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return r}(i.extraData);for(a=0;a<s.length;a++)s[a]&&n.append(s[a][0],s[a][1])}i.data=null;var r=e.extend(!0,{},e.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:o||"POST"});i.uploadProgress&&(r.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",(function(e){var t=0,n=e.loaded||e.position,o=e.total;e.lengthComputable&&(t=Math.ceil(n/o*100)),i.uploadProgress(e,n,o,t)}),!1),t});r.data=null;var l=r.beforeSend;return r.beforeSend=function(e,t){i.formData?t.data=i.formData:t.data=n,l&&l.call(this,e,t)},e.ajax(r)}(p):e.ajax(i),l.removeData("jqxhr").data("jqxhr",C);for(var S=0;S<h.length;S++)h[S]=null;return this.trigger("form-submit-notify",[this,i]),this;function M(t){var s,r,d,c,u,p,f,m,_,v,g,y,b=l[0],w=e.Deferred();if(w.abort=function(e){m.abort(e)},t)for(r=0;r<h.length;r++)s=e(h[r]),n?s.prop("disabled",!1):s.removeAttr("disabled");if((d=e.extend(!0,{},e.ajaxSettings,i)).context=d.context||d,u="jqFormIO"+(new Date).getTime(),d.iframeTarget?(v=(p=e(d.iframeTarget)).attr2("name"))?u=v:p.attr2("name",u):(p=e('<iframe name="'+u+'" src="'+d.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),f=p[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";a("aborting upload... "+n),this.aborted=1;try{f.contentWindow.document.execCommand&&f.contentWindow.document.execCommand("Stop")}catch(e){}p.attr("src",d.iframeSrc),m.error=n,d.error&&d.error.call(d.context,m,n,t),c&&e.event.trigger("ajaxError",[m,d,n]),d.complete&&d.complete.call(d.context,m,n)}},(c=d.global)&&0==e.active++&&e.event.trigger("ajaxStart"),c&&e.event.trigger("ajaxSend",[m,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,m,d))return d.global&&e.active--,w.reject(),w;if(m.aborted)return w.reject(),w;(_=b.clk)&&(v=_.name)&&!_.disabled&&(d.extraData=d.extraData||{},d.extraData[v]=_.value,"image"==_.type&&(d.extraData[v+".x"]=b.clk_x,d.extraData[v+".y"]=b.clk_y));var k=1,C=2;function x(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){a("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){a("cannot get iframe.contentDocument: "+n),t=e.document}return t}var S=e("meta[name=csrf-token]").attr("content"),M=e("meta[name=csrf-param]").attr("content");function T(){var t=l.attr2("target"),n=l.attr2("action");b.setAttribute("target",u),o&&!/post/i.test(o)||b.setAttribute("method","POST"),n!=d.url&&b.setAttribute("action",d.url),d.skipEncodingOverride||o&&!/post/i.test(o)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(y=setTimeout((function(){g=!0,A(k)}),d.timeout));var i=[];try{if(d.extraData)for(var s in d.extraData)d.extraData.hasOwnProperty(s)&&(e.isPlainObject(d.extraData[s])&&d.extraData[s].hasOwnProperty("name")&&d.extraData[s].hasOwnProperty("value")?i.push(e('<input type="hidden" name="'+d.extraData[s].name+'">').val(d.extraData[s].value).appendTo(b)[0]):i.push(e('<input type="hidden" name="'+s+'">').val(d.extraData[s]).appendTo(b)[0]));d.iframeTarget||p.appendTo("body"),f.attachEvent?f.attachEvent("onload",A):f.addEventListener("load",A,!1),setTimeout((function e(){try{var t=x(f).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){a("Server abort: ",e," (",e.name,")"),A(C),y&&clearTimeout(y),y=void 0}}),15);try{b.submit()}catch(e){document.createElement("form").submit.apply(b)}}finally{b.setAttribute("action",n),t?b.setAttribute("target",t):l.removeAttr("target"),e(i).remove()}}M&&S&&(d.extraData=d.extraData||{},d.extraData[M]=S),d.forceSync?T():setTimeout(T,10);var L,D,E,O=50;function A(t){if(!m.aborted&&!E){if((D=x(f))||(a("cannot access response document"),t=C),t===k&&m)return m.abort("timeout"),void w.reject(m,"timeout");if(t==C&&m)return m.abort("server abort"),void w.reject(m,"error","server abort");if(D&&D.location.href!=d.iframeSrc||g){f.detachEvent?f.detachEvent("onload",A):f.removeEventListener("load",A,!1);var n,i="success";try{if(g)throw"timeout";var o="xml"==d.dataType||D.XMLDocument||e.isXMLDoc(D);if(a("isXml="+o),!o&&window.opera&&(null===D.body||!D.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(A,250);var s=D.body?D.body:D.documentElement;m.responseText=s?s.innerHTML:null,m.responseXML=D.XMLDocument?D.XMLDocument:D,o&&(d.dataType="xml"),m.getResponseHeader=function(e){return{"content-type":d.dataType}[e.toLowerCase()]},s&&(m.status=Number(s.getAttribute("status"))||m.status,m.statusText=s.getAttribute("statusText")||m.statusText);var r=(d.dataType||"").toLowerCase(),l=/(json|script|text)/.test(r);if(l||d.textarea){var u=D.getElementsByTagName("textarea")[0];if(u)m.responseText=u.value,m.status=Number(u.getAttribute("status"))||m.status,m.statusText=u.getAttribute("statusText")||m.statusText;else if(l){var h=D.getElementsByTagName("pre")[0],_=D.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:_&&(m.responseText=_.textContent?_.textContent:_.innerText)}}else"xml"==r&&!m.responseXML&&m.responseText&&(m.responseXML=I(m.responseText));try{L=R(m,r,d)}catch(e){i="parsererror",m.error=n=e||i}}catch(e){a("error caught: ",e),i="error",m.error=n=e||i}m.aborted&&(a("upload aborted"),i=null),m.status&&(i=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===i?(d.success&&d.success.call(d.context,L,"success",m),w.resolve(m.responseText,"success",m),c&&e.event.trigger("ajaxSuccess",[m,d])):i&&(void 0===n&&(n=m.statusText),d.error&&d.error.call(d.context,m,i,n),w.reject(m,"error",n),c&&e.event.trigger("ajaxError",[m,d,n])),c&&e.event.trigger("ajaxComplete",[m,d]),c&&! --e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,m,i),E=!0,d.timeout&&clearTimeout(y),setTimeout((function(){d.iframeTarget?p.attr("src",d.iframeSrc):p.remove(),m.responseXML=null}),100)}}}var I=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},R=function(t,n,i){var o=t.getResponseHeader("content-type")||"",a="xml"===n||!n&&o.indexOf("xml")>=0,s=a?t.responseXML:t.responseText;return a&&"parsererror"===s.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(s=i.dataFilter(s,n)),"string"==typeof s&&("json"===n||!n&&o.indexOf("json")>=0?s=P(s):("script"===n||!n&&o.indexOf("javascript")>=0)&&e.globalEval(s)),s};return w}},e.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&e.isFunction(e.fn.on),!t.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(a("DOM not ready, queuing ajaxForm"),e((function(){e(n.s,n.c).ajaxForm(t)})),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,o).on("submit.form-plugin",this.selector,t,i).on("click.form-plugin",this.selector,t,o),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,i).bind("click.form-plugin",t,o)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,i){var o=[];if(0===this.length)return o;var a,s,r,l,d,c,u,h=this[0],p=n?h.getElementsByTagName("*"):h.elements;if(!p)return o;for(a=0,c=p.length;a<c;a++)if((r=(d=p[a]).name)&&!d.disabled)if(n&&h.clk&&"image"==d.type)h.clk==d&&(o.push({name:r,value:e(d).val(),type:d.type}),o.push({name:r+".x",value:h.clk_x},{name:r+".y",value:h.clk_y}));else if((l=e.fieldValue(d,!0))&&l.constructor==Array)for(i&&i.push(d),s=0,u=l.length;s<u;s++)o.push({name:r,value:l[s]});else if(t.fileapi&&"file"==d.type){i&&i.push(d);var f=d.files;if(f.length)for(s=0;s<f.length;s++)o.push({name:r,value:f[s],type:d.type});else o.push({name:r,value:"",type:d.type})}else null!=l&&(i&&i.push(d),o.push({name:r,value:l,type:d.type,required:d.required}));if(!n&&h.clk){var m=e(h.clk),_=m[0];(r=_.name)&&!_.disabled&&"image"==_.type&&(o.push({name:r,value:m.val()}),o.push({name:r+".x",value:h.clk_x},{name:r+".y",value:h.clk_y}))}return o},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each((function(){var i=this.name;if(i){var o=e.fieldValue(this,t);if(o&&o.constructor==Array)for(var a=0,s=o.length;a<s;a++)n.push({name:i,value:o[a]});else null!=o&&n.push({name:this.name,value:o})}})),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,o=this.length;i<o;i++){var a=this[i],s=e.fieldValue(a,t);null==s||s.constructor==Array&&!s.length||(s.constructor==Array?e.merge(n,s):n.push(s))}return n},e.fieldValue=function(t,n){var i=t.name,o=t.type,a=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!t.checked||("submit"==o||"image"==o)&&t.form&&t.form.clk!=t||"select"==a&&-1==t.selectedIndex))return null;if("select"==a){var s=t.selectedIndex;if(s<0)return null;for(var r=[],l=t.options,d="select-one"==o,c=d?s+1:l.length,u=d?s:0;u<c;u++){var h=l[u];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),d)return p;r.push(p)}}return r}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,o=this.tagName.toLowerCase();n.test(i)||"textarea"==o?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==o?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1}(void 0!==o()?o():window.Zepto)},35670:(e,t,n)=>{"use strict";n.r(t);var i=n(20615),o=n.n(i);n(55806)&&function(e){if(!e.support.opacity&&!e.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}e.fn.rating=function(t){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var n=arguments;return this.each((function(){e.fn.rating.apply(e(this),n)}))}return e.fn.rating[arguments[0]].apply(this,e.makeArray(arguments).slice(1)||[]),this}t=e.extend({},e.fn.rating.options,t||{});return e.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each((function(){var n,i=e(this),o=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),a=e(this.form||document.body),s=a.data("rating");s&&s.call==e.fn.rating.calls||(s={count:0,call:e.fn.rating.calls});var r=s[o]||a.data("rating"+o);r&&(n=r.data("rating")),r&&n?n.count++:((n=e.extend({},t||{},(e.metadata?i.metadata():e.meta?i.data():null)||{},{count:0,stars:[],inputs:[]})).serial=s.count++,r=e('<span class="star-rating-control"/>'),i.before(r),r.addClass("rating-to-be-drawn"),(i.attr("disabled")||i.hasClass("disabled"))&&(n.readOnly=!0),i.hasClass("required")&&(n.required=!0),r.append(n.cancel=e('<div class="rating-cancel"><a title="'+n.cancel+'">'+n.cancelValue+"</a></div>").on("mouseover",(function(){e(this).rating("drain"),e(this).addClass("star-rating-hover")})).on("mouseout",(function(){e(this).rating("draw"),e(this).removeClass("star-rating-hover")})).on("click",(function(){e(this).rating("select")})).data("rating",n)));var l=e('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+n.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(r.append(l),this.id&&l.attr("id",this.id),this.className&&l.addClass(this.className),n.half&&(n.split=2),"number"==typeof n.split&&n.split>0){var d=(e.fn.width?l.width():0)||n.starWidth,c=n.count%n.split,u=Math.floor(d/n.split);l.width(u).find("a").css({"margin-left":"-"+c*u+"px"})}n.readOnly?l.addClass("star-rating-readonly"):l.addClass("star-rating-live").on("mouseover",(function(){e(this).rating("fill"),e(this).rating("focus")})).on("mouseout",(function(){e(this).rating("draw"),e(this).rating("blur")})).on("click",(function(){e(this).rating("select")})),this.checked&&(n.current=l),"A"==this.nodeName&&e(this).hasClass("selected")&&(n.current=l),i.hide(),i.on("change.rating",(function(t){if(t.selfTriggered)return!1;e(this).rating("select")})),l.data("rating.input",i.data("rating.star",l)),n.stars[n.stars.length]=l[0],n.inputs[n.inputs.length]=i[0],n.rater=s[o]=r,n.context=a,i.data("rating",n),r.data("rating",n),l.data("rating",n),a.data("rating",s),a.data("rating"+o,r)})),e(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},e.extend(e.fn.rating,{calls:0,focus:function(){var t=this.data("rating");if(!t)return this;if(!t.focus)return this;var n=e(this).data("rating.input")||e("INPUT"==this.tagName?this:null);t.focus&&t.focus.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},blur:function(){var t=this.data("rating");if(!t)return this;if(!t.blur)return this;var n=e(this).data("rating.input")||e("INPUT"==this.tagName?this:null);t.blur&&t.blur.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},fill:function(){var e=this.data("rating");if(!e)return this;e.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+e.serial).addClass("star-rating-hover"))},drain:function(){var e=this.data("rating");if(!e)return this;e.readOnly||e.rater.children().filter(".rater-"+e.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var t=this.data("rating");if(!t)return this;this.rating("drain");var n=e(t.current),i=n.length?n.prevAll().addBack().filter(".rater-"+t.serial):null;i&&i.addClass("star-rating-on"),t.cancel[t.readOnly||t.required?"hide":"show"](),this.siblings()[t.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(t,n){var i=this.data("rating");if(!i)return this;if(!i.readOnly){if(i.current=null,void 0!==t||this.length>1){if("number"==typeof t)return e(i.stars[t]).rating("select",void 0,n);if("string"==typeof t)return e.each(i.stars,(function(){e(this).data("rating.input").val()==t&&e(this).rating("select",void 0,n)})),this}else i.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+i.serial)?this:null;this.data("rating",i),this.rating("draw");var o=e(i.current?i.current.data("rating.input"):null),a=e(i.inputs).filter(":checked");return e(i.inputs).not(o).prop("checked",!1),o.prop("checked",!0),e(o.length?o:a).trigger({type:"change",selfTriggered:!0}),(n||null==n)&&i.callback&&i.callback.apply(o[0],[o.val(),e("a",i.current)[0]]),this}},readOnly:function(t,n){var i=this.data("rating");if(!i)return this;i.readOnly=!(!t&&null!=t),n?e(i.inputs).attr("disabled","disabled"):e(i.inputs).removeAttr("disabled"),this.data("rating",i),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),e.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},e((function(){e("input[type=radio].star").rating()}))}(o())},91777:(e,t,n)=>{"use strict";n.r(t);var i,o=n(20615),a=n.n(o);void 0===(i=a()).fn.each2&&i.extend(i.fn,{each2:function(e){for(var t=i([0]),n=-1,o=this.length;++n<o&&(t.context=t[0]=this[n])&&!1!==e.call(t[0],n,t););return this}}),function(e,t){if(window.Select2===t){var n,i,o,a,s,r,l,d,c={x:0,y:0},u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case u.SHIFT:case u.CTRL:case u.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},h={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"};r=e(document),d=1,a=function(){return d++},n=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,o,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+a()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(D(n.containerCss,this.opts.element)),this.container.addClass(D(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",w),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",w),this.results=i=this.container.find(s),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",w),this.results.on("mousemove",(function(n){var i=c;i!==t&&i.x===n.pageX&&i.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind((function(e){this._touchEvent=!0,this.highlightUnderEvent(e)}))),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(e,t){var n=b(e,(function(e){t.trigger("scroll-debounced",e)}));t.on("scroll",(function(e){m(e.target,t.get())>=0&&n(e)}))}(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&i.mousewheel((function(e,t,n,o){var a=i.scrollTop();o>0&&a-o<=0?(i.scrollTop(0),w(e)):o<0&&i.get(0).scrollHeight-i.scrollTop()+o<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),w(e))})),y(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",(function(){o.addClass("select2-focused")})),o.on("blur",(function(){o.removeClass("select2-focused")})),this.dropdown.on("mouseup",s,this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(e){e.stopPropagation()})),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var r=n.element.prop("disabled");r===t&&(r=!1),this.enable(!r);var d=n.element.prop("readonly");d===t&&(d=!1),this.readonly(d),l=l||function(){var t=e("<div class='select2-measure-scrollbar'></div>");t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&e.each((function(){this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),O.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:_(e.attr("locked"),"locked")||_(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,o,s,r,l=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(n=e.extend({},{populateResults:function(i,o,s){var r,d=this.opts.id,c=this.liveRegion;r=function(i,o,u){var h,p,f,m,_,v,g,y,b,w,k=[];for(h=0,p=(i=n.sortResults(i,o,s)).length;h<p;h+=1)m=!(_=!0===(f=i[h]).disabled)&&d(f)!==t,v=f.children&&f.children.length>0,(g=e("<li></li>")).addClass("select2-results-dept-"+u),g.addClass("select2-result"),g.addClass(m?"select2-result-selectable":"select2-result-unselectable"),_&&g.addClass("select2-disabled"),v&&g.addClass("select2-result-with-children"),g.addClass(l.opts.formatResultCssClass(f)),g.attr("role","presentation"),(y=e(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+a()),y.attr("role","option"),(w=n.formatResult(f,y,s,l.opts.escapeMarkup))!==t&&(y.html(w),g.append(y)),v&&((b=e("<ul></ul>")).addClass("select2-result-sub"),r(f.children,b,u+1),g.append(b)),g.data("select2-data",f),k.push(g[0]);o.append(k),c.text(n.formatMatches(i.length))},r(o,i,0)}},e.fn.select2.defaults,n)).id&&(s=n.id,n.id=function(e){return e[s]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(o?(n.query=this.bind((function(e){var n,o,a,s={results:[],more:!1},r=e.term;a=function(t,n){var i;t.is("option")?e.matcher(r,t.text(),t)&&n.push(l.optionToData(t)):t.is("optgroup")&&(i=l.optionToData(t),t.children().each2((function(e,t){a(t,i.children)})),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(o=this.getPlaceholderOption())&&(n=n.not(o)),n.each2((function(e,t){a(t,s.results)})),e.callback(s)})),n.id=function(e){return e.id}):"query"in n||("ajax"in n?((r=n.element.data("ajax-url"))&&r.length>0&&(n.ajax.url=r),n.query=S.call(n.element,n.ajax)):"data"in n?n.query=M(n.data):"tags"in n&&(n.query=T(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var o=[];e(v(t.val(),n.separator)).each((function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each((function(){if(_(this.id,t.id))return t=this,!1})),o.push(t)})),i(o)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,o=this;i.on("change.select2",this.bind((function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(D(this.opts.containerCssClass,this.opts.element)),k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(this.opts.dropdownCssClass,this.opts.element))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",o._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(t){e.each(t,o._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,o,a,s=this.dropdown,r=this.container.offset(),d=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),h=e(window),p=h.width(),f=h.height(),m=h.scrollLeft()+p,_=h.scrollTop()+f,v=r.top+d,g=r.left,y=v+u<=_,b=r.top-u>=h.scrollTop(),w=s.outerWidth(!1),k=g+w<=m;s.hasClass("select2-drop-above")?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(s.hide(),r=this.container.offset(),d=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),m=h.scrollLeft()+p,_=h.scrollTop()+f,v=r.top+d,k=(g=r.left)+(w=s.outerWidth(!1))<=m,s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(a=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),(w=s.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:l.width))>c?c=w:w=c,u=s.outerHeight(!1),k=g+w<=m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(v-=(t=this.body.offset()).top,g-=t.left),k||(g=r.left+this.container.outerWidth(!1)-w),o={left:g,width:c},n?(o.top=r.top-u,o.bottom="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(o.top=v,o.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),o=e.extend(o,D(this.opts.dropdownCss,this.opts.element)),s.css(o)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),r.on("mousemove.select2Event",(function(e){c.x=e.pageX,c.y=e.pageY})),!0)},opening:function(){var t,n=this.containerEventName,i="scroll."+n,o="resize."+n,a="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",(function(n){p(t);var i,o=e("#select2-drop");o.length>0&&((i=o.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),n.preventDefault(),n.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each((function(){e(this).on(o+" "+i+" "+a,(function(e){s.opened()&&s.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,o="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(n).off(i).off(o)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),r.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return D(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,o,a,s,r,l,d=this.results;(n=this.highlight())<0||(0!=n?(t=this.findHighlightableChoices().find(".select2-result-label"),o=(l=((i=e(t[n])).offset()||{}).top||0)+i.outerHeight(!0),n===t.length-1&&(r=d.find("li.select2-more-results")).length>0&&(o=r.offset().top+r.outerHeight(!0)),o>(a=d.offset().top+d.outerHeight(!0))&&d.scrollTop(d.scrollTop()+(o-a)),(s=l-d.offset().top)<0&&"none"!=i.css("display")&&d.scrollTop(d.scrollTop()+s)):d.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var o=e(n[i+=t]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,o=this.findHighlightableChoices();if(0===arguments.length)return m(o.filter(".select2-highlighted")[0],o.get());t>=o.length&&(t=o.length-1),t<0&&(t=0),this.removeHighlight(),(n=e(o[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,i=this,o=this.search.val(),a=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:a,matcher:this.opts.matcher,callback:this.bind((function(s){i.opened()&&(i.opts.populateResults.call(this,e,s.results,{term:o,page:n,context:a}),i.postprocessResults(s,!1,!1),!0===s.more?(t.detach().appendTo(e).text(D(i.opts.formatLoadMore,i.opts.element,n+1)),window.setTimeout((function(){i.loadMoreIfNeeded()}),10)):t.remove(),i.positionDropdown(),i.resultsPage=n,i.context=s.context,this.opts.element.trigger({type:"select2-loaded",items:s}))}))}))},tokenize:function(){},updateResults:function(n){var i,o,a,s=this.search,r=this.results,l=this.opts,d=this,c=s.val(),u=e.data(this.container,"select2-last-term");if((!0===n||!u||!_(c,u))&&(e.data(this.container,"select2-last-term",c),!0===n||!1!==this.showSearchInput&&this.opened())){a=++this.queryCount;var h=this.getMaximumSelectionSize();if(!(h>=1&&(i=this.data(),e.isArray(i)&&i.length>=h&&L(l.formatSelectionTooBig,"formatSelectionTooBig"))))return s.val().length<l.minimumInputLength?(L(l.formatInputTooShort,"formatInputTooShort")?f("<li class='select2-no-results'>"+D(l.formatInputTooShort,l.element,s.val(),l.minimumInputLength)+"</li>"):f(""),void(n&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&s.val().length>l.maximumInputLength?L(l.formatInputTooLong,"formatInputTooLong")?f("<li class='select2-no-results'>"+D(l.formatInputTooLong,l.element,s.val(),l.maximumInputLength)+"</li>"):f(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&f("<li class='select2-searching'>"+D(l.formatSearching,l.element)+"</li>"),s.addClass("select2-active"),this.removeHighlight(),(o=this.tokenize())!=t&&null!=o&&s.val(o),this.resultsPage=1,l.query({element:l.element,term:s.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(i){var o;a==this.queryCount&&(this.opened()?i.hasError!==t&&L(l.formatAjaxError,"formatAjaxError")?f("<li class='select2-ajax-error'>"+D(l.formatAjaxError,l.element,i.jqXHR,i.textStatus,i.errorThrown)+"</li>"):(this.context=i.context===t?null:i.context,this.opts.createSearchChoice&&""!==s.val()&&(o=this.opts.createSearchChoice.call(d,s.val(),i.results))!==t&&null!==o&&d.id(o)!==t&&null!==d.id(o)&&0===e(i.results).filter((function(){return _(d.id(this),d.id(o))})).length&&this.opts.createSearchChoicePosition(i.results,o),0===i.results.length&&L(l.formatNoMatches,"formatNoMatches")?f("<li class='select2-no-results'>"+D(l.formatNoMatches,l.element,s.val())+"</li>"):(r.empty(),d.opts.populateResults.call(this,r,i.results,{term:s.val(),page:this.resultsPage,context:null}),!0===i.more&&L(l.formatLoadMore,"formatLoadMore")&&(r.append("<li class='select2-more-results'>"+l.escapeMarkup(D(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){d.loadMoreIfNeeded()}),10)),this.postprocessResults(i,n),p(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))}))})));f("<li class='select2-selection-limit'>"+D(l.formatSelectionTooBig,l.element,h)+"</li>")}function p(){s.removeClass("select2-active"),d.positionDropdown(),r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.liveRegion.text(r.text()):d.liveRegion.text(d.opts.formatMatches(r.find(".select2-result-selectable").length))}function f(e){r.html(e),p()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var t,n=e[0],i=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))}),0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,i,o,a,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(a=0,s=(i=n.split(";")).length;a<s;a+=1)if(null!==(o=i[a].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&o.length>=1)return o[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),i=A(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,o;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((i=n.createTextRange()).collapse(!1),i.select()):n.setSelectionRange&&(o=this.search.val().length,n.setSelectionRange(o,o))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),O.call(this,"selection","focusser")},initContainer:function(){var t,n,i=this.container,o=this.dropdown,s=a();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==u.PAGE_UP&&e.which!==u.PAGE_DOWN)switch(e.which){case u.UP:case u.DOWN:return this.moveHighlight(e.which===u.UP?-1:1),void w(e);case u.ENTER:return this.selectHighlighted(),void w(e);case u.TAB:return void this.selectHighlighted({noFocus:!0});case u.ESC:return this.cancel(e),void w(e)}else w(e)}))),this.search.on("blur",this.bind((function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==u.TAB&&!u.isControl(e)&&!u.isFunctionKey(e)&&e.which!==u.ESC){if(!1!==this.opts.openOnEnter||e.which!==u.ENTER){if(e.which==u.DOWN||e.which==u.UP||e.which==u.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void w(e)}return e.which==u.DELETE||e.which==u.BACKSPACE?(this.opts.allowClear&&this.clear(),void w(e)):void 0}w(e)}}))),y(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown touchstart","abbr",this.bind((function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection.focus())}))),t.on("mousedown touchstart",this.bind((function(n){p(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),w(n)}))),o.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),t.on("focus",this.bind((function(e){w(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))}))}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var o=n.val(),a=null;t.query({matcher:function(e,n,i){var s=_(o,t.id(i));return s&&(a=i),s},callback:e.isFunction(i)?function(){i(a)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,o=this;if(this.findHighlightableChoices().each2((function(e,t){if(_(o.id(t.data("select2-data")),o.opts.element.val()))return i=e,!1})),!1!==n&&(!0===t&&i>=0?this.highlight(i):this.highlight(0)),!0===t){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(E(e.results)>=a)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),_(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),o.empty(),null!==e&&(n=this.opts.formatSelection(e,o,this.opts.escapeMarkup)),n!==t&&o.append(n),(i=this.opts.formatSelectionCssClass(e,o))!==t&&o.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,o=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return i=o.optionToData(t),!1})),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:a});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){o.opts.element.val(e?o.id(e):""),o.updateSelection(e),o.setPlaceholder(),n&&o.triggerChange({added:e,removed:a})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==t&&(n=null),n;arguments.length>1&&(i=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)}}),o=A(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){i.push(n.optionToData(t))})),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var o=v(n.val(),t.separator),a=[];t.query({matcher:function(n,i,s){var r=e.grep(o,(function(e){return _(e,t.id(s))})).length;return r&&a.push(s),r},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<o.length;n++)for(var s=o[n],r=0;r<a.length;r++){var l=a[r];if(_(s,t.id(l))){e.push(l),a.splice(r,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),O.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(t){i.search[0].focus(),i.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+a()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(n){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),o=i.prev(".select2-search-choice:not(.select2-locked)"),a=i.next(".select2-search-choice:not(.select2-locked)"),s=function(t){var n=0,i=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var o=document.selection.createRange();i=document.selection.createRange().text.length,o.moveStart("character",-t.value.length),n=o.text.length-i}return{offset:n,length:i}}(this.search);if(i.length&&(n.which==u.LEFT||n.which==u.RIGHT||n.which==u.BACKSPACE||n.which==u.DELETE||n.which==u.ENTER)){var r=i;return n.which==u.LEFT&&o.length?r=o:n.which==u.RIGHT?r=a.length?a:null:n.which===u.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),r=o.length?o:a):n.which==u.DELETE?this.unselect(i.first())&&(this.search.width(10),r=a.length?a:null):n.which==u.ENTER&&(r=null),this.selectChoice(r),w(n),void(r&&r.length||this.open())}if((n.which===u.BACKSPACE&&1==this.keydowns||n.which==u.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void w(n);if(this.selectChoice(null),this.opened())switch(n.which){case u.UP:case u.DOWN:return this.moveHighlight(n.which===u.UP?-1:1),void w(n);case u.ENTER:return this.selectHighlighted(),void w(n);case u.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case u.ESC:return this.cancel(n),void w(n)}if(n.which!==u.TAB&&!u.isControl(n)&&!u.isFunctionKey(n)&&n.which!==u.BACKSPACE&&n.which!==u.ESC){if(n.which===u.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==u.PAGE_UP&&n.which!==u.PAGE_DOWN||w(n),n.which===u.ENTER&&w(n)}}}))),this.search.on("keyup",this.bind((function(e){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],i=[],o=this;e(t).each((function(){m(o.id(this),n)<0&&(n.push(o.id(this)),i.push(this))})),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each((function(){o.addSelectedChoice(this)})),o.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.moveHighlight(1),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.clearSearch(),this.updateResults(),this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,o,a=!n.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=a?s:r,d=this.id(n),c=this.getVal();(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),(o=this.opts.formatSelectionCssClass(n,l.find("div")))!=t&&l.addClass(o),a&&l.find(".select2-search-choice-close").on("mousedown",w).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),w(t),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),c.push(d),this.setVal(c)},unselect:function(t){var n,i,o=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var a=e.Event("select2-removing");if(a.val=this.id(n),a.choice=n,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;(i=m(this.id(n),o))>=0;)o.splice(i,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),s=this;o.each2((function(e,t){m(s.id(t.data("select2-data")),i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),a.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&s.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&L(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+D(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-g(this.search)},resizeSearch:function(){var t,n,i,o,a=g(this.search);t=function(t){if(!s){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);(s=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e("body").append(s)}return s.text(t.val()),s.width()}(this.search)+10,n=this.search.offset().left,(o=(i=this.selection.width())-(n-this.selection.offset().left)-a)<t&&(o=i-a),o<40&&(o=i-a),o<=0&&(o=t),this.search.width(Math.floor(o))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:v(e=this.opts.element.val(),this.opts.separator)},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each((function(){m(this,n)<0&&n.push(this)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)_(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var o,a=this;if(0===arguments.length)return this.getVal();if((o=this.data()).length||(o=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var n=e.map(t,a.id);a.setVal(n),a.updateSelection(t),a.clearSearch(),i&&a.triggerChange(a.buildChangeDetails(o,a.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(n.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,n){var i,o,a=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get();o=this.data(),t||(t=[]),i=e.map(t,(function(e){return a.opts.id(e)})),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(o,this.data()))}}),e.fn.select2=function(){var n,i,o,a,s,r=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],c=["val","data"],u={search:"externalSearch"};return this.each((function(){if(0===r.length||"object"==typeof r[0])(n=0===r.length?{}:e.extend({},r[0])).element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?s=n.element.prop("multiple"):(s=n.multiple||!1,"tags"in n&&(n.multiple=s=!0)),(i=s?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof r[0])throw"Invalid arguments to select2 plugin: "+r;if(m(r[0],l)<0)throw"Unknown method: "+r[0];if(a=t,(i=e(this).data("select2"))===t)return;if("container"===(o=r[0])?a=i.container:"dropdown"===o?a=i.dropdown:(u[o]&&(o=u[o]),a=i[o].apply(i,r.slice(1))),m(r[0],d)>=0||m(r[0],c)>=0&&1==r.length)return!1}})),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var o=[];return C(e.text,n.term,o,i),o.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return f(""+t).toUpperCase().indexOf(f(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,n,i,o){var a,s,r,l,d,c=e,u=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(s=-1,r=0,l=o.tokenSeparators.length;r<l&&(d=o.tokenSeparators[r],!((s=e.indexOf(d))>=0));r++);if(s<0)break;if(a=e.substring(0,s),e=e.substring(s+d.length),a.length>0&&(a=o.createSearchChoice.call(this,a,n))!==t&&null!==a&&o.id(a)!==t&&null!==o.id(a)){for(u=!1,r=0,l=n.length;r<l;r++)if(_(o.id(a),o.id(n[r]))){u=!0;break}u||i(a)}}return c!==e?e:void 0},escapeMarkup:x,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:S,local:M,tags:T},util:{debounce:b,markMatch:C,escapeMarkup:x,stripDiacritics:f},class:{abstract:n,single:i,multi:o}}}function p(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function f(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return h[e]||e}))}function m(e,t){for(var n=0,i=t.length;n<i;n+=1)if(_(e,t[n]))return n;return-1}function _(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function v(t,n){var i,o,a;if(null===t||t.length<1)return[];for(o=0,a=(i=t.split(n)).length;o<a;o+=1)i[o]=e.trim(i[o]);return i}function g(e){return e.outerWidth(!1)-e.width()}function y(n){var i="keyup-change-value";n.on("keydown",(function(){e.data(n,i)===t&&e.data(n,i,n.val())})),n.on("keyup",(function(){var o=e.data(n,i);o!==t&&n.val()!==o&&(e.removeData(n,i),n.trigger("keyup-change"))}))}function b(e,n,i){var o;return i=i||t,function(){var t=arguments;window.clearTimeout(o),o=window.setTimeout((function(){n.apply(i,t)}),e)}}function w(e){e.preventDefault(),e.stopPropagation()}function k(t,n,i){var o,a,s=[];(o=e.trim(t.attr("class")))&&e((o=""+o).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&s.push(this)})),(o=e.trim(n.attr("class")))&&e((o=""+o).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(a=i(this))&&s.push(a)})),t.attr("class",s.join(" "))}function C(e,t,n,i){var o=f(e.toUpperCase()).indexOf(f(t.toUpperCase())),a=t.length;o<0?n.push(i(e)):(n.push(i(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(i(e.substring(o,o+a))),n.push("</span>"),n.push(i(e.substring(o+a,e.length))))}function x(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function S(n){var i,o=null,a=n.quietMillis||100,s=n.url,r=this;return function(l){window.clearTimeout(i),i=window.setTimeout((function(){var i=n.data,a=s,d=n.transport||e.fn.select2.ajaxDefaults.transport,c={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,c);i=i?i.call(r,l.term,l.page,l.context):null,a="function"==typeof a?a.call(r,l.term,l.page,l.context):a,o&&"function"==typeof o.abort&&o.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(r)):e.extend(u,n.params)),e.extend(u,{url:a,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),o=d.call(r,u)}),a)}}function M(t){var n,i,o=t,a=function(e){return""+e.text};e.isArray(o)&&(o={results:i=o}),!1===e.isFunction(o)&&(i=o,o=function(){return i});var s=o();return s.text&&(a=s.text,e.isFunction(a)||(n=s.text,a=function(e){return e[n]})),function(t){var n,i=t.term,s={results:[]};""!==i?(n=function(o,s){var r,l;if((o=o[0]).children){for(l in r={},o)o.hasOwnProperty(l)&&(r[l]=o[l]);r.children=[],e(o.children).each2((function(e,t){n(t,r.children)})),(r.children.length||t.matcher(i,a(r),o))&&s.push(r)}else t.matcher(i,a(o),o)&&s.push(o)},e(o().results).each2((function(e,t){n(t,s.results)})),t.callback(s)):t.callback(o())}}function T(n){var i=e.isFunction(n);return function(o){var a=o.term,s={results:[]},r=i?n(o):n;e.isArray(r)&&(e(r).each((function(){var e=this.text!==t,n=e?this.text:this;(""===a||o.matcher(a,n))&&s.results.push(e?this:{id:this,text:this})})),o.callback(s))}}function L(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function D(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function E(t){var n=0;return e.each(t,(function(e,t){t.children?n+=E(t.children):n++})),n}function O(){var t=this;e.each(arguments,(function(e,n){t[n].remove(),t[n]=null}))}function A(t,n){var i=function(){};return(i.prototype=new t).constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}}(a())},42786:function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},14130:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-dz",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"أح_إث_ثلا_أر_خم_جم_سب".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:4}})}(n(30381))},96135:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}})}(n(30381))},56440:function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},o=function(e){return function(t,o,a,s){var r=n(t),l=i[e][n(t)];return 2===r&&(l=l[o?0:1]),l.replace(/%d/i,t)}},a=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-ly",{months:a,monthsShort:a,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(30381))},47702:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}(n(30381))},16040:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};e.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:0,doy:6}})}(n(30381))},37100:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(30381))},30867:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},o={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},a=function(e){return function(t,n,a,s){var r=i(t),l=o[e][i(t)];return 2===r&&(l=l[n?0:1]),l.replace(/%d/i,t)}},s=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar",{months:s,monthsShort:s,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:a("s"),ss:a("s"),m:a("m"),mm:a("m"),h:a("h"),hh:a("h"),d:a("d"),dd:a("d"),M:a("M"),MM:a("M"),y:a("y"),yy:a("y")},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(30381))},31083:function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(e){return/^(gündüz|axşam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var n=e%10,i=e%100-n,o=e>=100?100:null;return e+(t[n]||t[i]||t[o])},week:{dow:1,doy:7}})}(n(30381))},9808:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"хвіліна":"хвіліну":"h"===i?n?"гадзіна":"гадзіну":e+" "+t({ss:n?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:n?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:n?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[i],+e)}e.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:n,mm:n,h:n,hh:n,d:"дзень",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(e){return/^(дня|вечара)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}})}(n(30381))},68338:function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(30381))},67438:function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(30381))},8905:function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn",{months:"জানুয়ারী_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপ্র_মে_জুন_জুল_আগ_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গ_বুধ_বৃহঃ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t&&e>=4||"দুপুর"===t&&e<5||"বিকাল"===t?e+12:e},meridiem:function(e,t,n){return e<4?"রাত":e<10?"সকাল":e<17?"দুপুর":e<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(30381))},11560:function(e,t,n){!function(e){"use strict";var t={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};e.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(e,t){return 12===e&&(e=0),"མཚན་མོ"===t&&e>=4||"ཉིན་གུང"===t&&e<5||"དགོང་དག"===t?e+12:e},meridiem:function(e,t,n){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(30381))},1278:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+o({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function n(e){switch(i(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function i(e){return e>9?i(e%10):e}function o(e,t){return 2===t?a(e):e}function a(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}e.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},dayOfMonthOrdinalParse:/\d{1,2}(añ|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4}})}(n(30381))},80622:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},2468:function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(30381))},5822:function(e,t,n){!function(e){"use strict";var t="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");function i(e){return e>1&&e<5&&1!=~~(e/10)}function o(e,t,n,o){var a=e+" ";switch(n){case"s":return t||o?"pár sekund":"pár sekundami";case"ss":return t||o?a+(i(e)?"sekundy":"sekund"):a+"sekundami";case"m":return t?"minuta":o?"minutu":"minutou";case"mm":return t||o?a+(i(e)?"minuty":"minut"):a+"minutami";case"h":return t?"hodina":o?"hodinu":"hodinou";case"hh":return t||o?a+(i(e)?"hodiny":"hodin"):a+"hodinami";case"d":return t||o?"den":"dnem";case"dd":return t||o?a+(i(e)?"dny":"dní"):a+"dny";case"M":return t||o?"měsíc":"měsícem";case"MM":return t||o?a+(i(e)?"měsíce":"měsíců"):a+"měsíci";case"y":return t||o?"rok":"rokem";case"yy":return t||o?a+(i(e)?"roky":"let"):a+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsParse:function(e,t){var n,i=[];for(n=0;n<12;n++)i[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return i}(t,n),shortMonthsParse:function(e){var t,n=[];for(t=0;t<12;t++)n[t]=new RegExp("^"+e[t]+"$","i");return n}(n),longMonthsParse:function(e){var t,n=[];for(t=0;t<12;t++)n[t]=new RegExp("^"+e[t]+"$","i");return n}(t),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:o,ss:o,m:o,mm:o,h:o,hh:o,d:o,dd:o,M:o,MM:o,y:o,yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},50877:function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/сехет$/i.exec(e)?"рен":/ҫул$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(30381))},47373:function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(30381))},24780:function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},60217:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?o[n][0]:o[n][1]}e.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},60894:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?o[n][0]:o[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},59740:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?o[n][0]:o[n][1]}e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},5300:function(e,t,n){!function(e){"use strict";var t=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(e){return"މފ"===e},meridiem:function(e,t,n){return e<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(30381))},50837:function(e,t,n){!function(e){"use strict";function t(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}e.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,n){return e>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){return 6===this.day()?"[το προηγούμενο] dddd [{}] LT":"[την προηγούμενη] dddd [{}] LT"},sameElse:"L"},calendar:function(e,n){var i=this._calendarEl[e],o=n&&n.hours();return t(i)&&(i=i.apply(n)),i.replace("{}",o%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(30381))},78348:function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},77925:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(30381))},22243:function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},46436:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},76319:function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},92915:function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"sekundoj",ss:"%d sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(30381))},55251:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(30381))},71146:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"MMMM [de] D [de] YYYY",LLL:"MMMM [de] D [de] YYYY h:mm A",LLLL:"dddd, MMMM [de] D [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})}(n(30381))},55655:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(30381))},5603:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?o[n][2]?o[n][2]:o[n][1]:i?o[n][0]:o[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d päeva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},77763:function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},76959:function(e,t,n){!function(e){"use strict";var t={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};e.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(e){return/بعد از ظهر/.test(e)},meridiem:function(e,t,n){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"ثانیه d%",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(30381))},11897:function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",t[7],t[8],t[9]];function i(e,t,n,i){var a="";switch(n){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"ss":return i?"sekunnin":"sekuntia";case"m":return i?"minuutin":"minuutti";case"mm":a=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":a=i?"tunnin":"tuntia";break;case"d":return i?"päivän":"päivä";case"dd":a=i?"päivän":"päivää";break;case"M":return i?"kuukauden":"kuukausi";case"MM":a=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":a=i?"vuoden":"vuotta"}return a=o(e,i)+" "+a}function o(e,i){return e<10?i?n[e]:t[e]:e}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},94694:function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},63049:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(30381))},52330:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(30381))},94470:function(e,t,n){!function(e){"use strict";e.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(30381))},5044:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},2101:function(e,t,n){!function(e){"use strict";var t=["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],n=["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],i=["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],o=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],a=["Dò","Lu","Mà","Ci","Ar","Ha","Sa"];e.defineLocale("gd",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:i,weekdaysShort:o,weekdaysMin:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(30381))},38794:function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(30381))},23168:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={s:["thodde secondanim","thodde second"],ss:[e+" secondanim",e+" second"],m:["eka mintan","ek minute"],mm:[e+" mintanim",e+" mintam"],h:["eka horan","ek hor"],hh:[e+" horanim",e+" hor"],d:["eka disan","ek dis"],dd:[e+" disanim",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineanim",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsanim",e+" vorsam"]};return t?o[n][0]:o[n][1]}e.defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){return"D"===t?e+"er":e},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokalli"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokalli":e<16?"donparam":e<20?"sanje":"rati"}})}(n(30381))},95349:function(e,t,n){!function(e){"use strict";var t={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},n={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};e.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પેહલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(e){return e.replace(/[૧૨૩૪૫૬૭૮૯૦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/રાત|બપોર|સવાર|સાંજ/,meridiemHour:function(e,t){return 12===e&&(e=0),"રાત"===t?e<4?e:e+12:"સવાર"===t?e:"બપોર"===t?e>=10?e:e+12:"સાંજ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"રાત":e<10?"સવાર":e<17?"બપોર":e<20?"સાંજ":"રાત"},week:{dow:0,doy:6}})}(n(30381))},24206:function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(e){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(e)},meridiem:function(e,t,n){return e<5?"לפנות בוקר":e<10?"בבוקר":e<12?n?'לפנה"צ':"לפני הצהריים":e<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(30381))},30094:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?e>=10?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(30381))},30316:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},22138:function(e,t,n){!function(e){"use strict";var t="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(e,t,n,i){var o=e;switch(n){case"s":return i||t?"néhány másodperc":"néhány másodperce";case"ss":return o+(i||t)?" másodperc":" másodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return o+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" óra":" órája");case"hh":return o+(i||t?" óra":" órája");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return o+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hónap":" hónapja");case"MM":return o+(i||t?" hónap":" hónapja");case"y":return"egy"+(i||t?" év":" éve");case"yy":return o+(i||t?" év":" éve")}return""}function i(e){return(e?"":"[múlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},11423:function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(e){return/^(ցերեկվա|երեկոյան)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}})}(n(30381))},29218:function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(30381))},90135:function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,i,o){var a=e+" ";switch(i){case"s":return n||o?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return t(e)?a+(n||o?"sekúndur":"sekúndum"):a+"sekúnda";case"m":return n?"mínúta":"mínútu";case"mm":return t(e)?a+(n||o?"mínútur":"mínútum"):n?a+"mínúta":a+"mínútu";case"hh":return t(e)?a+(n||o?"klukkustundir":"klukkustundum"):a+"klukkustund";case"d":return n?"dagur":o?"dag":"degi";case"dd":return t(e)?n?a+"dagar":a+(o?"daga":"dögum"):n?a+"dagur":a+(o?"dag":"degi");case"M":return n?"mánuður":o?"mánuð":"mánuði";case"MM":return t(e)?n?a+"mánuðir":a+(o?"mánuði":"mánuðum"):n?a+"mánuður":a+(o?"mánuð":"mánuði");case"y":return n||o?"ár":"ári";case"yy":return t(e)?a+(n||o?"ár":"árum"):a+(n||o?"ár":"ári")}}e.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},90626:function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(30381))},39183:function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 HH:mm dddd",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日 HH:mm dddd"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(30381))},24286:function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(30381))},12105:function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:{standalone:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),format:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return/(წამი|წუთი|საათი|წელი)/.test(e)?e.replace(/ი$/,"ში"):e+"ში"},past:function(e){return/(წამი|წუთი|საათი|დღე|თვე)/.test(e)?e.replace(/(ი|ე)$/,"ის უკან"):/წელი/.test(e)?e.replace(/წელი$/,"წლის უკან"):void 0},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}})}(n(30381))},47772:function(e,t,n){!function(e){"use strict";var t={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};e.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}})}(n(30381))},18758:function(e,t,n){!function(e){"use strict";e.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}})}(n(30381))},79282:function(e,t,n){!function(e){"use strict";var t={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},n={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};e.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬ_ಅಕ್ಟೋಬ_ನವೆಂಬ_ಡಿಸೆಂಬ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(e){return e.replace(/[೧೨೩೪೫೬೭೮೯೦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ರಾತ್ರಿ"===t?e<4?e:e+12:"ಬೆಳಿಗ್ಗೆ"===t?e:"ಮಧ್ಯಾಹ್ನ"===t?e>=10?e:e+12:"ಸಂಜೆ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ರಾತ್ರಿ":e<10?"ಬೆಳಿಗ್ಗೆ":e<17?"ಮಧ್ಯಾಹ್ನ":e<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(ನೇ)/,ordinal:function(e){return e+"ನೇ"},week:{dow:0,doy:6}})}(n(30381))},33730:function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"일";case"M":return e+"월";case"w":case"W":return e+"주";default:return e}},meridiemParse:/오전|오후/,isPM:function(e){return"오후"===e},meridiem:function(e,t,n){return e<12?"오전":"오후"}})}(n(30381))},33291:function(e,t,n){!function(e){"use strict";var t={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};e.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кече саат] LT",lastWeek:"[Өткен аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}})}(n(30381))},36841:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?o[n][0]:o[n][1]}function n(e){return o(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function i(e){return o(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function o(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return o(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return o(e)}return o(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:i,s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Méint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},55466:function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(e){return"ຕອນແລງ"===e},meridiem:function(e,t,n){return e<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(ທີ່)\d{1,2}/,ordinal:function(e){return"ທີ່"+e}})}(n(30381))},57010:function(e,t,n){!function(e){"use strict";var t={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(e,t,n,i){return t?"kelios sekundės":i?"kelių sekundžių":"kelias sekundes"}function i(e,t,n,i){return t?a(n)[0]:i?a(n)[1]:a(n)[2]}function o(e){return e%10==0||e>10&&e<20}function a(e){return t[e].split("_")}function s(e,t,n,s){var r=e+" ";return 1===e?r+i(e,t,n[0],s):t?r+(o(e)?a(n)[1]:a(n)[0]):s?r+a(n)[1]:r+(o(e)?a(n)[1]:a(n)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:n,ss:s,m:i,mm:s,h:i,hh:s,d:i,dd:s,M:i,MM:s,y:i,yy:s},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(30381))},37595:function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function i(e,i,o){return e+" "+n(t[o],e,i)}function o(e,i,o){return n(t[o],e,i)}function a(e,t){return t?"dažas sekundes":"dažām sekundēm"}e.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:a,ss:i,m:o,mm:i,h:o,hh:i,d:o,dd:i,M:o,MM:i,y:o,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},39861:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var o=t.words[i];return 1===i.length?n?o[0]:o[1]:e+" "+t.correctGrammaticalCase(e,o)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},35493:function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(30381))},95966:function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(30381))},87341:function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(e,t){return 12===e&&(e=0),"രാത്രി"===t&&e>=4||"ഉച്ച കഴിഞ്ഞ്"===t||"വൈകുന്നേരം"===t?e+12:e},meridiem:function(e,t,n){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(30381))},10370:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function i(e,t,n,i){var o="";if(t)switch(n){case"s":o="काही सेकंद";break;case"ss":o="%d सेकंद";break;case"m":o="एक मिनिट";break;case"mm":o="%d मिनिटे";break;case"h":o="एक तास";break;case"hh":o="%d तास";break;case"d":o="एक दिवस";break;case"dd":o="%d दिवस";break;case"M":o="एक महिना";break;case"MM":o="%d महिने";break;case"y":o="एक वर्ष";break;case"yy":o="%d वर्षे"}else switch(n){case"s":o="काही सेकंदां";break;case"ss":o="%d सेकंदां";break;case"m":o="एका मिनिटा";break;case"mm":o="%d मिनिटां";break;case"h":o="एका तासा";break;case"hh":o="%d तासां";break;case"d":o="एका दिवसा";break;case"dd":o="%d दिवसां";break;case"M":o="एका महिन्या";break;case"MM":o="%d महिन्यां";break;case"y":o="एका वर्षा";break;case"yy":o="%d वर्षां"}return o.replace(/%d/i,e)}e.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात्री"===t?e<4?e:e+12:"सकाळी"===t?e:"दुपारी"===t?e>=10?e:e+12:"सायंकाळी"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात्री":e<10?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(30381))},41237:function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(30381))},9847:function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(30381))},72126:function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(30381))},56165:function(e,t,n){!function(e){"use strict";var t={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};e.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(30381))},64924:function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},16744:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(e,t){return 12===e&&(e=0),"राति"===t?e<4?e:e+12:"बिहान"===t?e:"दिउँसो"===t?e>=10?e:e+12:"साँझ"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"राति":e<12?"बिहान":e<16?"दिउँसो":e<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(30381))},59814:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],o=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},93901:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],o=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},83877:function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},15858:function(e,t,n){!function(e){"use strict";var t={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};e.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(e){return e.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ਰਾਤ"===t?e<4?e:e+12:"ਸਵੇਰ"===t?e:"ਦੁਪਹਿਰ"===t?e>=10?e:e+12:"ਸ਼ਾਮ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ਰਾਤ":e<10?"ਸਵੇਰ":e<17?"ਦੁਪਹਿਰ":e<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(30381))},64495:function(e,t,n){!function(e){"use strict";var t="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");function i(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function o(e,t,n){var o=e+" ";switch(n){case"ss":return o+(i(e)?"sekundy":"sekund");case"m":return t?"minuta":"minutę";case"mm":return o+(i(e)?"minuty":"minut");case"h":return t?"godzina":"godzinę";case"hh":return o+(i(e)?"godziny":"godzin");case"MM":return o+(i(e)?"miesiące":"miesięcy");case"yy":return o+(i(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,i){return e?""===i?"("+n[e.month()]+"|"+t[e.month()]+")":/D MMMM/.test(i)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:o,m:o,mm:o,h:o,hh:o,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:o,y:"rok",yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},57971:function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº"})}(n(30381))},89520:function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(30381))},96459:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=" ";return(e%100>=20||e>=100&&e%100==0)&&(i=" de "),e+i+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:t,m:"un minut",mm:t,h:"o oră",hh:t,d:"o zi",dd:t,M:"o lună",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(30381))},21793:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"минута":"минуту":e+" "+t({ss:n?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[i],+e)}var i=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:n,m:n,mm:n,h:"час",hh:n,d:"день",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:4}})}(n(30381))},40950:function(e,t,n){!function(e){"use strict";var t=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],n=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(30381))},10490:function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},90124:function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} වැනි/,ordinal:function(e){return e+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(e){return"ප.ව."===e||"පස් වරු"===e},meridiem:function(e,t,n){return e>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(30381))},64249:function(e,t,n){!function(e){"use strict";var t="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function i(e){return e>1&&e<5}function o(e,t,n,o){var a=e+" ";switch(n){case"s":return t||o?"pár sekúnd":"pár sekundami";case"ss":return t||o?a+(i(e)?"sekundy":"sekúnd"):a+"sekundami";case"m":return t?"minúta":o?"minútu":"minútou";case"mm":return t||o?a+(i(e)?"minúty":"minút"):a+"minútami";case"h":return t?"hodina":o?"hodinu":"hodinou";case"hh":return t||o?a+(i(e)?"hodiny":"hodín"):a+"hodinami";case"d":return t||o?"deň":"dňom";case"dd":return t||o?a+(i(e)?"dni":"dní"):a+"dňami";case"M":return t||o?"mesiac":"mesiacom";case"MM":return t||o?a+(i(e)?"mesiace":"mesiacov"):a+"mesiacmi";case"y":return t||o?"rok":"rokom";case"yy":return t||o?a+(i(e)?"roky":"rokov"):a+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:case 4:case 5:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:o,ss:o,m:o,mm:o,h:o,hh:o,d:o,dd:o,M:o,MM:o,y:o,yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},14985:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o=e+" ";switch(n){case"s":return t||i?"nekaj sekund":"nekaj sekundami";case"ss":return o+=1===e?t?"sekundo":"sekundi":2===e?t||i?"sekundi":"sekundah":e<5?t||i?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return o+=1===e?t?"minuta":"minuto":2===e?t||i?"minuti":"minutama":e<5?t||i?"minute":"minutami":t||i?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return o+=1===e?t?"ura":"uro":2===e?t||i?"uri":"urama":e<5?t||i?"ure":"urami":t||i?"ur":"urami";case"d":return t||i?"en dan":"enim dnem";case"dd":return o+=1===e?t||i?"dan":"dnem":2===e?t||i?"dni":"dnevoma":t||i?"dni":"dnevi";case"M":return t||i?"en mesec":"enim mesecem";case"MM":return o+=1===e?t||i?"mesec":"mesecem":2===e?t||i?"meseca":"mesecema":e<5?t||i?"mesece":"meseci":t||i?"mesecev":"meseci";case"y":return t||i?"eno leto":"enim letom";case"yy":return o+=1===e?t||i?"leto":"letom":2===e?t||i?"leti":"letoma":e<5?t||i?"leta":"leti":t||i?"let":"leti"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},51104:function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},79915:function(e,t,n){!function(e){"use strict";var t={words:{ss:["секунда","секунде","секунди"],m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var o=t.words[i];return 1===i.length?n?o[0]:o[1]:e+" "+t.correctGrammaticalCase(e,o)}};e.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"дан",dd:t.translate,M:"месец",MM:t.translate,y:"годину",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},49131:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var o=t.words[i];return 1===i.length?n?o[0]:o[1]:e+" "+t.correctGrammaticalCase(e,o)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},85893:function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},98760:function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t||2===t?"a":"e")},week:{dow:1,doy:4}})}(n(30381))},91172:function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(30381))},27333:function(e,t,n){!function(e){"use strict";var t={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};e.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}வது/,ordinal:function(e){return e+"வது"},preparse:function(e){return e.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(e,t,n){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t||"நண்பகல்"===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(30381))},23110:function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జూలై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జూలై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(e,t){return 12===e&&(e=0),"రాత్రి"===t?e<4?e:e+12:"ఉదయం"===t?e:"మధ్యాహ్నం"===t?e>=10?e:e+12:"సాయంత్రం"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"రాత్రి":e<10?"ఉదయం":e<17?"మధ్యాహ్నం":e<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(30381))},52095:function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juniu_Juliu_Augustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Aug_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sexta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sext_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Sex_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",ss:"minutu %d",m:"minutu ida",mm:"minutus %d",h:"horas ida",hh:"horas %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},9041:function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(30381))},75768:function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(30381))},89444:function(e,t,n){!function(e){"use strict";var t="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"}function i(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu’":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"}function o(e,t,n,i){var o=a(e);switch(n){case"ss":return o+" lup";case"mm":return o+" tup";case"hh":return o+" rep";case"dd":return o+" jaj";case"MM":return o+" jar";case"yy":return o+" DIS"}}function a(e){var n=Math.floor(e%1e3/100),i=Math.floor(e%100/10),o=e%10,a="";return n>0&&(a+=t[n]+"vatlh"),i>0&&(a+=(""!==a?" ":"")+t[i]+"maH"),o>0&&(a+=(""!==a?" ":"")+t[o]),""===a?"pagh":a}e.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:n,past:i,s:"puS lup",ss:o,m:"wa’ tup",mm:o,h:"wa’ rep",hh:o,d:"wa’ jaj",dd:o,M:"wa’ jar",MM:o,y:"wa’ DIS",yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},72397:function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};e.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},dayOfMonthOrdinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(e){if(0===e)return e+"'ıncı";var n=e%10,i=e%100-n,o=e>=100?100:null;return e+(t[n]||t[i]||t[o])},week:{dow:1,doy:7}})}(n(30381))},28254:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n míut","'iens míut"],mm:[e+" míuts",e+" míuts"],h:["'n þora","'iensa þora"],hh:[e+" þoras",e+" þoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return i||t?o[n][0]:o[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},30699:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(30381))},51106:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(30381))},67691:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"хвилина":"хвилину":"h"===i?n?"година":"годину":e+" "+t({ss:n?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:n?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:n?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[i],+e)}function i(e,t){var n={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return e?n[/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative}function o(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}e.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:i,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:o("[Сьогодні "),nextDay:o("[Завтра "),lastDay:o("[Вчора "),nextWeek:o("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return o("[Минулої] dddd [").call(this);case 1:case 2:case 4:return o("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:n,m:n,mm:n,h:"годину",hh:n,d:"день",dd:n,M:"місяць",MM:n,y:"рік",yy:n},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(e){return/^(дня|вечора)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}})}(n(30381))},13795:function(e,t,n){!function(e){"use strict";var t=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],n=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(30381))},60588:function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(30381))},6791:function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(30381))},65666:function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(30381))},14378:function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},75805:function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/ọjọ́\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}})}(n(30381))},83839:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(30381))},55726:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(30381))},74152:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(30381))},46700:(e,t,n)=>{var i={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-nz":76319,"./en-nz.js":76319,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./th":9041,"./th.js":9041,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-tw":74152,"./zh-tw.js":74152};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id=46700},30381:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,i;function o(){return t.apply(null,arguments)}function a(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function d(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)p(t,n)&&(e[n]=t[n]);return p(t,"toString")&&(e.toString=t.toString),p(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t,n,i){return qn(e,t,n,i,!0).utc()}function _(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=_()),e._pf}function g(e){if(null==e._isValid){var t=v(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),o=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return o;e._isValid=o}return e._isValid}function y(e){var t=m(NaN);return null!=e?f(v(t),e):v(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var b=o.momentProperties=[];function w(e,t){var n,i,o;if(d(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),d(t._i)||(e._i=t._i),d(t._f)||(e._f=t._f),d(t._l)||(e._l=t._l),d(t._strict)||(e._strict=t._strict),d(t._tzm)||(e._tzm=t._tzm),d(t._isUTC)||(e._isUTC=t._isUTC),d(t._offset)||(e._offset=t._offset),d(t._pf)||(e._pf=v(t)),d(t._locale)||(e._locale=t._locale),b.length>0)for(n=0;n<b.length;n++)d(o=t[i=b[n]])||(e[i]=o);return e}var k=!1;function C(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===k&&(k=!0,o.updateOffset(this),k=!1)}function x(e){return e instanceof C||null!=e&&null!=e._isAMomentObject}function S(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function M(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=S(t)),n}function T(e,t,n){var i,o=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(i=0;i<o;i++)(n&&e[i]!==t[i]||!n&&M(e[i])!==M(t[i]))&&s++;return s+a}function L(e){!1===o.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function D(e,t){var n=!0;return f((function(){if(null!=o.deprecationHandler&&o.deprecationHandler(null,e),n){for(var i,a=[],s=0;s<arguments.length;s++){if(i="","object"==typeof arguments[s]){for(var r in i+="\n["+s+"] ",arguments[0])i+=r+": "+arguments[0][r]+", ";i=i.slice(0,-2)}else i=arguments[s];a.push(i)}L(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var E,O={};function A(e,t){null!=o.deprecationHandler&&o.deprecationHandler(e,t),O[e]||(L(t),O[e]=!0)}function I(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function P(e){var t,n;for(n in e)I(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R(e,t){var n,i=f({},e);for(n in t)p(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},f(i[n],e[n]),f(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)p(e,n)&&!p(t,n)&&r(e[n])&&(i[n]=f({},i[n]));return i}function j(e){null!=e&&this.set(e)}o.suppressDeprecationWarnings=!1,o.deprecationHandler=null,E=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)p(e,t)&&n.push(t);return n};var Y={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function H(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return I(i)?i.call(t,n):i}var N={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function F(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])}var B="Invalid date";function $(){return this._invalidDate}var z="%d",W=/\d{1,2}/;function U(e){return this._ordinal.replace("%d",e)}var V={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function q(e,t,n,i){var o=this._relativeTime[n];return I(o)?o(e,t,n,i):o.replace(/%d/i,e)}function Z(e,t){var n=this._relativeTime[e>0?"future":"past"];return I(n)?n(t):n.replace(/%s/i,t)}var G={};function J(e,t){var n=e.toLowerCase();G[n]=G[n+"s"]=G[t]=e}function K(e){return"string"==typeof e?G[e]||G[e.toLowerCase()]:void 0}function X(e){var t,n,i={};for(n in e)p(e,n)&&(t=K(n))&&(i[t]=e[n]);return i}var Q={};function ee(e,t){Q[e]=t}function te(e){var t=[];for(var n in e)t.push({unit:n,priority:Q[n]});return t.sort((function(e,t){return e.priority-t.priority})),t}function ne(e,t,n){var i=""+Math.abs(e),o=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}var ie=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,oe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ae={},se={};function re(e,t,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),e&&(se[e]=o),t&&(se[t[0]]=function(){return ne(o.apply(this,arguments),t[1],t[2])}),n&&(se[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function le(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function de(e){var t,n,i=e.match(ie);for(t=0,n=i.length;t<n;t++)se[i[t]]?i[t]=se[i[t]]:i[t]=le(i[t]);return function(t){var o,a="";for(o=0;o<n;o++)a+=I(i[o])?i[o].call(t,e):i[o];return a}}function ce(e,t){return e.isValid()?(t=ue(t,e.localeData()),ae[t]=ae[t]||de(t),ae[t](e)):e.localeData().invalidDate()}function ue(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(oe.lastIndex=0;n>=0&&oe.test(e);)e=e.replace(oe,i),oe.lastIndex=0,n-=1;return e}var he=/\d/,pe=/\d\d/,fe=/\d{3}/,me=/\d{4}/,_e=/[+-]?\d{6}/,ve=/\d\d?/,ge=/\d\d\d\d?/,ye=/\d\d\d\d\d\d?/,be=/\d{1,3}/,we=/\d{1,4}/,ke=/[+-]?\d{1,6}/,Ce=/\d+/,xe=/[+-]?\d+/,Se=/Z|[+-]\d\d:?\d\d/gi,Me=/Z|[+-]\d\d(?::?\d\d)?/gi,Te=/[+-]?\d+(\.\d{1,3})?/,Le=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,De={};function Ee(e,t,n){De[e]=I(t)?t:function(e,i){return e&&n?n:t}}function Oe(e,t){return p(De,e)?De[e](t._strict,t._locale):new RegExp(Ae(e))}function Ae(e){return Ie(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,o){return t||n||i||o})))}function Ie(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Pe={};function Re(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),c(t)&&(i=function(e,n){n[t]=M(e)}),n=0;n<e.length;n++)Pe[e[n]]=i}function je(e,t){Re(e,(function(e,n,i,o){i._w=i._w||{},t(e,i._w,i,o)}))}function Ye(e,t,n){null!=t&&p(Pe,e)&&Pe[e](t,n._a,n,e)}var He=0,Ne=1,Fe=2,Be=3,$e=4,ze=5,We=6,Ue=7,Ve=8;function qe(e){return Ze(e)?366:365}function Ze(e){return e%4==0&&e%100!=0||e%400==0}re("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),re(0,["YY",2],0,(function(){return this.year()%100})),re(0,["YYYY",4],0,"year"),re(0,["YYYYY",5],0,"year"),re(0,["YYYYYY",6,!0],0,"year"),J("year","y"),ee("year",1),Ee("Y",xe),Ee("YY",ve,pe),Ee("YYYY",we,me),Ee("YYYYY",ke,_e),Ee("YYYYYY",ke,_e),Re(["YYYYY","YYYYYY"],He),Re("YYYY",(function(e,t){t[He]=2===e.length?o.parseTwoDigitYear(e):M(e)})),Re("YY",(function(e,t){t[He]=o.parseTwoDigitYear(e)})),Re("Y",(function(e,t){t[He]=parseInt(e,10)})),o.parseTwoDigitYear=function(e){return M(e)+(M(e)>68?1900:2e3)};var Ge,Je=Xe("FullYear",!0);function Ke(){return Ze(this.year())}function Xe(e,t){return function(n){return null!=n?(et(this,e,n),o.updateOffset(this,t),this):Qe(this,e)}}function Qe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function et(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&Ze(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ot(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function tt(e){return I(this[e=K(e)])?this[e]():this}function nt(e,t){if("object"==typeof e)for(var n=te(e=X(e)),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit]);else if(I(this[e=K(e)]))return this[e](t);return this}function it(e,t){return(e%t+t)%t}function ot(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=it(t,12);return e+=(t-n)/12,1===n?Ze(e)?29:28:31-n%7%2}Ge=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},re("M",["MM",2],"Mo",(function(){return this.month()+1})),re("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),re("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),J("month","M"),ee("month",8),Ee("M",ve),Ee("MM",ve,pe),Ee("MMM",(function(e,t){return t.monthsShortRegex(e)})),Ee("MMMM",(function(e,t){return t.monthsRegex(e)})),Re(["M","MM"],(function(e,t){t[Ne]=M(e)-1})),Re(["MMM","MMMM"],(function(e,t,n,i){var o=n._locale.monthsParse(e,i,n._strict);null!=o?t[Ne]=o:v(n).invalidMonth=e}));var at=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,st="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function rt(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||at).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}var lt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function dt(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[at.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(e,t,n){var i,o,a,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=m([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(o=Ge.call(this._shortMonthsParse,s))?o:null:-1!==(o=Ge.call(this._longMonthsParse,s))?o:null:"MMM"===t?-1!==(o=Ge.call(this._shortMonthsParse,s))||-1!==(o=Ge.call(this._longMonthsParse,s))?o:null:-1!==(o=Ge.call(this._longMonthsParse,s))||-1!==(o=Ge.call(this._shortMonthsParse,s))?o:null}function ut(e,t,n){var i,o,a;if(this._monthsParseExact)return ct.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=m([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function ht(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=M(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),ot(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function pt(e){return null!=e?(ht(this,e),o.updateOffset(this,!0),this):Qe(this,"Month")}function ft(){return ot(this.year(),this.month())}var mt=Le;function _t(e){return this._monthsParseExact?(p(this,"_monthsRegex")||yt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(p(this,"_monthsShortRegex")||(this._monthsShortRegex=mt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}var vt=Le;function gt(e){return this._monthsParseExact?(p(this,"_monthsRegex")||yt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(p(this,"_monthsRegex")||(this._monthsRegex=vt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function yt(){function e(e,t){return t.length-e.length}var t,n,i=[],o=[],a=[];for(t=0;t<12;t++)n=m([2e3,t]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),o.sort(e),a.sort(e),t=0;t<12;t++)i[t]=Ie(i[t]),o[t]=Ie(o[t]);for(t=0;t<24;t++)a[t]=Ie(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function bt(e,t,n,i,o,a,s){var r=new Date(e,t,n,i,o,a,s);return e<100&&e>=0&&isFinite(r.getFullYear())&&r.setFullYear(e),r}function wt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function kt(e,t,n){var i=7+t-n;return-(7+wt(e,0,i).getUTCDay()-t)%7+i-1}function Ct(e,t,n,i,o){var a,s,r=1+7*(t-1)+(7+n-i)%7+kt(e,i,o);return r<=0?s=qe(a=e-1)+r:r>qe(e)?(a=e+1,s=r-qe(e)):(a=e,s=r),{year:a,dayOfYear:s}}function xt(e,t,n){var i,o,a=kt(e.year(),t,n),s=Math.floor((e.dayOfYear()-a-1)/7)+1;return s<1?i=s+St(o=e.year()-1,t,n):s>St(e.year(),t,n)?(i=s-St(e.year(),t,n),o=e.year()+1):(o=e.year(),i=s),{week:i,year:o}}function St(e,t,n){var i=kt(e,t,n),o=kt(e+1,t,n);return(qe(e)-i+o)/7}function Mt(e){return xt(e,this._week.dow,this._week.doy).week}re("w",["ww",2],"wo","week"),re("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),ee("week",5),ee("isoWeek",5),Ee("w",ve),Ee("ww",ve,pe),Ee("W",ve),Ee("WW",ve,pe),je(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=M(e)}));var Tt={dow:0,doy:6};function Lt(){return this._week.dow}function Dt(){return this._week.doy}function Et(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ot(e){var t=xt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function At(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function It(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}re("d",0,"do","day"),re("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),re("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),re("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),re("e",0,0,"weekday"),re("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),ee("day",11),ee("weekday",11),ee("isoWeekday",11),Ee("d",ve),Ee("e",ve),Ee("E",ve),Ee("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Ee("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Ee("dddd",(function(e,t){return t.weekdaysRegex(e)})),je(["dd","ddd","dddd"],(function(e,t,n,i){var o=n._locale.weekdaysParse(e,i,n._strict);null!=o?t.d=o:v(n).invalidWeekday=e})),je(["d","e","E"],(function(e,t,n,i){t[i]=M(e)}));var Pt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Rt(e,t){return e?s(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:s(this._weekdays)?this._weekdays:this._weekdays.standalone}var jt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Yt(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var Ht="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Nt(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ft(e,t,n){var i,o,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=m([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(o=Ge.call(this._weekdaysParse,s))?o:null:"ddd"===t?-1!==(o=Ge.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=Ge.call(this._minWeekdaysParse,s))?o:null:"dddd"===t?-1!==(o=Ge.call(this._weekdaysParse,s))||-1!==(o=Ge.call(this._shortWeekdaysParse,s))||-1!==(o=Ge.call(this._minWeekdaysParse,s))?o:null:"ddd"===t?-1!==(o=Ge.call(this._shortWeekdaysParse,s))||-1!==(o=Ge.call(this._weekdaysParse,s))||-1!==(o=Ge.call(this._minWeekdaysParse,s))?o:null:-1!==(o=Ge.call(this._minWeekdaysParse,s))||-1!==(o=Ge.call(this._weekdaysParse,s))||-1!==(o=Ge.call(this._shortWeekdaysParse,s))?o:null}function Bt(e,t,n){var i,o,a;if(this._weekdaysParseExact)return Ft.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=m([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function $t(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=At(e,this.localeData()),this.add(e-t,"d")):t}function zt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=It(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}var Ut=Le;function Vt(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(p(this,"_weekdaysRegex")||(this._weekdaysRegex=Ut),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}var qt=Le;function Zt(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}var Gt=Le;function Jt(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Gt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Kt(){function e(e,t){return t.length-e.length}var t,n,i,o,a,s=[],r=[],l=[],d=[];for(t=0;t<7;t++)n=m([2e3,1]).day(t),i=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),a=this.weekdays(n,""),s.push(i),r.push(o),l.push(a),d.push(i),d.push(o),d.push(a);for(s.sort(e),r.sort(e),l.sort(e),d.sort(e),t=0;t<7;t++)r[t]=Ie(r[t]),l[t]=Ie(l[t]),d[t]=Ie(d[t]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Qt(){return this.hours()||24}function en(e,t){re(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function tn(e,t){return t._meridiemParse}function nn(e){return"p"===(e+"").toLowerCase().charAt(0)}re("H",["HH",2],0,"hour"),re("h",["hh",2],0,Xt),re("k",["kk",2],0,Qt),re("hmm",0,0,(function(){return""+Xt.apply(this)+ne(this.minutes(),2)})),re("hmmss",0,0,(function(){return""+Xt.apply(this)+ne(this.minutes(),2)+ne(this.seconds(),2)})),re("Hmm",0,0,(function(){return""+this.hours()+ne(this.minutes(),2)})),re("Hmmss",0,0,(function(){return""+this.hours()+ne(this.minutes(),2)+ne(this.seconds(),2)})),en("a",!0),en("A",!1),J("hour","h"),ee("hour",13),Ee("a",tn),Ee("A",tn),Ee("H",ve),Ee("h",ve),Ee("k",ve),Ee("HH",ve,pe),Ee("hh",ve,pe),Ee("kk",ve,pe),Ee("hmm",ge),Ee("hmmss",ye),Ee("Hmm",ge),Ee("Hmmss",ye),Re(["H","HH"],Be),Re(["k","kk"],(function(e,t,n){var i=M(e);t[Be]=24===i?0:i})),Re(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Re(["h","hh"],(function(e,t,n){t[Be]=M(e),v(n).bigHour=!0})),Re("hmm",(function(e,t,n){var i=e.length-2;t[Be]=M(e.substr(0,i)),t[$e]=M(e.substr(i)),v(n).bigHour=!0})),Re("hmmss",(function(e,t,n){var i=e.length-4,o=e.length-2;t[Be]=M(e.substr(0,i)),t[$e]=M(e.substr(i,2)),t[ze]=M(e.substr(o)),v(n).bigHour=!0})),Re("Hmm",(function(e,t,n){var i=e.length-2;t[Be]=M(e.substr(0,i)),t[$e]=M(e.substr(i))})),Re("Hmmss",(function(e,t,n){var i=e.length-4,o=e.length-2;t[Be]=M(e.substr(0,i)),t[$e]=M(e.substr(i,2)),t[ze]=M(e.substr(o))}));var on=/[ap]\.?m?\.?/i;function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var sn,rn=Xe("Hours",!0),ln={calendar:Y,longDateFormat:N,invalidDate:B,ordinal:z,dayOfMonthOrdinalParse:W,relativeTime:V,months:st,monthsShort:lt,week:Tt,weekdays:Pt,weekdaysMin:Ht,weekdaysShort:jt,meridiemParse:on},dn={},cn={};function un(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){for(var t,n,i,o,a=0;a<e.length;){for(t=(o=un(e[a]).split("-")).length,n=(n=un(e[a+1]))?n.split("-"):null;t>0;){if(i=pn(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&T(o,n,!0)>=t-1)break;t--}a++}return null}function pn(t){var i=null;if(!dn[t]&&e&&e.exports)try{i=sn._abbr,n(46700)("./"+t),fn(i)}catch(e){}return dn[t]}function fn(e,t){var n;return e&&(n=d(t)?vn(e):mn(e,t))&&(sn=n),sn._abbr}function mn(e,t){if(null!==t){var n=ln;if(t.abbr=e,null!=dn[e])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=dn[e]._config;else if(null!=t.parentLocale){if(null==dn[t.parentLocale])return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;n=dn[t.parentLocale]._config}return dn[e]=new j(R(n,t)),cn[e]&&cn[e].forEach((function(e){mn(e.name,e.config)})),fn(e),dn[e]}return delete dn[e],null}function _n(e,t){if(null!=t){var n,i,o=ln;null!=(i=pn(e))&&(o=i._config),(n=new j(t=R(o,t))).parentLocale=dn[e],dn[e]=n,fn(e)}else null!=dn[e]&&(null!=dn[e].parentLocale?dn[e]=dn[e].parentLocale:null!=dn[e]&&delete dn[e]);return dn[e]}function vn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return sn;if(!s(e)){if(t=pn(e))return t;e=[e]}return hn(e)}function gn(){return E(dn)}function yn(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[Ne]<0||n[Ne]>11?Ne:n[Fe]<1||n[Fe]>ot(n[He],n[Ne])?Fe:n[Be]<0||n[Be]>24||24===n[Be]&&(0!==n[$e]||0!==n[ze]||0!==n[We])?Be:n[$e]<0||n[$e]>59?$e:n[ze]<0||n[ze]>59?ze:n[We]<0||n[We]>999?We:-1,v(e)._overflowDayOfYear&&(t<He||t>Fe)&&(t=Fe),v(e)._overflowWeeks&&-1===t&&(t=Ue),v(e)._overflowWeekday&&-1===t&&(t=Ve),v(e).overflow=t),e}function bn(e,t,n){return null!=e?e:null!=t?t:n}function wn(e){var t=new Date(o.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function kn(e){var t,n,i,o,a,s=[];if(!e._d){for(i=wn(e),e._w&&null==e._a[Fe]&&null==e._a[Ne]&&Cn(e),null!=e._dayOfYear&&(a=bn(e._a[He],i[He]),(e._dayOfYear>qe(a)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=wt(a,0,e._dayOfYear),e._a[Ne]=n.getUTCMonth(),e._a[Fe]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Be]&&0===e._a[$e]&&0===e._a[ze]&&0===e._a[We]&&(e._nextDay=!0,e._a[Be]=0),e._d=(e._useUTC?wt:bt).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Be]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(v(e).weekdayMismatch=!0)}}function Cn(e){var t,n,i,o,a,s,r,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,s=4,n=bn(t.GG,e._a[He],xt(Zn(),1,4).year),i=bn(t.W,1),((o=bn(t.E,1))<1||o>7)&&(l=!0);else{a=e._locale._week.dow,s=e._locale._week.doy;var d=xt(Zn(),a,s);n=bn(t.gg,e._a[He],d.year),i=bn(t.w,d.week),null!=t.d?((o=t.d)<0||o>6)&&(l=!0):null!=t.e?(o=t.e+a,(t.e<0||t.e>6)&&(l=!0)):o=a}i<1||i>St(n,a,s)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(r=Ct(n,i,o,a,s),e._a[He]=r.year,e._dayOfYear=r.dayOfYear)}var xn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mn=/Z|[+-]\d\d(?::?\d\d)?/,Tn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ln=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Dn=/^\/?Date\((\-?\d+)/i;function En(e){var t,n,i,o,a,s,r=e._i,l=xn.exec(r)||Sn.exec(r);if(l){for(v(e).iso=!0,t=0,n=Tn.length;t<n;t++)if(Tn[t][1].exec(l[1])){o=Tn[t][0],i=!1!==Tn[t][2];break}if(null==o)return void(e._isValid=!1);if(l[3]){for(t=0,n=Ln.length;t<n;t++)if(Ln[t][1].exec(l[3])){a=(l[2]||" ")+Ln[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(l[4]){if(!Mn.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=o+(a||"")+(s||""),Fn(e)}else e._isValid=!1}var On=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function An(e,t,n,i,o,a){var s=[In(e),lt.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(o,10)];return a&&s.push(parseInt(a,10)),s}function In(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Pn(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function Rn(e,t,n){return!e||jt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}var jn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Yn(e,t,n){if(e)return jn[e];if(t)return 0;var i=parseInt(n,10),o=i%100;return(i-o)/100*60+o}function Hn(e){var t=On.exec(Pn(e._i));if(t){var n=An(t[4],t[3],t[2],t[5],t[6],t[7]);if(!Rn(t[1],n,e))return;e._a=n,e._tzm=Yn(t[8],t[9],t[10]),e._d=wt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function Nn(e){var t=Dn.exec(e._i);null===t?(En(e),!1===e._isValid&&(delete e._isValid,Hn(e),!1===e._isValid&&(delete e._isValid,o.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Fn(e){if(e._f!==o.ISO_8601)if(e._f!==o.RFC_2822){e._a=[],v(e).empty=!0;var t,n,i,a,s,r=""+e._i,l=r.length,d=0;for(i=ue(e._f,e._locale).match(ie)||[],t=0;t<i.length;t++)a=i[t],(n=(r.match(Oe(a,e))||[])[0])&&((s=r.substr(0,r.indexOf(n))).length>0&&v(e).unusedInput.push(s),r=r.slice(r.indexOf(n)+n.length),d+=n.length),se[a]?(n?v(e).empty=!1:v(e).unusedTokens.push(a),Ye(a,n,e)):e._strict&&!n&&v(e).unusedTokens.push(a);v(e).charsLeftOver=l-d,r.length>0&&v(e).unusedInput.push(r),e._a[Be]<=12&&!0===v(e).bigHour&&e._a[Be]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[Be]=Bn(e._locale,e._a[Be],e._meridiem),kn(e),yn(e)}else Hn(e);else En(e)}function Bn(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function $n(e){var t,n,i,o,a;if(0===e._f.length)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)a=0,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],Fn(t),g(t)&&(a+=v(t).charsLeftOver,a+=10*v(t).unusedTokens.length,v(t).score=a,(null==i||a<i)&&(i=a,n=t));f(e,n||t)}function zn(e){if(!e._d){var t=X(e._i);e._a=h([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),kn(e)}}function Wn(e){var t=new C(yn(Un(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Un(e){var t=e._i,n=e._f;return e._locale=e._locale||vn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),x(t)?new C(yn(t)):(u(t)?e._d=t:s(n)?$n(e):n?Fn(e):Vn(e),g(e)||(e._d=null),e))}function Vn(e){var t=e._i;d(t)?e._d=new Date(o.now()):u(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Nn(e):s(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),kn(e)):r(t)?zn(e):c(t)?e._d=new Date(t):o.createFromInputFallback(e)}function qn(e,t,n,i,o){var a={};return!0!==n&&!1!==n||(i=n,n=void 0),(r(e)&&l(e)||s(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=n,a._i=e,a._f=t,a._strict=i,Wn(a)}function Zn(e,t,n,i){return qn(e,t,n,i,!1)}o.createFromInputFallback=D("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),o.ISO_8601=function(){},o.RFC_2822=function(){};var Gn=D("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Zn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Jn=D("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Zn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Kn(e,t){var n,i;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Zn();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}function Xn(){return Kn("isBefore",[].slice.call(arguments,0))}function Qn(){return Kn("isAfter",[].slice.call(arguments,0))}var ei=function(){return Date.now?Date.now():+new Date},ti=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ni(e){for(var t in e)if(-1===Ge.call(ti,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<ti.length;++i)if(e[ti[i]]){if(n)return!1;parseFloat(e[ti[i]])!==M(e[ti[i]])&&(n=!0)}return!0}function ii(){return this._isValid}function oi(){return Mi(NaN)}function ai(e){var t=X(e),n=t.year||0,i=t.quarter||0,o=t.month||0,a=t.week||0,s=t.day||0,r=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._isValid=ni(t),this._milliseconds=+c+1e3*d+6e4*l+1e3*r*60*60,this._days=+s+7*a,this._months=+o+3*i+12*n,this._data={},this._locale=vn(),this._bubble()}function si(e){return e instanceof ai}function ri(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function li(e,t){re(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+ne(~~(e/60),2)+t+ne(~~e%60,2)}))}li("Z",":"),li("ZZ",""),Ee("Z",Me),Ee("ZZ",Me),Re(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=ci(Me,e)}));var di=/([\+\-]|\d\d)/gi;function ci(e,t){var n=(t||"").match(e);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(di)||["-",0,0],o=60*i[1]+M(i[2]);return 0===o?0:"+"===i[0]?o:-o}function ui(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(x(e)||u(e)?e.valueOf():Zn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),o.updateOffset(n,!1),n):Zn(e).local()}function hi(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function pi(e,t,n){var i,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=ci(Me,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=hi(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==e&&(!t||this._changeInProgress?Oi(this,Mi(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,o.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:hi(this)}function fi(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function mi(e){return this.utcOffset(0,e)}function _i(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(hi(this),"m")),this}function vi(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=ci(Se,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function gi(e){return!!this.isValid()&&(e=e?Zn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function yi(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function bi(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e={};if(w(e,this),(e=Un(e))._a){var t=e._isUTC?m(e._a):Zn(e._a);this._isDSTShifted=this.isValid()&&T(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function wi(){return!!this.isValid()&&!this._isUTC}function ki(){return!!this.isValid()&&this._isUTC}function Ci(){return!!this.isValid()&&this._isUTC&&0===this._offset}o.updateOffset=function(){};var xi=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Si=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Mi(e,t){var n,i,o,a=e,s=null;return si(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:c(e)?(a={},t?a[t]=e:a.milliseconds=e):(s=xi.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:M(s[Fe])*n,h:M(s[Be])*n,m:M(s[$e])*n,s:M(s[ze])*n,ms:M(ri(1e3*s[We]))*n}):(s=Si.exec(e))?(n="-"===s[1]?-1:(s[1],1),a={y:Ti(s[2],n),M:Ti(s[3],n),w:Ti(s[4],n),d:Ti(s[5],n),h:Ti(s[6],n),m:Ti(s[7],n),s:Ti(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=Di(Zn(a.from),Zn(a.to)),(a={}).ms=o.milliseconds,a.M=o.months),i=new ai(a),si(e)&&p(e,"_locale")&&(i._locale=e._locale),i}function Ti(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Li(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Di(e,t){var n;return e.isValid()&&t.isValid()?(t=ui(t,e),e.isBefore(t)?n=Li(e,t):((n=Li(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ei(e,t){return function(n,i){var o;return null===i||isNaN(+i)||(A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),Oi(this,Mi(n="string"==typeof n?+n:n,i),e),this}}function Oi(e,t,n,i){var a=t._milliseconds,s=ri(t._days),r=ri(t._months);e.isValid()&&(i=null==i||i,r&&ht(e,Qe(e,"Month")+r*n),s&&et(e,"Date",Qe(e,"Date")+s*n),a&&e._d.setTime(e._d.valueOf()+a*n),i&&o.updateOffset(e,s||r))}Mi.fn=ai.prototype,Mi.invalid=oi;var Ai=Ei(1,"add"),Ii=Ei(-1,"subtract");function Pi(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Ri(e,t){var n=e||Zn(),i=ui(n,this).startOf("day"),a=o.calendarFormat(this,i)||"sameElse",s=t&&(I(t[a])?t[a].call(this,n):t[a]);return this.format(s||this.localeData().calendar(a,this,Zn(n)))}function ji(){return new C(this)}function Yi(e,t){var n=x(e)?e:Zn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=K(d(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Hi(e,t){var n=x(e)?e:Zn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=K(d(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Ni(e,t,n,i){return("("===(i=i||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))}function Fi(e,t){var n,i=x(e)?e:Zn(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=K(t||"millisecond"))?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Bi(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function $i(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function zi(e,t,n){var i,o,a;if(!this.isValid())return NaN;if(!(i=ui(e,this)).isValid())return NaN;switch(o=6e4*(i.utcOffset()-this.utcOffset()),t=K(t)){case"year":a=Wi(this,i)/12;break;case"month":a=Wi(this,i);break;case"quarter":a=Wi(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-o)/864e5;break;case"week":a=(this-i-o)/6048e5;break;default:a=this-i}return n?a:S(a)}function Wi(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function Ui(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Vi(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?ce(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",ce(n,"Z")):ce(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function qi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o="-MM-DD[T]HH:mm:ss.SSS",a=t+'[")]';return this.format(n+i+o+a)}function Zi(e){e||(e=this.isUtc()?o.defaultFormatUtc:o.defaultFormat);var t=ce(this,e);return this.localeData().postformat(t)}function Gi(e,t){return this.isValid()&&(x(e)&&e.isValid()||Zn(e).isValid())?Mi({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ji(e){return this.from(Zn(),e)}function Ki(e,t){return this.isValid()&&(x(e)&&e.isValid()||Zn(e).isValid())?Mi({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Xi(e){return this.to(Zn(),e)}function Qi(e){var t;return void 0===e?this._locale._abbr:(null!=(t=vn(e))&&(this._locale=t),this)}o.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",o.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var eo=D("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function to(){return this._locale}function no(e){switch(e=K(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function io(e){return void 0===(e=K(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function oo(){return this._d.valueOf()-6e4*(this._offset||0)}function ao(){return Math.floor(this.valueOf()/1e3)}function so(){return new Date(this.valueOf())}function ro(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function lo(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function co(){return this.isValid()?this.toISOString():null}function uo(){return g(this)}function ho(){return f({},v(this))}function po(){return v(this).overflow}function fo(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function mo(e,t){re(0,[e,e.length],0,t)}function _o(e){return bo.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function vo(e){return bo.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function go(){return St(this.year(),1,4)}function yo(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function bo(e,t,n,i,o){var a;return null==e?xt(this,i,o).year:(t>(a=St(e,i,o))&&(t=a),wo.call(this,e,t,n,i,o))}function wo(e,t,n,i,o){var a=Ct(e,t,n,i,o),s=wt(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function ko(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}re(0,["gg",2],0,(function(){return this.weekYear()%100})),re(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),mo("gggg","weekYear"),mo("ggggg","weekYear"),mo("GGGG","isoWeekYear"),mo("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),ee("weekYear",1),ee("isoWeekYear",1),Ee("G",xe),Ee("g",xe),Ee("GG",ve,pe),Ee("gg",ve,pe),Ee("GGGG",we,me),Ee("gggg",we,me),Ee("GGGGG",ke,_e),Ee("ggggg",ke,_e),je(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=M(e)})),je(["gg","GG"],(function(e,t,n,i){t[i]=o.parseTwoDigitYear(e)})),re("Q",0,"Qo","quarter"),J("quarter","Q"),ee("quarter",7),Ee("Q",he),Re("Q",(function(e,t){t[Ne]=3*(M(e)-1)})),re("D",["DD",2],"Do","date"),J("date","D"),ee("date",9),Ee("D",ve),Ee("DD",ve,pe),Ee("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Re(["D","DD"],Fe),Re("Do",(function(e,t){t[Fe]=M(e.match(ve)[0])}));var Co=Xe("Date",!0);function xo(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}re("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),ee("dayOfYear",4),Ee("DDD",be),Ee("DDDD",fe),Re(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=M(e)})),re("m",["mm",2],0,"minute"),J("minute","m"),ee("minute",14),Ee("m",ve),Ee("mm",ve,pe),Re(["m","mm"],$e);var So=Xe("Minutes",!1);re("s",["ss",2],0,"second"),J("second","s"),ee("second",15),Ee("s",ve),Ee("ss",ve,pe),Re(["s","ss"],ze);var Mo,To=Xe("Seconds",!1);for(re("S",0,0,(function(){return~~(this.millisecond()/100)})),re(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),re(0,["SSS",3],0,"millisecond"),re(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),re(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),re(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),re(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),re(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),re(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),J("millisecond","ms"),ee("millisecond",16),Ee("S",be,he),Ee("SS",be,pe),Ee("SSS",be,fe),Mo="SSSS";Mo.length<=9;Mo+="S")Ee(Mo,Ce);function Lo(e,t){t[We]=M(1e3*("0."+e))}for(Mo="S";Mo.length<=9;Mo+="S")Re(Mo,Lo);var Do=Xe("Milliseconds",!1);function Eo(){return this._isUTC?"UTC":""}function Oo(){return this._isUTC?"Coordinated Universal Time":""}re("z",0,0,"zoneAbbr"),re("zz",0,0,"zoneName");var Ao=C.prototype;function Io(e){return Zn(1e3*e)}function Po(){return Zn.apply(null,arguments).parseZone()}function Ro(e){return e}Ao.add=Ai,Ao.calendar=Ri,Ao.clone=ji,Ao.diff=zi,Ao.endOf=io,Ao.format=Zi,Ao.from=Gi,Ao.fromNow=Ji,Ao.to=Ki,Ao.toNow=Xi,Ao.get=tt,Ao.invalidAt=po,Ao.isAfter=Yi,Ao.isBefore=Hi,Ao.isBetween=Ni,Ao.isSame=Fi,Ao.isSameOrAfter=Bi,Ao.isSameOrBefore=$i,Ao.isValid=uo,Ao.lang=eo,Ao.locale=Qi,Ao.localeData=to,Ao.max=Jn,Ao.min=Gn,Ao.parsingFlags=ho,Ao.set=nt,Ao.startOf=no,Ao.subtract=Ii,Ao.toArray=ro,Ao.toObject=lo,Ao.toDate=so,Ao.toISOString=Vi,Ao.inspect=qi,Ao.toJSON=co,Ao.toString=Ui,Ao.unix=ao,Ao.valueOf=oo,Ao.creationData=fo,Ao.year=Je,Ao.isLeapYear=Ke,Ao.weekYear=_o,Ao.isoWeekYear=vo,Ao.quarter=Ao.quarters=ko,Ao.month=pt,Ao.daysInMonth=ft,Ao.week=Ao.weeks=Et,Ao.isoWeek=Ao.isoWeeks=Ot,Ao.weeksInYear=yo,Ao.isoWeeksInYear=go,Ao.date=Co,Ao.day=Ao.days=$t,Ao.weekday=zt,Ao.isoWeekday=Wt,Ao.dayOfYear=xo,Ao.hour=Ao.hours=rn,Ao.minute=Ao.minutes=So,Ao.second=Ao.seconds=To,Ao.millisecond=Ao.milliseconds=Do,Ao.utcOffset=pi,Ao.utc=mi,Ao.local=_i,Ao.parseZone=vi,Ao.hasAlignedHourOffset=gi,Ao.isDST=yi,Ao.isLocal=wi,Ao.isUtcOffset=ki,Ao.isUtc=Ci,Ao.isUTC=Ci,Ao.zoneAbbr=Eo,Ao.zoneName=Oo,Ao.dates=D("dates accessor is deprecated. Use date instead.",Co),Ao.months=D("months accessor is deprecated. Use month instead",pt),Ao.years=D("years accessor is deprecated. Use year instead",Je),Ao.zone=D("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",fi),Ao.isDSTShifted=D("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",bi);var jo=j.prototype;function Yo(e,t,n,i){var o=vn(),a=m().set(i,t);return o[n](a,e)}function Ho(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return Yo(e,t,n,"month");var i,o=[];for(i=0;i<12;i++)o[i]=Yo(e,i,n,"month");return o}function No(e,t,n,i){"boolean"==typeof e?(c(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,c(t)&&(n=t,t=void 0),t=t||"");var o,a=vn(),s=e?a._week.dow:0;if(null!=n)return Yo(t,(n+s)%7,i,"day");var r=[];for(o=0;o<7;o++)r[o]=Yo(t,(o+s)%7,i,"day");return r}function Fo(e,t){return Ho(e,t,"months")}function Bo(e,t){return Ho(e,t,"monthsShort")}function $o(e,t,n){return No(e,t,n,"weekdays")}function zo(e,t,n){return No(e,t,n,"weekdaysShort")}function Wo(e,t,n){return No(e,t,n,"weekdaysMin")}jo.calendar=H,jo.longDateFormat=F,jo.invalidDate=$,jo.ordinal=U,jo.preparse=Ro,jo.postformat=Ro,jo.relativeTime=q,jo.pastFuture=Z,jo.set=P,jo.months=rt,jo.monthsShort=dt,jo.monthsParse=ut,jo.monthsRegex=gt,jo.monthsShortRegex=_t,jo.week=Mt,jo.firstDayOfYear=Dt,jo.firstDayOfWeek=Lt,jo.weekdays=Rt,jo.weekdaysMin=Nt,jo.weekdaysShort=Yt,jo.weekdaysParse=Bt,jo.weekdaysRegex=Vt,jo.weekdaysShortRegex=Zt,jo.weekdaysMinRegex=Jt,jo.isPM=nn,jo.meridiem=an,fn("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===M(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),o.lang=D("moment.lang is deprecated. Use moment.locale instead.",fn),o.langData=D("moment.langData is deprecated. Use moment.localeData instead.",vn);var Uo=Math.abs;function Vo(){var e=this._data;return this._milliseconds=Uo(this._milliseconds),this._days=Uo(this._days),this._months=Uo(this._months),e.milliseconds=Uo(e.milliseconds),e.seconds=Uo(e.seconds),e.minutes=Uo(e.minutes),e.hours=Uo(e.hours),e.months=Uo(e.months),e.years=Uo(e.years),this}function qo(e,t,n,i){var o=Mi(t,n);return e._milliseconds+=i*o._milliseconds,e._days+=i*o._days,e._months+=i*o._months,e._bubble()}function Zo(e,t){return qo(this,e,t,1)}function Go(e,t){return qo(this,e,t,-1)}function Jo(e){return e<0?Math.floor(e):Math.ceil(e)}function Ko(){var e,t,n,i,o,a=this._milliseconds,s=this._days,r=this._months,l=this._data;return a>=0&&s>=0&&r>=0||a<=0&&s<=0&&r<=0||(a+=864e5*Jo(Qo(r)+s),s=0,r=0),l.milliseconds=a%1e3,e=S(a/1e3),l.seconds=e%60,t=S(e/60),l.minutes=t%60,n=S(t/60),l.hours=n%24,s+=S(n/24),r+=o=S(Xo(s)),s-=Jo(Qo(o)),i=S(r/12),r%=12,l.days=s,l.months=r,l.years=i,this}function Xo(e){return 4800*e/146097}function Qo(e){return 146097*e/4800}function ea(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=K(e))||"year"===e)return t=this._days+i/864e5,n=this._months+Xo(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Qo(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function ta(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*M(this._months/12):NaN}function na(e){return function(){return this.as(e)}}var ia=na("ms"),oa=na("s"),aa=na("m"),sa=na("h"),ra=na("d"),la=na("w"),da=na("M"),ca=na("y");function ua(){return Mi(this)}function ha(e){return e=K(e),this.isValid()?this[e+"s"]():NaN}function pa(e){return function(){return this.isValid()?this._data[e]:NaN}}var fa=pa("milliseconds"),ma=pa("seconds"),_a=pa("minutes"),va=pa("hours"),ga=pa("days"),ya=pa("months"),ba=pa("years");function wa(){return S(this.days()/7)}var ka=Math.round,Ca={ss:44,s:45,m:45,h:22,d:26,M:11};function xa(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}function Sa(e,t,n){var i=Mi(e).abs(),o=ka(i.as("s")),a=ka(i.as("m")),s=ka(i.as("h")),r=ka(i.as("d")),l=ka(i.as("M")),d=ka(i.as("y")),c=o<=Ca.ss&&["s",o]||o<Ca.s&&["ss",o]||a<=1&&["m"]||a<Ca.m&&["mm",a]||s<=1&&["h"]||s<Ca.h&&["hh",s]||r<=1&&["d"]||r<Ca.d&&["dd",r]||l<=1&&["M"]||l<Ca.M&&["MM",l]||d<=1&&["y"]||["yy",d];return c[2]=t,c[3]=+e>0,c[4]=n,xa.apply(null,c)}function Ma(e){return void 0===e?ka:"function"==typeof e&&(ka=e,!0)}function Ta(e,t){return void 0!==Ca[e]&&(void 0===t?Ca[e]:(Ca[e]=t,"s"===e&&(Ca.ss=t-1),!0))}function La(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=Sa(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}var Da=Math.abs;function Ea(e){return(e>0)-(e<0)||+e}function Oa(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Da(this._milliseconds)/1e3,i=Da(this._days),o=Da(this._months);e=S(n/60),t=S(e/60),n%=60,e%=60;var a=S(o/12),s=o%=12,r=i,l=t,d=e,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",u=this.asSeconds();if(!u)return"P0D";var h=u<0?"-":"",p=Ea(this._months)!==Ea(u)?"-":"",f=Ea(this._days)!==Ea(u)?"-":"",m=Ea(this._milliseconds)!==Ea(u)?"-":"";return h+"P"+(a?p+a+"Y":"")+(s?p+s+"M":"")+(r?f+r+"D":"")+(l||d||c?"T":"")+(l?m+l+"H":"")+(d?m+d+"M":"")+(c?m+c+"S":"")}var Aa=ai.prototype;return Aa.isValid=ii,Aa.abs=Vo,Aa.add=Zo,Aa.subtract=Go,Aa.as=ea,Aa.asMilliseconds=ia,Aa.asSeconds=oa,Aa.asMinutes=aa,Aa.asHours=sa,Aa.asDays=ra,Aa.asWeeks=la,Aa.asMonths=da,Aa.asYears=ca,Aa.valueOf=ta,Aa._bubble=Ko,Aa.clone=ua,Aa.get=ha,Aa.milliseconds=fa,Aa.seconds=ma,Aa.minutes=_a,Aa.hours=va,Aa.days=ga,Aa.weeks=wa,Aa.months=ya,Aa.years=ba,Aa.humanize=La,Aa.toISOString=Oa,Aa.toString=Oa,Aa.toJSON=Oa,Aa.locale=Qi,Aa.localeData=to,Aa.toIsoString=D("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Oa),Aa.lang=eo,re("X",0,0,"unix"),re("x",0,0,"valueOf"),Ee("x",xe),Ee("X",Te),Re("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),Re("x",(function(e,t,n){n._d=new Date(M(e))})),o.version="2.20.1",a(Zn),o.fn=Ao,o.min=Xn,o.max=Qn,o.now=ei,o.utc=m,o.unix=Io,o.months=Fo,o.isDate=u,o.locale=fn,o.invalid=y,o.duration=Mi,o.isMoment=x,o.weekdays=$o,o.parseZone=Po,o.localeData=vn,o.isDuration=si,o.monthsShort=Bo,o.weekdaysMin=Wo,o.defineLocale=mn,o.updateLocale=_n,o.locales=gn,o.weekdaysShort=zo,o.normalizeUnits=K,o.relativeTimeRounding=Ma,o.relativeTimeThreshold=Ta,o.calendarFormat=Pi,o.prototype=Ao,o.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},o}()},43722:function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9531))},99599:function(e,t,n){!function(e){"use strict";var t=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},i=function(e){return function(i,o,a,s){var r=t(i),l=n[e][t(i)];return 2===r&&(l=l[o?0:1]),l.replace(/%d/i,i)}},o=["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-dz",{months:o,monthsShort:o,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:0,doy:4}})}(n(9531))},70030:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}})}(n(9531))},40863:function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},o=function(e){return function(t,o,a,s){var r=n(t),l=i[e][n(t)];return 2===r&&(l=l[o?0:1]),l.replace(/%d/i,t)}},a=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-ly",{months:a,monthsShort:a,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(9531))},61517:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(9531))},65631:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};e.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:0,doy:6}})}(n(9531))},84936:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(9531))},68297:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},o={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},a=function(e){return function(t,n,a,s){var r=i(t),l=o[e][i(t)];return 2===r&&(l=l[n?0:1]),l.replace(/%d/i,t)}},s=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar",{months:s,monthsShort:s,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:a("s"),ss:a("s"),m:a("m"),mm:a("m"),h:a("h"),hh:a("h"),d:a("d"),dd:a("d"),M:a("M"),MM:a("M"),y:a("y"),yy:a("y")},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(9531))},11782:function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"bir neçə saniyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(e){return/^(gündüz|axşam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var n=e%10,i=e%100-n,o=e>=100?100:null;return e+(t[n]||t[i]||t[o])},week:{dow:1,doy:7}})}(n(9531))},43495:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"хвіліна":"хвіліну":"h"===i?n?"гадзіна":"гадзіну":e+" "+t({ss:n?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:n?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:n?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[i],+e)}e.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:n,mm:n,h:n,hh:n,d:"дзень",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(e){return/^(дня|вечара)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}})}(n(9531))},22314:function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"яну_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Миналата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[Миналия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",w:"седмица",ww:"%d седмици",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(9531))},33582:function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(9531))},69949:function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn-bd",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/রাত|ভোর|সকাল|দুপুর|বিকাল|সন্ধ্যা|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t?e<4?e:e+12:"ভোর"===t||"সকাল"===t?e:"দুপুর"===t?e>=3?e:e+12:"বিকাল"===t||"সন্ধ্যা"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"রাত":e<6?"ভোর":e<12?"সকাল":e<15?"দুপুর":e<18?"বিকাল":e<20?"সন্ধ্যা":"রাত"},week:{dow:0,doy:6}})}(n(9531))},82631:function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t&&e>=4||"দুপুর"===t&&e<5||"বিকাল"===t?e+12:e},meridiem:function(e,t,n){return e<4?"রাত":e<10?"সকাল":e<17?"দুপুর":e<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(9531))},61824:function(e,t,n){!function(e){"use strict";var t={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};e.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་1_ཟླ་2_ཟླ་3_ཟླ་4_ཟླ་5_ཟླ་6_ཟླ་7_ཟླ་8_ཟླ་9_ཟླ་10_ཟླ་11_ཟླ་12".split("_"),monthsShortRegex:/^(ཟླ་\d{1,2})/,monthsParseExact:!0,weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི_ཟླ_མིག_ལྷག_ཕུར_སངས_སྤེན".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(e,t){return 12===e&&(e=0),"མཚན་མོ"===t&&e>=4||"ཉིན་གུང"===t&&e<5||"དགོང་དག"===t?e+12:e},meridiem:function(e,t,n){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(9531))},74325:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+o({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function n(e){switch(i(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function i(e){return e>9?i(e%10):e}function o(e,t){return 2===t?a(e):e}function a(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}var s=[/^gen/i,/^c[ʼ\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],r=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,l=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,d=/^(gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,c=[/^sul/i,/^lun/i,/^meurzh/i,/^merc[ʼ\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],u=[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],h=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Cʼhwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Cʼhwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercʼher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:h,fullWeekdaysParse:c,shortWeekdaysParse:u,minWeekdaysParse:h,monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:l,monthsShortStrictRegex:d,monthsParse:s,longMonthsParse:s,shortMonthsParse:s,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warcʼhoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Decʼh da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s ʼzo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},dayOfMonthOrdinalParse:/\d{1,2}(añ|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,t,n){return e<12?"a.m.":"g.m."}})}(n(9531))},70391:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9531))},38638:function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(9531))},33778:function(e,t,n){!function(e){"use strict";var t={format:"leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),standalone:"ledna_února_března_dubna_května_června_července_srpna_září_října_listopadu_prosince".split("_")},n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),i=[/^led/i,/^úno/i,/^bře/i,/^dub/i,/^kvě/i,/^(čvn|červen$|června)/i,/^(čvc|červenec|července)/i,/^srp/i,/^zář/i,/^říj/i,/^lis/i,/^pro/i],o=/^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;function a(e){return e>1&&e<5&&1!=~~(e/10)}function s(e,t,n,i){var o=e+" ";switch(n){case"s":return t||i?"pár sekund":"pár sekundami";case"ss":return t||i?o+(a(e)?"sekundy":"sekund"):o+"sekundami";case"m":return t?"minuta":i?"minutu":"minutou";case"mm":return t||i?o+(a(e)?"minuty":"minut"):o+"minutami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?o+(a(e)?"hodiny":"hodin"):o+"hodinami";case"d":return t||i?"den":"dnem";case"dd":return t||i?o+(a(e)?"dny":"dní"):o+"dny";case"M":return t||i?"měsíc":"měsícem";case"MM":return t||i?o+(a(e)?"měsíce":"měsíců"):o+"měsíci";case"y":return t||i?"rok":"rokem";case"yy":return t||i?o+(a(e)?"roky":"let"):o+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s,ss:s,m:s,mm:s,h:s,hh:s,d:s,dd:s,M:s,MM:s,y:s,yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},21098:function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/сехет$/i.exec(e)?"рен":/ҫул$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(9531))},37387:function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(9531))},18035:function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},23849:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?o[n][0]:o[n][1]}e.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},68471:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?o[n][0]:o[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},51058:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?o[n][0]:o[n][1]}e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},87337:function(e,t,n){!function(e){"use strict";var t=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(e){return"މފ"===e},meridiem:function(e,t,n){return e<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(9531))},34072:function(e,t,n){!function(e){"use strict";function t(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}e.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,n){return e>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){return 6===this.day()?"[το προηγούμενο] dddd [{}] LT":"[την προηγούμενη] dddd [{}] LT"},sameElse:"L"},calendar:function(e,n){var i=this._calendarEl[e],o=n&&n.hours();return t(i)&&(i=i.apply(n)),i.replace("{}",o%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(9531))},62497:function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(9531))},50319:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(9531))},15256:function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9531))},99081:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9531))},70954:function(e,t,n){!function(e){"use strict";e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(9531))},53406:function(e,t,n){!function(e){"use strict";e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(9531))},23113:function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9531))},83279:function(e,t,n){!function(e){"use strict";e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9531))},69040:function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_aŭg_sept_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(9531))},2592:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9531))},94529:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:4},invalidDate:"Fecha inválida"})}(n(9531))},38876:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})}(n(9531))},4961:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4},invalidDate:"Fecha inválida"})}(n(9531))},84719:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?o[n][2]?o[n][2]:o[n][1]:i?o[n][0]:o[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d päeva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},16783:function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9531))},96196:function(e,t,n){!function(e){"use strict";var t={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};e.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(e){return/بعد از ظهر/.test(e)},meridiem:function(e,t,n){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"%d ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(9531))},78238:function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",t[7],t[8],t[9]];function i(e,t,n,i){var a="";switch(n){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"ss":a=i?"sekunnin":"sekuntia";break;case"m":return i?"minuutin":"minuutti";case"mm":a=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":a=i?"tunnin":"tuntia";break;case"d":return i?"päivän":"päivä";case"dd":a=i?"päivän":"päivää";break;case"M":return i?"kuukauden":"kuukausi";case"MM":a=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":a=i?"vuoden":"vuotta"}return a=o(e,i)+" "+a}function o(e,i){return e<10?i?n[e]:t[e]:e}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},28463:function(e,t,n){!function(e){"use strict";e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(9531))},48385:function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaður",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},36147:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(9531))},85518:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(9531))},82422:function(e,t,n){!function(e){"use strict";var t=/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,n=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,i=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,o=[/^janv/i,/^févr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^août/i,/^sept/i,/^oct/i,/^nov/i,/^déc/i];e.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:t,monthsShortStrictRegex:n,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(9531))},71190:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9531))},38047:function(e,t,n){!function(e){"use strict";var t=["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Meitheamh","Iúil","Lúnasa","Meán Fómhair","Deireadh Fómhair","Samhain","Nollaig"],n=["Ean","Feabh","Márt","Aib","Beal","Meith","Iúil","Lún","M.F.","D.F.","Samh","Noll"],i=["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Sathairn"],o=["Domh","Luan","Máirt","Céad","Déar","Aoine","Sath"],a=["Do","Lu","Má","Cé","Dé","A","Sa"];e.defineLocale("ga",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:i,weekdaysShort:o,weekdaysMin:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amárach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inné ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s ó shin",s:"cúpla soicind",ss:"%d soicind",m:"nóiméad",mm:"%d nóiméad",h:"uair an chloig",hh:"%d uair an chloig",d:"lá",dd:"%d lá",M:"mí",MM:"%d míonna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(9531))},25235:function(e,t,n){!function(e){"use strict";var t=["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],n=["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],i=["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],o=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],a=["Dò","Lu","Mà","Ci","Ar","Ha","Sa"];e.defineLocale("gd",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:i,weekdaysShort:o,weekdaysMin:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(9531))},96743:function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9531))},89889:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={s:["थोडया सॅकंडांनी","थोडे सॅकंड"],ss:[e+" सॅकंडांनी",e+" सॅकंड"],m:["एका मिणटान","एक मिनूट"],mm:[e+" मिणटांनी",e+" मिणटां"],h:["एका वरान","एक वर"],hh:[e+" वरांनी",e+" वरां"],d:["एका दिसान","एक दीस"],dd:[e+" दिसांनी",e+" दीस"],M:["एका म्हयन्यान","एक म्हयनो"],MM:[e+" म्हयन्यानी",e+" म्हयने"],y:["एका वर्सान","एक वर्स"],yy:[e+" वर्सांनी",e+" वर्सां"]};return i?o[n][0]:o[n][1]}e.defineLocale("gom-deva",{months:{standalone:"जानेवारी_फेब्रुवारी_मार्च_एप्रील_मे_जून_जुलय_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),format:"जानेवारीच्या_फेब्रुवारीच्या_मार्चाच्या_एप्रीलाच्या_मेयाच्या_जूनाच्या_जुलयाच्या_ऑगस्टाच्या_सप्टेंबराच्या_ऑक्टोबराच्या_नोव्हेंबराच्या_डिसेंबराच्या".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"जाने._फेब्रु._मार्च_एप्री._मे_जून_जुल._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"आयतार_सोमार_मंगळार_बुधवार_बिरेस्तार_सुक्रार_शेनवार".split("_"),weekdaysShort:"आयत._सोम._मंगळ._बुध._ब्रेस्त._सुक्र._शेन.".split("_"),weekdaysMin:"आ_सो_मं_बु_ब्रे_सु_शे".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [वाजतां]",LTS:"A h:mm:ss [वाजतां]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [वाजतां]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [वाजतां]",llll:"ddd, D MMM YYYY, A h:mm [वाजतां]"},calendar:{sameDay:"[आयज] LT",nextDay:"[फाल्यां] LT",nextWeek:"[फुडलो] dddd[,] LT",lastDay:"[काल] LT",lastWeek:"[फाटलो] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s आदीं",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(वेर)/,ordinal:function(e,t){return"D"===t?e+"वेर":e},week:{dow:0,doy:3},meridiemParse:/राती|सकाळीं|दनपारां|सांजे/,meridiemHour:function(e,t){return 12===e&&(e=0),"राती"===t?e<4?e:e+12:"सकाळीं"===t?e:"दनपारां"===t?e>12?e:e+12:"सांजे"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"राती":e<12?"सकाळीं":e<16?"दनपारां":e<20?"सांजे":"राती"}})}(n(9531))},70720:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return i?o[n][0]:o[n][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){return"D"===t?e+"er":e},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokallim"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(n(9531))},5559:function(e,t,n){!function(e){"use strict";var t={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},n={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};e.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પહેલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(e){return e.replace(/[૧૨૩૪૫૬૭૮૯૦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/રાત|બપોર|સવાર|સાંજ/,meridiemHour:function(e,t){return 12===e&&(e=0),"રાત"===t?e<4?e:e+12:"સવાર"===t?e:"બપોર"===t?e>=10?e:e+12:"સાંજ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"રાત":e<10?"સવાર":e<17?"બપોર":e<20?"સાંજ":"રાત"},week:{dow:0,doy:6}})}(n(9531))},60780:function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(e){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(e)},meridiem:function(e,t,n){return e<5?"לפנות בוקר":e<10?"בבוקר":e<12?n?'לפנה"צ':"לפני הצהריים":e<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(9531))},10107:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},i=[/^जन/i,/^फ़र|फर/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सितं|सित/i,/^अक्टू/i,/^नव|नवं/i,/^दिसं|दिस/i],o=[/^जन/i,/^फ़र/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सित/i,/^अक्टू/i,/^नव/i,/^दिस/i];e.defineLocale("hi",{months:{format:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),standalone:"जनवरी_फरवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितंबर_अक्टूबर_नवंबर_दिसंबर".split("_")},monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},monthsParse:i,longMonthsParse:i,shortMonthsParse:o,monthsRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsShortRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsStrictRegex:/^(जनवरी?|फ़रवरी|फरवरी?|मार्च?|अप्रैल?|मई?|जून?|जुलाई?|अगस्त?|सितम्बर|सितंबर|सित?\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर?|दिसम्बर|दिसंबर?)/i,monthsShortStrictRegex:/^(जन\.?|फ़र\.?|मार्च?|अप्रै\.?|मई?|जून?|जुल\.?|अग\.?|सित\.?|अक्टू\.?|नव\.?|दिस\.?)/i,calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?e>=10?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(9531))},94033:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prošlu] [nedjelju] [u] LT";case 3:return"[prošlu] [srijedu] [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9531))},17669:function(e,t,n){!function(e){"use strict";var t="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(e,t,n,i){var o=e;switch(n){case"s":return i||t?"néhány másodperc":"néhány másodperce";case"ss":return o+(i||t)?" másodperc":" másodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return o+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" óra":" órája");case"hh":return o+(i||t?" óra":" órája");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return o+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hónap":" hónapja");case"MM":return o+(i||t?" hónap":" hónapja");case"y":return"egy"+(i||t?" év":" éve");case"yy":return o+(i||t?" év":" éve")}return""}function i(e){return(e?"":"[múlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan._feb._márc._ápr._máj._jún._júl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},60264:function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(e){return/^(ցերեկվա|երեկոյան)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}})}(n(9531))},1488:function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(9531))},84715:function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,i,o){var a=e+" ";switch(i){case"s":return n||o?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return t(e)?a+(n||o?"sekúndur":"sekúndum"):a+"sekúnda";case"m":return n?"mínúta":"mínútu";case"mm":return t(e)?a+(n||o?"mínútur":"mínútum"):n?a+"mínúta":a+"mínútu";case"hh":return t(e)?a+(n||o?"klukkustundir":"klukkustundum"):a+"klukkustund";case"d":return n?"dagur":o?"dag":"degi";case"dd":return t(e)?n?a+"dagar":a+(o?"daga":"dögum"):n?a+"dagur":a+(o?"dag":"degi");case"M":return n?"mánuður":o?"mánuð":"mánuði";case"MM":return t(e)?n?a+"mánuðir":a+(o?"mánuði":"mánuðum"):n?a+"mánuður":a+(o?"mánuð":"mánuði");case"y":return n||o?"ár":"ári";case"yy":return t(e)?a+(n||o?"ár":"árum"):a+(n||o?"ár":"ári")}}e.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},14674:function(e,t,n){!function(e){"use strict";e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9531))},91532:function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9531))},13334:function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"令和",narrow:"㋿",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"平成",narrow:"㍻",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"昭和",narrow:"㍼",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"大正",narrow:"㍽",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"明治",narrow:"㍾",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"西暦",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"紀元前",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(e,t){return"元"===t[1]?1:parseInt(t[1]||e,10)},months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(e){return e.week()!==this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(e){return this.week()!==e.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(e,t){switch(t){case"y":return 1===e?"元年":e+"年";case"d":case"D":case"DDD":return e+"日";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(9531))},97388:function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(9531))},20477:function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(წამ|წუთ|საათ|წელ|დღ|თვ)(ი|ე)/,(function(e,t,n){return"ი"===n?t+"ში":t+n+"ში"}))},past:function(e){return/(წამი|წუთი|საათი|დღე|თვე)/.test(e)?e.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(e)?e.replace(/წელი$/,"წლის წინ"):e},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}})}(n(9531))},43121:function(e,t,n){!function(e){"use strict";var t={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};e.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}})}(n(9531))},30152:function(e,t,n){!function(e){"use strict";var t={1:"១",2:"២",3:"៣",4:"៤",5:"៥",6:"៦",7:"៧",8:"៨",9:"៩",0:"០"},n={"១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9","០":"0"};e.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysMin:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ព្រឹក|ល្ងាច/,isPM:function(e){return"ល្ងាច"===e},meridiem:function(e,t,n){return e<12?"ព្រឹក":"ល្ងាច"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},dayOfMonthOrdinalParse:/ទី\d{1,2}/,ordinal:"ទី%d",preparse:function(e){return e.replace(/[១២៣៤៥៦៧៨៩០]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(9531))},95164:function(e,t,n){!function(e){"use strict";var t={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},n={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};e.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(e){return e.replace(/[೧೨೩೪೫೬೭೮೯೦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ರಾತ್ರಿ"===t?e<4?e:e+12:"ಬೆಳಿಗ್ಗೆ"===t?e:"ಮಧ್ಯಾಹ್ನ"===t?e>=10?e:e+12:"ಸಂಜೆ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ರಾತ್ರಿ":e<10?"ಬೆಳಿಗ್ಗೆ":e<17?"ಮಧ್ಯಾಹ್ನ":e<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(ನೇ)/,ordinal:function(e){return e+"ನೇ"},week:{dow:0,doy:6}})}(n(9531))},60409:function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"일";case"M":return e+"월";case"w":case"W":return e+"주";default:return e}},meridiemParse:/오전|오후/,isPM:function(e){return"오후"===e},meridiem:function(e,t,n){return e<12?"오전":"오후"}})}(n(9531))},27523:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=["کانونی دووەم","شوبات","ئازار","نیسان","ئایار","حوزەیران","تەمموز","ئاب","ئەیلوول","تشرینی یەكەم","تشرینی دووەم","كانونی یەکەم"];e.defineLocale("ku",{months:i,monthsShort:i,weekdays:"یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌".split("_"),weekdaysShort:"یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌".split("_"),weekdaysMin:"ی_د_س_چ_پ_ه_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ئێواره‌|به‌یانی/,isPM:function(e){return/ئێواره‌/.test(e)},meridiem:function(e,t,n){return e<12?"به‌یانی":"ئێواره‌"},calendar:{sameDay:"[ئه‌مرۆ كاتژمێر] LT",nextDay:"[به‌یانی كاتژمێر] LT",nextWeek:"dddd [كاتژمێر] LT",lastDay:"[دوێنێ كاتژمێر] LT",lastWeek:"dddd [كاتژمێر] LT",sameElse:"L"},relativeTime:{future:"له‌ %s",past:"%s",s:"چه‌ند چركه‌یه‌ك",ss:"چركه‌ %d",m:"یه‌ك خوله‌ك",mm:"%d خوله‌ك",h:"یه‌ك كاتژمێر",hh:"%d كاتژمێر",d:"یه‌ك ڕۆژ",dd:"%d ڕۆژ",M:"یه‌ك مانگ",MM:"%d مانگ",y:"یه‌ك ساڵ",yy:"%d ساڵ"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(9531))},13891:function(e,t,n){!function(e){"use strict";var t={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};e.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кечээ саат] LT",lastWeek:"[Өткөн аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}})}(n(9531))},92393:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?o[n][0]:o[n][1]}function n(e){return o(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function i(e){return o(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function o(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return o(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return o(e)}return o(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:i,s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Méint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},50758:function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(e){return"ຕອນແລງ"===e},meridiem:function(e,t,n){return e<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(ທີ່)\d{1,2}/,ordinal:function(e){return"ທີ່"+e}})}(n(9531))},71163:function(e,t,n){!function(e){"use strict";var t={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(e,t,n,i){return t?"kelios sekundės":i?"kelių sekundžių":"kelias sekundes"}function i(e,t,n,i){return t?a(n)[0]:i?a(n)[1]:a(n)[2]}function o(e){return e%10==0||e>10&&e<20}function a(e){return t[e].split("_")}function s(e,t,n,s){var r=e+" ";return 1===e?r+i(e,t,n[0],s):t?r+(o(e)?a(n)[1]:a(n)[0]):s?r+a(n)[1]:r+(o(e)?a(n)[1]:a(n)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:n,ss:s,m:i,mm:s,h:i,hh:s,d:i,dd:s,M:i,MM:s,y:i,yy:s},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(9531))},79138:function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function i(e,i,o){return e+" "+n(t[o],e,i)}function o(e,i,o){return n(t[o],e,i)}function a(e,t){return t?"dažas sekundes":"dažām sekundēm"}e.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:a,ss:i,m:o,mm:i,h:o,hh:i,d:o,dd:i,M:o,MM:i,y:o,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},48559:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var o=t.words[i];return 1===i.length?n?o[0]:o[1]:e+" "+t.correctGrammaticalCase(e,o)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9531))},28054:function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9531))},5265:function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"за %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"една минута",mm:"%d минути",h:"еден час",hh:"%d часа",d:"еден ден",dd:"%d дена",M:"еден месец",MM:"%d месеци",y:"една година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(9531))},70812:function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(e,t){return 12===e&&(e=0),"രാത്രി"===t&&e>=4||"ഉച്ച കഴിഞ്ഞ്"===t||"വൈകുന്നേരം"===t?e+12:e},meridiem:function(e,t,n){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(9531))},85330:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){switch(n){case"s":return t?"хэдхэн секунд":"хэдхэн секундын";case"ss":return e+(t?" секунд":" секундын");case"m":case"mm":return e+(t?" минут":" минутын");case"h":case"hh":return e+(t?" цаг":" цагийн");case"d":case"dd":return e+(t?" өдөр":" өдрийн");case"M":case"MM":return e+(t?" сар":" сарын");case"y":case"yy":return e+(t?" жил":" жилийн");default:return e}}e.defineLocale("mn",{months:"Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар".split("_"),monthsShort:"1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар".split("_"),monthsParseExact:!0,weekdays:"Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба".split("_"),weekdaysShort:"Ням_Дав_Мяг_Лха_Пүр_Баа_Бям".split("_"),weekdaysMin:"Ня_Да_Мя_Лх_Пү_Ба_Бя".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY оны MMMMын D",LLL:"YYYY оны MMMMын D HH:mm",LLLL:"dddd, YYYY оны MMMMын D HH:mm"},meridiemParse:/ҮӨ|ҮХ/i,isPM:function(e){return"ҮХ"===e},meridiem:function(e,t,n){return e<12?"ҮӨ":"ҮХ"},calendar:{sameDay:"[Өнөөдөр] LT",nextDay:"[Маргааш] LT",nextWeek:"[Ирэх] dddd LT",lastDay:"[Өчигдөр] LT",lastWeek:"[Өнгөрсөн] dddd LT",sameElse:"L"},relativeTime:{future:"%s дараа",past:"%s өмнө",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} өдөр/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" өдөр";default:return e}}})}(n(9531))},14239:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function i(e,t,n,i){var o="";if(t)switch(n){case"s":o="काही सेकंद";break;case"ss":o="%d सेकंद";break;case"m":o="एक मिनिट";break;case"mm":o="%d मिनिटे";break;case"h":o="एक तास";break;case"hh":o="%d तास";break;case"d":o="एक दिवस";break;case"dd":o="%d दिवस";break;case"M":o="एक महिना";break;case"MM":o="%d महिने";break;case"y":o="एक वर्ष";break;case"yy":o="%d वर्षे"}else switch(n){case"s":o="काही सेकंदां";break;case"ss":o="%d सेकंदां";break;case"m":o="एका मिनिटा";break;case"mm":o="%d मिनिटां";break;case"h":o="एका तासा";break;case"hh":o="%d तासां";break;case"d":o="एका दिवसा";break;case"dd":o="%d दिवसां";break;case"M":o="एका महिन्या";break;case"MM":o="%d महिन्यां";break;case"y":o="एका वर्षा";break;case"yy":o="%d वर्षां"}return o.replace(/%d/i,e)}e.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/पहाटे|सकाळी|दुपारी|सायंकाळी|रात्री/,meridiemHour:function(e,t){return 12===e&&(e=0),"पहाटे"===t||"सकाळी"===t?e:"दुपारी"===t||"सायंकाळी"===t||"रात्री"===t?e>=12?e:e+12:void 0},meridiem:function(e,t,n){return e>=0&&e<6?"पहाटे":e<12?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(9531))},18365:function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(9531))},72376:function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(9531))},29049:function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9531))},75839:function(e,t,n){!function(e){"use strict";var t={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};e.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(9531))},11448:function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},87445:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(e,t){return 12===e&&(e=0),"राति"===t?e<4?e:e+12:"बिहान"===t?e:"दिउँसो"===t?e>=10?e:e+12:"साँझ"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"राति":e<12?"बिहान":e<16?"दिउँसो":e<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(9531))},74451:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],o=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9531))},78026:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],o=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",w:"één week",ww:"%d weken",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9531))},24630:function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._må._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_må_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},80498:function(e,t,n){!function(e){"use strict";e.defineLocale("oc-lnc",{months:{standalone:"genièr_febrièr_març_abril_mai_junh_julhet_agost_setembre_octòbre_novembre_decembre".split("_"),format:"de genièr_de febrièr_de març_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octòbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimècres_dijòus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[uèi a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ièr a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(9531))},42887:function(e,t,n){!function(e){"use strict";var t={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};e.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"[ਅਗਲਾ] dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(e){return e.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ਰਾਤ"===t?e<4?e:e+12:"ਸਵੇਰ"===t?e:"ਦੁਪਹਿਰ"===t?e>=10?e:e+12:"ਸ਼ਾਮ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ਰਾਤ":e<10?"ਸਵੇਰ":e<17?"ਦੁਪਹਿਰ":e<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(9531))},89002:function(e,t,n){!function(e){"use strict";var t="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),i=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^paź/i,/^lis/i,/^gru/i];function o(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function a(e,t,n){var i=e+" ";switch(n){case"ss":return i+(o(e)?"sekundy":"sekund");case"m":return t?"minuta":"minutę";case"mm":return i+(o(e)?"minuty":"minut");case"h":return t?"godzina":"godzinę";case"hh":return i+(o(e)?"godziny":"godzin");case"ww":return i+(o(e)?"tygodnie":"tygodni");case"MM":return i+(o(e)?"miesiące":"miesięcy");case"yy":return i+(o(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,i){return e?/D MMMM/.test(i)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:a,m:a,mm:a,h:a,hh:a,d:"1 dzień",dd:"%d dni",w:"tydzień",ww:a,M:"miesiąc",MM:a,y:"rok",yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},98571:function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"do_2ª_3ª_4ª_5ª_6ª_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",invalidDate:"Data inválida"})}(n(9531))},48503:function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9531))},1129:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=" ";return(e%100>=20||e>=100&&e%100==0)&&(i=" de "),e+i+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"săptămâni",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:t,m:"un minut",mm:t,h:"o oră",hh:t,d:"o zi",dd:t,w:"o săptămână",ww:t,M:"o lună",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(9531))},11005:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"минута":"минуту":e+" "+t({ss:n?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",ww:"неделя_недели_недель",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[i],+e)}var i=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:n,m:n,mm:n,h:"час",hh:n,d:"день",dd:n,w:"неделя",ww:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:4}})}(n(9531))},39041:function(e,t,n){!function(e){"use strict";var t=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],n=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(9531))},99659:function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},28591:function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} වැනි/,ordinal:function(e){return e+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(e){return"ප.ව."===e||"පස් වරු"===e},meridiem:function(e,t,n){return e>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(9531))},23045:function(e,t,n){!function(e){"use strict";var t="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function i(e){return e>1&&e<5}function o(e,t,n,o){var a=e+" ";switch(n){case"s":return t||o?"pár sekúnd":"pár sekundami";case"ss":return t||o?a+(i(e)?"sekundy":"sekúnd"):a+"sekundami";case"m":return t?"minúta":o?"minútu":"minútou";case"mm":return t||o?a+(i(e)?"minúty":"minút"):a+"minútami";case"h":return t?"hodina":o?"hodinu":"hodinou";case"hh":return t||o?a+(i(e)?"hodiny":"hodín"):a+"hodinami";case"d":return t||o?"deň":"dňom";case"dd":return t||o?a+(i(e)?"dni":"dní"):a+"dňami";case"M":return t||o?"mesiac":"mesiacom";case"MM":return t||o?a+(i(e)?"mesiace":"mesiacov"):a+"mesiacmi";case"y":return t||o?"rok":"rokom";case"yy":return t||o?a+(i(e)?"roky":"rokov"):a+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:case 4:case 5:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:o,ss:o,m:o,mm:o,h:o,hh:o,d:o,dd:o,M:o,MM:o,y:o,yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},71187:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o=e+" ";switch(n){case"s":return t||i?"nekaj sekund":"nekaj sekundami";case"ss":return o+=1===e?t?"sekundo":"sekundi":2===e?t||i?"sekundi":"sekundah":e<5?t||i?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return o+=1===e?t?"minuta":"minuto":2===e?t||i?"minuti":"minutama":e<5?t||i?"minute":"minutami":t||i?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return o+=1===e?t?"ura":"uro":2===e?t||i?"uri":"urama":e<5?t||i?"ure":"urami":t||i?"ur":"urami";case"d":return t||i?"en dan":"enim dnem";case"dd":return o+=1===e?t||i?"dan":"dnem":2===e?t||i?"dni":"dnevoma":t||i?"dni":"dnevi";case"M":return t||i?"en mesec":"enim mesecem";case"MM":return o+=1===e?t||i?"mesec":"mesecem":2===e?t||i?"meseca":"mesecema":e<5?t||i?"mesece":"meseci":t||i?"mesecev":"meseci";case"y":return t||i?"eno leto":"enim letom";case"yy":return o+=1===e?t||i?"leto":"letom":2===e?t||i?"leti":"letoma":e<5?t||i?"leta":"leti":t||i?"let":"leti"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9531))},91240:function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},29700:function(e,t,n){!function(e){"use strict";var t={words:{ss:["секунда","секунде","секунди"],m:["један минут","једног минута"],mm:["минут","минута","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],d:["један дан","једног дана"],dd:["дан","дана","дана"],M:["један месец","једног месеца"],MM:["месец","месеца","месеци"],y:["једну годину","једне године"],yy:["годину","године","година"]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,i,o){var a,s=t.words[i];return 1===i.length?"y"===i&&n?"једна година":o||n?s[0]:s[1]:(a=t.correctGrammaticalCase(e,s),"yy"===i&&n&&"годину"===a?e+" година":e+" "+a)}};e.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9531))},54967:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],d:["jedan dan","jednog dana"],dd:["dan","dana","dana"],M:["jedan mesec","jednog meseca"],MM:["mesec","meseca","meseci"],y:["jednu godinu","jedne godine"],yy:["godinu","godine","godina"]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,i,o){var a,s=t.words[i];return 1===i.length?"y"===i&&n?"jedna godina":o||n?s[0]:s[1]:(a=t.correctGrammaticalCase(e,s),"yy"===i&&n&&"godinu"===a?e+" godina":e+" "+a)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9531))},75341:function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9531))},88552:function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?":e":1===t||2===t?":a":":e")},week:{dow:1,doy:4}})}(n(9531))},94327:function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(9531))},5433:function(e,t,n){!function(e){"use strict";var t={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};e.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}வது/,ordinal:function(e){return e+"வது"},preparse:function(e){return e.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(e,t,n){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t||"நண்பகல்"===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(9531))},83800:function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(e,t){return 12===e&&(e=0),"రాత్రి"===t?e<4?e:e+12:"ఉదయం"===t?e:"మధ్యాహ్నం"===t?e>=10?e:e+12:"సాయంత్రం"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"రాత్రి":e<10?"ఉదయం":e<17?"మధ్యాహ్నం":e<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(9531))},57758:function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9531))},85008:function(e,t,n){!function(e){"use strict";var t={0:"-ум",1:"-ум",2:"-юм",3:"-юм",4:"-ум",5:"-ум",6:"-ум",7:"-ум",8:"-ум",9:"-ум",10:"-ум",12:"-ум",13:"-ум",20:"-ум",30:"-юм",40:"-ум",50:"-ум",60:"-ум",70:"-ум",80:"-ум",90:"-ум",100:"-ум"};e.defineLocale("tg",{months:{format:"январи_феврали_марти_апрели_майи_июни_июли_августи_сентябри_октябри_ноябри_декабри".split("_"),standalone:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_")},monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе".split("_"),weekdaysShort:"яшб_дшб_сшб_чшб_пшб_ҷум_шнб".split("_"),weekdaysMin:"яш_дш_сш_чш_пш_ҷм_шб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Имрӯз соати] LT",nextDay:"[Фардо соати] LT",lastDay:"[Дирӯз соати] LT",nextWeek:"dddd[и] [ҳафтаи оянда соати] LT",lastWeek:"dddd[и] [ҳафтаи гузашта соати] LT",sameElse:"L"},relativeTime:{future:"баъди %s",past:"%s пеш",s:"якчанд сония",m:"як дақиқа",mm:"%d дақиқа",h:"як соат",hh:"%d соат",d:"як рӯз",dd:"%d рӯз",M:"як моҳ",MM:"%d моҳ",y:"як сол",yy:"%d сол"},meridiemParse:/шаб|субҳ|рӯз|бегоҳ/,meridiemHour:function(e,t){return 12===e&&(e=0),"шаб"===t?e<4?e:e+12:"субҳ"===t?e:"рӯз"===t?e>=11?e:e+12:"бегоҳ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"шаб":e<11?"субҳ":e<16?"рӯз":e<19?"бегоҳ":"шаб"},dayOfMonthOrdinalParse:/\d{1,2}-(ум|юм)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}})}(n(9531))},49110:function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(9531))},24412:function(e,t,n){!function(e){"use strict";var t={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'ünji",4:"'ünji",100:"'ünji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};e.defineLocale("tk",{months:"Ýanwar_Fewral_Mart_Aprel_Maý_Iýun_Iýul_Awgust_Sentýabr_Oktýabr_Noýabr_Dekabr".split("_"),monthsShort:"Ýan_Few_Mar_Apr_Maý_Iýn_Iýl_Awg_Sen_Okt_Noý_Dek".split("_"),weekdays:"Ýekşenbe_Duşenbe_Sişenbe_Çarşenbe_Penşenbe_Anna_Şenbe".split("_"),weekdaysShort:"Ýek_Duş_Siş_Çar_Pen_Ann_Şen".split("_"),weekdaysMin:"Ýk_Dş_Sş_Çr_Pn_An_Şn".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[düýn] LT",lastWeek:"[geçen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s soň",past:"%s öň",s:"birnäçe sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gün",dd:"%d gün",M:"bir aý",MM:"%d aý",y:"bir ýyl",yy:"%d ýyl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'unjy";var i=e%10,o=e%100-i,a=e>=100?100:null;return e+(t[i]||t[o]||t[a])}},week:{dow:1,doy:7}})}(n(9531))},45185:function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(9531))},42116:function(e,t,n){!function(e){"use strict";var t="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"}function i(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu’":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"}function o(e,t,n,i){var o=a(e);switch(n){case"ss":return o+" lup";case"mm":return o+" tup";case"hh":return o+" rep";case"dd":return o+" jaj";case"MM":return o+" jar";case"yy":return o+" DIS"}}function a(e){var n=Math.floor(e%1e3/100),i=Math.floor(e%100/10),o=e%10,a="";return n>0&&(a+=t[n]+"vatlh"),i>0&&(a+=(""!==a?" ":"")+t[i]+"maH"),o>0&&(a+=(""!==a?" ":"")+t[o]),""===a?"pagh":a}e.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:n,past:i,s:"puS lup",ss:o,m:"wa’ tup",mm:o,h:"wa’ rep",hh:o,d:"wa’ jaj",dd:o,M:"wa’ jar",MM:o,y:"wa’ DIS",yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},81558:function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};e.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_Çar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),meridiem:function(e,t,n){return e<12?n?"öö":"ÖÖ":n?"ös":"ÖS"},meridiemParse:/öö|ÖÖ|ös|ÖS/,isPM:function(e){return"ös"===e||"ÖS"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'ıncı";var i=e%10,o=e%100-i,a=e>=100?100:null;return e+(t[i]||t[o]||t[a])}},week:{dow:1,doy:7}})}(n(9531))},62749:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var o={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n míut","'iens míut"],mm:[e+" míuts",e+" míuts"],h:["'n þora","'iensa þora"],hh:[e+" þoras",e+" þoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return i||t?o[n][0]:o[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9531))},4882:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(9531))},88263:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(9531))},90777:function(e,t,n){!function(e){"use strict";e.defineLocale("ug-cn",{months:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),monthsShort:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),weekdays:"يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە".split("_"),weekdaysShort:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),weekdaysMin:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-يىلىM-ئاينىڭD-كۈنى",LLL:"YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm",LLLL:"dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm"},meridiemParse:/يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,meridiemHour:function(e,t){return 12===e&&(e=0),"يېرىم كېچە"===t||"سەھەر"===t||"چۈشتىن بۇرۇن"===t?e:"چۈشتىن كېيىن"===t||"كەچ"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"يېرىم كېچە":i<900?"سەھەر":i<1130?"چۈشتىن بۇرۇن":i<1230?"چۈش":i<1800?"چۈشتىن كېيىن":"كەچ"},calendar:{sameDay:"[بۈگۈن سائەت] LT",nextDay:"[ئەتە سائەت] LT",nextWeek:"[كېلەركى] dddd [سائەت] LT",lastDay:"[تۆنۈگۈن] LT",lastWeek:"[ئالدىنقى] dddd [سائەت] LT",sameElse:"L"},relativeTime:{future:"%s كېيىن",past:"%s بۇرۇن",s:"نەچچە سېكونت",ss:"%d سېكونت",m:"بىر مىنۇت",mm:"%d مىنۇت",h:"بىر سائەت",hh:"%d سائەت",d:"بىر كۈن",dd:"%d كۈن",M:"بىر ئاي",MM:"%d ئاي",y:"بىر يىل",yy:"%d يىل"},dayOfMonthOrdinalParse:/\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-كۈنى";case"w":case"W":return e+"-ھەپتە";default:return e}},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:7}})}(n(9531))},30920:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"хвилина":"хвилину":"h"===i?n?"година":"годину":e+" "+t({ss:n?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:n?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:n?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[i],+e)}function i(e,t){var n={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative}function o(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}e.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:i,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:o("[Сьогодні "),nextDay:o("[Завтра "),lastDay:o("[Вчора "),nextWeek:o("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return o("[Минулої] dddd [").call(this);case 1:case 2:case 4:return o("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:n,m:n,mm:n,h:"годину",hh:n,d:"день",dd:n,M:"місяць",MM:n,y:"рік",yy:n},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(e){return/^(дня|вечора)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}})}(n(9531))},39095:function(e,t,n){!function(e){"use strict";var t=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],n=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(9531))},99113:function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(9531))},93703:function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(9531))},41260:function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần trước lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",w:"một tuần",ww:"%d tuần",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(9531))},29956:function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9531))},84606:function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/ọjọ́\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}})}(n(9531))},22362:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(e){return e.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(e){return this.week()!==e.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",w:"1 周",ww:"%d 周",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(9531))},96951:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1200?"上午":1200===i?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(9531))},15068:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-mo",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"D/M/YYYY",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(9531))},7691:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(9531))},22747:(e,t,n)=>{var i={"./af":43722,"./af.js":43722,"./ar":68297,"./ar-dz":99599,"./ar-dz.js":99599,"./ar-kw":70030,"./ar-kw.js":70030,"./ar-ly":40863,"./ar-ly.js":40863,"./ar-ma":61517,"./ar-ma.js":61517,"./ar-sa":65631,"./ar-sa.js":65631,"./ar-tn":84936,"./ar-tn.js":84936,"./ar.js":68297,"./az":11782,"./az.js":11782,"./be":43495,"./be.js":43495,"./bg":22314,"./bg.js":22314,"./bm":33582,"./bm.js":33582,"./bn":82631,"./bn-bd":69949,"./bn-bd.js":69949,"./bn.js":82631,"./bo":61824,"./bo.js":61824,"./br":74325,"./br.js":74325,"./bs":70391,"./bs.js":70391,"./ca":38638,"./ca.js":38638,"./cs":33778,"./cs.js":33778,"./cv":21098,"./cv.js":21098,"./cy":37387,"./cy.js":37387,"./da":18035,"./da.js":18035,"./de":51058,"./de-at":23849,"./de-at.js":23849,"./de-ch":68471,"./de-ch.js":68471,"./de.js":51058,"./dv":87337,"./dv.js":87337,"./el":34072,"./el.js":34072,"./en-au":62497,"./en-au.js":62497,"./en-ca":50319,"./en-ca.js":50319,"./en-gb":15256,"./en-gb.js":15256,"./en-ie":99081,"./en-ie.js":99081,"./en-il":70954,"./en-il.js":70954,"./en-in":53406,"./en-in.js":53406,"./en-nz":23113,"./en-nz.js":23113,"./en-sg":83279,"./en-sg.js":83279,"./eo":69040,"./eo.js":69040,"./es":4961,"./es-do":2592,"./es-do.js":2592,"./es-mx":94529,"./es-mx.js":94529,"./es-us":38876,"./es-us.js":38876,"./es.js":4961,"./et":84719,"./et.js":84719,"./eu":16783,"./eu.js":16783,"./fa":96196,"./fa.js":96196,"./fi":78238,"./fi.js":78238,"./fil":28463,"./fil.js":28463,"./fo":48385,"./fo.js":48385,"./fr":82422,"./fr-ca":36147,"./fr-ca.js":36147,"./fr-ch":85518,"./fr-ch.js":85518,"./fr.js":82422,"./fy":71190,"./fy.js":71190,"./ga":38047,"./ga.js":38047,"./gd":25235,"./gd.js":25235,"./gl":96743,"./gl.js":96743,"./gom-deva":89889,"./gom-deva.js":89889,"./gom-latn":70720,"./gom-latn.js":70720,"./gu":5559,"./gu.js":5559,"./he":60780,"./he.js":60780,"./hi":10107,"./hi.js":10107,"./hr":94033,"./hr.js":94033,"./hu":17669,"./hu.js":17669,"./hy-am":60264,"./hy-am.js":60264,"./id":1488,"./id.js":1488,"./is":84715,"./is.js":84715,"./it":91532,"./it-ch":14674,"./it-ch.js":14674,"./it.js":91532,"./ja":13334,"./ja.js":13334,"./jv":97388,"./jv.js":97388,"./ka":20477,"./ka.js":20477,"./kk":43121,"./kk.js":43121,"./km":30152,"./km.js":30152,"./kn":95164,"./kn.js":95164,"./ko":60409,"./ko.js":60409,"./ku":27523,"./ku.js":27523,"./ky":13891,"./ky.js":13891,"./lb":92393,"./lb.js":92393,"./lo":50758,"./lo.js":50758,"./lt":71163,"./lt.js":71163,"./lv":79138,"./lv.js":79138,"./me":48559,"./me.js":48559,"./mi":28054,"./mi.js":28054,"./mk":5265,"./mk.js":5265,"./ml":70812,"./ml.js":70812,"./mn":85330,"./mn.js":85330,"./mr":14239,"./mr.js":14239,"./ms":72376,"./ms-my":18365,"./ms-my.js":18365,"./ms.js":72376,"./mt":29049,"./mt.js":29049,"./my":75839,"./my.js":75839,"./nb":11448,"./nb.js":11448,"./ne":87445,"./ne.js":87445,"./nl":78026,"./nl-be":74451,"./nl-be.js":74451,"./nl.js":78026,"./nn":24630,"./nn.js":24630,"./oc-lnc":80498,"./oc-lnc.js":80498,"./pa-in":42887,"./pa-in.js":42887,"./pl":89002,"./pl.js":89002,"./pt":48503,"./pt-br":98571,"./pt-br.js":98571,"./pt.js":48503,"./ro":1129,"./ro.js":1129,"./ru":11005,"./ru.js":11005,"./sd":39041,"./sd.js":39041,"./se":99659,"./se.js":99659,"./si":28591,"./si.js":28591,"./sk":23045,"./sk.js":23045,"./sl":71187,"./sl.js":71187,"./sq":91240,"./sq.js":91240,"./sr":54967,"./sr-cyrl":29700,"./sr-cyrl.js":29700,"./sr.js":54967,"./ss":75341,"./ss.js":75341,"./sv":88552,"./sv.js":88552,"./sw":94327,"./sw.js":94327,"./ta":5433,"./ta.js":5433,"./te":83800,"./te.js":83800,"./tet":57758,"./tet.js":57758,"./tg":85008,"./tg.js":85008,"./th":49110,"./th.js":49110,"./tk":24412,"./tk.js":24412,"./tl-ph":45185,"./tl-ph.js":45185,"./tlh":42116,"./tlh.js":42116,"./tr":81558,"./tr.js":81558,"./tzl":62749,"./tzl.js":62749,"./tzm":88263,"./tzm-latn":4882,"./tzm-latn.js":4882,"./tzm.js":88263,"./ug-cn":90777,"./ug-cn.js":90777,"./uk":30920,"./uk.js":30920,"./ur":39095,"./ur.js":39095,"./uz":93703,"./uz-latn":99113,"./uz-latn.js":99113,"./uz.js":93703,"./vi":41260,"./vi.js":41260,"./x-pseudo":29956,"./x-pseudo.js":29956,"./yo":84606,"./yo.js":84606,"./zh-cn":22362,"./zh-cn.js":22362,"./zh-hk":96951,"./zh-hk.js":96951,"./zh-mo":15068,"./zh-mo.js":15068,"./zh-tw":7691,"./zh-tw.js":7691};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id=22747},9531:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,i;function o(){return t.apply(null,arguments)}function a(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(l(e,t))return!1;return!0}function c(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){var n,i=[],o=e.length;for(n=0;n<o;++n)i.push(t(e[n],n));return i}function f(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t,n,i){return Gn(e,t,n,i,!0).utc()}function _(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=_()),e._pf}function g(e){if(null==e._isValid){var t=v(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),o=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return o;e._isValid=o}return e._isValid}function y(e){var t=m(NaN);return null!=e?f(v(t),e):v(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=o.momentProperties=[],w=!1;function k(e,t){var n,i,o,a=b.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=v(t)),c(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)c(o=t[i=b[n]])||(e[i]=o);return e}function C(e){k(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,o.updateOffset(this),w=!1)}function x(e){return e instanceof C||null!=e&&null!=e._isAMomentObject}function S(e){!1===o.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function M(e,t){var n=!0;return f((function(){if(null!=o.deprecationHandler&&o.deprecationHandler(null,e),n){var i,a,s,r=[],d=arguments.length;for(a=0;a<d;a++){if(i="","object"==typeof arguments[a]){for(s in i+="\n["+a+"] ",arguments[0])l(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[a];r.push(i)}S(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var T,L={};function D(e,t){null!=o.deprecationHandler&&o.deprecationHandler(e,t),L[e]||(S(t),L[e]=!0)}function E(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e){var t,n;for(n in e)l(e,n)&&(E(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function A(e,t){var n,i=f({},e);for(n in t)l(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},f(i[n],e[n]),f(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)l(e,n)&&!l(t,n)&&r(e[n])&&(i[n]=f({},i[n]));return i}function I(e){null!=e&&this.set(e)}o.suppressDeprecationWarnings=!1,o.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var P={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function R(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return E(i)?i.call(t,n):i}function j(e,t,n){var i=""+Math.abs(e),o=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}var Y=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},F={};function B(e,t,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),e&&(F[e]=o),t&&(F[t[0]]=function(){return j(o.apply(this,arguments),t[1],t[2])}),n&&(F[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function $(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,n,i=e.match(Y);for(t=0,n=i.length;t<n;t++)F[i[t]]?i[t]=F[i[t]]:i[t]=$(i[t]);return function(t){var o,a="";for(o=0;o<n;o++)a+=E(i[o])?i[o].call(t,e):i[o];return a}}function W(e,t){return e.isValid()?(t=U(t,e.localeData()),N[t]=N[t]||z(t),N[t](e)):e.localeData().invalidDate()}function U(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(H.lastIndex=0;n>=0&&H.test(e);)e=e.replace(H,i),H.lastIndex=0,n-=1;return e}var V={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function q(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(Y).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var Z="Invalid date";function G(){return this._invalidDate}var J="%d",K=/\d{1,2}/;function X(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ee(e,t,n,i){var o=this._relativeTime[n];return E(o)?o(e,t,n,i):o.replace(/%d/i,e)}function te(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)}var ne={};function ie(e,t){var n=e.toLowerCase();ne[n]=ne[n+"s"]=ne[t]=e}function oe(e){return"string"==typeof e?ne[e]||ne[e.toLowerCase()]:void 0}function ae(e){var t,n,i={};for(n in e)l(e,n)&&(t=oe(n))&&(i[t]=e[n]);return i}var se={};function re(e,t){se[e]=t}function le(e){var t,n=[];for(t in e)l(e,t)&&n.push({unit:t,priority:se[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function de(e){return e%4==0&&e%100!=0||e%400==0}function ce(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ue(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ce(t)),n}function he(e,t){return function(n){return null!=n?(fe(this,e,n),o.updateOffset(this,t),this):pe(this,e)}}function pe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function fe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&de(e.year())&&1===e.month()&&29===e.date()?(n=ue(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),et(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function me(e){return E(this[e=oe(e)])?this[e]():this}function _e(e,t){if("object"==typeof e){var n,i=le(e=ae(e)),o=i.length;for(n=0;n<o;n++)this[i[n].unit](e[i[n].unit])}else if(E(this[e=oe(e)]))return this[e](t);return this}var ve,ge=/\d/,ye=/\d\d/,be=/\d{3}/,we=/\d{4}/,ke=/[+-]?\d{6}/,Ce=/\d\d?/,xe=/\d\d\d\d?/,Se=/\d\d\d\d\d\d?/,Me=/\d{1,3}/,Te=/\d{1,4}/,Le=/[+-]?\d{1,6}/,De=/\d+/,Ee=/[+-]?\d+/,Oe=/Z|[+-]\d\d:?\d\d/gi,Ae=/Z|[+-]\d\d(?::?\d\d)?/gi,Ie=/[+-]?\d+(\.\d{1,3})?/,Pe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Re(e,t,n){ve[e]=E(t)?t:function(e,i){return e&&n?n:t}}function je(e,t){return l(ve,e)?ve[e](t._strict,t._locale):new RegExp(Ye(e))}function Ye(e){return He(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,o){return t||n||i||o})))}function He(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ve={};var Ne={};function Fe(e,t){var n,i,o=t;for("string"==typeof e&&(e=[e]),u(t)&&(o=function(e,n){n[t]=ue(e)}),i=e.length,n=0;n<i;n++)Ne[e[n]]=o}function Be(e,t){Fe(e,(function(e,n,i,o){i._w=i._w||{},t(e,i._w,i,o)}))}function $e(e,t,n){null!=t&&l(Ne,e)&&Ne[e](t,n._a,n,e)}var ze,We=0,Ue=1,Ve=2,qe=3,Ze=4,Ge=5,Je=6,Ke=7,Xe=8;function Qe(e,t){return(e%t+t)%t}function et(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Qe(t,12);return e+=(t-n)/12,1===n?de(e)?29:28:31-n%7%2}ze=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),B("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ie("month","M"),re("month",8),Re("M",Ce),Re("MM",Ce,ye),Re("MMM",(function(e,t){return t.monthsShortRegex(e)})),Re("MMMM",(function(e,t){return t.monthsRegex(e)})),Fe(["M","MM"],(function(e,t){t[Ue]=ue(e)-1})),Fe(["MMM","MMMM"],(function(e,t,n,i){var o=n._locale.monthsParse(e,i,n._strict);null!=o?t[Ue]=o:v(n).invalidMonth=e}));var tt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),it=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ot=Pe,at=Pe;function st(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||it).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function rt(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[it.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lt(e,t,n){var i,o,a,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=m([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(o=ze.call(this._shortMonthsParse,s))?o:null:-1!==(o=ze.call(this._longMonthsParse,s))?o:null:"MMM"===t?-1!==(o=ze.call(this._shortMonthsParse,s))||-1!==(o=ze.call(this._longMonthsParse,s))?o:null:-1!==(o=ze.call(this._longMonthsParse,s))||-1!==(o=ze.call(this._shortMonthsParse,s))?o:null}function dt(e,t,n){var i,o,a;if(this._monthsParseExact)return lt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=m([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function ct(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=ue(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),et(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ut(e){return null!=e?(ct(this,e),o.updateOffset(this,!0),this):pe(this,"Month")}function ht(){return et(this.year(),this.month())}function pt(e){return this._monthsParseExact?(l(this,"_monthsRegex")||mt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=ot),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(e){return this._monthsParseExact?(l(this,"_monthsRegex")||mt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=at),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function mt(){function e(e,t){return t.length-e.length}var t,n,i=[],o=[],a=[];for(t=0;t<12;t++)n=m([2e3,t]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),o.sort(e),a.sort(e),t=0;t<12;t++)i[t]=He(i[t]),o[t]=He(o[t]);for(t=0;t<24;t++)a[t]=He(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function _t(e){return de(e)?366:365}B("Y",0,0,(function(){var e=this.year();return e<=9999?j(e,4):"+"+e})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),ie("year","y"),re("year",1),Re("Y",Ee),Re("YY",Ce,ye),Re("YYYY",Te,we),Re("YYYYY",Le,ke),Re("YYYYYY",Le,ke),Fe(["YYYYY","YYYYYY"],We),Fe("YYYY",(function(e,t){t[We]=2===e.length?o.parseTwoDigitYear(e):ue(e)})),Fe("YY",(function(e,t){t[We]=o.parseTwoDigitYear(e)})),Fe("Y",(function(e,t){t[We]=parseInt(e,10)})),o.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var vt=he("FullYear",!0);function gt(){return de(this.year())}function yt(e,t,n,i,o,a,s){var r;return e<100&&e>=0?(r=new Date(e+400,t,n,i,o,a,s),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,n,i,o,a,s),r}function bt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wt(e,t,n){var i=7+t-n;return-(7+bt(e,0,i).getUTCDay()-t)%7+i-1}function kt(e,t,n,i,o){var a,s,r=1+7*(t-1)+(7+n-i)%7+wt(e,i,o);return r<=0?s=_t(a=e-1)+r:r>_t(e)?(a=e+1,s=r-_t(e)):(a=e,s=r),{year:a,dayOfYear:s}}function Ct(e,t,n){var i,o,a=wt(e.year(),t,n),s=Math.floor((e.dayOfYear()-a-1)/7)+1;return s<1?i=s+xt(o=e.year()-1,t,n):s>xt(e.year(),t,n)?(i=s-xt(e.year(),t,n),o=e.year()+1):(o=e.year(),i=s),{week:i,year:o}}function xt(e,t,n){var i=wt(e,t,n),o=wt(e+1,t,n);return(_t(e)-i+o)/7}function St(e){return Ct(e,this._week.dow,this._week.doy).week}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),ie("week","w"),ie("isoWeek","W"),re("week",5),re("isoWeek",5),Re("w",Ce),Re("ww",Ce,ye),Re("W",Ce),Re("WW",Ce,ye),Be(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=ue(e)}));var Mt={dow:0,doy:6};function Tt(){return this._week.dow}function Lt(){return this._week.doy}function Dt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Et(e){var t=Ct(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ot(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function At(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function It(e,t){return e.slice(t,7).concat(e.slice(0,t))}B("d",0,"do","day"),B("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),B("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),B("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),ie("day","d"),ie("weekday","e"),ie("isoWeekday","E"),re("day",11),re("weekday",11),re("isoWeekday",11),Re("d",Ce),Re("e",Ce),Re("E",Ce),Re("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Re("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Re("dddd",(function(e,t){return t.weekdaysRegex(e)})),Be(["dd","ddd","dddd"],(function(e,t,n,i){var o=n._locale.weekdaysParse(e,i,n._strict);null!=o?t.d=o:v(n).invalidWeekday=e})),Be(["d","e","E"],(function(e,t,n,i){t[i]=ue(e)}));var Pt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Rt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Yt=Pe,Ht=Pe,Nt=Pe;function Ft(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?It(n,this._week.dow):e?n[e.day()]:n}function Bt(e){return!0===e?It(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function $t(e){return!0===e?It(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function zt(e,t,n){var i,o,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=m([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(o=ze.call(this._weekdaysParse,s))?o:null:"ddd"===t?-1!==(o=ze.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=ze.call(this._minWeekdaysParse,s))?o:null:"dddd"===t?-1!==(o=ze.call(this._weekdaysParse,s))||-1!==(o=ze.call(this._shortWeekdaysParse,s))||-1!==(o=ze.call(this._minWeekdaysParse,s))?o:null:"ddd"===t?-1!==(o=ze.call(this._shortWeekdaysParse,s))||-1!==(o=ze.call(this._weekdaysParse,s))||-1!==(o=ze.call(this._minWeekdaysParse,s))?o:null:-1!==(o=ze.call(this._minWeekdaysParse,s))||-1!==(o=ze.call(this._weekdaysParse,s))||-1!==(o=ze.call(this._shortWeekdaysParse,s))?o:null}function Wt(e,t,n){var i,o,a;if(this._weekdaysParseExact)return zt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=m([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Ut(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ot(e,this.localeData()),this.add(e-t,"d")):t}function Vt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function qt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=At(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Zt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Yt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Gt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ht),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Jt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Nt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Kt(){function e(e,t){return t.length-e.length}var t,n,i,o,a,s=[],r=[],l=[],d=[];for(t=0;t<7;t++)n=m([2e3,1]).day(t),i=He(this.weekdaysMin(n,"")),o=He(this.weekdaysShort(n,"")),a=He(this.weekdays(n,"")),s.push(i),r.push(o),l.push(a),d.push(i),d.push(o),d.push(a);s.sort(e),r.sort(e),l.sort(e),d.sort(e),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Qt(){return this.hours()||24}function en(e,t){B(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function tn(e,t){return t._meridiemParse}function nn(e){return"p"===(e+"").toLowerCase().charAt(0)}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Xt),B("k",["kk",2],0,Qt),B("hmm",0,0,(function(){return""+Xt.apply(this)+j(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+Xt.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+j(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)})),en("a",!0),en("A",!1),ie("hour","h"),re("hour",13),Re("a",tn),Re("A",tn),Re("H",Ce),Re("h",Ce),Re("k",Ce),Re("HH",Ce,ye),Re("hh",Ce,ye),Re("kk",Ce,ye),Re("hmm",xe),Re("hmmss",Se),Re("Hmm",xe),Re("Hmmss",Se),Fe(["H","HH"],qe),Fe(["k","kk"],(function(e,t,n){var i=ue(e);t[qe]=24===i?0:i})),Fe(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Fe(["h","hh"],(function(e,t,n){t[qe]=ue(e),v(n).bigHour=!0})),Fe("hmm",(function(e,t,n){var i=e.length-2;t[qe]=ue(e.substr(0,i)),t[Ze]=ue(e.substr(i)),v(n).bigHour=!0})),Fe("hmmss",(function(e,t,n){var i=e.length-4,o=e.length-2;t[qe]=ue(e.substr(0,i)),t[Ze]=ue(e.substr(i,2)),t[Ge]=ue(e.substr(o)),v(n).bigHour=!0})),Fe("Hmm",(function(e,t,n){var i=e.length-2;t[qe]=ue(e.substr(0,i)),t[Ze]=ue(e.substr(i))})),Fe("Hmmss",(function(e,t,n){var i=e.length-4,o=e.length-2;t[qe]=ue(e.substr(0,i)),t[Ze]=ue(e.substr(i,2)),t[Ge]=ue(e.substr(o))}));var on=/[ap]\.?m?\.?/i,an=he("Hours",!0);function sn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var rn,ln={calendar:P,longDateFormat:V,invalidDate:Z,ordinal:J,dayOfMonthOrdinalParse:K,relativeTime:Q,months:tt,monthsShort:nt,week:Mt,weekdays:Pt,weekdaysMin:jt,weekdaysShort:Rt,meridiemParse:on},dn={},cn={};function un(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function pn(e){for(var t,n,i,o,a=0;a<e.length;){for(t=(o=hn(e[a]).split("-")).length,n=(n=hn(e[a+1]))?n.split("-"):null;t>0;){if(i=mn(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&un(o,n)>=t-1)break;t--}a++}return rn}function fn(e){return null!=e.match("^[^/\\\\]*$")}function mn(t){var i=null;if(void 0===dn[t]&&e&&e.exports&&fn(t))try{i=rn._abbr,n(22747)("./"+t),_n(i)}catch(e){dn[t]=null}return dn[t]}function _n(e,t){var n;return e&&((n=c(t)?yn(e):vn(e,t))?rn=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),rn._abbr}function vn(e,t){if(null!==t){var n,i=ln;if(t.abbr=e,null!=dn[e])D("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=dn[e]._config;else if(null!=t.parentLocale)if(null!=dn[t.parentLocale])i=dn[t.parentLocale]._config;else{if(null==(n=mn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;i=n._config}return dn[e]=new I(A(i,t)),cn[e]&&cn[e].forEach((function(e){vn(e.name,e.config)})),_n(e),dn[e]}return delete dn[e],null}function gn(e,t){if(null!=t){var n,i,o=ln;null!=dn[e]&&null!=dn[e].parentLocale?dn[e].set(A(dn[e]._config,t)):(null!=(i=mn(e))&&(o=i._config),t=A(o,t),null==i&&(t.abbr=e),(n=new I(t)).parentLocale=dn[e],dn[e]=n),_n(e)}else null!=dn[e]&&(null!=dn[e].parentLocale?(dn[e]=dn[e].parentLocale,e===_n()&&_n(e)):null!=dn[e]&&delete dn[e]);return dn[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return rn;if(!s(e)){if(t=mn(e))return t;e=[e]}return pn(e)}function bn(){return T(dn)}function wn(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[Ue]<0||n[Ue]>11?Ue:n[Ve]<1||n[Ve]>et(n[We],n[Ue])?Ve:n[qe]<0||n[qe]>24||24===n[qe]&&(0!==n[Ze]||0!==n[Ge]||0!==n[Je])?qe:n[Ze]<0||n[Ze]>59?Ze:n[Ge]<0||n[Ge]>59?Ge:n[Je]<0||n[Je]>999?Je:-1,v(e)._overflowDayOfYear&&(t<We||t>Ve)&&(t=Ve),v(e)._overflowWeeks&&-1===t&&(t=Ke),v(e)._overflowWeekday&&-1===t&&(t=Xe),v(e).overflow=t),e}var kn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/Z|[+-]\d\d(?::?\d\d)?/,Sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Mn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Tn=/^\/?Date\((-?\d+)/i,Ln=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Dn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function En(e){var t,n,i,o,a,s,r=e._i,l=kn.exec(r)||Cn.exec(r),d=Sn.length,c=Mn.length;if(l){for(v(e).iso=!0,t=0,n=d;t<n;t++)if(Sn[t][1].exec(l[1])){o=Sn[t][0],i=!1!==Sn[t][2];break}if(null==o)return void(e._isValid=!1);if(l[3]){for(t=0,n=c;t<n;t++)if(Mn[t][1].exec(l[3])){a=(l[2]||" ")+Mn[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(l[4]){if(!xn.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=o+(a||"")+(s||""),$n(e)}else e._isValid=!1}function On(e,t,n,i,o,a){var s=[An(e),nt.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(o,10)];return a&&s.push(parseInt(a,10)),s}function An(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function In(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Pn(e,t,n){return!e||Rt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Rn(e,t,n){if(e)return Dn[e];if(t)return 0;var i=parseInt(n,10),o=i%100;return(i-o)/100*60+o}function jn(e){var t,n=Ln.exec(In(e._i));if(n){if(t=On(n[4],n[3],n[2],n[5],n[6],n[7]),!Pn(n[1],t,e))return;e._a=t,e._tzm=Rn(n[8],n[9],n[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function Yn(e){var t=Tn.exec(e._i);null===t?(En(e),!1===e._isValid&&(delete e._isValid,jn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:o.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Hn(e,t,n){return null!=e?e:null!=t?t:n}function Nn(e){var t=new Date(o.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Fn(e){var t,n,i,o,a,s=[];if(!e._d){for(i=Nn(e),e._w&&null==e._a[Ve]&&null==e._a[Ue]&&Bn(e),null!=e._dayOfYear&&(a=Hn(e._a[We],i[We]),(e._dayOfYear>_t(a)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=bt(a,0,e._dayOfYear),e._a[Ue]=n.getUTCMonth(),e._a[Ve]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[qe]&&0===e._a[Ze]&&0===e._a[Ge]&&0===e._a[Je]&&(e._nextDay=!0,e._a[qe]=0),e._d=(e._useUTC?bt:yt).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[qe]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(v(e).weekdayMismatch=!0)}}function Bn(e){var t,n,i,o,a,s,r,l,d;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,s=4,n=Hn(t.GG,e._a[We],Ct(Jn(),1,4).year),i=Hn(t.W,1),((o=Hn(t.E,1))<1||o>7)&&(l=!0)):(a=e._locale._week.dow,s=e._locale._week.doy,d=Ct(Jn(),a,s),n=Hn(t.gg,e._a[We],d.year),i=Hn(t.w,d.week),null!=t.d?((o=t.d)<0||o>6)&&(l=!0):null!=t.e?(o=t.e+a,(t.e<0||t.e>6)&&(l=!0)):o=a),i<1||i>xt(n,a,s)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(r=kt(n,i,o,a,s),e._a[We]=r.year,e._dayOfYear=r.dayOfYear)}function $n(e){if(e._f!==o.ISO_8601)if(e._f!==o.RFC_2822){e._a=[],v(e).empty=!0;var t,n,i,a,s,r,l,d=""+e._i,c=d.length,u=0;for(l=(i=U(e._f,e._locale).match(Y)||[]).length,t=0;t<l;t++)a=i[t],(n=(d.match(je(a,e))||[])[0])&&((s=d.substr(0,d.indexOf(n))).length>0&&v(e).unusedInput.push(s),d=d.slice(d.indexOf(n)+n.length),u+=n.length),F[a]?(n?v(e).empty=!1:v(e).unusedTokens.push(a),$e(a,n,e)):e._strict&&!n&&v(e).unusedTokens.push(a);v(e).charsLeftOver=c-u,d.length>0&&v(e).unusedInput.push(d),e._a[qe]<=12&&!0===v(e).bigHour&&e._a[qe]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[qe]=zn(e._locale,e._a[qe],e._meridiem),null!==(r=v(e).era)&&(e._a[We]=e._locale.erasConvertYear(r,e._a[We])),Fn(e),wn(e)}else jn(e);else En(e)}function zn(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Wn(e){var t,n,i,o,a,s,r=!1,l=e._f.length;if(0===l)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<l;o++)a=0,s=!1,t=k({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],$n(t),g(t)&&(s=!0),a+=v(t).charsLeftOver,a+=10*v(t).unusedTokens.length,v(t).score=a,r?a<i&&(i=a,n=t):(null==i||a<i||s)&&(i=a,n=t,s&&(r=!0));f(e,n||t)}function Un(e){if(!e._d){var t=ae(e._i),n=void 0===t.day?t.date:t.day;e._a=p([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Fn(e)}}function Vn(e){var t=new C(wn(qn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function qn(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),x(t)?new C(wn(t)):(h(t)?e._d=t:s(n)?Wn(e):n?$n(e):Zn(e),g(e)||(e._d=null),e))}function Zn(e){var t=e._i;c(t)?e._d=new Date(o.now()):h(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Yn(e):s(t)?(e._a=p(t.slice(0),(function(e){return parseInt(e,10)})),Fn(e)):r(t)?Un(e):u(t)?e._d=new Date(t):o.createFromInputFallback(e)}function Gn(e,t,n,i,o){var a={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(r(e)&&d(e)||s(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=n,a._i=e,a._f=t,a._strict=i,Vn(a)}function Jn(e,t,n,i){return Gn(e,t,n,i,!1)}o.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),o.ISO_8601=function(){},o.RFC_2822=function(){};var Kn=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Jn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Xn=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Jn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Qn(e,t){var n,i;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Jn();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}function ei(){return Qn("isBefore",[].slice.call(arguments,0))}function ti(){return Qn("isAfter",[].slice.call(arguments,0))}var ni=function(){return Date.now?Date.now():+new Date},ii=["year","quarter","month","week","day","hour","minute","second","millisecond"];function oi(e){var t,n,i=!1,o=ii.length;for(t in e)if(l(e,t)&&(-1===ze.call(ii,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<o;++n)if(e[ii[n]]){if(i)return!1;parseFloat(e[ii[n]])!==ue(e[ii[n]])&&(i=!0)}return!0}function ai(){return this._isValid}function si(){return Di(NaN)}function ri(e){var t=ae(e),n=t.year||0,i=t.quarter||0,o=t.month||0,a=t.week||t.isoWeek||0,s=t.day||0,r=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._isValid=oi(t),this._milliseconds=+c+1e3*d+6e4*l+1e3*r*60*60,this._days=+s+7*a,this._months=+o+3*i+12*n,this._data={},this._locale=yn(),this._bubble()}function li(e){return e instanceof ri}function di(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function ci(e,t,n){var i,o=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(i=0;i<o;i++)(n&&e[i]!==t[i]||!n&&ue(e[i])!==ue(t[i]))&&s++;return s+a}function ui(e,t){B(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)}))}ui("Z",":"),ui("ZZ",""),Re("Z",Ae),Re("ZZ",Ae),Fe(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=pi(Ae,e)}));var hi=/([\+\-]|\d\d)/gi;function pi(e,t){var n,i,o=(t||"").match(e);return null===o?null:0===(i=60*(n=((o[o.length-1]||[])+"").match(hi)||["-",0,0])[1]+ue(n[2]))?0:"+"===n[0]?i:-i}function fi(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(x(e)||h(e)?e.valueOf():Jn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),o.updateOffset(n,!1),n):Jn(e).local()}function mi(e){return-Math.round(e._d.getTimezoneOffset())}function _i(e,t,n){var i,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=pi(Ae,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=mi(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==e&&(!t||this._changeInProgress?Pi(this,Di(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,o.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:mi(this)}function vi(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function gi(e){return this.utcOffset(0,e)}function yi(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(mi(this),"m")),this}function bi(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=pi(Oe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function wi(e){return!!this.isValid()&&(e=e?Jn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function ki(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ci(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return k(t,this),(t=qn(t))._a?(e=t._isUTC?m(t._a):Jn(t._a),this._isDSTShifted=this.isValid()&&ci(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function xi(){return!!this.isValid()&&!this._isUTC}function Si(){return!!this.isValid()&&this._isUTC}function Mi(){return!!this.isValid()&&this._isUTC&&0===this._offset}o.updateOffset=function(){};var Ti=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Li=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Di(e,t){var n,i,o,a=e,s=null;return li(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(s=Ti.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:ue(s[Ve])*n,h:ue(s[qe])*n,m:ue(s[Ze])*n,s:ue(s[Ge])*n,ms:ue(di(1e3*s[Je]))*n}):(s=Li.exec(e))?(n="-"===s[1]?-1:1,a={y:Ei(s[2],n),M:Ei(s[3],n),w:Ei(s[4],n),d:Ei(s[5],n),h:Ei(s[6],n),m:Ei(s[7],n),s:Ei(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=Ai(Jn(a.from),Jn(a.to)),(a={}).ms=o.milliseconds,a.M=o.months),i=new ri(a),li(e)&&l(e,"_locale")&&(i._locale=e._locale),li(e)&&l(e,"_isValid")&&(i._isValid=e._isValid),i}function Ei(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Oi(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ai(e,t){var n;return e.isValid()&&t.isValid()?(t=fi(t,e),e.isBefore(t)?n=Oi(e,t):((n=Oi(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ii(e,t){return function(n,i){var o;return null===i||isNaN(+i)||(D(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),Pi(this,Di(n,i),e),this}}function Pi(e,t,n,i){var a=t._milliseconds,s=di(t._days),r=di(t._months);e.isValid()&&(i=null==i||i,r&&ct(e,pe(e,"Month")+r*n),s&&fe(e,"Date",pe(e,"Date")+s*n),a&&e._d.setTime(e._d.valueOf()+a*n),i&&o.updateOffset(e,s||r))}Di.fn=ri.prototype,Di.invalid=si;var Ri=Ii(1,"add"),ji=Ii(-1,"subtract");function Yi(e){return"string"==typeof e||e instanceof String}function Hi(e){return x(e)||h(e)||Yi(e)||u(e)||Fi(e)||Ni(e)||null==e}function Ni(e){var t,n,i=r(e)&&!d(e),o=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s=a.length;for(t=0;t<s;t+=1)n=a[t],o=o||l(e,n);return i&&o}function Fi(e){var t=s(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&Yi(e)})).length),t&&n}function Bi(e){var t,n,i=r(e)&&!d(e),o=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=a[t],o=o||l(e,n);return i&&o}function $i(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function zi(e,t){1===arguments.length&&(arguments[0]?Hi(arguments[0])?(e=arguments[0],t=void 0):Bi(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Jn(),i=fi(n,this).startOf("day"),a=o.calendarFormat(this,i)||"sameElse",s=t&&(E(t[a])?t[a].call(this,n):t[a]);return this.format(s||this.localeData().calendar(a,this,Jn(n)))}function Wi(){return new C(this)}function Ui(e,t){var n=x(e)?e:Jn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=oe(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Vi(e,t){var n=x(e)?e:Jn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=oe(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function qi(e,t,n,i){var o=x(e)?e:Jn(e),a=x(t)?t:Jn(t);return!!(this.isValid()&&o.isValid()&&a.isValid())&&("("===(i=i||"()")[0]?this.isAfter(o,n):!this.isBefore(o,n))&&(")"===i[1]?this.isBefore(a,n):!this.isAfter(a,n))}function Zi(e,t){var n,i=x(e)?e:Jn(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=oe(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Gi(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Ji(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Ki(e,t,n){var i,o,a;if(!this.isValid())return NaN;if(!(i=fi(e,this)).isValid())return NaN;switch(o=6e4*(i.utcOffset()-this.utcOffset()),t=oe(t)){case"year":a=Xi(this,i)/12;break;case"month":a=Xi(this,i);break;case"quarter":a=Xi(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-o)/864e5;break;case"week":a=(this-i-o)/6048e5;break;default:a=this-i}return n?a:ce(a)}function Xi(e,t){if(e.date()<t.date())return-Xi(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function Qi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function eo(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function to(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i,o="moment",a="";return this.isLocal()||(o=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+o+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=a+'[")]',this.format(e+t+n+i)}function no(e){e||(e=this.isUtc()?o.defaultFormatUtc:o.defaultFormat);var t=W(this,e);return this.localeData().postformat(t)}function io(e,t){return this.isValid()&&(x(e)&&e.isValid()||Jn(e).isValid())?Di({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function oo(e){return this.from(Jn(),e)}function ao(e,t){return this.isValid()&&(x(e)&&e.isValid()||Jn(e).isValid())?Di({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function so(e){return this.to(Jn(),e)}function ro(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}o.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",o.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lo=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function co(){return this._locale}var uo=1e3,ho=60*uo,po=60*ho,fo=3506328*po;function mo(e,t){return(e%t+t)%t}function _o(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-fo:new Date(e,t,n).valueOf()}function vo(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-fo:Date.UTC(e,t,n)}function go(e){var t,n;if(void 0===(e=oe(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vo:_o,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mo(t+(this._isUTC?0:this.utcOffset()*ho),po);break;case"minute":t=this._d.valueOf(),t-=mo(t,ho);break;case"second":t=this._d.valueOf(),t-=mo(t,uo)}return this._d.setTime(t),o.updateOffset(this,!0),this}function yo(e){var t,n;if(void 0===(e=oe(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vo:_o,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=po-mo(t+(this._isUTC?0:this.utcOffset()*ho),po)-1;break;case"minute":t=this._d.valueOf(),t+=ho-mo(t,ho)-1;break;case"second":t=this._d.valueOf(),t+=uo-mo(t,uo)-1}return this._d.setTime(t),o.updateOffset(this,!0),this}function bo(){return this._d.valueOf()-6e4*(this._offset||0)}function wo(){return Math.floor(this.valueOf()/1e3)}function ko(){return new Date(this.valueOf())}function Co(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function xo(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function So(){return this.isValid()?this.toISOString():null}function Mo(){return g(this)}function To(){return f({},v(this))}function Lo(){return v(this).overflow}function Do(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Eo(e,t){var n,i,a,s=this._eras||yn("en")._eras;for(n=0,i=s.length;n<i;++n)switch("string"==typeof s[n].since&&(a=o(s[n].since).startOf("day"),s[n].since=a.valueOf()),typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":a=o(s[n].until).startOf("day").valueOf(),s[n].until=a.valueOf()}return s}function Oo(e,t,n){var i,o,a,s,r,l=this.eras();for(e=e.toUpperCase(),i=0,o=l.length;i<o;++i)if(a=l[i].name.toUpperCase(),s=l[i].abbr.toUpperCase(),r=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return l[i];break;case"NNNN":if(a===e)return l[i];break;case"NNNNN":if(r===e)return l[i]}else if([a,s,r].indexOf(e)>=0)return l[i]}function Ao(e,t){var n=e.since<=e.until?1:-1;return void 0===t?o(e.since).year():o(e.since).year()+(t-e.offset)*n}function Io(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""}function Po(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""}function Ro(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""}function jo(){var e,t,n,i,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until||a[e].until<=i&&i<=a[e].since)return(this.year()-o(a[e].since).year())*n+a[e].offset;return this.year()}function Yo(e){return l(this,"_erasNameRegex")||Wo.call(this),e?this._erasNameRegex:this._erasRegex}function Ho(e){return l(this,"_erasAbbrRegex")||Wo.call(this),e?this._erasAbbrRegex:this._erasRegex}function No(e){return l(this,"_erasNarrowRegex")||Wo.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fo(e,t){return t.erasAbbrRegex(e)}function Bo(e,t){return t.erasNameRegex(e)}function $o(e,t){return t.erasNarrowRegex(e)}function zo(e,t){return t._eraYearOrdinalRegex||De}function Wo(){var e,t,n=[],i=[],o=[],a=[],s=this.eras();for(e=0,t=s.length;e<t;++e)i.push(He(s[e].name)),n.push(He(s[e].abbr)),o.push(He(s[e].narrow)),a.push(He(s[e].name)),a.push(He(s[e].abbr)),a.push(He(s[e].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function Uo(e,t){B(0,[e,e.length],0,t)}function Vo(e){return Xo.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function qo(e){return Xo.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Zo(){return xt(this.year(),1,4)}function Go(){return xt(this.isoWeekYear(),1,4)}function Jo(){var e=this.localeData()._week;return xt(this.year(),e.dow,e.doy)}function Ko(){var e=this.localeData()._week;return xt(this.weekYear(),e.dow,e.doy)}function Xo(e,t,n,i,o){var a;return null==e?Ct(this,i,o).year:(t>(a=xt(e,i,o))&&(t=a),Qo.call(this,e,t,n,i,o))}function Qo(e,t,n,i,o){var a=kt(e,t,n,i,o),s=bt(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function ea(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}B("N",0,0,"eraAbbr"),B("NN",0,0,"eraAbbr"),B("NNN",0,0,"eraAbbr"),B("NNNN",0,0,"eraName"),B("NNNNN",0,0,"eraNarrow"),B("y",["y",1],"yo","eraYear"),B("y",["yy",2],0,"eraYear"),B("y",["yyy",3],0,"eraYear"),B("y",["yyyy",4],0,"eraYear"),Re("N",Fo),Re("NN",Fo),Re("NNN",Fo),Re("NNNN",Bo),Re("NNNNN",$o),Fe(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,i){var o=n._locale.erasParse(e,i,n._strict);o?v(n).era=o:v(n).invalidEra=e})),Re("y",De),Re("yy",De),Re("yyy",De),Re("yyyy",De),Re("yo",zo),Fe(["y","yy","yyy","yyyy"],We),Fe(["yo"],(function(e,t,n,i){var o;n._locale._eraYearOrdinalRegex&&(o=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[We]=n._locale.eraYearOrdinalParse(e,o):t[We]=parseInt(e,10)})),B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Uo("gggg","weekYear"),Uo("ggggg","weekYear"),Uo("GGGG","isoWeekYear"),Uo("GGGGG","isoWeekYear"),ie("weekYear","gg"),ie("isoWeekYear","GG"),re("weekYear",1),re("isoWeekYear",1),Re("G",Ee),Re("g",Ee),Re("GG",Ce,ye),Re("gg",Ce,ye),Re("GGGG",Te,we),Re("gggg",Te,we),Re("GGGGG",Le,ke),Re("ggggg",Le,ke),Be(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=ue(e)})),Be(["gg","GG"],(function(e,t,n,i){t[i]=o.parseTwoDigitYear(e)})),B("Q",0,"Qo","quarter"),ie("quarter","Q"),re("quarter",7),Re("Q",ge),Fe("Q",(function(e,t){t[Ue]=3*(ue(e)-1)})),B("D",["DD",2],"Do","date"),ie("date","D"),re("date",9),Re("D",Ce),Re("DD",Ce,ye),Re("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Fe(["D","DD"],Ve),Fe("Do",(function(e,t){t[Ve]=ue(e.match(Ce)[0])}));var ta=he("Date",!0);function na(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}B("DDD",["DDDD",3],"DDDo","dayOfYear"),ie("dayOfYear","DDD"),re("dayOfYear",4),Re("DDD",Me),Re("DDDD",be),Fe(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=ue(e)})),B("m",["mm",2],0,"minute"),ie("minute","m"),re("minute",14),Re("m",Ce),Re("mm",Ce,ye),Fe(["m","mm"],Ze);var ia=he("Minutes",!1);B("s",["ss",2],0,"second"),ie("second","s"),re("second",15),Re("s",Ce),Re("ss",Ce,ye),Fe(["s","ss"],Ge);var oa,aa,sa=he("Seconds",!1);for(B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ie("millisecond","ms"),re("millisecond",16),Re("S",Me,ge),Re("SS",Me,ye),Re("SSS",Me,be),oa="SSSS";oa.length<=9;oa+="S")Re(oa,De);function ra(e,t){t[Je]=ue(1e3*("0."+e))}for(oa="S";oa.length<=9;oa+="S")Fe(oa,ra);function la(){return this._isUTC?"UTC":""}function da(){return this._isUTC?"Coordinated Universal Time":""}aa=he("Milliseconds",!1),B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var ca=C.prototype;function ua(e){return Jn(1e3*e)}function ha(){return Jn.apply(null,arguments).parseZone()}function pa(e){return e}ca.add=Ri,ca.calendar=zi,ca.clone=Wi,ca.diff=Ki,ca.endOf=yo,ca.format=no,ca.from=io,ca.fromNow=oo,ca.to=ao,ca.toNow=so,ca.get=me,ca.invalidAt=Lo,ca.isAfter=Ui,ca.isBefore=Vi,ca.isBetween=qi,ca.isSame=Zi,ca.isSameOrAfter=Gi,ca.isSameOrBefore=Ji,ca.isValid=Mo,ca.lang=lo,ca.locale=ro,ca.localeData=co,ca.max=Xn,ca.min=Kn,ca.parsingFlags=To,ca.set=_e,ca.startOf=go,ca.subtract=ji,ca.toArray=Co,ca.toObject=xo,ca.toDate=ko,ca.toISOString=eo,ca.inspect=to,"undefined"!=typeof Symbol&&null!=Symbol.for&&(ca[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ca.toJSON=So,ca.toString=Qi,ca.unix=wo,ca.valueOf=bo,ca.creationData=Do,ca.eraName=Io,ca.eraNarrow=Po,ca.eraAbbr=Ro,ca.eraYear=jo,ca.year=vt,ca.isLeapYear=gt,ca.weekYear=Vo,ca.isoWeekYear=qo,ca.quarter=ca.quarters=ea,ca.month=ut,ca.daysInMonth=ht,ca.week=ca.weeks=Dt,ca.isoWeek=ca.isoWeeks=Et,ca.weeksInYear=Jo,ca.weeksInWeekYear=Ko,ca.isoWeeksInYear=Zo,ca.isoWeeksInISOWeekYear=Go,ca.date=ta,ca.day=ca.days=Ut,ca.weekday=Vt,ca.isoWeekday=qt,ca.dayOfYear=na,ca.hour=ca.hours=an,ca.minute=ca.minutes=ia,ca.second=ca.seconds=sa,ca.millisecond=ca.milliseconds=aa,ca.utcOffset=_i,ca.utc=gi,ca.local=yi,ca.parseZone=bi,ca.hasAlignedHourOffset=wi,ca.isDST=ki,ca.isLocal=xi,ca.isUtcOffset=Si,ca.isUtc=Mi,ca.isUTC=Mi,ca.zoneAbbr=la,ca.zoneName=da,ca.dates=M("dates accessor is deprecated. Use date instead.",ta),ca.months=M("months accessor is deprecated. Use month instead",ut),ca.years=M("years accessor is deprecated. Use year instead",vt),ca.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vi),ca.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ci);var fa=I.prototype;function ma(e,t,n,i){var o=yn(),a=m().set(i,t);return o[n](a,e)}function _a(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return ma(e,t,n,"month");var i,o=[];for(i=0;i<12;i++)o[i]=ma(e,i,n,"month");return o}function va(e,t,n,i){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var o,a=yn(),s=e?a._week.dow:0,r=[];if(null!=n)return ma(t,(n+s)%7,i,"day");for(o=0;o<7;o++)r[o]=ma(t,(o+s)%7,i,"day");return r}function ga(e,t){return _a(e,t,"months")}function ya(e,t){return _a(e,t,"monthsShort")}function ba(e,t,n){return va(e,t,n,"weekdays")}function wa(e,t,n){return va(e,t,n,"weekdaysShort")}function ka(e,t,n){return va(e,t,n,"weekdaysMin")}fa.calendar=R,fa.longDateFormat=q,fa.invalidDate=G,fa.ordinal=X,fa.preparse=pa,fa.postformat=pa,fa.relativeTime=ee,fa.pastFuture=te,fa.set=O,fa.eras=Eo,fa.erasParse=Oo,fa.erasConvertYear=Ao,fa.erasAbbrRegex=Ho,fa.erasNameRegex=Yo,fa.erasNarrowRegex=No,fa.months=st,fa.monthsShort=rt,fa.monthsParse=dt,fa.monthsRegex=ft,fa.monthsShortRegex=pt,fa.week=St,fa.firstDayOfYear=Lt,fa.firstDayOfWeek=Tt,fa.weekdays=Ft,fa.weekdaysMin=$t,fa.weekdaysShort=Bt,fa.weekdaysParse=Wt,fa.weekdaysRegex=Zt,fa.weekdaysShortRegex=Gt,fa.weekdaysMinRegex=Jt,fa.isPM=nn,fa.meridiem=sn,_n("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ue(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),o.lang=M("moment.lang is deprecated. Use moment.locale instead.",_n),o.langData=M("moment.langData is deprecated. Use moment.localeData instead.",yn);var Ca=Math.abs;function xa(){var e=this._data;return this._milliseconds=Ca(this._milliseconds),this._days=Ca(this._days),this._months=Ca(this._months),e.milliseconds=Ca(e.milliseconds),e.seconds=Ca(e.seconds),e.minutes=Ca(e.minutes),e.hours=Ca(e.hours),e.months=Ca(e.months),e.years=Ca(e.years),this}function Sa(e,t,n,i){var o=Di(t,n);return e._milliseconds+=i*o._milliseconds,e._days+=i*o._days,e._months+=i*o._months,e._bubble()}function Ma(e,t){return Sa(this,e,t,1)}function Ta(e,t){return Sa(this,e,t,-1)}function La(e){return e<0?Math.floor(e):Math.ceil(e)}function Da(){var e,t,n,i,o,a=this._milliseconds,s=this._days,r=this._months,l=this._data;return a>=0&&s>=0&&r>=0||a<=0&&s<=0&&r<=0||(a+=864e5*La(Oa(r)+s),s=0,r=0),l.milliseconds=a%1e3,e=ce(a/1e3),l.seconds=e%60,t=ce(e/60),l.minutes=t%60,n=ce(t/60),l.hours=n%24,s+=ce(n/24),r+=o=ce(Ea(s)),s-=La(Oa(o)),i=ce(r/12),r%=12,l.days=s,l.months=r,l.years=i,this}function Ea(e){return 4800*e/146097}function Oa(e){return 146097*e/4800}function Aa(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=oe(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Ea(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Oa(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function Ia(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ue(this._months/12):NaN}function Pa(e){return function(){return this.as(e)}}var Ra=Pa("ms"),ja=Pa("s"),Ya=Pa("m"),Ha=Pa("h"),Na=Pa("d"),Fa=Pa("w"),Ba=Pa("M"),$a=Pa("Q"),za=Pa("y");function Wa(){return Di(this)}function Ua(e){return e=oe(e),this.isValid()?this[e+"s"]():NaN}function Va(e){return function(){return this.isValid()?this._data[e]:NaN}}var qa=Va("milliseconds"),Za=Va("seconds"),Ga=Va("minutes"),Ja=Va("hours"),Ka=Va("days"),Xa=Va("months"),Qa=Va("years");function es(){return ce(this.days()/7)}var ts=Math.round,ns={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function is(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}function os(e,t,n,i){var o=Di(e).abs(),a=ts(o.as("s")),s=ts(o.as("m")),r=ts(o.as("h")),l=ts(o.as("d")),d=ts(o.as("M")),c=ts(o.as("w")),u=ts(o.as("y")),h=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||s<=1&&["m"]||s<n.m&&["mm",s]||r<=1&&["h"]||r<n.h&&["hh",r]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||c<=1&&["w"]||c<n.w&&["ww",c]),(h=h||d<=1&&["M"]||d<n.M&&["MM",d]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=i,is.apply(null,h)}function as(e){return void 0===e?ts:"function"==typeof e&&(ts=e,!0)}function ss(e,t){return void 0!==ns[e]&&(void 0===t?ns[e]:(ns[e]=t,"s"===e&&(ns.ss=t-1),!0))}function rs(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,o=!1,a=ns;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(o=e),"object"==typeof t&&(a=Object.assign({},ns,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),i=os(this,!o,a,n=this.localeData()),o&&(i=n.pastFuture(+this,i)),n.postformat(i)}var ls=Math.abs;function ds(e){return(e>0)-(e<0)||+e}function cs(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,o,a,s,r,l=ls(this._milliseconds)/1e3,d=ls(this._days),c=ls(this._months),u=this.asSeconds();return u?(e=ce(l/60),t=ce(e/60),l%=60,e%=60,n=ce(c/12),c%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",o=u<0?"-":"",a=ds(this._months)!==ds(u)?"-":"",s=ds(this._days)!==ds(u)?"-":"",r=ds(this._milliseconds)!==ds(u)?"-":"",o+"P"+(n?a+n+"Y":"")+(c?a+c+"M":"")+(d?s+d+"D":"")+(t||e||l?"T":"")+(t?r+t+"H":"")+(e?r+e+"M":"")+(l?r+i+"S":"")):"P0D"}var us=ri.prototype;return us.isValid=ai,us.abs=xa,us.add=Ma,us.subtract=Ta,us.as=Aa,us.asMilliseconds=Ra,us.asSeconds=ja,us.asMinutes=Ya,us.asHours=Ha,us.asDays=Na,us.asWeeks=Fa,us.asMonths=Ba,us.asQuarters=$a,us.asYears=za,us.valueOf=Ia,us._bubble=Da,us.clone=Wa,us.get=Ua,us.milliseconds=qa,us.seconds=Za,us.minutes=Ga,us.hours=Ja,us.days=Ka,us.weeks=es,us.months=Xa,us.years=Qa,us.humanize=rs,us.toISOString=cs,us.toString=cs,us.toJSON=cs,us.locale=ro,us.localeData=co,us.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cs),us.lang=lo,B("X",0,0,"unix"),B("x",0,0,"valueOf"),Re("x",Ee),Re("X",Ie),Fe("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Fe("x",(function(e,t,n){n._d=new Date(ue(e))})),o.version="2.29.4",a(Jn),o.fn=ca,o.min=ei,o.max=ti,o.now=ni,o.utc=m,o.unix=ua,o.months=ga,o.isDate=h,o.locale=_n,o.invalid=y,o.duration=Di,o.isMoment=x,o.weekdays=ba,o.parseZone=ha,o.localeData=yn,o.isDuration=li,o.monthsShort=ya,o.weekdaysMin=ka,o.defineLocale=vn,o.updateLocale=gn,o.locales=bn,o.weekdaysShort=wa,o.normalizeUnits=oe,o.relativeTimeRounding=as,o.relativeTimeThreshold=ss,o.calendarFormat=$i,o.prototype=ca,o.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},o}()},84319:function(e,t,n){!function(t,i){"use strict";var o;try{o=n(9531)}catch(e){}e.exports=function(e){var t="function"==typeof e,n=!!window.addEventListener,i=window.document,o=window.setTimeout,a=function(e,t,i,o){n?e.addEventListener(t,i,!!o):e.attachEvent("on"+t,i)},s=function(e,t,i,o){n?e.removeEventListener(t,i,!!o):e.detachEvent("on"+t,i)},r=function(e,t,n){var o;i.createEvent?((o=i.createEvent("HTMLEvents")).initEvent(t,!0,!1),o=y(o,n),e.dispatchEvent(o)):i.createEventObject&&(o=i.createEventObject(),o=y(o,n),e.fireEvent("on"+t,o))},l=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},d=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},c=function(e,t){d(e,t)||(e.className=""===e.className?t:e.className+" "+t)},u=function(e,t){e.className=l((" "+e.className+" ").replace(" "+t+" "," "))},h=function(e){return/Array/.test(Object.prototype.toString.call(e))},p=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},f=function(e){var t=e.getDay();return 0===t||6===t},m=function(e){return e%4==0&&e%100!=0||e%400==0},_=function(e,t){return[31,m(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},v=function(e){p(e)&&e.setHours(0,0,0,0)},g=function(e,t){return e.getTime()===t.getTime()},y=function(e,t,n){var i,o;for(i in t)(o=void 0!==e[i])&&"object"==typeof t[i]&&null!==t[i]&&void 0===t[i].nodeName?p(t[i])?n&&(e[i]=new Date(t[i].getTime())):h(t[i])?n&&(e[i]=t[i].slice(0)):e[i]=y({},t[i],n):!n&&o||(e[i]=t[i]);return e},b=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},w={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},k=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},C=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},x=function(e,t,n){var i=new Date(n,0,1);return'<td class="pika-week">'+Math.ceil(((new Date(n,t,e)-i)/864e5+i.getDay()+1)/7)+"</td>"},S=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},M=function(e){return"<tbody>"+e.join("")+"</tbody>"},T=function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+k(e,t)+'">'+k(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"},L=function(e,t,n,i,o,a){var s,r,l,d,c,u=e._o,p=n===u.minYear,f=n===u.maxYear,m='<div id="'+a+'" class="pika-title" role="heading" aria-live="assertive">',_=!0,v=!0;for(l=[],s=0;s<12;s++)l.push('<option value="'+(n===o?s-t:12+s-t)+'"'+(s===i?' selected="selected"':"")+(p&&s<u.minMonth||f&&s>u.maxMonth?'disabled="disabled"':"")+">"+u.i18n.months[s]+"</option>");for(d='<div class="pika-label">'+u.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",h(u.yearRange)?(s=u.yearRange[0],r=u.yearRange[1]+1):(s=n-u.yearRange,r=1+n+u.yearRange),l=[];s<r&&s<=u.maxYear;s++)s>=u.minYear&&l.push('<option value="'+s+'"'+(s===n?' selected="selected"':"")+">"+s+"</option>");return c='<div class="pika-label">'+n+u.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",u.showMonthAfterYear?m+=c+d:m+=d+c,p&&(0===i||u.minMonth>=i)&&(_=!1),f&&(11===i||u.maxMonth<=i)&&(v=!1),0===t&&(m+='<button class="pika-prev'+(_?"":" is-disabled")+'" type="button">'+u.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(v?"":" is-disabled")+'" type="button">'+u.i18n.nextMonth+"</button>"),m+"</div>"},D=function(e,t,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+T(e)+M(t)+"</table>"},E=function(s){var r=this,l=r.config(s);r._onMouseDown=function(e){if(r._v){var t=(e=e||window.event).target||e.srcElement;if(t)if(d(t,"is-disabled")||(!d(t,"pika-button")||d(t,"is-empty")||d(t.parentNode,"is-disabled")?d(t,"pika-prev")?r.prevMonth():d(t,"pika-next")&&r.nextMonth():(r.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),l.bound&&o((function(){r.hide(),l.field&&l.field.blur()}),100))),d(t,"pika-select"))r._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},r._onChange=function(e){var t=(e=e||window.event).target||e.srcElement;t&&(d(t,"pika-select-month")?r.gotoMonth(t.value):d(t,"pika-select-year")&&r.gotoYear(t.value))},r._onKeyChange=function(e){if(e=e||window.event,r.isVisible())switch(e.keyCode){case 13:case 27:l.field.blur();break;case 37:e.preventDefault(),r.adjustDate("subtract",1);break;case 38:r.adjustDate("subtract",7);break;case 39:r.adjustDate("add",1);break;case 40:r.adjustDate("add",7)}},r._onInputChange=function(n){var i;n.firedBy!==r&&(i=t?(i=e(l.field.value,l.format,l.formatStrict))&&i.isValid()?i.toDate():null:new Date(Date.parse(l.field.value)),p(i)&&r.setDate(i),r._v||r.show())},r._onInputFocus=function(){r.show()},r._onInputClick=function(){r.show()},r._onInputBlur=function(){var e=i.activeElement;do{if(d(e,"pika-single"))return}while(e=e.parentNode);r._c||(r._b=o((function(){r.hide()}),50)),r._c=!1},r._onClick=function(e){var t=(e=e||window.event).target||e.srcElement,i=t;if(t){!n&&d(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),a(t,"change",r._onChange)));do{if(d(i,"pika-single")||i===l.trigger)return}while(i=i.parentNode);r._v&&t!==l.trigger&&i!==l.trigger&&r.hide()}},r.el=i.createElement("div"),r.el.className="pika-single"+(l.isRTL?" is-rtl":"")+(l.theme?" "+l.theme:""),a(r.el,"mousedown",r._onMouseDown,!0),a(r.el,"touchend",r._onMouseDown,!0),a(r.el,"change",r._onChange),a(i,"keydown",r._onKeyChange),l.field&&(l.container?l.container.appendChild(r.el):l.bound?i.body.appendChild(r.el):l.field.parentNode.insertBefore(r.el,l.field.nextSibling),a(l.field,"change",r._onInputChange),l.defaultDate||(t&&l.field.value?l.defaultDate=e(l.field.value,l.format).toDate():l.defaultDate=new Date(Date.parse(l.field.value)),l.setDefaultDate=!0));var c=l.defaultDate;p(c)?l.setDefaultDate?r.setDate(c,!0):r.gotoDate(c):r.gotoDate(new Date),l.bound?(this.hide(),r.el.className+=" is-bound",a(l.trigger,"click",r._onInputClick),a(l.trigger,"focus",r._onInputFocus),a(l.trigger,"blur",r._onInputBlur)):this.show()};return E.prototype={config:function(e){this._o||(this._o=y({},w,!0));var t=y(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,p(t.minDate)||(t.minDate=!1),p(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),h(t.yearRange)){var i=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||i,t.yearRange[1]=parseInt(t.yearRange[1],10)||i}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||w.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return p(this._d)?t?e(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,i){t&&e.isMoment(n)&&this.setDate(n.toDate(),i)},getDate:function(){return p(this._d)?new Date(this._d.getTime()):new Date},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",r(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),p(e)){var n=this._o.minDate,i=this._o.maxDate;p(n)&&e<n?e=n:p(i)&&e>i&&(e=i),this._d=new Date(e.getTime()),v(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),r(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(p(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=e.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),t=o<n.getTime()||i.getTime()<o}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,i){var o,a=this.getDate(),s=24*parseInt(i)*60*60*1e3;"add"===n?o=new Date(a.valueOf()+s):"subtract"===n&&(o=new Date(a.valueOf()-s)),t&&("add"===n?o=e(a).add(i,"days").toDate():"subtract"===n&&(o=e(a).subtract(i,"days").toDate())),this.setDate(o)},adjustCalendars:function(){this.calendars[0]=b(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=b({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(v(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=w.minDate,this._o.minYear=w.minYear,this._o.minMonth=w.minMonth,this._o.startRange=w.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(v(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=w.maxDate,this._o.maxYear=w.maxYear,this._o.maxMonth=w.maxMonth,this._o.endRange=w.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,i=n.minYear,a=n.maxYear,s=n.minMonth,r=n.maxMonth,l="";this._y<=i&&(this._y=i,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=a&&(this._y=a,!isNaN(r)&&this._m>r&&(this._m=r)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var d=0;d<n.numberOfMonths;d++)l+='<div class="pika-lendar">'+L(this,d,this.calendars[d].year,this.calendars[d].month,this.calendars[0].year,t)+this.render(this.calendars[d].year,this.calendars[d].month,t)+"</div>";this.el.innerHTML=l,n.bound&&"hidden"!==n.field.type&&o((function(){n.trigger.focus()}),1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var e,t,n,o,a,s,r,l,d,c;if(!this._o.container){if(this.el.style.position="absolute",t=e=this._o.trigger,n=this.el.offsetWidth,o=this.el.offsetHeight,a=window.innerWidth||i.documentElement.clientWidth,s=window.innerHeight||i.documentElement.clientHeight,r=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop,"function"==typeof e.getBoundingClientRect)l=(c=e.getBoundingClientRect()).left+window.pageXOffset,d=c.bottom+window.pageYOffset;else for(l=t.offsetLeft,d=t.offsetTop+t.offsetHeight;t=t.offsetParent;)l+=t.offsetLeft,d+=t.offsetTop;(this._o.reposition&&l+n>a||this._o.position.indexOf("right")>-1&&l-n+e.offsetWidth>0)&&(l=l-n+e.offsetWidth),(this._o.reposition&&d+o>s+r||this._o.position.indexOf("top")>-1&&d-o-e.offsetHeight>0)&&(d=d-o-e.offsetHeight),this.el.style.left=l+"px",this.el.style.top=d+"px"}},render:function(e,t,n){var i=this._o,o=new Date,a=_(e,t),s=new Date(e,t,1).getDay(),r=[],l=[];v(o),i.firstDay>0&&(s-=i.firstDay)<0&&(s+=7);for(var d=0===t?11:t-1,c=11===t?0:t+1,u=0===t?e-1:e,h=11===t?e+1:e,m=_(u,d),y=a+s,b=y;b>7;)b-=7;y+=7-b;for(var w=0,k=0;w<y;w++){var M=new Date(e,t,w-s+1),T=!!p(this._d)&&g(M,this._d),L=g(M,o),E=w<s||w>=a+s,O=w-s+1,A=t,I=e,P=i.startRange&&g(i.startRange,M),R=i.endRange&&g(i.endRange,M),j=i.startRange&&i.endRange&&i.startRange<M&&M<i.endRange;E&&(w<s?(O=m+O,A=d,I=u):(O-=a,A=c,I=h));var Y={day:O,month:A,year:I,isSelected:T,isToday:L,isDisabled:i.minDate&&M<i.minDate||i.maxDate&&M>i.maxDate||i.disableWeekends&&f(M)||i.disableDayFn&&i.disableDayFn(M),isEmpty:E,isStartRange:P,isEndRange:R,isInRange:j,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths};l.push(C(Y)),7==++k&&(i.showWeekNumber&&l.unshift(x(w-s,t,e)),r.push(S(l,i.isRTL)),l=[],k=0)}return D(i,r,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(u(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(a(i,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;!1!==e&&(this._o.bound&&s(i,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",c(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),s(this.el,"mousedown",this._onMouseDown,!0),s(this.el,"touchend",this._onMouseDown,!0),s(this.el,"change",this._onChange),this._o.field&&(s(this._o.field,"change",this._onInputChange),this._o.bound&&(s(this._o.trigger,"click",this._onInputClick),s(this._o.trigger,"focus",this._onInputFocus),s(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},E}(o)}()},49871:(e,t,n)=>{"use strict";n.d(t,{GE:()=>h,fR:()=>c,m0:()=>l});var i=n(75118),o=n(71314),a=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const s=50,r=o._.path("/api/dataset_collections/{id}").method("get").create();function l(e){return a(this,void 0,void 0,(function*(){const{data:t}=yield r({id:e.id});return t}))}const d=o._.path("/api/dataset_collections/{hdca_id}/contents/{parent_id}").method("get").create();function c(e){var t,n;return a(this,void 0,void 0,(function*(){return function(e){return a(this,void 0,void 0,(function*(){const{data:t}=yield d({instance_type:"history",hdca_id:e.hdcaId,parent_id:e.collectionId,offset:e.offset,limit:e.limit});return t}))}({hdcaId:(0,i.K)(e.entry)?e.entry.id:e.entry.hdca_id,collectionId:(0,i.K)(e.entry)?e.entry.collection_id:e.entry.id,offset:null!==(t=e.offset)&&void 0!==t?t:0,limit:null!==(n=e.limit)&&void 0!==n?n:s})}))}const u=o._.path("/api/dataset_collections/{id}/attributes").method("get").create();function h(e){return a(this,void 0,void 0,(function*(){const{data:t}=yield u({id:e.hdcaId,instance_type:"history"});return t}))}},8766:(e,t,n)=>{"use strict";n.d(t,{Bm:()=>m,EX:()=>r,Ob:()=>s,UU:()=>_,nG:()=>d,o1:()=>u,so:()=>p});var i=n(71314),o=n(74448),a=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const s=i._.path("/api/datasets").method("get").create();function r(e={}){return a(this,void 0,void 0,(function*(){const t={};if(e.sortBy){const n=e.sortDesc?"-dsc":"-asc";t.order=`${e.sortBy}${n}`}e.limit&&(t.limit=e.limit),e.offset&&(t.offset=e.offset),e.query&&(t.q=["name-contains"],t.qv=[e.query]);const{data:n}=yield s(t);return n}))}const l=i._.path("/api/datasets/{dataset_id}").method("get").create();function d(e){return a(this,void 0,void 0,(function*(){const{data:t}=yield l({dataset_id:e.id,view:"detailed"});return t}))}const c=i._.path("/api/histories/{history_id}/contents/{type}s/{id}").method("put").create();function u(e,t){return a(this,void 0,void 0,(function*(){const{data:n}=yield c({history_id:e,id:t,type:"dataset",deleted:!1});return n}))}const h=i._.path("/api/histories/{history_id}/contents/{type}s/{id}").method("delete").create();function p(e,t){return a(this,void 0,void 0,(function*(){const{data:n}=yield h({history_id:e,id:t,type:"dataset",purge:!0});return n}))}const f=i._.path("/api/histories/{history_id}/contents/{type}s").method("post").create();function m(e,t,n="dataset",i="hda"){return a(this,void 0,void 0,(function*(){return(yield f({history_id:t,type:n,source:i,content:e})).data}))}function _(e,t){return(0,o.dq)(`/api/datasets/${e}/display?filename=${t}`)}},21718:(e,t,n)=>{"use strict";n.d(t,{ZR:()=>r,kI:()=>a,qF:()=>s,z:()=>d});var i=n(71314),o=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const a=i._.path("/api/datatypes").method("get").create(),s=i._.path("/api/datatypes/edam_formats/detailed").method("get").create(),r=i._.path("/api/datatypes/edam_data/detailed").method("get").create(),l=i._.path("/api/datatypes/types_and_mapping").method("get").create();function d(e=!0){return o(this,void 0,void 0,(function*(){const{data:t}=yield l({upload_only:e});return t}))}},53063:(e,t,n)=>{"use strict";n.d(t,{MW:()=>p,M_:()=>d,OJ:()=>r,TG:()=>u});var i=n(71314),o=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const a=10,s=i._.path("/api/histories/archived").method("get").create();function r(e={}){var t;return o(this,void 0,void 0,(function*(){const n=function(e){var t;const n={};e.query&&(n.q=["name-contains"],n.qv=[e.query]);const i=null!==(t=e.pageSize)&&void 0!==t?t:a;return n.offset=(e.currentPage?e.currentPage-1:0)*i,n.limit=i,n.order=e.sortBy?`${e.sortBy}${e.sortDesc?"-dsc":"-asc"}`:void 0,n.view=e.view,n.keys=e.keys,n}(e),{data:i,headers:o}=yield s(n),r=parseInt(null!==(t=o.get("total_matches"))&&void 0!==t?t:"0");return n.view,{histories:i,totalMatches:r}}))}const l=i._.path("/api/histories/{history_id}/archive").method("post").create();function d(e,t,n){return o(this,void 0,void 0,(function*(){const{data:i}=yield l({history_id:e,archive_export_id:t,purge_history:n});return i}))}const c=i._.path("/api/histories/{history_id}/archive/restore").method("put").create({force:void 0});function u(e,t){return o(this,void 0,void 0,(function*(){const{data:n}=yield c({history_id:e,force:t});return n}))}const h=i._.path("/api/histories/from_store_async").method("post").create();function p(e){return o(this,void 0,void 0,(function*(){if(!e.export_record_data)throw new Error("The archived history does not have an associated export record.");const{data:t}=yield h({model_store_format:e.export_record_data.model_store_format,store_content_uri:e.export_record_data.target_uri});return t}))}},75118:(e,t,n)=>{"use strict";function i(e){return void 0!==e&&"history_content_type"in e&&"dataset_collection"===e.history_content_type}function o(e){return"dataset_collection"===e.element_type}n.d(t,{I:()=>o,K:()=>i})},62101:(e,t,n)=>{"use strict";n.d(t,{EA:()=>c,Mg:()=>l,Oq:()=>s,lT:()=>r});var i=n(22945),o=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const a=i._.path("/api/remote_files/plugins").method("get").create();function s(e={}){return o(this,void 0,void 0,(function*(){const{data:t}=yield a({browsable_only:!0,include_kind:e.include,exclude_kind:e.exclude});return t}))}const r=i._.path("/api/remote_files").method("get").create();function l(e,t=!1,n=!1){return o(this,void 0,void 0,(function*(){const{data:i}=yield r({target:e,recursive:t,writeable:n});return i}))}const d=i._.path("/api/remote_files").method("post").create();function c(e,t){return o(this,void 0,void 0,(function*(){const{data:n}=yield d({target:e,name:t});return n}))}},22945:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var i=n(3262),o=n(40961),a=n(50452),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const r=i.HI.for();r.configure({baseUrl:(0,o.getAppRoot)(void 0,!0),use:[(e,t,n)=>s(void 0,void 0,void 0,(function*(){try{return yield n(e,t)}catch(e){(0,a.t)(e)}}))]})},71314:(e,t,n)=>{"use strict";n.d(t,{_:()=>i._});var i=n(22945)},47011:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,P:()=>i});const i={ok:{status:"success"},empty:{status:"success",text:"No data."},new:{status:"warning",text:"This is a new dataset and not all of its data are available yet.",icon:"clock"},queued:{status:"warning",text:"This job is waiting to run.",icon:"clock"},running:{status:"warning",text:"This job is currently running.",icon:"spinner",spin:!0},setting_metadata:{status:"warning",text:"Metadata is being auto-detected.",icon:"spinner",spin:!0},upload:{status:"warning",text:"This dataset is currently uploading.",icon:"spinner",spin:!0},deferred:{status:"info",text:"This dataset is remote, has not been ingested by Galaxy, and full metadata may not be available.",icon:"cloud"},paused:{status:"info",text:"This job is paused. Use the 'Resume Paused Jobs' in the history menu to resume.",icon:"pause"},discarded:{status:"danger",text:"This dataset is discarded - the job creating it may have been cancelled or it may have been imported without file data.",icon:"exclamation-triangle"},error:{status:"danger",text:"An error occurred with this dataset:",icon:"exclamation-triangle"},failed_metadata:{status:"danger",text:"Metadata generation failed. Please retry.",icon:"exclamation-triangle"},failed:{status:"danger",icon:"exclamation-triangle"},placeholder:{status:"secondary",text:"This dataset is being fetched.",icon:"spinner",spin:!0}},o=["error","failed","upload","paused","running","queued","new"]},44689:(e,t,n)=>{"use strict";n.d(t,{FW:()=>s,L$:()=>d,Vc:()=>a,_m:()=>o,eY:()=>l,oe:()=>i,uW:()=>r});n(96486);const i={default:"undo",generic:"filter",ontology:"sitemap",activity:"project-diagram",publication:"newspaper",training:"graduation-cap"};function o(e){let t="(";const n=e.name;n&&(t+="name:("+n+") ",t+="name_exact:("+n+") ",t+="description:("+n+")"),t+=") AND (";for(const[n,i]of Object.entries(e))i&&("ontology"===n&&i.includes("operation")?t+="edam_operations:("+i+") AND ":"ontology"===n&&i.includes("topic")?t+="edam_topics:("+i+") AND ":"id"==n?t+="id_exact:("+i+") AND ":"name"!=n&&(t+=n+":("+i+") AND "));return t+=")",t}function a(e,t,n,i,o,a){let s=null;if("right"===o){const n=e.left-t.left;s=e.right-a-n}else{const n=e.right-t.left;s=a-e.left+n}return Math.max(n,Math.min(i,s))}function s(e,t){const n={};for(const i of t){const t=e[i];void 0!==t&&(n[i]=t)}return n}function r(e,t=!1,n=[]){const i=Object.entries(e).filter((([,e])=>!(e.hidden||!0===e.disabled||t&&!e.is_workflow_compatible||n.includes(e.panel_section_id))));return Object.fromEntries(i)}function l(e,t){return Object.entries(t).map((([t,n])=>{const i=Object.assign({},n);return i.tools&&Array.isArray(i.tools)&&(i.tools=i.tools.filter((t=>!("string"!=typeof t||!e.includes(t))||("string"!=typeof t||void 0)))),[t,i]}))}function d(e,t,n=[]){const i=e.filter((([e,i])=>!(!c(i)||!t.includes(e))||(void 0===i.tools||!(!(i.tools&&i.tools.length>0)||n.includes(e)))));return Object.fromEntries(i)}function c(e){return!e.text&&"ToolSectionLabel"!==e.model_class&&"ToolSection"!==e.model_class&&void 0===e.tools}},7767:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(70538),o=n(48391);function a(e=!1){const t=(0,o.F)(),n=(0,i.computed)((()=>t.config)),a=(0,i.computed)((()=>t.isLoaded));return(0,i.onMounted)((()=>{e&&a||t.loadConfig()})),{config:n,isConfigLoaded:a}}},93514:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(9980),o=n.n(i),a=n(70538);function s(e={}){const t=o()();return e.openLinksInNewPage&&function(e){const t=e.renderer.rules.link_open||function(e,t,n,i,o){return o.renderToken(e,t,n)};e.renderer.rules.link_open=function(e,n,i,o,a){const s=e[n];if(s){const e=s.attrIndex("target");e&&e<0?s.attrPush(["target","_blank"]):s.attrs[e][1]="_blank"}return t(e,n,i,o,a)}}(t),e.increaseHeadingLevelBy&&function(e,t){const n=e.renderer.rules.heading_open||function(e,t,n,i,o){return o.renderToken(e,t,n)},i=e.renderer.rules.heading_close||function(e,t,n,i,o){return o.renderToken(e,t,n)},o=e=>{var n;const i=parseInt(null!==(n=e.tag[1])&&void 0!==n?n:"1");e.tag=`h${i+t}`};e.renderer.rules.heading_open=function(e,t,i,a,s){const r=e[t];return r&&o(r),n(e,t,i,a,s)},e.renderer.rules.heading_close=function(e,t,n,a,s){const r=e[t];return r&&o(r),i(e,t,n,a,s)}}(t,e.increaseHeadingLevelBy),{renderMarkdown:function(e){return t.render(e)},markdownEngine:(0,a.readonly)(t)}}},47277:(e,t,n)=>{"use strict";n.d(t,{n:()=>h});var i=n(70538),o=n(71314),a=n(50452),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const r="SUCCESS",l="FAILURE",d=[r,l],c=1e4,u=o._.path("/api/tasks/{task_id}/state").method("get").create();function h(){let e=null,t=c;const n=(0,i.ref)(!1),o=(0,i.ref)(),h=(0,i.ref)(),p=(0,i.ref)(!1),f=(0,i.computed)((()=>o.value===r)),m=(0,i.computed)((()=>o.value===l));function _(i){return s(this,void 0,void 0,(function*(){try{const{data:a}=yield u({task_id:i});o.value=a;d.includes(o.value)?n.value=!1:function(n){v(),e=setTimeout((()=>{_(n)}),t)}(i)}catch(e){!function(e){o.value=e,p.value=!0,n.value=!1,v()}((0,a.a)(e))}}))}function v(){e&&clearTimeout(e)}return{waitForTask:function(e,i=c){return s(this,void 0,void 0,(function*(){return t=i,v(),o.value=void 0,h.value=e,n.value=!0,_(e)}))},isRunning:(0,i.readonly)(n),isCompleted:(0,i.readonly)(f),hasFailed:(0,i.readonly)(m),requestHasFailed:(0,i.readonly)(p)}}},9944:(e,t,n)=>{"use strict";n.d(t,{FN:()=>a,Vh:()=>o,pm:()=>s});let i=(0,n(70538).ref)(null);const o=e=>{i=e},a={success(e,t="Success",n=""){var o;null===(o=i.value)||void 0===o||o.showToast(e,t,"success",n)},info(e,t="Info",n=""){var o;null===(o=i.value)||void 0===o||o.showToast(e,t,"info",n)},warning(e,t="Warning",n=""){var o;null===(o=i.value)||void 0===o||o.showToast(e,t,"warning",n)},error(e,t="Error",n=""){var o;null===(o=i.value)||void 0===o||o.showToast(e,t,"danger",n)}};function s(){return Object.assign({},a)}},19744:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var i=n(70538);function o(){const e=(0,i.ref)(!1),t=(0,i.computed)((()=>e.value?"true":"false"));return{editing:e,ariaExpanded:t,onOpen:function(){e.value=!0},onClose:function(){e.value=!1}}}},26600:(e,t,n)=>{"use strict";n.d(t,{p:()=>h});var i=n(3967),o=n(70538),a=n(28732),s=n(24382),r=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};function l(e){const t=new Uint8Array(e);return window.btoa(String.fromCharCode(...t))}const d=(0,o.ref)(null);let c=null;function u(e){let t;if(e)t=e;else{const{currentUser:e}=(0,a.Jk)((0,s.L)());t=e}const n=(0,i._aR)("local-storage-salt",function(){const e=new Uint8Array(16);return crypto.getRandomValues(e),l(e)}());(0,o.watch)((()=>t.value),(()=>{t.value&&!t.value.isAnonymous&&function(e){r(this,void 0,void 0,(function*(){if(c!==e){c=e,d.value=null;const t=yield function(e){return r(this,void 0,void 0,(function*(){const t=(new TextEncoder).encode(e);return l(yield crypto.subtle.digest("SHA-256",t))}))}(e);d.value=t}}))}(t.value.id+n.value)}),{immediate:!0});return{hashedUserId:(0,o.computed)((()=>d.value))}}function h(e,t,n){const{hashedUserId:a}=u(n),s=(0,o.computed)((()=>a.value?(0,i._aR)(`${e}-${a.value}`,t):(0,o.ref)(t)));return(0,o.customRef)(((e,t)=>({get:()=>(e(),s.value.value),set(e){s.value.value=e,t()}})))}},10104:(e,t,n)=>{"use strict";var i={};n.r(i),n.d(i,{averagePassengerCarEmissionsEU:()=>rt,averagePassengerCarEmissionsUS:()=>lt,barrelOfOilCarbonEmissions:()=>dt,gasolineCarbonEmissionsPerGallon:()=>ct,lightbulbEnergyUsage:()=>ut,memoryPowerUsage:()=>ht,smartphonesChargedCarbonEmissions:()=>pt,treeMonth:()=>mt,treeYear:()=>ft,worldwideCarbonIntensity:()=>_t,worldwidePowerUsageEffectiveness:()=>vt});var o=n(28732),a=n(70538),s=n(97061),r=n(39953),l=n(81924),d=n(75357),c=n(7767),u=n(9382),h=n(51436),p=n(57810);u.vI.add(h.Xjp);const f={components:{FontAwesomeIcon:p.GN},props:{citation:{type:Object,required:!0},outputFormat:{type:String,default:"bibliography"},prefix:{type:String,default:""}},computed:{link(){const e=this.citation.cite?.data?.[0]?.URL;return e?decodeURIComponent(e):null},citationHtml(){return this.citation.cite.format(this.outputFormat,{format:"html",template:"apa",lang:"en-US"})}}};var m=n(51900);const _=(0,m.Z)(f,(function(){var e=this,t=e._self._c;return t("div",[e._v("\n    "+e._s(e.prefix)+"\n    "),t("span",{domProps:{innerHTML:e._s(e.citationHtml)}}),e._v(" "),e.link?t("a",{attrs:{href:e.link,target:"_blank"}},[e._v("Visit Citation "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}})],1):e._e()])}),[],!1,null,null,null).exports;var v=n(51120),g=n(40961),y=n(50452);async function b(e,t){try{const i=(await v.Z.get(`${(0,g.getAppRoot)()}api/${e}/${t}/citations`)).data,o=[],{Cite:a}=await Promise.all([n.e(977),n.e(257),n.e(637)]).then(n.bind(n,32571));for(const e of i)try{const t=new a(e.content);o.push({raw:e.content,cite:t})}catch(e){console.warn(`Error parsing bibtex: ${e}`)}return o}catch(e){(0,y.t)(e)}}a.default.use(d.ZPm);const w=Object.freeze({CITATION:"bibliography",BIBTEX:"bibtex",RAW:"raw"}),k={components:{CitationItem:_},props:{source:{type:String,required:!0},id:{type:String,required:!0},simple:{type:Boolean,required:!1,default:!1}},setup(){const{config:e}=(0,c.Z)(!0);return{config:e}},data:()=>({citations:[],errors:[],showCollapse:!1,outputFormats:w,outputFormat:w.CITATION}),updated(){this.$nextTick((()=>{this.$emit("rendered")}))},created(){b(this.source,this.id).then((e=>{this.citations=e})).catch((e=>{console.error(e)}))}},C=k;const x=(0,m.Z)(C,(function(){var e=this,t=e._self._c;return t("div",[e.simple?e.citations.length?t("div",[t("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.id,expression:"id"}],attrs:{variant:"primary"}},[e._v("Citations")]),e._v(" "),t("b-collapse",{staticClass:"mt-2",attrs:{id:e.id.replace(/ /g,"_")},on:{show:function(t){return e.$emit("show")},shown:function(t){return e.$emit("shown")},hide:function(t){return e.$emit("hide")},hidden:function(t){return e.$emit("hidden")}}},[t("b-card",e._l(e.citations,(function(n,i){return t("CitationItem",{key:i,staticClass:"formatted-reference",attrs:{citation:n,"output-format":e.outputFormat}})})),1)],1)],1):e._e():t("b-card",{staticClass:"citation-card",attrs:{"header-tag":"nav"},scopedSlots:e._u([{key:"header",fn:function(){return[t("b-nav",{attrs:{"card-header":"",tabs:""}},[t("b-nav-item",{attrs:{active:e.outputFormat===e.outputFormats.CITATION},on:{click:function(t){e.outputFormat=e.outputFormats.CITATION}}},[e._v("Citations (APA)")]),e._v(" "),t("b-nav-item",{attrs:{active:e.outputFormat===e.outputFormats.BIBTEX},on:{click:function(t){e.outputFormat=e.outputFormats.BIBTEX}}},[e._v("BibTeX")])],1)]},proxy:!0}],null,!1,3994401831)},[e._v(" "),"histories"===e.source?t("div",{staticClass:"infomessage"},[t("div",{domProps:{innerHTML:e._s(e.config.citations_export_message_html)}})]):e._e(),e._v(" "),t("div",{staticClass:"citations-formatted"},e._l(e.citations,(function(n,i){return t("CitationItem",{key:i,staticClass:"formatted-reference",attrs:{citation:n,"output-format":e.outputFormat}})})),1)])],1)}),[],!1,null,null,null).exports;const S={props:{message:{type:String,default:""},status:{type:String,default:""},variant:{type:String,default:"done"},dismissible:Boolean,dismissLabel:String,show:[Boolean,Number],fade:Boolean},computed:{galaxyKwdToBootstrap(){let e=this.variant;""!==this.status&&(e=this.status);const t={done:"success",info:"info",warning:"warning",error:"danger"};return e in t?t[e]:e},showP(){return this.show?this.show:!(""===this.message&&!this.$slots.default)}}};const M=(0,m.Z)(S,(function(){var e=this;return(0,e._self._c)("b-alert",e._b({attrs:{variant:e.galaxyKwdToBootstrap,show:e.showP}},"b-alert",e.$props,!1),[e._t("default",(function(){return[e._v(" "+e._s(e.message)+" ")]}))],2)}),[],!1,null,null,null).exports,T=(0,a.defineComponent)({__name:"ClientError",props:{error:null},setup:e=>({__sfc:!0,props:e,Alert:M})});const L=(0,m.Z)(T,(function(){var e=this._self._c,t=this._self._setupProxy;return e("div",{staticClass:"container error-container"},[e(t.Alert,{attrs:{message:t.props.error.message,variant:"error"}})],1)}),[],!1,null,"eedf3f24",null).exports;var D=n(74448),E=n(49871),O=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const A=(0,o.Q_)("collectionAttributesStore",(()=>{const e=(0,a.ref)({}),t=(0,a.ref)({}),n=(0,a.computed)((()=>n=>(e.value[n]||((0,a.set)(e.value,n,{}),function(n){O(this,void 0,void 0,(function*(){(0,a.set)(t.value,n.hdcaId,!0);try{const t=yield(0,E.GE)(n);return(0,a.set)(e.value,n.hdcaId,t),t}finally{(0,a.del)(t.value,n.hdcaId)}}))}({hdcaId:n})),e.value[n]))),i=(0,a.computed)((()=>e=>{var n;return null!==(n=t.value[e])&&void 0!==n&&n}));return{storedAttributes:e,getAttributes:n,isLoadingAttributes:i}}));var I=n(92865),P=n(2461),R=n(47907),j=n.n(R);const Y={components:{Multiselect:j()},props:{datatypes:{type:Array,required:!0},datatypeFromElements:{type:String,required:!0}},data:function(){return{selectedDatatype:{},currentDatatype:""}},computed:{hasSelectedDatatype(){return Boolean(this.selectedDatatype)},enableSave(){return this.hasSelectedDatatype&&this.selectedDatatype.id!=this.currentDatatype}},created(){this.selectedDatatype=this.datatypes.find((e=>e.id==this.datatypeFromElements)),this.currentDatatype=this.datatypeFromElements},methods:{clickedSave:function(){this.$emit("clicked-save",this.selectedDatatype),this.currentDatatype=this.selectedDatatype.id}}};const H=(0,m.Z)(Y,(function(){var e=this,t=e._self._c;return t("div",[t("div",[t("span",{staticClass:"float-left h-sm"},[e._v("Change Datatype/Extension of all elements in collection")]),e._v(" "),t("div",{staticClass:"text-right"},[t("button",{staticClass:"save-datatype-edit btn btn-primary",attrs:{disabled:!e.enableSave},on:{click:e.clickedSave}},[e._v("\n                "+e._s(e.l("Save"))+"\n            ")])])]),e._v(" "),t("b",[e._v(e._s(e.l("New Type"))+": ")]),e._v(" "),e.hasSelectedDatatype?t("Multiselect",{staticClass:"datatype-dropdown",attrs:{"deselect-label":"Can't remove this value","track-by":"id",label:"text",options:e.datatypes,searchable:!0,"allow-empty":!1},model:{value:e.selectedDatatype,callback:function(t){e.selectedDatatype=t},expression:"selectedDatatype"}},[e._v("\n        "+e._s(e.selectedDatatype.text)+"\n    ")]):e._e()],1)}),[],!1,null,null,null).exports;const N={components:{Multiselect:j()},props:{genomes:{type:Array,required:!0},databaseKeyFromElements:{type:String,required:!0}},data:function(){return{selectedGenome:{}}},created(){this.selectedGenome=this.genomes.find((e=>e.id==this.databaseKeyFromElements))},methods:{clickedSave:function(){this.$emit("clicked-save","dbkey",this.selectedGenome),this.selectedGenome=this.genomes.find((e=>e.id==this.databaseKeyFromElements))}}};const F=(0,m.Z)(N,(function(){var e=this,t=e._self._c;return t("div",[t("div",[t("span",{staticClass:"float-left h-sm"},[e._v("Change Database/Build of all elements in collection")]),e._v(" "),t("div",{staticClass:"text-right"},[t("button",{staticClass:"save-dbkey-edit btn btn-primary",attrs:{disabled:e.selectedGenome.id==e.databaseKeyFromElements},on:{click:e.clickedSave}},[e._v("\n                "+e._s(e.l("Save"))+"\n            ")])])]),e._v(" "),t("b",[e._v(e._s(e.l("Database/Build"))+": ")]),e._v(" "),t("Multiselect",{staticClass:"database-dropdown",attrs:{"deselect-label":"Can't remove this value","track-by":"id",label:"text",options:e.genomes,searchable:!0,"allow-empty":!1},model:{value:e.selectedGenome,callback:function(t){e.selectedGenome=t},expression:"selectedGenome"}},[e._v("\n        "+e._s(e.selectedGenome.text)+"\n    ")])],1)}),[],!1,null,null,null).exports;const B={components:{Multiselect:j()},props:{suitableConverters:{type:Array,required:!0}},data:function(){return{selectedConverter:{}}},methods:{clickedConvert:function(){this.$emit("clicked-convert",this.selectedConverter),this.selectedConverter={}}}};const $=(0,m.Z)(B,(function(){var e=this,t=e._self._c;return t("div",[t("div",[t("span",{staticClass:"float-left h-sm"},[e._v("Convert all datasets to new format")]),e._v(" "),t("div",{staticClass:"text-right"},[t("button",{staticClass:"run-tool-collection-edit btn btn-primary",attrs:{disabled:e.selectedConverter=={}},on:{click:e.clickedConvert}},[e._v("\n                "+e._s(e.l("Convert Collection"))+"\n            ")])])]),e._v(" "),t("b",[e._v(e._s(e.l("Converter Tool: ")))]),e._v(" "),t("Multiselect",{attrs:{"deselect-label":"Can't remove this value","track-by":"name",label:"name",options:e.suitableConverters,searchable:!0,"allow-empty":!0},model:{value:e.selectedConverter,callback:function(t){e.selectedConverter=t},expression:"selectedConverter"}})],1)}),[],!1,null,null,null).exports;var z=n(45264);u.vI.add(h.t5N,h.B3e,h.xiG,h.ILF,h.b7W),a.default.use(d.ZPm);const W={components:{DatabaseEditTab:F,SuitableConvertersTab:$,FontAwesomeIcon:p.GN,DbKeyProvider:P.xS,SuitableConvertersProvider:P.k9,ChangeDatatypeTab:H,DatatypesProvider:P.Sk,LoadingSpan:z.Z},props:{collectionId:{type:String,required:!0}},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0);return{config:e,isConfigLoaded:t}},data:function(){return{errorMessage:null,jobError:null,noQuotaIncrease:!0,loadingString:"Loading Datatypes",infoMessage:"This will create a new collection in your History. Your quota will not increase.",newCollectionMessage:"This will create a new collection in your History.",noQuotaIncreaseMessage:"Your quota will not increase.",expectWaitTimeMessage:"This operation might take a short while, depending on the size of your collection."}},computed:{...(0,o.rn)(I.z,["currentHistoryId"]),...(0,o.rn)(A,["getAttributes"]),attributesData(){return this.getAttributes(this.collectionId)},databaseKeyFromElements:function(){return this.attributesData.dbkey},datatypeFromElements:function(){return this.attributesData.extension}},methods:{updateInfoMessage:function(e){this.infoMessage=e},clickedSave:function(e,t){const n=(0,D.Vd)(`/api/dataset_collections/${this.collectionId}/copy`),i={};"dbkey"==e?(i.dbkey=t.id,v.Z.post(n,i).catch(this.handleError)):console.error(`Changing ${e} not implemented`)},clickedConvert:function(e){const t=(0,D.Vd)(`/api/tools/${e.tool_id}/convert`),n={src:"hdca",id:this.collectionId,source_type:e.original_type,target_type:e.target_type};v.Z.post(t,n).catch(this.handleError)},clickedDatatypeChange:function(e){const t=(0,D.Vd)(`/api/histories/${this.currentHistoryId}/contents/bulk`),n={operation:"change_datatype",items:[{history_content_type:"dataset_collection",id:this.collectionId}],params:{type:"change_datatype",datatype:e.id}};v.Z.put(t,n).catch(this.handleError)},handleError:function(e){this.errorMessage=(0,y.a)(e,"History import failed."),e?.data?.stderr&&(this.jobError=e.data)}}},U=W;const V=(0,m.Z)(U,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"collection-edit-view-heading"}},[t("h1",{staticClass:"h-lg",attrs:{id:"collection-edit-view-heading"}},[e._v(e._s(e.l("Edit Collection Attributes")))]),e._v(" "),t("b-alert",{attrs:{show:"",variant:"info",dismissible:""}},[e._v("\n        "+e._s(e.l(e.infoMessage))+"\n    ")]),e._v(" "),e.jobError?t("div",[t("b-alert",{attrs:{show:"",variant:"danger",dismissible:""}},[e._v("\n            "+e._s(e.l(e.errorMessage))+"\n        ")])],1):e._e(),e._v(" "),t("b-tabs",{attrs:{"content-class":"mt-3"}},[t("b-tab",{attrs:{"title-link-class":"collection-edit-change-genome-nav"},on:{click:function(t){return e.updateInfoMessage(e.newCollectionMessage+" "+e.noQuotaIncreaseMessage)}},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:"table"}}),e._v("   "+e._s(e.l("Database/Build")))]},proxy:!0}])},[e._v(" "),t("DbKeyProvider",{scopedSlots:e._u([{key:"default",fn:function({item:n,loading:i}){return[t("div",i?[t("b-spinner",{attrs:{label:"Loading Database/Builds..."}})]:[n&&e.databaseKeyFromElements?t("DatabaseEditTab",{attrs:{"database-key-from-elements":e.databaseKeyFromElements,genomes:n},on:{"clicked-save":e.clickedSave}}):e._e()],1)]}}])})],1),e._v(" "),t("SuitableConvertersProvider",{attrs:{id:e.collectionId},scopedSlots:e._u([{key:"default",fn:function({item:n}){return[n&&n.length?t("b-tab",{attrs:{"title-link-class":"collection-edit-convert-datatype-nav"},on:{click:function(t){return e.updateInfoMessage(e.newCollectionMessage)}},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:"cog"}}),e._v("   "+e._s(e.l("Convert")))]},proxy:!0}],null,!0)},[e._v(" "),t("SuitableConvertersTab",{attrs:{"suitable-converters":n},on:{"clicked-convert":e.clickedConvert}})],1):e._e()]}}])}),e._v(" "),e.isConfigLoaded&&e.config.enable_celery_tasks?t("b-tab",{attrs:{"title-link-class":"collection-edit-change-datatype-nav"},on:{click:function(t){return e.updateInfoMessage(e.expectWaitTimeMessage)}},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:"database"}}),e._v("   "+e._s(e.l("Datatypes"))+" ")]},proxy:!0}],null,!1,682568426)},[e._v(" "),t("DatatypesProvider",{scopedSlots:e._u([{key:"default",fn:function({item:n,loading:i}){return[t("div",i?[t("LoadingSpan",{attrs:{message:e.loadingString}})]:[n&&e.datatypeFromElements?t("ChangeDatatypeTab",{attrs:{"datatype-from-elements":e.datatypeFromElements,datatypes:n},on:{"clicked-save":e.clickedDatatypeChange}}):e._e()],1)]}}],null,!1,747062026)})],1):e._e()],1)],1)}),[],!1,null,null,null).exports;const q={props:{query:{type:String,default:""},loading:{type:Boolean,default:!1},placeholder:{type:String,default:"Enter your search term here."},delay:{type:Number,default:1e3},enableAdvanced:{type:Boolean,default:!1},showAdvanced:{type:Boolean,default:!1}},data:()=>({queryInput:null,queryTimer:null,queryCurrent:null,titleClear:"Clear Search (esc)",titleAdvanced:"Toggle Advanced Search"}),watch:{query(e){this.setQuery(e)}},created(){this.query&&this.setQuery(this.query)},methods:{clearTimer(){this.queryTimer&&clearTimeout(this.queryTimer)},delayQuery(e){this.clearTimer(),e?this.queryTimer=setTimeout((()=>{this.setQuery(e)}),this.delay):this.setQuery(e)},setQuery(e){this.clearTimer(),this.queryCurrent===this.queryInput&&this.queryCurrent===e||(this.queryCurrent=this.queryInput=e,this.$emit("change",this.queryCurrent))},clearBox(){this.setQuery(""),this.$refs.toolInput.focus()},onToggle(){this.$emit("onToggle",!this.showAdvanced)}}};const Z=(0,m.Z)(q,(function(){var e=this,t=e._self._c;return t("b-input-group",[t("b-input",{ref:"toolInput",staticClass:"search-query",attrs:{size:"sm",autocomplete:"off",placeholder:e.placeholder,"data-description":"filter text input"},on:{input:e.delayQuery,change:e.setQuery,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.setQuery("")}},model:{value:e.queryInput,callback:function(t){e.queryInput=t},expression:"queryInput"}}),e._v(" "),t("b-input-group-append",[e.enableAdvanced?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom.noninteractive",modifiers:{hover:!0,bottom:!0,noninteractive:!0}}],attrs:{"aria-haspopup":"true",size:"sm",pressed:e.showAdvanced,variant:e.showAdvanced?"info":"secondary",title:e._f("l")(e.titleAdvanced),"data-description":"toggle advanced search"},on:{click:e.onToggle}},[e.showAdvanced?t("icon",{attrs:{"fixed-width":"",icon:"angle-double-up"}}):t("icon",{attrs:{"fixed-width":"",icon:"angle-double-down"}})],1):e._e(),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom.noninteractive",modifiers:{hover:!0,bottom:!0,noninteractive:!0}}],staticClass:"search-clear",attrs:{"aria-haspopup":"true",size:"sm",title:e._f("l")(e.titleClear),"data-description":"reset query"},on:{click:e.clearBox}},[e.loading?t("icon",{attrs:{"fixed-width":"",icon:"spinner",spin:""}}):t("icon",{attrs:{"fixed-width":"",icon:"times"}})],1)],1)],1)}),[],!1,null,null,null).exports;var G=n(80527),J=n(19046),K=n(8766),X=n(71314),Q=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ee=X._.path("/api/tags").method("put").create();function te(e,t,n){return Q(this,void 0,void 0,(function*(){yield ee({item_id:e,item_class:t,item_tags:n})}))}const ne={props:{item:Object},computed:{...(0,o.rn)(I.z,["getHistoryNameById"]),historyName(){return this.getHistoryNameById(this.item.history_id)}}};const ie=(0,m.Z)(ne,(function(){var e=this;return(0,e._self._c)("div",[e._v("\n    "+e._s(e.historyName)+"\n")])}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const oe={props:{item:Object},computed:{getName(){return this.item.name||"Unavailable"},isError(){return"error"===this.item.state},isPaused(){return"paused"===this.item.state}},methods:{copyDataset(e){this.$emit("copyDataset",this.item)},showDataset(e){this.$emit("showDataset",this.item)}}};const ae={components:{DatasetHistory:ie,DatasetName:(0,m.Z)(oe,(function(){var e=this,t=e._self._c;return t("div",[t("b-link",{staticClass:"workflow-dropdown p-2",attrs:{id:"dataset-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e.isError?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"dataset-icon error fa fa-times-circle text-danger",attrs:{title:"An error occurred for this dataset."}}):e.isPaused?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"dataset-icon pause fa fa-pause text-info",attrs:{title:"The creation of this dataset has been paused."}}):t("span",{staticClass:"dataset-icon fa fa-caret-down"}),e._v(" "),t("span",{staticClass:"name"},[e._v(e._s(e.getName))])]),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dataset-dropdown"}},[t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDataset.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-eye fa-fw mr-1"}),e._v(" "),t("span",[e._v("Show in History containing dataset")])]),e._v(" "),t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.copyDataset.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-copy fa-fw mr-1"}),e._v(" "),t("span",[e._v("Copy to current History")])])])],1)}),[],!1,null,"1fe63364",null).exports,LoadingSpan:z.Z,DelayedInput:Z,UtcDate:J.Z,StatelessTags:G.Z},data:()=>({error:null,scrolled:!1,fields:[{key:"name",sortable:!0},{key:"tags",sortable:!1},{label:"History",key:"history_id",sortable:!0},{key:"extension",sortable:!0},{label:"Updated",key:"update_time",sortable:!0},{key:"context",label:"",sortable:!1}],query:"",limit:50,offset:0,sortBy:"update_time",sortDesc:!0,loading:!0,message:null,messageVariant:"danger",rows:[]}),computed:{showNotFound(){return!this.loading&&0===this.rows.length&&this.query},showNotAvailable(){return!this.loading&&0===this.rows.length&&!this.query},showMessage(){return!!this.message}},created(){this.load()},methods:{...(0,o.nv)(I.z,["applyFilters"]),load(e=!1){this.loading=!0,(0,K.EX)({query:this.query,sortBy:this.sortBy,sortDesc:this.sortDesc,offset:this.offset,limit:this.limit}).then((t=>{this.rows=e?this.rows.concat(t):t,this.loading=!1})).catch((e=>{this.error=e}))},onCopyDataset(e){const t=(0,l.Bz)().currHistoryPanel,n=e.id,i=t.model.id;(0,K.Bm)(n,i).then((e=>{t.loadCurrentHistory()})).catch((e=>{this.onError(e)}))},async onShowDataset(e){const{history_id:t}=e,n={deleted:e.deleted,visible:e.visible,hid:e.hid};try{await this.applyFilters(t,n)}catch(e){this.onError(e)}},onTags(e,t){const n=this.rows[t];n.tags=e,te(n.id,"HistoryDatasetAssociation",e).catch((e=>{this.onError(e)}))},onQuery(e){this.query=e,this.offset=0,this.load()},onSort(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc,this.offset=0,this.load()},onScroll({target:{scrollTop:e,clientHeight:t,scrollHeight:n}}){e+t>=n&&this.offset+this.limit<=this.rows.length&&(this.offset+=this.limit,this.load(!0))},onError(e){this.message=e}}};var se=(0,m.Z)(ae,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"overflow-auto h-100",on:{scroll:e.onScroll}},[e.error?t("div",{staticClass:"alert alert-danger",attrs:{show:""}},[e._v(e._s(e.error))]):t("div",[t("b-alert",{attrs:{variant:e.messageVariant,show:e.showMessage}},[e._v(e._s(e.message))]),e._v(" "),t("DelayedInput",{staticClass:"m-1 mb-3",attrs:{placeholder:"Search Datasets"},on:{change:e.onQuery}}),e._v(" "),t("b-table",{attrs:{id:"dataset-table",striped:"","no-sort-reset":"","no-local-sorting":"",fields:e.fields,items:e.rows},on:{"sort-changed":e.onSort},scopedSlots:e._u([{key:"cell(name)",fn:function(n){return[t("DatasetName",{attrs:{item:n.item},on:{showDataset:e.onShowDataset,copyDataset:e.onCopyDataset}})]}},{key:"cell(history_id)",fn:function(e){return[t("DatasetHistory",{attrs:{item:e.item}})]}},{key:"cell(tags)",fn:function(n){return[t("StatelessTags",{attrs:{value:n.item.tags,disabled:n.item.deleted},on:{input:t=>e.onTags(t,n.index)}})]}},{key:"cell(update_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}}])}),e._v(" "),e.loading?t("LoadingSpan",{attrs:{message:"Loading datasets"}}):e._e(),e._v(" "),e.showNotFound?t("div",[e._v("\n            No matching entries found for: "),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.query))]),e._v(".\n        ")]):e._e(),e._v(" "),e.showNotAvailable?t("div",[e._v("No datasets found.")]):e._e()],1)])}),[],!1,null,null,null);const re=se.exports;var le=n(88642),de=n(7729);u.vI.add(h.xiG,h.b7W,h.t5N,h.Ssp,h.XSV,h.r6l,h.ILF);const ce={components:{DatasetAttributesProvider:de.q,FontAwesomeIcon:p.GN,FormDisplay:le.Z},props:{datasetId:{type:String,required:!0}},data:()=>({messageText:null,messageVariant:null,formData:{}}),methods:{onAttribute(e){this.formData.attribute=e},onConversion(e){this.formData.conversion=e},onDatatype(e){this.formData.datatype=e},onPermission(e){this.formData.permission=e},onError(e){this.messageText=e,this.messageVariant="danger"},submit(e,t){(async function(e,t,n){const i={dataset_id:e,operation:n,...t},o=`${(0,g.getAppRoot)()}dataset/set_edit`;try{const{data:e}=await v.Z.put(o,i);return e}catch(e){(0,y.t)(e)}})(this.datasetId,this.formData[e],t).then((e=>{this.messageText=e.message,this.messageVariant=e.status,this._reloadHistory()}),this.onError)},_reloadHistory:function(){const e=(0,l.Bz)();e&&e.currHistoryPanel.loadCurrentHistory()}}},ue=ce;const he=(0,m.Z)(ue,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"dataset-attributes-heading"}},[t("h1",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"h-lg",attrs:{id:"dataset-attributes-heading"}},[e._v("Edit Dataset Attributes")]),e._v(" "),e.messageText?t("b-alert",{staticClass:"dataset-attributes-alert",attrs:{variant:e.messageVariant,show:""}},[e._v("\n        "+e._s(e._f("l")(e.messageText))+"\n    ")]):e._e(),e._v(" "),t("DatasetAttributesProvider",{attrs:{id:e.datasetId},on:{error:e.onError},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i}){return[i?e._e():t("div",{staticClass:"mt-3"},[t("b-tabs",[n.attribute_disable?e._e():t("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"bars"}}),e._v(e._s(e._f("l")("Attributes"))+"\n                    ")]},proxy:!0}],null,!0)},[e._v(" "),t("FormDisplay",{attrs:{inputs:n.attribute_inputs},on:{onChange:e.onAttribute}}),e._v(" "),t("div",{staticClass:"mt-2"},[t("b-button",{staticClass:"mr-1",attrs:{id:"dataset-attributes-default-save",variant:"primary"},on:{click:function(t){return e.submit("attribute","attributes")}}},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"save"}}),e._v(e._s(e._f("l")("Save"))+"\n                        ")],1),e._v(" "),n.metadata_disable?e._e():t("b-button",{on:{click:function(t){return e.submit("attribute","autodetect")}}},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"redo"}}),e._v(e._s(e._f("l")("Auto-detect"))+"\n                        ")],1)],1)],1),e._v(" "),n.conversion_disable&&n.datatype_disable||n.metadata_disable?e._e():t("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"database"}}),e._v(e._s(e._f("l")("Datatypes"))+"\n                    ")]},proxy:!0}],null,!0)},[e._v(" "),n.datatype_disable?e._e():t("div",{staticClass:"ui-portlet-section"},[t("div",{staticClass:"portlet-header"},[t("div",{staticClass:"portlet-title"},[t("FontAwesomeIcon",{staticClass:"portlet-title-icon fa-fw mr-1",attrs:{icon:"database"}}),e._v(" "),t("span",{staticClass:"portlet-title-text"},[t("b",{attrs:{itemprop:"name"}},[e._v(e._s(e._f("l")("Assign Datatype")))])])],1)]),e._v(" "),t("div",{staticClass:"portlet-content"},[t("FormDisplay",{attrs:{inputs:n.datatype_inputs},on:{onChange:e.onDatatype}}),e._v(" "),t("div",{staticClass:"mt-2"},[t("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(t){return e.submit("datatype","datatype")}}},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"save"}}),e._v(e._s(e._f("l")("Save"))+"\n                                ")],1),e._v(" "),t("b-button",{on:{click:function(t){return e.submit("datatype","datatype_detect")}}},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"redo"}}),e._v(e._s(e._f("l")("Auto-detect"))+"\n                                ")],1)],1)],1)]),e._v(" "),n.conversion_disable?e._e():t("div",{staticClass:"ui-portlet-section"},[t("div",{staticClass:"portlet-header"},[t("div",{staticClass:"portlet-title"},[t("FontAwesomeIcon",{staticClass:"portlet-title-icon fa-fw mr-1",attrs:{icon:"cog"}}),e._v(" "),t("span",{staticClass:"portlet-title-text"},[t("b",{attrs:{itemprop:"name"}},[e._v(e._s(e._f("l")("Convert to Datatype")))])])],1)]),e._v(" "),t("div",{staticClass:"portlet-content"},[t("FormDisplay",{attrs:{inputs:n.conversion_inputs},on:{onChange:e.onConversion}}),e._v(" "),t("div",{staticClass:"mt-2"},[t("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.submit("conversion","conversion")}}},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"exchange-alt"}}),e._v(e._s(e._f("l")("Create Dataset"))+"\n                                ")],1)],1)],1)])]),e._v(" "),n.permission_disable?e._e():t("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"user"}}),e._v(e._s(e._f("l")("Permissions"))+"\n                    ")]},proxy:!0}],null,!0)},[e._v(" "),t("FormDisplay",{attrs:{inputs:n.permission_inputs},on:{onChange:e.onPermission}}),e._v(" "),t("div",{staticClass:"mt-2"},[t("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.submit("permission","permission")}}},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"save"}}),e._v(e._s(e._f("l")("Save"))+"\n                        ")],1)],1)],1)],1)],1)]}}])})],1)}),[],!1,null,null,null).exports;var pe=n(61282),fe=n(42773);const me="Default";class _e{constructor(e){Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._data=e}get sourceLabel(){var e;return null!==(e=this._data.quota_source_label)&&void 0!==e?e:me}get quotaInBytes(){return this._data.quota_bytes}get totalDiskUsageInBytes(){return this._data.total_disk_usage}get quotaPercent(){return this._data.quota_percent}get niceQuota(){return this.isUnlimited?"unlimited":void 0!==this.quotaInBytes?(0,fe.d3)(this.quotaInBytes,!0,void 0):"unknown"}get niceTotalDiskUsage(){return(0,fe.d3)(this.totalDiskUsageInBytes,!0,void 0)}get isUnlimited(){return!this.quotaInBytes}}const ve=(0,pe.F)((async function({quotaSourceLabel:e=null}){null==e&&(e="__null__");const t=`${(0,g.getAppRoot)()}api/users/current/usage/${e}`;try{const{data:e}=await v.Z.get(t);return new _e(e)}catch(e){(0,y.t)(e)}}));var ge=n(9980),ye=n.n(ge);const be=(0,a.defineComponent)({__name:"ConfigurationMarkdown",props:{markdown:null,admin:{type:Boolean}},setup(e){const t=e,n=(0,a.computed)((()=>{var e;return function(e,t){let n;const i=!!t;return n=e?ye()({html:i}).render(e):null,n}(null!==(e=t.markdown)&&void 0!==e?e:"",t.admin)}));return{__sfc:!0,props:t,markdownHtml:n}}}),we=be;const ke=(0,m.Z)(we,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{domProps:{innerHTML:e._s(n.markdownHtml)}})}),[],!1,null,null,null).exports;u.vI.add(h.FJU,h.Stf,h.gPx,h.IJ7,h.oso,h.HLz,h.N2j,h.TZC,h.DD4,h.U7t,h.uM9);const Ce=(0,a.defineComponent)({__name:"ObjectStoreBadge",props:{badge:null,size:{default:"3x"},moreOnHover:{type:Boolean,default:!0}},setup(e){const t=e,n={restricted:"This dataset is stored on storage restricted to a single user. It can not be shared, published, or added to Galaxy data libraries.",user_defined:"This storage was user defined and is not managed by the Galaxy administrator.",quota:"A Galaxy quota is enabled for this object store.",no_quota:"No Galaxy quota is enabled for this object store.",faster:"This storage has been marked as a faster option by the Galaxy administrator.",slower:"This storage has been marked as a slower option by the Galaxy administrator.",short_term:"This storage has been marked routinely purged by the Galaxy administrator.",backed_up:"This storage has been marked as backed up by the Galaxy administrator.",not_backed_up:"This storage has been marked as not backed up by the Galaxy administrator.",more_secure:"This storage has been marked as more secure by the Galaxy administrator. The Galaxy web application doesn't make any additional promises regarding security for this storage.",less_secure:"This storage has been marked as less secure by the Galaxy administrator. The Galaxy web application doesn't make any additional promises regarding security for this storage.",more_stable:"This storage has been marked as more stable by the Galaxy administrator - expect jobs to fail less because of storage issues for this storage.",less_stable:"This storage has been marked as less stable by the Galaxy administrator - expect jobs to fail more because of storage issues for this storage.",cloud:"This is cloud storage."},i=(0,a.computed)((()=>n[t.badge.type])),o=(0,a.computed)((()=>[`fa-${t.size}`,"fa-fw"])),s=(0,a.computed)((()=>t.badge.type)),r=(0,a.computed)((()=>({transform:"shrink-6"}))),l=(0,a.computed)((()=>t.badge.message));return{__sfc:!0,MESSAGES:n,props:t,advantage:"storage-advantage",disadvantage:"storage-disadvantage",neutral:"storage-neutral",transparent:"reduced-opacity",stockMessage:i,layerClasses:o,badgeType:s,shrink:r,message:l,FontAwesomeIcon:p.GN,FontAwesomeLayers:p.NH,ConfigurationMarkdown:ke}}});const xe=(0,m.Z)(Ce,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",[t("span",{ref:"iconTarget",staticClass:"object-store-badge-wrapper"},[t(n.FontAwesomeLayers,{class:n.layerClasses,attrs:{"data-badge-type":n.badgeType}},["restricted"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"user-lock"}}):e._e(),e._v(" "),"quota"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"chart-line"}}):e._e(),e._v(" "),"no_quota"==n.badgeType?t(n.FontAwesomeIcon,e._b({class:n.neutral,attrs:{icon:"chart-line"}},"FontAwesomeIcon",n.shrink,!1)):e._e(),e._v(" "),"no_quota"==n.badgeType?t(n.FontAwesomeIcon,{class:[n.transparent,n.advantage],attrs:{icon:"ban"}}):e._e(),e._v(" "),"no_quota"==n.badgeType?t(n.FontAwesomeIcon,{class:n.advantage,attrs:{icon:"circle-notch"}}):e._e(),e._v(" "),"no_quota"==n.badgeType?t(n.FontAwesomeIcon,{class:n.advantage,attrs:{icon:"circle-notch",flip:"vertical"}}):e._e(),e._v(" "),"faster"==n.badgeType?t(n.FontAwesomeIcon,{class:n.advantage,attrs:{icon:"tachometer-alt"}}):e._e(),e._v(" "),"slower"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"tachometer-alt",flip:"horizontal"}}):e._e(),e._v(" "),"short_term"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"recycle"}}):e._e(),e._v(" "),"backed_up"==n.badgeType?t(n.FontAwesomeIcon,{class:n.advantage,attrs:{icon:"archive"}}):e._e(),e._v(" "),"not_backed_up"==n.badgeType?t(n.FontAwesomeIcon,e._b({class:n.neutral,attrs:{icon:"archive"}},"FontAwesomeIcon",n.shrink,!1)):e._e(),e._v(" "),"not_backed_up"==n.badgeType?t(n.FontAwesomeIcon,{class:[n.transparent,n.disadvantage],attrs:{icon:"ban"}}):e._e(),e._v(" "),"not_backed_up"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"circle-notch"}}):e._e(),e._v(" "),"not_backed_up"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"circle-notch",flip:"vertical"}}):e._e(),e._v(" "),"more_secure"==n.badgeType?t(n.FontAwesomeIcon,{class:n.advantage,attrs:{icon:"key"}}):e._e(),e._v(" "),"less_secure"==n.badgeType?t(n.FontAwesomeIcon,e._b({class:n.neutral,attrs:{icon:"key"}},"FontAwesomeIcon",n.shrink,!1)):e._e(),e._v(" "),"less_secure"==n.badgeType?t(n.FontAwesomeIcon,{class:[n.transparent,n.disadvantage],attrs:{icon:"ban"}}):e._e(),e._v(" "),"less_secure"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"circle-notch"}}):e._e(),e._v(" "),"less_secure"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"circle-notch",flip:"vertical"}}):e._e(),e._v(" "),"more_stable"==n.badgeType?t(n.FontAwesomeIcon,{class:n.advantage,attrs:{icon:"shield-alt"}}):e._e(),e._v(" "),"less_stable"==n.badgeType?t(n.FontAwesomeIcon,e._b({class:n.neutral,attrs:{icon:"shield-alt"}},"FontAwesomeIcon",n.shrink,!1)):e._e(),e._v(" "),"less_stable"==n.badgeType?t(n.FontAwesomeIcon,{class:[n.transparent,n.disadvantage],attrs:{icon:"ban"}}):e._e(),e._v(" "),"less_stable"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"circle-notch"}}):e._e(),e._v(" "),"less_stable"==n.badgeType?t(n.FontAwesomeIcon,{class:n.disadvantage,attrs:{icon:"circle-notch",flip:"vertical"}}):e._e(),e._v(" "),"cloud"==n.badgeType?t(n.FontAwesomeIcon,{class:n.neutral,attrs:{icon:"cloud"}}):e._e()],1)],1),e._v(" "),e.moreOnHover?t("b-popover",{staticClass:"object-store-badge-popover",attrs:{target:()=>e.$refs.iconTarget,triggers:"hover",placement:"bottom"}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(n.stockMessage))]),e._v(" "),n.message?t(n.ConfigurationMarkdown,{attrs:{markdown:n.message,admin:!0}}):e._e()],1):e._e()],1)}),[],!1,null,"5a0a0d16",null).exports,Se=(0,a.defineComponent)({__name:"ObjectStoreBadges",props:{badges:null,size:{default:"3x"},moreOnHover:{type:Boolean,default:!0}},setup:e=>({__sfc:!0,ObjectStoreBadge:xe})});var Me=(0,m.Z)(Se,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"object-store-badges"},e._l(e.badges,(function(i,o){return t(n.ObjectStoreBadge,{key:o,attrs:{badge:i,size:e.size,"more-on-hover":e.moreOnHover}})})),1)}),[],!1,null,null,null);const Te=Me.exports;const Le=(0,a.defineComponent)({__name:"ObjectStoreRestrictionSpan",props:{isPrivate:Boolean},setup(e){const t=e;a.default.use(d.ZPm);const n=(0,a.computed)((()=>t.isPrivate?"private":"unrestricted")),i=(0,a.computed)((()=>t.isPrivate?"This dataset is stored on storage restricted to a single user. It can not be shared, published, or added to Galaxy data libraries.":"This dataset is stored on unrestricted storage. With sufficient Galaxy permissions, this dataset can be published, shared, or added to Galaxy data libraries."));return{__sfc:!0,props:t,text:n,title:i}}});const De=(0,m.Z)(Le,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"stored-how",attrs:{title:n.title}},[e._v(e._s(n.text))])}),[],!1,null,"59a2bfb9",null).exports;var Ee=n(11411);const Oe=(0,a.defineComponent)({__name:"QuotaUsageBar",props:{quotaUsage:null,embedded:{type:Boolean,default:!1},compact:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,i=(0,a.ref)((0,Ee.ZP)("storage source")),o=(0,a.ref)((0,Ee.ZP)("% of disk quota used")),s=(0,a.computed)((()=>n.quotaUsage.sourceLabel===me)),r=(0,a.computed)((()=>!n.quotaUsage.isUnlimited)),l=(0,a.computed)((()=>{const e=n.quotaUsage.quotaPercent;return void 0===e?"secondary":e<50?"success":e>=50&&e<80?"primary":e>=80&&e<95?"warning":"danger"})),d=(0,a.computed)((()=>n.embedded?"div":"h2")),c=(0,a.computed)((()=>n.embedded?"div":"h3"));return t({isDefaultQuota:s,quotaHasLimit:r}),{__sfc:!0,props:n,storageSourceText:i,percentOfDiskQuotaUsedText:o,isDefaultQuota:s,quotaHasLimit:r,progressVariant:l,sourceTag:d,usageTag:c}}});const Ae=(0,m.Z)(Oe,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"quota-usage-bar mx-auto",class:{"w-75":!e.embedded,"my-5":!e.embedded,"my-1":e.embedded}},[n.isDefaultQuota||e.embedded?e._e():t(n.sourceTag,{tag:"component",staticClass:"quota-storage-source"},[t("span",{staticClass:"storage-source-label"},[t("b",[e._v(e._s(e.quotaUsage.sourceLabel))])]),e._v("\n        "+e._s(n.storageSourceText)+"\n    ")]),e._v(" "),e.compact?e._e():t(n.usageTag,{tag:"component",staticClass:"quota-usage",attrs:{"data-quota-usage":e.quotaUsage.totalDiskUsageInBytes}},[t("b",[e._v(e._s(e.quotaUsage.niceTotalDiskUsage))]),e._v(" "),n.quotaHasLimit?t("span",[e._v(" of "+e._s(e.quotaUsage.niceQuota))]):e._e(),e._v(" used\n    ")]),e._v(" "),n.quotaHasLimit&&!e.compact?t("span",{staticClass:"quota-percent-text",attrs:{"data-quota-percent":e.quotaUsage.quotaPercent}},[e._v("\n        "+e._s(e.quotaUsage.quotaPercent)+e._s(n.percentOfDiskQuotaUsedText)+"\n    ")]):e._e(),e._v(" "),n.quotaHasLimit||!e.embedded&&!e.compact?t("b-progress",{attrs:{value:e.quotaUsage.quotaPercent,variant:n.progressVariant,max:"100"}}):e._e()],1)}),[],!1,null,null,null).exports,Ie=(0,a.defineComponent)({__name:"DescribeObjectStore",props:{storageInfo:null,what:null},setup(e,{expose:t}){const n=e,i=(0,a.computed)((()=>{var e;return null===(e=n.storageInfo.quota)||void 0===e?void 0:e.source})),o=(0,a.computed)((()=>n.storageInfo.private)),s=(0,a.computed)((()=>n.storageInfo.badges));return t({isPrivate:o}),{__sfc:!0,props:n,quotaSourceLabel:i,isPrivate:o,badges:s,QuotaSourceUsageProvider:ve,ConfigurationMarkdown:ke,ObjectStoreBadges:Te,ObjectStoreRestrictionSpan:De,QuotaUsageBar:Ae}}});const Pe=(0,m.Z)(Ie,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("div",[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(e.what))]),e._v(" "),e.storageInfo.name?t("span",{staticClass:"display-os-by-name"},[e._v("\n            a Galaxy "),t(n.ObjectStoreRestrictionSpan,{attrs:{"is-private":n.isPrivate}}),e._v(" object store named\n            "),t("b",[e._v(e._s(e.storageInfo.name))])],1):e.storageInfo.object_store_id?t("span",{staticClass:"display-os-by-id"},[e._v("\n            a Galaxy "),t(n.ObjectStoreRestrictionSpan,{attrs:{"is-private":n.isPrivate}}),e._v(" object store with id\n            "),t("b",[e._v(e._s(e.storageInfo.object_store_id))])],1):t("span",{staticClass:"display-os-default"},[e._v("\n            the default configured Galaxy "),t(n.ObjectStoreRestrictionSpan,{attrs:{"is-private":n.isPrivate}}),e._v(" object store ")],1),e._v(".\n    ")]),e._v(" "),t(n.ObjectStoreBadges,{attrs:{badges:n.badges}}),e._v(" "),e.storageInfo.quota&&e.storageInfo.quota.enabled?t(n.QuotaSourceUsageProvider,{attrs:{"quota-source-label":n.quotaSourceLabel},scopedSlots:e._u([{key:"default",fn:function({result:i,loading:o}){return[o?t("b-spinner"):i?t(n.QuotaUsageBar,{attrs:{"quota-usage":i,embedded:!0}}):e._e()]}}],null,!1,2960290139)}):t("div",[e._v("Galaxy has no quota configured for this object store.")]),e._v(" "),e.storageInfo.description?t(n.ConfigurationMarkdown,{attrs:{markdown:e.storageInfo.description,admin:!0}}):e._e()],1)}),[],!1,null,null,null).exports,Re={components:{DescribeObjectStore:Pe,LoadingSpan:z.Z},props:{datasetId:{type:String},datasetType:{type:String,default:"hda"},includeTitle:{type:Boolean,default:!0}},data:()=>({storageInfo:null,errorMessage:null}),computed:{discarded(){return"discarded"==this.storageInfo.dataset_state},deferred(){return"deferred"==this.storageInfo.dataset_state},sourceUri(){const e=this.storageInfo.sources;if(!e)return null;const t=e.filter((e=>!e.extra_files_path));return 0==t.length?null:t[0].source_uri}},created(){const e=this.datasetId,t=this.datasetType;v.Z.get(`${(0,g.getAppRoot)()}api/datasets/${e}/storage`,{hda_ldda:t}).then(this.handleResponse).catch((e=>{this.errorMessage=(0,y.a)(e)}))},methods:{handleResponse(e){const t=e.data;this.storageInfo=t}}};const je=(0,m.Z)(Re,(function(){var e=this,t=e._self._c;return t("div",[e.includeTitle?t("h2",{staticClass:"h-md"},[e._v("Dataset Storage")]):e._e(),e._v(" "),e.errorMessage?t("div",{staticClass:"error"},[e._v(e._s(e.errorMessage))]):null==e.storageInfo?t("LoadingSpan"):e.discarded?t("div",[t("p",[e._v("This dataset has been discarded and its files are not available to Galaxy.")])]):e.deferred?t("div",[t("p",[e._v("\n            This dataset is remote and deferred. The dataset's files are not available to Galaxy.\n            "),e.sourceUri?t("span",[e._v("\n                This dataset will be downloaded from "),t("b",{staticClass:"deferred-dataset-source-uri"},[e._v(e._s(e.sourceUri))]),e._v(" when\n                jobs use this dataset.\n            ")]):e._e()])]):t("div",[t("DescribeObjectStore",{attrs:{what:"This dataset is stored in","storage-info":e.storageInfo}})],1)],1)}),[],!1,null,null,null).exports;var Ye=n(74897);const He={props:{hash:{type:Object,required:!0}}};const Ne={components:{DatasetHash:(0,m.Z)(He,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"dataset-hash"},[t("i",[e._v(e._s(e.hash.hash_value))])])}),[],!1,null,null,null).exports},props:{hashes:{type:Array,required:!0}}};const Fe=(0,m.Z)(Ne,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"dataset-hashes"},[t("ul",{staticClass:"dataset-hashes-list"},e._l(e.hashes,(function(e,n){return t("DatasetHash",{key:n,attrs:{hash:e}})})),1)])}),[],!1,null,"f68fa506",null).exports;var Be=n(43954);a.default.use(d.ZPm);const $e={to_posix_lines:{short:"Normalized new line characters",long:"Many Galaxy tools expect data to contain 'posix' newline characters in text files and not the newline format used by the Windows operating system. Additionally, most tools expect a newline at the end of plain text files. This file was converted to use these line endings or add a newline to the end of the file."},spaces_to_tabs:{short:"Normalized spaces to tabs",long:"In order to convert the referenced data source to tabular data, spaces in the file contents were converted to tab characters to indicate column separations."},datatype_groom:{short:"Datatype-specific grooming",long:"The Galaxy datatype class indicated the source data required 'groooming' and Galaxy applied datatype specific cleaning of the supplied data."}},ze={bam:"The supplied BAM was coordinate-sorted using pysam.","qname_sorted.bam":"The supplied BAM was 'queryname' sorted using pysam.","qname_input_sorted.bam":"The supplied BAM was 'queryname' sorted using pysam.","isa-tab":"The supplied compressed file was converted to an ISA-TAB composite dataset.","isa-json":"The supplied compressed file was converted to an ISA-JSON composite dataset."},We={short:"Unknown action.",long:""},Ue={props:{transform:{type:Array,required:!1}},computed:{actions(){return this.transform.length>1?"actions":"action"}},methods:{actionShortDescription(e){return this.actionDescription(e).short||"Unknown action."},actionLongDescription(e){let t=this.actionDescription(e).long||"";if("datatype_groom"==e.action){const n=ze[e.datatype_ext];n&&(t+=" "+n)}return t},actionDescription:e=>$e[e.action]||We}};const Ve=(0,m.Z)(Ue,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"dataset-source-transform-display"},[e.transform&&e.transform.length>0?t("div",[e._v("\n        Upon ingestion into the Galaxy, the following "+e._s(e.actions)+" were performed that modified the dataset\n        contents:\n        "),t("ul",e._l(e.transform,(function(n,i){return t("li",{key:i},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.nofade.bottom",modifiers:{hover:!0,noninteractive:!0,nofade:!0,bottom:!0}}],staticClass:"dataset-source-transform-element",attrs:{title:e.actionLongDescription(n),"data-transform-action":n.action}},[e._v("\n                    "+e._s(e.actionShortDescription(n))+"\n                ")])])})),0)]):e._e()])}),[],!1,null,"23ed771f",null).exports;u.vI.add(h.kZ_,h.Xjp);const qe={components:{DatasetSourceTransform:Ve,FontAwesomeIcon:p.GN},props:{source:{type:Object,required:!0}},computed:{browserCompatUri(){const e=this.sourceUri;return e&&(0==e.indexOf("http")||0==e.indexOf("ftp"))},sourceUri(){return this.source.source_uri}},methods:{copyLink(){(0,Be.J)(this.sourceUri,(0,Ee.ZP)("Link copied to your clipboard"))}}};const Ze={components:{DatasetSource:(0,m.Z)(qe,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"dataset-source"},[e.browserCompatUri?t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Dataset Source URL",href:e.sourceUri,target:"_blank"}},[e._v("\n        "+e._s(e.source.source_uri)+"\n        "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}})],1):t("span",[e._v("\n        "+e._s(e.source.source_uri)+"\n    ")]),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Copy URI"}},[t("FontAwesomeIcon",{staticStyle:{cursor:"pointer"},attrs:{icon:"copy"},on:{click:e.copyLink}})],1),e._v(" "),t("br"),e._v(" "),t("DatasetSourceTransform",{attrs:{transform:e.source.transform}})],1)}),[],!1,null,null,null).exports},props:{sources:{type:Array,required:!0}}};const Ge=(0,m.Z)(Ze,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"dataset-sources"},[t("ul",{staticClass:"dataset-sources-list"},e._l(e.sources,(function(e,n){return t("DatasetSource",{key:n,attrs:{source:e}})})),1)])}),[],!1,null,"b3685400",null).exports,Je={components:{DatasetHashes:Fe,DatasetProvider:P.zx,DatasetSources:Ge,DecodedId:Ye.Z,UtcDate:J.Z},props:{hda_id:{type:String,required:!0}},methods:{bytesToString:e=>(0,fe.d3)(e,!1),prefixedUrl:e=>(0,D.dq)(e)}};const Ke=(0,m.Z)(Je,(function(){var e=this,t=e._self._c;return t("DatasetProvider",{attrs:{id:e.hda_id},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i}){return[i?e._e():t("div",[t("h2",{staticClass:"h-md"},[e._v("Dataset Information")]),e._v(" "),t("table",{staticClass:"tabletip info_data_table",attrs:{id:"dataset-details"}},[t("tbody",[t("tr",[t("td",[e._v("Number")]),e._v(" "),t("td",{attrs:{id:"number"}},[e._v(e._s(n.hid))])]),e._v(" "),t("tr",[t("td",[e._v("Name")]),e._v(" "),t("td",{attrs:{id:"name"}},[e._v(e._s(n.name))])]),e._v(" "),t("tr",[t("td",[e._v("Created")]),e._v(" "),n.create_time?t("td",{attrs:{id:"created"}},[t("UtcDate",{attrs:{date:n.create_time,mode:"pretty"}})],1):e._e()]),e._v(" "),t("tr",[t("td",[e._v("Filesize")]),e._v(" "),t("td",{attrs:{id:"filesize"},domProps:{innerHTML:e._s(e.bytesToString(n.file_size))}})]),e._v(" "),t("tr",[t("td",[e._v("Dbkey")]),e._v(" "),t("td",{attrs:{id:"dbkey"}},[e._v(e._s(n.metadata_dbkey))])]),e._v(" "),t("tr",[t("td",[e._v("Format")]),e._v(" "),t("td",{attrs:{id:"format"}},[e._v(e._s(n.file_ext))])]),e._v(" "),t("tr",[t("td",[e._v("File contents")]),e._v(" "),t("td",{attrs:{id:"file-contents"}},[t("a",{attrs:{href:e.prefixedUrl(n.download_url)}},[e._v("contents")])])]),e._v(" "),n.id?t("tr",[t("td",[e._v("History Content API ID")]),e._v(" "),t("td",[t("div",{attrs:{id:"dataset-id"}},[e._v(e._s(n.id)+" "),t("DecodedId",{attrs:{id:n.id}})],1)])]):e._e(),e._v(" "),n.history_id?t("tr",[t("td",[e._v("History API ID")]),e._v(" "),t("td",[t("div",{attrs:{id:"history_id"}},[e._v(e._s(n.history_id)+" "),t("DecodedId",{attrs:{id:n.history_id}})],1)])]):e._e(),e._v(" "),n.uuid?t("tr",[t("td",[e._v("UUID")]),e._v(" "),t("td",{attrs:{id:"dataset-uuid"}},[e._v(e._s(n.uuid))])]):e._e(),e._v(" "),n.file_name?t("tr",[t("td",[e._v("Full Path")]),e._v(" "),t("td",{attrs:{id:"file_name"}},[e._v(e._s(n.file_name))])]):e._e(),e._v(" "),n.created_from_basename?t("tr",[t("td",[e._v("Originally Created From a File Named")]),e._v(" "),t("td",{attrs:{id:"created_from_basename"}},[e._v(e._s(n.created_from_basename))])]):e._e(),e._v(" "),n.sources&&n.sources.length>0?t("tr",[t("td",[e._v("Sources")]),e._v(" "),t("td",[t("DatasetSources",{attrs:{sources:n.sources}})],1)]):e._e(),e._v(" "),n.hashes&&n.hashes.length>0?t("tr",[t("td",[e._v("Hashes")]),e._v(" "),t("td",[t("DatasetHashes",{attrs:{hashes:n.hashes}})],1)]):e._e()])])])]}}])})}),[],!1,null,null,null).exports;var Xe=n(24382);const Qe={props:{dependencies:{type:Array,required:!0}},computed:{...(0,o.rn)(Xe.L,["currentUser"])}};const et=(0,m.Z)(Qe,(function(){var e=this,t=e._self._c;return e.dependencies&&e.dependencies.length>0?t("div",[t("div",[t("h2",{staticClass:"h-md"},[e._v("Job Dependencies")]),e._v(" "),t("table",{staticClass:"tabletip"},[t("thead",[t("tr",[t("th",[e._v("Dependency")]),e._v(" "),t("th",[e._v("Dependency Type")]),e._v(" "),t("th",[e._v("Version")]),e._v(" "),e.currentUser.is_admin?t("th",[e._v("Path")]):e._e()])]),e._v(" "),t("tbody",e._l(e.dependencies,(function(n,i){return t("tr",{key:i},[t("td",[e._v("$"+e._s(n.name))]),e._v(" "),t("td",[e._v("$"+e._s(n.dependency_type))]),e._v(" "),t("td",[e._v("$"+e._s(n.version))]),e._v(" "),e.currentUser.is_admin?t("td",[n.environment_path?t("div",[e._v(e._s(n.environment_path))]):n.path?t("div",[e._v(e._s(n.path))]):t("div")]):e._e()])})),0)])])]):e._e()}),[],!1,null,null,null).exports;var tt=n(988);const nt={props:{jobId:{type:String,required:!0}},computed:{...(0,o.rn)(Xe.L,["currentUser"]),jobDestinationParams:function(){return this.$store.getters.jobDestinationParams(this.jobId)}},created:function(){this.fetchJobDestinationParams(this.jobId)},methods:{...(0,tt.VG)(["fetchJobDestinationParams"])}};const it=(0,m.Z)(nt,(function(){var e=this,t=e._self._c;return e.currentUser?.is_admin?t("div",[t("h2",{staticClass:"h-md"},[e._v("Destination Parameters")]),e._v(" "),t("table",{staticClass:"tabletip info_data_table",attrs:{id:"destination_parameters"}},[t("tbody",e._l(e.jobDestinationParams,(function(n,i){return t("tr",{key:i},[t("td",[e._v(e._s(i))]),e._v(" "),t("td",[e._v(e._s(n))])])})),0)])]):e._e()}),[],!1,null,null,null).exports;var ot=n(68954),at=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const st=(0,o.Q_)("jobMetricsStore",(()=>{const e=(0,a.ref)({}),t=(0,a.ref)({}),n=(0,a.ref)({}),i=(0,a.computed)((()=>(n,i="hda")=>{var o;return null!==(o=("hda"===i?e:t).value[n])&&void 0!==o?o:[]})),o=(0,a.computed)((()=>e=>{var t;return null!==(t=n.value[e])&&void 0!==t?t:[]}));return{jobMetricsByHdaId:e,jobMetricsByLddaId:t,jobMetricsByJobId:n,getJobMetricsByDatasetId:i,getJobMetricsByJobId:o,fetchJobMetricsForJobId:function(e){return at(this,void 0,void 0,(function*(){if(n.value[e])return;const t=(0,D.Vd)(`api/jobs/${e}/metrics`),i=(yield v.Z.get(t)).data;a.default.set(n.value,e,i)}))},fetchJobMetricsForDatasetId:function(n,i="hda"){return at(this,void 0,void 0,(function*(){if(e.value[n]||t.value[n])return;const o=(0,D.Vd)(`api/datasets/${n}/metrics?hda_ldda=${i}`),s=(yield v.Z.get(o)).data,r="hda"==i?e:t;a.default.set(r.value,n,s)}))}}})),rt=175,lt=400,dt=.43,ct=8887,ut=.043,ht=.3725,pt=822e-8,ft=11e3,mt=917,_t=475,vt=1.67;const gt=(0,a.defineComponent)({__name:"AwsEstimate",props:{jobRuntimeInSeconds:null,coresAllocated:null,memoryAllocatedInMebibyte:null,ec2Instances:null},setup(e){const t=e,n=(0,a.computed)((()=>{const{coresAllocated:e,jobRuntimeInSeconds:n,memoryAllocatedInMebibyte:i}=t;if(e<=0||n<=0)return;const o=i?i/1024:.5,a=t.ec2Instances.find((t=>t.mem>=o&&t.vCpuCount>=e));return a?{seconds:n,requestedVCpuCount:e,memory:o,price:(n*a.price/3600).toFixed(2),instance:a}:void 0}));return{__sfc:!0,props:t,computedAwsEstimate:n}}});const yt=(0,m.Z)(gt,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.computedAwsEstimate?t("div",{staticClass:"mt-4",attrs:{id:"aws-estimate"}},[t("h2",[e._v("AWS estimate")]),e._v(" "),t("strong",{attrs:{id:"aws-cost"}},[e._v(e._s(n.computedAwsEstimate.price)+" USD")]),e._v(" "),t("br"),e._v("\n\n    This job requested "+e._s(n.computedAwsEstimate.requestedVCpuCount)+" core(s) and\n    "+e._s(n.computedAwsEstimate.memory.toFixed(3))+" GiB of memory. Given this information, the smallest EC2 machine we\n    could find is:\n\n    "),t("span",{attrs:{id:"aws-name"}},[e._v(e._s(n.computedAwsEstimate.instance.name))]),e._v("\n    ("),t("span",{attrs:{id:"aws-mem"}},[e._v(e._s(n.computedAwsEstimate.instance.mem))]),e._v(" GB /\n    "),t("span",{attrs:{id:"aws-vcpus"}},[e._v(e._s(n.computedAwsEstimate.instance.vCpuCount))]),e._v(" vCPUs /\n    "),t("span",{attrs:{id:"aws-cpu"}},[e._v(e._s(n.computedAwsEstimate.instance.cpu.map((({cpuModel:e})=>e)).join(", ")))]),e._v("). This instance is priced at "+e._s(n.computedAwsEstimate.instance.price)+" USD/hour.\n\n    "),t("br"),e._v("\n\n    *Please note, that these numbers are only estimates, all jobs are always free of charge for all users.\n")]):e._e()}),[],!1,null,null,null).exports;var bt=n(42625);const wt=(0,a.defineComponent)({__name:"BarChart",props:{data:null},setup(e){const t=e,n=(0,a.ref)(null);function i(){bt.Ys(n.value).selectAll("*").remove()}function o(){const{data:e}=t,i=30,o=30,a=30,s=30,r=200,l=bt.Ys(n.value).append("svg").attr("width",350+s+o).attr("height",r+i+a).append("g").attr("transform",`translate(${s},${i})`),d=bt.tiA().range([0,350]).domain(e.map((e=>e.name))).padding(.2);l.append("g").attr("transform","translate(0, 200)").call(bt.LLu(d)).selectAll("text").style("font-size","1rem").style("margin","0.75rem").style("font-weight","500").style("text-anchor","middle");const c=bt.BYU().domain([0,100]).range([r,0]);l.append("g").call(bt.y4O(c)).selectAll("text").style("font-size","0.75rem"),l.selectAll("bar").data(e).join("rect").attr("x",(e=>String(d(e.name)))).attr("y",(e=>c(e.value))).attr("width",d.bandwidth()).attr("height",(e=>r-c(e.value))).attr("fill","#41B883")}return(0,a.onMounted)((()=>{o()})),(0,a.watch)((()=>t.data),(()=>{i(),o()}),{deep:!0}),{__sfc:!0,props:t,barChart:n,clearChart:i,drawChart:o}}}),kt=wt;const Ct=(0,m.Z)(kt,(function(){var e=this._self._c;this._self._setupProxy;return e("div",{ref:"barChart"})}),[],!1,null,null,null).exports;const xt=(0,a.defineComponent)({__name:"CarbonEmissionsIcon",props:{icon:null},setup(e){const t=e;return u.vI.add(h.BDt,h.yn$,h.q16,h.X8G,h.Z__,h.DjS,h.mbJ,h.$KU),{__sfc:!0,props:t,FontAwesomeIcon:p.GN}}});const St=(0,m.Z)(xt,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return"car"===n.props.icon?t(n.FontAwesomeIcon,{staticClass:"icon",attrs:{icon:"fa-car"}}):"gasPump"===n.props.icon?t(n.FontAwesomeIcon,{staticClass:"icon",attrs:{icon:"fa-gas-pump"}}):"lightbulb"===n.props.icon?t(n.FontAwesomeIcon,{staticClass:"icon",attrs:{icon:"fa-lightbulb"}}):"bolt"===n.props.icon?t(n.FontAwesomeIcon,{staticClass:"icon",attrs:{icon:"fa-bolt"}}):"mobilePhone"===n.props.icon?t(n.FontAwesomeIcon,{staticClass:"icon",attrs:{icon:"fa-mobile"}}):"smog"===n.props.icon?t(n.FontAwesomeIcon,{staticClass:"icon",attrs:{icon:"fa-smog"}}):"tree"===n.props.icon?t(n.FontAwesomeIcon,{staticClass:"icon",attrs:{icon:"fa-tree"}}):e._e()}),[],!1,null,"fc2f01f8",null).exports,Mt=(0,a.defineComponent)({__name:"CarbonEmissionCard",props:{heading:null,explanation:null,value:null,icon:null},setup(e){const t=e,n=(0,a.ref)(!1);return{__sfc:!0,props:t,shouldShowInfo:n,toggleInfo:function(){n.value=!n.value},CarbonEmissionsIcon:St}}});const Tt=(0,m.Z)(Mt,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:n.props.explanation},on:{click:n.toggleInfo}},[t("div",{attrs:{id:"heading"}},[e._v(e._s(n.props.heading))]),e._v(" "),t("div",{staticClass:"value"},[t(n.CarbonEmissionsIcon,{attrs:{icon:n.props.icon}}),e._v(" "),t("span",{attrs:{id:"total-emissions"}},[e._v(e._s(n.props.value))])],1),e._v(" "),n.shouldShowInfo?t("span",[e._v(e._s(n.props.explanation))]):e._e()])}),[],!1,null,"39a6dbe6",null).exports;const Lt=(0,a.defineComponent)({__name:"Heading",props:{h1:{type:Boolean},h2:{type:Boolean},h3:{type:Boolean},h4:{type:Boolean},h5:{type:Boolean},h6:{type:Boolean},bold:{type:Boolean},separator:{type:Boolean},inline:{type:Boolean},size:null,icon:null},setup(e){const t=e,n=(0,a.computed)((()=>{var e;return`h-${null!==(e=t.size)&&void 0!==e?e:"lg"}`})),i=(0,a.computed)((()=>{for(const e of["h1","h2","h3","h4","h5","h6"])if(t[e])return e;return"h1"}));return{__sfc:!0,props:t,sizeClass:n,element:i,FontAwesomeIcon:p.GN}}});const Dt=(0,m.Z)(Lt,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.props.separator?t("div",{staticClass:"separator heading"},[t("div",{staticClass:"stripe"}),e._v(" "),t(n.element,{tag:"component",class:[n.sizeClass,n.props.bold?"font-weight-bold":""]},[e._t("default")],2),e._v(" "),t("div",{staticClass:"stripe"})],1):t(n.element,{tag:"component",staticClass:"heading",class:[n.sizeClass,n.props.bold?"font-weight-bold":"",n.props.inline?"inline":""]},[n.props.icon?t(n.FontAwesomeIcon,{attrs:{icon:n.props.icon}}):e._e(),e._v(" "),e._t("default")],2)}),[],!1,null,"b01e12ae",null).exports,Et=(0,a.defineComponent)({__name:"CarbonEmissions",props:{estimatedServerInstance:null,jobRuntimeInSeconds:null,coresAllocated:null,powerUsageEffectiveness:null,geographicalServerLocationName:null,memoryAllocatedInMebibyte:{default:0},carbonIntensity:null},setup(e){const t=e;u.vI.add(h.sph);const n=(0,a.computed)((()=>{const e=ht,n=t.jobRuntimeInSeconds/3600,i=t.memoryAllocatedInMebibyte/1024,o=t.estimatedServerInstance.cpuInfo,a=o.tdp/o.totalAvailableCores*t.coresAllocated,s=t.powerUsageEffectiveness*a,r=t.powerUsageEffectiveness*i*e,l=n*s/1e3,d=n*r/1e3,c=n*(s+r)/1e3,u=t.carbonIntensity;return{cpuCarbonEmissions:l*u,memoryCarbonEmissions:d*u,totalCarbonEmissions:c*u,energyNeededCPU:l,energyNeededMemory:d,totalEnergyNeeded:c}})),o=(0,a.computed)((()=>{if(!n.value)return;const{totalCarbonEmissions:e,totalEnergyNeeded:t}=n.value,{averagePassengerCarEmissionsEU:o,averagePassengerCarEmissionsUS:a,gasolineCarbonEmissionsPerGallon:s,lightbulbEnergyUsage:r,smartphonesChargedCarbonEmissions:l,treeYear:c}=i,u={heading:"Gasoline consumed",explanation:"The amount of gasoline consumed running this job",value:d({value:parseFloat((e/(3.785*s)).toFixed(2)),threshold:.1,unit:"l"}),icon:"gasPump"};return[{heading:"Distance driven in EU",explanation:"Distance driven in km in the EU",value:d({value:parseFloat((e/o).toFixed(2)),threshold:.1,unit:"km"}),icon:"car"},{heading:"Distance driven in US",explanation:"Distance driven in miles in the US",value:d({value:parseFloat((e/a).toFixed(2)),threshold:.1,unit:"mile(s)"}),icon:"car"},u,{heading:"Light bulbs running",explanation:"The amount of incandescent light bulbs you could have powered for one hour given your job's energy usage",value:d({value:parseFloat((t/r).toFixed(3)),threshold:1}),icon:"lightbulb"},{heading:"Phones charged",explanation:"How many smartphones you could have charged given your job's energy usage",value:d({value:parseFloat((e/(1e6*l)).toFixed(2)),threshold:.5}),icon:"mobilePhone"},{heading:"Tree months",explanation:"How long it would take a tree to sequester the carbon emissions from your job",value:d({value:Math.round(e/c*12),threshold:.5}),icon:"tree"}]})),s=(0,a.computed)((()=>t.memoryAllocatedInMebibyte&&0!==t.memoryAllocatedInMebibyte)),r=(0,a.computed)((()=>(0,a.unref)(s))),l=(0,a.computed)((()=>{var e;const t=n.value;if(!t)return;const i=[{name:"CPU",value:c(t.cpuCarbonEmissions,t.totalCarbonEmissions)}];return 0!==(null===(e=n.value)||void 0===e?void 0:e.memoryCarbonEmissions)&&i.push({name:"Memory",value:c(t.memoryCarbonEmissions,t.totalCarbonEmissions)}),i}));function d({value:e,threshold:t,unit:n}){return e<t?`≤ ${t}  ${null!=n?n:""}`:`${e} ${null!=n?n:""}`}function c(e,t){return Number((e/t*100).toFixed(2))}return{__sfc:!0,props:t,carbonEmissions:n,carbonEmissionsComparisons:o,canShowMemory:s,canShowMoreThanOneMetric:r,barChartData:l,prettyPrintValue:d,getPercentage:c,getCarbonEmissionsText:function(e){let t=e,n="g";if(0===e)return"0 g CO2e";e>=1e6?(t/=1e6,n="t"):e>=1e3&&e<1e6?(t/=1e3,n="kg"):e>=1&&e<=999?n="g":e<1&&e>1e-4?(t*=1e3,n="mg"):(t*=1e6,n="μg");const i=Math.round(t);return`${0===i?"< 1":i} ${n} CO2e`},getEnergyNeededText:function(e){let t=e,n="kW⋅h";if(0===e)return"0 kW⋅h";e>=1e3?(t/=1e3,n="MW⋅h"):e>=1&&e<=999?n="W⋅h":e<1&&e>1e-4?(t*=1e3,n="mW⋅h"):(t*=1e6,n="µW⋅h");const i=Math.round(t);return`${0===i?"< 1":i} ${n}`},FontAwesomeIcon:p.GN,carbonEmissionsConstants:i,BarChart:Ct,CarbonEmissionsCard:Tt,Heading:Dt}}}),Ot=Et;const At=(0,m.Z)(Ot,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"mt-4"},[t(n.Heading,{attrs:{h2:"",separator:"",inline:"",bold:""}},[e._v(" Carbon Footprint ")]),e._v(" "),t("section",{staticClass:"carbon-emission-values my-4"},[t("div",{staticClass:"emissions-grid"},[t(n.CarbonEmissionsCard,{attrs:{value:n.getCarbonEmissionsText(n.carbonEmissions.totalCarbonEmissions),explanation:"Amount of GHGs with a similar global warming effect as CO2",heading:"Carbon Emissions",icon:"smog"}}),e._v(" "),t(n.CarbonEmissionsCard,{attrs:{value:n.getEnergyNeededText(n.carbonEmissions.totalEnergyNeeded),explanation:"Total energy usage per hour",heading:"Energy Usage",icon:"bolt"}}),e._v(" "),e._l(n.carbonEmissionsComparisons,(function({heading:e,value:i,explanation:o,icon:a}){return t(n.CarbonEmissionsCard,{key:e,attrs:{value:i,explanation:o,heading:e,icon:a}})}))],2),e._v(" "),t("div",{staticClass:"usage-ratios"},[t("h3",[e._v("Resource Usage Ratio")]),e._v(" "),n.barChartData&&n.canShowMoreThanOneMetric?t(n.BarChart,{attrs:{data:n.barChartData}}):e._e(),e._v(" "),t("table",{staticClass:"tabletip info_data_table mt-4"},[t("caption",[e._v("\n                    * Carbon emission and energy usage ratios per component.\n                ")]),e._v(" "),e._m(0),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("CPU")]),e._v(" "),t("td",{attrs:{id:"cpu-carbon-emissions"}},[e._v("\n                            "+e._s(n.getCarbonEmissionsText(n.carbonEmissions.cpuCarbonEmissions))+"\n                        ")]),e._v(" "),t("td",{attrs:{id:"cpu-energy-usage"}},[e._v(e._s(n.getEnergyNeededText(n.carbonEmissions.energyNeededCPU)))])]),e._v(" "),n.canShowMemory?t("tr",[t("td",[e._v("Memory")]),e._v(" "),t("td",{attrs:{id:"memory-carbon-emissions"}},[e._v("\n                            "+e._s(n.getCarbonEmissionsText(n.carbonEmissions.memoryCarbonEmissions))+"\n                        ")]),e._v(" "),t("td",{attrs:{id:"memory-energy-usage"}},[e._v("\n                            "+e._s(n.getEnergyNeededText(n.carbonEmissions.energyNeededMemory))+"\n                        ")])]):e._e()])]),e._v(" "),t("p",{staticClass:"p-0 m-0"},["GLOBAL"===e.geographicalServerLocationName?t("span",{attrs:{id:"location-explanation"}},[t("strong",[e._v("1.")]),e._v(" Based off of the global carbon intensity value of\n                    "+e._s(n.carbonEmissionsConstants.worldwideCarbonIntensity)+".\n                ")]):t("span",{attrs:{id:"location-explanation"}},[t("strong",[e._v("1.")]),e._v(" based off of this galaxy instance's configured location of\n                    "),t("strong",[e._v(e._s(e.geographicalServerLocationName))]),e._v(", which has a carbon intensity value of "+e._s(e.carbonIntensity)+" gCO2/kWh.\n                ")]),e._v(" "),t("br"),e._v(" "),e.powerUsageEffectiveness===n.carbonEmissionsConstants.worldwidePowerUsageEffectiveness?t("span",{attrs:{id:"pue"}},[t("strong",[e._v("2.")]),e._v(" Using the global default power usage effectiveness value of\n                    "+e._s(n.carbonEmissionsConstants.worldwidePowerUsageEffectiveness)+".\n                ")]):t("span",{attrs:{id:"pue"}},[t("strong",[e._v("2.")]),e._v(" using the galaxy instance's configured power usage effectiveness ratio value\n                    of of "+e._s(e.powerUsageEffectiveness)+".\n                ")]),e._v(" "),t("br"),e._v(" "),t("strong",[e._v("3.")]),e._v(" based off of the closest AWS EC2 instance comparable to the server that ran this\n                job. Estimates depend on the core count, allocated memory and the job runtime. The closest estimate\n                is a "),t("strong",[e._v(e._s(e.estimatedServerInstance.name))]),e._v(" instance.\n            ")]),e._v(" "),t("router-link",{staticClass:"align-self-start mt-2",attrs:{to:"/carbon_emissions_calculations",title:"Learn about how we estimate carbon emissions"}},[t("span",[e._v("\n                    Learn more about how we calculate your carbon emissions data.\n                    "),t(n.FontAwesomeIcon,{attrs:{icon:"fa-question-circle"}})],1)])],1)])],1)}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("thead",[t("th",[e._v("Component")]),e._v(" "),t("th",[e._v("Carbon Emissions "),t("sup",[e._v("1.")]),e._v(" "),t("sup",[e._v("2.")]),e._v(" "),t("sup",[e._v("3.")])]),e._v(" "),t("th",[e._v("Energy Usage "),t("sup",[e._v("2.")]),e._v(" "),t("sup",[e._v("3.")])])])}],!1,null,"a0c0e842",null).exports;var It=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Pt=(0,a.defineComponent)({__name:"JobMetrics",props:{datasetFilesize:{type:Number,default:0},datasetId:{type:String,default:""},datasetType:{type:String,default:"hda"},includeTitle:{type:Boolean,default:!0},jobId:{type:String,default:null},powerUsageEffectiveness:{type:Number,default:vt},geographicalServerLocationName:{type:String,default:"GLOBAL"},carbonIntensity:{type:Number,default:_t},shouldShowAwsEstimate:{type:Boolean,default:!1},shouldShowCarbonEmissionsEstimates:{type:Boolean,default:!0}},setup(e){const t=e,i=st();function o(){return It(this,void 0,void 0,(function*(){t.jobId?yield i.fetchJobMetricsForJobId(t.jobId):yield i.fetchJobMetricsForDatasetId(t.datasetId,t.datasetType)}))}o();const s=(0,a.ref)();n.e(356).then(n.bind(n,31356)).then((e=>s.value=e.ec2Instances));const r=(0,a.computed)((()=>t.jobId?i.getJobMetricsByJobId(t.jobId):i.getJobMetricsByDatasetId(t.datasetId,t.datasetType))),l=(0,a.computed)((()=>{const e={};for(const t of r.value){t.plugin in e||(e[t.plugin]={});e[t.plugin][t.title]=t.value}return e})),d=(0,a.computed)((()=>Object.keys(l.value).sort()));function c(e){var t;return null===(t=r.value.find((({name:t})=>t===e)))||void 0===t?void 0:t.raw_value}const u=(0,a.computed)((()=>{const e=c("runtime_seconds");return e?parseInt(e):void 0})),h=(0,a.computed)((()=>{const e=c("galaxy_slots");return e?parseInt(e):void 0})),p=(0,a.computed)((()=>{const e=c("galaxy_memory_mb");return e?parseInt(e):void 0})),f=(0,a.computed)((()=>{const e=(0,a.unref)(h);if(!e)return;const t=(0,a.unref)(p),n=t?t/1024:0,i=(0,a.unref)(s);if(!i)return;const o=i.find((t=>(0===n||t.mem>=n)&&t.vCpuCount>=e));if(!o)return;const r=o.cpu[0];return r?{name:o.name,cpuInfo:{modelName:r.cpuModel,totalAvailableCores:r.coreCount,tdp:r.tdp}}:void 0}));return{__sfc:!0,props:t,jobMetricsStore:i,getJobMetrics:o,ec2Instances:s,jobMetrics:r,jobMetricsGroupedByPluginType:l,pluginsSortedByPluginType:d,getMetricByName:c,jobRuntimeInSeconds:u,coresAllocated:h,memoryAllocatedInMebibyte:p,estimatedServerInstance:f,AwsEstimate:yt,CarbonEmissions:At}}}),Rt=Pt;const jt=(0,m.Z)(Rt,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.pluginsSortedByPluginType.length>0?t("div",[e.includeTitle?t("h2",{staticClass:"h-md"},[e._v("Job Metrics")]):e._e(),e._v(" "),e._l(n.pluginsSortedByPluginType,(function(i){return t("div",{key:i,staticClass:"metrics_plugin"},[t("h3",{staticClass:"metrics_plugin_title m-sm"},[e._v(e._s(i))]),e._v(" "),t("table",{staticClass:"tabletip info_data_table"},[t("tbody",e._l(n.jobMetricsGroupedByPluginType[i],(function(n,i){return t("tr",{key:i},[t("td",[e._v(e._s(i))]),e._v(" "),t("td",[e._v(e._s(n))])])})),0)])])})),e._v(" "),n.jobRuntimeInSeconds&&n.coresAllocated&&n.ec2Instances&&e.shouldShowAwsEstimate?t(n.AwsEstimate,{attrs:{"ec2-instances":n.ec2Instances,"should-show-aws-estimate":e.shouldShowAwsEstimate,"job-runtime-in-seconds":n.jobRuntimeInSeconds,"cores-allocated":n.coresAllocated,"memory-allocated-in-mebibyte":n.memoryAllocatedInMebibyte}}):e._e(),e._v(" "),e.shouldShowCarbonEmissionsEstimates&&n.estimatedServerInstance&&n.jobRuntimeInSeconds&&n.coresAllocated?t(n.CarbonEmissions,{attrs:{"carbon-intensity":e.carbonIntensity,"geographical-server-location-name":e.geographicalServerLocationName,"power-usage-effectiveness":e.powerUsageEffectiveness,"estimated-server-instance":n.estimatedServerInstance,"job-runtime-in-seconds":n.jobRuntimeInSeconds,"cores-allocated":n.coresAllocated,"memory-allocated-in-mebibyte":n.memoryAllocatedInMebibyte}}):e._e()],2):e._e()}),[],!1,null,null,null).exports;var Yt=n(76542),Ht=n(57498);class Nt{constructor(e={}){this.root=e.root||(0,g.getAppRoot)()}async getInheritanceChain(e){const t=`${this.root}api/datasets/${e}/inheritance_chain`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}}catch(e){(0,y.t)(e)}}u.vI.add(h.VNT);const Ft={components:{FontAwesomeIcon:p.GN},props:{datasetName:{type:String,required:!0},datasetId:{type:String,required:!0}},data:()=>({inherit_chain:[]}),created(){this.services=new Nt,this.services.getInheritanceChain(this.datasetId).then((e=>{this.inherit_chain=e}))}};const Bt=(0,m.Z)(Ft,(function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"h-md"},[e._v("Inheritance Chain")]),e._v(" "),t("div",{staticClass:"current-dataset chain-box"},[e._v(e._s(e.datasetName))]),e._v(" "),e.inherit_chain&&e.inherit_chain.length>0?t("div",e._l(e.inherit_chain,(function({name:n,dep:i},o){return t("div",{key:o},[t("FontAwesomeIcon",{staticClass:"inheritance-arrow",attrs:{size:"3x",icon:["fas","long-arrow-alt-up"]}}),e._v(" "),t("div",{staticClass:"chain-box"},[e._v(e._s(n)+" in "+e._s(i))])],1)})),0):e._e()])}),[],!1,null,"2fe713d3",null).exports,$t={components:{Alert:M,JobParameters:Yt.Z,InheritanceChain:Bt,LoadingSpan:z.Z,DatasetStorage:je,DatasetInformation:Ke,JobInformation:ot.Z,JobMetrics:jt,JobDependencies:et,JobDestinationParams:it,DatasetProvider:P.zx,JobDetailsProvider:Ht.Cd},props:{datasetId:{type:String,required:!0}},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0);return{config:e,isConfigLoaded:t}},computed:{...(0,o.rn)(Xe.L,["currentUser"])}},zt=$t;const Wt=(0,m.Z)(zt,(function(){var e=this,t=e._self._c;return t("DatasetProvider",{attrs:{id:e.datasetId},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i,error:o}){return[t("div",{attrs:{"aria-labelledby":"dataset-details-heading"}},[t("h1",{staticClass:"sr-only",attrs:{id:"dataset-details-heading"}},[e._v("Dataset Details")]),e._v(" "),i?t("LoadingSpan"):o?t("Alert",{attrs:{message:o,variant:"error"}}):t("div",[i||null===n.creating_job?i?e._e():t("div",{staticClass:"details"},[t("DatasetInformation",{attrs:{hda_id:e.datasetId}}),e._v(" "),t("DatasetStorage",{attrs:{"dataset-id":e.datasetId}}),e._v(" "),t("div",[t("h2",{staticClass:"h-md"},[e._v("Job Not Found")]),e._v(" "),t("p",[e._v("\n                        No job associated with this dataset is recorded in Galaxy. Galaxy cannot determine full\n                        dataset provenance and history for this dataset.\n                    ")])])],1):t("JobDetailsProvider",{attrs:{"job-id":n.creating_job,"auto-refresh":""},scopedSlots:e._u([{key:"default",fn:function({result:i,loading:o}){return[o?e._e():t("div",{staticClass:"details"},[t("DatasetInformation",{attrs:{hda_id:e.datasetId}}),e._v(" "),t("JobParameters",{attrs:{dataset_type:"hda","dataset-id":e.datasetId}}),e._v(" "),t("JobInformation",{attrs:{job_id:n.creating_job}}),e._v(" "),t("DatasetStorage",{attrs:{"dataset-id":e.datasetId}}),e._v(" "),t("InheritanceChain",{attrs:{"dataset-id":e.datasetId,"dataset-name":n.name}}),e._v(" "),e.isConfigLoaded?t("JobMetrics",{attrs:{"dataset-id":e.datasetId,"carbon-intensity":e.config.carbon_intensity,"geographical-server-location-name":e.config.geographical_server_location_name,"power-usage-effectiveness":e.config.power_usage_effectiveness,"should-show-aws-estimate":e.config.aws_estimate,"should-show-carbon-emissions-estimates":e.config.carbon_emissions_estimates}}):e._e(),e._v(" "),e.currentUser.is_admin?t("JobDestinationParams",{attrs:{"job-id":n.creating_job}}):e._e(),e._v(" "),t("JobDependencies",{attrs:{dependencies:i.dependencies}}),e._v(" "),n.peek?t("div",[t("h2",{staticClass:"h-md"},[e._v("Dataset Peek")]),e._v(" "),t("div",{domProps:{innerHTML:e._s(n.peek)}})]):e._e()],1)]}}],null,!0)})],1)],1)]}}])})}),[],!1,null,"1b07b662",null).exports;var Ut=n(85436),Vt=n(93514);const qt={props:{toolStderr:{type:String,default:null},jobStderr:{type:String,default:null},jobMessages:{type:Array,default:null}},computed:{hasDetails(){return this.toolStderr||this.jobStderr||this.hasMessages},hasMessages(){return this.jobMessages&&this.jobMessages.length>0}}};const Zt=(0,m.Z)(qt,(function(){var e=this,t=e._self._c;return e.hasDetails?t("div",[t("h4",{staticClass:"h-md"},[e._v("Details")]),e._v(" "),e.hasMessages?t("div",{attrs:{id:"dataset-error-job-messages"}},[t("p",[e._v("Execution resulted in the following messages:")]),e._v(" "),e._l(e.jobMessages,(function(n,i){return t("div",{key:i},[t("pre",{staticClass:"rounded code"},[e._v(e._s(n.desc))])])}))],2):e._e(),e._v(" "),e.toolStderr?t("div",[t("p",[e._v("Tool generated the following standard error:")]),e._v(" "),t("pre",{staticClass:"rounded code",attrs:{id:"dataset-error-tool-stderr"}},[e._v(e._s(e.toolStderr))])]):e._e(),e._v(" "),e.jobStderr?t("div",[t("p",[e._v("Galaxy job runner generated the following standard error:")]),e._v(" "),t("pre",{staticClass:"rounded code",attrs:{id:"dataset-error-job-stderr"}},[e._v(e._s(e.jobStderr))])]):e._e()]):e._e()}),[],!1,null,null,null).exports;u.vI.add(h.QLU);const Gt={components:{DatasetProvider:P.zx,DatasetErrorDetails:Zt,FontAwesomeIcon:p.GN,FormElement:Ut.Z,JobDetailsProvider:Ht.Cd,JobProblemProvider:Ht.ls},props:{datasetId:{type:String,required:!0}},setup(){const{renderMarkdown:e}=(0,Vt.A)({openLinksInNewPage:!0});return{renderMarkdown:e}},data(){return{message:null,errorMessage:null,resultMessages:[],emailTitle:this.l("Your email address")}},computed:{...(0,o.rn)(Xe.L,["currentUser"]),showForm(){const e=!this.resultMessages.length,t=this.resultMessages.some((e=>"danger"===e[1]));return e||t}},methods:{onError(e){this.errorMessage=e},submit(e,t){const n=t||this.currentUserEmail;(async function(e,t,n){const i={dataset_id:e.id,message:t,email:n},o=`${(0,g.getAppRoot)()}api/jobs/${e.creating_job}/error`;try{const{data:e}=await v.Z.post(o,i);return e.messages}catch(e){(0,y.t)(e)}})(e,this.message,n).then((e=>{this.resultMessages=e}),(e=>{this.errorMessage=e}))}}},Jt=Gt;const Kt=(0,m.Z)(Jt,(function(){var e=this,t=e._self._c;return t("div",[e.errorMessage?t("b-alert",{attrs:{variant:"danger",show:""}},[t("h2",{staticClass:"alert-heading h-sm"},[e._v("Failed to access Dataset details.")]),e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e(),e._v(" "),t("DatasetProvider",{attrs:{id:e.datasetId},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i}){return[i?e._e():t("JobDetailsProvider",{attrs:{"job-id":n.creating_job},on:{error:e.onError},scopedSlots:e._u([{key:"default",fn:function({result:i,loading:o}){return[o?e._e():t("div",[t("div",{staticClass:"page-container edit-attr"},[t("div",{staticClass:"response-message"})]),e._v(" "),t("h3",{staticClass:"h-lg"},[e._v("Dataset Error Report")]),e._v(" "),t("p",[e._v("\n                    An error occurred while running the tool\n                    "),t("b",{staticClass:"text-break",attrs:{id:"dataset-error-tool-id"}},[e._v(e._s(i.tool_id))]),e._v(".\n                ")]),e._v(" "),t("DatasetErrorDetails",{attrs:{"tool-stderr":i.tool_stderr,"job-stderr":i.job_stderr,"job-messages":i.job_messages}}),e._v(" "),t("JobProblemProvider",{attrs:{"job-id":n.creating_job},on:{error:e.onError},scopedSlots:e._u([{key:"default",fn:function({result:n}){return[n&&(n.has_duplicate_inputs||n.has_empty_inputs)?t("div",[t("h4",{staticClass:"common_problems mt-3 h-md"},[e._v("Detected Common Potential Problems")]),e._v(" "),n.has_empty_inputs?t("p",{attrs:{id:"dataset-error-has-empty-inputs"}},[e._v("\n                            The tool was started with one or more empty input datasets. This frequently results in\n                            tool errors due to problematic input choices.\n                        ")]):e._e(),e._v(" "),n.has_duplicate_inputs?t("p",{attrs:{id:"dataset-error-has-duplicate-inputs"}},[e._v("\n                            The tool was started with one or more duplicate input datasets. This frequently results\n                            in tool errors due to problematic input choices.\n                        ")]):e._e()]):e._e()]}}],null,!0)}),e._v(" "),t("h4",{staticClass:"mt-3 h-md"},[e._v("Troubleshooting")]),e._v(" "),t("p",[e._v("\n                    There are a number of helpful resources to self diagnose and correct problems.\n                    "),t("br"),e._v("\n                    Start here:\n                    "),t("b",[t("a",{attrs:{href:"https://training.galaxyproject.org/training-material/faqs/galaxy/#troubleshooting-errors",target:"_blank"}},[e._v("\n                            My job ended with an error. What can I do?\n                        ")])])]),e._v(" "),t("h4",{staticClass:"mb-3 h-md"},[e._v("Issue Report")]),e._v(" "),e._l(e.resultMessages,(function(n,i){return t("b-alert",{key:i,attrs:{variant:n[1],show:""}},[t("span",{domProps:{innerHTML:e._s(e.renderMarkdown(n[0]))}})])})),e._v(" "),e.showForm?t("div",{attrs:{id:"fieldsAndButton"}},[t("span",{staticClass:"mr-2 font-weight-bold"},[e._v(e._s(e.emailTitle))]),e._v(" "),e.currentUser?.email?t("span",[e._v(e._s(e.currentUser?.email))]):t("span",[e._v(e._s(e._f("l")("You must be logged in to receive emails")))]),e._v(" "),t("FormElement",{attrs:{id:"dataset-error-message",area:!0,title:"Please provide detailed information on the activities leading to this issue:"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),t("b-button",{staticClass:"mt-3",attrs:{id:"dataset-error-submit",variant:"primary"},on:{click:function(t){return e.submit(n,i.user_email)}}},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"bug"}}),e._v("Report\n                    ")],1)],1):e._e()],2)]}}],null,!0)})]}}])})],1)}),[],!1,null,null,null).exports;var Xt=n(55914),Qt=n(74664),en=n(12439);const tn=(0,pe.F)(en.e);const nn={components:{FormCard:Xt.Z,FormDisplay:le.Z,UrlDataProvider:tn},props:{id:{type:String,default:null},title:{type:String,default:null},icon:{type:String,default:null},submitIcon:{type:String,default:"fa-save"},submitTitle:{type:String,default:"Save"},cancelRedirect:{type:String,default:null},url:{type:String,required:!0},redirect:{type:String,default:null}},data:()=>({messageText:null,messageVariant:null,formData:{},replaceParams:null}),computed:{submitIconClass(){return`mr-1 fa ${this.submitIcon}`}},methods:{configTitle(e){return this.title||e.title},configIcon(e){return this.icon||e.icon},configMessageVariant:e=>e.status||"warning",onChange(e){this.formData=e},onCancel(){window.location=(0,D.dq)(this.cancelRedirect)},onSubmit(){(async function(e,t){try{const{data:n}=await v.Z.put((0,D.dq)(e),t);return n}catch(e){(0,y.t)(e)}})(this.url,this.formData).then((e=>{let t={};if(e.id?t.id=e.id:t={message:e.message,status:"success",persistent:!1},this.redirect){const e=new URLSearchParams(t);window.location=(0,D.dq)(`${this.redirect}?${e.toString()}`)}else{const t={};(0,Qt.UO)(e.inputs,((e,n)=>{t[n]=e.value})),this.replaceParams=t,this.showMessage(e.message)}}),this.onError)},onError(e){this.showMessage(e||`Failed to load resource ${this.url}.`,"danger")},showMessage(e,t="success"){this.messageText=e,this.messageVariant=t,document.querySelector("#center").scrollTop=0}}},on=nn;var an=(0,m.Z)(on,(function(){var e=this,t=e._self._c;return t("UrlDataProvider",{attrs:{url:e.url},on:{error:e.onError},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i}){return[i?e._e():t("div",{attrs:{id:e.id}},[n.message?t("b-alert",{attrs:{variant:e.configMessageVariant(n),show:""}},[e._v("\n            "+e._s(n.message)+"\n        ")]):e._e(),e._v(" "),e.messageText?t("b-alert",{attrs:{variant:e.messageVariant,show:""}},[e._v("\n            "+e._s(e.messageText)+"\n        ")]):e._e(),e._v(" "),t("FormCard",{attrs:{title:e.configTitle(n),icon:e.configIcon(n)},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormDisplay",{attrs:{inputs:n.inputs,"replace-params":e.replaceParams},on:{onChange:e.onChange}})]},proxy:!0}],null,!0)}),e._v(" "),t("div",{staticClass:"mt-3"},[t("b-button",{staticClass:"mr-1",attrs:{id:"submit",variant:"primary"},on:{click:function(t){return e.onSubmit()}}},[t("span",{class:e.submitIconClass}),e._v(e._s(e._f("l")(e.submitTitle))+"\n            ")]),e._v(" "),e.cancelRedirect?t("b-button",{on:{click:function(t){return e.onCancel()}}},[t("span",{staticClass:"mr-1 fa fa-times"}),e._v(e._s(e._f("l")("Cancel"))+"\n            ")]):e._e()],1)],1)]}}])})}),[],!1,null,null,null);const sn=an.exports;var rn=n(3967),ln=n(1460),dn=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const{emit:cn}=(0,rn.v1O)("grid-router-push"),un=X._.path("/api/visualizations").method("get").create(),hn=X._.path("/api/tags").method("put").create();const pn=[{title:"Create",icon:h.r8p,handler:()=>{cn("/visualizations")}}],fn=[{title:"Title",key:"title",type:"operations",width:40,condition:e=>!e.deleted,operations:[{title:"Open",icon:h.Mdf,condition:e=>!e.deleted,handler:e=>{window.location.href=(0,D.dq)(`/plugins/visualizations/${e.type}/saved?id=${e.id}`)}},{title:"Edit Attributes",icon:h.Xcf,condition:e=>!e.deleted,handler:e=>{cn(`/visualizations/edit?id=${e.id}`)}},{title:"Copy",icon:h.kZ_,condition:e=>!e.deleted,handler:e=>dn(void 0,void 0,void 0,(function*(){try{const t=(yield v.Z.get((0,D.dq)(`/api/visualizations/${e.id}`))).data,n={title:`Copy of '${t.title}'`,type:t.type,config:t.latest_revision.config};return yield v.Z.post((0,D.dq)("/api/visualizations"),n),{status:"success",message:`'${e.title}' has been copied.`}}catch(t){return{status:"danger",message:`Failed to copy '${e.title}': ${(0,y.a)(t)}.`}}}))},{title:"Share and Publish",icon:h.EfQ,condition:e=>!e.deleted,handler:e=>{cn(`/visualizations/sharing?id=${e.id}`)}},{title:"Delete",icon:h.$aW,condition:e=>!e.deleted,handler:e=>dn(void 0,void 0,void 0,(function*(){try{return yield v.Z.put((0,D.dq)(`/api/visualizations/${e.id}`),{deleted:!0}),{status:"success",message:`'${e.title}' has been deleted.`}}catch(t){return{status:"danger",message:`Failed to delete '${e.title}': ${(0,y.a)(t)}.`}}}))},{title:"Restore",icon:h.ZeM,condition:e=>!!e.deleted,handler:e=>dn(void 0,void 0,void 0,(function*(){try{return yield v.Z.put((0,D.dq)(`/api/visualizations/${e.id}`),{deleted:!1}),{status:"success",message:`'${e.title}' has been restored.`}}catch(t){return{status:"danger",message:`Failed to restore '${e.title}': ${(0,y.a)(t)}.`}}}))}]},{key:"type",title:"Type",type:"text"},{key:"tags",title:"Tags",type:"tags",handler:e=>dn(void 0,void 0,void 0,(function*(){try{yield hn({item_id:e.id,item_class:"Visualization",item_tags:e.tags})}catch(e){(0,y.t)(e)}}))},{key:"create_time",title:"Created",type:"date"},{key:"update_time",title:"Updated",type:"date"},{key:"sharing",title:"Shared",type:"sharing"}],mn={title:{placeholder:"title",type:String,handler:(0,ln.r3)("title"),menuItem:!0},slug:{handler:(0,ln.r3)("slug"),menuItem:!1},tag:{placeholder:"tag(s)",type:"MultiTags",handler:(0,ln.r3)("tag","tag",ln._U),menuItem:!0},published:{placeholder:"Filter on published visualizations",type:Boolean,boolType:"is",handler:(0,ln.fS)("published","published",ln.AM),menuItem:!0},importable:{placeholder:"Filter on importable visualizations",type:Boolean,boolType:"is",handler:(0,ln.fS)("importable","importable",ln.AM),menuItem:!0},deleted:{placeholder:"Filter on deleted visualizations",type:Boolean,boolType:"is",handler:(0,ln.fS)("deleted","deleted",ln.AM),menuItem:!0}},_n={actions:pn,fields:fn,filtering:new ln.ZP(mn,void 0,!1,!1),getData:function(e,t,n,i,o){var a;return dn(this,void 0,void 0,(function*(){const s=(0,l.Bz)(),r=!s.isAnonymous&&s.user.id;r||(0,y.t)("Please login to access this page.");const{data:d,headers:c}=yield un({limit:t,offset:e,search:n,sort_by:i,sort_desc:o,show_published:!1,user_id:r});return[d,parseInt(null!==(a=c.get("total_matches"))&&void 0!==a?a:"0")]}))},plural:"Visualizations",sortBy:"update_time",sortDesc:!0,sortKeys:["create_time","title","update_time"],title:"Saved Visualizations"},vn=_n;var gn=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const yn=X._.path("/api/visualizations").method("get").create();const bn=[{title:"Title",key:"title",type:"link",width:"30%",handler:e=>{window.location.href=(0,D.dq)(`/plugins/visualizations/${e.type}/saved?id=${e.id}`)}},{key:"annotation",title:"Annotation",type:"text"},{key:"username",title:"Owner",type:"text"},{key:"tags",title:"Tags",type:"tags",disabled:!0},{key:"update_time",title:"Updated",type:"date"}],wn={title:{placeholder:"title",type:String,handler:(0,ln.r3)("title"),menuItem:!0},slug:{handler:(0,ln.r3)("slug"),menuItem:!1},tag:{placeholder:"tag(s)",type:"MultiTags",handler:(0,ln.r3)("tag","tag",ln._U),menuItem:!0}},kn={fields:bn,filtering:new ln.ZP(wn,void 0,!1,!1),getData:function(e,t,n,i,o){var a;return gn(this,void 0,void 0,(function*(){const{data:s,headers:r}=yield yn({limit:t,offset:e,search:n,sort_by:i,sort_desc:o,show_own:!1,show_published:!0,show_shared:!0});return[s,parseInt(null!==(a=r.get("total_matches"))&&void 0!==a?a:"0")]}))},plural:"Visualizations",sortBy:"update_time",sortDesc:!0,sortKeys:["create_time","title","update_time"],title:"Published Visualizations"};var Cn=n(72316),xn=n.n(Cn),Sn=n(55806),Mn=n.n(Sn),Tn=n(37183),Ln=n(79446),Dn=n(51146),En=Tn.Z.extend({initialize:function(e){this.ajaxQueue=new Dn.Z.AjaxQueue,Tn.Z.prototype.initialize.call(this,e)},init_grid_elements:function(){const e=this.ajaxQueue;e.stop(),Tn.Z.prototype.init_grid_elements.call(this);Mn().makeArray(this.$el.find(".delayed-value-datasets_by_state").map(((e,t)=>()=>{const e=Mn()(t).data("id"),n=`${(0,g.getAppRoot)()}api/histories/${e}?keys=nice_size,contents_active,contents_states`,i={};return i.url=n,i.type="GET",i.success=t=>{const n=t.contents_states;let i="";for(const e of["ok","running","queued","new","error"]){const t=n[e];t&&(i+=`<div class="count-box state-color-${e}" title="Datasets in ${e} state">${t}</div> `)}const o=t.contents_active,a=o.deleted;a&&(i+=`<div class="count-box state-color-deleted" title="Deleted datasets">${a}</div> `);const s=o.hidden;s&&(i+=`<div class="count-box state-color-hidden" title="Hidden datasets">${s}</div> `),Mn()(`.delayed-value-datasets_by_state[data-id='${e}']`).html(i),Mn()(`.delayed-value-disk_size[data-id='${e}']`).html(t.nice_size)},Mn().ajax(i)}))).forEach((t=>e.add(t))),e.start()}});const On={View:xn().View.extend({title:(0,Ee.ZP)("Histories"),initialize:function(e){const t=(0,l.Bz)();Ln.Z.markViewAsLoading(this),this.active_tab="user",this.model=new(xn().Model),fe.ZP.get({url:`${(0,g.getAppRoot)()}history/${e.action_id}?${Mn().param(t.params)}`,success:e=>{this.model.set(e),this.render()}})},render:function(){var e=new En(this.model.attributes);this.$el.empty().append(e.$el)}})},An={props:{actionId:{type:String,required:!0}},mounted(){new On.View({action_id:this.actionId}).$el.appendTo(this.$refs.target)}};const In=(0,m.Z)(An,(function(){return(0,this._self._c)("div",{ref:"target"})}),[],!1,null,null,null).exports;var Pn=n(771),Rn=n(73106),jn=n(15193),Yn=n(67347),Hn=n(10962),Nn=n(17766);const Fn=(0,a.defineComponent)({__name:"GridLink",props:{text:null},emits:["click"],setup:(e,{emit:t})=>({__sfc:!0,emit:t})}),Bn=Fn;const $n=(0,m.Z)(Bn,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("button",{staticClass:"ui-link font-weight-bold",on:{click:function(e){return n.emit("click")}}},[e._v(e._s(e.text))])}),[],!1,null,null,null).exports;const zn=(0,a.defineComponent)({__name:"GridOperations",props:{rowData:null,operations:null},emits:["execute"],setup(e,{emit:t}){const n=e;return u.vI.add(h.eW2),{__sfc:!0,props:n,emit:t,hasCondition:function(e){return!e||e(n.rowData)},FontAwesomeIcon:p.GN}}}),Wn=zn;const Un=(0,m.Z)(Wn,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",[t("button",{staticClass:"ui-link font-weight-bold",attrs:{id:"grid-operations","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t(n.FontAwesomeIcon,{staticClass:"fa-lg",attrs:{icon:"caret-down"}}),e._v(" "),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.rowData.title))])],1),e._v(" "),e.operations?t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dataset-dropdown"}},e._l(e.operations,(function(i,o){return t("span",{key:o},[i&&i.condition&&n.hasCondition(i.condition)?t("button",{staticClass:"dropdown-item",on:{click:function(e){return e.preventDefault(),n.emit("execute",i)}}},[t("icon",{attrs:{icon:i.icon}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(i.title))])],1):e._e()])})),0):e._e()])}),[],!1,null,null,null).exports;const Vn=(0,a.defineComponent)({__name:"GridText",props:{text:null},setup:e=>({__sfc:!0})});const qn=(0,m.Z)(Vn,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(e.text??"Not available."))])}),[],!1,null,null,null).exports;var Zn=n(96486);const Gn=(0,a.defineComponent)({__name:"FilterMenuBoolean",props:{filter:{type:Object,required:!0},name:{type:String,required:!0},filters:{type:Object,required:!0}},emits:["change","on-enter","on-esc"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>n.filter.boolType||"default")),o="default"==i.value?[{text:"Any",value:"any"},{text:"Yes",value:!0},{text:"No",value:!1}]:[{text:"Yes",value:!0},{text:"No",value:"any"}],s=(0,a.computed)({get:()=>{const e=n.filters[n.name];return void 0!==e?e:"any"},set:e=>{const i=null!==e?e:"any";t("change",n.name,i)}});return{__sfc:!0,props:n,boolType:i,options:o,emit:t,value:s}}}),Jn=Gn;const Kn=(0,m.Z)(Jn,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.emit("on-enter")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:n.emit("on-esc")}]}},[t("small",[e._v(e._s(n.props.filter.placeholder)+":")]),e._v(" "),t("b-form-group",{staticClass:"m-0"},[t("b-form-radio-group",{attrs:{options:n.options,size:"sm",buttons:"","data-description":`filter ${n.props.name}`},model:{value:n.value,callback:function(e){n.value=e},expression:"value"}})],1)],1)}),[],!1,null,null,null).exports;const Xn=(0,a.defineComponent)({__name:"FilterMenuInput",props:{name:{type:String,required:!0},filter:{type:Object,required:!0},filters:{type:Object,required:!0},error:{type:Object,default:null},identifier:{type:String,required:!0}},emits:["change","on-enter","on-esc"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>n.filters[n.name])),o=(0,a.ref)(i.value),s=(0,a.ref)(!1),r=`${(0,Zn.capitalize)(n.filter.placeholder)} Help`;return(0,a.watch)((()=>o.value),(e=>{t("change",n.name,e)})),(0,a.watch)((()=>i.value),(e=>{o.value=e})),{__sfc:!0,props:n,emit:t,propValue:i,localValue:o,helpToggle:s,modalTitle:r,hasError:function(e){return n.error&&n.error.index==e?n.error.typeError||n.error.msg:""},onHelp:function(e,t){s.value=!1,o.value=t}}}}),Qn=Xn;const ei=(0,m.Z)(Qn,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("small",[e._v("Filter by "+e._s(n.props.filter.placeholder)+":")]),e._v(" "),t("b-input-group",[t("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.focus.v-danger",value:n.hasError(n.props.name),expression:"hasError(props.name)",modifiers:{focus:!0,"v-danger":!0}}],ref:"filterMenuInput",attrs:{id:`${e.identifier}-advanced-filter-${n.props.name}`,size:"sm",state:!n.hasError(n.props.name)&&null,placeholder:`any ${n.props.filter.placeholder}`,list:n.props.filter.datalist?`${e.identifier}-${n.props.name}-selectList`:null},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.emit("on-enter")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:n.emit("on-esc")}]},model:{value:n.localValue,callback:function(e){n.localValue=e},expression:"localValue"}}),e._v(" "),n.props.filter.datalist?t("b-form-datalist",{attrs:{id:`${e.identifier}-${n.props.name}-selectList`,options:n.props.filter.datalist}}):e._e(),e._v(" "),t("b-input-group-append",[n.props.filter.helpInfo?t("b-button",{attrs:{title:n.modalTitle,size:"sm"},on:{click:function(e){n.helpToggle=!0}}},[t("icon",{attrs:{icon:"question"}})],1):e._e(),e._v(" "),n.props.filter.type==Date?t("b-form-datepicker",{attrs:{"reset-button":"","button-only":"",size:"sm"},model:{value:n.localValue,callback:function(e){n.localValue=e},expression:"localValue"}}):e._e()],1)],1),e._v(" "),n.props.filter.helpInfo?t("span",[t("b-modal",{attrs:{title:n.modalTitle,"ok-only":""},model:{value:n.helpToggle,callback:function(e){n.helpToggle=e},expression:"helpToggle"}},["object"==typeof n.props.filter.helpInfo?t(n.props.filter.helpInfo,{tag:"component",on:{"set-filter":n.onHelp}}):"string"==typeof n.props.filter.helpInfo?t("div",[t("p",[e._v(e._s(n.props.filter.helpInfo))])]):e._e()],1)],1):e._e()],1)}),[],!1,null,null,null).exports;const ti=(0,a.defineComponent)({__name:"FilterMenuMultiTags",props:{name:{type:String,required:!0},filter:{type:Object,required:!0},filters:{type:Object,required:!0},identifier:{type:String,required:!0}},emits:["change"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>n.filters[n.name])),o=(0,a.ref)(i.value);return(0,a.watch)((()=>o.value),(e=>{t("change",n.name,e)})),(0,a.watch)((()=>i.value),(e=>{o.value=e})),{__sfc:!0,props:n,emit:t,propValue:i,localValue:o,StatelessTags:G.Z}}}),ni=ti;const ii=(0,m.Z)(ni,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("small",[e._v("Filter by "+e._s(n.props.filter.placeholder)+":")]),e._v(" "),t("b-input-group",{attrs:{id:`${e.identifier}-advanced-filter-${n.props.name}`}},[t(n.StatelessTags,{attrs:{value:n.localValue,placeholder:`any ${n.props.filter.placeholder}`},on:{input:e=>n.localValue=e}})],1)],1)}),[],!1,null,null,null).exports;const oi=(0,a.defineComponent)({__name:"FilterMenuRanged",props:{name:{type:String,required:!0},filter:{type:Object,required:!0},filters:{type:Object,required:!0},error:{type:Object,default:null},identifier:{type:String,required:!0}},emits:["change","on-enter","on-esc"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>`${n.name}_lt`)),o=(0,a.computed)((()=>`${n.name}_gt`)),s=(0,a.computed)((()=>n.filters[i.value])),r=(0,a.computed)((()=>n.filters[o.value])),l=(0,a.ref)(r.value),d=(0,a.ref)(s.value);(0,a.watch)((()=>l.value),(e=>{t("change",o.value,e)})),(0,a.watch)((()=>d.value),(e=>{t("change",i.value,e)})),(0,a.watch)((()=>r.value),(e=>{l.value=e})),(0,a.watch)((()=>s.value),(e=>{d.value=e}));const c=(0,a.computed)((()=>n.filter.type==Date));return{__sfc:!0,props:n,emit:t,localNameLt:i,localNameGt:o,valueLt:s,valueGt:r,localValueGt:l,localValueLt:d,isDateType:c,hasError:function(e){return n.error&&n.error.index==e?n.error.typeError||n.error.msg:""},localPlaceholder:function(e){if("gt"==e){const e=c.value?"after":"greater";return`${n.filter.placeholder} ${e}`}{const e=c.value?"before":"lower";return`${n.filter.placeholder} ${e}`}}}}}),ai=oi;const si=(0,m.Z)(ai,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("small",[e._v("Filter by "+e._s(n.props.filter.placeholder)+":")]),e._v(" "),t("b-input-group",[t("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.focus.v-danger",value:n.hasError(n.localNameGt),expression:"hasError(localNameGt)",modifiers:{focus:!0,"v-danger":!0}}],attrs:{id:`${n.props.identifier}-advanced-filter-${n.localNameGt}`,size:"sm",state:!n.hasError(n.localNameGt)&&null,placeholder:n.localPlaceholder("gt")},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.emit("on-enter")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:n.emit("on-esc")}]},model:{value:n.localValueGt,callback:function(e){n.localValueGt=e},expression:"localValueGt"}}),e._v(" "),n.isDateType?t("b-input-group-append",[t("b-form-datepicker",{attrs:{"reset-button":"","button-only":"",size:"sm"},model:{value:n.localValueGt,callback:function(e){n.localValueGt=e},expression:"localValueGt"}})],1):e._e(),e._v(" "),t("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.focus.v-danger",value:n.hasError(n.localNameLt),expression:"hasError(localNameLt)",modifiers:{focus:!0,"v-danger":!0}}],attrs:{id:`${n.props.identifier}-advanced-filter-${n.localNameLt}`,size:"sm",state:!n.hasError(n.localNameLt)&&null,placeholder:n.localPlaceholder("lt")},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.emit("on-enter")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:n.emit("on-esc")}]},model:{value:n.localValueLt,callback:function(e){n.localValueLt=e},expression:"localValueLt"}}),e._v(" "),n.isDateType?t("b-input-group-append",[t("b-form-datepicker",{attrs:{"reset-button":"","button-only":"",size:"sm"},model:{value:n.localValueLt,callback:function(e){n.localValueLt=e},expression:"localValueLt"}})],1):e._e()],1)],1)}),[],!1,null,null,null).exports,ri=(0,a.defineComponent)({__name:"FilterMenu",props:{name:{default:"Menu"},placeholder:{default:"search for items"},debounceDelay:{default:500},filterClass:null,filterText:{default:""},hasHelp:{type:Boolean},hasClearBtn:{type:Boolean},loading:{type:Boolean},menuType:{default:"linked"},searchError:{default:void 0},showAdvanced:{type:Boolean,default:!1}},emits:["update:filter-text","on-backend-filter","update:show-advanced","on-search"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>n.filterClass.validFilters)),o=(0,a.computed)((()=>Object.fromEntries(n.filterClass.getFiltersForText(n.filterText)))),s=(0,Zn.kebabCase)(n.name),r=(0,a.ref)(!1),l=(0,a.computed)((()=>{if(n.searchError){const{column:e,col:t,operation:i,op:o,value:a,val:s,err_msg:r,ValueError:l}=n.searchError,d=i||o;return{filter:`${e||t}${d?(0,ln.F3)(d):":"}`,index:d&&"eq"!==d?`${e||t}_${d}`:e||t,value:a||s,msg:r,typeError:l}}return null}));function d(){t("update:show-advanced",!n.showAdvanced)}function c(e){t("update:filter-text",e)}return(0,a.watch)((()=>n.filterText),(e=>{const i=n.filterClass.getFilterText(n.filterClass.defaultFilters,!0),a=i===n.filterClass.getFilterText(o.value,!0)?""+(i&&!e.includes(i)?i+" ":"")+e:n.filterClass.getFilterText(o.value,!0);t("on-backend-filter",a)})),{__sfc:!0,props:n,emit:t,validFilters:i,filters:o,identifier:s,showHelp:r,formattedSearchError:l,onOption:function(e,t){o.value[e]=t},onSearch:function(){const e=n.filterClass.getFilterText(o.value),i=n.filterClass.getFilterText(o.value,!0);"linked"!==n.menuType?t("on-search",o.value,e,i):(c(e),d())},onToggle:d,updateFilterText:c,DelayedInput:Z,FilterMenuBoolean:Kn,FilterMenuInput:ei,FilterMenuMultiTags:ii,FilterMenuRanged:si}}}),li=ri;var di=(0,m.Z)(li,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",["standalone"!==n.props.menuType?t(n.DelayedInput,{directives:[{name:"show",rawName:"v-show",value:"linked"==n.props.menuType||"separate"==n.props.menuType&&!n.props.showAdvanced,expression:"props.menuType == 'linked' || (props.menuType == 'separate' && !props.showAdvanced)"}],class:n.props.filterText&&"font-weight-bold",attrs:{query:n.props.filterText,delay:n.props.debounceDelay,loading:n.props.loading,"show-advanced":n.props.showAdvanced,"enable-advanced":"",placeholder:n.props.placeholder},on:{change:n.updateFilterText,onToggle:n.onToggle}}):e._e(),e._v(" "),"separate"==n.props.menuType&&n.props.showAdvanced?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom.noninteractive",modifiers:{hover:!0,bottom:!0,noninteractive:!0}}],staticClass:"w-100",attrs:{"aria-haspopup":"true",size:"sm",pressed:n.props.showAdvanced,title:"Toggle Advanced Search","data-description":"wide toggle advanced search"},on:{click:n.onToggle}},[t("icon",{attrs:{"fixed-width":"",icon:"angle-double-up"}})],1):e._e(),e._v(" "),"standalone"==n.props.menuType||n.props.showAdvanced?t("div",{staticClass:"mt-2",attrs:{"data-description":"advanced filters"}},[e._l(Object.keys(n.validFilters),(function(i){return t("div",{key:i},[n.validFilters[i]?.menuItem?t("span",[n.validFilters[i]?.type==Boolean?t(n.FilterMenuBoolean,{attrs:{name:i,filter:n.validFilters[i],filters:n.filters},on:{change:n.onOption,"on-enter":n.onSearch,"on-esc":n.onToggle}}):n.validFilters[i]?.isRangeInput?t(n.FilterMenuRanged,{staticClass:"m-0",attrs:{name:i,filter:n.validFilters[i],filters:n.filters,error:n.formattedSearchError,identifier:n.identifier},on:{change:n.onOption,"on-enter":n.onSearch,"on-esc":n.onToggle}}):"MultiTags"==n.validFilters[i]?.type?t(n.FilterMenuMultiTags,{attrs:{name:i,filter:n.validFilters[i],filters:n.filters,identifier:n.identifier},on:{change:n.onOption}}):t(n.FilterMenuInput,{attrs:{name:i,filter:n.validFilters[i],filters:n.filters,error:n.formattedSearchError,identifier:n.identifier},on:{change:n.onOption,"on-enter":n.onSearch,"on-esc":n.onToggle}})],1):e._e()])})),e._v(" "),t("div",{staticClass:"mt-3"},[t("b-button",{staticClass:"mr-1",attrs:{id:`${n.identifier}-advanced-filter-submit`,size:"sm",variant:"primary","data-description":"apply filters"},on:{click:n.onSearch}},[t("icon",{attrs:{icon:"search"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Search")])],1),e._v(" "),"standalone"!==n.props.menuType?t("b-button",{attrs:{size:"sm"},on:{click:n.onToggle}},[t("icon",{attrs:{icon:"redo"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Cancel")])],1):e._e(),e._v(" "),n.props.hasHelp?t("b-button",{attrs:{title:"Search Help",size:"sm"},on:{click:function(e){n.showHelp=!0}}},[t("icon",{attrs:{icon:"question"}})],1):e._e(),e._v(" "),t("span"),e._v(" "),n.props.hasHelp?t("b-modal",{attrs:{title:`${n.props.name} Advanced Search Help`,"ok-only":""},model:{value:n.showHelp,callback:function(e){n.showHelp=e},expression:"showHelp"}},[e._t("menu-help-text")],2):e._e()],1)],2):e._e()],1)}),[],!1,null,null,null);const ci=di.exports;const ui=(0,a.defineComponent)({__name:"SharingIndicators",props:{object:null},setup(e){const t=e;return u.vI.add(h.g4A,h.EfQ,h.nNP,h.FVb),{__sfc:!0,props:t,FontAwesomeIcon:p.GN,BButton:jn.T}}});const hi=(0,m.Z)(ui,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",[n.props.object.published?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive",modifiers:{hover:!0,noninteractive:!0}}],staticClass:"sharing-indicator-published",attrs:{size:"sm",variant:"link",title:e._f("localize")("Find all published items")},on:{click:function(t){return t.preventDefault(),e.$emit("filter","published")}}},[t(n.FontAwesomeIcon,{attrs:{icon:"globe"}})],1):e._e(),e._v(" "),n.props.object.importable?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive",modifiers:{hover:!0,noninteractive:!0}}],staticClass:"sharing-indicator-importable",attrs:{size:"sm",variant:"link",title:e._f("localize")("Find all importable items")},on:{click:function(t){return t.preventDefault(),e.$emit("filter","importable")}}},[t(n.FontAwesomeIcon,{attrs:{icon:"link"}})],1):e._e(),e._v(" "),n.props.object.shared?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive",modifiers:{hover:!0,noninteractive:!0}}],staticClass:"sharing-indicator-shared",attrs:{size:"sm",variant:"link",title:e._f("localize")("Find all items shared with me")},on:{click:function(t){return t.preventDefault(),e.$emit("filter","shared_with_me")}}},[t(n.FontAwesomeIcon,{attrs:{icon:"share-alt"}})],1):e._e()],1)}),[],!1,null,null,null).exports;var pi=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const fi=(0,a.defineComponent)({__name:"GridList",props:{config:null,delay:{default:5e3},limit:{default:25}},setup(e){const t=e,n=(0,rn.v1O)("grid-router-push"),i=(0,Nn.tv)();u.vI.add(h.eW2,h.l1h);const o=(0,a.ref)(),s=(0,a.ref)(""),r=(0,a.ref)(""),l=(0,a.ref)(""),d=(0,a.ref)(1),c=(0,a.ref)(0),f=(0,a.ref)(!0),m=(0,a.computed)((()=>!f.value&&c.value>0)),_=(0,a.ref)(t.config?t.config.sortBy:""),v=(0,a.ref)(!!t.config&&t.config.sortDesc),g=(0,a.ref)(""),y=(0,a.ref)(""),b=(0,a.ref)(!1),w=(0,Pn.DI)((()=>{r.value=""}),t.delay);function k(e,n,i=!1){var o;const a=null===(o=t.config)||void 0===o?void 0:o.filtering,s=i?`'${n}'`:n;a&&(g.value=a.setFilterValue(g.value,e,s.toString())||"")}function C(){return pi(this,void 0,void 0,(function*(){if(t.config)try{const e=t.limit*(d.value-1),[n,i]=yield t.config.getData(e,t.limit,y.value,_.value,v.value);o.value=n,c.value=i,s.value="",f.value=!1}catch(e){s.value=`Failed to obtain grid data: ${e}`,f.value=!1}}))}function x(e){i.push(e)}return(0,a.onMounted)((()=>{C(),n.on(x)})),(0,a.onUnmounted)((()=>{n.off(x)})),(0,a.watch)([d,y,v,_],(()=>C())),(0,a.watch)(r,(()=>{w()})),{__sfc:!0,eventBus:n,router:i,props:t,gridData:o,errorMessage:s,operationMessage:r,operationStatus:l,currentPage:d,totalRows:c,loading:f,isAvailable:m,sortBy:_,sortDesc:v,filterText:g,searchTerm:y,showAdvanced:b,hideMessage:w,applyFilter:k,getGridData:C,onOperation:function(e,t){return pi(this,void 0,void 0,(function*(){const n=yield e.handler(t);n&&(yield C(),r.value=n.message,l.value=n.status||"success")}))},onRouterPush:x,onSearch:function(e){y.value=e},onSort:function(e){_.value!==e?_.value=e:v.value=!v.value},onTagInput:function(e,t,n){n&&(n(Object.assign(Object.assign({},e),{tags:t})),e.tags=t)},onFilter:function(e){e&&k(e,!0)},FontAwesomeIcon:p.GN,BAlert:Rn.F,BButton:jn.T,BLink:Yn.we,BPagination:Hn.c,GridLink:$n,GridOperations:Un,GridText:qn,FilterMenu:ci,SharingIndicators:hi,LoadingSpan:z.Z,StatelessTags:G.Z,UtcDate:J.Z}}}),mi=fi;const _i=(0,m.Z)(mi,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"d-flex flex-column overflow-auto"},[n.errorMessage?t(n.BAlert,{attrs:{variant:"danger",show:""}},[e._v(e._s(n.errorMessage))]):e._e(),e._v(" "),n.operationMessage?t(n.BAlert,{attrs:{variant:n.operationStatus,fade:"",show:""}},[e._v(e._s(n.operationMessage))]):e._e(),e._v(" "),t("div",{staticClass:"grid-header d-flex justify-content-between pb-2"},[t("div",[t("h1",{staticClass:"m-0",attrs:{"data-description":"grid title"}},[e._v("\n                "+e._s(e.config.title)+"\n            ")]),e._v(" "),t(n.FilterMenu,{staticClass:"py-2",attrs:{name:e.config.plural,placeholder:`search ${e.config.plural.toLowerCase()}`,"filter-class":e.config.filtering,"filter-text":n.filterText,loading:n.loading,"show-advanced":n.showAdvanced},on:{"update:filterText":function(e){n.filterText=e},"update:filter-text":function(e){n.filterText=e},"update:showAdvanced":function(e){n.showAdvanced=e},"update:show-advanced":function(e){n.showAdvanced=e},"on-backend-filter":n.onSearch}}),e._v(" "),n.showAdvanced?t("hr"):e._e()],1),e._v(" "),n.showAdvanced?e._e():t("div",{staticClass:"py-3"},e._l(e.config.actions,(function(i,o){return t(n.BButton,{key:o,staticClass:"m-1",attrs:{size:"sm",variant:"primary","data-description":`grid action ${i.title.toLowerCase()}`},on:{click:function(e){return i.handler()}}},[t("Icon",{staticClass:"mr-1",attrs:{icon:i.icon}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(i.title))])],1)})),1)]),e._v(" "),n.loading?t(n.LoadingSpan):n.isAvailable?t("table",{staticClass:"grid-table"},[t("thead",e._l(e.config.fields,(function(i,o){return t("th",{key:o,staticClass:"text-nowrap px-2",attrs:{"data-description":`grid header ${o}`}},[e.config.sortKeys.includes(i.key)?t("span",[t(n.BLink,{on:{click:function(e){return n.onSort(i.key)}}},[t("span",[e._v(e._s(i.title||i.key))]),e._v(" "),n.sortBy===i.key?t("span",[n.sortDesc?t(n.FontAwesomeIcon,{attrs:{icon:"caret-up","data-description":"grid sort asc"}}):t(n.FontAwesomeIcon,{attrs:{icon:"caret-down","data-description":"grid sort desc"}})],1):e._e()])],1):t("span",[e._v(e._s(i.title||i.key))])])})),0),e._v(" "),e._l(n.gridData,(function(i,o){return t("tr",{key:o,class:{"grid-dark-row":o%2}},e._l(e.config.fields,(function(a,s){return t("td",{key:s,staticClass:"px-2 py-3",style:{width:`${a.width}%`},attrs:{"data-description":`grid cell ${o}-${s}`}},["operations"==a.type&&a.operations?t(n.GridOperations,{attrs:{operations:a.operations,"row-data":i},on:{execute:function(e){return n.onOperation(e,i)}}}):"text"==a.type?t(n.GridText,{attrs:{text:i[a.key]}}):"link"==a.type?t(n.GridLink,{attrs:{text:i[a.key]},on:{click:function(e){a.handler&&a.handler(i)}}}):"sharing"==a.type?t(n.SharingIndicators,{attrs:{object:i},on:{filter:function(e){return n.onFilter(e)}}}):"date"==a.type?t(n.UtcDate,{attrs:{date:i[a.key],mode:"elapsed"}}):"tags"==a.type?t(n.StatelessTags,{attrs:{clickable:"",value:i[a.key],disabled:a.disabled},on:{input:function(e){return n.onTagInput(i,e,a.handler)},"tag-click":function(e){return n.applyFilter("tag",e,!0)}}}):t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(" Data not available. ")])],1)})),0)}))],2):t(n.BAlert,{attrs:{variant:"info",show:""}},[n.searchTerm?t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n            No entries found for: "),t("b",[e._v(e._s(n.searchTerm))]),e._v(".\n        ")]):t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(" No entries found. ")])]),e._v(" "),t("div",{staticClass:"flex-grow-1 h-100"}),e._v(" "),n.isAvailable?t("div",{staticClass:"grid-footer d-flex justify-content-center pt-3"},[t(n.BPagination,{staticClass:"m-0",attrs:{"total-rows":n.totalRows,"per-page":e.limit,size:"sm","aria-controls":"grid-table"},model:{value:n.currentPage,callback:function(e){n.currentPage=e},expression:"currentPage"}})],1):e._e()],1)}),[],!1,null,"b922d2a2",null).exports;var vi=n(86855),gi=n(51015),yi=n(58887);let bi=(0,a.ref)(null);const wi=e=>{bi=e},ki={confirm:async(e,t={})=>bi.value.confirm(e,t)};function Ci(){return{...ki}}var xi=n(62101),Si=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};function Mi(e={}){const t=(0,a.ref)(!0),n=(0,a.ref)(!1),i=(0,a.ref)([]);return(0,a.onMounted)((()=>Si(this,void 0,void 0,(function*(){i.value=yield(0,xi.Oq)(e),n.value=i.value.some((e=>e.writable)),t.value=!1})))),{fileSources:(0,a.readonly)(i),isLoading:(0,a.readonly)(t),hasWritable:(0,a.readonly)(n)}}var Ti=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Li={modelStoreFormat:"rocrate.zip",includeFiles:!0,includeDeleted:!1,includeHidden:!1},Di={exportParams:Li,pollDelayInMs:1e3},Ei=X._.path("/api/histories/{history_id}/prepare_store_download").method("post").create(),Oi=X._.path("/api/invocations/{invocation_id}/prepare_store_download").method("post").create(),Ai=X._.path("/api/short_term_storage/{storage_request_id}/ready").method("get").create();function Ii(){let e=null,t=1e3;const n=(0,a.ref)(!1),i=(e,t)=>Ti(this,void 0,void 0,(function*(){const{data:n}=yield Ei(Object.assign({history_id:e},t));return n})),o=(e,t)=>Ti(this,void 0,void 0,(function*(){const{data:n}=yield Oi(Object.assign({invocation_id:e},t));return n}));function s(e){return(0,D.dq)(`/api/short_term_storage/${e}`)}function r(e){const t=s(e);window.location.assign(t)}function l(e,i,o=Di,a=!0){return Ti(this,void 0,void 0,(function*(){u(),n.value=!0;const s=Object.assign(Di,o);t=s.pollDelayInMs;const r={model_store_format:s.exportParams.modelStoreFormat,include_files:s.exportParams.includeFiles,include_deleted:s.exportParams.includeDeleted,include_hidden:s.exportParams.includeHidden};try{const t=yield e(i,r);d(t.storage_request_id,a)}catch(e){c()}}))}function d(i,o){return Ti(this,void 0,void 0,(function*(){try{const{data:a}=yield Ai({storage_request_id:i});a?(n.value=!1,o&&r(i)):function(n,i){u(),e=setTimeout((()=>{d(n,i)}),t)}(i,o)}catch(e){c()}}))}function c(){n.value=!1}function u(){e&&(clearTimeout(e),e=null)}return{prepareHistoryDownload:function(e,t=Di){return Ti(this,void 0,void 0,(function*(){return l(i,e,t,!1)}))},downloadHistory:function(e,t=Di){return Ti(this,void 0,void 0,(function*(){return l(i,e,t,!0)}))},prepareWorkflowInvocationDownload:function(e,t=Di){return Ti(this,void 0,void 0,(function*(){return l(o,e,t,!1)}))},downloadWorkflowInvocation:function(e,t=Di){return Ti(this,void 0,void 0,(function*(){return l(o,e,t,!0)}))},downloadObjectByRequestId:r,isPreparing:(0,a.readonly)(n),getDownloadObjectUrl:s}}var Pi=n(47277),Ri=n(78345),ji=n(23855),Yi=n(62030);class Hi{constructor(e={}){Object.defineProperty(this,"_params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._params=e}get modelStoreFormat(){var e,t;return null!==(t=null===(e=this._params)||void 0===e?void 0:e.model_store_format)&&void 0!==t?t:"tgz"}get includeFiles(){var e;return Boolean(null===(e=this._params)||void 0===e?void 0:e.include_files)}get includeDeleted(){var e;return Boolean(null===(e=this._params)||void 0===e?void 0:e.include_deleted)}get includeHidden(){var e;return Boolean(null===(e=this._params)||void 0===e?void 0:e.include_hidden)}equals(e){return!!e&&(this.modelStoreFormat===e.modelStoreFormat&&this.includeFiles===e.includeFiles&&this.includeDeleted===e.includeDeleted&&this.includeHidden===e.includeHidden)}}class Ni{constructor(e){var t,n,i;Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_expirationDate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_exportParameters",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._data=e,this._expirationDate=void 0,this._requestMetadata=null===(t=e.export_metadata)||void 0===t?void 0:t.request_data,this._exportParameters=(null===(n=this._requestMetadata)||void 0===n?void 0:n.payload)?new Hi(null===(i=this._requestMetadata)||void 0===i?void 0:i.payload):void 0}get id(){return this._data.id}get isReady(){var e;return null!==(e=this._data.ready&&!this.hasExpired)&&void 0!==e&&e}get isPreparing(){var e;return null!==(e=this._data.preparing)&&void 0!==e&&e}get isUpToDate(){var e;return null!==(e=this._data.up_to_date)&&void 0!==e&&e}get hasFailed(){return!this.isReady&&!this.isPreparing&&!this.hasExpired}get date(){return(0,ji.Z)(`${this._data.create_time}Z`)}get elapsedTime(){return(0,Yi.Z)(this.date,{addSuffix:!0})}get taskUUID(){return this._data.task_uuid}get importUri(){var e;const t=null===(e=this._requestMetadata)||void 0===e?void 0:e.payload;return t&&"target_uri"in t?t.target_uri:void 0}get canReimport(){return this.isReady&&Boolean(this.importUri)}get stsDownloadId(){var e;const t=null===(e=this._requestMetadata)||void 0===e?void 0:e.payload;return t&&"short_term_storage_request_id"in t?t.short_term_storage_request_id:void 0}get isStsDownload(){return Boolean(this.stsDownloadId)}get canDownload(){return this.isReady&&this.isStsDownload&&!this.hasExpired}get modelStoreFormat(){var e,t;return null!==(t=null===(e=this.exportParams)||void 0===e?void 0:e.modelStoreFormat)&&void 0!==t?t:"tgz"}get exportParams(){return this._exportParameters}get duration(){var e;const t=null===(e=this._requestMetadata)||void 0===e?void 0:e.payload;return t&&"duration"in t?t.duration:void 0}get canExpire(){return this.isStsDownload&&Boolean(this.duration)}get isPermanent(){return!this.canExpire}get expirationDate(){return void 0===this._expirationDate&&(this._expirationDate=this.duration?new Date(this.date.getTime()+1e3*this.duration):void 0),this._expirationDate}get expirationElapsedTime(){return this.canExpire&&this.expirationDate?(0,Yi.Z)(this.expirationDate,{addSuffix:!0}):void 0}get hasExpired(){return Boolean(this.canExpire&&this.expirationDate&&Date.now()>this.expirationDate.getTime())}get errorMessage(){var e,t,n;return null===(n=null===(t=null===(e=this._data)||void 0===e?void 0:e.export_metadata)||void 0===t?void 0:t.result_data)||void 0===n?void 0:n.error}}var Fi=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Bi=X._.path("/api/histories/{history_id}/exports").method("get").create(),$i=X._.path("/api/histories/{history_id}/write_store").method("post").create(),zi=X._.path("/api/histories/from_store_async").method("post").create(),Wi=[{id:"rocrate.zip",name:"RO-Crate"},{id:"tar.gz",name:"Compressed TGZ"}];function Ui(e){return Fi(this,void 0,void 0,(function*(){return(yield Bi({history_id:e},{headers:{Accept:"application/vnd.galaxy.task.export+json"}})).data.map((e=>new Ni(e)))}))}function Vi(e,t,n,i=Li){return Fi(this,void 0,void 0,(function*(){const o=`${t}/${n}.${i.modelStoreFormat}`;return $i({history_id:e,target_uri:o,model_store_format:i.modelStoreFormat,include_files:i.includeFiles,include_deleted:i.includeDeleted,include_hidden:i.includeHidden})}))}var qi=n(73258),Zi=n(2707),Gi=n(46709),Ji=n(65811);const Ki={__name:"ExportOptions",props:{exportParams:{type:Hi,required:!0}},emits:["onValueChanged"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(!1),o=(0,a.computed)((()=>i.value?"Hide advanced export options":"Show advanced export options")),s=(0,a.reactive)({modelStoreFormat:n.exportParams.modelStoreFormat,includeFiles:n.exportParams.includeFiles,includeDeleted:n.exportParams.includeDeleted,includeHidden:n.exportParams.includeHidden});return{__sfc:!0,props:n,emit:t,isExpanded:i,title:o,localOptions:s,onValueChanged:function(){t("onValueChanged",s)},BCard:vi._,BCollapse:qi.k,BFormCheckbox:Zi.l,BFormGroup:Gi.x,BFormSelect:Ji.K,BLink:Yn.we,AVAILABLE_EXPORT_FORMATS:Wi}}},Xi=Ki;const Qi=(0,m.Z)(Xi,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t(n.BLink,{class:n.isExpanded?null:"collapsed",attrs:{id:"toggle-options-link","aria-expanded":n.isExpanded?"true":"false","aria-controls":"collapse-options"},on:{click:function(e){n.isExpanded=!n.isExpanded}}},[e._v("\n        "+e._s(n.title)+"\n    ")]),e._v(" "),t(n.BCollapse,{attrs:{id:"collapse-options"},model:{value:n.isExpanded,callback:function(e){n.isExpanded=e},expression:"isExpanded"}},[t(n.BCard,[t(n.BFormGroup,{attrs:{label:"Export Format:","label-for":"format"}},[t(n.BFormSelect,{attrs:{id:"format-selector",options:n.AVAILABLE_EXPORT_FORMATS,"value-field":"id","text-field":"name"},on:{change:n.onValueChanged},model:{value:n.localOptions.modelStoreFormat,callback:function(t){e.$set(n.localOptions,"modelStoreFormat",t)},expression:"localOptions.modelStoreFormat"}})],1),e._v(" "),t(n.BFormGroup,{attrs:{label:"Dataset files included in the package:"}},[t(n.BFormCheckbox,{attrs:{id:"include-files-check",switch:""},on:{change:n.onValueChanged},model:{value:n.localOptions.includeFiles,callback:function(t){e.$set(n.localOptions,"includeFiles",t)},expression:"localOptions.includeFiles"}},[e._v("\n                    Include Active\n                ")]),e._v(" "),t(n.BFormCheckbox,{attrs:{id:"include-deleted-check",switch:""},on:{change:n.onValueChanged},model:{value:n.localOptions.includeDeleted,callback:function(t){e.$set(n.localOptions,"includeDeleted",t)},expression:"localOptions.includeDeleted"}},[e._v("\n                    Include Deleted (not purged)\n                ")]),e._v(" "),t(n.BFormCheckbox,{attrs:{id:"include-hidden-check",switch:""},on:{change:n.onValueChanged},model:{value:n.localOptions.includeHidden,callback:function(t){e.$set(n.localOptions,"includeHidden",t)},expression:"localOptions.includeHidden"}},[e._v("\n                    Include Hidden\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;var eo=n(88103),to=n(22183),no=n(76398),io=n(87167),oo=n(9944),ao=n(17471),so=n(47627),ro=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const lo=(0,a.defineComponent)({__name:"ExportRDMForm",props:{what:{default:"archive"},clearInputAfterExport:{type:Boolean,default:!1},defaultRecordName:{default:""},defaultFilename:{default:""}},emits:["export"],setup(e,{emit:t}){const n=e,i=(0,oo.pm)(),o=(0,a.ref)(""),s=(0,a.ref)(""),r=(0,a.ref)(n.defaultFilename),l=(0,a.ref)("new"),d=(0,a.ref)(n.defaultRecordName),c=(0,a.ref)(),u=(0,a.computed)((()=>Boolean(s.value)&&Boolean(d.value))),h=(0,a.computed)((()=>Boolean(o.value)&&Boolean(r.value))),p=(0,a.computed)((()=>(0,Ee.ZP)(`Select a repository to export ${n.what} to.`))),f=(0,a.computed)((()=>(0,Ee.ZP)("Give the exported file a name."))),m=(0,a.computed)((()=>(0,Ee.ZP)("Give the new record a name or title."))),_=(0,a.computed)((()=>(0,Ee.ZP)("File name"))),v=(0,a.computed)((()=>(0,Ee.ZP)("Record name")));function g(){o.value="",s.value="",r.value="",c.value=void 0}return{__sfc:!0,toast:i,props:n,emit:t,includeOnlyRDMCompatible:{include:["rdm"]},recordUri:o,sourceUri:s,fileName:r,exportChoice:l,recordName:d,newEntry:c,canCreateRecord:u,canExport:h,repositoryRecordDescription:p,nameDescription:f,recordNameDescription:m,namePlaceholder:_,recordNamePlaceholder:v,doExport:function(){t("export",o.value,r.value),n.clearInputAfterExport&&g()},doCreateRecord:function(){return ro(this,void 0,void 0,(function*(){try{c.value=yield(0,xi.EA)(s.value,d.value),o.value=c.value.uri}catch(e){i.error((0,y.a)(e))}}))},clearInputs:g,BButton:jn.T,BCard:vi._,BFormGroup:Gi.x,BFormInput:to.e,BFormRadio:no.g,BFormRadioGroup:io.Q,ExternalLink:ao.Z,FilesInput:so.Z}}}),co=lo;const uo=(0,m.Z)(co,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"export-to-rdm-repository"},[t(n.BFormGroup,{staticClass:"mt-3",attrs:{id:"fieldset-name","label-for":"name",description:n.nameDescription}},[t(n.BFormInput,{attrs:{id:"file-name-input",placeholder:n.namePlaceholder,required:""},model:{value:n.fileName,callback:function(e){n.fileName=e},expression:"fileName"}})],1),e._v(" "),t(n.BFormRadioGroup,{staticClass:"export-radio-group",model:{value:n.exportChoice,callback:function(e){n.exportChoice=e},expression:"exportChoice"}},[t(n.BFormRadio,{directives:[{name:"localize",rawName:"v-localize"}],attrs:{id:"radio-new",name:"exportChoice",value:"new"}},[e._v(" Export to new record ")]),e._v(" "),t(n.BFormRadio,{directives:[{name:"localize",rawName:"v-localize"}],attrs:{id:"radio-existing",name:"exportChoice",value:"existing"}},[e._v("\n            Export to existing draft record\n        ")])],1),e._v(" "),"new"===n.exportChoice?t("div",[n.newEntry?t("div",[t(n.BCard,[t("p",[t("b",[e._v(e._s(n.newEntry.name))]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(" draft record has been created in the repository.")])]),e._v(" "),n.newEntry.external_link?t("p",[e._v("\n                    You can preview the record in the repository, further edit its metadata and decide when to\n                    publish it at\n                    "),t(n.ExternalLink,{attrs:{href:n.newEntry.external_link}},[t("b",[e._v(e._s(n.newEntry.external_link))])])],1):e._e(),e._v(" "),t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Please use the button below to upload the exported "+e._s(n.props.what)+" to the record.")]),e._v(" "),t(n.BButton,{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"export-button",attrs:{id:"export-button-new-record",variant:"primary",disabled:!n.canExport},on:{click:function(e){return e.preventDefault(),n.doExport.apply(null,arguments)}}},[e._v("\n                    Export to this record\n                ")])],1)],1):t("div",[t(n.BFormGroup,{staticClass:"mt-3",attrs:{id:"fieldset-record-new","label-for":"source-selector",description:n.repositoryRecordDescription}},[t(n.FilesInput,{attrs:{id:"source-selector",mode:"source","require-writable":!0,"filter-options":n.includeOnlyRDMCompatible},model:{value:n.sourceUri,callback:function(e){n.sourceUri=e},expression:"sourceUri"}})],1),e._v(" "),t(n.BFormGroup,{staticClass:"mt-3",attrs:{id:"fieldset-record-name","label-for":"record-name",description:n.recordNameDescription}},[t(n.BFormInput,{attrs:{id:"record-name-input",placeholder:n.recordNamePlaceholder,required:""},model:{value:n.recordName,callback:function(e){n.recordName=e},expression:"recordName"}})],1),e._v(" "),t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n                You need to create the new record in a repository before exporting the "+e._s(n.props.what)+" to it.\n            ")]),e._v(" "),t(n.BButton,{directives:[{name:"localize",rawName:"v-localize"}],attrs:{id:"create-record-button",variant:"primary",disabled:!n.canCreateRecord},on:{click:function(e){return e.preventDefault(),n.doCreateRecord.apply(null,arguments)}}},[e._v("\n                Create new record\n            ")])],1)]):t("div",[t(n.BFormGroup,{staticClass:"mt-3",attrs:{id:"fieldset-record-existing","label-for":"existing-record-selector",description:n.repositoryRecordDescription}},[t(n.FilesInput,{attrs:{id:"existing-record-selector",mode:"directory","require-writable":!0,"filter-options":n.includeOnlyRDMCompatible},model:{value:n.recordUri,callback:function(e){n.recordUri=e},expression:"recordUri"}})],1),e._v(" "),t(n.BButton,{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"export-button",attrs:{id:"export-button-existing-record",variant:"primary",disabled:!n.canExport},on:{click:function(e){return e.preventDefault(),n.doExport.apply(null,arguments)}}},[e._v("\n            Export to existing record\n        ")])],1)],1)}),[],!1,null,null,null).exports;var ho=n(49379);const po={__name:"ExportRecordDetails",props:{record:{type:Ni,required:!0},objectType:{type:String,required:!0},actionMessage:{type:String,default:null},actionMessageVariant:{type:String,default:"info"}},emits:["onReimport","onDownload","onCopyDownloadLink","onActionMessageDismissed"],setup(e,{emit:t}){const n=e;u.vI.add(h.RLE,h.eHv,h.f8k,h.SZw,h.nNP);const i=(0,a.computed)((()=>n.record.isReady?"Exported":"Export started")),o=(0,a.computed)((()=>`Preparing export. This may take some time depending on the size of your ${n.objectType}`));return{__sfc:!0,props:n,emit:t,title:i,preparingMessage:o,reimportObject:async function(){t("onReimport",n.record)},downloadObject:function(){t("onDownload",n.record)},copyDownloadLink:function(){t("onCopyDownloadLink",n.record)},onMessageDismissed:function(){t("onActionMessageDismissed")},FontAwesomeIcon:p.GN,BAlert:Rn.F,BCard:vi._,BCardTitle:ho._,LoadingSpan:z.Z}}},fo=po;const mo=(0,m.Z)(fo,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BCard,{staticClass:"export-record-details"},[t(n.BCardTitle,[t("b",[e._v(e._s(n.title))]),e._v(" "+e._s(n.props.record.elapsedTime)+"\n    ")]),e._v(" "),n.props.record.isPreparing?e._e():t("p",[e._v("\n        Format: "),t("b",{staticClass:"record-archive-format"},[e._v(e._s(n.props.record.modelStoreFormat))])]),e._v(" "),n.props.record.isPreparing?t("span",[t(n.LoadingSpan,{attrs:{message:n.preparingMessage}})],1):t("div",[n.props.record.hasFailed?t("div",[t(n.FontAwesomeIcon,{staticClass:"text-danger record-failed-icon",attrs:{icon:"exclamation-circle",title:"Export failed"}}),e._v(" "),t("span",[e._v("\n                Something failed during this export. Please try again and if the problem persist contact your\n                administrator.\n            ")]),e._v(" "),t(n.BAlert,{attrs:{show:"",variant:"danger"}},[e._v(e._s(n.props.record.errorMessage))])],1):n.props.record.isUpToDate?t("div",{attrs:{title:"Up to date"}},[t(n.FontAwesomeIcon,{staticClass:"text-success record-up-to-date-icon",attrs:{icon:"check-circle"}}),e._v(" "),t("span",[e._v(" This export record contains the latest changes of the "+e._s(n.props.objectType)+". ")])],1):t("div",[t(n.FontAwesomeIcon,{staticClass:"text-warning record-outdated-icon",attrs:{icon:"exclamation-triangle"}}),e._v(" "),t("span",[e._v("\n                This export is outdated and contains the changes of this "+e._s(n.props.objectType)+" from\n                "+e._s(n.props.record.elapsedTime)+".\n            ")])],1),e._v(" "),n.props.record.canExpire?t("p",{staticClass:"mt-3"},[n.props.record.hasExpired?t("span",[t(n.FontAwesomeIcon,{staticClass:"text-danger record-expired-icon",attrs:{icon:"clock"}}),e._v(" This download link has\n                expired.\n            ")],1):t("span",[t(n.FontAwesomeIcon,{staticClass:"text-warning record-expiration-warning-icon",attrs:{icon:"clock"}}),e._v(" This download\n                link expires "+e._s(n.props.record.expirationElapsedTime)+".\n            ")],1)]):e._e(),e._v(" "),n.props.record.isReady?t("div",[t("p",{staticClass:"mt-3"},[e._v("You can do the following actions with this "+e._s(n.props.objectType)+" export:")]),e._v(" "),null!==n.props.actionMessage?t(n.BAlert,{attrs:{variant:n.props.actionMessageVariant,show:"",fade:"",dismissible:""},on:{dismissed:n.onMessageDismissed}},[e._v("\n                "+e._s(n.props.actionMessage)+"\n            ")]):t("div",{staticClass:"actions"},[n.props.record.canDownload?t("b-button",{staticClass:"record-download-btn",attrs:{variant:"primary"},on:{click:n.downloadObject}},[e._v("\n                    Download\n                ")]):e._e(),e._v(" "),n.props.record.canDownload?t("b-button",{attrs:{title:"Copy Download Link",size:"sm",variant:"link"},on:{click:function(e){return e.stopPropagation(),n.copyDownloadLink.apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"link"}})],1):e._e(),e._v(" "),n.props.record.canReimport?t("b-button",{staticClass:"record-reimport-btn",attrs:{variant:"primary"},on:{click:n.reimportObject}},[e._v("\n                    Reimport\n                ")]):e._e()],1)],1):e._e()])],1)}),[],!1,null,null,null).exports;var _o=n(45969),vo=n(41984),go=n(80681);const yo={__name:"ExportRecordTable",props:{records:{type:Array,required:!0}},emits:["onReimport","onDownload"],setup(e,{emit:t}){const n=e;u.vI.add(h.RLE,h.f8k,h.q7m,h.Vmj,h.LM3,h.nNP);const i=(0,a.ref)(!1),o=(0,a.computed)((()=>i.value?"Hide old export records":"Show old export records"));return{__sfc:!0,props:n,emit:t,fields:[{key:"elapsedTime",label:"Exported"},{key:"format",label:"Format"},{key:"expires",label:"Expires"},{key:"isUpToDate",label:"Up to date",class:"text-center"},{key:"isReady",label:"Ready",class:"text-center"},{key:"actions",label:"Actions"}],isExpanded:i,title:o,reimportObject:async function(e){t("onReimport",e)},downloadObject:function(e){t("onDownload",e)},copyDownloadLink:function(e){t("onCopyDownloadLink",e)},FontAwesomeIcon:p.GN,BButton:jn.T,BButtonGroup:_o.a,BButtonToolbar:vo.r,BCard:vi._,BCollapse:qi.k,BLink:Yn.we,BTable:go.h}}},bo=yo;var wo=(0,m.Z)(bo,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t(n.BLink,{class:n.isExpanded?null:"collapsed",attrs:{"aria-expanded":n.isExpanded?"true":"false","aria-controls":"collapse-previous"},on:{click:function(e){n.isExpanded=!n.isExpanded}}},[e._v("\n        "+e._s(n.title)+"\n    ")]),e._v(" "),t(n.BCollapse,{attrs:{id:"collapse-previous"},model:{value:n.isExpanded,callback:function(e){n.isExpanded=e},expression:"isExpanded"}},[t(n.BCard,[t(n.BTable,{attrs:{items:n.props.records,fields:n.fields},scopedSlots:e._u([{key:"cell(elapsedTime)",fn:function(n){return[t("span",{attrs:{title:n.item.date}},[e._v(e._s(n.value))])]}},{key:"cell(format)",fn:function(n){return[t("span",[e._v(e._s(n.item.modelStoreFormat))])]}},{key:"cell(expires)",fn:function(n){return[n.item.hasExpired?t("span",[e._v("Expired")]):n.item.expirationDate?t("span",{attrs:{title:n.item.expirationDate}},[e._v(e._s(n.item.expirationElapsedTime))]):t("span",[e._v("No")])]}},{key:"cell(isUpToDate)",fn:function(e){return[e.item.isUpToDate?t(n.FontAwesomeIcon,{staticClass:"text-success",attrs:{icon:"check-circle",title:"This export record contains the latest changes."}}):t(n.FontAwesomeIcon,{staticClass:"text-danger",attrs:{icon:"exclamation-circle",title:"This export record is outdated. Please consider generating a new export if you need the latest changes."}})]}},{key:"cell(isReady)",fn:function(e){return[e.item.isReady?t(n.FontAwesomeIcon,{staticClass:"text-success",attrs:{icon:"check-circle",title:"Ready to download or import."}}):e.item.isPreparing?t(n.FontAwesomeIcon,{staticClass:"text-info",attrs:{icon:"spinner",spin:"",title:"Exporting in progress..."}}):e.item.hasExpired?t(n.FontAwesomeIcon,{staticClass:"text-danger",attrs:{icon:"exclamation-circle",title:"The export has expired."}}):t(n.FontAwesomeIcon,{staticClass:"text-danger",attrs:{icon:"exclamation-circle",title:"The export failed."}})]}},{key:"cell(actions)",fn:function(i){return[t(n.BButtonToolbar,{attrs:{"aria-label":"Actions"}},[t(n.BButtonGroup,[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{disabled:!i.item.canDownload,title:"Download"},on:{click:function(e){return n.downloadObject(i.item)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"download"}})],1),e._v(" "),i.item.canDownload?t(n.BButton,{attrs:{title:"Copy Download Link"},on:{click:function(e){return e.stopPropagation(),n.copyDownloadLink(i.item)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"link"}})],1):e._e(),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{disabled:!i.item.canReimport,title:"Reimport"},on:{click:function(e){return n.reimportObject(i.item)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"file-import"}})],1)],1)],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);const ko=wo.exports,Co={__name:"HistoryExport",props:{historyId:{type:String,required:!0}},setup(e){const t=e,{isRunning:n,waitForTask:i,requestHasFailed:o,hasFailed:s}=(0,Pi.n)(),{hasWritable:r}=Mi({exclude:["rdm"]}),{hasWritable:l}=Mi({include:["rdm"]}),{isPreparing:d,prepareHistoryDownload:c,downloadObjectByRequestId:f,getDownloadObjectUrl:m}=Ii(),{confirm:_}=Ci();u.vI.add(h.ca9);const v=3e3,g=(0,a.reactive)(Li),y=(0,a.ref)(!0),b=(0,a.ref)(null),w=(0,a.computed)((()=>E.value?.name??t.historyId)),k=(0,a.computed)((()=>b.value?.length?b.value.at(0):null)),C=(0,a.computed)((()=>k.value&&k.value.isUpToDate&&k.value.canDownload&&k.value.exportParams?.equals(g))),x=(0,a.computed)((()=>!d.value&&!C.value)),S=(0,a.computed)((()=>b.value?b.value.slice(1):null)),M=(0,a.computed)((()=>S.value?.length>0)),T=(0,a.computed)((()=>y.value?"Loading export records...":"This history has no export records yet. You can choose one of the export options above.")),L=(0,I.z)(),E=(0,a.computed)((()=>L.getHistoryById(t.historyId))),O=(0,a.ref)(null),A=(0,a.ref)(null),P=(0,a.ref)(null);async function R(){y.value=!0;try{O.value=null,b.value=await Ui(t.historyId);k.value?.isPreparing&&!n.value&&!o.value&&!s.value&&i(k.value.taskUUID,v),o.value&&(O.value="Something went wrong trying to get the export progress. Please check back later."),s.value&&(O.value="Something went wrong trying to export the history. Please try again later.")}catch(e){O.value=e}finally{y.value=!1}}return(0,a.onMounted)((async()=>{R()})),(0,a.watch)(n,((e,t)=>{t&&!e&&R()})),{__sfc:!0,isExportTaskRunning:n,waitForTask:i,taskMonitorRequestFailed:o,taskHasFailed:s,hasWritableFileSources:r,hasWritableRDMFileSources:l,isPreparingDownload:d,prepareHistoryDownload:c,downloadObjectByRequestId:f,getDownloadObjectUrl:m,confirm:_,props:t,POLLING_DELAY:v,exportParams:g,isLoadingRecords:y,exportRecords:b,historyName:w,latestExportRecord:k,isLatestExportRecordReadyToDownload:C,canGenerateDownload:x,previousExportRecords:S,hasPreviousExports:M,availableRecordsMessage:T,historyStore:L,history:E,errorMessage:O,actionMessage:A,actionMessageVariant:P,updateExports:R,doExportToFileSource:async function(e,n){await Vi(t.historyId,e,n,g),R()},prepareDownload:async function(){await c(t.historyId,{pollDelayInMs:v,exportParams:g}),R()},downloadFromRecord:function(e){e.canDownload&&f(e.stsDownloadId)},copyDownloadLinkFromRecord:function(e){if(e.canDownload){const t=m(e.stsDownloadId);(0,Be.J)((0,D.y3)(t),"Download link copied to your clipboard")}},reimportFromRecord:async function(e){await _(`Do you really want to import a new copy of this history exported ${e.elapsedTime}?`)&&function(e){return Fi(this,void 0,void 0,(function*(){return zi({store_content_uri:e.importUri,model_store_format:e.modelStoreFormat})}))}(e).then((()=>{P.value="info",A.value="The history is being imported in the background. Check your histories after a while to find it."})).catch((e=>{P.value="danger",A.value=e}))},onActionMessageDismissedFromRecord:function(){A.value=null,P.value=null},updateExportParams:function(e){g.modelStoreFormat=e.modelStoreFormat,g.includeFiles=e.includeFiles,g.includeDeleted=e.includeDeleted,g.includeHidden=e.includeHidden},FontAwesomeIcon:p.GN,BAlert:Rn.F,BButton:jn.T,BCard:vi._,BTab:gi.L,BTabs:yi.M,LoadingSpan:z.Z,RouterLink:Ri.rH,ExportOptions:Qi,ExportToFileSourceForm:eo.Z,ExportToRDMRepositoryForm:uo,ExportRecordDetails:mo,ExportRecordTable:ko}}};const xo=(0,m.Z)(Co,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{staticClass:"history-export-component"},[t(n.FontAwesomeIcon,{staticClass:"text-primary float-left mr-2",attrs:{icon:"file-export",size:"2x"}}),e._v(" "),t("h1",{staticClass:"h-lg"},[e._v("\n        Export\n        "),n.history?t("b",{attrs:{id:"history-name"}},[e._v(e._s(n.historyName))]):t(n.LoadingSpan,{attrs:{"spinner-only":""}})],1),e._v(" "),t(n.ExportOptions,{staticClass:"mt-3",attrs:{id:"history-export-options","export-params":n.exportParams},on:{onValueChanged:n.updateExportParams}}),e._v(" "),t("h2",{staticClass:"h-md mt-3"},[e._v("How do you want to export this history?")]),e._v(" "),t(n.BCard,{staticClass:"mt-3",attrs:{"no-body":""}},[t(n.BTabs,{attrs:{pills:"",card:"",vertical:""}},[t(n.BTab,{attrs:{id:"direct-download-tab",title:"to direct download","title-link-class":"tab-export-to-link",active:""}},[t("p",[e._v("\n                    Here you can generate a temporal download for your history. When your download link expires or\n                    your history changes you can re-generate it again.\n                ")]),e._v(" "),t(n.BAlert,{attrs:{show:"",variant:"warning"}},[e._v("\n                    History archive downloads can expire and are removed at regular intervals. For permanent\n                    storage, export to a "),t("b",[e._v("remote file")]),e._v(" or download and then import the archive on another\n                    Galaxy server.\n                ")]),e._v(" "),t(n.BButton,{staticClass:"gen-direct-download-btn",attrs:{disabled:!n.canGenerateDownload,variant:"primary"},on:{click:n.prepareDownload}},[e._v("\n                    Generate direct download\n                ")]),e._v(" "),n.isPreparingDownload?t("span",[t(n.LoadingSpan,{attrs:{message:"Galaxy is preparing your download, this will likely take a while"}})],1):n.isLatestExportRecordReadyToDownload?t(n.BAlert,{staticClass:"mt-3",attrs:{variant:"success",show:""}},[e._v("\n                    The latest export record is ready. Use the download button below to download it or change the\n                    advanced export options above to generate a new one.\n                ")]):e._e()],1),e._v(" "),n.hasWritableFileSources?t(n.BTab,{attrs:{id:"file-source-tab",title:"to remote file","title-link-class":"tab-export-to-file"}},[t("p",[e._v('\n                    If you need a "more permanent" way of storing your history archive you can export it directly to\n                    one of the available remote file sources here. You will be able to re-import it later as long as\n                    it remains available on the remote server.\n                ')]),e._v(" "),t(n.ExportToFileSourceForm,{attrs:{what:"history","clear-input-after-export":!0},on:{export:n.doExportToFileSource}})],1):e._e(),e._v(" "),n.hasWritableRDMFileSources?t(n.BTab,{attrs:{id:"rdm-file-source-tab",title:"to RDM repository","title-link-class":"tab-export-to-rdm-repo"}},[t("p",[e._v("You can "),t("b",[e._v("upload your history")]),e._v(" to one of the available RDM repositories here.")]),e._v(" "),t("p",[e._v("\n                    Your history export archive needs to be uploaded to an existing "),t("i",[e._v("draft")]),e._v(" record. You will\n                    need to create a "),t("b",[e._v("new record")]),e._v(" on the repository or select an existing\n                    "),t("b",[e._v("draft record")]),e._v(" and then export your history to it.\n                ")]),e._v(" "),t(n.BAlert,{attrs:{show:"",variant:"info"}},[e._v("\n                    You may need to setup your credentials for the selected repository in your\n                    "),t(n.RouterLink,{attrs:{to:"/user/information",target:"_blank"}},[e._v("settings page")]),e._v(" to be able to\n                    export. You can also define some default options for the export in those settings, like the\n                    public name you want to associate with your records or whether you want to publish them\n                    immediately or keep them as drafts after export.\n                ")],1),e._v(" "),t(n.ExportToRDMRepositoryForm,{attrs:{what:"history","default-filename":n.historyName+" (Galaxy History)","default-record-name":n.historyName,"clear-input-after-export":!0},on:{export:n.doExportToFileSource}})],1):e._e()],1)],1),e._v(" "),n.errorMessage?t(n.BAlert,{staticClass:"mt-3",attrs:{id:"last-export-record-error-alert",variant:"danger",show:""}},[e._v("\n        "+e._s(n.errorMessage)+"\n    ")]):n.latestExportRecord?t("div",[t("h2",{staticClass:"h-md mt-3"},[e._v("Latest Export Record")]),e._v(" "),t(n.ExportRecordDetails,{staticClass:"mt-3",attrs:{record:n.latestExportRecord,"object-type":"history","action-message":n.actionMessage,"action-message-variant":n.actionMessageVariant},on:{onDownload:n.downloadFromRecord,onCopyDownloadLink:n.copyDownloadLinkFromRecord,onReimport:n.reimportFromRecord,onActionMessageDismissed:n.onActionMessageDismissedFromRecord}})],1):t(n.BAlert,{staticClass:"mt-3",attrs:{id:"no-export-records-alert",variant:"info",show:""}},[e._v("\n        "+e._s(n.availableRecordsMessage)+"\n    ")]),e._v(" "),n.hasPreviousExports?t(n.ExportRecordTable,{staticClass:"mt-3",attrs:{id:"previous-export-records",records:n.previousExportRecords},on:{onDownload:n.downloadFromRecord,onReimport:n.reimportFromRecord}}):e._e()],1)}),[],!1,null,null,null).exports;function So(){const e=(0,Xe.L)(),t=(0,Nn.yj)(),n=(0,a.computed)((()=>{const e=t.query.hide_panels;return null==e||"string"!=typeof e||"true"!=e.toLowerCase()})),i=(0,a.computed)((()=>n.value&&e.showActivityBar&&!e.isAnonymous)),o=(0,a.computed)((()=>n.value&&!i.value));return{showPanels:n,showActivityBar:i,showToolbox:o}}var Mo=n(82021),To=n.n(Mo);const Lo=[{description:"Displays currently active interactive tools (ITs), if these are enabled by the administrator.",icon:"fa-laptop",id:"interactivetools",mutable:!1,optional:!0,title:"Interactive Tools",tooltip:"Show active interactive tools",to:"/interactivetool_entry_points/list",visible:!0},{description:"Opens a data dialog, allowing uploads from URL, pasted content or disk.",icon:"upload",id:"upload",mutable:!1,optional:!1,title:"Upload",to:null,tooltip:"Download from URL or upload files from disk",visible:!0},{description:"Displays the tool panel to search and access all available tools.",icon:"wrench",id:"tools",mutable:!1,optional:!1,title:"Tools",to:null,tooltip:"Search and run tools",visible:!0},{description:"Displays a panel to search and access workflows.",icon:"sitemap",id:"workflows",mutable:!1,optional:!0,title:"Workflows",to:"/workflows/list",tooltip:"Search and run workflows",visible:!0},{description:"Displays all workflow runs.",icon:"fa-list",id:"invocation",mutable:!1,optional:!0,title:"Workflow Invocations",tooltip:"Show all workflow runs",to:"/workflows/invocations",visible:!0},{description:"Displays the list of available visualizations.",icon:"chart-bar",id:"visualizations",mutable:!1,optional:!0,title:"Visualize",to:"/visualizations",tooltip:"Visualize datasets",visible:!0},{description:"Displays the list of all histories.",icon:"fa-hdd",id:"histories",mutable:!1,optional:!0,title:"Histories",tooltip:"Show all histories",to:"/histories/list",visible:!0},{description:"Displays all of your datasets across all histories.",icon:"fa-folder",id:"datasets",mutable:!1,optional:!0,title:"Datasets",tooltip:"Show all datasets",to:"/datasets/list",visible:!1}];var Do=n(26600);const Eo=(0,o.Q_)("activityStore",(()=>{const e=(0,Do.p)("activity-store-activities",[]);return{activities:e,getAll:function(){return e.value},remove:function(t){const n=e.value.findIndex((e=>e.id===t));-1!==n&&e.value.splice(n,1)},setAll:function(t){e.value=t},sync:function(){const t={};Lo.forEach((e=>{t[e.id]=e}));const n=[],i=new Set;e.value.forEach((e=>{if(e.mutable)n.push(Object.assign({},e));else{const o=t[e.id];o&&(i.add(e.id),n.push(Object.assign(Object.assign({},o),{visible:e.visible})))}})),Lo.forEach((e=>{i.has(e.id)||n.push(Object.assign({},e))})),JSON.stringify(e.value)!==JSON.stringify(n)&&(e.value=n)}}}));var Oo=n(58625);const Ao=(0,a.defineComponent)({__name:"TextShort",props:{text:{type:String,required:!0},maxLength:{type:Number,default:24}},setup(e){const t=e,n=(0,a.computed)((()=>{if(t.text.length>t.maxLength){return`${t.text.slice(0,t.maxLength)}...`}return t.text}));return{__sfc:!0,props:t,text:n}}});const Io=(0,m.Z)(Ao,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{staticClass:"text-break text-center"},[e._v("\n    "+e._s(n.text)+"\n")])}),[],!1,null,null,null).exports;var Po=n(53376);function Ro(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}function jo(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}u.vI.add(h.nYk);const Yo=(0,a.defineComponent)({components:{FontAwesomeIcon:p.GN},props:{delayOnMouseout:Number,delayOnMouseover:Number,trigger:String,forceShow:Boolean,modifiers:Array,onFirstUpdate:Function,placement:String,strategy:String,popperIs:{default:"div",type:String},popperProps:{type:Object},referenceIs:{default:"span",type:String},referenceProps:{type:Object},arrow:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},mode:{type:String,default:"dark"},title:{type:String,default:null}},emits:["show","hide","before-enter","enter","after-enter","enter-cancelled","before-leave","leave","after-leave","leave-cancelled"],setup(e,{emit:t}){const n=(0,a.ref)(),i=(0,a.ref)(),{visible:o}=function(e,t,n){const i=(0,a.ref)(!1);(0,a.onMounted)((()=>{i.value=!0})),(0,a.onUnmounted)((()=>{i.value=!1,c()}));const o=(0,a.ref)(!0);(0,a.onUpdated)((()=>{o.value=!o.value}));const s=(0,a.ref)(),r=(0,a.ref)();(0,a.watch)((()=>[i.value,o.value]),(()=>{var n,o;i.value&&((null===(n=(0,a.unref)(e))||void 0===n?void 0:n.$el)?s.value=(0,a.unref)(e).$el:s.value=(0,a.unref)(e),(null===(o=(0,a.unref)(t))||void 0===o?void 0:o.$el)?r.value=(0,a.unref)(t).$el:r.value=(0,a.unref)(t))}));const l=(0,a.ref)();(0,a.watch)((()=>[s.value,r.value]),(()=>{c(),s.value&&r.value&&d()}));const d=()=>{var e,t,i,o;l.value=(0,Po.fi)(s.value,r.value,{placement:null!==(e=null==n?void 0:n.placement)&&void 0!==e?e:"bottom",modifiers:null!==(t=null==n?void 0:n.modifiers)&&void 0!==t?t:[],strategy:null!==(i=null==n?void 0:n.strategy)&&void 0!==i?i:"absolute",onFirstUpdate:null!==(o=null==n?void 0:n.onFirstUpdate)&&void 0!==o?o:void 0})},c=()=>{var e;null===(e=l.value)||void 0===e||e.destroy(),l.value=void 0},u=(0,a.ref)(!1),h=()=>u.value=!u.value,p=()=>u.value=!0,f=()=>u.value=!1;(0,a.watch)((()=>[l.value,(0,a.unref)(null==n?void 0:n.trigger),(0,a.unref)(null==n?void 0:n.forceShow)]),(()=>{if(l.value)return(0,a.unref)(null==n?void 0:n.forceShow)?(u.value=!0,void y()):void g()})),(0,a.watch)((()=>(0,a.unref)(null==n?void 0:n.forceShow)),(()=>{(0,a.unref)(null==n?void 0:n.forceShow)||"manual"!==(0,a.unref)(null==n?void 0:n.trigger)&&(u.value=!1)})),(0,a.watch)((()=>(0,a.unref)(null==n?void 0:n.disabled)),(()=>{(0,a.unref)(null==n?void 0:n.disabled)?y():g()}));const m=(0,a.ref)(),_=()=>{var e;0===(0,a.unref)(null==n?void 0:n.delayOnMouseover)?p():(clearTimeout(m.value),m.value=setTimeout((()=>{p()}),null!==(e=(0,a.unref)(null==n?void 0:n.delayOnMouseover))&&void 0!==e?e:100))},v=()=>{var e;0===(0,a.unref)(null==n?void 0:n.delayOnMouseout)?f():(clearTimeout(m.value),m.value=setTimeout((()=>{f()}),null!==(e=(0,a.unref)(null==n?void 0:n.delayOnMouseout))&&void 0!==e?e:100))},g=()=>{var e;switch(y(),null!==(e=(0,a.unref)(null==n?void 0:n.trigger))&&void 0!==e?e:"hover"){case"click-to-open":Ro(s.value,"click",p),Ro(document,"click",b);break;case"click-to-toggle":Ro(s.value,"click",h),Ro(document,"click",b);break;case"hover":Ro(s.value,"mouseover",_),Ro(r.value,"mouseover",_),Ro(s.value,"mouseout",v),Ro(r.value,"mouseout",v),Ro(s.value,"mousedown",v),Ro(r.value,"mousedown",v);break;case"focus":Ro(s.value,"focus",p),Ro(r.value,"focus",p),Ro(s.value,"blur",f),Ro(r.value,"blur",f);break;case"manual":break;default:throw TypeError()}},y=()=>{jo(s.value,"click",p),jo(document,"click",b),jo(s.value,"click",h),jo(s.value,"mouseover",_),jo(r.value,"mouseover",_),jo(s.value,"mouseout",v),jo(r.value,"mouseout",v),jo(s.value,"mousedown",v),jo(r.value,"mousedown",v),jo(s.value,"focus",p),jo(r.value,"focus",p),jo(s.value,"blur",f),jo(r.value,"blur",f)},b=e=>{var t,n;(null===(t=s.value)||void 0===t?void 0:t.contains(e.target))||(null===(n=r.value)||void 0===n?void 0:n.contains(e.target))||f()};return(0,a.watch)((()=>[l.value,u.value]),(()=>{var e,t,i,o,s;l.value&&(u.value||(0,a.unref)(null==n?void 0:n.forceShow)?(null===(e=r.value)||void 0===e||e.classList.remove("vue-use-popperjs-none"),null===(t=null==n?void 0:n.onShow)||void 0===t||t.call(n),null===(i=l.value)||void 0===i||i.update()):(null===(o=r.value)||void 0===o||o.classList.add("vue-use-popperjs-none"),null===(s=null==n?void 0:n.onHide)||void 0===s||s.call(n)))})),{instance:l,visible:u}}(n,i,Object.assign(Object.assign({},e),{trigger:(0,a.toRef)(e,"trigger"),forceShow:(0,a.toRef)(e,"forceShow"),disabled:(0,a.toRef)(e,"disabled"),delayOnMouseover:(0,a.toRef)(e,"delayOnMouseover"),delayOnMouseout:(0,a.toRef)(e,"delayOnMouseout"),onShow:()=>t("show"),onHide:()=>t("hide")}));(0,a.watch)((()=>[o.value,e.disabled]),(()=>{e.disabled&&o.value&&(o.value=!1)}),{flush:"sync"});return{visible:o,reference:n,popper:i,handle:e=>(...n)=>t(e,...n)}}}),Ho=Yo;const No=(0,m.Z)(Ho,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",[t(e.referenceIs,e._b({ref:"reference",tag:"component"},"component",e.referenceProps,!1),[e._t("reference")],2),e._v(" "),t(e.popperIs,e._b({directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"popper",tag:"component",staticClass:"popper-element mt-1",class:`popper-element-${e.mode}`},"component",e.popperProps,!1),[e.arrow?t("div",{staticClass:"popper-arrow",attrs:{"data-popper-arrow":""}}):e._e(),e._v(" "),e.title?t("div",{staticClass:"popper-header px-2 py-1 rounded-top d-flex justify-content-between"},[t("span",{staticClass:"px-1"},[e._v(e._s(e.title))]),e._v(" "),t("span",{staticClass:"popper-close align-items-center cursor-pointer",on:{click:function(t){e.visible=!1}}},[t("FontAwesomeIcon",{attrs:{icon:"fa-times-circle"}})],1)]):e._e(),e._v(" "),e._t("default")],2)],1)}),[],!1,null,"78fb5aca",null).exports,Fo=(0,a.defineComponent)({__name:"ActivityItem",props:{id:null,title:{default:void 0},icon:{default:"question"},indicator:{default:0},isActive:{type:Boolean,default:!1},tooltip:{default:void 0},tooltipPlacement:{default:"right"},progressPercentage:{default:0},progressStatus:{default:void 0},options:{default:void 0},to:{default:void 0}},emits:["click"],setup(e,{emit:t}){const n=e,i=(0,Nn.tv)();return{__sfc:!0,router:i,props:n,emit:t,onClick:function(e){t("click"),n.to&&i.push(n.to)},FontAwesomeIcon:p.GN,TextShort:Io,Popper:No}}}),Bo=Fo;const $o=(0,m.Z)(Bo,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.Popper,{attrs:{"reference-is":"span","popper-is":"span",placement:e.tooltipPlacement},scopedSlots:e._u([{key:"reference",fn:function(){return[t("div",{staticClass:"activity-item",attrs:{id:e.id},on:{click:n.onClick}},[t("b-nav-item",{staticClass:"position-relative my-1 p-2",class:{"nav-item-active":e.isActive},attrs:{"aria-label":e._f("l")(e.title)}},[e.progressStatus?t("span",{staticClass:"progress"},[t("div",{staticClass:"progress-bar notransition",class:{"bg-danger":"danger"===e.progressStatus,"bg-success":"success"===e.progressStatus},style:{width:`${Math.round(e.progressPercentage)}%`}})]):e._e(),e._v(" "),t("span",{staticClass:"position-relative"},[t("div",{staticClass:"nav-icon"},[e.indicator>0?t("span",{staticClass:"nav-indicator",attrs:{"data-description":"activity indicator"}},[e._v("\n                            "+e._s(Math.min(e.indicator,99))+"\n                        ")]):e._e(),e._v(" "),t(n.FontAwesomeIcon,{attrs:{icon:e.icon}})],1),e._v(" "),e.title?t(n.TextShort,{staticClass:"nav-title",attrs:{text:e.title}}):e._e()],1)])],1)]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"text-center px-2 py-1"},[e.tooltip?t("small",[e._v(e._s(e._f("l")(e.tooltip)))]):t("small",[e._v("No tooltip available for this item")]),e._v(" "),e.options?t("div",{staticClass:"nav-options p-1"},e._l(e.options,(function(n,i){return t("router-link",{key:i,attrs:{to:n.value}},[t("b-button",{staticClass:"w-100 my-1 text-break text-light",attrs:{size:"sm",variant:"outline-primary"}},[e._v("\n                    "+e._s(n.name)+"\n                ")])],1)})),1):e._e()])])}),[],!1,null,"28cafb07",null).exports;var zo=n(56024);const Wo=(0,a.defineComponent)({__name:"ActivitySettings",setup(e){u.vI.add({faCheckSquare:h.a3n,faSquare:zo.e3,faTrash:h.$aW,faThumbtack:h.RP7});const t=Eo(),{activities:n}=(0,o.Jk)(t),i=(0,a.ref)(""),s=(0,a.computed)((()=>{if(i.value.length>0){const e=i.value.toLowerCase();return n.value.filter((t=>{const n=[t.title,t.description];for(const t of n)if(-1!==t.toLowerCase().indexOf(e))return!0;return!1}))}return n.value})),r=(0,a.computed)((()=>s.value.length>0));return{__sfc:!0,activityStore:t,activities:n,query:i,filteredActivities:s,foundActivities:r,onClick:function(e){e.optional&&(e.visible=!e.visible)},onRemove:function(e){t.remove(e.id)},onQuery:function(e){i.value=e},FontAwesomeIcon:p.GN,DelayedInput:Z}}});const Uo=(0,m.Z)(Wo,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"activity-settings rounded p-3 no-highlight"},[t(n.DelayedInput,{staticClass:"mb-3",attrs:{delay:100,placeholder:"Search activities"},on:{change:n.onQuery}}),e._v(" "),n.foundActivities?t("div",{staticClass:"activity-settings-content overflow-auto"},e._l(n.filteredActivities,(function(i){return t("div",{key:i.id},[t("div",{staticClass:"activity-settings-item p-2 cursor-pointer",on:{click:function(e){return n.onClick(i)}}},[t("div",{staticClass:"d-flex justify-content-between align-items-start"},[t("span",{staticClass:"w-100"},[i.optional?i.visible?t(n.FontAwesomeIcon,{staticClass:"icon-check mr-1",attrs:{icon:"fas fa-check-square","fa-fw":""}}):t(n.FontAwesomeIcon,{staticClass:"mr-1",attrs:{icon:"far fa-square","fa-fw":""}}):t(n.FontAwesomeIcon,{staticClass:"icon-check mr-1",attrs:{icon:"fas fa-thumbtack","fa-fw":""}}),e._v(" "),t("small",[t("icon",{staticClass:"mr-1",attrs:{icon:i.icon}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"font-weight-bold"},[e._v(e._s(i.title||"No title available"))])],1)],1),e._v(" "),i.mutable?t("b-button",{staticClass:"button-delete",attrs:{"data-description":"delete activity",size:"sm",variant:"link"},on:{click:function(e){return e.stopPropagation(),n.onRemove(i)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-trash","fa-fw":""}})],1):e._e()],1),e._v(" "),t("small",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n                    "+e._s(i.description||"No description available")+"\n                ")])])])})),0):t("div",{staticClass:"activity-settings-content"},[t("b-alert",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"py-1 px-2",attrs:{show:""}},[e._v(" No matching activities found. ")])],1)],1)}),[],!1,null,null,null).exports;var Vo=n(37485);const qo=(0,a.defineComponent)({__name:"InteractiveItem",props:{id:null,title:null,icon:null,isActive:{type:Boolean},to:null},emits:["click"],setup(e,{emit:t}){const{entryPoints:n}=(0,o.Jk)((0,Vo.B)()),i=(0,a.computed)((()=>n.value.length)),s=(0,a.computed)((()=>1===i.value?"You currently have 1 active interactive tool":`You currently have ${i.value} active interactive tools`));return{__sfc:!0,entryPoints:n,totalCount:i,emit:t,tooltip:s,ActivityItem:$o}}}),Zo=qo;const Go=(0,m.Z)(Zo,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.totalCount>0?t(n.ActivityItem,{attrs:{id:e.id,icon:e.icon,indicator:n.totalCount,"is-active":e.isActive,title:e.title,tooltip:n.tooltip,to:e.to},on:{click:function(e){return n.emit("click")}}}):e._e()}),[],!1,null,null,null).exports;var Jo=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};X._.path("/api/notifications/{notification_id}").method("get").create();const Ko=X._.path("/api/notifications").method("post").create();X._.path("/api/notifications/{notification_id}").method("put").create();const Xo=X._.path("/api/notifications").method("get").create();const Qo=X._.path("/api/notifications").method("put").create();const ea=X._.path("/api/notifications/status").method("get").create();function ta(e){return Jo(this,void 0,void 0,(function*(){const{data:t}=yield ea({since:e.toISOString().replace("Z","")});return t}))}var na=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ia=X._.path("/api/notifications/broadcast/{notification_id}").method("get").create();const oa=X._.path("/api/notifications/broadcast").method("get").create();function aa(){return na(this,void 0,void 0,(function*(){const{data:e}=yield oa({});return e}))}const sa=X._.path("/api/notifications/broadcast").method("post").create();const ra=X._.path("/api/notifications/broadcast/{notification_id}").method("put").create();function la(e,t){return na(this,void 0,void 0,(function*(){const{data:n}=yield ra(Object.assign({notification_id:e},t));return n}))}var da=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ca=(0,o.Q_)("broadcastsStore",(()=>{const e=(0,a.ref)([]),t=(0,a.ref)(!1),n=(0,Do.p)("dismissed-broadcasts",{}),i=(0,a.computed)((()=>e.value.filter(s)));function o(e){if(!e)return!1;const t=new Date(`${e}Z`);return new Date>t}function s(e){return!n.value[e.id]&&!o(e.expiration_time)&&function(e){const t=new Date(`${e.publication_time}Z`);return new Date>=t}(e)}return function(){var e;for(const t in n.value)o(null===(e=n.value[t])||void 0===e?void 0:e.expiration_time)&&delete n.value[t]}(),{broadcasts:e,dismissedBroadcasts:n,loadingBroadcasts:t,activeBroadcasts:i,dismissBroadcast:function(e){(0,a.set)(n.value,e.id,{expiration_time:e.expiration_time})},loadBroadcasts:function(){return da(this,void 0,void 0,(function*(){t.value=!0,yield aa().then((t=>{e.value=(0,fe.NY)(t,[],"create_time","desc")})).finally((()=>{t.value=!1}))}))},updateBroadcasts:function(t){e.value=(0,fe.NY)(e.value,t,"create_time","desc").filter((e=>!o(e.expiration_time)))}}}));var ua=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ha=(0,o.Q_)("notificationsStore",(()=>{const e=ca(),t=(0,a.ref)(0),n=(0,a.ref)([]),i=(0,a.ref)(void 0),o=(0,a.ref)(!1),s=(0,a.ref)(null),r=(0,a.computed)((()=>n.value.filter((e=>!e.seen_time))));function l(){return ua(this,void 0,void 0,(function*(){const e=yield function(){return Jo(this,void 0,void 0,(function*(){const{data:e}=yield Xo({});return e}))}();n.value=(0,fe.NY)(e,[],"create_time","desc")}))}function d(){return ua(this,void 0,void 0,(function*(){clearTimeout(i.value),i.value=void 0;try{if(s.value){const i=yield ta(s.value);t.value=i.total_unread_count,n.value=(0,fe.NY)(n.value,i.notifications,"create_time","desc"),e.updateBroadcasts(i.broadcasts)}else o.value=!0,yield e.loadBroadcasts(),yield l(),t.value=n.value.filter((e=>!e.seen_time)).length;s.value=new Date}catch(e){console.error(e)}finally{o.value=!1}}))}function c(){return ua(this,void 0,void 0,(function*(){yield d(),i.value=setTimeout((()=>c()),5e3)}))}function u(e){return ua(this,void 0,void 0,(function*(){yield function(e){return Jo(this,void 0,void 0,(function*(){const{data:t}=yield Qo(e);return t}))}(e),e.changes.deleted&&(n.value=n.value.filter((t=>!e.notification_ids.includes(t.id)))),yield c()}))}return{notifications:n,totalUnreadCount:t,unreadNotifications:r,loadingNotifications:o,updateNotification:function(e,t){return ua(this,void 0,void 0,(function*(){return u({notification_ids:[e.id],changes:t})}))},updateBatchNotification:u,startPollingNotifications:c}})),pa=(0,a.defineComponent)({__name:"NotificationItem",props:{id:null,title:null,icon:null,isActive:{type:Boolean},to:null},emits:["click"],setup(e,{emit:t}){const{totalUnreadCount:n}=(0,o.Jk)(ha()),i=(0,a.computed)((()=>n.value>0?`You have ${n.value} unread notifications`:"You have no unread notifications"));return{__sfc:!0,totalUnreadCount:n,emit:t,tooltip:i,ActivityItem:$o}}}),fa=pa;const ma=(0,m.Z)(fa,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.ActivityItem,{attrs:{id:e.id,icon:e.icon,indicator:n.totalUnreadCount,"is-active":e.isActive,title:e.title,tooltip:n.tooltip,to:e.to},on:{click:function(e){return n.emit("click")}}})}),[],!1,null,null,null).exports;var _a=n(3410);const va=(0,o.Q_)("upload",(()=>({percentage:(0,a.ref)(0),status:(0,a.ref)("")})));var ga=n(26069);const ya=(0,a.defineComponent)({__name:"UploadItem",props:{id:null,title:null,icon:null,tooltip:null},emits:["click"],setup(e,{emit:t}){const{openGlobalUploadModal:n}=(0,_a.N)(),{percentage:i,status:s}=(0,o.Jk)(va());return(0,a.onMounted)((()=>{"upload1"==ga.Z.get("tool_id")&&n()})),{__sfc:!0,emit:t,openGlobalUploadModal:n,percentage:i,status:s,onUploadModal:function(){t("click"),n()},ActivityItem:$o}}}),ba=ya;const wa=(0,m.Z)(ba,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.ActivityItem,{attrs:{id:e.id,title:e.title,tooltip:e.tooltip,icon:e.icon,"progress-percentage":n.percentage,"progress-status":n.status},on:{click:n.onUploadModal}})}),[],!1,null,null,null).exports;const ka=(0,a.defineComponent)({__name:"ContextMenu",props:{visible:{type:Boolean},x:null,y:null},emits:["hide"],setup(e,{emit:t}){const n=e,i=(0,a.ref)({left:"",top:""});return(0,a.watch)((()=>[n.x,n.y]),(()=>{i.value.left=`${n.x}px`,i.value.top=`${n.y}px`})),{__sfc:!0,props:n,emit:t,placeContextMenu:i,Popper:No}}}),Ca=ka;const xa=(0,m.Z)(Ca,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return e.visible?t("div",[t(n.Popper,{staticClass:"context-menu",style:n.placeContextMenu,attrs:{placement:"right","force-show":!0,arrow:!1,mode:"light"}},[t("div",{staticClass:"context-menu-slot"},[e._t("default")],2)]),e._v(" "),t("div",{staticClass:"context-menu-overlay",on:{click:function(e){return n.emit("hide")}}})],1):e._e()}),[],!1,null,null,null).exports;var Sa=n(6628),Ma=n(44689);const Ta={__name:"FlexPanel",props:{collapsible:{type:Boolean,default:!0},side:{type:String,default:"right"}},setup(e){const t=e,n=new Sa.h(10);u.vI.add({faChevronLeft:h.A35,faChevronRight:h._tD,faGripLinesVertical:h._3F});const i=(0,a.ref)(),o=(0,a.ref)(),s=[200,300,600],r=(0,a.ref)(s[1]),l=(0,a.ref)(!0),{position:d,isDragging:c}=(0,rn.O1d)(i,{preventDefault:!0,exact:!0}),f=(0,a.computed)((()=>l.value?{width:`${r.value}px`}:null));return(0,a.watch)(d,(()=>{n.enqueue((()=>{const e=o.value.getBoundingClientRect(),n=i.value.getBoundingClientRect();r.value=(0,Ma.Vc)(e,n,s[0],s[2],t.side,d.value.x)}))})),{__sfc:!0,lastQueue:n,props:t,draggable:i,root:o,rangeWidth:s,panelWidth:r,show:l,position:d,isDragging:c,style:f,toggle:function(){l.value=!l.value},FontAwesomeIcon:p.GN}}};const La=(0,m.Z)(Ta,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.show?t("div",{ref:"root",staticClass:"d-flex",class:{"flex-panel-left":"left"===e.side,"flex-panel-right":"right"===e.side},attrs:{id:e.side}},[t("div",{staticClass:"d-flex flex-column",style:n.style},[e._t("default"),e._v(" "),"right"===e.side?t("div",{staticClass:"flex-panel-footer d-flex px-2 py-1"},[t("div",{attrs:{id:"right-drag"}},[t(n.FontAwesomeIcon,{attrs:{icon:"grip-lines-vertical"}}),e._v(" "),t("div",{ref:"draggable",staticClass:"interaction-area",class:{"cursor-grab":!n.isDragging,"cursor-grabbing":n.isDragging}})],1),e._v(" "),t("div",{staticClass:"flex-fill"}),e._v(" "),e.collapsible?t("div",{staticClass:"cursor-pointer"},[t(n.FontAwesomeIcon,{attrs:{icon:"chevron-right"}}),e._v(" "),t("div",{staticClass:"interaction-area",attrs:{id:"right-collapse"},on:{click:n.toggle}})],1):e._e()]):t("div",{staticClass:"flex-panel-footer d-flex px-2 py-1"},[e.collapsible?t("div",{staticClass:"cursor-pointer"},[t(n.FontAwesomeIcon,{attrs:{icon:"chevron-left"}}),e._v(" "),t("div",{staticClass:"interaction-area",attrs:{id:"left-collapse"},on:{click:n.toggle}})],1):e._e(),e._v(" "),t("div",{staticClass:"flex-fill"}),e._v(" "),t("div",{attrs:{id:"left-drag"}},[t(n.FontAwesomeIcon,{attrs:{icon:"grip-lines-vertical"}}),e._v(" "),t("div",{ref:"draggable",staticClass:"interaction-area",class:{"cursor-grab":!n.isDragging,"cursor-grabbing":n.isDragging}})],1)])],2),e._v(" "),n.isDragging?t("div",{staticClass:"interaction-overlay"}):e._e()]):t("div",["right"===e.side?t("div",{staticClass:"flex-panel-right-expand cursor-pointer px-2 py-1"},[t(n.FontAwesomeIcon,{attrs:{icon:"chevron-left"}}),e._v(" "),t("div",{staticClass:"interaction-area",attrs:{id:"right-expand"},on:{click:n.toggle}})],1):t("div",{staticClass:"flex-panel-left-expand cursor-pointer px-2 py-1"},[t(n.FontAwesomeIcon,{attrs:{icon:"chevron-right"}}),e._v(" "),t("div",{staticClass:"interaction-area",attrs:{id:"left-expand"},on:{click:n.toggle}})],1)])}),[],!1,null,null,null).exports;var Da=n(29705);const Ea={name:"FavoritesButton",props:{query:{type:String,required:!0}},data:()=>({searchKey:"#favorites",toggle:!1}),computed:{...(0,o.rn)(Xe.L,["isAnonymous"]),tooltipText(){return this.isAnonymous?this.l("Log in to Favorite Tools"):this.toggle?this.l("Clear"):this.l("Show favorites")}},watch:{query(){this.toggle=this.query==this.searchKey}},methods:{onFavorites(){this.toggle=!this.toggle,this.toggle?this.$emit("onFavorites",this.searchKey):this.$emit("onFavorites","")}}};const Oa=(0,m.Z)(Ea,(function(){var e=this,t=e._self._c;return t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.noninteractive",modifiers:{hover:!0,top:!0,noninteractive:!0}}],staticClass:"panel-header-button-toolbox",attrs:{size:"sm",variant:"link","aria-label":"Show favorite tools",disabled:e.isAnonymous,title:e.tooltipText},on:{click:e.onFavorites}},[e.toggle?t("icon",{attrs:{icon:["fas","star"]}}):t("icon",{attrs:{icon:["far","star"]}})],1)}),[],!1,null,null,null).exports;const Aa={props:{currentPanelView:{type:String,required:!0},panelView:{type:Object,required:!0}},computed:{title(){return this.panelView.description},icon(){const e=this.panelView.view_type;return this.isSelected?"check":Ma.oe[e]||"eye"},isSelected(){return this.currentPanelView==this.panelView.id},name(){return this.panelView.name}},methods:{onClick(){this.$emit("onSelect",this.panelView)}}};const Ia=(0,m.Z)(Aa,(function(){var e=this,t=e._self._c;return t("b-dropdown-item",{staticClass:"ml-1",attrs:{title:e.title,"data-panel-id":e.panelView.id,active:e.isSelected},on:{click:e.onClick}},[t("span",{class:["fa",`fa-${e.icon}`],attrs:{"fixed-width":""}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(e.name))])])}),[],!1,null,null,null).exports,Pa=[{type:"ontology",title:"...by Ontology"},{type:"activity",title:"...for Activity"},{type:"publication",title:"...from Publication"},{type:"training",title:"...for Training"}],Ra={components:{PanelViewMenuItem:Ia},props:{panelViews:{type:Object},currentPanelView:{type:String},showAdvanced:{type:Boolean,default:!1},storeLoading:{type:Boolean,default:!1}},computed:{defaultPanelView(){return this.panelViewsOfType("default")[0]},groupedPanelViews(){const e=[];for(const t of Pa){const n=t.type,i=this.panelViewsOfType(n);i.length>0&&e.push({type:n,title:t.title,panelViews:i})}return e},ungroupedPanelViews(){return this.panelViewsOfType("generic")}},methods:{updatePanelView(e){this.$emit("updatePanelView",e.id)},panelViewsOfType(e){const t=[];for(const n in this.panelViews){const i=this.panelViews[n];i.view_type==e&&t.push(i)}return t}}};const ja=(0,m.Z)(Ra,(function(){var e=this,t=e._self._c;return e.showAdvanced?t("b-button",{staticClass:"w-100",attrs:{variant:"link",size:"sm"},on:{click:function(t){return e.$emit("update:show-advanced",!e.showAdvanced)}}},[e._t("panel-view-selector"),t("span",{staticClass:"sr-only"},[e._v("Close advanced tool search menu")])],2):t("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.noninteractive",modifiers:{hover:!0,top:!0,noninteractive:!0}}],staticClass:"tool-panel-dropdown w-100",attrs:{right:"",block:"","no-caret":"",disabled:e.storeLoading,title:e.storeLoading?"Loading panel view":"Show panel options",variant:"link","toggle-class":"text-decoration-none",role:"menu","aria-label":"View all tool panel configurations",size:"sm"},scopedSlots:e._u([{key:"button-content",fn:function(){return[e._t("panel-view-selector"),t("span",{staticClass:"sr-only"},[e._v("View all tool panel configurations")])]},proxy:!0}],null,!0)},[e._v(" "),t("PanelViewMenuItem",{attrs:{"current-panel-view":e.currentPanelView,"panel-view":e.defaultPanelView},on:{onSelect:e.updatePanelView}}),e._v(" "),e._l(e.groupedPanelViews,(function(n){return t("b-dropdown-group",{key:n.type,attrs:{id:n.type},scopedSlots:e._u([{key:"header",fn:function(){return[t("small",{staticClass:"font-weight-bold"},[e._v(e._s(n.title))])]},proxy:!0}],null,!0)},[e._v(" "),e._l(n.panelViews,(function(n,i){return t("PanelViewMenuItem",{key:i,attrs:{"current-panel-view":e.currentPanelView,"panel-view":n},on:{onSelect:e.updatePanelView}})}))],2)})),e._v(" "),e.ungroupedPanelViews.length>0?t("b-dropdown-divider"):e._e(),e._v(" "),e._l(e.ungroupedPanelViews,(function(n,i){return t("PanelViewMenuItem",{key:i,attrs:{"current-panel-view":e.currentPanelView,"panel-view":n},on:{onSelect:e.updatePanelView}})}))],2)}),[],!1,null,null,null).exports;const Ya=(0,a.defineComponent)({__name:"ToolSearch",props:{currentPanelView:{type:String,required:!0},enableAdvanced:{type:Boolean,default:!1},placeholder:{type:String,default:"search tools"},query:{type:String,default:null},queryPending:{type:Boolean,default:!1},showAdvanced:{type:Boolean,default:!1},toolsList:{type:Array,required:!0},currentPanel:{type:Object,required:!0}},emits:["update:show-advanced","onResults","onQuery"],setup(e,{emit:t}){const i=e,o=(0,Nn.tv)(),s={exact:5,startsWith:4,name:3,description:2,combined:1,wordMatch:0},r=["#favs","#favorites","#favourites"],d=(0,a.ref)(void 0),c=(0,a.computed)({get:()=>null!==i.query?i.query:"",set:e=>{v(e)}}),u=(0,a.computed)({get:()=>i.showAdvanced,set:e=>{t("update:show-advanced",e)}}),h=(0,a.computed)((()=>({name:{placeholder:"name",type:String,handler:(0,ln.r3)("name"),menuItem:!0},section:{placeholder:"section",type:String,handler:(0,ln.r3)("section"),datalist:m,menuItem:!0},ontology:{placeholder:"EDAM ontology",type:String,handler:(0,ln.r3)("ontology"),datalist:_,menuItem:!0},id:{placeholder:"id",type:String,handler:(0,ln.r3)("id"),menuItem:!0},owner:{placeholder:"repository owner",type:String,handler:(0,ln.r3)("owner"),menuItem:!0},help:{placeholder:"help text",type:String,handler:(0,ln.r3)("help"),menuItem:!0}}))),p=(0,a.computed)((()=>new ln.ZP(h.value))),f=(0,Da.n)(),m=f.sectionDatalist("default").map((e=>e.text)),_=f.sectionDatalist("ontology:edam_topics").concat(f.sectionDatalist("ontology:edam_operations"));function v(e){t("onQuery",e),e&&e.length>=3?r.includes(e)?g({type:"favoriteTools"}):g({type:"searchToolsByKeys",payload:{tools:i.toolsList,keys:s,query:e,panelView:i.currentPanelView,currentPanel:i.currentPanel}}):g({type:"clearFilter"})}function g(e){var t;null===(t=d.value)||void 0===t||t.postMessage(e)}return(0,a.onMounted)((()=>{d.value=new Worker(new URL(n.p+n.u(658),n.b));const e=(0,l.Bz)(),o=null==e?void 0:e.user.getFavorites().tools;d.value.onmessage=({data:e})=>{const{type:n,payload:a,sectioned:s,query:r,closestTerm:l}=e;"searchToolsByKeysResult"===n&&r===i.query?t("onResults",a,s,l):"clearFilterResult"===n?t("onResults",null,null,null):"favoriteToolsResult"===n&&t("onResults",o,null,null)}})),(0,a.onUnmounted)((()=>{var e;null===(e=d.value)||void 0===e||e.terminate()})),{__sfc:!0,router:o,KEYS:s,FAVORITES:r,MIN_QUERY_LENGTH:3,props:i,emit:t,searchWorker:d,localFilterText:c,propShowAdvanced:u,validFilters:h,ToolFilters:p,toolStore:f,sectionNames:m,ontologyList:_,checkQuery:v,post:g,onAdvancedSearch:function(e){o.push({path:"/tools/list",query:e})},DelayedInput:Z,FilterMenu:ci}}}),Ha=Ya;const Na=(0,m.Z)(Ha,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.props.enableAdvanced?t(n.FilterMenu,{class:!n.propShowAdvanced&&"mb-3",attrs:{name:"Tools",placeholder:n.props.placeholder,"debounce-delay":200,"filter-class":n.ToolFilters,"filter-text":n.localFilterText,"has-help":"",loading:n.props.queryPending,"show-advanced":n.propShowAdvanced,"menu-type":"separate"},on:{"update:filterText":function(e){n.localFilterText=e},"update:filter-text":function(e){n.localFilterText=e},"update:showAdvanced":function(e){n.propShowAdvanced=e},"update:show-advanced":function(e){n.propShowAdvanced=e},"on-search":n.onAdvancedSearch},scopedSlots:e._u([{key:"menu-help-text",fn:function(){return[t("div",[t("p",[e._v("\n                    You can use this Advanced Tool Search Panel to find tools by applying search filters, with the\n                    results showing up in the center panel.\n                ")]),e._v(" "),t("p",[t("i",[e._v("\n                        (Clicking on the Section, Repo or Owner labels in the Search Results will activate the\n                        according filter)\n                    ")])]),e._v(" "),t("p",[e._v("The available tool search filters are:")]),e._v(" "),t("dl",[t("dt",[t("code",[e._v("name")])]),e._v(" "),t("dd",[e._v("The tool name (stored as tool.name + tool.description in the XML)")]),e._v(" "),t("dt",[t("code",[e._v("section")])]),e._v(" "),t("dd",[e._v("The tool section is based on the default tool panel view")]),e._v(" "),t("dt",[t("code",[e._v("ontology")])]),e._v(" "),t("dd",[e._v("\n                        This is the EDAM ontology term that is associated with the tool. Example inputs:\n                        "),t("i",[e._v('"topic_3174"')]),e._v(" or "),t("i",[e._v('"operation_0324"')])]),e._v(" "),t("dt",[t("code",[e._v("id")])]),e._v(" "),t("dd",[e._v("The tool id (taken from its XML)")]),e._v(" "),t("dt",[t("code",[e._v("owner")])]),e._v(" "),t("dd",[e._v("\n                        For the tools that have been installed from the\n                        "),t("a",{attrs:{href:"https://toolshed.g2.bx.psu.edu/",target:"_blank"}},[e._v("ToolShed")]),e._v("\n                        , this "),t("i",[e._v("owner")]),e._v(" filter allows you to search for tools from a specific ToolShed\n                        repository "),t("b",[e._v("owner")]),e._v(".\n                    ")]),e._v(" "),t("dt",[t("code",[e._v("help text")])]),e._v(" "),t("dd",[e._v("\n                        This is like a keyword search: you can search for keywords that might exist in a tool's help\n                        text. An example input:\n                        "),t("i",[e._v('"genome, RNA, minimap"')])])])])]},proxy:!0}],null,!1,4164168107)}):t(n.DelayedInput,{staticClass:"mb-3",attrs:{query:n.props.query,delay:200,loading:e.queryPending,placeholder:e.placeholder},on:{change:n.checkQuery}})],1)}),[],!1,null,null,null).exports;const Fa=function(e){const t=document.createElement("p");t.textContent=e,t.setAttribute("role","alert"),document.body.appendChild(t),setTimeout((function(){document.body.removeChild(t)}),2e3)};a.default.use(d.ZPm);const Ba={name:"Tool",props:{tool:{type:Object,required:!0},operationTitle:{type:String,default:""},operationIcon:{type:String,default:""},hideName:{type:Boolean,default:!1},toolKey:{type:String,default:""}},computed:{targetClass(){return this.toolKey?`tool-menu-item-${this.tool[this.toolKey]} title-link cursor-pointer`:"title-link cursor-pointer"}},methods:{onClick(e){Fa(`${this.tool.name} selected from panel`),this.$emit("onClick",this.tool,e)},onOperation(e){Fa(`${this.tool.name} operation selected from panel`),this.$emit("onOperation",this.tool,e)}}};const $a=(0,m.Z)(Ba,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolTitle"},[e.tool.disabled?t("a",{staticClass:"title-link name text-muted",attrs:{"data-tool-id":e.tool.id}},[e.hideName?e._e():t("span",[e._v(e._s(e.tool.name))]),e._v(" "),t("span",{staticClass:"description"},[e._v(e._s(e.tool.description))])]):t("a",{class:e.targetClass,attrs:{"data-tool-id":e.tool.id,href:e.tool.link,target:e.tool.target},on:{click:e.onClick}},[e.tool.logo?t("img",{staticClass:"logo",attrs:{src:e.tool.logo,alt:e.tool.name}}):e._e(),e._v(" "),t("span",{staticClass:"labels"},e._l(e.tool.labels,(function(n,i){return t("span",{key:i,class:["badge","badge-primary",`badge-${n}`]},[e._v("\n                "+e._s(n)+"\n            ")])})),0),e._v(" "),e.hideName?e._e():t("span",{staticClass:"name font-weight-bold"},[e._v(e._s(e.tool.name))]),e._v(" "),t("span",{staticClass:"description"},[e._v(e._s(e.tool.description))]),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["operation","float-right",e.operationIcon],attrs:{title:e.operationTitle},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onOperation.apply(null,arguments)}}})])])}),[],!1,null,"6763b4e0",null).exports;u.vI.add(h.Xjp);const za={components:{FontAwesomeIcon:p.GN},props:{links:{type:Object,default:()=>({})}},computed:{link(){const e=Object.values(this.links||{});return e.length>0?e[0]:null}}};const Wa=(0,m.Z)(za,(function(){var e=this,t=e._self._c;return e.link?t("span",{staticClass:"tool-panel-links"},[t("a",{staticStyle:{display:"inline"},attrs:{href:e.link,target:"_blank"}},[t("FontAwesomeIcon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Link",icon:"external-link-alt"}}),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("Link")])],1)]):e._e()}),[],!1,null,null,null).exports,Ua={components:{ToolPanelLinks:Wa},props:{definition:{type:Object,required:!0}},computed:{description(){return this.definition.description}}};const Va=(0,m.Z)(Ua,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.topright.hover.noninteractive",modifiers:{topright:!0,hover:!0,noninteractive:!0}}],staticClass:"tool-panel-label",attrs:{tabindex:"0",title:e.description}},[e._v("\n    "+e._s(e.definition.text)+"\n    "),t("ToolPanelLinks",{attrs:{links:e.definition.links}})],1)}),[],!1,null,"9b7407e4",null).exports,qa=(0,a.defineComponent)({__name:"ToolSection",props:{category:{type:Object,required:!0},queryFilter:{type:String,default:""},disableFilter:{type:Boolean},hideName:{type:Boolean},operationTitle:{type:String,default:""},operationIcon:{type:String,default:""},toolKey:{type:String,default:""},sectionName:{type:String,default:"default"},expanded:{type:Boolean,default:!1},sortItems:{type:Boolean,default:!0}},emits:["onClick","onOperation"],setup(e,{emit:t}){const n=e,i=(0,rn.v1O)("open-tool-section"),{config:o,isConfigLoaded:s}=(0,c.Z)(),r=(0,Da.n)(),l=(0,a.computed)((()=>void 0!==n.category.elems&&n.category.elems.length>0?n.category.elems:void 0!==n.category.tools&&n.category.tools.length>0?n.category.tools.map((e=>{const t=r.getToolForId(e);return t||"string"==typeof e?t:e})):[])),d=(0,a.computed)((()=>n.category.title||n.category.name)),u=(0,a.computed)((()=>void 0!==n.category.tools||void 0!==n.category.elems)),h=(0,a.computed)((()=>l.value.length>0)),p=(0,a.computed)((()=>n.category.description)),f=(0,a.computed)((()=>n.category.links||{})),m=(0,a.ref)(n.expanded||g()),_=(0,a.computed)((()=>{if(g()||!s.value||!0!==o.value.toolbox_auto_sort||!0!==n.sortItems||l.value.some((e=>void 0!==e.text&&""!==e.text)))return Object.entries(l.value);{const e=[...l.value].sort(((e,t)=>{const n=e.name.toLowerCase(),i=t.name.toLowerCase();return n>i?1:n<i?-1:0}));return Object.entries(e)}}));function v(e){var t;u.value&&e==(null===(t=n.category)||void 0===t?void 0:t.id)&&y(!0)}function g(){return!n.disableFilter&&!!n.queryFilter}function y(e=!m.value){m.value=e}return(0,a.watch)((()=>n.queryFilter),(()=>{m.value=g()})),(0,a.watch)((()=>m.value),((e,t)=>{if(e!==t){const t=e?"opened":"closed";Fa(`${d.value} tools menu ${t}`)}})),(0,a.onMounted)((()=>{i.on(v)})),(0,a.onUnmounted)((()=>{i.off(v)})),{__sfc:!0,emit:t,eventBus:i,props:n,config:o,isConfigLoaded:s,toolStore:r,elems:l,name:d,isSection:u,hasElements:h,title:p,links:f,opened:m,sortedElements:_,openToolSection:v,checkFilter:g,onClick:function(e,n){t("onClick",e,n)},onOperation:function(e,n){t("onOperation",e,n)},toggleMenu:y,Tool:$a,ToolPanelLabel:Va,ToolPanelLinks:Wa}}}),Za=qa;const Ga=(0,m.Z)(Za,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.isSection&&n.hasElements?t("div",{staticClass:"tool-panel-section"},[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.topright.hover.noninteractive",modifiers:{topright:!0,hover:!0,noninteractive:!0}}],class:["toolSectionTitle",`tool-menu-section-${e.sectionName}`],attrs:{title:n.title}},[t("a",{staticClass:"title-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){return n.toggleMenu()}}},[t("span",{staticClass:"name"},[e._v("\n                "+e._s(n.name)+"\n            ")]),e._v(" "),t(n.ToolPanelLinks,{attrs:{links:n.links}})],1)]),e._v(" "),t("transition",{attrs:{name:"slide"}},[n.opened?t("div",{attrs:{"data-description":"opened tool panel section"}},[e._l(n.sortedElements,(function([i,o]){return[e.category.text||"ToolSectionLabel"===o.model_class?t(n.ToolPanelLabel,{key:i,attrs:{definition:o}}):t(n.Tool,{key:i,staticClass:"ml-2",attrs:{tool:o,"tool-key":e.toolKey,"hide-name":e.hideName,"operation-title":e.operationTitle,"operation-icon":e.operationIcon},on:{onOperation:n.onOperation,onClick:n.onClick}})]}))],2):e._e()])],1):t("div",[e.category.text?t(n.ToolPanelLabel,{attrs:{definition:e.category}}):t(n.Tool,{attrs:{tool:e.category,"hide-name":e.hideName,"operation-title":e.operationTitle,"operation-icon":e.operationIcon},on:{onOperation:n.onOperation,onClick:n.onClick}})],1)}),[],!1,null,"fb01e238",null).exports;const Ja=(0,a.defineComponent)({__name:"UploadButton",props:{title:{default:"Download from URL or upload files from disk"}},setup(e){const t=e;u.vI.add(h.cf$);const{openGlobalUploadModal:n}=(0,_a.N)(),{percentage:i,status:s}=(0,o.Jk)(va());(0,a.onMounted)((()=>{"upload1"==ga.Z.get("tool_id")&&n()}));const r=(0,a.computed)((()=>(0,Ee.ZP)(t.title)));return{__sfc:!0,props:t,openGlobalUploadModal:n,percentage:i,status:s,localizedTitle:r,showUploadDialog:function(){n()},FontAwesomeIcon:p.GN}}});const Ka=(0,m.Z)(Ja,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.bottom",modifiers:{hover:!0,noninteractive:!0,bottom:!0}}],staticClass:"upload-button",attrs:{id:"activity-upload","aria-label":n.localizedTitle,title:n.localizedTitle,size:"sm"},on:{click:n.showUploadDialog}},[t("div",{staticClass:"progress"},[t("div",{staticClass:"progress-bar progress-bar-notransition",class:`progress-bar-${n.status}`,style:{width:`${n.percentage}%`}})]),e._v(" "),t("span",{staticClass:"position-relative"},[t(n.FontAwesomeIcon,{staticClass:"mr-1",attrs:{icon:"upload"}}),e._v(" "),t("b",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Upload Data")])],1)])}),[],!1,null,null,null).exports,Xa=(0,a.defineComponent)({__name:"ToolBox",props:{workflow:{type:Boolean,default:!1},panelView:{type:String,required:!0},showAdvanced:{type:Boolean,default:!1,required:!0},panelQuery:{type:String,required:!0},editorWorkflows:{type:Array,default:null},dataManagers:{type:Array,default:null},moduleSections:{type:Array,default:null}},emits:["update:show-advanced","update:panel-query","onInsertTool","onInsertModule","onInsertWorkflow","onInsertWorkflowSteps"],setup(e,{emit:t}){const n=e,i=["expression_tools"],{openGlobalUploadModal:s}=(0,_a.N)(),r=(0,Nn.tv)();u.vI.add(zo.Md,zo.Aq);const d=(0,a.ref)(null),c=(0,a.ref)(!1),h=(0,a.ref)(n.workflow),f=(0,a.ref)([]),m=(0,a.ref)(null),_=(0,a.ref)(""),v=(0,a.ref)(""),y=(0,a.ref)(null),b=(0,Da.n)(),w=(0,a.computed)({get:()=>n.showAdvanced,set:e=>{t("update:show-advanced",e)}}),k=(0,a.computed)({get:()=>n.panelQuery,set:e=>{c.value=!0,t("update:panel-query",e)}}),{currentPanel:C}=(0,o.Jk)(b),x=(0,a.computed)((()=>f.value.length>0)),S=(0,a.computed)((()=>k.value&&k.value.length<3)),M=(0,a.computed)((()=>k.value&&1!=c.value)),T=(0,a.computed)((()=>n.workflow&&n.dataManagers&&n.dataManagers.length>0)),L=(0,a.computed)((()=>({name:(0,Ee.ZP)("Data Managers"),elems:n.dataManagers}))),D=(0,a.computed)((()=>b.toolsById&&Object.keys(b.toolsById).length>0?(0,Ma.uW)(b.toolsById,n.workflow,n.workflow?[]:i):{})),E=(0,a.computed)((()=>{const e=Object.keys(D.value),t=(0,Ma.eY)(e,C.value);return(0,Ma.L$)(t,e,n.workflow?[]:i)})),O=(0,a.computed)((()=>Object.values(D.value))),A=(0,a.computed)((()=>x.value?h.value?m.value:(0,Ma.FW)(D.value,f.value):E.value)),I=(0,a.computed)((()=>Object.keys(A.value||{}))),P=(0,a.computed)((()=>{const e=(0,l.Bz)(),t=e&&e.config.stored_workflow_menu_entries;if(t){const e=[];n.workflow||e.push({title:(0,Ee.ZP)("All workflows"),href:`${(0,g.getAppRoot)()}workflows/list`,id:"list"});const i=[...t.map((e=>({id:e.id,title:e.name,href:`${(0,g.getAppRoot)()}workflows/run?id=${e.id}`})))];return e.concat(i)}return[]})),R=(0,a.computed)((()=>n.workflow&&n.editorWorkflows.length>0?{name:(0,Ee.ZP)("Workflows"),elems:n.workflow&&n.editorWorkflows}:null));function j(){_.value=h.value?(0,Ee.ZP)("Hide Sections"):(0,Ee.ZP)("Show Sections"),v.value=h.value?"fa-eye-slash":"fa-eye"}return{__sfc:!0,SECTION_IDS_TO_EXCLUDE:i,openGlobalUploadModal:s,router:r,emit:t,props:n,queryFilter:d,queryPending:c,showSections:h,results:f,resultPanel:m,buttonText:_,buttonIcon:v,closestTerm:y,toolStore:b,propShowAdvanced:w,query:k,currentPanel:C,hasResults:x,queryTooShort:S,queryFinished:M,hasDataManagerSection:T,dataManagerSection:L,localToolsById:D,localSectionsById:E,toolsList:O,localPanel:A,sectionIds:I,favWorkflows:P,workflowSection:R,onInsertModule:function(e,n){n.preventDefault(),t("onInsertModule",e.name,e.title)},onInsertWorkflow:function(e,n){n.preventDefault(),t("onInsertWorkflow",e.latest_id,e.name)},onInsertWorkflowSteps:function(e){t("onInsertWorkflowSteps",e.id,e.step_count)},onToolClick:function(e,i){if(n.workflow)i.preventDefault(),t("onInsertTool",e.id,e.name);else if("upload1"===e.id)i.preventDefault(),s();else if("regular"===e.form_style){i.preventDefault();const t=e.id;r.push(`/?tool_id=${encodeURIComponent(t)}&version=latest`)}},onResults:function(e,t,n=null){null!==e&&e.length>0?(f.value=e,m.value=t,null===t&&(h.value=!1)):(f.value=[],m.value=null),y.value=n,d.value=x.value?k.value:null,j(),c.value=!1},onToggle:function(){h.value=!h.value,j()},setButtonText:j,FontAwesomeIcon:p.GN,localize:Ee.ZP,ToolSearch:Na,ToolSection:Ga,UploadButton:Ka}}}),Qa=Xa;const es=(0,m.Z)(Qa,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"unified-panel",attrs:{"data-description":"panel toolbox"}},[t("div",{staticClass:"unified-panel-controls"},[t(n.ToolSearch,{attrs:{"enable-advanced":!n.props.workflow,"current-panel-view":n.props.panelView||"",placeholder:n.localize("search tools"),"show-advanced":n.propShowAdvanced,"tools-list":n.toolsList,"current-panel":n.localSectionsById,query:n.query,"query-pending":n.queryPending},on:{"update:showAdvanced":function(e){n.propShowAdvanced=e},"update:show-advanced":function(e){n.propShowAdvanced=e},onQuery:e=>n.query=e,onResults:n.onResults}}),e._v(" "),n.propShowAdvanced?e._e():t("section",[t(n.UploadButton),e._v(" "),n.hasResults&&n.resultPanel?t("div",{staticClass:"pb-2"},[t("b-button",{staticClass:"w-100",attrs:{size:"sm"},on:{click:n.onToggle}},[t(n.FontAwesomeIcon,{attrs:{icon:n.buttonIcon}}),e._v(" "),t("span",{staticClass:"mr-1"},[e._v(e._s(n.buttonText))])],1)],1):n.queryTooShort?t("div",{staticClass:"pb-2"},[t("b-badge",{staticClass:"alert-danger w-100"},[e._v("Search string too short!")])],1):n.queryFinished&&!n.hasResults?t("div",{staticClass:"pb-2"},[t("b-badge",{staticClass:"alert-danger w-100"},[e._v("No results found!")])],1):e._e(),e._v(" "),n.closestTerm?t("div",{staticClass:"pb-2"},[t("b-badge",{staticClass:"alert-danger w-100"},[e._v("\n                    Did you mean:\n                    "),t("i",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){n.query=n.closestTerm}}},[e._v(e._s(n.closestTerm))])]),e._v("\n                    ?\n                ")])],1):e._e()],1)],1),e._v(" "),n.propShowAdvanced?e._e():t("div",{staticClass:"unified-panel-body"},[t("div",{staticClass:"toolMenuContainer"},[n.localPanel?t("div",{staticClass:"toolMenu"},[n.props.workflow?t("div",e._l(e.moduleSections,(function(e){return t(n.ToolSection,{key:e.name,attrs:{"hide-name":!0,category:e,"tool-key":"name","section-name":e.name,"query-filter":n.queryFilter||void 0,"disable-filter":!0},on:{onClick:n.onInsertModule}})})),1):e._e(),e._v(" "),n.hasDataManagerSection?t(n.ToolSection,{attrs:{category:n.dataManagerSection,"query-filter":n.queryFilter||void 0,"disable-filter":!0},on:{onClick:n.onToolClick}}):e._e(),e._v(" "),e._l(n.sectionIds,(function(i,o){return t("div",{key:o},[n.localPanel[i]?t(n.ToolSection,{attrs:{category:n.localPanel[i]||{},"query-filter":n.queryFilter||void 0},on:{onClick:n.onToolClick}}):e._e()],1)}))],2):e._e(),e._v(" "),n.props.workflow&&n.workflowSection?t(n.ToolSection,{key:n.workflowSection.name,attrs:{category:n.workflowSection,"section-name":"workflows","sort-items":!1,"operation-icon":"fa fa-files-o","operation-title":"Insert individual steps.","query-filter":n.queryFilter||void 0,"disable-filter":!0},on:{onClick:n.onInsertWorkflow,onOperation:n.onInsertWorkflowSteps}}):n.favWorkflows.length>0?t("div",[t(n.ToolSection,{attrs:{category:{text:"Workflows"}}}),e._v(" "),t("div",{staticClass:"toolSectionBody",attrs:{id:"internal-workflows"}},[t("div",{staticClass:"toolSectionBg"}),e._v(" "),e._l(n.favWorkflows,(function(i){return t("div",{key:i.id,staticClass:"toolTitle"},[t("a",{staticClass:"title-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){return n.router.push(i.href)}}},[e._v(e._s(i.title))])])}))],2)],1):e._e()],1)])])}),[],!1,null,"c371157c",null).exports;var ts=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ns=(0,a.defineComponent)({__name:"ToolPanel",props:{workflow:{type:Boolean,default:!1},editorWorkflows:{type:Array,default:null},dataManagers:{type:Array,default:null},moduleSections:{type:Array,default:null}},emits:["onInsertTool","onInsertModule","onInsertWorkflow","onInsertWorkflowSteps"],setup(e,{emit:t}){const n=e;u.vI.add(h.eW2);const i=(0,a.ref)(!1),s=(0,Da.n)(),{currentPanelView:r,defaultPanelView:l,isPanelPopulated:d,loading:c,panelViews:f}=(0,o.Jk)(s),m=(0,a.ref)(void 0),_=(0,a.ref)(""),v=(0,a.ref)(!1);(0,a.onMounted)((()=>ts(this,void 0,void 0,(function*(){try{yield s.fetchPanelViews(),yield b()}catch(e){console.error(e)}finally{i.value=!0}})))),(0,a.watch)((()=>r.value),(()=>{_.value=""})),(0,a.watch)((()=>r.value),(e=>ts(this,void 0,void 0,(function*(){!e&&i.value&&(yield b())}))));const g=(0,a.computed)((()=>{var e,t;return v.value?(0,Ee.ZP)("Advanced Tool Search"):c.value&&m.value?(0,Ee.ZP)(m.value):"default"!==r.value&&f.value&&(null===(e=f.value[r.value])||void 0===e?void 0:e.name)?(0,Ee.ZP)(null===(t=f.value[r.value])||void 0===t?void 0:t.name):(0,Ee.ZP)("Tools")})),y=(0,a.computed)((()=>{var e,t;if(v.value)return"search";if("default"!==r.value&&f.value&&"string"==typeof(null===(e=f.value[r.value])||void 0===e?void 0:e.view_type)){const e=null===(t=f.value[r.value])||void 0===t?void 0:t.view_type;return e?Ma.oe[e]:null}return null}));function b(){return ts(this,void 0,void 0,(function*(){try{yield s.fetchTools(),yield s.initCurrentPanelView(l.value)}catch(e){console.error("ToolPanel - Intialize error:",e)}}))}return{__sfc:!0,props:n,emit:t,arePanelsFetched:i,toolStore:s,currentPanelView:r,defaultPanelView:l,isPanelPopulated:d,loading:c,panelViews:f,loadingView:m,query:_,showAdvanced:v,toolPanelHeader:g,viewIcon:y,initializeTools:b,updatePanelView:function(e){var t;return ts(this,void 0,void 0,(function*(){m.value=null===(t=f.value[e])||void 0===t?void 0:t.name,yield s.setCurrentPanelView(e),m.value=void 0}))},onInsertTool:function(e,n){t("onInsertTool",e,n)},onInsertModule:function(e,n){t("onInsertModule",e,n)},onInsertWorkflow:function(e,n){t("onInsertWorkflow",e,n)},onInsertWorkflowSteps:function(e,n){t("onInsertWorkflowSteps",e,n)},FontAwesomeIcon:p.GN,LoadingSpan:z.Z,FavoritesButton:Oa,PanelViewMenu:ja,ToolBox:es,Heading:Dt}}}),is=ns;const os=(0,m.Z)(is,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.arePanelsFetched?t("div",{staticClass:"unified-panel",attrs:{"aria-labelledby":"toolbox-heading"}},[t("div",{attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner mx-3 my-2 d-flex justify-content-between"},[n.panelViews&&Object.keys(n.panelViews).length>1?t(n.PanelViewMenu,{attrs:{"panel-views":n.panelViews,"current-panel-view":n.currentPanelView,"show-advanced":n.showAdvanced,"store-loading":n.loading},on:{"update:showAdvanced":function(e){n.showAdvanced=e},"update:show-advanced":function(e){n.showAdvanced=e},updatePanelView:n.updatePanelView},scopedSlots:e._u([{key:"panel-view-selector",fn:function(){return[t("div",{staticClass:"d-flex justify-content-between panel-view-selector"},[t("div",[n.viewIcon&&!n.loading?t("span",{class:["fas",`fa-${n.viewIcon}`,"mr-1"],attrs:{"data-description":"panel view header icon"}}):e._e(),e._v(" "),t(n.Heading,{class:!n.showAdvanced&&"Tools"!==n.toolPanelHeader&&"font-italic",attrs:{id:"toolbox-heading",h2:"",inline:"",size:"sm"}},[n.loading&&n.loadingView?t("span",[t(n.LoadingSpan,{attrs:{message:n.toolPanelHeader}})],1):t("span",[e._v(e._s(n.toolPanelHeader))])])],1),e._v(" "),n.showAdvanced?e._e():t("div",{staticClass:"panel-header-buttons"},[t(n.FontAwesomeIcon,{attrs:{icon:"caret-down"}})],1)])]},proxy:!0}],null,!1,2857255676)}):e._e(),e._v(" "),n.showAdvanced?e._e():t("div",{staticClass:"panel-header-buttons"},[t(n.FavoritesButton,{attrs:{query:n.query},on:{onFavorites:e=>n.query=e}})],1)],1)]),e._v(" "),n.isPanelPopulated?t(n.ToolBox,{attrs:{workflow:n.props.workflow,"panel-query":n.query,"panel-view":n.currentPanelView,"show-advanced":n.showAdvanced,"editor-workflows":e.editorWorkflows,"data-managers":e.dataManagers,"module-sections":e.moduleSections},on:{"update:panelQuery":function(e){n.query=e},"update:panel-query":function(e){n.query=e},"update:showAdvanced":function(e){n.showAdvanced=e},"update:show-advanced":function(e){n.showAdvanced=e},updatePanelView:n.updatePanelView,onInsertTool:n.onInsertTool,onInsertModule:n.onInsertModule,onInsertWorkflow:n.onInsertWorkflow,onInsertWorkflowSteps:n.onInsertWorkflowSteps}}):t("div",[t("b-badge",{staticClass:"alert-info w-100"},[t(n.LoadingSpan,{attrs:{message:"Loading Toolbox"}})],1)],1)],1):e._e()}),[],!1,null,"408ce150",null).exports;const as="<div>\n<p>This input can be used to filter the workflows displayed.</p>\n\n<p>\n    Text entered here will be searched against workflow names and workflow\n    tags. Additionally, advanced filtering tags can be used to refine the\n    search more precisely. Filtering tags are of the form\n    <code>&lt;tag_name&gt;:&lt;tag_value&gt;</code> or\n    <code>&lt;tag_name&gt;:'&lt;tag_value&gt;'</code>. For instance to\n    search just for RNAseq in the workflow name,\n    <code>name:rnsseq</code> can be used. Notice by default the search is\n    not case-sensitive. If the quoted version of tag is used, the search is\n    case sensitive and only full matches will be returned. So\n    <code>name:'RNAseq'</code> would show only workflows named exactly\n    <code>RNAseq</code>.\n</p>\n\n<p>The available filtering tags are:</p>\n<dl>\n    <dt><code>name</code></dt>\n    <dd>\n        Shows workflows with the given sequence of characters in their names.\n    </dd>\n    <dt><code>tag</code></dt>\n    <dd>\n        Shows workflows with the given workflow tag. You may also click\n        on a tag to filter on that tag directly.\n    </dd>\n    <dt><code>is:published</code></dt>\n    <dd>\n        Shows published workflows.\n    </dd>\n    <dt><code>is:importable</code></dt>\n    <dd>\n        Shows importable workflows (this also means they are URL generated).\n    </dd>\n    <dt><code>is:shared_with_me</code></dt>\n    <dd>\n        Shows workflows shared by another user directly with you.\n    </dd>\n    <dt><code>is:deleted</code></dt>\n    <dd>Shows deleted workflows.</dd>\n</dl>\n</div>",ss={name:{placeholder:"name",type:String,handler:(0,ln.r3)("name"),menuItem:!0},user:{placeholder:"owner",type:String,handler:(0,ln.r3)("user"),menuItem:!1},tag:{placeholder:"tag(s)",type:"MultiTags",handler:(0,ln.r3)("tag","tag",ln._U),menuItem:!0},published:{placeholder:"Filter on published workflows",type:Boolean,boolType:"is",handler:(0,ln.fS)("published","published",ln.AM),menuItem:!0},importable:{placeholder:"Filter on importable workflows",type:Boolean,boolType:"is",handler:(0,ln.fS)("importable","importable",ln.AM),menuItem:!0},shared_with_me:{placeholder:"Filter on workflows shared with me",type:Boolean,boolType:"is",handler:(0,ln.fS)("shared_with_me","shared_with_me",ln.AM),menuItem:!0},deleted:{placeholder:"Filter on deleted workflows",type:Boolean,boolType:"is",handler:(0,ln.fS)("deleted","deleted",ln.AM),menuItem:!0}},rs=new ln.ZP(ss,void 0,!1,!1),ls={...ss,user:{...ss.user,menuItem:!0},published:{...ss.published,default:!0,menuItem:!1},shared_with_me:{...ss.shared_with_me,menuItem:!1},importable:{...ss.importable,menuItem:!1}},ds=new ln.ZP(ls,void 0,!1,!1),cs=(0,a.defineComponent)({__name:"WorkflowBox",setup(e){const t=(0,Nn.tv)();u.vI.add(h.cf$,h.g4A);const n=(0,a.computed)((()=>(0,Xe.L)().isAnonymous));return{__sfc:!0,router:t,isAnonymous:n,onSearch:function(e,n,i){const o="/workflows/list",a=i?{path:o,query:{query:i}}:{path:o};t.push(a)},userTitle:function(e){return 1==n.value?`Log in to ${e}`:e},FontAwesomeIcon:p.GN,helpHtml:as,WorkflowFilters:rs,withPrefix:D.dq,FilterMenu:ci}}});const us=(0,m.Z)(cs,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"unified-panel",attrs:{"aria-labelledby":"workflowbox-heading"}},[t("div",{attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[t("nav",{staticClass:"d-flex justify-content-between mx-3 my-2"},[t("h2",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"m-1 h-sm"},[e._v("Workflows")]),e._v(" "),t("b-button-group",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{"data-description":"create new workflow",size:"sm",variant:"link",title:n.userTitle("Create new workflow"),disabled:n.isAnonymous},on:{click:function(t){return e.$router.push("/workflows/edit")}}},[t("Icon",{attrs:{"fixed-width":"",icon:"plus"}})],1),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{"data-description":"import workflow",size:"sm",variant:"link",title:n.userTitle("Import workflow"),disabled:n.isAnonymous},on:{click:function(t){return e.$router.push("/workflows/import")}}},[t(n.FontAwesomeIcon,{attrs:{icon:"upload"}})],1),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{"data-description":"published workflows",size:"sm",variant:"link",title:"Published workflows"},on:{click:function(t){return e.$router.push("/workflows/list_published")}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-globe"}})],1)],1)],1)])]),e._v(" "),t("div",{staticClass:"unified-panel-controls"},[n.isAnonymous?t("div",[t("b-badge",{staticClass:"alert-info w-100"},[e._v("\n                Please "),t("a",{attrs:{href:n.withPrefix("/login")}},[e._v("log in or register")]),e._v(" to create workflows.\n            ")])],1):t(n.FilterMenu,{attrs:{name:"Workflows","filter-class":n.WorkflowFilters,"has-help":"","menu-type":"standalone"},on:{"on-search":n.onSearch},scopedSlots:e._u([{key:"menu-help-text",fn:function(){return[t("div",{domProps:{innerHTML:e._s(n.helpHtml)}})]},proxy:!0}])})],1)])}),[],!1,null,null,null).exports,hs=(0,a.defineComponent)({__name:"ActivityBar",emits:["dragstart"],setup(e,{emit:t}){const{config:n,isConfigLoaded:i}=(0,c.Z)(),s=(0,Nn.yj)(),r=(0,Xe.L)(),l=(0,Oo.b)(),d=Eo(),{isAnonymous:u}=(0,o.Jk)(r);d.sync();const{activities:h}=(0,o.Jk)(d),p=(0,a.ref)(!1),f=(0,a.ref)(0),m=(0,a.ref)(0),_=(0,a.ref)(null),v=(0,a.ref)(null),g=(0,a.ref)(!1);function y(e){return r.toggledSideBar===e}return{__sfc:!0,config:n,isConfigLoaded:i,route:s,userStore:r,eventStore:l,activityStore:d,isAnonymous:u,emit:t,activities:h,contextMenuVisible:p,contextMenuX:f,contextMenuY:m,dragTarget:_,dragItem:v,isDragging:g,isActiveRoute:function(e){return s.path===e&&y("")},isActiveSideBar:y,onDragEnter:function(e){const n=l.getDragData();n?(_.value=e.target,v.value=function(e){return"dataset"===e.history_content_type?{description:"Displays this dataset.",icon:"fa-file",id:`dataset-${e.id}`,mutable:!0,optional:!0,title:e.name,tooltip:"View your dataset",to:`/datasets/${e.id}/preview`,visible:!0}:"StoredWorkflow"===e.model_class?{description:e.description,icon:"fa-play",id:`workflow-${e.id}`,mutable:!0,optional:!0,title:e.name,tooltip:e.name,to:`/workflows/run?id=${e.id}`,visible:!0}:null}(n),t("dragstart",v.value)):v.value=null},onDragLeave:function(e){if(v.value&&_.value==e.target){const e=v.value.id;h.value=h.value.filter((t=>t.id!==e))}},onDragOver:function(e){const t=e.target.closest(".activity-item");if(t&&v.value){const e=t.id,n=h.value.findIndex((t=>`activity-${t.id}`===e));if(-1!==n){const e=v.value.id,t=h.value[n];if(t&&t.id!==e){const t=h.value.filter((t=>t.id!==e));t.splice(n,0,v.value),h.value=t}}}},onToggleSidebar:function(e){r.toggleSideBar(e)},toggleContextMenu:function(e){e&&!p.value?(e.preventDefault(),p.value=!0,f.value=e.x,m.value=e.y):p.value=!1},draggable:To(),ActivityItem:$o,ActivitySettings:Uo,InteractiveItem:Go,NotificationItem:ma,UploadItem:wa,ContextMenu:xa,FlexPanel:La,ToolPanel:os,WorkflowBox:us}}}),ps=hs;const fs=(0,m.Z)(ps,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"d-flex"},[t("div",{staticClass:"activity-bar d-flex flex-column no-highlight",attrs:{"data-description":"activity bar"},on:{contextmenu:n.toggleContextMenu,dragover:function(e){return e.preventDefault(),n.onDragOver.apply(null,arguments)},dragenter:function(e){return e.preventDefault(),n.onDragEnter.apply(null,arguments)},dragleave:function(e){return e.preventDefault(),n.onDragLeave.apply(null,arguments)}}},[t("b-nav",{staticClass:"flex-nowrap p-1 h-100 vertical-overflow",attrs:{vertical:""}},[t(n.draggable,{class:{"activity-popper-disabled":n.isDragging},attrs:{list:n.activities,"force-fallback":!0,"chosen-class":"activity-chosen-class","drag-class":"activity-drag-class","ghost-class":"activity-chosen-class"},on:{start:function(e){n.isDragging=!0},end:function(e){n.isDragging=!1}}},e._l(n.activities,(function(i,o){return t("div",{key:o},[i.visible?t("div",["upload"===i.id?t(n.UploadItem,{key:i.id,attrs:{id:`activity-${i.id}`,icon:i.icon,title:i.title,tooltip:i.tooltip},on:{click:function(e){return n.onToggleSidebar()}}}):"interactivetools"===i.id?t(n.InteractiveItem,{key:i.id,attrs:{id:`activity-${i.id}`,icon:i.icon,"is-active":n.isActiveRoute(i.to),title:i.title,tooltip:i.tooltip,to:i.to},on:{click:function(e){return n.onToggleSidebar()}}}):["tools","workflows"].includes(i.id)?t(n.ActivityItem,{key:i.id,attrs:{id:`activity-${i.id}`,icon:i.icon,"is-active":n.isActiveSideBar(i.id),title:i.title,tooltip:i.tooltip,to:i.to},on:{click:function(e){return n.onToggleSidebar(i.id)}}}):i.to?t(n.ActivityItem,{key:i.id,attrs:{id:`activity-${i.id}`,icon:i.icon,"is-active":n.isActiveRoute(i.to),title:i.title,tooltip:i.tooltip,to:i.to},on:{click:function(e){return n.onToggleSidebar()}}}):e._e()],1):e._e()])})),0)],1),e._v(" "),t("b-nav",{staticClass:"flex-nowrap p-1",attrs:{vertical:""}},[!n.isAnonymous&&n.isConfigLoaded&&n.config.enable_notification_system?t(n.NotificationItem,{attrs:{id:"activity-notifications",icon:"bell","is-active":n.isActiveRoute("/user/notifications"),title:"Notifications",to:"/user/notifications"},on:{click:function(e){return n.onToggleSidebar()}}}):e._e(),e._v(" "),t(n.ActivityItem,{attrs:{id:"activity-settings",icon:"cog","is-active":n.isActiveRoute("/user"),title:"Settings",tooltip:"Edit preferences",to:"/user"},on:{click:function(e){return n.onToggleSidebar()}}})],1)],1),e._v(" "),n.isActiveSideBar("tools")?t(n.FlexPanel,{key:"tools",attrs:{side:"left",collapsible:!1}},[t(n.ToolPanel)],1):n.isActiveSideBar("workflows")?t(n.FlexPanel,{key:"workflows",attrs:{side:"left",collapsible:!1}},[t(n.WorkflowBox)],1):e._e(),e._v(" "),t(n.ContextMenu,{attrs:{visible:n.contextMenuVisible,x:n.contextMenuX,y:n.contextMenuY},on:{hide:n.toggleContextMenu}},[t(n.ActivitySettings)],1)],1)}),[],!1,null,null,null).exports,ms=(0,a.defineComponent)({__name:"PublishedItem",props:{item:{type:Object,default:null}},setup(e){const t=e,n=(0,a.computed)((()=>{var e,n;const i=null!==(n=null===(e=t.item)||void 0===e?void 0:e.model_class)&&void 0!==n?n:"Item";return"StoredWorkflow"==i?"Workflow":i})),i=(0,a.computed)((()=>"History"===n.value?"Histories":`${n.value}s`)),o=(0,a.computed)((()=>{var e;return`https://secure.gravatar.com/avatar/${null===(e=t.item)||void 0===e?void 0:e.email_hash}?d=identicon`})),s=(0,a.computed)((()=>{var e,n,i,o;return null!==(o=null!==(n=null===(e=t.item)||void 0===e?void 0:e.owner)&&void 0!==n?n:null===(i=t.item)||void 0===i?void 0:i.username)&&void 0!==o?o:"Unavailable"})),r=(0,a.computed)((()=>i.value.toLowerCase())),l=(0,a.computed)((()=>`/${r.value}/list_published?f-username=${s.value}`)),d=(0,a.computed)((()=>`/${r.value}/list_published`)),{showActivityBar:c,showToolbox:u}=So();return{__sfc:!0,props:t,modelTitle:n,plural:i,gravatarSource:o,owner:s,pluralPath:r,publishedByUser:l,urlAll:d,showActivityBar:c,showToolbox:u,ActivityBar:fs,LoadingSpan:z.Z,FlexPanel:La,ToolPanel:os,StatelessTags:G.Z}}});const _s=(0,m.Z)(ms,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"d-flex",attrs:{id:"columns"}},[n.showActivityBar?t(n.ActivityBar):e._e(),e._v(" "),n.showToolbox?t(n.FlexPanel,{attrs:{side:"left"}},[t(n.ToolPanel)],1):e._e(),e._v(" "),t("div",{staticClass:"m-3 w-100 overflow-auto d-flex flex-column",attrs:{id:"center"}},[e._t("default")],2),e._v(" "),t(n.FlexPanel,{attrs:{side:"right"}},[n.modelTitle?t("div",{staticClass:"m-3"},[t("h1",{staticClass:"h-sm"},[e._v("About this "+e._s(n.modelTitle))]),e._v(" "),t("h2",{staticClass:"h-md text-break"},[e._v(e._s(n.props.item?.title??n.props.item?.name))]),e._v(" "),t("img",{attrs:{src:n.gravatarSource,alt:"user avatar"}}),e._v(" "),n.props.item?.tags?t(n.StatelessTags,{staticClass:"tags mt-2",attrs:{value:n.props.item.tags,disabled:""}}):e._e(),e._v(" "),t("br"),e._v(" "),t("h2",{staticClass:"h-sm"},[e._v("Author")]),e._v(" "),t("div",[e._v(e._s(n.owner))]),e._v(" "),t("hr"),e._v(" "),t("h2",{staticClass:"h-sm"},[e._v("Related Pages")]),e._v(" "),t("div",[t("router-link",{attrs:{to:n.urlAll}},[e._v("All published "+e._s(n.plural)+".")])],1),e._v(" "),t("div",[t("router-link",{attrs:{to:n.publishedByUser}},[e._v(" Published "+e._s(n.plural)+" by "+e._s(n.owner)+". ")])],1)],1):t(n.LoadingSpan,{attrs:{message:"Loading item details"}}),e._v(" "),t("div",{staticClass:"flex-fill"})],1)],1)}),[],!1,null,null,null).exports;var vs=n(75118),gs=n(60047);const ys={props:{scopeKey:{type:String,required:!0},getItemKey:{type:Function,required:!0}},data:()=>({items:new Set}),computed:{expandedCount(){return this.items.size}},methods:{isExpanded(e){const t=this.getItemKey(e);return this.items.has(t)},setExpanded(e,t){const n=this.getItemKey(e),i=new Set(this.items);t?i.add(n):i.delete(n),this.items=i},reset(){this.items=new Set}},watch:{scopeKey(e,t){e!==t&&this.reset()},items(e){(0,gs.e)(this.key,e)}},created(){this.key="expanded-history-items";const e=(0,gs.M)(this.key);e&&(this.items=e)},render(){return this.$scopedSlots.default({isExpanded:this.isExpanded,setExpanded:this.setExpanded,collapseAll:this.reset,expandedCount:this.expandedCount})}};var bs=n(87441),ws=n(2746),ks=n(60268);const Cs=a.default.directive("short",(function(e,t){let n=t.value;n.length>80&&(n=`${n.substr(0,80)}...`),e.classList.add("text-break"),e.textContent=n}));var xs=n(34728);const Ss={components:{StatelessTags:G.Z},directives:{short:Cs},props:{name:{type:String,default:null},annotation:{type:String,default:null},showAnnotation:{type:Boolean,default:!0},tags:{type:Array,default:null},writeable:{type:Boolean,default:!0}},data:()=>({editing:!1,localProps:{},textSelected:!1}),computed:{...(0,o.rn)(Xe.L,["isAnonymous"]),editButtonTitle(){return this.isAnonymous?this.l("Log in to Rename History"):this.writeable?this.l("Edit"):this.l("Not Editable")}},methods:{onSave(){this.editing=!1,this.$emit("save",Object.assign({},this.localProps))},onToggle(){this.editing=!this.editing,this.localProps={name:this.name,annotation:this.annotation,tags:this.tags},this.$nextTick((()=>{this.$refs.name&&this.$refs.name.focus()}))},selectText(){this.textSelected?(this.$refs.name.focus(),this.textSelected=!1):(this.$refs.name.select(),this.textSelected=!0)}}};const Ms=(0,m.Z)(Ss,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"m-3 details",attrs:{"data-description":"edit details"}},[t("b-button",{staticClass:"edit-button ml-1 float-right",attrs:{disabled:e.isAnonymous||!e.writeable,"data-description":"editor toggle",size:"sm",variant:"link",title:e.editButtonTitle,pressed:e.editing},on:{click:e.onToggle}},[t("Icon",{attrs:{icon:"pen"}})],1),e._v(" "),e._t("name"),e._v(" "),e.editing?t("div",{staticClass:"mt-3",attrs:{"data-description":"edit form"}},[t("b-input",{ref:"name",staticClass:"mb-2",attrs:{placeholder:"Name",trim:"","max-rows":"4","data-description":"name input"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSave.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onToggle.apply(null,arguments)}],focus:e.selectText,blur:function(t){e.textSelected=!1}},model:{value:e.localProps.name,callback:function(t){e.$set(e.localProps,"name",t)},expression:"localProps.name"}}),e._v(" "),e.showAnnotation?t("b-textarea",{staticClass:"mb-2",attrs:{placeholder:"Annotation (optional)",trim:"","max-rows":"4","data-description":"annotation input"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onToggle.apply(null,arguments)}},model:{value:e.localProps.annotation,callback:function(t){e.$set(e.localProps,"annotation",t)},expression:"localProps.annotation"}}):e._e(),e._v(" "),e.localProps.tags?t("StatelessTags",{staticClass:"mb-3 tags",model:{value:e.localProps.tags,callback:function(t){e.$set(e.localProps,"tags",t)},expression:"localProps.tags"}}):e._e(),e._v(" "),t("b-button",{staticClass:"save-button mb-1",attrs:{"data-description":"editor save button",size:"sm",variant:"primary",disabled:!e.localProps.name},on:{click:e.onSave}},[t("Icon",{attrs:{icon:"save"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Save")])],1),e._v(" "),t("b-button",{staticClass:"cancel-button mb-1",attrs:{"data-description":"editor cancel button",size:"sm",icon:"undo"},on:{click:e.onToggle}},[t("Icon",{attrs:{icon:"undo"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Cancel")])],1)],1):t("div",[e.annotation?t("div",{directives:[{name:"short",rawName:"v-short",value:e.annotation,expression:"annotation"}],staticClass:"mt-2",attrs:{"data-description":"annotation value"}}):e._e(),e._v(" "),e.tags?t("StatelessTags",{staticClass:"tags mt-2",attrs:{value:e.tags,disabled:!0}}):e._e()],1)],2)}),[],!1,null,null,null).exports,Ts={components:{CollectionDescription:xs.Z,DetailsLayout:Ms},directives:{short:Cs},props:{dsc:{type:Object,required:!0},writeable:{type:Boolean,required:!0}},computed:{jobState(){return new ks.G(this.dsc)}}};const Ls=(0,m.Z)(Ts,(function(){var e=this,t=e._self._c;return t("DetailsLayout",{attrs:{name:e.dsc.name,tags:e.dsc.tags,writeable:e.writeable,"show-annotation":!1},on:{save:function(t){return e.$emit("update:dsc",t)}},scopedSlots:e._u([{key:"name",fn:function(){return[t("h2",{directives:[{name:"short",rawName:"v-short",value:e.dsc.name||"Collection",expression:"dsc.name || 'Collection'"}],staticClass:"h-md",attrs:{"data-description":"collection name display"}}),e._v(" "),t("CollectionDescription",{attrs:{"job-state-summary":e.jobState,"collection-type":e.dsc.collection_type,"element-count":e.dsc.element_count,"elements-datatypes":e.dsc.elements_datatypes}})]},proxy:!0}])})}),[],!1,null,null,null).exports;const Ds={props:{historyName:{type:String,required:!0},selectedCollections:{type:Array,required:!0,validate:e=>e.length>0}},computed:{previousName(){const e=this.selectedCollections.length;if(e>1){const t=this.selectedCollections[e-2];return t.name||t.element_identifier}return null}},methods:{back(){const e=this.selectedCollections.slice(0,-1);this.$emit("update:selected-collections",e)},close(){this.$emit("update:selected-collections",[])}}};const Es=(0,m.Z)(Ds,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mx-1 mt-1"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip:hover",value:e.historyName,expression:"historyName",arg:"hover"}],staticClass:"text-left text-decoration-none overflow-hidden text-nowrap w-100",staticStyle:{"text-overflow":"ellipsis"},attrs:{size:"sm",variant:"link"},on:{click:e.close}},[t("icon",{staticClass:"mr-1",attrs:{icon:"angle-double-left","data-description":"back to history"}}),t("span",[e._v("History: "+e._s(e.historyName))])],1),e._v(" "),e.previousName?t("b-button",{staticClass:"text-decoration-none",attrs:{size:"sm",variant:"link"},on:{click:e.back}},[t("span",{staticClass:"fa fa-angle-left mr-1"}),t("span",[e._v(e._s(e.previousName))])]):e._e()],1)}),[],!1,null,null,null).exports;const Os=(0,a.defineComponent)({__name:"CollectionOperations",props:{dsc:null},setup(e){const t=e,n=(0,Nn.tv)(),i=(0,a.computed)((()=>`${(0,g.getAppRoot)()}api/dataset_collections/${t.dsc.id}/download`)),o=(0,a.computed)((()=>"Job"==t.dsc.job_source_type?`/root?job_id=${t.dsc.job_source_id}`:null)),s=(0,a.computed)((()=>"Job"==t.dsc.job_source_type?`/jobs/${t.dsc.job_source_id}/view`:null));return{__sfc:!0,router:n,props:t,downloadUrl:i,rerunUrl:o,showCollectionDetailsUrl:s,onDownload:function(){window.location.href=i.value}}}});const As=(0,m.Z)(Os,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("section",[t("nav",{staticClass:"content-operations d-flex justify-content-between bg-secondary"},[t("b-button-group",[t("b-button",{staticClass:"rounded-0 text-decoration-none",attrs:{title:"Download Collection",size:"sm",variant:"link",href:n.downloadUrl},on:{click:n.onDownload}},[t("Icon",{staticClass:"mr-1",attrs:{icon:"download"}}),e._v(" "),t("span",[e._v("Download")])],1),e._v(" "),n.showCollectionDetailsUrl?t("b-button",{staticClass:"collection-job-details-btn px-1",attrs:{title:"Show Details",size:"sm",variant:"link",href:n.showCollectionDetailsUrl},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.router.push(n.showCollectionDetailsUrl)}}},[t("icon",{attrs:{icon:"info-circle"}}),e._v(" "),t("span",[e._v("Show Details")])],1):e._e(),e._v(" "),n.rerunUrl?t("b-button",{staticClass:"rounded-0 text-decoration-none",attrs:{title:"Rerun job",size:"sm",variant:"link",href:n.rerunUrl},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.router.push(n.rerunUrl)}}},[t("Icon",{staticClass:"mr-1",attrs:{icon:"redo"}}),e._v(" "),t("span",[e._v("Run Job Again")])],1):e._e()],1)],1)])}),[],!1,null,null,null).exports;var Is=n(14143),Ps=n(41203),Rs=n.n(Ps);const js={components:{LoadingSpan:z.Z,VirtualList:Rs()},props:{dataKey:{type:String,default:"id"},offset:{type:Number,default:0},loading:{type:Boolean,default:!1},items:{type:Array,default:null},queryKey:{type:String,default:null}},setup(){const e=(0,a.ref)(null),{height:t}=(0,rn.rBN)(e);return{listing:e,estimatedItemHeight:40,estimatedItemCount:(0,a.computed)((()=>Math.ceil(t.value/40)+20))}},data:()=>({previousStart:void 0}),watch:{queryKey(){this.listing.scrollToOffset(0)}},methods:{onScroll(){const e=this.listing.range.start;this.previousStart!==e&&(this.previousStart=e,this.$emit("scroll",e))},getOffset(){return this.listing?.getOffset()||0}}};const Ys=(0,m.Z)(js,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"listing-layout"},[t("VirtualList",{ref:"listing",staticClass:"listing",attrs:{role:"list","data-key":e.dataKey,offset:e.offset,"data-sources":e.items,"data-component":{},"estimate-size":e.estimatedItemHeight,keeps:e.estimatedItemCount},on:{scroll:e.onScroll},scopedSlots:e._u([{key:"item",fn:function({item:t}){return[e._t("item",null,{item:t,currentOffset:e.getOffset()})]}},{key:"footer",fn:function(){return[e.loading?t("LoadingSpan",{staticClass:"m-2",attrs:{message:"Loading"}}):e._e()]},proxy:!0}],null,!0)})],1)}),[],!1,null,"ae749d58",null).exports;var Hs=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Ns=(0,a.defineComponent)({__name:"CollectionPanel",props:{history:null,selectedCollections:null,showControls:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1}},emits:["view-collection","update:selected-collections"],setup(e,{emit:t}){const n=e,i=(0,ws.P)(),o=(0,a.ref)(0),s=(0,a.computed)((()=>{const e=n.selectedCollections[n.selectedCollections.length-1];if(void 0===e)throw new Error("No collection selected");return e})),r=(0,a.computed)((()=>i.getCollectionElements(s.value,o.value))),l=(0,a.computed)((()=>i.isLoadingCollectionElements(s.value))),d=(0,a.computed)((()=>"job_state_summary"in s.value?s.value.job_state_summary:void 0)),c=(0,a.computed)((()=>{if((0,vs.K)(n.selectedCollections[0]))return n.selectedCollections[0];throw new Error("Root collection must be an HistoryDatasetCollectionAssociation")})),u=(0,a.computed)((()=>s.value==c.value));return(0,a.watch)((()=>n.history),((e,n)=>{e.id!=n.id&&t("update:selected-collections",[])})),(0,a.watch)(d,(()=>{i.loadCollectionElements(s.value)}),{deep:!0}),{__sfc:!0,props:n,collectionElementsStore:i,emit:t,offset:o,dsc:s,collectionElements:r,loading:l,jobState:d,rootCollection:c,isRoot:u,updateDsc:function(e,t){(0,bs.NC)(e,t).then((t=>{Object.keys(t).forEach((n=>{e[n]=t[n]}))}))},getItemKey:function(e){return e.id},onScroll:function(e){o.value=e},onViewDatasetCollectionElement:function(e){return Hs(this,void 0,void 0,(function*(){if(!(0,vs.I)(e))return;const n=Object.assign(Object.assign({},e.object),{name:e.element_identifier,hdca_id:c.value.id});t("view-collection",n)}))},ExpandedItems:ys,CollectionDetails:Ls,CollectionNavigation:Es,CollectionOperations:As,ContentItem:Is.Z,ListingLayout:Ys}}}),Fs=Ns;const Bs=(0,m.Z)(Fs,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.ExpandedItems,{attrs:{"scope-key":n.dsc.id,"get-item-key":n.getItemKey},scopedSlots:e._u([{key:"default",fn:function({isExpanded:i,setExpanded:o}){return[t("section",{staticClass:"dataset-collection-panel w-100 d-flex flex-column"},[t("section",[t(n.CollectionNavigation,e._g({attrs:{"history-name":e.history.name,"selected-collections":e.selectedCollections}},e.$listeners)),e._v(" "),t(n.CollectionDetails,{attrs:{dsc:n.dsc,writeable:n.isRoot},on:{"update:dsc":function(e){return n.updateDsc(n.dsc,e)}}}),e._v(" "),n.isRoot&&e.showControls?t(n.CollectionOperations,{attrs:{dsc:n.dsc}}):e._e()],1),e._v(" "),t("section",{staticClass:"position-relative flex-grow-1 scroller"},[t("div",[t(n.ListingLayout,{attrs:{"data-key":"element_index",items:n.collectionElements,loading:n.loading},on:{scroll:n.onScroll},scopedSlots:e._u([{key:"item",fn:function({item:a}){return[void 0===a.id?t(n.ContentItem,{attrs:{id:a.element_index+1,item:a,"is-placeholder":!0,name:"Loading..."}}):t(n.ContentItem,{attrs:{id:a.element_index+1,item:a.object,name:a.element_identifier,"expand-dataset":i(a),"is-dataset":"hda"==a.element_type,filterable:e.filterable},on:{"update:expand-dataset":function(e){return o(a,e)},"view-collection":function(e){return n.onViewDatasetCollectionElement(a)}}})]}}],null,!0)})],1)])])]}}])})}),[],!1,null,null,null).exports;var $s=n(58494);const zs={props:{scopeKey:{type:String,required:!0},getItemKey:{type:Function,required:!0},filterText:{type:String,required:!0},totalItemsInQuery:{type:Number,required:!1}},data:()=>({items:new Map,showSelection:!1,allSelected:!1}),computed:{selectionSize(){return this.isQuerySelection?this.totalItemsInQuery:this.items.size},isQuerySelection(){return this.allSelected&&this.totalItemsInQuery!==this.items.size},currentFilters(){return $s.G.getFiltersForText(this.filterText)}},methods:{setShowSelection(e){this.showSelection=e},selectAllInCurrentQuery(e=[]){this.selectItems(e),this.allSelected=!0},isSelected(e){if(this.isQuerySelection)return $s.G.testFilters(this.currentFilters,e);const t=this.getItemKey(e);return this.items.has(t)},setSelected(e,t){const n=this.getItemKey(e),i=new Map(this.items);t?i.set(n,e):i.delete(n),this.items=i,this.breakQuerySelection()},selectItems(e=[]){const t=[...this.items.values(),...e].map((e=>[this.getItemKey(e),e]));this.items=new Map(t),this.breakQuerySelection()},breakQuerySelection(){this.allSelected&&this.$emit("query-selection-break"),this.allSelected=!1},reset(){this.items=new Map,this.allSelected=!1},cancelSelection(){this.showSelection=!1}},watch:{scopeKey(e,t){e!==t&&(this.cancelSelection(),this.reset())},selectionSize(e){e>0&&(this.showSelection=!0)},showSelection(e){e||this.reset()},totalItemsInQuery(e,t){this.allSelected&&e!==t&&this.breakQuerySelection()}},render(){return this.$scopedSlots.default({selectedItems:this.items,showSelection:this.showSelection,isQuerySelection:this.isQuerySelection,selectionSize:this.selectionSize,setShowSelection:this.setShowSelection,selectAllInCurrentQuery:this.selectAllInCurrentQuery,selectItems:this.selectItems,isSelected:this.isSelected,setSelected:this.setSelected,resetSelection:this.reset})}};var Ws=n(78670),Us=n(96364),Vs=n(44086),qs=n(54748);var Zs=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Gs=X._.path("/api/object_stores").method("get").create();const Js=X._.path("/api/object_stores/{object_store_id}").method("get").create();var Ks=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Xs=(0,a.defineComponent)({__name:"ShowSelectedObjectStore",props:{forWhat:null,preferredObjectStoreId:null},setup(e){const t=e,n=(0,a.ref)(null),i=(0,a.ref)(!0),o=(0,a.ref)(null);function s(){return Ks(this,void 0,void 0,(function*(){i.value=!0;try{n.value=yield function(e){return Zs(this,void 0,void 0,(function*(){const{data:t}=yield Js({object_store_id:e});return t}))}(t.preferredObjectStoreId)}catch(e){o.value=(0,y.a)(e)}finally{i.value=!1}}))}(0,a.watch)((()=>t.preferredObjectStoreId),(()=>Ks(this,void 0,void 0,(function*(){s()})))),s();return{__sfc:!0,props:t,objectStore:n,loading:i,error:o,fetch:s,loadingMessage:"Loading object store details",LoadingSpan:z.Z,DescribeObjectStore:Pe}}}),Qs=Xs;const er=(0,m.Z)(Qs,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.loading?t(n.LoadingSpan,{attrs:{message:e._f("localize")(n.loadingMessage)}}):null!=n.objectStore?t(n.DescribeObjectStore,{attrs:{what:e.forWhat,"storage-info":n.objectStore}}):n.error?t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(n.error))]):e._e()],1)}),[],!1,null,null,null).exports,tr={components:{ShowSelectedObjectStore:er},props:{historyId:{type:String,required:!0},historyPreferredObjectStoreId:{type:String,default:null},user:{type:Object,required:!0}},computed:{preferredObjectStoreId(){let e=this.historyPreferredObjectStoreId;return e||(e=this.user.preferred_object_store_id),e}}};const nr=(0,m.Z)(tr,(function(){var e=this,t=e._self._c;return t("b-popover",{attrs:{target:`history-storage-${e.historyId}`,triggers:"hover",placement:"bottomleft"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Preferred Target Object Store")]},proxy:!0}])},[e._v(" "),e.historyPreferredObjectStoreId?t("p",{staticClass:"history-preferred-object-store-inherited"},[e._v("\n        This target object store has been set at the history level.\n    ")]):t("p",{staticClass:"history-preferred-object-store-not-inherited"},[e._v("\n        This target object store has been inherited from your user preferences (set in User -> Preferences ->\n        Preferred Object Store). If that option is updated, this history will target that new default.\n    ")]),e._v(" "),e.preferredObjectStoreId?t("ShowSelectedObjectStore",{attrs:{"preferred-object-store-id":e.preferredObjectStoreId,"for-what":"Galaxy will default to storing this history's datasets in "}}):e._e(),e._v(" "),t("div",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n        Change this preference object store target by clicking on the storage button in the history panel.\n    ")])],1)}),[],!1,null,null,null).exports;const ir={components:{LoadingSpan:z.Z,QuotaUsageBar:Ae,QuotaSourceUsageProvider:ve},props:{objectStore:{type:Object,required:!0},embedded:{type:Boolean,default:!0},compact:{type:Boolean,default:!1}},data:()=>({loadingMessage:"Loading object store information"})};const or=(0,m.Z)(ir,(function(){var e=this,t=e._self._c;return e.objectStore.quota.enabled?t("QuotaSourceUsageProvider",{attrs:{"quota-source-label":e.objectStore.quota.source},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i}){return[i?t("LoadingSpan",{attrs:{message:e._f("localize")(e.loadingMessage)}}):n?t("QuotaUsageBar",{attrs:{"quota-usage":n,embedded:!0,compact:!0}}):e._e()]}}],null,!1,2366745900)}):e._e()}),[],!1,null,null,null).exports;var ar=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const sr=(0,a.defineComponent)({__name:"SelectObjectStore",props:{selectedObjectStoreId:{default:null},defaultOptionTitle:null,defaultOptionDescription:null,forWhat:null,parentError:{default:null}},emits:["onSubmit"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(!0),o=(0,a.ref)(n.parentError),s=(0,a.ref)([]),r=(0,a.ref)("Loading object store information"),l=(0,a.ref)("\nSelecting this will reset Galaxy to default behaviors configured by your Galaxy administrator.\nSelect a preferred object store for new datasets. This is should be thought of as a preferred\nobject store because depending the job and workflow configuration execution configuration of\nthis Galaxy instance - a different object store may be selected. After a dataset is created,\nclick on the info icon in the history panel to view information about where it is stored. If it\nis not stored in the correct place, contact your Galaxy administrator for more information.\n");function d(e){const t=(0,y.a)(e);o.value=t}return(0,a.watch)((()=>n.parentError),(()=>{o.value=n.parentError})),(0,a.onMounted)((()=>ar(this,void 0,void 0,(function*(){try{const e=yield function(){return Zs(this,void 0,void 0,(function*(){const{data:e}=yield Gs({selectable:!0});return e}))}();s.value=e,i.value=!1}catch(e){d(e)}})))),{__sfc:!0,props:n,loading:i,error:o,popoverProps:{placement:"rightbottom",boundary:"window"},objectStores:s,loadingObjectStoreInfoMessage:r,whyIsSelectionPreferredText:l,handleError:d,variant:function(e){return n.selectedObjectStoreId==e?"outline-primary":"outline-info"},emit:t,handleSubmit:function(e){return ar(this,void 0,void 0,(function*(){t("onSubmit",e)}))},LoadingSpan:z.Z,DescribeObjectStore:Pe,ObjectStoreBadges:Te,ProvidedQuotaSourceUsageBar:or}}}),rr=sr;const lr=(0,m.Z)(rr,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.loading?t(n.LoadingSpan,{attrs:{message:n.loadingObjectStoreInfoMessage}}):t("div",[n.error?t("b-alert",{staticClass:"object-store-selection-error",attrs:{variant:"danger",show:""}},[e._v("\n            "+e._s(n.error)+"\n        ")]):e._e(),e._v(" "),t("b-row",[t("b-col",{attrs:{cols:"7"}},[t("b-button-group",{staticStyle:{width:"100%"},attrs:{vertical:"",size:"lg"}},[t("b-button",{staticClass:"preferred-object-store-select-button",attrs:{id:"no-preferred-object-store-button",variant:n.variant(null),"data-object-store-id":"__null__"},on:{click:function(e){return n.handleSubmit(null)}}},[t("i",[e._v(e._s(e._f("localize")(e.defaultOptionTitle)))])]),e._v(" "),e._l(n.objectStores,(function(i){return t("b-button",{key:i.object_store_id,staticClass:"preferred-object-store-select-button",attrs:{id:`preferred-object-store-button-${i.object_store_id}`,variant:n.variant(i.object_store_id),"data-object-store-id":i.object_store_id},on:{click:function(e){return n.handleSubmit(i.object_store_id)}}},[e._v(e._s(i.name)+"\n                        "),t(n.ObjectStoreBadges,{attrs:{badges:i.badges,size:"lg","more-on-hover":!1}}),e._v(" "),t(n.ProvidedQuotaSourceUsageBar,{attrs:{"object-store":i,compact:!0}})],1)}))],2)],1),e._v(" "),t("b-col",{attrs:{cols:"5"}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}],staticStyle:{float:"right"}},[e._v("\n                    "+e._s(n.whyIsSelectionPreferredText)+"\n                ")])])],1),e._v(" "),t("b-popover",e._b({attrs:{target:"no-preferred-object-store-button",triggers:"hover"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(e.defaultOptionTitle))])]},proxy:!0}])},"b-popover",n.popoverProps,!1),[e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(e.defaultOptionDescription))])]),e._v(" "),e._l(n.objectStores,(function(i){return t("b-popover",e._b({key:i.object_store_id,attrs:{target:`preferred-object-store-button-${i.object_store_id}`,triggers:"hover"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(i.name))]},proxy:!0}],null,!0)},"b-popover",n.popoverProps,!1),[e._v(" "),t(n.DescribeObjectStore,{attrs:{what:e.forWhat,"storage-info":i}})],1)}))],2)],1)}),[],!1,null,null,null).exports;var dr=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const cr=(0,a.defineComponent)({__name:"SelectPreferredStore",props:{userPreferredObjectStoreId:{type:String,default:null},history:{type:Object,required:!0}},emits:["updated"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(null),o=(0,a.ref)(n.history.preferred_object_store_id),s="Use Galaxy Defaults",r="Selecting this will reset Galaxy to default behaviors configured by your Galaxy administrator.",l="Use Your User Preference Defaults",d="Selecting this will cause the history to not set a default and to fallback to your user preference defined default.",c=(0,a.computed)((()=>n.userPreferredObjectStoreId?l:s)),u=(0,a.computed)((()=>n.userPreferredObjectStoreId?d:r));return{__sfc:!0,props:n,error:i,selectedObjectStoreId:o,newDatasetsDescription:"New dataset outputs from tools and workflows executed in this history",galaxySelectionDefaultTitle:s,galaxySelectionDefaultDescription:r,userSelectionDefaultTitle:l,userSelectionDefaultDescription:d,defaultOptionTitle:c,defaultOptionDescription:u,emit:t,handleSubmit:function(e){return dr(this,void 0,void 0,(function*(){const a={preferred_object_store_id:e},s=(0,D.Vd)(`api/histories/${n.history.id}`);try{yield v.Z.put(s,a)}catch(e){i.value=(0,y.a)(e)}o.value=e,t("updated",e)}))},SelectObjectStore:lr}}}),ur=cr;const hr=(0,m.Z)(ur,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.SelectObjectStore,{attrs:{"parent-error":t.error||void 0,"for-what":t.newDatasetsDescription,"selected-object-store-id":t.selectedObjectStoreId,"default-option-title":t.defaultOptionTitle,"default-option-description":t.defaultOptionDescription},on:{onSubmit:t.handleSubmit}})}),[],!1,null,null,null).exports;var pr=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const fr=(0,a.defineComponent)({__name:"HistoryCounter",props:{history:null,isWatching:{type:Boolean,default:!1},lastChecked:{default:()=>new Date},filterText:{default:""},showControls:{type:Boolean,default:!1}},emits:["update:filter-text","reloadContents"],setup(e,{emit:t}){const n=e,i=(0,Nn.tv)(),{config:s}=(0,c.Z)(),{currentUser:r}=(0,o.Jk)((0,Xe.L)()),{historySize:l,numItemsActive:d,numItemsDeleted:u,numItemsHidden:h}=function(e){return{historySize:(0,a.computed)((()=>e.value.size||0)),numItemsActive:(0,a.computed)((()=>e.value.contents_active?.active||0)),numItemsDeleted:(0,a.computed)((()=>e.value.contents_active?.deleted||0)),numItemsHidden:(0,a.computed)((()=>e.value.contents_active?.hidden||0))}}((0,a.toRef)(n,"history")),p=(0,a.ref)("fa fa-sync"),f=(0,a.ref)(""),m=(0,a.ref)("link"),_=(0,a.ref)(!1),v=(0,a.ref)(n.history.preferred_object_store_id),g=(0,a.computed)((()=>(0,qs.Z)(l.value)));function y(e){return $s.G.getFilterValue(n.filterText,e)}function b(){const e=(0,Vs.Z)(n.lastChecked,{addSuffix:!0}),t=Date.now().valueOf()-n.lastChecked.valueOf();!n.isWatching||t>12e4?(f.value="Last refreshed "+e+". Consider reloading the page.",m.value="danger"):(f.value="Last refreshed "+e,m.value="link")}return(0,a.onMounted)((()=>{b(),setInterval(b,1e3)})),{__sfc:!0,props:n,router:i,config:s,currentUser:r,historySize:l,numItemsActive:d,numItemsDeleted:u,numItemsHidden:h,reloadButtonCls:p,reloadButtonTitle:f,reloadButtonVariant:m,showPreferredObjectStoreModal:_,historyPreferredObjectStoreId:v,niceHistorySize:g,emit:t,onDashboard:function(){i.push({name:"HistoryOverviewInAnalysis",params:{historyId:n.history.id}})},setFilter:function(e){let i="",o={};if(""==e)o={deleted:!1,visible:!0};else{const t="any"===y(e)?$s.G.defaultFilters[e]:"any";o={deleted:"deleted"===e?t:y("deleted"),visible:"visible"===e?t:y("visible")}}i=$s.G.applyFiltersToText(o,n.filterText),t("update:filter-text",i)},getCurrentFilterVal:y,updateTime:b,reloadContents:function(){return pr(this,void 0,void 0,(function*(){t("reloadContents"),p.value="fa fa-sync fa-spin",setTimeout((()=>{p.value="fa fa-sync"}),1e3)}))},onUpdatePreferredObjectStoreId:function(e){_.value=!1,v.value=e},PreferredStorePopover:nr,SelectPreferredStore:hr}}}),mr=fr;const _r=(0,m.Z)(mr,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"history-size my-1 d-flex justify-content-between"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rounded-0 text-decoration-none history-storage-overview-button",attrs:{title:"History Size",variant:"link",size:"sm",disabled:!e.showControls,"data-description":"storage dashboard button"},on:{click:n.onDashboard}},[t("icon",{attrs:{icon:"database"}}),e._v(" "),t("span",[e._v(e._s(n.niceHistorySize))])],1),e._v(" "),n.currentUser?t("b-button-group",[n.config&&n.config.object_store_allows_id_selection?t("b-button",{staticClass:"rounded-0 text-decoration-none",attrs:{id:`history-storage-${e.history.id}`,title:"Manage Preferred History Storage",variant:"link",size:"sm"},on:{click:function(e){n.showPreferredObjectStoreModal=!0}}},[t("icon",{attrs:{icon:"hdd"}})],1):e._e(),e._v(" "),n.config&&n.config.object_store_allows_id_selection?t(n.PreferredStorePopover,{attrs:{"history-id":e.history.id,"history-preferred-object-store-id":n.historyPreferredObjectStoreId,user:n.currentUser}}):e._e(),e._v(" "),t("b-button-group",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rounded-0 text-decoration-none",attrs:{title:"Show active",variant:"link",size:"sm","data-description":"show active items button"},on:{click:function(e){return n.setFilter("")}}},[t("span",{staticClass:"fa fa-map-marker"}),e._v(" "),t("span",[e._v(e._s(n.numItemsActive))])]),e._v(" "),n.numItemsDeleted?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rounded-0 text-decoration-none",attrs:{title:"Include deleted",variant:"link",size:"sm",pressed:!1!==n.getCurrentFilterVal("deleted"),"data-description":"include deleted items button"},on:{click:function(e){return n.setFilter("deleted")}}},[t("icon",{attrs:{icon:"trash"}}),e._v(" "),t("span",[e._v(e._s(n.numItemsDeleted))])],1):e._e(),e._v(" "),n.numItemsHidden?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rounded-0 text-decoration-none",attrs:{title:"Include hidden",variant:"link",size:"sm",pressed:!0!==n.getCurrentFilterVal("visible"),"data-description":"include hidden items button"},on:{click:function(e){return n.setFilter("visible")}}},[t("icon",{attrs:{icon:"eye-slash"}}),e._v(" "),t("span",[e._v(e._s(n.numItemsHidden))])],1):e._e(),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rounded-0 text-decoration-none history-refresh-button",attrs:{title:n.reloadButtonTitle,variant:n.reloadButtonVariant,size:"sm"},on:{click:function(e){return n.reloadContents()}}},[t("span",{class:n.reloadButtonCls})])],1),e._v(" "),t("b-modal",{attrs:{title:"History Preferred Object Store","modal-class":"history-preferred-object-store-modal","title-tag":"h3",size:"sm","hide-footer":""},model:{value:n.showPreferredObjectStoreModal,callback:function(e){n.showPreferredObjectStoreModal=e},expression:"showPreferredObjectStoreModal"}},[t(n.SelectPreferredStore,{attrs:{"user-preferred-object-store-id":n.currentUser.preferred_object_store_id,history:e.history},on:{updated:n.onUpdatePreferredObjectStoreId}})],1)],1):e._e()],1)}),[],!1,null,null,null).exports;const vr={components:{DetailsLayout:Ms},directives:{short:Cs},props:{history:{type:Object,required:!0},writeable:{type:Boolean,default:!0}},methods:{...(0,o.nv)(I.z,["updateHistory"]),onSave(e){const t=this.history.id;this.updateHistory({...e,id:t})}}};const gr=(0,m.Z)(vr,(function(){var e=this,t=e._self._c;return t("DetailsLayout",{attrs:{name:e.history.name,annotation:e.history.annotation,tags:e.history.tags,writeable:e.writeable},on:{save:e.onSave},scopedSlots:e._u([{key:"name",fn:function(){return[t("h3",{directives:[{name:"short",rawName:"v-short",value:e.history.name||"History",expression:"history.name || 'History'"}],staticClass:"my-2",attrs:{"data-description":"name display"}})]},proxy:!0}])})}),[],!1,null,null,null).exports;const yr=(0,m.Z)({},(function(){return(0,this._self._c)("div",{staticClass:"drop-zone d-flex align-items-center justify-content-center w-100 h-100 p-2 position-absolute rounded"})}),[],!1,null,"5cb0f9e1",null).exports;const br=(0,a.defineComponent)({__name:"HistoryEmpty",props:{message:{default:"This history is empty."},writable:{type:Boolean,default:!0}},setup(e){const t=e,{emit:n}=(0,rn.v1O)("open-tool-section"),{openGlobalUploadModal:i}=(0,_a.N)();return{__sfc:!0,emit:n,props:t,openGlobalUploadModal:i,clickDataLink:function(){n("getext")},localize:Ee.NC}}}),wr=br;const kr=(0,m.Z)(wr,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-alert",{attrs:{show:""}},[t("h4",{staticClass:"mb-1"},[t("i",{staticClass:"fa fa-info-circle empty-message"}),e._v(" "),t("span",[e._v(e._s(n.localize(e.message)))])]),e._v(" "),n.props.writable?t("p",[t("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),n.openGlobalUploadModal.apply(null,arguments)}}},[e._v("You can load your own data")]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("or")]),e._v(" "),t("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),n.clickDataLink.apply(null,arguments)}}},[e._v("get data from an external source")]),e._v(".\n    ")]):e._e()])}),[],!1,null,null,null).exports;const Cr={props:{history:{type:Object,required:!0}},data:()=>({userOverQuota:!1}),computed:{hasMessages(){return this.userOverQuota||history.isDeleted}}};const xr=(0,m.Z)(Cr,(function(){var e=this,t=e._self._c;return e.hasMessages?t("div",{staticClass:"mx-3 my-2"},[t("b-alert",{attrs:{show:e.history.isDeleted,variant:"warning"}},[e._v("\n        "+e._s(e._f("localize")("This history has been deleted"))+"\n    ")]),e._v(" "),t("b-alert",{attrs:{show:e.userOverQuota,variant:"warning"}},[e._v("\n        "+e._s(e._f("localize")("You are over your disk quota. Tool execution is on hold until your disk usage drops below your allocated quota."))+"\n    ")])],1):e._e()}),[],!1,null,null,null).exports;function Sr(e,t,n){return(0,bs.Gv)(e,"hide",t,n)}function Mr(e,t,n){return(0,bs.Gv)(e,"unhide",t,n)}function Tr(e,t,n){return(0,bs.Gv)(e,"delete",t,n)}function Lr(e,t,n){return(0,bs.Gv)(e,"undelete",t,n)}function Dr(e,t,n){return(0,bs.Gv)(e,"purge",t,n)}function Er(e,t,n,i){const o="change_dbkey",a={type:o,dbkey:i.dbkey};return(0,bs.Gv)(e,o,t,n,a)}function Or(e,t,n,i){const o="change_datatype",a={type:o,datatype:i.datatype};return(0,bs.Gv)(e,o,t,n,a)}function Ar(e,t,n,i){const o="add_tags",a={type:o,tags:i.tags};return(0,bs.Gv)(e,o,t,n,a)}function Ir(e,t,n,i){const o="remove_tags",a={type:o,tags:i.tags};return(0,bs.Gv)(e,o,t,n,a)}function Pr(e,t="galaxy_main"){try{const n=window.frames[t];if(!n)throw new Error(`Requested frame ${t} doesn't exist`);return n.location=(0,D.Vd)(e),!0}catch(e){throw console.warn("Failed iframe redirect",e,...arguments),e}}const Rr={methods:{redirect:function(e){console.log("legacyNavigation: go",e),(0,D.nL)((0,D.Vd)(e))},iframeRedirect:Pr,prependPath:D.Vd}},jr={mixins:[{computed:{historySize(){return this.history.size||0},numItemsActive(){return this.history.contents_active?.active||0},numItemsDeleted(){return this.history.contents_active?.deleted||0},numItemsHidden(){return this.history.contents_active?.hidden||0}}}],props:{history:{type:Object,required:!0}},methods:{onCopy(){Pr("/dataset/copy_datasets")},unhideAll(){this.runOperation((()=>function(e){return Mr(e,{visible:!1})}(this.history)))},deleteAllHidden(){this.runOperation((()=>function(e){return Tr(e,{deleted:!1,visible:!1})}(this.history)))},purgeAllDeleted(){this.runOperation((()=>function(e){return Dr(e,{deleted:!0})}(this.history)))},async runOperation(e){this.$emit("update:operation-running",this.history.update_time),await e(),this.$emit("update:operation-running",this.history.update_time)}}};const Yr={components:{DefaultOperations:(0,m.Z)(jr,(function(){var e=this,t=e._self._c;return t("section",[t("b-dropdown",{staticClass:"rounded-0",attrs:{"no-caret":"",size:"sm",variant:"link","toggle-class":"text-decoration-none rounded-0","data-description":"history action menu"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("span",{staticClass:"sr-only"},[e._v("History actions")]),e._v(" "),t("Icon",{attrs:{icon:"cog"}})]},proxy:!0}])},[e._v(" "),t("b-dropdown-text",{attrs:{id:"history-op-all-content"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("With entire history...")])]),e._v(" "),t("b-dropdown-item",{attrs:{"data-description":"copy datasets"},on:{click:e.onCopy}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Copy Datasets")])]),e._v(" "),e.numItemsHidden?t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:show-all-hidden-content",arg:"show-all-hidden-content"}]},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Unhide All Hidden Content")])]):e._e(),e._v(" "),e.numItemsHidden?t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:delete-all-hidden-content",arg:"delete-all-hidden-content"}]},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Delete All Hidden Content")])]):e._e(),e._v(" "),e.numItemsDeleted?t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:purge-all-deleted-content",arg:"purge-all-deleted-content"}]},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Purge All Deleted Content")])]):e._e()],1),e._v(" "),t("b-modal",{attrs:{id:"show-all-hidden-content",title:"Show Hidden Datasets","title-tag":"h2"},on:{ok:e.unhideAll}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really unhide all hidden datasets?")])]),e._v(" "),t("b-modal",{attrs:{id:"delete-all-hidden-content",title:"Delete Hidden Datasets","title-tag":"h2"},on:{ok:e.deleteAllHidden}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really delete all hidden datasets?")])]),e._v(" "),t("b-modal",{attrs:{id:"purge-all-deleted-content",title:"Purge Deleted Datasets","title-tag":"h2"},on:{ok:e.purgeAllDeleted}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really permanently delete all deleted datasets?")]),e._v(" "),t("p",[t("strong",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"text-danger"},[e._v("Warning, this operation cannot be undone.")])])])],1)}),[],!1,null,null,null).exports},props:{history:{type:Object,required:!0},showSelection:{type:Boolean,required:!0},hasMatches:{type:Boolean,required:!0},expandedCount:{type:Number,default:0}},methods:{toggleSelection(){this.$emit("update:show-selection",!this.showSelection)},onUpdateOperationStatus(e){this.$emit("update:operation-running",e)}}};const Hr=(0,m.Z)(Yr,(function(){var e=this,t=e._self._c;return t("section",[t("nav",{staticClass:"content-operations d-flex justify-content-between bg-secondary"},[t("b-button-group",[t("b-button",{staticClass:"show-history-content-selectors-btn rounded-0",attrs:{title:"Select Items",size:"sm",variant:"link",disabled:!e.hasMatches,pressed:e.showSelection},on:{click:e.toggleSelection}},[t("Icon",{attrs:{icon:"check-square"}})],1),e._v(" "),t("b-button",{staticClass:"rounded-0",attrs:{title:"Collapse Items",size:"sm",variant:"link",disabled:!e.expandedCount},on:{click:function(t){return e.$emit("collapse-all")}}},[t("Icon",{attrs:{icon:"compress"}})],1)],1),e._v(" "),t("b-button-group",{directives:[{name:"show",rawName:"v-show",value:e.showSelection,expression:"showSelection"}]},[e._t("selection-operations")],2),e._v(" "),t("DefaultOperations",{directives:[{name:"show",rawName:"v-show",value:!e.showSelection,expression:"!showSelection"}],attrs:{history:e.history},on:{"update:operation-running":e.onUpdateOperationStatus}})],1)])}),[],!1,null,null,null).exports;var Nr=n(81165);const Fr={components:{BModal:Nr.N},props:{operationError:{type:Object,default:null}},data:function(){return{show:null!=this.operationError}},computed:{isPartialSuccess(){return this.operationError?.result?.success_count>0},success_count(){return this.operationError?.result?.success_count||0},error_count(){return this.operationError?.result?.errors.length||0},reasons(){if(this.operationError&&this.operationError.result)return[...new Set(this.operationError.result.errors.map((e=>e.error)))];const e=this.operationError?.errorMessage?.response?.data?.err_msg;return e?[e]:[]},title(){return this.isPartialSuccess?"Some items could not be processed":"Something went wrong..."},titleVariant(){return this.isPartialSuccess?"warning":"danger"},errorMessage(){return this.operationError?.errorMessage?.message}},methods:{onHide(){this.$emit("hide")}}};const Br=(0,m.Z)(Fr,(function(){var e=this,t=e._self._c;return t("BModal",{attrs:{title:e.title,"header-text-variant":e.titleVariant,"title-tag":"h2",scrollable:"","ok-only":""},on:{hide:e.onHide},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.isPartialSuccess?t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n        -"),t("strong",[e._v(e._s(e.success_count))]),e._v("- items were processed successfully, unfortunately, -"),t("strong",[e._v(e._s(e.error_count))]),e._v("- items failed because of the following reasons:\n    ")]):t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("The operation failed for the following reasons:")]),e._v(" "),t("div",[e.errorMessage?t("ul",[t("li",[e._v(e._s(e.errorMessage))])]):e._e(),e._v(" "),t("ul",e._l(e.reasons,(function(n,i){return t("li",{key:`error-${i}`},[e._v("\n                "+e._s(n)+"\n            ")])})),0)])])}),[],!1,null,null,null).exports;var $r=n(45752),zr=n(48900);const Wr={components:{"b-alert":Rn.F,"b-link":Yn.we,"b-progress":$r.D},props:{querySelectionBreak:{type:Boolean,required:!0}},data:()=>({dismissSecs:10,dismissCountDown:0}),computed:{...(0,o.rn)(zr.k,["getShowSelectionQueryBreakWarning"])},watch:{querySelectionBreak(){this.dismissCountDown=this.getShowSelectionQueryBreakWarning()?this.dismissSecs:0}},methods:{...(0,o.nv)(zr.k,["ignoreSelectionQueryBreakWarning"]),onDismissed(){this.dismissCountDown=0},onDoNotShowAgain(){this.onDismissed(),this.ignoreSelectionQueryBreakWarning()}}};const Ur=(0,m.Z)(Wr,(function(){var e=this,t=e._self._c;return t("b-alert",{staticClass:"m-2",attrs:{variant:"info",show:e.dismissCountDown,dismissible:"",fade:""},on:{dismissed:e.onDismissed,"dismiss-count-down":function(t){e.dismissCountDown=t}}},[t("b",[e._v("Please notice your selection has changed.")]),e._v(" Manually unselecting items or adding new ones will disable the\n    `select all` status.\n    "),t("b-progress",{attrs:{variant:"info",max:e.dismissSecs,value:e.dismissCountDown,height:"4px"}}),e._v(" "),t("b-link",{on:{click:e.onDoNotShowAgain}},[e._v("Do not show again")])],1)}),[],!1,null,null,null).exports;var Vr=n(69210);function qr(e,t=null){const n=(t=t||(0,l.Bz)()).modal||new Vr.Z.View;return{promise:new Promise(((t,i)=>{e.oncancel=function(){n.hide(),i("cancelled")},e.oncreate=function(e,i){n.hide(),t(i)}})),options:e,showEl:function(t){const i=void 0===e.closing_events||e.closing_events;n.show({title:e.title||(0,Ee.ZP)("Create a collection"),body:t,width:"85%",height:"100%",xlarge:!0,closing_events:i})}}}function Zr(e,t){(t=t||{}).title=(0,Ee.ZP)("Create a collection from a list of datasets");const{promise:i,showEl:o}=qr(t);return Promise.all([n.e(348),n.e(199)]).then(n.bind(n,2106)).then((n=>{const s=a.default.extend(n.default),r=document.createElement("div");return o(r),new s({propsData:{initialElements:e,creationFn:t.creationFn,oncancel:t.oncancel,oncreate:t.oncreate,defaultHideSourceItems:t.defaultHideSourceItems}}).$mount(r),i}))}const Gr=function(e,t=!0){return Zr(e.toJSON(),{defaultHideSourceItems:t,creationFn:function(t,n,i){return t=t.map((e=>({id:e.id,name:e.name,src:e.src||("dataset"==e.history_content_type?"hda":"hdca")}))),e.createHDCA(t,"list",n,i)}})};function Jr(e,t){(t=t||{}).title=(0,Ee.ZP)("Create a collection from a pair of datasets");const{promise:i,showEl:o}=qr(t);return Promise.all([n.e(348),n.e(837)]).then(n.bind(n,4499)).then((n=>{var s=a.default.extend(n.default),r=document.createElement("div");return o(r),new s({propsData:{initialElements:e,creationFn:t.creationFn,oncancel:t.oncancel,oncreate:t.oncreate,defaultHideSourceItems:t.defaultHideSourceItems}}).$mount(r),i}))}const Kr=function(e,t=!0){return Jr(e.toJSON(),{defaultHideSourceItems:t,creationFn:function(t,n,i){return t=[{name:"forward",src:t[0].src||"hda",id:t[0].id},{name:"reverse",src:t[1].src||"hda",id:t[1].id}],e.createHDCA(t,"paired",n,i)}})};var Xr=n(38900);const Qr=function(e,t,n=!1){if(0===e.length)return t.length;if(0===t.length)return e.length;var i,o,a=[];for(i=0;i<=t.length;i++)a[i]=[i];for(o=0;o<=e.length;o++)a[0][o]=o;for(i=1;i<=t.length;i++)for(o=1;o<=e.length;o++)t.charAt(i-1)===e.charAt(o-1)?a[i][o]=a[i-1][o-1]:(a[i][o]=Math.min(a[i-1][o-1]+1,Math.min(a[i][o-1]+1,a[i-1][o]+1)),1==n&&i>1&&o>1&&t.charAt(i-1)===e.charAt(o-2)&&t.charAt(i-2)===e.charAt(o-1)&&(a[i][o]=Math.min(a[i][o],a[i-2][o-2]+1)));return a[t.length][e.length]};const el=function(e,t){var n,i,o=/(-?[0-9.]+)/g,a=e.toString().toLowerCase()||"",s=t.toString().toLowerCase()||"",r=String.fromCharCode(0),l=a.replace(o,`${r}$1${r}`).split(r),d=s.replace(o,`${r}$1${r}`).split(r),c=new Date(a).getTime(),u=c?new Date(s).getTime():null;if(u){if(c<u)return-1;if(c>u)return 1}for(var h=0,p=Math.max(l.length,d.length);h<p;h++){if((n=parseFloat(l[h])||l[h])<(i=parseFloat(d[h])||d[h]))return-1;if(n>i)return 1}return 0};var tl=n(29761);const nl={components:{ClickToEdit:n(73794).Z},props:{pair:{required:!0},unlinkFn:{required:!0,type:Function}},data:function(){return{unpairButtonTitle:(0,Ee.ZP)("Unpair"),titlePairName:(0,Ee.ZP)("Click to rename"),name:""}},watch:{pair(){this.name=this.pair.name},name(){this.$emit("onPairRename",this.name)}},created:function(){this.name=this.pair.name},methods:{l:e=>(0,Ee.ZP)(e)}};const il=(0,m.Z)(nl,(function(){var e=this,t=e._self._c;return t("div",[t("li",{staticClass:"dataset paired"},[t("span",{staticClass:"forward-dataset-name flex-column"},[e._v(e._s(e.pair.forward.name))]),e._v(" "),t("span",{staticClass:"pair-name-column flex-column"},[t("span",{staticClass:"pair-name"},[t("ClickToEdit",{attrs:{title:e.titlePairName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),e._v(" "),t("span",{staticClass:"reverse-dataset-name flex-column"},[e._v(e._s(e.pair.reverse.name))])]),e._v(" "),t("button",{staticClass:"unpair-btn",on:{click:e.unlinkFn}},[t("span",{staticClass:"fa fa-unlink",attrs:{title:e.unpairButtonTitle}})])])}),[],!1,null,null,null).exports;const ol={props:{element:{required:!0}},data:function(){return{titleElementName:(0,Ee.ZP)("Click to rename"),isSelected:!1}},methods:{l:e=>(0,Ee.ZP)(e),toString:()=>"PairedListDatasetCollectionElementView()"}};const al=(0,m.Z)(ol,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"dataset unpaired",on:{click:function(t){return e.$emit("element-is-selected",e.element)}}},[t("label",[e._v("\n        "+e._s(e.element.name)+"\n    ")])])}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const sl={components:{UnpairedDatasetElementView:al,PairedElementView:il,draggable:To()},mixins:[tl.Z],data:function(){return{state:"build",dragToChangeTitle:(0,Ee.ZP)("Drag to change"),chooseFilterTitle:(0,Ee.ZP)("Choose from common filters"),filterTextPlaceholder:(0,Ee.ZP)("Filter text"),filterTextTitle:(0,Ee.ZP)("Use this box to filter elements, using simple matching or regular expressions."),pairedElements:[],unpairedElements:[],commonFilters:{illumina:["_1","_2"],Rs:["_R1","_R2"],dot12s:[".1.fastq",".2.fastq"]},DEFAULT_FILTERS:"illumina",forwardFilter:"",reverseFilter:"",automaticallyPair:!0,initialPairsPossible:!0,matchPercentage:.99,twoPassAutoPairing:!0,removeExtensions:!0,workingElements:[],selectedForwardElement:null,selectedReverseElement:null,autopairSimple:this.autoPairFnBuilder({scoreThreshold:function(){return.6},match:function(e){return(e=e||{}).matchTo===e.possible?{index:e.index,score:1}:e.bestMatch}}),autopairLevenshtein:this.autoPairFnBuilder({scoreThreshold:function(){return this.matchPercentage},match:function(e){var t=1-Qr((e=e||{}).matchTo,e.possible)/Math.max(e.matchTo.length,e.possible.length);return t>e.bestMatch.score?{index:e.index,score:t}:e.bestMatch}}),autopairLCS:this.autoPairFnBuilder({scoreThreshold:function(){return this.matchPercentage},match:function(e){e=e||{};var t=this._naiveStartingAndEndingLCS(e.matchTo,e.possible).length/Math.max(e.matchTo.length,e.possible.length);return t>e.bestMatch.score?{index:e.index,score:t}:e.bestMatch}}),strategy:null,errorText:(0,Ee.ZP)("Galaxy could not be reached and may be updating.  Try again in a few minutes."),invalidHeader:(0,Ee.ZP)("The following selections could not be included due to problems:"),allInvalidElementsPartOne:(0,Ee.ZP)("At least two elements are needed for the collection. You may need to"),noElementsHeader:(0,Ee.ZP)("No datasets were selected"),cancelText:(0,Ee.ZP)("cancel"),allInvalidElementsPartTwo:(0,Ee.ZP)("and reselect new elements."),duplicatePairNames:[]}},computed:{forwardElements:{get(){return this.filterElements(this.workingElements,this.forwardFilter)}},reverseElements:{get(){return this.filterElements(this.workingElements,this.reverseFilter)}},pairableElements:{get(){var e=[];return this.forwardElements.forEach(((t,n)=>{this.reverseElements[n]&&t.id!=this.reverseElements[n].id&&e.push({forward:this.forwardElements[n],reverse:this.reverseElements[n]})})),e}},numOfUnpairedForwardElements:function(){return this.forwardElements.length},numOfFilteredOutForwardElements:function(){return this.workingElements.length-this.numOfUnpairedForwardElements},numOfUnpairedReverseElements:function(){return this.reverseElements.length},numOfFilteredOutReverseElements:function(){return this.workingElements.length-this.numOfUnpairedReverseElements},numOfPairs:function(){return this.pairedElements.length},returnInvalidElementsLength:function(){return this.invalidElements.length>0},returnInvalidElements:function(){return this.invalidElements},allElementsAreInvalid:function(){return this.initialElements.length==this.invalidElements.length},noElementsSelected:function(){return 0==this.initialElements.length},tooFewElementsSelected:function(){return this.workingElements.length<2&&0==this.pairedElements.length},showDuplicateError(){return this.duplicatePairNames.length>0},noUnpairedElementsDisplayed(){return this.numOfUnpairedForwardElements+this.numOfUnpairedReverseElements==0},renderPairButton(){return this}},created(){this.strategy=this.autopairLCS,this.forwardFilter=this.commonFilters[this.DEFAULT_FILTERS][0],this.reverseFilter=this.commonFilters[this.DEFAULT_FILTERS][1],this._elementsSetUp()},methods:{l:e=>(0,Ee.ZP)(e),removeExtensionsToggle:function(){this.removeExtensions=!this.removeExtensions,this.pairedElements.forEach(((e,t)=>{e.name=this._guessNameForPair(e.forward,e.reverse,this.removeExtensions)}))},_elementsSetUp:function(){this.invalidElements=[],this.workingElements=[],this.selectedDatasetElems=[],this.initialFiltersSet(),this.workingElements=JSON.parse(JSON.stringify(this.initialElements.slice(0))),this._ensureElementIds(),this._validateElements(),this._sortInitialList(),1==this.automaticallyPair&&(this.autoPair(),this.initialPairsPossible=this.pairedElements.length>0)},initialFiltersSet:function(){let e=0,t=0,n=0;this.initialElements.forEach((i=>{i.name.includes(".1.fastq")||i.name.includes(".2.fastq")?t++:i.name.includes("_R1")||i.name.includes("_R2")?n++:(i.name.includes("_1")||i.name.includes("_2"))&&e++})),e>t&&e>n?this.changeFilters("illumina"):t>e&&t>n?this.changeFilters("dot12s"):n>e&&n>t?this.changeFilters("Rs"):this.changeFilters("illumina")},_ensureElementIds:function(){return this.workingElements.forEach((e=>{Object.prototype.hasOwnProperty.call(e,"id")||(e.id=e._uid)})),this.workingElements},_validateElements:function(){return this.workingElements=this.workingElements.filter((e=>{var t=this._isElementInvalid(e);return t&&this.invalidElements.push(e.name+"  "+t),!t})),this.workingElements},_isElementInvalid:function(e){return"dataset_collection"===e.history_content_type?(0,Ee.ZP)("is a collection, this is not allowed"):e.state===Xr.Z.OK||Xr.Z.NOT_READY_STATES.includes(e.state)?e.deleted||e.purged?(0,Ee.ZP)("has been deleted or purged"):null:(0,Ee.ZP)("has errored, is paused, or is not accessible")},_sortInitialList:function(){this._sortDatasetList(this.workingElements)},_sortDatasetList:function(e){return e.sort(((e,t)=>el(e.name,t.name))),e},filterElements:function(e,t){return e.filter((e=>this.filterElement(e,t)))},filterElement:function(e,t){return""==t||new RegExp(t).test(e.name)},forwardElementSelected:function(e){null==this.selectedForwardElement||!this.selectedForwardElement.id==e.id?this.selectedForwardElement=e:this.selectedForwardElement=null,this.selectedForwardElement&&this.selectedReverseElement&&this.selectedReverseElement!=this.selectedForwardElement&&this._pair(this.selectedForwardElement,this.selectedReverseElement)},reverseElementSelected:function(e){null==this.selectedReverseElement||!this.selectedReverseElement.id==e.id?this.selectedReverseElement=e:this.selectedReverseElement=null,this.selectedForwardElement&&this.selectedReverseElement&&this.selectedReverseElement!=this.selectedForwardElement&&this._pair(this.selectedForwardElement,this.selectedReverseElement)},_pair:function(e,t,n){n=n||{};var i=this._createPair(e,t,n.name);return this.pairedElements.push(i),this.removePairFromUnpaired(e,t),n.silent||this.$emit("pair:new",i),i},removePairFromUnpaired:function(e,t){this.workingElements.splice(this.workingElements.indexOf(t),1),this.workingElements.splice(this.workingElements.indexOf(e),1),this.selectedForwardElement=null,this.selectedReverseElement=null},_createPair:function(e,t,n){if(!e||!t||e===t)throw new Error(`Bad pairing: ${[JSON.stringify(e),JSON.stringify(t)]}`);return{forward:e,name:n=n||this._guessNameForPair(e,t),reverse:t}},_guessNameForPair:function(e,t,n){n=n||this.removeExtensions;let i=e.name,o=t.name;const a=i.replace(new RegExp(this.forwardFilter),""),s=o.replace(new RegExp(this.reverseFilter),"");let r=this._naiveStartingAndEndingLCS(a,s);const l=r.lastIndexOf("/");if(l>0){const e=r.slice(0,l+1);r=r.replace(e,"")}if(n){const e=r.lastIndexOf(".");if(e>0){const t=r.slice(e,r.length);r=r.replace(t,""),i=i.replace(t,""),o=o.replace(t,"")}}return(r.endsWith(".")||r.endsWith("_"))&&(r=r.substring(0,r.length-1)),r||`${i} & ${o}`},clickAutopair:function(){this.selectedForwardElement=null,this.selectedReverseElement=null,this.autoPair(),this.workingElements=this.workingElements.filter((e=>!this.pairedElements.includes(e)))},clickUnpair:function(e){return()=>this._unpair(e)},clickClearFilters:function(){this.forwardFilter="",this.reverseFilter=""},splitByFilter:function(){var e=[new RegExp(this.forwardFilter),new RegExp(this.reverseFilter)],t=[[],[]];return this.workingElements.forEach((n=>{e.forEach(((e,i)=>{e.test(n.name)&&t[i].push(n)}))})),t},autoPair:function(e){var t=this.splitByFilter(),n=[];if(this.twoPassAutopairing){var i=this.autopairSimple({listA:t[0],listB:t[1]});n=i||n,t=this.splitByFilter()}e=e||this.strategy,t=this.splitByFilter();var o=e.call(this,{listA:t[0],listB:t[1]});return n=o?n.concat(o):n},_addToUnpaired:function(e){var t=(n,i)=>{if(n===i)return n;var o=Math.floor((i-n)/2)+n,a=el(e.name,this.workingElements[o].name);if(a<0)return t(n,o);if(a>0)return t(o+1,i);for(;this.workingElements[o]&&this.workingElements[o].name===e.name;)o++;return o};this.workingElements.splice(t(0,this.workingElements.length),0,e)},_unpair:function(e){if(!e)throw new Error(`Bad pair: ${JSON.stringify(e)}`);return this.pairedElements.splice(this.pairedElements.indexOf(e),1),this._addToUnpaired(e.forward),this._addToUnpaired(e.reverse),e},unpairAll:function(){for(var e=[];this.pairedElements.length;)e.push(this._unpair(this.pairedElements[0],{silent:!0}))},autoPairFnBuilder:function(e){(e=e||{}).createPair=e.createPair||function(e){var t=(e=e||{}).listA.splice(e.indexA,1)[0],n=e.listB.splice(e.indexB,1)[0],i=e.listB.indexOf(t),o=e.listA.indexOf(n);return-1!==i&&e.listB.splice(i,1),-1!==o&&e.listA.splice(o,1),this._pair(t,n,{silent:!0})};var t=[];function n(){return t.length||(t=[new RegExp(this.forwardFilter),new RegExp(this.reverseFilter)]),t}return e.preprocessMatch=e.preprocessMatch||function(e){var t=n.call(this);return Object.assign(e,{matchTo:e.matchTo.name.replace(t[0],""),possible:e.possible.name.replace(t[1],"")})},function(t){for(var n,i=(t=t||{}).listA,o=t.listB,a=0,s={score:0,index:null},r=[];a<i.length;){var l=i[a];for(s.score=0,n=0;n<o.length;n++){var d=o[n];if(i[a]!==o[n]&&1===(s=e.match.call(this,e.preprocessMatch.call(this,{matchTo:l,possible:d,index:n,bestMatch:s}))).score)break}var c=e.scoreThreshold.call(this);if(s.score>=c?r.push(e.createPair.call(this,{listA:i,indexA:a,listB:o,indexB:s.index})):a+=1,!i.length||!o.length)return r}return r}},changeFilters:function(e){this.forwardFilter=this.commonFilters[e][0],this.reverseFilter=this.commonFilters[e][1]},clickedCreate:function(e){if(this.checkForDuplicates(),"build"==this.state)return this.$emit("clicked-create",this.workingElements,this.collectionName,this.hideSourceItems),this.creationFn(this.pairedElements,e,this.hideSourceItems).done(this.oncreate).fail((()=>{this.state="error"}))},checkForDuplicates:function(){var e={};this.duplicatePairNames=[];var t=!0;this.pairedElements.forEach((n=>{Object.prototype.hasOwnProperty.call(e,n.name)&&(t=!1,this.duplicatePairNames.push(n.name)),e[n.name]=!0})),this.state=t?"build":"duplicates"},stripExtension:e=>e.includes(".")?e.substring(0,e.lastIndexOf(".")):e}},rl=sl;const ll=(0,m.Z)(rl,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"paired-list-collection-creator"},["error"==e.state?t("div",[t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n            "+e._s(e.errorText)+"\n        ")])],1):t("div",[e.noElementsSelected?t("div",[t("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.noElementsHeader)+"\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),t("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),t("div",{staticClass:"float-left"},[t("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):e.allElementsAreInvalid?t("div",[t("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.invalidHeader)+"\n                "),t("ul",e._l(e.returnInvalidElements,(function(n){return t("li",{key:n},[e._v("\n                        "+e._s(n)+"\n                    ")])})),0),e._v("\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),t("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),t("div",{staticClass:"float-left"},[t("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):e.tooFewElementsSelected?t("div",[e.returnInvalidElementsLength?t("div",[t("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                    "+e._s(e.invalidHeader)+"\n                    "),t("ul",e._l(e.returnInvalidElements,(function(n){return t("li",{key:n},[e._v("\n                            "+e._s(n)+"\n                        ")])})),0)])],1):e._e(),e._v(" "),t("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),t("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),t("div",{staticClass:"float-left"},[t("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):t("div",[e.returnInvalidElementsLength?t("div",[t("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                    "+e._s(e.invalidHeader)+"\n                    "),t("ul",e._l(e.returnInvalidElements,(function(n){return t("li",{key:n},[e._v("\n                            "+e._s(n)+"\n                        ")])})),0)])],1):e._e(),e._v(" "),e.initialPairsPossible?e._e():t("div",[t("b-alert",{attrs:{show:"",variant:"danger",dismissible:""}},[e._v("\n                    "+e._s(e.l("Could not automatically create any pairs from the given dataset names. You may want to choose or enter different filters and try auto-pairing again."))+"\n                    "),t("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                        "+e._s(e.cancelText)+"\n                    ")]),e._v("\n                    "+e._s(e.allInvalidElementsPartTwo)+"\n                ")])],1),e._v(" "),"duplicates"==e.state?t("div",[t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n                    "+e._s(e.l("Collections cannot have duplicated names. The following list names are duplicated: "))+"\n                    "),t("ul",e._l(e.duplicatePairNames,(function(n){return t("li",{key:n},[e._v(e._s(n))])})),0),e._v("\n                    "+e._s(e.l("Please fix these duplicates and try again."))+"\n                ")])],1):e._e(),e._v(" "),t("collection-creator",{attrs:{oncancel:e.oncancel,"hide-source-items":e.hideSourceItems,"render-extensions-toggle":!0},on:{onUpdateHideSourceItems:e.onUpdateHideSourceItems,"clicked-create":e.clickedCreate,"remove-extensions-toggle":e.removeExtensionsToggle},scopedSlots:e._u([{key:"help-content",fn:function(){return[t("p",[e._v("\n                        "+e._s(e.l(["Collections of paired datasets are ordered lists of dataset pairs (often forward and reverse reads). ","These collections can be passed to tools and workflows in order to have analyses done on each member of ","the entire group. This interface allows you to create a collection, choose which datasets are paired, ","and re-order the final collection."].join("")))+"\n                    ")]),e._v(" "),t("p",[e._v("\n                        "+e._s(e.l("Unpaired datasets are shown in the"))+"\n                        "),t("i",{attrs:{"data-target":".unpaired-columns"}},[e._v("\n                            "+e._s(e.l("unpaired section"))+"\n                        ")]),e._v("\n                        "+e._s(".")+"\n                        "+e._s(e.l("Paired datasets are shown in the"))+"\n                        "),t("i",{attrs:{"data-target":".paired-columns"}},[e._v("\n                            "+e._s(e.l("paired section"))+"\n                        ")]),e._v("\n                        "+e._s(".")+"\n                    ")]),e._v(" "),t("ul",[e._v("\n                        "+e._s(e.l("To pair datasets, you can:"))+"\n                        "),t("li",[e._v("\n                            "+e._s(e.l("Click a dataset in the"))+"\n                            "),t("i",{attrs:{"data-target":".forward-column"}},[e._v("\n                                "+e._s(e.l("forward column"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("to select it then click a dataset in the"))+"\n                            "),t("i",{attrs:{"data-target":".reverse-column"}},[e._v("\n                                "+e._s(e.l("reverse column"))+"\n                            ")])]),e._v(" "),t("li",[e._v("\n                            "+e._s(e.l("Click one of the Pair these datasets buttons in the middle column to pair the datasets in a particular row."))+"\n                        ")]),e._v(" "),t("li",[e._v("\n                            "+e._s(e.l("Click"))+"\n                            "),t("i",{attrs:{"data-target":".autopair-link"}},[e._v("\n                                "+e._s(e.l("Auto-pair"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("to have your datasets automatically paired based on name."))+"\n                        ")])]),e._v(" "),t("ul",[e._v("\n                        "+e._s(e.l("You can filter what is shown in the unpaired sections by:"))+"\n                        "),t("li",[e._v("\n                            "+e._s(e.l("Entering partial dataset names in either the "))+"\n                            "),t("i",{attrs:{"data-target":".forward-unpaired-filter input"}},[e._v("\n                                "+e._s(e.l("forward filter"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("or "))+"\n                            "),t("i",{attrs:{"data-target":".reverse-unpaired-filter input"}},[e._v("\n                                "+e._s(e.l("reverse filter"))+"\n                            ")]),e._v("\n                            "+e._s(".")+"\n                        ")]),e._v(" "),t("li",[e._v("\n                            "+e._s(e.l("Choosing from a list of preset filters by clicking the arrow beside the filter input."))+"\n                        ")]),e._v(" "),t("li",[e._v("\n                            "+e._s(e.l("Entering regular expressions to match dataset names. See:"))+"\n                            "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions",target:"_blank"}},[e._v("\n                                "+e._s(e.l("MDN's JavaScript Regular Expression Tutorial")))]),e._v("\n                            "+e._s(e.l("Note: forward slashes (\\) are not needed."))+"\n                        ")]),e._v(" "),t("li",[e._v("\n                            "+e._s(e.l("Clearing the filters by clicking the "))+"\n                            "),t("i",{attrs:{"data-target":".clear-filters-link"}},[e._v("\n                                "+e._s(e.l("Clear filters link"))+"\n                            ")]),e._v("\n                            "+e._s(".")+"\n                        ")])]),e._v(" "),t("p",[e._v("\n                        "+e._s(e.l("To unpair individual dataset pairs, click the "))+"\n                        "),t("i",{attrs:{"data-target":".unpair-btn"}},[e._v("\n                            "+e._s(e.l("unpair buttons ("))+"\n                            "),t("span",{staticClass:"fa fa-unlink"}),e._v("\n                            "+e._s(")")+"\n                        ")]),e._v("\n                        "+e._s(e.l("Click the"))+"\n                        "),t("i",{attrs:{"data-target":".unpair-all-link"}},[e._v("\n                            "+e._s(e.l("Unpair all"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("link to unpair all pairs."))+"\n                    ")]),e._v(" "),t("p",[e._v("\n                        "+e._s(e.l('You can include or remove the file extensions (e.g. ".fastq") from your pair names by toggling the'))+"\n                        "),t("i",{attrs:{"data-target":".remove-extensions-prompt"}},[e._v("\n                            "+e._s(e.l("Remove file extensions from pair names?"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("control."))+"\n                    ")]),e._v(" "),t("p",[e._v("\n                        "+e._s(e.l("Once your collection is complete, enter a"))+"\n                        "),t("i",{attrs:{"data-target":".collection-name"}},[e._v("\n                            "+e._s(e.l("name"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("and click "))+"\n                        "),t("i",{attrs:{"data-target":".create-collection"}},[e._v("\n                            "+e._s(e.l("Create list"))+"\n                        ")]),e._v("\n                        "+e._s(e.l(". (Note: you do not have to pair all unpaired datasets to finish.)"))+"\n                    ")])]},proxy:!0},{key:"middle-content",fn:function(){return[t("div",{staticClass:"column-headers vertically-spaced flex-column-container"},[t("div",{staticClass:"forward-column flex-column column"},[t("div",{staticClass:"column-header"},[t("div",{staticClass:"column-title"},[t("span",{staticClass:"title"},[e._v("\n                                        "+e._s(e.numOfUnpairedForwardElements)+"\n                                        "+e._s(e.l("unpaired forward"))+"\n                                    ")]),e._v(" "),t("span",{staticClass:"title-info unpaired-info"},[e._v("\n                                        "+e._s(e.numOfFilteredOutForwardElements)+" "+e._s(e.l("filtered out"))+"\n                                    ")])]),e._v(" "),t("div",{staticClass:"unpaired-filter forward-unpaired-filter float-left search-input search-query input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.forwardFilter,expression:"forwardFilter"}],attrs:{type:"text",placeholder:e.filterTextPlaceholder,title:"filterTextTitle"},domProps:{value:e.forwardFilter},on:{input:function(t){t.target.composing||(e.forwardFilter=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-append",attrs:{title:e.chooseFilterTitle}},[t("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),e._v(" "),t("div",{staticClass:"dropdown-menu"},[t("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("illumina")}}},[e._v("_1")]),e._v(" "),t("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("Rs")}}},[e._v("_R1")]),e._v(" "),t("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("dot12s")}}},[e._v(".1.fastq")])])])])])]),e._v(" "),t("div",{staticClass:"paired-column flex-column no-flex column"},[t("div",{staticClass:"column-header"},[t("a",{staticClass:"clear-filters-link",attrs:{href:"javascript:void(0);",role:"button"},on:{click:e.clickClearFilters}},[e._v("\n                                    "+e._s(e.l("Clear Filters"))+"\n                                ")]),e._v(" "),t("br"),e._v(" "),t("a",{staticClass:"autopair-link",attrs:{href:"javascript:void(0);",role:"button"},on:{click:e.clickAutopair}},[e._v("\n                                    "+e._s(e.l("Auto-pair"))+"\n                                ")])])]),e._v(" "),t("div",{staticClass:"reverse-column flex-column column"},[t("div",{staticClass:"column-header"},[t("div",{staticClass:"column-title"},[t("span",{staticClass:"title"},[e._v("\n                                        "+e._s(e.numOfUnpairedReverseElements)+"\n                                        "+e._s(e.l("unpaired reverse"))+"\n                                    ")]),e._v(" "),t("span",{staticClass:"title-info unpaired-info"},[e._v("\n                                        "+e._s(e.numOfFilteredOutReverseElements)+" "+e._s(e.l("filtered out")))])]),e._v(" "),t("div",{staticClass:"unpaired-filter reverse-unpaired-filter float-left search-input search-query input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.reverseFilter,expression:"reverseFilter"}],attrs:{type:"text",placeholder:e.filterTextPlaceholder,title:"filterTextTitle"},domProps:{value:e.reverseFilter},on:{input:function(t){t.target.composing||(e.reverseFilter=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-append",attrs:{title:e.chooseFilterTitle}},[t("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),e._v(" "),t("div",{staticClass:"dropdown-menu"},[t("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("illumina")}}},[e._v("_2")]),e._v(" "),t("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("Rs")}}},[e._v("_R2")]),e._v(" "),t("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("dot12s")}}},[e._v(".2.fastq")])])])])])])]),e._v(" "),t("div",{staticClass:"pairing-split-parent"},[t("div",{staticClass:"pairing-split-child"},[e.noUnpairedElementsDisplayed?t("div",[t("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("\n                                    "+e._s(e.l("No datasets were found matching the current filters."))+"\n                                ")])],1):e._e(),e._v(" "),t("div",{staticClass:"unpaired-columns flex-column-container scroll-container flex-row"},[t("div",{staticClass:"forward-column flex-column column truncate"},[t("ol",{staticClass:"column-datasets"},e._l(e.forwardElements,(function(n){return t("UnpairedDatasetElementView",{key:n.id,class:{selected:e.selectedForwardElement&&n.id==e.selectedForwardElement.id},attrs:{element:n},on:{"element-is-selected":e.forwardElementSelected}})})),1)]),e._v(" "),t("div",{staticClass:"paired-column flex-column no-flex column truncate"},[""!==e.forwardFilter&&""!==e.reverseFilter?t("ol",{staticClass:"column-datasets"},e._l(e.pairableElements,(function(n,i){return t("li",{key:i,staticClass:"dataset",on:{click:function(t){return e._pair(n.forward,n.reverse)}}},[e._v("\n                                            "+e._s(e.l("Pair these datasets"))+"\n                                        ")])})),0):e._e()]),e._v(" "),t("div",{staticClass:"reverse-column flex-column column truncate"},[t("ol",{staticClass:"column-datasets"},e._l(e.reverseElements,(function(n){return t("UnpairedDatasetElementView",{key:n.id,class:{selected:e.selectedReverseElement&&n.id==e.selectedReverseElement.id},attrs:{element:n},on:{"element-is-selected":e.reverseElementSelected}})})),1)])])]),e._v(" "),t("div",{staticClass:"pairing-split-child"},[t("div",{staticClass:"column-header"},[t("div",{staticClass:"column-title paired-column-title"},[t("span",{staticClass:"title"},[e._v(" "+e._s(e.numOfPairs)+" "+e._s(e.l(" pairs")))])]),e._v(" "),t("a",{staticClass:"unpair-all-link",attrs:{href:"javascript:void(0);",role:"button"},on:{click:e.unpairAll}},[e._v("\n                                    "+e._s(e.l("Unpair all"))+"\n                                ")])]),e._v(" "),t("div",{staticClass:"paired-columns flex-column-container scroll-container flex-row"},[t("ol",{staticClass:"column-datasets"},[t("draggable",{on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.pairedElements,callback:function(t){e.pairedElements=t},expression:"pairedElements"}},e._l(e.pairedElements,(function(n){return t("PairedElementView",{key:n.id,attrs:{pair:n,"unlink-fn":e.clickUnpair(n)},on:{onPairRename:e=>n.name=e}})})),1)],1)])])])]},proxy:!0}])})],1)])])}),[],!1,null,null,null).exports;function dl(e,t){(t=t||{}).title=(0,Ee.ZP)("Create a collection of paired datasets");const{promise:n,showEl:i}=qr(t);var o=a.default.extend(ll),s=document.createElement("div");return i(s),new o({propsData:{initialElements:e,creationFn:t.creationFn,oncancel:t.oncancel,oncreate:t.oncreate,defaultHideSourceItems:t.defaultHideSourceItems}}).$mount(s),n}const cl=function(e,t){return dl(e.toJSON(),{defaultHideSourceItems:t,creationFn:function(t,n,i){return t=t.map((e=>({collection_type:"paired",src:"new_collection",name:e.name,element_identifiers:[{name:"forward",id:e.forward.id,src:e.forward.src||"hda"},{name:"reverse",id:e.reverse.id,src:e.reverse.src||"hda"}]}))),e.createHDCA(t,"list:paired",n,i)}})};function ul(e,t,i,o){let s;s="datasets"==i?(0,Ee.ZP)("Build Rules for Uploading Datasets"):"collection_contents"==t?(0,Ee.ZP)("Build Rules for Applying to Existing Collection"):"datasets"==t||"library_datasets"==t?(0,Ee.ZP)("Build Rules for Creating Collection(s)"):(0,Ee.ZP)("Build Rules for Uploading Collections"),o.title=s,o.closing_events=!1;const{promise:r,showEl:l}=qr(o);return Promise.resolve().then(n.bind(n,34003)).then((n=>{var s=a.default.extend(n.default),d=document.createElement("div");return l(d),new s({propsData:{initialElements:e,elementsType:t,importType:i,ftpUploadSite:o.ftpUploadSite,creationFn:o.creationFn,oncancel:o.oncancel,oncreate:o.oncreate,defaultHideSourceItems:o.defaultHideSourceItems,saveRulesFn:o.saveRulesFn,initialRules:o.initialRules}}).$mount(d),r}))}const hl=function(e,t=!0){let n,i,o;if(e.selectionType)if(e.elements)i=e.selectionType,o=e.dataType||"collections",n=e.elements;else{const t=RegExp(/[^\s]/),a=e.content.split(/[\n\r]/).filter((e=>e.length>0&&t.exec(e)));let s=!1;if(a.length>0){a[0].indexOf("\t")>=0&&(s=!0)}const r=s?/\t/:/\s+/;n=a.map((e=>e.split(r))),i=e.selectionType,o=e.dataType||"collections"}else n=e.toJSON(),i="datasets",o="collections";return ul(n,i,o,{ftpUploadSite:e.ftpUploadSite,defaultHideSourceItems:t,creationFn:function(t,n,i,o){return e.createHDCA(t,n,i,o)}})};async function pl(e,t,n,i=!1){let o;if("list"==e)o=Gr;else if("paired"==e)o=Kr;else if("list:paired"==e)o=cl;else{if(!e.startsWith("rules"))throw new Error(`Unknown collectionType encountered ${e}`);o=hl}if(i)return await o(t);{const e=fl(n,t);return await o(e)}}const fl=(e,t)=>{const n=Array.from(t.values());return{historyId:e,toJSON:()=>n,createHDCA:(e,t,n,i,o={})=>Mn().Deferred().resolve(null,{collection_type:t,name:n,hide_source_items:i,element_identifiers:e,options:o})}};const ml={components:{Multiselect:j(),LoadingSpan:z.Z},props:{loading:{type:Boolean,required:!1},collectionName:{type:String,required:!1,default:"items"},items:{type:Array,required:!1,default:null},currentItemId:{type:String,required:!0}},data:()=>({selectedItem:{}}),computed:{loadingMessage(){return`Loading ${this.collectionName}...`}},watch:{items:function(){this.selectedItem=this.items.find((e=>e.id==this.currentItemId))}},methods:{onSelectItem(e){this.$emit("update:selected-item",e)}}};const _l=(0,m.Z)(ml,(function(){var e=this,t=e._self._c;return t("div",[e.loading?t("LoadingSpan",{attrs:{message:e.loadingMessage}}):e._e(),e._v(" "),e.items?t("Multiselect",{attrs:{"deselect-label":null,"track-by":"id",label:"text",options:e.items,searchable:!0,"allow-empty":!1},on:{select:e.onSelectItem},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}}):e._e()],1)}),[],!1,null,null,null).exports;var vl=n(94206);const gl={components:{DbKeyProvider:P.xS,DatatypesProvider:P.Sk,SingleItemSelector:_l,StatelessTags:vl.iZ},props:{history:{type:Object,required:!0},filterText:{type:String,required:!0},contentSelection:{type:Map,required:!0},selectionSize:{type:Number,required:!0},isQuerySelection:{type:Boolean,required:!0},totalItemsInQuery:{type:Number,default:0}},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0);return{config:e,isConfigLoaded:t}},data:function(){return{selectedDbKey:"?",selectedDatatype:"auto",selectedTags:[]}},computed:{canUnhideSelection(){return this.areAllSelectedHidden||this.isAnyVisibilityAllowed&&!this.areAllSelectedVisible},canHideSelection(){return this.areAllSelectedVisible||this.isAnyVisibilityAllowed&&!this.areAllSelectedHidden},showDeleted(){return!$s.G.checkFilter(this.filterText,"deleted",!1)},canDeleteSelection(){return this.areAllSelectedActive||this.isAnyDeletedStateAllowed&&!this.areAllSelectedDeleted},canUndeleteSelection(){return this.showDeleted&&(this.isQuerySelection||!this.areAllSelectedPurged)},showBuildOptions(){return!this.isQuerySelection&&this.areAllSelectedActive&&!this.showDeleted},showBuildOptionForAll(){return!this.showBuildOptions&&this.selectionMatchesQuery},numSelected(){return this.selectionSize},hasSelection(){return this.numSelected>0},selectionMatchesQuery(){return this.totalItemsInQuery===this.selectionSize},noTagsSelected(){return 0===this.selectedTags.length},areAllSelectedPurged(){for(const e of this.contentSelection.values())if(Object.prototype.hasOwnProperty.call(e,"purged")&&!e.purged)return!1;return!0},areAllSelectedVisible(){for(const e of this.contentSelection.values())if(Object.prototype.hasOwnProperty.call(e,"visible")&&!e.visible)return!1;return!0},areAllSelectedHidden(){for(const e of this.contentSelection.values())if(Object.prototype.hasOwnProperty.call(e,"visible")&&e.visible)return!1;return!0},areAllSelectedActive(){for(const e of this.contentSelection.values())if(Object.prototype.hasOwnProperty.call(e,"deleted")&&e.deleted)return!1;return!0},areAllSelectedDeleted(){for(const e of this.contentSelection.values())if(Object.prototype.hasOwnProperty.call(e,"deleted")&&!e.deleted)return!1;return!0},isAnyVisibilityAllowed(){return $s.G.checkFilter(this.filterText,"visible","any")},isAnyDeletedStateAllowed(){return $s.G.checkFilter(this.filterText,"deleted","any")}},watch:{hasSelection(e){e&&this.$emit("update:show-selection",!0)}},methods:{hideSelected(){this.runOnSelection(Sr)},unhideSelected(){this.runOnSelection(Mr)},deleteSelected(){this.runOnSelection(Tr)},undeleteSelected(){this.runOnSelection(Lr)},purgeSelected(){this.runOnSelection(Dr)},changeDbkeyOfSelected(){this.runOnSelection(Er,{dbkey:this.selectedDbKey}),this.selectedDbKey="?"},changeDatatypeOfSelected(){this.runOnSelection(Or,{datatype:this.selectedDatatype}),this.selectedDatatype="auto"},addTagsToSelected(){this.runOnSelection(Ar,{tags:this.selectedTags}),this.selectedTags=[]},removeTagsFromSelected(){this.runOnSelection(Ir,{tags:this.selectedTags}),this.selectedTags=[]},async runOnSelection(e,t=null){this.$emit("update:operation-running",this.history.update_time);const n=this.getExplicitlySelectedItems(),i=$s.G.getQueryDict(this.filterText);this.$emit("update:show-selection",!1);let o=!1;try{const a=await e(this.history,i,n,t);o=a.success_count>0,a.errors.length&&this.handleOperationError(null,a)}catch(e){this.handleOperationError(e,null)}o||this.$emit("update:operation-running",null)},getExplicitlySelectedItems(){if(this.isQuerySelection)return[];return Array.from(this.contentSelection.values()).map((e=>({id:e.id,history_content_type:e.history_content_type})))},handleOperationError(e,t){this.$emit("operation-error",{errorMessage:e,result:t})},onSelectedDbKey(e){this.selectedDbKey=e.id},onSelectedDatatype(e){this.selectedDatatype=e.id},async buildDatasetList(){await this.buildNewCollection("list")},async buildDatasetListAll(){let e=[];const t=$s.G.getQueryDict(this.filterText);e=await(0,bs.YG)(this.history.id,t,"dataset"),this.buildNewCollection("list",e)},async buildDatasetPair(){await this.buildNewCollection("paired")},async buildListOfPairs(){await this.buildNewCollection("list:paired")},async buildCollectionFromRules(){await this.buildNewCollection("rules")},async buildNewCollection(e,t){void 0===t&&(t=this.contentSelection);const n=await pl(e,t,this.history.id);await(0,bs.S5)(this.history,n),n.hide_source_items&&this.$emit("hide-selection",this.contentSelection),this.$emit("reset-selection")}}},yl=gl;const bl=(0,m.Z)(yl,(function(){var e=this,t=e._self._c;return e.hasSelection?t("section",[t("b-dropdown",{attrs:{text:"Selection",size:"sm",variant:"primary","data-description":"selected content menu","no-flip":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[e.selectionMatchesQuery?t("span",{attrs:{"data-test-id":"all-filter-selected"}},[e._v("\n                All "),t("b",[e._v(e._s(e.totalItemsInQuery))]),e._v(" selected\n            ")]):t("span",{attrs:{"data-test-id":"num-active-selected"}},[t("b",[e._v(e._s(e.selectionSize))]),e._v(" of "+e._s(e.totalItemsInQuery)+" selected\n            ")])]},proxy:!0}],null,!1,3380066817)},[e._v(" "),t("b-dropdown-text",[t("span",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{"data-description":"selected count"}},[e._v("With "+e._s(e.numSelected)+" selected...")])]),e._v(" "),e.canUnhideSelection?t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:show-selected-content",arg:"show-selected-content"}],attrs:{"data-description":"unhide option"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Unhide")])]):e._e(),e._v(" "),e.canHideSelection?t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:hide-selected-content",arg:"hide-selected-content"}],attrs:{"data-description":"hide option"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Hide")])]):e._e(),e._v(" "),e.canUndeleteSelection?t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:restore-selected-content",arg:"restore-selected-content"}],attrs:{"data-description":"undelete option"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Undelete")])]):e._e(),e._v(" "),e.canDeleteSelection?t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:delete-selected-content",arg:"delete-selected-content"}],attrs:{"data-description":"delete option"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Delete")])]):e._e(),e._v(" "),t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:purge-selected-content",arg:"purge-selected-content"}],attrs:{"data-description":"purge option"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Delete (permanently)")])]),e._v(" "),e.showBuildOptions?t("b-dropdown-divider"):e._e(),e._v(" "),e.showBuildOptions?t("b-dropdown-item",{attrs:{"data-description":"build list"},on:{click:e.buildDatasetList}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Build Dataset List")])]):e._e(),e._v(" "),e.showBuildOptions?t("b-dropdown-item",{attrs:{"data-description":"build pair"},on:{click:e.buildDatasetPair}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Build Dataset Pair")])]):e._e(),e._v(" "),e.showBuildOptions?t("b-dropdown-item",{attrs:{"data-description":"build list of pairs"},on:{click:e.buildListOfPairs}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Build List of Dataset Pairs")])]):e._e(),e._v(" "),e.showBuildOptions?t("b-dropdown-item",{attrs:{"data-description":"build collection from rules"},on:{click:e.buildCollectionFromRules}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Build Collection from Rules")])]):e._e(),e._v(" "),e.showBuildOptionForAll?t("b-dropdown-divider"):e._e(),e._v(" "),e.showBuildOptionForAll?t("b-dropdown-item",{attrs:{"data-description":"build list all"},on:{click:e.buildDatasetListAll}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Build Dataset List")])]):e._e(),e._v(" "),t("b-dropdown-divider"),e._v(" "),t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:change-dbkey-of-selected-content",arg:"change-dbkey-of-selected-content"}],attrs:{"data-description":"change database build"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Change Database/Build")])]),e._v(" "),e.isConfigLoaded&&e.config.enable_celery_tasks?t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:change-datatype-of-selected-content",arg:"change-datatype-of-selected-content"}],attrs:{"data-description":"change data type"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Change data type")])]):e._e(),e._v(" "),t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:add-tags-to-selected-content",arg:"add-tags-to-selected-content"}],attrs:{"data-description":"add tags"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Add tags")])]),e._v(" "),t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:remove-tags-from-selected-content",arg:"remove-tags-from-selected-content"}],attrs:{"data-description":"remove tags"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Remove tags")])])],1),e._v(" "),t("b-modal",{attrs:{id:"hide-selected-content",title:"Hide Selected Content?","title-tag":"h2"},on:{ok:e.hideSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really hide "+e._s(e.numSelected)+" content items?")])]),e._v(" "),t("b-modal",{attrs:{id:"show-selected-content",title:"Show Selected Content?","title-tag":"h2"},on:{ok:e.unhideSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really show "+e._s(e.numSelected)+" content items?")])]),e._v(" "),t("b-modal",{attrs:{id:"delete-selected-content",title:"Delete Selected Content?","title-tag":"h2"},on:{ok:e.deleteSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really delete "+e._s(e.numSelected)+" content items?")])]),e._v(" "),t("b-modal",{attrs:{id:"restore-selected-content",title:"Restore Selected Content?","title-tag":"h2"},on:{ok:e.undeleteSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really restore "+e._s(e.numSelected)+" content items?")])]),e._v(" "),t("b-modal",{attrs:{id:"purge-selected-content",title:"Purge Selected Content?","title-tag":"h2"},on:{ok:e.purgeSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Permanently delete "+e._s(e.numSelected)+" content items?")]),e._v(" "),t("p",[t("strong",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"text-danger"},[e._v("Warning, this operation cannot be undone.")])])]),e._v(" "),t("b-modal",{attrs:{id:"change-dbkey-of-selected-content",title:"Change Database/Build?","title-tag":"h2","body-class":"modal-with-selector"},on:{ok:e.changeDbkeyOfSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Select a new Database/Build for "+e._s(e.numSelected)+" items:")]),e._v(" "),t("DbKeyProvider",{scopedSlots:e._u([{key:"default",fn:function({item:n,loading:i}){return[t("SingleItemSelector",{attrs:{"collection-name":"Database/Builds",loading:i,items:n,"current-item-id":e.selectedDbKey},on:{"update:selected-item":e.onSelectedDbKey}})]}}],null,!1,1592263236)})],1),e._v(" "),t("b-modal",{attrs:{id:"change-datatype-of-selected-content",title:"Change data type?","title-tag":"h2","body-class":"modal-with-selector","ok-disabled":null==e.selectedDatatype},on:{ok:e.changeDatatypeOfSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Select a new data type for "+e._s(e.numSelected)+" items:")]),e._v(" "),t("DatatypesProvider",{scopedSlots:e._u([{key:"default",fn:function({item:n,loading:i}){return[t("SingleItemSelector",{attrs:{"collection-name":"Data Types",loading:i,items:n,"current-item-id":e.selectedDatatype},on:{"update:selected-item":e.onSelectedDatatype}})]}}],null,!1,3241240240)})],1),e._v(" "),t("b-modal",{attrs:{id:"add-tags-to-selected-content",title:"Add tags?","title-tag":"h2","ok-disabled":e.noTagsSelected},on:{ok:e.addTagsToSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Apply the following tags to "+e._s(e.numSelected)+" items:")]),e._v(" "),t("StatelessTags",{staticClass:"tags",model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),e._v(" "),t("b-modal",{attrs:{id:"remove-tags-from-selected-content",title:"Remove tags?","title-tag":"h2","ok-disabled":e.noTagsSelected},on:{ok:e.removeTagsFromSelected}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Remove the following tags from "+e._s(e.numSelected)+" items:")]),e._v(" "),t("StatelessTags",{staticClass:"tags",model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)],1):e._e()}),[],!1,null,null,null).exports;const wl={components:{"b-button":jn.T,"b-button-group":_o.a},props:{selectionSize:{type:Number,required:!0}},computed:{hasSelection(){return this.selectionSize>0}},methods:{selectAll(){this.$emit("select-all")},resetSelection(){this.$emit("reset-selection")}}};const kl=(0,m.Z)(wl,(function(){var e=this,t=e._self._c;return t("b-button-group",{attrs:{size:"sm"}},[e.hasSelection?t("b-button",{attrs:{variant:"link","data-test-id":"clear-btn"},on:{click:e.resetSelection}},[t("span",{staticClass:"fa fa-fw fa-times",attrs:{title:"Clear selection"}})]):t("b-button",{attrs:{variant:"link","data-test-id":"select-all-btn"},on:{click:e.selectAll}},[t("span",[e._v("Select All")])])],1)}),[],!1,null,null,null).exports,Cl={components:{ContentItem:Is.Z,ExpandedItems:ys,FilterMenu:ci,HistoryCounter:_r,HistoryMessages:xr,HistoryDetails:gr,HistoryDropZone:yr,HistoryEmpty:kr,HistoryOperations:Hr,HistorySelectionOperations:bl,HistorySelectionStatus:kl,LoadingSpan:z.Z,ListingLayout:Ys,SelectedItems:zs,SelectionChangeWarning:Ur,OperationErrorDialog:Br},props:{listOffset:{type:Number,default:0},history:{type:Object,required:!0},filter:{type:String,default:""},writable:{type:Boolean,default:!0},showControls:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1}},setup(){const{currentFilterText:e,currentHistoryId:t}=(0,o.Jk)((0,I.z)()),{lastCheckedTime:n,totalMatchesCount:i,isWatching:a}=(0,o.Jk)((0,Us.v)());return{currentFilterText:e,currentHistoryId:t,lastCheckedTime:n,totalMatchesCount:i,isWatching:a}},data:()=>({filterText:"",filterClass:$s.G,invisible:{},loading:!1,offset:0,searchError:null,showAdvanced:!1,showDropZone:!1,operationRunning:null,operationError:null,querySelectionBreak:!1}),computed:{...(0,o.rn)(Us.v,["getHistoryItems"]),historyId(){return this.history.id},historyUpdateTime(){return this.history.update_time},queryKey(){return`${this.historyId}-${this.filterText}`},queryDefault(){return!this.filterText},hasFilters(){return!this.queryDefault},isProcessing(){return this.operationRunning>=this.history.update_time},itemsLoaded(){return this.getHistoryItems(this.historyId,this.filterText)},formattedSearchError(){if(this.searchError){const{column:e,col:t,operation:n,op:i,value:o,val:a,err_msg:s,ValueError:r}=this.searchError,l=n||i;return{filter:`${e||t}${l?(0,ln.F3)(l):":"}`,value:o||a,msg:s,typeError:r}}return null},storeFilterText(){return this.historyId===this.currentHistoryId&&this.currentFilterText||""}},watch:{queryKey(){this.invisible={},this.offset=0,this.loadHistoryItems()},historyId(e,t){e!==t&&(this.operationRunning=null)},filter(e){this.filterText=e},filterText(e){this.filterable&&this.setFilterText(this.historyId,e)},storeFilterText(e){this.filterable&&(this.filterText=e)},offset(){this.loadHistoryItems()},async historyUpdateTime(){await this.loadHistoryItems()},itemsLoaded(e){this.invisible&&e.forEach((e=>{this.invisible[e.hid]&&a.default.set(this.invisible,e.hid,!1)}))}},async mounted(){this.filterable&&!this.filter&&(this.filterText=this.storeFilterText),await this.loadHistoryItems()},methods:{...(0,o.nv)(I.z,["loadHistoryById","setFilterText","updateHistory"]),...(0,o.nv)(Us.v,["fetchHistoryItems"]),getHighlight(e){const t=this.filterClass.getFilterValue(this.filterText,"related");return this.loading?null:t==e.hid?"active":t?e.hid>t?"output":"input":void 0},hasMatches:e=>!!e&&e.length>0,isDataset:e=>"dataset"==e.history_content_type,async loadHistoryItems(){this.loading=!0;try{await this.fetchHistoryItems(this.historyId,this.filterText,this.offset),this.searchError=null}catch(e){e.response&&e.response.data&&e.response.data.err_msg?(console.debug("HistoryPanel - Load items error:",e.response.data.err_msg),this.searchError=e.response.data):console.debug("HistoryPanel - Load items error.",e)}finally{this.loading=!1}},async onDelete(e,t=!1){this.loading=!0,this.setInvisible(e),await(0,bs.yd)(e,{recursive:t}),this.loading=!1},onHideSelection(e){e.forEach((e=>{this.setInvisible(e)}))},onScroll(e){this.offset=e},async onUndelete(e){this.setInvisible(e),this.loading=!0,await(0,bs.NC)(e,{deleted:!1}),this.loading=!1},async onUnhide(e){this.setInvisible(e),this.loading=!0,await(0,bs.NC)(e,{visible:!0}),this.loading=!1},reloadContents(){(0,Ws.A7)()},setInvisible(e){a.default.set(this.invisible,e.hid,!0)},onTagChange(e,t){e.tags=t},onOperationError(e){console.debug("HistoryPanel - Operation error.",e),this.operationError=e},onDragEnter(e){this.dragTarget=e.target,this.showDropZone=!0},onDragLeave(e){this.dragTarget==e.target&&(this.showDropZone=!1)},async onDrop(e){let t;this.showDropZone=!1;try{t=JSON.parse(e.dataTransfer.getData("text"))[0]}catch(e){}if(t){const e="dataset"===t.history_content_type?"hda":"hdca";if(t.history_id!=this.historyId)try{await(0,K.Bm)(t.id,this.historyId,t.history_content_type,e),"dataset"===t.history_content_type?oo.FN.info("Dataset copied to history"):oo.FN.info("Collection copied to history"),this.loadHistoryById(this.historyId)}catch(e){this.onError(e)}}},onError(e){oo.FN.error(`${e}`)},updateFilterVal(e,t){this.filterText=this.filterClass.setFilterValue(this.filterText,e,t)}}},xl=Cl;const Sl=(0,m.Z)(xl,(function(){var e=this,t=e._self._c;return t("ExpandedItems",{attrs:{"scope-key":e.historyId,"get-item-key":e=>e.type_id},scopedSlots:e._u([{key:"default",fn:function({expandedCount:n,isExpanded:i,setExpanded:o,collapseAll:a}){return[t("SelectedItems",{attrs:{"scope-key":e.queryKey,"get-item-key":e=>e.type_id,"filter-text":e.filterText,"total-items-in-query":e.totalMatchesCount},on:{"query-selection-break":function(t){e.querySelectionBreak=!0}},scopedSlots:e._u([{key:"default",fn:function({selectedItems:s,showSelection:r,isQuerySelection:l,selectionSize:d,setShowSelection:c,selectAllInCurrentQuery:u,isSelected:h,setSelected:p,resetSelection:f}){return[t("section",{staticClass:"history-layout d-flex flex-column w-100",on:{drop:function(t){return t.preventDefault(),e.onDrop.apply(null,arguments)},dragenter:function(t){return t.preventDefault(),e.onDragEnter.apply(null,arguments)},dragover:function(e){e.preventDefault()},dragleave:function(t){return t.preventDefault(),e.onDragLeave.apply(null,arguments)}}},[e._t("navigation",null,{history:e.history}),e._v(" "),e.filterable?t("FilterMenu",{staticClass:"content-operations-filters mx-3",attrs:{name:"History Items",placeholder:"search datasets","filter-class":e.filterClass,"filter-text":e.filterText,loading:e.loading,"search-error":e.searchError,"show-advanced":e.showAdvanced},on:{"update:filterText":function(t){e.filterText=t},"update:filter-text":function(t){e.filterText=t},"update:showAdvanced":function(t){e.showAdvanced=t},"update:show-advanced":function(t){e.showAdvanced=t}}}):e._e(),e._v(" "),e.showAdvanced?e._e():t("section",[t("HistoryDetails",{attrs:{history:e.history,writeable:e.writable},on:{"update:history":function(t){return e.updateHistory(t)}}}),e._v(" "),t("HistoryMessages",{attrs:{history:e.history}}),e._v(" "),t("HistoryCounter",{attrs:{history:e.history,"is-watching":e.isWatching,"last-checked":e.lastCheckedTime,"show-controls":e.showControls,"filter-text":e.filterText},on:{"update:filterText":function(t){e.filterText=t},"update:filter-text":function(t){e.filterText=t},reloadContents:e.reloadContents}}),e._v(" "),e.showControls?t("HistoryOperations",{attrs:{history:e.history,"show-selection":r,"expanded-count":n,"has-matches":e.hasMatches(e.itemsLoaded),"operation-running":e.operationRunning},on:{"update:operationRunning":function(t){e.operationRunning=t},"update:operation-running":function(t){e.operationRunning=t},"update:show-selection":c,"collapse-all":a},scopedSlots:e._u([{key:"selection-operations",fn:function(){return[t("HistorySelectionOperations",{attrs:{history:e.history,"filter-text":e.filterText,"content-selection":s,"selection-size":d,"is-query-selection":l,"total-items-in-query":e.totalMatchesCount,"operation-running":e.operationRunning},on:{"update:operationRunning":function(t){e.operationRunning=t},"update:operation-running":function(t){e.operationRunning=t},"update:show-selection":c,"operation-error":e.onOperationError,"hide-selection":e.onHideSelection,"reset-selection":f}}),e._v(" "),r?t("HistorySelectionStatus",{attrs:{"selection-size":d},on:{"select-all":function(t){return u(e.itemsLoaded)},"reset-selection":f}}):e._e()]},proxy:!0}],null,!0)}):e._e(),e._v(" "),t("SelectionChangeWarning",{attrs:{"query-selection-break":e.querySelectionBreak}}),e._v(" "),e.operationError?t("OperationErrorDialog",{attrs:{"operation-error":e.operationError},on:{hide:function(t){e.operationError=null}}}):e._e()],1),e._v(" "),e.showAdvanced?e._e():t("section",{staticClass:"position-relative flex-grow-1 scroller"},[e.showDropZone?t("HistoryDropZone"):e._e(),e._v(" "),t("div",[e.loading&&e.itemsLoaded&&0===e.itemsLoaded.length?t("div",[t("b-alert",{staticClass:"m-2",attrs:{variant:"info",show:""}},[t("LoadingSpan",{attrs:{message:"Loading History"}})],1)],1):e.isProcessing?t("b-alert",{staticClass:"m-2",attrs:{variant:"info",show:""}},[t("LoadingSpan",{attrs:{message:"Processing operation"}})],1):0===e.itemsLoaded.length?t("div",[e.queryDefault?t("HistoryEmpty",{staticClass:"m-2",attrs:{writable:e.writable}}):e.formattedSearchError?t("b-alert",{staticClass:"m-2",attrs:{variant:"danger",show:""}},[e._v("\n                            Error in filter:\n                            "),t("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.showAdvanced=!0}}},[e._v("\n                                "+e._s(e.formattedSearchError.filter)+"'"+e._s(e.formattedSearchError.value)+"'\n                            ")])]):t("b-alert",{staticClass:"m-2",attrs:{variant:"info",show:""}},[e._v("\n                            No data found for selected filter.\n                        ")])],1):t("ListingLayout",{attrs:{offset:e.listOffset,items:e.itemsLoaded,"query-key":e.queryKey},on:{scroll:e.onScroll},scopedSlots:e._u([{key:"item",fn:function({item:n,currentOffset:a}){return[e.invisible[n.hid]?e._e():t("ContentItem",{attrs:{id:n.hid,"is-history-item":"",item:n,name:n.name,writable:e.writable,"expand-dataset":i(n),"is-dataset":e.isDataset(n),highlight:e.getHighlight(n),selected:h(n),selectable:r,filterable:e.filterable},on:{"tag-click":function(t){return e.updateFilterVal("tag",t)},"tag-change":e.onTagChange,toggleHighlights:function(t){return e.updateFilterVal("related",n.hid)},"update:expand-dataset":function(e){return o(n,e)},"update:selected":function(e){return p(n,e)},"view-collection":function(t){return e.$emit("view-collection",n,a)},delete:e.onDelete,undelete:function(t){return e.onUndelete(n)},unhide:function(t){return e.onUnhide(n)}}})]}}],null,!0)})],1)],1)],2)]}}],null,!0)})]}}])})}),[],!1,null,null,null).exports;const Ml={props:{history:{type:Object,required:!0}},data:()=>({name:"",copyAll:!1,loading:!1}),computed:{...(0,o.rn)(Xe.L,["currentUser","isAnonymous"]),title(){return`Copying History: ${this.history.name}`},saveTitle(){return this.loading?"Saving...":"Copy History"},saveVariant(){return this.loading?"info":this.formValid?"primary":"secondary"},userOwnsHistory(){return this.currentUser.id==this.history.user_id},newNameValid(){return(!this.userOwnsHistory||this.name!=this.history.name)&&this.name.length>0},formValid(){return this.newNameValid}},watch:{history:{handler(e){this.name=`Copy of '${e.name}'`},immediate:!0}},methods:{...(0,o.nv)(I.z,["copyHistory"]),async copy(e){this.loading=!0;const{history:t,name:n,copyAll:i}=this;await this.copyHistory(t,n,i),this.loading=!1,e()}}};const Tl=(0,m.Z)(Ml,(function(){var e=this,t=e._self._c;return t("b-modal",e._g(e._b({attrs:{title:e.title,"title-tag":"h2"},scopedSlots:e._u([{key:"modal-footer",fn:function({ok:n,cancel:i}){return t("div",{},[t("div",[t("b-button",{staticClass:"mr-3",on:{click:function(e){return i()}}},[e._v(" Cancel ")]),e._v(" "),t("b-button",{attrs:{variant:e.saveVariant,disabled:e.loading||!e.formValid},on:{click:function(t){return e.copy(n)}}},[e._v("\n                "+e._s(e._f("localize")(e.saveTitle))+"\n            ")])],1)])}}])},"b-modal",e.$attrs,!1),e.$listeners),[t("transition",{attrs:{name:"fade"}},[t("b-alert",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{show:e.isAnonymous,variant:"warning"}},[e._v("\n            As an anonymous user, unless you log in or register, you will lose your current history after copying\n            this history. You can "),t("a",{attrs:{href:"/user/login"}},[e._v("log in here")]),e._v(" or "),t("a",{attrs:{href:"/user/create"}},[e._v("register here")]),e._v(".\n        ")])],1),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.loading?t("div",{staticClass:"d-flex justify-content-center mb-3"},[t("b-spinner",{attrs:{label:"Copying History..."}})],1):e._e()]),e._v(" "),t("transition",[e.loading?e._e():t("b-form",[t("b-form-group",{attrs:{label:"Enter a title for the new history","label-for":"copy-modal-title"}},[t("b-input",{attrs:{id:"copy-modal-title",state:e.newNameValid,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),t("b-form-invalid-feedback",{attrs:{state:e.newNameValid}},[e._v("\n                    Please enter a valid history title.\n                ")])],1),e._v(" "),t("b-form-group",{attrs:{label:"Choose which datasets from the original history to include."}},[t("b-form-radio",{attrs:{value:!1},model:{value:e.copyAll,callback:function(t){e.copyAll=t},expression:"copyAll"}},[e._v("\n                    Copy only the active, non-deleted datasets.\n                ")]),e._v(" "),t("b-form-radio",{attrs:{value:!0},model:{value:e.copyAll,callback:function(t){e.copyAll=t},expression:"copyAll"}},[e._v("\n                    Copy all datasets including deleted ones.\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,Ll={components:{HistoryPanel:Sl,CollectionPanel:Bs,CopyModal:Tl},props:{id:{type:String,required:!0}},data:()=>({selectedCollections:[]}),computed:{...(0,o.rn)(Xe.L,["currentUser"]),...(0,o.rn)(I.z,["getHistoryById","currentHistory"]),history(){return this.getHistoryById(this.id)},userOwnsHistory(){return this.currentUser.id==this.history.user_id},isCurrentHistory(){return this.currentHistory?.id==this.history?.id},isSetAsCurrentDisabled(){return this.isCurrentHistory||this.history.archived||this.history.purged},setAsCurrentTitle(){return this.isCurrentHistory?"This history is already your current history.":this.history.archived?"This history has been archived and cannot be set as your current history. Unarchive it first.":this.history.purged?"This history has been purged and cannot be set as your current history.":"Switch to this history"},canEditHistory(){return this.userOwnsHistory&&!this.history.archived&&!this.history.purged},showHistoryArchived(){return this.history.archived&&this.userOwnsHistory},showHistoryStateInfo(){return this.showHistoryArchived||this.history.purged},historyStateInfoMessage(){return this.showHistoryArchived&&this.history.purged?"This history has been archived and purged.":this.showHistoryArchived?"This history has been archived.":this.history.purged?"This history has been purged.":""},canImportHistory(){return!this.userOwnsHistory&&!this.history.purged}},created(){this.loadHistoryById(this.id)},methods:{...(0,o.nv)(I.z,["loadHistoryById","setCurrentHistory"]),onViewCollection(e){this.selectedCollections=[...this.selectedCollections,e]}}};const Dl=(0,m.Z)(Ll,(function(){var e=this,t=e._self._c;return e.currentUser&&e.history?t("div",{staticClass:"d-flex flex-column h-100"},[e.showHistoryStateInfo?t("b-alert",{attrs:{variant:"info",show:"","data-description":"history state info"}},[e._v("\n        "+e._s(e.historyStateInfoMessage)+"\n    ")]):e._e(),e._v(" "),t("div",{staticClass:"flex-row flex-grow-0 pb-3"},[e.userOwnsHistory?t("b-button",{attrs:{size:"sm",variant:"outline-info",title:e.setAsCurrentTitle,disabled:e.isSetAsCurrentDisabled,"data-description":"switch to history button"},on:{click:function(t){return e.setCurrentHistory(e.history.id)}}},[e._v("\n            Switch to this history\n        ")]):e._e(),e._v(" "),e.canImportHistory?t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:copy-history-modal",arg:"copy-history-modal"}],attrs:{size:"sm",variant:"outline-info",title:"Import this history","data-description":"import history button"}},[e._v("\n            Import this history\n        ")]):e._e()],1),e._v(" "),e.selectedCollections.length&&e.selectedCollections[0].history_id==e.id?t("CollectionPanel",{attrs:{history:e.history,"selected-collections":e.selectedCollections,"show-controls":!1},on:{"update:selectedCollections":function(t){e.selectedCollections=t},"update:selected-collections":function(t){e.selectedCollections=t},"view-collection":e.onViewCollection}}):t("HistoryPanel",{attrs:{history:e.history,writable:e.canEditHistory,"show-controls":!1,filterable:""},on:{"view-collection":e.onViewCollection}}),e._v(" "),t("CopyModal",{attrs:{id:"copy-history-modal",history:e.history}})],1):e._e()}),[],!1,null,null,null).exports,El={components:{PublishedItem:_s,HistoryView:Dl},props:{id:{type:String,required:!0}},data:()=>({history:{}}),created(){const e=`/api/histories/${this.id}`;(0,en.e)({url:e}).then((e=>{this.history=e}))}},Ol=El;const Al=(0,m.Z)(Ol,(function(){var e=this,t=e._self._c;return t("PublishedItem",{attrs:{item:e.history},scopedSlots:e._u([{key:"default",fn:function(){return[t("HistoryView",{attrs:{id:e.id}})]},proxy:!0}])})}),[],!1,null,null,null).exports;u.vI.add(h.mTx);const Il={components:{FontAwesomeIcon:p.GN},props:{offset:{type:Number,default:0}}};const Pl=(0,m.Z)(Il,(function(){var e=this,t=e._self._c;return t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.noninteractive.hover",modifiers:{noninteractive:!0,hover:!0}}],staticClass:"back-to-top",class:{show:e.offset>100},attrs:{title:"Scroll To Top",variant:"info"},on:{click:function(t){return e.$emit("click")}}},[t("FontAwesomeIcon",{attrs:{icon:"fa-chevron-up"}})],1)}),[],!1,null,"eb81f284",null).exports,Rl=[];let jl=!1;function Yl(e){Rl.forEach((t=>{t.callbacks.forEach((t=>{t(e)}))})),window.requestAnimationFrame(Yl)}function Hl(e,t=0){const n=function(e){let t=Rl.find((t=>t.priority===e));return t||(t={priority:e,callbacks:[]},Rl.push(t),Rl.sort(((e,t)=>t.priority-e.priority)),t)}(t);n.callbacks.push(e),jl||(window.requestAnimationFrame(Yl),jl=!0);const i=()=>{const t=n.callbacks.indexOf(e);-1!==t&&n.callbacks.splice(t,1)};return(0,a.onScopeDispose)(i),{stop:i}}function Nl(e){const t=(0,a.ref)(0),n=(0,a.ref)(0),i=(0,a.reactive)({left:!0,right:!1,top:!0,bottom:!1}),{stop:o}=Hl((()=>{const o=(0,Pn.Ly)(e);if(!o)return;const a=o.scrollLeft;a!==t.value&&(t.value=a,i.left=a<=0,i.right=a+o.clientWidth>=o.scrollWidth-1);const s=o.scrollTop;s!==n.value&&(n.value=s,i.top=s<=0,i.bottom=s+o.clientHeight>=o.scrollHeight-1)}));return{scrollLeft:t,scrollTop:n,arrived:i,stop:o}}const Fl={__name:"HistoryPublishedList",props:{fUsername:{type:String,required:!1,default:null}},setup(e){const t=e,n={name:{placeholder:"name",type:String,handler:(0,ln.r3)("name"),menuItem:!0},annotation:{placeholder:"annotation",type:String,handler:(0,ln.r3)("annotation"),menuItem:!0},tag:{placeholder:"tag",type:String,handler:(0,ln.r3)("tags","tag",ln._U),menuItem:!0},user:{placeholder:"user name",type:String,handler:(0,ln.r3)("username"),menuItem:!0},user_eq:{handler:(0,ln.fS)("username"),menuItem:!1},update_time:{placeholder:"updated time",type:Date,handler:(0,ln.qu)("update_time","le",ln.ZU),isRangeInput:!0,menuItem:!0},update_time_ge:{handler:(0,ln.qu)("update_time","ge",ln.ZU),menuItem:!1},update_time_le:{handler:(0,ln.qu)("update_time","le",ln.ZU),menuItem:!1}},i=new ln.ZP(n),o=(0,a.ref)({"-update_time-true":0}),s=(0,a.ref)([]),r=(0,a.ref)([]),l=(0,a.ref)(null),d=(0,a.ref)(!1),c=(0,a.ref)(!0),u=(0,a.ref)(""),h=(0,a.ref)(!1),p=(0,a.ref)("update_time"),f=(0,a.ref)(null),{scrollTop:m}=Nl(f),_=(0,a.ref)(new Set),g=(0,a.computed)((()=>!d.value&&0===s.value.length&&!u.value)),b=(0,a.computed)((()=>!d.value&&0===r.value.length&&u.value)),w=(0,a.computed)((()=>!1===b.value&&null===o.value[S(p.value,c.value)])),k=(0,a.computed)((()=>[{key:"name",sortable:!d.value},{key:"annotation",sortable:!1},{label:"Owner",key:"username",sortable:!1},{label:"Tags",key:"tags",sortable:!1},{label:"Last Updated",key:"update_time",sortable:!d.value}])),C=e=>{u.value=e.trim()},x=()=>{if(s.value=s.value.sort(((e,t)=>{const n=String(e[p.value]).trim(),i=String(t[p.value]).trim();return c.value?i-n:n-i})),u.value){const e=i.getFiltersForText(u.value);r.value=s.value.filter((t=>!!i.testFilters(e,t)))}else r.value=s.value};function S(e,t){return`${i.getQueryString(u.value)}-${e}-${t}`}async function M(){if(d.value)return;if(d.value=!0,w.value)return x(),d.value=!1,void(l.value=null);const e=S(p.value,c.value);let t=o.value[e];void 0===t&&(o.value[e]=0,t=0),await async function({limit:e,offset:t,sortBy:n,sortDesc:i,filterText:o},a){let s=`view=summary&keys=username,username_and_slug&offset=${t}&limit=${e}`;n&&(s+=`&order=${n}${i?"-dsc":"-asc"}`);const r=`/api/histories/published?${s}&${a.getQueryString(o)}`;try{const{data:e}=await v.Z.get((0,D.dq)(r));return e}catch(e){(0,y.t)(e)}}({limit:50,offset:t,sortBy:p.value,sortDesc:c.value,filterText:u.value},i).then((n=>{const i=n.filter((e=>!_.value.has(e.id)));if(s.value=[...s.value,...i],i.forEach((e=>_.value.add(e.id))),x(),r.value.length>t-1&&n.length>=50){const t=u.value?1:0;o.value[e]=0===r.value.length?0:r.value.length+t}else o.value[S("update_time",!0)]=null,o.value[S("update_time",!1)]=null,o.value[S("name",!0)]=null,o.value[S("name",!1)]=null;l.value=null})).catch((e=>{e.value=e})).finally((()=>{d.value=!1}))}return(0,a.onMounted)((async()=>{t.fUsername&&(u.value=i.getFilterText({"user_eq:":t.fUsername})),await M(),(0,rn.MQn)(f.value,(()=>M()))})),(0,a.onUnmounted)((()=>{(0,rn.MQn)(f.value,(()=>{}))})),(0,a.watch)([u,p,c],(async()=>{await M()})),{__sfc:!0,LIMIT:50,validFilters:n,filters:i,props:t,offset:o,allHistories:s,results:r,error:l,loading:d,sortDesc:c,filterText:u,showAdvanced:h,sortBy:p,scrollableDiv:f,scrollTop:m,loadedItemIds:_,noItems:g,noResults:b,allLoaded:w,fields:k,updateFilter:C,setFilter:(e,t)=>{C(i.setFilterValue(u.value,e,t))},onTagsUpdate:(e,t)=>{t.item.tags=e,te(t.item.id,"History",t.item.tags)},scrollToTop:()=>{f.value.scrollTo({top:0,behavior:"smooth"})},sortAndFilterHistories:x,getOffsetKey:S,load:M,FilterMenu:ci,Heading:Dt,LoadingSpan:z.Z,StatelessTags:G.Z,ScrollToTopButton:Pl,UtcDate:J.Z}}},Bl=Fl;var $l=(0,m.Z)(Bl,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("section",{staticClass:"d-flex flex-column position-relative overflow-hidden",attrs:{id:"published-histories"}},[t(n.Heading,{attrs:{h1:""}},[e._v("Published Histories")]),e._v(" "),n.noItems?t("b-alert",{attrs:{variant:"info",show:""}},[e._v("No published histories found.")]):t("div",[t(n.FilterMenu,{attrs:{name:"Published Histories",placeholder:e._f("localize")("Search by name or use the advanced filtering options"),"filter-class":n.filters,"filter-text":n.filterText,loading:n.loading,"show-advanced":n.showAdvanced},on:{"update:filterText":function(e){n.filterText=e},"update:filter-text":function(e){n.filterText=e},"update:showAdvanced":function(e){n.showAdvanced=e},"update:show-advanced":function(e){n.showAdvanced=e}}}),e._v(" "),n.noResults||n.error?t("b-alert",{attrs:{variant:n.error?"danger":"info",show:""}},[t("div",[e._v("\n                No matching entries found for: "),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(n.filterText))])]),e._v(" "),n.error?t("div",[t("i",[e._v(e._s(n.error))])]):e._e()]):e._e(),e._v(" "),0===n.results.length&&n.loading?t("b-alert",{attrs:{variant:"info",show:""}},[t(n.LoadingSpan,{attrs:{message:"Loading published histories"}})],1):e._e()],1),e._v(" "),t("div",{ref:"scrollableDiv",staticClass:"overflow-auto"},[n.results.length?t("b-table",{attrs:{id:"published-histories-table","no-sort-reset":"",striped:"",fields:n.fields,items:n.results,"sort-by":n.sortBy,"sort-desc":n.sortDesc},on:{"update:sortBy":function(e){n.sortBy=e},"update:sort-by":function(e){n.sortBy=e},"update:sortDesc":function(e){n.sortDesc=e},"update:sort-desc":function(e){n.sortDesc=e}},scopedSlots:e._u([{key:"cell(name)",fn:function(n){return[t("router-link",{attrs:{to:`/published/history?id=${n.item.id}`}},[e._v("\n                    "+e._s(n.item.name)+"\n                ")])]}},{key:"cell(username)",fn:function(i){return[t("a",{staticClass:"published-histories-username-link",attrs:{href:"#"},on:{click:function(e){return n.setFilter("user_eq",i.item.username)}}},[e._v(e._s(i.item.username))])]}},{key:"cell(tags)",fn:function(e){return[t(n.StatelessTags,{attrs:{clickable:"",value:e.item.tags,disabled:!0},on:{input:t=>n.onTagsUpdate(t,e),"tag-click":e=>n.setFilter("tag",e)}})]}},{key:"cell(update_time)",fn:function(i){return[i.value?t(n.UtcDate,{attrs:{date:i.value,mode:"elapsed"}}):t("span",[e._v(" - ")])]}}],null,!1,2953420301)}):e._e(),e._v(" "),n.allLoaded?t("div",{staticClass:"list-end my-2"},[e._v("- End of search results -")]):e._e(),e._v(" "),t("b-overlay",{attrs:{show:n.loading,opacity:"0.5"}}),e._v(" "),t(n.ScrollToTopButton,{attrs:{offset:n.scrollTop},on:{click:n.scrollToTop}})],1)],1)}),[],!1,null,null,null);const zl=$l.exports;function Wl(e,t){let n={width:0,height:0},i={width:0,height:0};const o=(e,t)=>e.width===t.width&&e.height===t.height,{stop:a}=Hl((()=>{const a=(0,Pn.Ly)(e);if(!a)return;const s={width:a.clientWidth,height:a.clientHeight},r={width:a.scrollWidth,height:a.scrollHeight};o(n,s)&&o(i,r)||(t({clientSize:s,scrollSize:r},{clientSize:n,scrollSize:i}),n=s,i=r)}));return{stop:a}}const Ul={components:{HistoryPanel:Sl,CollectionPanel:Bs,LoadingSpan:z.Z},props:{source:{type:Object,required:!0},filter:{type:String,default:null}},data:()=>({selectedCollections:[]}),computed:{...(0,o.rn)(I.z,["currentHistoryId","getHistoryById"]),sameToCurrent(){return this.currentHistoryId===this.source.id},getHistory(){return this.getHistoryById(this.source.id)}},methods:{...(0,o.nv)(I.z,["setCurrentHistory","unpinHistory"]),onViewCollection(e){this.selectedCollections=[...this.selectedCollections,e]}}};const Vl=(0,m.Z)(Ul,(function(){var e=this,t=e._self._c;return e.getHistory?t("div",{staticClass:"d-flex flex-column align-items-center w-100",attrs:{id:"list-item"}},[e.selectedCollections.length&&e.selectedCollections[0].history_id===e.source.id?t("CollectionPanel",{attrs:{history:e.getHistory,"selected-collections":e.selectedCollections,"show-controls":!1},on:{"update:selectedCollections":function(t){e.selectedCollections=t},"update:selected-collections":function(t){e.selectedCollections=t},"view-collection":e.onViewCollection}}):t("HistoryPanel",{attrs:{history:e.getHistory,filter:e.filter,"show-controls":!1},on:{"view-collection":e.onViewCollection}}),e._v(" "),t("hr",{staticClass:"w-100 m-2"}),e._v(" "),t("div",{staticClass:"flex-row flex-grow-0"},[t("b-button",{staticClass:"my-1",attrs:{size:"sm",disabled:e.sameToCurrent,variant:e.sameToCurrent?"disabled":"outline-info",title:e.sameToCurrent?"Current History":"Switch to this history"},on:{click:function(t){return e.setCurrentHistory(e.source.id)}}},[e._v("\n            "+e._s(e.sameToCurrent?"Current History":"Switch to")+"\n        ")]),e._v(" "),t("b-button",{staticClass:"my-1",attrs:{size:"sm",variant:"outline-danger",title:"Hide this history from the list"},on:{click:function(t){return e.unpinHistory(e.source.id)}}},[e._v("\n            Hide\n        ")])],1)],1):t("div",{staticClass:"container"},[t("div",{staticClass:"row align-items-center h-100"},[t("LoadingSpan",{staticClass:"mx-auto",attrs:{message:"Loading History"}})],1)])}),[],!1,null,null,null).exports;var ql=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Zl=(0,a.defineComponent)({__name:"MultipleViewList",props:{histories:null,selectedHistories:null,filter:{default:""}},setup(e){const t=e,n=(0,I.z)(),i=(0,a.ref)(null),{arrived:o}=Nl(i),s=(0,a.ref)(!1);Wl(i,(({clientSize:e,scrollSize:t})=>{s.value=t.width>=e.width+1}));const r=(0,a.computed)((()=>!s.value||o.left)),l=(0,a.computed)((()=>!s.value||o.right)),d=(0,a.ref)(!1),c=(0,a.computed)((()=>d.value?(0,Ee.ZP)("Create new history with this item"):(0,Ee.ZP)("Select histories"))),u=(0,a.ref)(!1);return{__sfc:!0,historyStore:n,props:t,scrollContainer:i,arrived:o,isScrollable:s,scrolledLeft:r,scrolledRight:l,showDropZone:d,historyPickerText:c,processingDrop:u,onDrop:function(e){return ql(this,void 0,void 0,(function*(){if(u.value)return void(d.value=!1);let t;u.value=!0,d.value=!1;try{t=JSON.parse(e.dataTransfer.getData("text"))[0]}catch(e){}if(t){yield n.createNewHistory();const e=n.currentHistoryId,i="dataset"===t.history_content_type?"hda":"hdca";e&&(yield(0,K.Bm)(t.id,e,t.history_content_type,i).then((()=>{"dataset"===t.history_content_type?oo.FN.info((0,Ee.ZP)("Dataset copied to new history")):oo.FN.info((0,Ee.ZP)("Collection copied to new history")),n.loadHistoryById(e)})).catch((e=>{oo.FN.error(e)})),n.pinHistory(e)),u.value=!1}}))},VirtualList:Rs(),HistoryDropZone:yr,MultipleViewItem:Vl}}}),Gl=Zl;const Jl=(0,m.Z)(Gl,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"list-container h-100",class:{"scrolled-left":n.scrolledLeft,"scrolled-right":n.scrolledRight}},[t("div",{ref:"scrollContainer",staticClass:"d-flex h-100 w-auto overflow-auto"},[n.props.selectedHistories.length?t(n.VirtualList,{staticClass:"d-flex",attrs:{"estimate-size":n.props.selectedHistories.length,"data-key":"id","data-component":n.MultipleViewItem,"data-sources":n.props.selectedHistories,direction:"horizontal","extra-props":{filter:e.filter},"item-style":{width:"15rem"},"item-class":"d-flex mx-1 mt-1","wrap-class":"row flex-nowrap m-0"}}):e._e(),e._v(" "),t("div",{staticClass:"history-picker text-primary d-flex m-3 align-items-center text-nowrap",on:{click:function(t){return t.stopPropagation(),e.$emit("update:show-modal",!0)},drop:function(e){return e.preventDefault(),n.onDrop.apply(null,arguments)},dragenter:function(e){e.preventDefault(),n.showDropZone=!0},dragover:function(e){e.preventDefault()},dragleave:function(e){e.preventDefault(),n.showDropZone=!1}}},[e._v("\n            "+e._s(n.historyPickerText)+"\n            "),n.showDropZone?t(n.HistoryDropZone,{staticStyle:{left:"0"}}):e._e()],1)],1)])}),[],!1,null,"742b76ce",null).exports;var Kl=n(26034),Xl=n(70322),Ql=n(88367),ed=n(72307),td=n.n(ed),nd=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const id=(0,a.defineComponent)({__name:"SelectorModal",props:{multiple:{type:Boolean,default:!1},title:{type:String,default:"Switch to history"},histories:{type:Array,default:()=>[]},additionalOptions:{type:Array,default:()=>[]},showModal:{type:Boolean,default:!1}},emits:["selectHistory","selectHistories","update:show-modal"],setup(e,{emit:t}){const n=e,i={name:{placeholder:"name",type:String,handler:(0,ln.r3)("name"),menuItem:!0},tag:{placeholder:"tag",type:String,handler:(0,ln.r3)("tags","tag",ln._U),menuItem:!0},annotation:{placeholder:"annotation",type:String,handler:(0,ln.r3)("annotation"),menuItem:!0},update_time:{placeholder:"updated time",type:Date,handler:(0,ln.qu)("update_time","le",ln.ZU),isRangeInput:!0,menuItem:!0},update_time_ge:{handler:(0,ln.qu)("update_time","ge",ln.ZU),menuItem:!1},update_time_le:{handler:(0,ln.qu)("update_time","le",ln.ZU),menuItem:!1}},s=new ln.ZP(i);u.vI.add(h.rWw,h.$Wj,zo.zD,h.r5q);const r=(0,a.computed)({get:()=>n.showModal,set:e=>{t("update:show-modal",e)}}),l=(0,a.ref)([]),d=(0,a.ref)(""),c=(0,a.ref)(!1),f=(0,a.ref)(!1),m=(0,a.ref)(null),_=(0,a.ref)(null),v=(0,I.z)(),{currentHistoryId:g,totalHistoryCount:y}=(0,o.Jk)((0,I.z)()),{currentUser:b}=(0,o.Jk)((0,Xe.L)()),w=(0,a.computed)((()=>v.pinnedHistories)),k=(0,a.computed)((()=>d.value&&0==M.value.length)),C=(0,a.computed)((()=>d.value&&d.value.length>2)),x=(0,a.computed)((()=>y.value<=M.value.length));(0,a.onMounted)((()=>nd(this,void 0,void 0,(function*(){(0,rn.MQn)(_.value,(()=>L()))})))),(0,a.watch)((()=>r.value),(e=>{n.multiple&&e&&(l.value=[...w.value])}),{immediate:!0}),(0,a.onUnmounted)((()=>{(0,rn.MQn)(_.value,(()=>{}))})),(0,a.watch)((()=>d.value),((e,t)=>nd(this,void 0,void 0,(function*(){""!==e&&C.value&&e!==t&&(yield L(!0))}))));const S=(0,a.ref)([]);(0,a.watch)((()=>n.histories),(e=>{S.value=e.filter((e=>{var t,n;return!e.user_id||!(null===(t=b.value)||void 0===t?void 0:t.isAnonymous)&&e.user_id===(null===(n=b.value)||void 0===n?void 0:n.id)}))}),{immediate:!0});const M=(0,a.computed)((()=>{let e=[];if(C.value){const t=s.getFiltersForText(d.value);e=S.value.filter((e=>!!s.testFilters(t,e)))}else e=S.value;return e.sort(((e,t)=>e.id==g.value?-1:t.id==g.value||e.update_time<t.update_time?1:-1))}));const T=(0,Nn.tv)();function L(e=!1){return nd(this,void 0,void 0,(function*(){if(!c.value&&(e||!e&&!d.value&&!x.value)){c.value=!0;const e=d.value&&s.getQueryString(d.value);yield v.loadHistories(!0,e),c.value=!1}}))}return{__sfc:!0,validFilters:i,HistoriesFilters:s,props:n,emit:t,propShowModal:r,selectedHistories:l,filter:d,busy:c,showAdvanced:f,modal:m,scrollableDiv:_,historyStore:v,currentHistoryId:g,totalHistoryCount:y,currentUser:b,pinnedHistories:w,hasNoResults:k,validFilter:C,allLoaded:x,historiesProxy:S,filtered:M,historyClicked:function(e){var i;if(n.multiple){const t=l.value.findIndex((t=>t.id==e.id));-1!==t?l.value.splice(t,1):l.value.push({id:e.id})}else t("selectHistory",e),null===(i=m.value)||void 0===i||i.hide()},selectHistories:function(){var e;t("selectHistories",l.value),l.value=w.value,null===(e=m.value)||void 0===e||e.hide()},router:T,setCurrentHistory:function(e){var t;v.setCurrentHistory(e.id),null===(t=m.value)||void 0===t||t.hide()},setCenterPanelHistory:function(e){var t;T.push(`/histories/view?id=${e.id}`),null===(t=m.value)||void 0===t||t.hide()},setFilterValue:function(e,t){d.value=s.setFilterValue(d.value,e,t)},openInMulti:function(e){var t;T.push("/histories/view_multiple"),v.pinHistory(e.id),v.loadHistoryById(e.id),null===(t=m.value)||void 0===t||t.hide()},loadMore:L,FontAwesomeIcon:p.GN,BBadge:Kl.k,BButton:jn.T,BButtonGroup:_o.a,BFormGroup:Gi.x,BListGroup:Xl.N,BListGroupItem:Ql.f,BModal:Nr.N,isEqual:td(),localize:Ee.ZP,FilterMenu:ci,Heading:Dt,StatelessTags:G.Z,UtcDate:J.Z}}}),od=id;const ad=(0,m.Z)(od,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t(n.BModal,e._g(e._b({ref:"modal",staticClass:"history-selector-modal",attrs:{static:""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[t(n.Heading,{attrs:{h2:"",inline:"",size:"sm"}},[e._v(e._s(n.localize(e.title)))])]},proxy:!0},{key:"modal-footer",fn:function(){return[n.allLoaded?e._e():t("div",{staticClass:"mr-auto"},[t("i",[e._v("Loaded "+e._s(n.filtered.length)+" out of "+e._s(n.totalHistoryCount)+" histories")]),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.noninteractive.hover",modifiers:{noninteractive:!0,hover:!0}}],staticClass:"load-more-hist-button",attrs:{size:"sm",title:"Load More",variant:"link"},on:{click:function(e){return n.loadMore()}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-arrow-down"}})],1)],1),e._v(" "),e.multiple?t(n.BButton,{directives:[{name:"localize",rawName:"v-localize"}],attrs:{disabled:0===n.selectedHistories.length||n.isEqual(n.selectedHistories,n.pinnedHistories),variant:"primary"},on:{click:n.selectHistories}},[e._v("\n                Change Selected\n            ")]):t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(" Click a history to switch to it ")])]},proxy:!0}]),model:{value:n.propShowModal,callback:function(e){n.propShowModal=e},expression:"propShowModal"}},"BModal",e.$attrs,!1),e.$listeners),[e._v(" "),t(n.BFormGroup,{attrs:{description:n.localize("Filter histories")}},[t(n.FilterMenu,{ref:"filterMenuRef",attrs:{name:"Histories",placeholder:"search histories","filter-class":n.HistoriesFilters,"filter-text":n.filter,loading:n.busy,"show-advanced":n.showAdvanced},on:{"update:filterText":function(e){n.filter=e},"update:filter-text":function(e){n.filter=e},"update:showAdvanced":function(e){n.showAdvanced=e},"update:show-advanced":function(e){n.showAdvanced=e}}})],1),e._v(" "),n.filter&&!n.validFilter?t(n.BBadge,{staticClass:"alert-danger w-100"},[e._v("Search string too short!")]):!n.busy&&n.hasNoResults?t("b-alert",{attrs:{variant:"danger",show:""}},[e._v("No histories found.")]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!n.showAdvanced,expression:"!showAdvanced"}],ref:"scrollableDiv",staticClass:"history-selector-modal-list"},[t(n.BListGroup,[e._l(n.filtered,(function(i){return t(n.BListGroupItem,{key:i.id,class:{current:i.id===n.currentHistoryId},attrs:{"data-pk":i.id,button:"",active:n.selectedHistories.some((e=>e.id===i.id))},on:{click:()=>n.historyClicked(i)}},[t("div",{staticClass:"d-flex justify-content-between align-items-center"},[t(n.Heading,{attrs:{h3:"",inline:"",bold:"",size:"text"}},[e._v("\n                            "+e._s(i.name)+"\n                            "),i.id===n.currentHistoryId?t("i",[e._v("(Current)")]):e._e()]),e._v(" "),t("div",{staticClass:"d-flex align-items-center flex-gapx-1"},[t(n.BBadge,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{pill:"",title:n.localize("Amount of items in history")}},[e._v("\n                                "+e._s(i.count)+" "+e._s(n.localize("items"))+"\n                            ")]),e._v(" "),i.update_time?t(n.BBadge,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{pill:"",title:n.localize("Last edited")}},[t(n.UtcDate,{attrs:{date:i.update_time,mode:"elapsed"}})],1):e._e()],1)],1),e._v(" "),i.annotation?t("p",{staticClass:"my-1"},[e._v(e._s(i.annotation))]):e._e(),e._v(" "),i.tags.length>0?t(n.StatelessTags,{staticClass:"my-1",attrs:{value:i.tags,disabled:!0,"max-visible-tags":10},on:{"tag-click":function(e){return n.setFilterValue("tag",e)}}}):e._e(),e._v(" "),n.props.additionalOptions.length>0?t("div",{staticClass:"d-flex justify-content-end align-items-center mt-1"},[t(n.BButtonGroup,[n.props.additionalOptions.includes("set-current")?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"p-0 px-1",attrs:{title:n.localize("Set as current history"),variant:"link"},on:{click:function(e){return e.stopPropagation(),(()=>n.setCurrentHistory(i)).apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-sign-in-alt"}})],1):e._e(),e._v(" "),n.props.additionalOptions.includes("multi")?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"p-0 px-1",attrs:{title:n.localize("Open in multi-view"),variant:"link"},on:{click:function(e){return e.stopPropagation(),(()=>n.openInMulti(i)).apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-columns"}})],1):e._e(),e._v(" "),n.props.additionalOptions.includes("center")?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"p-0 px-1",attrs:{title:n.localize("Open in center panel"),variant:"link"},on:{click:function(e){return e.stopPropagation(),(()=>n.setCenterPanelHistory(i)).apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"far fa-list-alt"}})],1):e._e()],1)],1):e._e()],1)})),e._v(" "),t("div",[n.allLoaded||""!==n.filter?t("div",{staticClass:"list-end my-2"},[1==n.filtered.length?t("span",[e._v("- "+e._s(n.filtered.length)+" history loaded -")]):n.filtered.length>1?t("span",[e._v("- All "+e._s(n.filtered.length)+" histories loaded -")]):e._e()]):e._e(),e._v(" "),t("b-overlay",{attrs:{show:n.busy,opacity:"0.5"}})],1)],2)],1)],1)],1)}),[],!1,null,null,null).exports;var sd=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const rd=(0,a.defineComponent)({__name:"MultipleView",setup(e){const t=(0,a.ref)(""),n=(0,a.ref)(!1);u.vI.add(h.NBC);const{currentUser:i}=(0,o.Jk)((0,Xe.L)()),{histories:s,currentHistory:r}=(0,o.Jk)((0,I.z)()),l=(0,I.z)(),d=(0,a.computed)((()=>l.pinnedHistories)),c=(0,a.computed)((()=>!d.value.length&&s.value.length>0)),f=(0,a.ref)(!0),m=(0,a.ref)(null);return(0,a.onMounted)((()=>sd(this,void 0,void 0,(function*(){f.value=!0,m.value=(0,a.watchEffect)((()=>{1==c.value&&(l.pinHistory(s.value[0].id),m.value&&m.value())})),f.value=!1})))),{__sfc:!0,filter:t,showSelectModal:n,currentUser:i,histories:s,currentHistory:r,historyStore:l,selectedHistories:d,noHistoriesInView:c,loadingPinnedHistories:f,stopStoreWatcher:m,addHistoriesToList:function(e){d.value.filter((t=>!e.some((e=>e.id===t.id)))).forEach((e=>{l.unpinHistory(e.id)})),e.forEach((e=>{d.value.some((t=>t.id===e.id))||(l.pinHistory(e.id),l.loadHistoryById(e.id))}))},updateFilter:function(e){t.value=e},FontAwesomeIcon:p.GN,localize:Ee.ZP,MultipleViewList:Jl,SelectorModal:ad,LoadingSpan:z.Z}}}),ld=rd;const dd=(0,m.Z)(ld,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.currentUser?t("div",[n.loadingPinnedHistories?t("b-alert",{staticClass:"m-2",attrs:{variant:"info",show:""}},[t(n.LoadingSpan,{attrs:{message:"Loading Histories"}})],1):n.histories.length?t("div",{staticClass:"multi-history-panel d-flex flex-column h-100"},[t("b-input-group",{staticClass:"w-100"},[t("b-form-input",{class:n.filter&&"font-weight-bold",attrs:{size:"sm",debounce:"500",placeholder:n.localize("search datasets in selected histories"),"data-description":"filter text input"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:n.updateFilter("")}},model:{value:n.filter,callback:function(e){n.filter=e},expression:"filter"}}),e._v(" "),t("b-input-group-append",[t("b-button",{attrs:{size:"sm","data-description":"show deleted filter toggle"},on:{click:function(e){return n.updateFilter("")}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-times"}})],1)],1)],1),e._v(" "),t(n.MultipleViewList,{attrs:{histories:n.histories,filter:n.filter,"current-history":n.currentHistory,"selected-histories":n.selectedHistories,"show-modal":n.showSelectModal},on:{"update:showModal":function(e){n.showSelectModal=e},"update:show-modal":function(e){n.showSelectModal=e}}})],1):t("b-alert",{staticClass:"m-2",attrs:{variant:"danger",show:""}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"font-weight-bold"},[e._v("No History found.")])]),e._v(" "),t(n.SelectorModal,{directives:[{name:"show",rawName:"v-show",value:n.showSelectModal,expression:"showSelectModal"}],attrs:{multiple:!0,histories:n.histories,"additional-options":["center","set-current"],"show-modal":n.showSelectModal,title:"Select/Deselect histories"},on:{"update:showModal":function(e){n.showSelectModal=e},"update:show-modal":function(e){n.showSelectModal=e},selectHistories:n.addHistoriesToList}})],1):e._e()}),[],!1,null,null,null).exports;u.vI.add(h.sqG),a.default.use(d.ZPm);const cd={components:{JobInformation:ot.Z,FontAwesomeIcon:p.GN},props:{job:{type:Object,required:!0},header:{type:String,default:"Job ended in error"}},data:()=>({expanded:!1,showInfo:!1}),computed:{errorClasses(){const e=["code"];return this.expanded||e.push("preview"),e}},methods:{toggleExpanded(){this.expanded=!this.expanded}}};const ud=(0,m.Z)(cd,(function(){var e=this,t=e._self._c;return t("b-card",{attrs:{"border-variant":"danger",header:e.header}},[t("b-card-text",[t("div",{on:{click:function(t){e.showInfo=!0}}},[t("a",{attrs:{href:"#"}},[e._v("See full job details "),t("FontAwesomeIcon",{attrs:{icon:"info-circle"}})],1)]),e._v(" "),e.job.stderr?t("div",{staticClass:"error-wrapper",on:{click:e.toggleExpanded}},[e._v("\n            Job Standard Error\n            "),t("pre",{class:e.errorClasses},[e._v(e._s(e.job.stderr))]),e._v(" "),e.expanded?e._e():t("b",[e._v("(Click to expand job standard error)")])]):e._e()]),e._v(" "),t("b-modal",{attrs:{"modal-class":"job-information-modal",scrollable:"","ok-only":"","hide-header":""},model:{value:e.showInfo,callback:function(t){e.showInfo=t},expression:"showInfo"}},[t("JobInformation",{attrs:{job_id:e.job.id,"include-times":!0}})],1)],1)}),[],!1,null,"681bc2c5",null).exports;var hd=n(86290);function pd(e,t=null,n=1e3){const i=`${(0,g.getAppRoot)()}api/jobs/${e}?full=true`,o=function(e,a){v.Z.get(i).then((i=>{const s=i.data.state;null!==t&&t(s),-1!==hd.Z.NON_TERMINAL_STATES.indexOf(s)?setTimeout(o,n,e,a):-1!==hd.Z.ERROR_STATES.indexOf(s)?a(i):e(i)})).catch(a)};return new Promise(o)}u.vI.add(h.nNP);const fd={components:{BModal:Nr.N,JobInformation:ot.Z,FontAwesomeIcon:p.GN},props:{historyExport:{type:Object,required:!0}},data:()=>({details:!1}),computed:{link(){return this.historyExport.external_download_permanent_url}},methods:{showDetails(){this.details=!0},copyUrl(){(0,Be.J)(this.link,"Export URL copied to your clipboard")}}};const md=(0,m.Z)(fd,(function(){var e=this,t=e._self._c;return t("span",[t("b",[t("a",{staticClass:"generated-export-link",attrs:{href:e.link}},[e._v(e._s(e.link))])]),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Copy export URL to your clipboard"}},[t("FontAwesomeIcon",{staticClass:"copy-export-link",staticStyle:{cursor:"pointer"},attrs:{icon:"link"},on:{click:e.copyUrl}})],1),e._v(" "),t("i",{attrs:{title:"Information about when the history export was generated is included in the job details. Additionally, if there are issues with export, the job details may help figure out the underlying problem or communicate issues to your Galaxy administrator."}},[e._v("\n        ("),t("b-link",{staticClass:"show-job-link",attrs:{href:"#"},on:{click:e.showDetails}},[e._v("view job details")]),e._v(")\n    ")],1),e._v(" "),t("BModal",{attrs:{"modal-class":"job-information-modal",scrollable:"","ok-only":"","hide-header":""},model:{value:e.details,callback:function(t){e.details=t},expression:"details"}},[t("JobInformation",{attrs:{job_id:e.historyExport.job_id,"include-times":!0}})],1)],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const _d={components:{LoadingSpan:z.Z,ExportLink:md,JobError:ud},props:{historyId:{type:String,required:!0}},data:()=>({errorMessage:null,exportsInitialized:!1,exports:null,loadingExports:!1,waitingOnJob:!1,jobError:null}),computed:{hasExports(){return null!==this.exports&&this.exports.length>0},latestExport(){return this.exports&&this.exports[0]},readyExports(){return(this.exports||[]).filter((e=>e.ready))},hasReadyExport(){return null!==this.latestReadyExport},latestReadyExport(){return this.readyExports.length>0?this.readyExports[0]:null},latestExportReady(){return this.latestExport?.ready&&this.latestExport?.up_to_date},latestExportPreparing(){return this.latestExport?.preparing},whyNoLink(){return this.hasExports?"previous history export archival likely failed":"no history export ever initiated for this history"}},created(){this.exportsInitialized||(this.exportsInitialized=!0,this.loadExports())},methods:{loadExports(){this.loadingExports=!0;const e=`${(0,g.getAppRoot)()}api/histories/${this.historyId}/exports`;v.Z.get(e).then((e=>{this.loadingExports=!1,this.exports=e.data,this.latestExportPreparing?this.waitOnExportJob(this.latestExport.job_id):this.waitingOnJob=!1})).catch(this.handleError)},regenerateExport(){this.waitingOnJob=!0;const e=`${(0,g.getAppRoot)()}api/histories/${this.historyId}/exports`;v.Z.put(e).then((e=>{const t=e.status;200==t?this.loadExports():202==t?this.waitOnExportJob(e.data.job_id):this.errorMessage=`Unexpected error while polling history export ${(0,y.a)(e)}`})).catch(this.handleError)},waitOnExportJob(e){this.waitingOnJob=!0,this.jobError=!1,pd(e).then((e=>{this.waitingOnJob=!1,this.loadExports()})).catch(this.handleError)},handleError(e){this.waitingOnJob=!1,this.loadingExports=!1,this.errorMessage=(0,y.a)(e,"Error generating a history export link"),e?.data?.stderr&&(this.jobError=e.data)}}};const vd=(0,m.Z)(_d,(function(){var e=this,t=e._self._c;return t("div",[e.errorMessage?t("b-alert",{attrs:{show:"",variant:"danger",dismissible:""},on:{dismissed:function(t){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n        "),e.jobError?t("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History export job ended in error",job:e.jobError}}):e._e()],1):e._e(),e._v(" "),e.loadingExports?t("div",[t("LoadingSpan",{attrs:{message:"Loading history export information from Galaxy server."}})],1):e.waitingOnJob?t("div",[t("LoadingSpan",{attrs:{message:"Galaxy server is preparing history for download, this will likely take a while."}})],1):e.latestExportReady?t("div",[e._v("\n        Link for download ready\n        "),t("ExportLink",{attrs:{"history-export":e.latestExport}}),e._v(" "),t("p",[e._v("Use this link to download the archive or import it on another Galaxy server.")]),e._v(" "),t("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("History archives are removed at regular intervals. For permanent storage download the archive, export\n            to a remote file or import the archive on another Galaxy server.\n        ")])],1):e.hasReadyExport?t("div",[t("p",[e._v("An out of date export is ready "),t("ExportLink",{attrs:{"history-export":e.latestReadyExport}}),e._v(".")],1),e._v(" "),t("p",[e._v("\n            The history has changed since this export was generated,\n            "),t("a",{staticClass:"export-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.regenerateExport.apply(null,arguments)}}},[e._v("click here to generate a new archive for the current history state")]),e._v(".\n        ")])]):t("div",[t("p",[e._v("No link for history export ready, "+e._s(e.whyNoLink)+".")]),e._v(" "),t("p",[t("b",[t("a",{staticClass:"export-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.regenerateExport.apply(null,arguments)}}},[e._v("Click here to generate a new archive for this history.")])])])])],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const gd={components:{ExportForm:eo.Z,LoadingSpan:z.Z,JobError:ud},props:{historyId:{type:String,required:!0}},data:()=>({errorMessage:null,waitingOnJob:!1,jobComplete:!1,jobError:null}),methods:{doExport(e,t){const n={directory_uri:e,file_name:t};this.waitingOnJob=!0;const i=`${(0,g.getAppRoot)()}api/histories/${this.historyId}/exports`;v.Z.put(i,n).then((e=>{pd(e.data.job_id).then((e=>{this.waitingOnJob=!1,this.jobComplete=!0})).catch(this.handleError)})).catch(this.handleError)},reset(){this.jobComplete=!1,this.errorMessage=null,this.name="",this.directory="",this.jobError=null},handleError(e){this.waitingOnJob=!1,this.errorMessage=(0,y.a)(e,"History export failed."),e?.data?.stderr&&(this.jobError=e.data)}}},yd=gd;const bd=(0,m.Z)(yd,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"export-to-remote-file"},[e.errorMessage?t("b-alert",{attrs:{show:"",variant:"danger",dismissible:""},on:{dismissed:function(t){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n        "),e.jobError?t("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History export job ended in error",job:e.jobError}}):e._e()],1):e._e(),e._v(" "),e.waitingOnJob?t("div",[t("LoadingSpan",{attrs:{message:"Executing history export job, this will likely take a while."}})],1):e.jobComplete?t("div",[t("b-alert",{attrs:{show:"",variant:"success",dismissible:""},on:{dismissed:e.reset}},[t("h2",{staticClass:"h-sm"},[e._v("Done!")]),e._v(" "),t("p",[e._v("History successfully exported.")])])],1):t("ExportForm",{attrs:{what:"history archive"},on:{export:e.doExport}})],1)}),[],!1,null,null,null).exports,wd=(0,a.defineComponent)({__name:"Index",props:{historyId:null},setup(e){const t=e,{isLoading:n,hasWritable:i}=Mi();return{__sfc:!0,initializingFileSources:n,hasWritableFileSources:i,props:t,BCard:vi._,BTab:gi.L,BTabs:yi.M,ToLink:vd,ToRemoteFile:bd}}});const kd=(0,m.Z)(wd,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{staticClass:"history-export-component"},[t("h1",{staticClass:"h-lg"},[e._v("Export history archive")]),e._v(" "),n.initializingFileSources?t("span",[t("loading-span",{attrs:{message:"Loading file sources configuration from Galaxy server."}})],1):n.hasWritableFileSources?t("span",[t(n.BCard,{attrs:{"no-body":""}},[t(n.BTabs,{attrs:{pills:"",card:"",vertical:""}},[t(n.BTab,{attrs:{title:"to a link","title-link-class":"tab-export-to-link",active:""}},[t("b-card-text",[t(n.ToLink,{attrs:{"history-id":n.props.historyId}})],1)],1),e._v(" "),t(n.BTab,{attrs:{title:"to a remote file","title-link-class":"tab-export-to-file"}},[t("b-card-text",[t(n.ToRemoteFile,{attrs:{"history-id":n.props.historyId}})],1)],1)],1)],1)],1):t("span",[t(n.ToLink,{attrs:{"history-id":n.props.historyId}})],1)])}),[],!1,null,null,null).exports;u.vI.add(h.cC_),u.vI.add(h.cf$),u.vI.add(h.Xjp),a.default.use(d.ZPm);const Cd={components:{FilesInput:so.Z,FontAwesomeIcon:p.GN,JobError:ud,LoadingSpan:z.Z,ExternalLink:ao.Z},setup(){const e=(0,a.ref)(""),t=(0,Pn.Dp)(e,200),n=/\/u(ser)?\/.+\/h(istory)?\/.+/,i=(0,a.ref)(!1);return(0,a.watch)((()=>t.value),(e=>{const t=e??"";i.value=Boolean(t.match(n))})),{sourceURL:e,showImportUrlWarning:i}},data:()=>({initializing:!0,importType:"externalUrl",sourceFile:null,sourceRemoteFilesUri:"",errorMessage:null,waitingOnJob:!1,complete:!1,jobError:null,hasFileSources:!1}),computed:{importReady(){const e=this.importType;return"externalUrl"==e?!!this.sourceURL:"upload"==e?!!this.sourceFile:"remoteFilesUri"==e&&!!this.sourceRemoteFilesUri},historyLink:()=>`${(0,g.getAppRoot)()}histories/list`},watch:{importType(){"remoteFilesUri"!=this.importType||this.sourceRemoteFilesUri||this.$refs.filesInput.selectFile()}},async mounted(){await this.initialize()},methods:{async initialize(){const e=await(0,xi.Oq)();this.hasFileSources=e.length>0,this.initializing=!1},submit:function(e){const t=new FormData,n=this.importType;"externalUrl"==n?t.append("archive_source",this.sourceURL):"upload"==n?(t.append("archive_file",this.sourceFile),t.append("archive_source","")):"remoteFilesUri"==n&&t.append("archive_source",this.sourceRemoteFilesUri),v.Z.post(`${(0,g.getAppRoot)()}api/histories`,t).then((e=>{this.waitingOnJob=!0,pd(e.data.id).then((e=>{this.waitingOnJob=!1,this.complete=!0})).catch(this.handleError)})).catch(this.handleError)},handleError:function(e){this.waitingOnJob=!1,this.errorMessage=(0,y.a)(e,"History import failed."),e?.data?.stderr&&(this.jobError=e.data)}}};const xd=(0,m.Z)(Cd,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"history-import-component",attrs:{"aria-labelledby":"history-import-heading"}},[t("h1",{staticClass:"h-lg",attrs:{id:"history-import-heading"}},[e._v("Import a history from an archive")]),e._v(" "),e.errorMessage?t("b-alert",{attrs:{variant:"danger",dismissible:"",show:""},on:{dismissed:function(t){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n        "),e.jobError?t("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History import job ended in error",job:e.jobError}}):e._e()],1):e._e(),e._v(" "),e.initializing?t("div",[t("LoadingSpan",{attrs:{message:"Loading server configuration."}})],1):e.waitingOnJob?t("div",[t("LoadingSpan",{attrs:{message:"Waiting on history import job, this may take a while."}})],1):e.complete?t("div",[t("b-alert",{attrs:{show:e.complete,variant:"success",dismissible:""},on:{dismissed:function(t){e.complete=!1}}},[t("span",{staticClass:"mb-1 h-sm"},[e._v("Done!")]),e._v(" "),t("p",[e._v("History imported, check out "),t("a",{attrs:{href:e.historyLink}},[e._v("your histories")]),e._v(".")])])],1):t("div",[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"How would you like to specify the history archive?"},scopedSlots:e._u([{key:"default",fn:function({ariaDescribedby:n}){return[t("b-form-radio-group",{attrs:{"aria-describedby":n,name:"import-type",stacked:""},model:{value:e.importType,callback:function(t){e.importType=t},expression:"importType"}},[t("b-form-radio",{attrs:{value:"externalUrl"}},[e._v("\n                        Export URL from another Galaxy instance\n                        "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}})],1),e._v(" "),t("b-form-radio",{attrs:{value:"upload"}},[e._v("\n                        Upload local file from your computer\n                        "),t("FontAwesomeIcon",{attrs:{icon:"upload"}})],1),e._v(" "),e.hasFileSources?t("b-form-radio",{attrs:{value:"remoteFilesUri"}},[e._v("\n                        Select a remote file (e.g. Galaxy's FTP)\n                        "),t("FontAwesomeIcon",{attrs:{icon:"folder-open"}})],1):e._e()],1)]}}])}),e._v(" "),"externalUrl"===e.importType?t("b-form-group",{attrs:{label:"Archived History URL"}},[e.showImportUrlWarning?t("b-alert",{attrs:{variant:"warning",show:""}},[e._v("\n                    It looks like you are trying to import a published history from another galaxy instance. You can\n                    only import histories via an archive URL.\n                    "),t("ExternalLink",{attrs:{href:"https://training.galaxyproject.org/training-material/faqs/galaxy/histories_transfer_entire_histories_from_one_galaxy_server_to_another.html"}},[e._v("\n                        Read more on the GTN\n                    ")])],1):e._e(),e._v(" "),t("b-form-input",{attrs:{type:"url"},model:{value:e.sourceURL,callback:function(t){e.sourceURL=t},expression:"sourceURL"}})],1):"upload"===e.importType?t("b-form-group",{attrs:{label:"Archived History File"}},[t("b-form-file",{model:{value:e.sourceFile,callback:function(t){e.sourceFile=t},expression:"sourceFile"}})],1):e._e(),e._v(" "),t("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"remoteFilesUri"===e.importType,expression:"importType === 'remoteFilesUri'"}],attrs:{label:"Remote File"}},[t("FilesInput",{ref:"filesInput",model:{value:e.sourceRemoteFilesUri,callback:function(t){e.sourceRemoteFilesUri=t},expression:"sourceRemoteFilesUri"}})],1),e._v(" "),t("b-button",{staticClass:"import-button",attrs:{variant:"primary",type:"submit",disabled:!e.importReady}},[e._v("\n                Import history\n            ")])],1)],1)],1)}),[],!1,null,"2a57a93a",null).exports;class Sd{constructor(e={}){this.root=e.root||(0,g.getAppRoot)()}async stopInteractiveTool(e){const t=`${this.root}api/entry_points/${e}`;return(await v.Z.delete(t)).data}catch(e){(0,y.t)(e)}}u.vI.add(h.Xjp);const Md={components:{UtcDate:J.Z,FontAwesomeIcon:p.GN},data:()=>({error:null,fields:[{label:"",key:"checkbox"},{label:"Name",key:"name",sortable:!0},{label:"Job Info",key:"job_info",sortable:!0},{label:"Created",key:"created_time",sortable:!0},{label:"Last Updated",key:"last_updated",sortable:!0}],filter:"",messages:[],nInteractiveTools:0}),computed:{...(0,o.rn)(Vo.B,{activeInteractiveTools:"entryPoints"}),showNotFound(){return 0===this.nInteractiveTools&&this.filter&&!this.isActiveToolsListEmpty},isCheckboxMarked(){return this.activeInteractiveTools.some((e=>e.marked))},isActiveToolsListEmpty(){return 0===this.activeInteractiveTools.length}},created(){this.root=(0,g.getAppRoot)(),this.services=new Sd({root:this.root}),this.load()},methods:{...(0,o.nv)(Vo.B,["ensurePollingEntryPoints","removeEntryPoint"]),load(){this.ensurePollingEntryPoints(),this.filter=""},filtered:function(e){this.nInteractiveTools=e.length},stopInteractiveToolSession(){this.activeInteractiveTools.filter((e=>e.marked)).map((e=>this.services.stopInteractiveTool(e.id).then((t=>{this.removeEntryPoint(e.id)})).catch((t=>{this.messages.push(`Failed to stop interactive tool ${e.name}: ${t.message}`)}))))},createId:(e,t)=>e+"-"+t}};var Td=(0,m.Z)(Md,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"interactive-tools-heading"}},[e._l(e.messages,(function(n,i){return t("b-alert",{key:i,attrs:{show:3,variant:"danger"}},[e._v(e._s(n))])})),e._v(" "),t("h1",{staticClass:"h-lg",attrs:{id:"interactive-tools-heading"}},[e._v("Active Interactive Tools")]),e._v(" "),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{cols:"6"}},[t("b-input",{staticClass:"m-1",attrs:{id:"interactivetool-search",name:"query",placeholder:"Search Interactive Tool",autocomplete:"off",type:"text"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1),e._v(" "),t("b-table",{attrs:{id:"interactive-tool-table",striped:"",fields:e.fields,items:e.activeInteractiveTools,filter:e.filter},on:{filtered:e.filtered},scopedSlots:e._u([{key:"cell(checkbox)",fn:function(n){return[t("b-form-checkbox",{attrs:{id:e.createId("checkbox",n.item.id)},model:{value:n.item.marked,callback:function(t){e.$set(n.item,"marked",t)},expression:"row.item.marked"}})]}},{key:"cell(name)",fn:function(n){return[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{id:e.createId("link",n.item.id),title:"Open Interactive Tool",index:n.index,href:n.item.target,target:"_blank",name:n.item.name}},[e._v(e._s(n.item.name)+"\n                "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}})],1)]}},{key:"cell(job_info)",fn:function(n){return[n.item.active?t("label",[e._v(" running ")]):t("label",[e._v(" stopped ")])]}},{key:"cell(created_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.item.created_time,mode:"elapsed"}})]}},{key:"cell(last_updated)",fn:function(e){return[t("UtcDate",{attrs:{date:e.item.modified_time,mode:"elapsed"}})]}}])}),e._v(" "),e.isActiveToolsListEmpty?t("label",[e._v("You do not have active interactive tools yet ")]):e._e(),e._v(" "),e.showNotFound?t("div",[e._v("\n        No matching entries found for: "),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.filter))]),e._v(".\n    ")]):e._e(),e._v(" "),e.isCheckboxMarked?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"stopInteractiveTool",title:"Terminate selected tools"},on:{click:function(t){return t.stopPropagation(),e.stopInteractiveToolSession()}}},[e._v("Stop\n    ")]):e._e()],2)}),[],!1,null,null,null);const Ld=Td.exports;const Dd={components:{CodeRow:n(25541).Z,JobInformation:ot.Z,JobMetrics:jt,JobParameters:Yt.Z},props:{job:{type:Object,required:!1},jobId:{type:String,required:!1}},computed:{id(){return this.job?.id||this.jobId},hasTraceback(){return this.job?.traceback},hasInfo(){return this.job?.info},hasRemoteHost(){return this.job?.remote_host}}};const Ed=(0,m.Z)(Dd,(function(){var e=this,t=e._self._c;return t("b-card",[t("JobInformation",{attrs:{job_id:e.id,"include-times":!0}},[e.hasTraceback?t("tr",[t("td",[e._v("Traceback")]),e._v(" "),t("td",[t("CodeRow",{attrs:{"code-label":"Traceback","code-item":e.job.traceback}})],1)]):e._e(),e._v(" "),e.hasInfo?t("tr",[t("td",[e._v("Info")]),e._v(" "),t("td",[t("CodeRow",{attrs:{"code-label":"Info","code-item":e.job.info}})],1)]):e._e(),e._v(" "),e.hasRemoteHost?t("tr",[t("td",[e._v("Remote Host")]),e._v(" "),t("td",[e._v("\n                "+e._s(e.job.remote_host)+"\n            ")])]):e._e()]),e._v(" "),t("br"),e._v(" "),t("h2",{staticClass:"h-md"},[e._v("Job Parameters")]),e._v(" "),t("JobParameters",{attrs:{"job-id":e.id,"include-title":!1}}),e._v(" "),t("br"),e._v(" "),t("h2",{staticClass:"h-md"},[e._v("Job Metrics")]),e._v(" "),t("JobMetrics",{attrs:{"job-id":e.id,"include-title":!1}})],1)}),[],!1,null,"ac2abb00",null).exports;const Od=(0,a.defineComponent)({__name:"Abbreviation",props:{explanation:null},setup:e=>({__sfc:!0,props:e})});const Ad=(0,m.Z)(Od,(function(){var e=this;return(0,e._self._c)("abbr",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e._self._setupProxy.props.explanation}},[e._t("default")],2)}),[],!1,null,null,null).exports,Id=(0,a.defineComponent)({__name:"CarbonEmissionsCalculations",setup:e=>({__sfc:!0,dictionary:[{term:"TDP (Thermal Design Power)",definition:"The maximum amount of heat a CPU can produce in Watts. This correlates with power usage."},{term:"PUE (Power Usage Effectiveness)",definition:"A measure of how of much energy a data center running your server uses."},{term:"Carbon Intensity",definition:"The amount greenhouse gases emitted per unit of electricity produced."},{term:"AWS EC2",definition:"An Amazon service allowing users to rent virtual computers and deploy their own web services."},{term:"CO2e",definition:"Other types of greenhouse gases that have similar global warming potential as a metric unit amount of CO2 itself."}],epaUrl:"https://www.epa.gov/energy/greenhouse-gas-equivalencies-calculator",epaCalculationsUrl:"https://www.epa.gov/energy/greenhouse-gases-equivalencies-calculator-calculations-and-references",greenAlgorithmsUrl:"https://www.green-algorithms.org/",worldwideCarbonIntensity:_t,worldwidePowerUsageEffectiveness:vt,Abbreviation:Ad,Heading:Dt,ExternalLink:ao.Z})});const Pd=(0,m.Z)(Id,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("article",{staticClass:"mt-4"},[t("header",[t(n.Heading,{attrs:{h1:"",separator:"",bold:"",size:"lg"}},[e._v("Carbon Emissions Calculations")]),e._v(" "),t("p",[e._v("\n            Our calculations are based off of work done by the\n            "),t(n.ExternalLink,{attrs:{href:n.greenAlgorithmsUrl}},[e._v("Green Algorithms Project")]),e._v('\n            and in particular their implementation of the "carbon footprint calculator".\n\n            '),t("br"),e._v("\n\n            Additionally, some of our carbon emissions comparisons are based off of calculations done by the\n            "),t(n.ExternalLink,{attrs:{href:n.epaUrl}},[e._v("United States Environmental Protection Agency (EPA)")]),e._v(".\n        ")],1)],1),e._v(" "),t("section",[t(n.Heading,{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v("How we calculate carbon emissions")]),e._v(" "),t("p",[e._v("\n            For each job, the carbon emissions are based off of the job runtime (in hours) and the memory allocated\n            to it (in MB). Additionally, we require information about the CPU model of the server that ran the job.\n            In particular, we consider the CPU\n            "),t(n.Abbreviation,{attrs:{explanation:"Thermal Design Power"}},[e._v("TDP")]),e._v(", its core count and the number of\n            cores allocated to the job. We assume that 100% of each allocated core's resources are used.\n        ")],1),e._v(" "),t("p",[e._v("\n            Given that CPU specifications can vary greatly and that Galaxy does not support fetching this\n            information dynamically, we estimate the server's hardware configuration by matching your job's CPU\n            and/or memory usage to a comparable general purpose\n            "),t(n.Abbreviation,{attrs:{explanation:"Amazon Web Services Elastic Compute Cloud"}},[e._v("AWS EC2")]),e._v("\n            instance. EC2 was chosen because the service provides various hardware configurations allowing us to\n            cover more real-world situations.\n            "),t(n.ExternalLink,{attrs:{href:"https://aws.amazon.com/ec2/instance-types/"}},[e._v("\n                (Click here to read further about general purpose EC2 machines)\n            ")])],1),e._v(" "),t("p",[e._v("\n            Once we have the information needed, we calculate your job's CPU and memory power usage in watts. The\n            power usage is the product of allocated resources amount, a\n            "),t(n.Abbreviation,{attrs:{explanation:"Power Usage Effectiveness"}},[e._v("PUE")]),e._v(' value and a power usage\n            factor. For CPUs, the power usage factor is its TDP per core and, for memory, we use a reference of\n            0.375 W/GiB from the "carbon footprint calculator". Administrators can set a custom PUE value, otherwise\n            a default PUE value of '+e._s(n.worldwidePowerUsageEffectiveness)+" is used.\n        ")],1),e._v(" "),t("pre",[e._v("            memory_allocated_in_gibibyte = memory_allocated_in_mebibyte / 1024\n            tdp_per_core = cpu_TDP / cpu_core_count\n            normalized_tdp_per_core = tdp_per_core * cores_allocated_to_job\n\n            power_needed_cpu = pue * normalized_tdp_per_core\n            power_needed_memory = pue * memory_allocated_in_gibibyte * memory_power_usage_constant\n            total_power_needed = power_needed_cpu + power_needed_memory\n        ")]),e._v(" "),t("p",[e._v("\n            The power usage is then converted into energy usage (in kWh) by factoring in the job runtime (in hours):\n        ")]),e._v(" "),t("pre",[e._v("            energy_needed_cpu = runtime * power_needed_cpu / 1000\n            energy_needed_memory = runtime * power_needed_memory / 1000\n            total_energy_needed = runtime * total_power_needed / 1000\n        ")]),e._v(" "),t("p",[e._v("\n            Finally, we convert the energy usage into estimated carbon emissions (in metric units CO2e) by\n            multiplying the carbon intensity value corresponding to the geographical server location configured by\n            administrators. If no value was set or the location is not supported, the calculation uses a global\n            average carbon intensity value of "+e._s(n.worldwideCarbonIntensity)+" gCO2/kWh.\n        ")]),e._v(" "),t("pre",[e._v("            cpu_carbon_emissions = energy_needed_cpu * carbon_intensity\n            memory_carbon_emissions = energy_needed_memory * carbon_intensity\n            total_carbon_emissions = total_energy_needed * carbon_intensity\n        ")])],1),e._v(" "),t("section",[t(n.Heading,{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v("How we compare carbon emissions")]),e._v(" "),t("p",[e._v("\n            To make the estimates more relatable, we compare your job's carbon emissions and energy usage to\n            "),t(n.ExternalLink,{attrs:{href:n.epaCalculationsUrl}},[e._v("values calculated by the EPA")]),e._v('. We use the same\n            reference values from the Green Algorithms Project\'s "Carbon emissions Calculator" tool when calculating\n            the equivalent distance driven.\n        ')],1),e._v(" "),t("pre",[e._v("            gasoline_consumed = total_carbon_emissions / gasoline_emissions_as_per_epa\n            carbon_carbon_savings_by_using_leds = total_carbon_emissions / led_carbon_savings_as_per_epa\n            equivalent_km_in_eu = total_carbon_emissions / average_passenger_car_emissions_eu\n            equivalent_km_in_us = total_carbon_emissions / average_passenger_car_emissions_us\n            smartphones_charged = total_carbon_emissions / smartphone_charged_emissions_as_per_epa\n            tree_months = total_carbon_emissions / tree_year * 12\n        ")])],1),e._v(" "),t("footer",{staticClass:"py-4"},[t(n.Heading,{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v("Glossary")]),e._v(" "),t("table",{staticClass:"tabletip info_data_table"},[e._m(0),e._v(" "),t("tbody",e._l(n.dictionary,(function({term:n,definition:i}){return t("tr",{key:n},[t("td",[e._v(e._s(n))]),e._v(" "),t("td",[e._v(e._s(i))])])})),0)])],1)])}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("thead",[t("th",[e._v("Term")]),e._v(" "),t("th",[e._v("Definition")])])}],!1,null,"68cf964a",null).exports;var Rd=n(97794),jd=n(37072),Yd=n(25835),Hd=n(26253),Nd=n(50725);const Fd={props:{header:{type:String,required:!0},slides:{type:Array,required:!0},imageLoc:{type:String,required:!1,default:"plugins/welcome_page/new_user/dist/static/topics/"}},methods:{imgUrl(e){return`${(0,g.getAppRoot)()}static/${this.imageLoc}${e}`.replace("//","/")}}},Bd=Fd;const $d=(0,m.Z)(Bd,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("h1",{staticClass:"slide-header"},[e._v("\n        "+e._s(e.header)+"\n    ")]),e._v(" "),t("hr"),e._v(" "),t("b-carousel",{staticClass:"new-user-welcome-slides",attrs:{indicators:"",controls:"",interval:0,"no-animation":"",align:"center",position:"float"}},[e._l(e.slides,(function(n,i){return t("b-carousel-slide",{key:i},[t("h2",{staticClass:"carousel-caption h-md"},[e._v("\n                "+e._s(e._f("localize")(n.text))+"\n            ")]),e._v(" "),t("img",{staticClass:"carousel-fig",class:n.size,attrs:{src:e.imgUrl(n.file),alt:n.alt}})])})),e._v(" "),t("b-carousel-slide",[t("h2",{staticClass:"h-md"},[e._v(e._s(e._f("localize")("Enjoy using Galaxy!")))]),e._v(" "),t("img",{staticClass:"large-img",attrs:{src:e.imgUrl("sections/galaxy_logo.png"),alt:"Galaxy logo"}})])],2),e._v(" "),t("div",{staticClass:"button-housing"},[t("b-button",{staticClass:"mt-auto carousel-button new-user-welcome-return",attrs:{variant:"primary"},on:{click:function(t){return e.$emit("back")}}},[e._v("Return")])],1)],1)}),[],!1,null,null,null).exports;const zd={props:{topics:{type:Array,required:!0},title:{type:String,required:!0},image:{type:String,required:!0},blurb:{type:String,required:!0},intro:{type:String,required:!0},imageLoc:{type:String,required:!1,default:"plugins/welcome_page/new_user/dist/static/topics/"}},methods:{imgUrl(e){return`${(0,g.getAppRoot)()}static/${this.imageLoc}${e}`.replace("//","/")}}},Wd=zd;const Ud=(0,m.Z)(Wd,(function(){var e=this,t=e._self._c;return t("div",[t("header",{staticClass:"main-header"},[t("h1",{staticClass:"text-center my-3"},[e._v(e._s(e._f("localize")(e.title)))]),e._v(" "),t("h2",{staticClass:"text-center my-3 h-sm"},[e._v(e._s(e._f("localize")(e.intro)))])]),e._v(" "),t("b-row",{staticClass:"justify-content-md-center mb-3",attrs:{"data-new-user-welcome-topic-title":e.title}},e._l(e.topics,(function(n,i){return t("b-card-group",{key:i},[t("b-card",{staticClass:"text-center m-2 border-0 new-user-welcome-subtopic",attrs:{"body-class":"d-flex flex-column","data-new-user-welcome-subtopic-title":n.title}},[t("b-card-img",{staticClass:"section-header mb-3",attrs:{height:"50h",src:e.imgUrl(n.image),alt:n.alt}}),e._v(" "),t("b-card-text",{staticClass:"font-weight-light"},[e._v(e._s(e._f("localize")(n.intro)))]),e._v(" "),t("b-button",{staticClass:"mt-auto",attrs:{variant:"info"},on:{click:function(t){return e.$emit("select",i)}}},[e._v(e._s(e._f("localize")(n.title)))])],1)],1)})),1),e._v(" "),t("b-button",{staticClass:"mt-auto new-user-welcome-return",attrs:{variant:"primary",role:"link"},on:{click:function(t){return e.$emit("back")}}},[t("span",{staticClass:"fa fa-caret-left mr-1"}),e._v(" "),t("span",[e._v("Return")])])],1)}),[],!1,null,"b939e0a6",null).exports;const Vd={props:{topics:{type:Array,required:!0},imageLoc:{type:String,required:!1,default:"plugins/welcome_page/new_user/dist/static/topics/"},title:{type:String,default:"Welcome to Galaxy"},intro:{type:String,default:"Galaxy is web-based platform for reproducible computational analysis. Research in Galaxy                 is supported by 3 pillars: data, tools, and workflows. For an introduction to each, visit the                 below pages, or begin your analysis by selting a tool from the toolbar to the left."}},methods:{imgUrl(e){return`${(0,g.getAppRoot)()}static/${this.imageLoc}${e}`.replace("//","/")}}},qd=Vd;const Zd=(0,m.Z)(qd,(function(){var e=this,t=e._self._c;return t("div",[t("header",{staticClass:"main-header"},[t("h1",{staticClass:"text-center my-3"},[e._v(e._s(e._f("localize")(e.title)))]),e._v(" "),t("h2",{staticClass:"text-center my-3 h-sm"},[e._v(e._s(e._f("localize")(e.intro)))])]),e._v(" "),t("b-row",{staticClass:"justify-content-md-center mb-3"},e._l(e.topics,(function(n,i){return t("b-card-group",{key:i},[t("b-card",{staticClass:"text-center m-2 border-0 new-user-welcome-topic",attrs:{"data-new-user-welcome-topic-title":n.title,"body-class":"d-flex flex-column"}},[t("b-card-img",{staticClass:"section-header mb-3",attrs:{height:"50h",src:e.imgUrl(n.image),alt:n.alt}}),e._v(" "),t("b-card-text",{staticClass:"font-weight-light"},[e._v(e._s(e._f("localize")(n.blurb)))]),e._v(" "),t("b-button",{staticClass:"mt-auto",attrs:{variant:"info"},on:{click:function(t){return e.$emit("select",i)}}},[e._v(e._s(e._f("localize")(n.title)))])],1)],1)})),1)],1)}),[],!1,null,"dd7df6c2",null).exports;const Gd={components:{Heading:Dt,BCard:vi._,BCardGroup:Rd.o,BTabs:yi.M,BTab:gi.L,BCarousel:jd.P,BCarouselSlide:Yd.O,BButton:jn.T,BRow:Hd.T,BCol:Nd.l,Topics:Zd,Subtopics:Ud,Slides:$d},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0);return{config:e,isConfigLoaded:t}},data:()=>({loaded:void 0,position:[],newUser:{}}),computed:{depth(){return this.position.length},currentNode(){const e=this.newUser;return this.position.reduce(((e,t)=>e.topics[t]),e)},viewElement(){let e;switch(this.depth){case 0:e=Zd;break;case 1:e=Ud;break;case 2:e=$d}return e}},async mounted(){const e=await async function(){return await n.e(492).then(n.bind(n,46492))}();e?.newUserDict&&(this.newUser=e.newUserDict,this.loaded=!0)},methods:{imgUrl(e){return`${(0,g.getAppRoot)()}static/${this.imageLoc}${e}`.replace("//","/")},up(){this.position.pop()},down(e){this.position.push(e)}}},Jd=Gd;const Kd=(0,m.Z)(Jd,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"new-user-welcome"},[!0===e.loaded?t(e.viewElement,e._b({tag:"component",attrs:{"image-loc":e.isConfigLoaded&&e.config.welcome_directory},on:{select:e.down,back:e.up}},"component",e.currentNode,!1)):!1===e.loaded?t("div",[t("Heading",{attrs:{h1:""}},[e._v("Welcome to Galaxy!")]),e._v(" "),t("p",[e._v("\n            Galaxy is web-based platform for reproducible computational analysis. Research in Galaxy is supported by\n            3 pillars: data, tools, and workflows.\n        ")]),e._v(" "),t("p",[e._v("\n            If this is your first time using Galaxy we strongly recommend looking at the introductory materials\n            available at "),t("a",{attrs:{href:"https://training.galaxyproject.org"}},[e._v("training.galaxyproject.org")]),e._v(".\n        ")])],1):e._e()],1)}),[],!1,null,"235fc5e0",null).exports;var Xd=n(79167),Qd=n(22567);function ec(e,t,n={}){const{root:i,...o}=e,a=`${i}api/pages`,s=(0,Qd.BC)(o);return v.Z.get(a,{params:{...s,...n}}).then((e=>{const n=e.data;return t&&t(e),n||[]}))}const tc={components:{LoadingSpan:z.Z},props:{defaultPerPage:{type:Number,required:!1,default:null}},data(){return{items:[],root:(0,g.getAppRoot)(),currentPage:1,perPage:this.defaultPerPage||20,rows:0,loading:!0,message:null,messageVariant:null}},computed:{paginationAttrs(){return{"next-class":"gx-grid-pager-next","prev-class":"gx-grid-pager-prev","first-class":"gx-grid-pager-first","last-class":"gx-grid-pager-last","page-class":"gx-grid-pager-page",class:"gx-grid-pager",size:"lg","aria-controls":this.tableId,"per-page":this.perPage,"total-rows":this.rows,align:"center"}},indexTableAttrs(){return{hover:!0,striped:!0,"caption-top":!0,fixed:!0,"show-empty":!0,id:this.tableId,"per-page":this.perPage,"current-page":this.currentPage,items:this.tableProvider}},alertAttrs(){return{class:"index-grid-message",variant:this.messageVariant,show:this.showMessage}},showMessage(){return!!this.message}},methods:{async tableProvider(e){e.root=this.root;const t=this.dataProviderParameters,n=this.dataProvider(e,this.setRows,t).catch(this.onError),i=await n;return(i||[]).forEach(this.decorateData),this.items=i,i},decorateData(e){},refresh(){this.$root.$emit("bv::refresh::table",this.tableId)},setRows(e){this.rows=e.headers.total_matches,this.loading=!1},rowsPerPage:e=>ga.Z.get("rows_per_page")||e,onSuccess:function(e){this.message=e,this.messageVariant="success"},onError:function(e){this.message=(0,y.a)(e),this.messageVariant="danger"}}};var nc=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ic=X._.path("/api/pages/{id}").method("delete").create();var oc=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ac=(0,a.defineComponent)({__name:"PageDropdown",props:{page:null,published:null},emits:["onRemove","onSuccess","onError"],setup(e,{emit:t}){const n=e;u.vI.add(h.eW2);const{isAnonymous:i}=(0,o.Jk)((0,Xe.L)()),s=(0,a.computed)((()=>n.page.shared||n.published||(0,a.unref)(i)));return{__sfc:!0,props:n,isAnonymous:i,emit:t,readOnly:s,onDelete:function(e){return oc(this,void 0,void 0,(function*(){try{yield function(e){return nc(this,void 0,void 0,(function*(){yield ic({id:e})}))}(e),t("onRemove",e),t("onSuccess")}catch(e){t("onError",e)}}))},FontAwesomeIcon:p.GN}}}),sc=ac;const rc=(0,m.Z)(sc,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("b-link",{staticClass:"page-dropdown",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","data-page-dropdown":n.props.page.id,"aria-expanded":"false"}},[t(n.FontAwesomeIcon,{staticClass:"fa-lg",attrs:{icon:"caret-down"}}),e._v(" "),t("span",{staticClass:"page-title"},[e._v(e._s(n.props.page.title))])],1),e._v(" "),n.props.page.description?t("p",[e._v(e._s(n.props.page.description))]):e._e(),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"page-dropdown"}},[t("router-link",{staticClass:"dropdown-item dropdown-item-view",attrs:{to:`/published/page?id=${n.props.page.id}`}},[t("span",{staticClass:"fa fa-eye fa-fw mr-1"}),e._v(" "),t("span",[e._v("View")])]),e._v(" "),n.readOnly?e._e():t("router-link",{staticClass:"dropdown-item dropdown-item-edit",attrs:{to:`/pages/editor?id=${n.props.page.id}`}},[t("span",{staticClass:"fa fa-edit fa-fw mr-1"}),e._v(" "),t("span",[e._v("Edit content")])]),e._v(" "),n.readOnly?e._e():t("router-link",{staticClass:"dropdown-item dropdown-item-attributes",attrs:{to:`/pages/edit?id=${n.props.page.id}`}},[t("span",{staticClass:"fa fa-pencil fa-fw mr-1"}),e._v(" "),t("span",[e._v("Edit attributes")])]),e._v(" "),n.readOnly?e._e():t("router-link",{staticClass:"dropdown-item dropdown-item-share",attrs:{to:`/pages/sharing?id=${n.props.page.id}`}},[t("span",{staticClass:"fa fa-share-alt fa-fw mr-1"}),e._v(" "),t("span",[e._v("Control sharing")])]),e._v(" "),n.readOnly?e._e():t("a",{directives:[{name:"b-modal",rawName:"v-b-modal",value:`delete-page-modal-${n.props.page.id}`,expression:"`delete-page-modal-${props.page.id}`"}],staticClass:"dropdown-item dropdown-item-delete"},[t("span",{staticClass:"fa fa-trash fa-fw mr-1"}),e._v(" "),t("span",[e._v("Delete")])]),e._v(" "),t("b-modal",{attrs:{id:`delete-page-modal-${n.props.page.id}`,"hide-backdrop":"",title:"Confirm page deletion","title-tag":"h2"},on:{ok:function(e){return n.onDelete(n.props.page.id)}}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v('Really delete the page titled: "'+e._s(n.props.page.title)+'"?')])])],1)],1)}),[],!1,null,null,null).exports;const lc=(0,a.defineComponent)({__name:"PageIndexActions",setup(e){const t=(0,Nn.tv)();return u.vI.add(h.r8p),{__sfc:!0,router:t,create:function(){t.push("/pages/create")},FontAwesomeIcon:p.GN,BButton:jn.T}}});const dc=(0,m.Z)(lc,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",[t(n.BButton,{staticClass:"m-1",attrs:{id:"page-create"},on:{click:n.create}},[t(n.FontAwesomeIcon,{attrs:{icon:"plus"}}),e._v("\n        "+e._s(e._f("localize")("Create"))+"\n    ")],1)],1)}),[],!1,null,null,null).exports,cc={key:"title",label:(0,Ee.ZP)("Title"),sortable:!0},uc={key:"tags",label:(0,Ee.ZP)("Tags"),sortable:!1,thStyle:{width:"35%"}},hc={label:(0,Ee.ZP)("Updated"),key:"update_time",sortable:!0,thStyle:{width:"15%"}},pc={label:(0,Ee.ZP)("Sharing"),key:"sharing",sortable:!1,thStyle:{width:"15%"}},fc={key:"username",label:(0,Ee.ZP)("Owner"),sortable:!1,thStyle:{width:"15%"}},mc=[cc,uc,pc,hc],_c=[cc,uc,fc,hc],vc={title:{placeholder:"title",type:String,handler:(0,ln.r3)("title"),menuItem:!0},user:{placeholder:"owner",type:String,handler:(0,ln.r3)("user"),menuItem:!1},tag:{placeholder:"tag(s)",type:"MultiTags",handler:(0,ln.r3)("tag","tag",ln._U),menuItem:!0},published:{placeholder:"Filter on published pages",type:Boolean,boolType:"is",handler:(0,ln.fS)("published","published",ln.AM),menuItem:!0},importable:{placeholder:"Filter on importable pages",type:Boolean,boolType:"is",handler:(0,ln.fS)("importable","importable",ln.AM),menuItem:!0},shared_with_me:{placeholder:"Filter on pages shared with me",type:Boolean,boolType:"is",handler:(0,ln.fS)("shared_with_me","shared_with_me",ln.AM),menuItem:!0}},gc=new ln.ZP(vc,void 0,!1,!1),yc={...vc,published:{...vc.published,default:!0,menuItem:!1},user:{...vc.user,menuItem:!0},shared_with_me:{...vc.shared_with_me,menuItem:!1},importable:{...vc.importable,menuItem:!1}},bc=new ln.ZP(yc,void 0,!1,!1),wc={components:{UtcDate:J.Z,StatelessTags:G.Z,PageIndexActions:dc,SharingIndicators:hi,PageDropdown:rc,FilterMenu:ci,CopyToClipboard:Xd.Z},mixins:[tc],props:{published:{type:Boolean,default:!0}},setup(){const e=(0,Nn.tv)(),{currentUser:t}=(0,o.Jk)((0,Xe.L)());return{router:e,currentUser:t}},data(){const e=this.published?_c:mc,t=this.published?bc:gc;return{tableId:"page-table",fields:e,filterText:"",searchQuery:this.published?"is:published":"",filterClass:t,showAdvanced:!1,titleSearch:(0,Ee.ZP)("search pages"),pageItemsModel:[],helpHtml:"<div>\n<p>This textbox can be used to filter the pages displayed.\n\n<p>Text entered here will be searched against page names and tags. Additionally, advanced\nfiltering tags can be used to refine the search more precisely. Tags are of the form\n<code>&lt;tag_name&gt;:&lt;tag_value&gt;</code> or <code>&lt;tag_name&gt;:'&lt;tag_value&gt;'</code>.\nFor instance to search just for RNAseq in the page name, <code>name:rnaseq</code> can be used.\nNotice by default the search is not case-sensitive.\n\nIf the quoted version of tag is used, the search is case sensitive and only full matches will be\nreturned. So <code>name:'RNAseq'</code> would show only pages named exactly <code>RNAseq</code>.\n\n<p>The available tags are:\n<dl>\n    <dt><code>title</code></dt>\n    <dd>Shows pages with the given sequence of characters in their names.</dd>\n    <dt><code>tag</code></dt>\n    <dd>Shows pages with the given workflow tag. You may also click on a tag to filter on that tag directly.</dd>\n    <dt><code>is:published</code></dt>\n    <dd>Shows published pages.</dd>\n    <dt><code>is:importable</code></dt>\n    <dd>Shows accessible pages (meaning they have URL generated).</dd>\n    <dt><code>is:shared_with_me</code></dt>\n    <dd>Shows pages shared by another user directly with you.</dd>\n    <dt><code>user:janedoe</code></dt>\n    <dd>Shows pages created by user \"janedoe\"</dd>\n</dl>\n</div>\n",perPage:this.rowsPerPage(this.defaultPerPage||20),dataProvider:ec,defaultTableAttrs:{"sort-by":"update_time","sort-desc":!0,"no-sort-reset":"",fields:e}}},computed:{dataProviderParameters(){const e={search:this.searchQuery,show_published:!1,show_shared:!0};return this.published&&(e.show_published=!0,e.show_shared=!1),e},title(){return this.published?"Published Pages":"Pages"}},created(){this.root=(0,g.getAppRoot)()},methods:{applyFilter(e,t,n=!1){this.filterText=n?this.filterClass.setFilterValue(this.filterText,e,`'${t}'`):this.filterClass.setFilterValue(this.filterText,e,t)},copyUrl:function(e){return(0,D.y3)(`/u/${e.owner}/p/${e.slug}`)},onTags:function(e,t){const n=this.pageItemsModel[t];n.tags=e,te(n.id,"Page",e).catch((e=>{this.onError(e)}))},onAdd:function(e){1==this.currentPage?this.refresh():this.currentPage=1},onRemove:function(e){this.refresh()},onSearch(e){this.searchQuery=e,this.refresh()},onUpdate:function(e,t){this.refresh()},shareLink:function(e){this.router.push(`sharing?id=${e.id}`)},currentUserOwnsItem:function(e){return e.username===this.currentUser.username},decorateData(e){const t=(0,l.Bz)();e.shared=e.username!==t.user.attributes.username}}},kc=wc;var Cc=(0,m.Z)(kc,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"pages-list",attrs:{"aria-labelledby":"pages-title"}},[t("h1",{staticClass:"mb-3 h-lg",attrs:{id:"pages-title"}},[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),t("b-alert",e._b({},"b-alert",e.alertAttrs,!1),[e._v(e._s(e.message))]),e._v(" "),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{cols:"6"}},[t("FilterMenu",{attrs:{name:e.title,placeholder:e.titleSearch,"filter-class":e.filterClass,"filter-text":e.filterText,loading:e.loading,"show-advanced":e.showAdvanced,"has-help":""},on:{"update:filterText":function(t){e.filterText=t},"update:filter-text":function(t){e.filterText=t},"update:showAdvanced":function(t){e.showAdvanced=t},"update:show-advanced":function(t){e.showAdvanced=t},"on-backend-filter":e.onSearch},scopedSlots:e._u([{key:"menu-help-text",fn:function(){return[t("div",{domProps:{innerHTML:e._s(e.helpHtml)}})]},proxy:!0}])})],1),e._v(" "),t("b-col",[t("PageIndexActions",{staticClass:"float-right"})],1)],1),e._v(" "),t("b-table",e._b({scopedSlots:e._u([{key:"empty",fn:function(){return[e.loading?t("LoadingSpan",{attrs:{message:"Loading pages"}}):t("b-alert",{attrs:{id:"no-pages",variant:"info",show:""}},[""!==e.filterText?t("div",[e._v("\n                    No matching entries found for: "),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.filterText))]),e._v(".\n                ")]):t("div",[e._v("No pages found. You may create a new page.")])])]},proxy:!0},{key:"cell(title)",fn:function(n){return[t("PageDropdown",{attrs:{page:n.item,published:e.published},on:{onAdd:e.onAdd,onRemove:e.onRemove,onUpdate:e.onUpdate,onSuccess:e.onSuccess,onError:e.onError}})]}},{key:"cell(tags)",fn:function(n){return[t("StatelessTags",{attrs:{clickable:"",value:n.item.tags,index:n.index,disabled:e.published||!e.currentUserOwnsItem(n.item)},on:{input:t=>e.onTags(t,n.index),"tag-click":t=>e.applyFilter("tag",t,!0)}})]}},{key:"cell(username)",fn:function(n){return[t("a",{staticClass:"page-filter-link-owner",attrs:{href:"#",title:"Search more from "+n.item.username},on:{click:function(t){return e.applyFilter("user",n.item.username,!0)}}},[e._v("\n                "+e._s(n.item.username)+"\n            ")])]}},{key:"cell(sharing)",fn:function(n){return[n.item.published||n.item.shared||n.item.importable?t("span",[t("SharingIndicators",{attrs:{object:n.item},on:{filter:t=>e.applyFilter(t,!0)}}),e._v(" "),t("CopyToClipboard",{attrs:{title:e._f("localize")("Copy URL"),text:e.copyUrl(n.item),message:e._f("localize")("Link copied to your clipboard")}})],1):e._e(),e._v(" "),n.item.published||n.item.shared||n.item.importable?e._e():t("a",{staticClass:"share-this-page",attrs:{href:`sharing?id=${n.item.id}`},on:{click:function(t){return t.preventDefault(),e.shareLink(n.item)}}},[t("span",[e._v("Share this")])])]}},{key:"cell(update_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}}]),model:{value:e.pageItemsModel,callback:function(t){e.pageItemsModel=t},expression:"pageItemsModel"}},"b-table",{...e.defaultTableAttrs,...e.indexTableAttrs},!1)),e._v(" "),e.rows>=e.perPage?t("b-pagination",e._b({staticClass:"gx-pages-grid-pager",model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}},"b-pagination",e.paginationAttrs,!1)):e._e()],1)}),[],!1,null,null,null);const xc=Cc.exports;const Sc={props:{page:{type:Object,required:!0}},data:()=>({childList:[]}),watch:{page(){this.processHtml(this.page.content)}},methods:{processHtml(e){if(this.childList=[],e){const t=document.createElement("div");t.innerHTML=e;t.children.forEach((e=>{if(e.classList.contains("embedded-item")){const t=e.id.split("-");if(2==t.length){const[e,n]=t;this.childList.push(this.processItem(e,n))}else this.childList.push(`Could not resolve item identifier: ${e.id}.`)}else this.childList.push(e.innerHTML)}))}},processItem(e,t){let n=null;if("StoredWorkflow"==e){n=`<a href='${(0,D.dq)(`/published/workflow?id=${t}`)}'>View Workflow<a>`}else if("History"==e){n=`<a href='${(0,D.dq)(`/published/history?id=${t}`)}'>View History<a>`}else if("HistoryDatasetAssociation"==e){n=`<a href='${(0,D.dq)(`/datasets/${t}/preview`)}'>View Dataset<a>`}else if("Visualization"==e){n=`<a href='${(0,D.dq)(`/published/history?id=${t}`)}'>View Visualization<a>`}else n=`Item of type '${e}' cannot be embedded.`;return`<p>${n}</p>`}}};const Mc=(0,m.Z)(Sc,(function(){var e=this,t=e._self._c;return t("div",e._l(e.childList,(function(n,i){return t("div",{key:i},[t("p",{domProps:{innerHTML:e._s(n)}})])})),0)}),[],!1,null,null,null).exports;var Tc=n(78636),Lc=n.n(Tc),Dc=n(65534);const Ec={props:{history_dataset_id:{type:String,required:!0},path:{type:String,default:null}},data:()=>({imageUrl:void 0}),created(){this.path?this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((()=>{const e=this.$store.getters.pathDestination(this.history_dataset_id,this.path);this.imageUrl=e.fileLink})):this.imageUrl=`${(0,g.getAppRoot)()}dataset/display?dataset_id=${this.history_dataset_id}`},methods:{...(0,tt.VG)(["fetchPathDestination"])}};const Oc=(0,m.Z)(Ec,(function(){var e=this,t=e._self._c;return t("div",[e.imageUrl?t("div",{staticClass:"w-100 p-2"},[t("b-card",{attrs:{nobody:"","body-class":"p-1"}},[t("b-img",{attrs:{src:e.imageUrl,fluid:""}})],1)],1):t("div",[t("b",[e._v("Image is not found")])])])}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const Ac={components:{DatasetAsImage:Oc},props:{args:{type:Object,default:null}},computed:{imageUrl(){return`${(0,g.getAppRoot)()}dataset/display?dataset_id=${this.args.history_dataset_id}`}}};const Ic=(0,m.Z)(Ac,(function(){var e=this,t=e._self._c;return t("div",[t("DatasetAsImage",{attrs:{path:e.args.path,history_dataset_id:e.args.history_dataset_id}})],1)}),[],!1,null,null,null).exports;const Pc={name:"CollectionNode",props:{node:{type:Object,default:null},skipHead:{type:Boolean,default:!1}},computed:{name(){return this.node&&(this.node.name||this.node.element_identifier||"n/a")},miscInfo(){return this.node&&this.node.object&&this.node.object.misc_info},peek(){return this.node&&this.node.object&&this.node.object.peek},url(){return this.node&&this.node.object&&this.node.object.url},error(){return this.node&&this.node.object&&"error"===this.node.object.status}}};const Rc={components:{CollectionTree:(0,m.Z)(Pc,(function(){var e=this,t=e._self._c;return t("div",[e.skipHead?e._e():t("span",{staticClass:"label"},[t("b",[e._v(e._s(e.name))])]),e._v(" "),e.error?t("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Error: "+e._s(e.error))]):e._e(),e._v(" "),e.miscInfo?t("pre",[t("code",{domProps:{innerHTML:e._s(e.miscInfo)}})]):e._e(),e._v(" "),e.peek?t("pre",[t("code",{domProps:{innerHTML:e._s(e.peek)}})]):e._e(),e._v(" "),e.node&&e.node.elements&&e.node.elements.length?t("div",{class:{"ml-3":!e.skipHead}},e._l(e.node.elements,(function(e){return t("CollectionNode",{key:e.id,attrs:{node:e}})})),1):e._e()],1)}),[],!1,null,null,null).exports,LoadingSpan:z.Z},props:{args:{type:Object,default:null},collections:{type:Object,default:null}},data:()=>({itemContent:null,loading:!0,messageText:null,messageVariant:null}),computed:{...(0,o.rn)(Xe.L,["currentUser"]),...(0,o.rn)(I.z,["currentHistoryId"]),collectionName(){const e=this.collections[this.args.history_dataset_collection_id];return e&&e.name},itemUrl(){return`${(0,g.getAppRoot)()}api/dataset_collections/${this.args.history_dataset_collection_id}`},downloadUrl(){return`${(0,g.getAppRoot)()}api/dataset_collections/${this.args.history_dataset_collection_id}/download`}},created(){this.getContent().then((e=>{this.itemContent=e,this.loading=!1}))},methods:{onCopyCollection(e){(async function(e,t){const n=`${(0,g.getAppRoot)()}api/histories/${t}/contents/dataset_collections`,i={source:"hdca",type:"dataset_collection",content:e,copy_elements:!0};try{const{data:e}=await v.Z.post(n,i);return e}catch(e){(0,y.t)(e)}})(this.args.history_dataset_collection_id,e).then((e=>{this.messageVariant="success",this.messageText="Successfully copied to current history."}),(e=>{this.messageVariant="danger",this.messageText=e}))},async getContent(){try{return(await v.Z.get(this.itemUrl)).data}catch(e){return`Failed to retrieve content. ${e}`}}}},jc=Rc;const Yc=(0,m.Z)(jc,(function(){var e=this,t=e._self._c;return t("b-card",{attrs:{"body-class":"p-0"}},[t("b-card-header",[t("span",{staticClass:"float-right"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:e.downloadUrl,variant:"link",size:"sm",role:"button",title:"Download Collection",type:"button"}},[t("span",{staticClass:"fa fa-download"})]),e._v(" "),e.vcurrentUser&&e.currentHistoryId?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:"#",role:"button",variant:"link",title:"Import Collection",type:"button"},on:{click:function(t){return e.onCopyCollection(e.currentHistoryId)}}},[t("span",{staticClass:"fa fa-file-import"})]):e._e()],1),e._v(" "),t("span",[t("span",[e._v("Dataset Collection:")]),e._v(" "),t("span",{staticClass:"font-weight-light"},[e._v(e._s(e.collectionName))])])]),e._v(" "),t("b-card-body",[e.loading?t("LoadingSpan",{attrs:{message:"Loading Collection"}}):t("div",{staticClass:"content-height"},[e.messageText?t("b-alert",{attrs:{variant:e.messageVariant,show:""}},[e._v("\n                "+e._s(e.messageText)+"\n            ")]):e._e(),e._v(" "),t("CollectionTree",{attrs:{node:e.itemContent,"skip-head":!0}})],1)],1)],1)}),[],!1,null,"5869d5b2",null).exports;const Hc={history_dataset_name:"name",history_dataset_info:"info",history_dataset_peek:"peek",history_dataset_type:"ext"},Nc={props:{args:{type:Object,required:!0},datasets:{type:Object,default:null},name:{type:String,default:null}},computed:{getClass(){return`dataset-${Hc[this.name]}`},content(){const e=this.datasets[this.args.history_dataset_id];return e&&e[Hc[this.name]]}}};const Fc=(0,m.Z)(Nc,(function(){var e=this,t=e._self._c;return t("pre",[t("code",{staticClass:"word-wrap-normal"},[e._v(e._s(e.content))])])}),[],!1,null,null,null).exports;class Bc{constructor(e){Object.defineProperty(this,"datatypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"datatypesMapping",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.datatypes=[...e.datatypes],this.datatypes.sort(),this.datatypesMapping=e.datatypes_mapping}isSubType(e,t){const n=this.datatypesMapping,i=n.ext_to_class_name[e],o=n.ext_to_class_name[t];if(!i||!o)return!1;const a=n.class_to_classes[i];return!!a&&o in a}isSubTypeOfAny(e,t){return t.some((t=>this.isSubType(e,t)))}}const $c={components:{LoadingSpan:z.Z,UrlDataProvider:tn},props:{args:{type:Object,required:!0},datasets:{type:Object,required:!0},embedded:{type:Boolean,default:!1}},data:()=>({expanded:!1}),computed:{contentClass(){return this.expanded?"embedded-dataset-expanded":"embedded-dataset"},datasetType(){return this.datasets[this.args.history_dataset_id].ext},datasetName(){const e=this.datasets[this.args.history_dataset_id];return e&&e.name},datatypesUrl:()=>"/api/datatypes/types_and_mapping",downloadUrl(){return`${(0,g.getAppRoot)()}dataset/display?dataset_id=${this.args.history_dataset_id}`},displayUrl(){return`${(0,g.getAppRoot)()}datasets/${this.args.history_dataset_id}/display`},importUrl(){return`${(0,g.getAppRoot)()}dataset/imp?dataset_id=${this.args.history_dataset_id}`},itemUrl(){return`/api/datasets/${this.args.history_dataset_id}/get_content_as_text`},metaUrl(){return`/api/datasets/${this.args.history_dataset_id}`}},methods:{isSubTypeOfAny:(e,t,n)=>new Bc(n).isSubTypeOfAny(e,t),getFields(e){const t=[],n=e.metadata_column_names||[],i=e.metadata_columns;for(let e=0;e<i;e++)t.push({key:`${e}`,label:n[e]||e,sortable:!0});return t},getItems(e,t){const n=[],i=t.metadata_delimiter||"\t",o=t.metadata_comment_lines||0;return e.split("\n").forEach(((e,t)=>{if(t>=o){const t=e.split(i),o={};let a=!1;t.forEach(((e,t)=>{const n=e.trim();n&&(a=!0),o[t]=n})),a&&n.push(o)}})),n},onExpand(){this.expanded=!this.expanded}}},zc=$c;const Wc=(0,m.Z)(zc,(function(){var e=this,t=e._self._c;return t("b-card",{attrs:{"body-class":"p-0"}},[e.embedded?e._e():t("b-card-header",[t("span",{staticClass:"float-right"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:e.downloadUrl,variant:"link",size:"sm",role:"button",title:"Download Dataset",type:"button"}},[t("span",{staticClass:"fa fa-download"})]),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:e.importUrl,role:"button",variant:"link",title:"Import Dataset",type:"button"}},[t("span",{staticClass:"fa fa-file-import"})]),e._v(" "),e.expanded?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:"#",role:"button",variant:"link",title:"Collapse",type:"button"},on:{click:e.onExpand}},[t("span",{staticClass:"fa fa-angle-double-up"})]):t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:"#",role:"button",variant:"link",title:"Expand",type:"button"},on:{click:e.onExpand}},[t("span",{staticClass:"fa fa-angle-double-down"})])],1),e._v(" "),t("span",[t("span",[e._v("Dataset:")]),e._v(" "),t("span",{staticClass:"font-weight-light"},[e._v(e._s(e.datasetName))])])]),e._v(" "),t("b-card-body",[t("UrlDataProvider",{attrs:{url:e.itemUrl},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i,error:o}){return[t("UrlDataProvider",{attrs:{url:e.datatypesUrl},scopedSlots:e._u([{key:"default",fn:function({result:a,loading:s}){return[i?t("LoadingSpan",{attrs:{message:"Loading Dataset"}}):s?t("LoadingSpan",{attrs:{message:"Loading Datatypes"}}):o?t("div",[e._v(e._s(o))]):t("div",{class:e.contentClass},[e.isSubTypeOfAny(e.datasetType,["pdf","html"],a)?t("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:e.displayUrl}}):n.item_data?t("div",[e.isSubTypeOfAny(e.datasetType,["tabular"],a)?t("div",[t("UrlDataProvider",{attrs:{url:e.metaUrl},scopedSlots:e._u([{key:"default",fn:function({result:i,loading:o,error:a}){return[o?t("LoadingSpan",{attrs:{message:"Loading Metadata"}}):a?t("div",[e._v(e._s(a))]):t("b-table",{attrs:{striped:"",hover:"",fields:e.getFields(i),items:e.getItems(n.item_data,i)}})]}}],null,!0)})],1):t("pre",[e._v("                                "),t("code",{staticClass:"word-wrap-normal"},[e._v(e._s(n.item_data))]),e._v("\n                            ")])]):t("div",[e._v("No content found.")]),e._v(" "),n.truncated?t("b-link",{attrs:{href:n.item_url}},[e._v(" Show More... ")]):e._e()],1)]}}],null,!0)})]}}])})],1)],1)}),[],!1,null,"2db6726b",null).exports;const Uc={props:{history_dataset_id:{type:String,required:!0},path:{type:String}},data:()=>({directoryContent:!1,fields:[{key:"path",sortable:!0},{key:"class",label:"Type",sortable:!0}],errorMessage:void 0}),created(){this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((()=>{const e=this.$store.getters.pathDestination(this.history_dataset_id,this.path);e?e.fileLink?this.errorMessage="is not a directory!":e.isDirectory?this.directoryContent=this.removeParentDirectory(e.datasetContent,e.filepath):void 0===this.path||"undefined"===this.path?this.directoryContent=e.datasetContent:this.errorMessage="is not found!":this.errorMessage="Dataset is not composite!"}))},methods:{...(0,tt.VG)(["fetchPathDestination"]),removeParentDirectory:(e,t)=>e.filter((e=>{if(e.path.startsWith(`${t}/`))return e.path=e.path.replace(`${t}/`,""),e}))}};const Vc={components:{DatasetIndex:(0,m.Z)(Uc,(function(){var e=this,t=e._self._c;return t("div",[e.directoryContent&&!e.errorMessage?t("b-table",{attrs:{"thead-class":"hidden_header",striped:"",hover:"",fields:e.fields,items:e.directoryContent}}):e._e(),e._v(" "),e.errorMessage?t("div",[e.path?t("b",[e._v(e._s(e.path))]):e._e(),e._v(" "+e._s(e.errorMessage)+"\n    ")]):e._e()],1)}),[],!1,null,null,null).exports},props:{args:{type:Object,default:null}}};const qc=(0,m.Z)(Vc,(function(){var e=this;return(0,e._self._c)("DatasetIndex",{staticClass:"dataset-index",attrs:{history_dataset_id:e.args.history_dataset_id,path:e.args.path}})}),[],!1,null,null,null).exports;const Zc={props:{history_dataset_id:{type:String,required:!0},path:{type:String},label:{type:String}},data:()=>({pathDestination:void 0}),computed:{linkLabel(){return this.pathDestination.isDirectory?`Path: ${this.path} is a directory!`:this.pathDestination.fileLink?void 0!==this.label&&"undefined"!==this.label?this.label:(this.pathDestination.datasetRootDir&&this.path?`DATASET: ${this.pathDestination.datasetRootDir} FILEPATH: ${this.path}`:`${this.history_dataset_id}`)+" ":`Path: ${this.path} was not found!`}},created(){this.pathDestination={},this.path&&"undefined"!==this.path?this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((()=>{this.pathDestination=this.$store.getters.pathDestination(this.history_dataset_id,this.path)})):(0,K.nG)({id:this.history_dataset_id}).then((e=>{this.pathDestination={fileLink:`${e.download_url}?to_ext=${e.file_ext}`}}))},methods:{...(0,tt.VG)(["fetchPathDestination"])}};const Gc={components:{DatasetLink:(0,m.Z)(Zc,(function(){var e=this,t=e._self._c;return t("div",[t("a",{attrs:{href:e.pathDestination.fileLink,title:"test",target:"_blank"}},[e._v(e._s(e.linkLabel))])])}),[],!1,null,null,null).exports},props:{args:{type:Object,default:null}}};const Jc=(0,m.Z)(Gc,(function(){var e=this;return(0,e._self._c)("DatasetLink",{staticClass:"dataset-link",attrs:{history_dataset_id:e.args.history_dataset_id,path:e.args.path,label:e.args.label}})}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const Kc={components:{FontAwesomeIcon:p.GN},props:{args:{type:Object,default:null},histories:{type:Object,required:!0}},data:()=>({imported:!1,error:!1}),computed:{name(){return this.histories[this.args.history_id].name},showLink(){return!this.imported&&!this.error}},methods:{onClick(){v.Z.post((0,D.dq)("/api/histories"),{history_id:this.args.history_id}).then((()=>{this.imported=!0})).catch((e=>{this.error=(0,y.a)(e)}))}}};const Xc=(0,m.Z)(Kc,(function(){var e=this,t=e._self._c;return t("div",[e.showLink?t("b-link",{attrs:{"data-description":"history import link","data-history-id":e.args.history_id},on:{click:e.onClick}},[e._v("Click to Import History: "+e._s(e.name)+".")]):e._e(),e._v(" "),e.imported?t("div",{staticClass:"text-success"},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"check"}}),e._v(" "),t("span",[e._v("Successfully Imported History: "+e._s(e.name)+"!")])],1):e._e(),e._v(" "),e.error?t("div",{staticClass:"text-danger"},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"exclamation-triangle"}}),e._v(" "),t("span",[e._v("Failed to Import History: "+e._s(e.name)+"!")]),e._v(" "),t("span",[e._v(e._s(e.error))])],1):e._e()],1)}),[],!1,null,null,null).exports;const Qc=(0,a.defineComponent)({__name:"InstanceUrl",props:{href:{default:null},title:{default:null},loading:{type:Boolean}},setup(e){const t=e,n=(0,a.computed)((()=>t.title?t.title:t.href));return{__sfc:!0,props:t,effectiveTitle:n,ExternalLink:ao.Z,LoadingSpan:z.Z}}});const eu=(0,m.Z)(Qc,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("p",[n.props.loading?t(n.LoadingSpan,{attrs:{message:"Loading instance configuration"}}):n.props.href?t(n.ExternalLink,{attrs:{href:n.props.href}},[e._v("\n        "+e._s(n.effectiveTitle)+"\n    ")]):t("i",[e._v(" Configuration value unset, please contact Galaxy admin. ")])],1)}),[],!1,null,null,null).exports;const tu={props:{args:{type:Object,required:!0},invocations:{type:Object,required:!0}},computed:{content(){const e=this.invocations[this.args.invocation_id];return e&&new Date(e.create_time).toUTCString()}}};const nu=(0,m.Z)(tu,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"invocation-time",attrs:{invocation_id:e.args.invocation_id}},[t("pre",[t("code",[e._v(e._s(e.content))])])])}),[],!1,null,null,null).exports;const iu={components:{JobMetrics:jt},props:{args:{type:Object,default:null}}};const ou=(0,m.Z)(iu,(function(){var e=this._self._c;return e("b-card",{attrs:{nobody:""}},[e("JobMetrics",{staticClass:"job-metrics",attrs:{"job-id":this.args.job_id,"should-show-aws-estimate":!1,"should-show-carbon-emissions-estimates":!1,"include-title":!1}})],1)}),[],!1,null,null,null).exports;const au={components:{JobParameters:Yt.Z},props:{args:{type:Object,default:null}}};const su=(0,m.Z)(au,(function(){var e=this,t=e._self._c;return t("b-card",{attrs:{nobody:""}},[t("JobParameters",{staticClass:"job-parameters",attrs:{"job-id":e.args.job_id,param:e.args.param,"include-title":!1}})],1)}),[],!1,null,null,null).exports;const ru={props:{args:{type:Object,required:!0},name:{type:String,required:!0},jobs:{type:Object,default:null}},computed:{jobContent(){const e=this.jobs[this.args.job_id];return e&&e[this.name]}}};const lu=(0,m.Z)(ru,(function(){var e=this,t=e._self._c;return t("b-card",{staticClass:"content-height",attrs:{nobody:""}},[t("div",{class:e.name,attrs:{job_id:e.args.job_id}},[t("pre",[t("code",{staticClass:"word-wrap-normal"},[e._v(e._s(e.jobContent))])])])])}),[],!1,null,"1937b860",null).exports;a.default.use(d.ZPm);const du={components:{LoadingSpan:z.Z},props:{args:{type:Object,default:null}},data:()=>({visualizationUrl:null,error:null,loading:!0}),created(){this.getVisualization()},methods:{async getVisualization(){v.Z.get(`${(0,g.getAppRoot)()}api/plugins/${this.args.visualization_id}`).then((({data:e})=>{const t=Object.entries(this.args).map((e=>e.map(encodeURIComponent).join("="))).join("&");this.visualizationUrl=`${e.href}?dataset_id=${this.args.history_dataset_id}&${t}`,this.loading=!1})).catch((e=>{this.error=`Failed to load Visualization '${this.args.visualization_id}'.`,this.loading=!1}))}}},cu=du;const uu=(0,m.Z)(cu,(function(){var e=this,t=e._self._c;return t("b-card",{attrs:{"body-class":"embed-responsive embed-responsive-4by3"}},[e.loading?t("LoadingSpan",{staticClass:"m-2",attrs:{message:"Loading Visualization"}}):e.error?t("div",{staticClass:"m-2"},[e._v(e._s(e.error))]):t("iframe",{staticClass:"embed-responsive-item",attrs:{title:"Galaxy Visualization Frame",src:e.visualizationUrl}})],1)}),[],!1,null,null,null).exports;const hu={name:"WorkflowInput",props:{input:{type:Object,default:null},skipHead:{type:Boolean,default:!1}}};const pu=(0,m.Z)(hu,(function(){var e=this,t=e._self._c;return t("div",[e.skipHead?e._e():t("span",[e.input.title?t("span",{staticClass:"font-weight-light"},[e._v(e._s(e.input.title)+":")]):e._e(),e._v(" "),e.input.label?t("span",{staticClass:"font-weight-light"},[e._v(e._s(e.input.label))]):e._e(),e._v(" "),e.input.value?t("span",{staticClass:"font-weight-light font-italic"},[e._v("= "+e._s(e.input.value))]):e._e()]),e._v(" "),e.input&&e.input.inputs&&e.input.inputs.length?t("div",{class:{"ml-3":!e.skipHead}},e._l(e.input.inputs,(function(e){return t("WorkflowInput",{key:e.id,attrs:{input:e}})})),1):e._e()])}),[],!1,null,null,null).exports;var fu=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const mu=(0,a.defineComponent)({__name:"WorkflowDisplay",props:{workflowId:null,workflowVersion:{default:null},embedded:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},setup(e){const t=e,n=(0,a.ref)(),i=(0,a.ref)(null),o=(0,a.ref)(!0),s=(0,a.computed)((()=>i.value?i.value.name:"...")),r=(0,a.computed)((()=>(0,D.dq)(`/api/workflows/${t.workflowId}/download?format=json-download`))),l=(0,a.computed)((()=>(0,D.dq)(`/workflow/imp?id=${t.workflowId}`))),d=(0,a.computed)((()=>{let e="";return t.workflowVersion&&(e=`&version=${t.workflowVersion}`),(0,D.dq)(`/api/workflows/${t.workflowId}/download?style=preview${e}`)}));return(0,a.onMounted)((()=>fu(this,void 0,void 0,(function*(){v.Z.get(d.value).then((e=>{i.value=e.data,o.value=!1})).catch((e=>{n.value=e.response.data.err_msg,o.value=!1}))})))),{__sfc:!0,props:t,errorContent:n,itemContent:i,loading:o,workflowName:s,downloadUrl:r,importUrl:l,itemUrl:d,isEmpty:fe.xb,WorkflowTree:pu,LoadingSpan:z.Z}}});const _u=(0,m.Z)(mu,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-card",{staticClass:"workflow-display",attrs:{"body-class":"p-0"}},[e.embedded?e._e():t("b-card-header",[t("span",{staticClass:"float-right"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:n.downloadUrl,variant:"link",size:"sm",role:"button",title:"Download Workflow",type:"button","data-description":"workflow download"}},[t("span",{staticClass:"fa fa-download"})]),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:n.importUrl,role:"button",variant:"link",title:"Import Workflow",type:"button","data-description":"workflow import"}},[t("span",{staticClass:"fa fa-upload"})])],1),e._v(" "),t("span",[t("span",[e._v("Workflow:")]),e._v(" "),t("span",{staticClass:"font-weight-light",attrs:{"data-description":"workflow name"}},[e._v(e._s(n.workflowName))])])]),e._v(" "),t("b-card-body",[n.loading?t(n.LoadingSpan,{attrs:{message:"Loading Workflow"}}):t("div",{class:!e.expanded&&"content-height"},[n.isEmpty(n.errorContent)?e._e():t("b-alert",{attrs:{variant:"danger",show:""}},[t("b",[e._v("Please fix the following error(s):")]),e._v(" "),"object"==typeof n.errorContent?t("ul",{staticClass:"my-2"},e._l(n.errorContent,(function(n,i){return t("li",{key:i},[e._v("\n                        "+e._s(i)+": "+e._s(n)+"\n                    ")])})),0):t("div",[e._v(e._s(n.errorContent))])]),e._v(" "),null!==n.itemContent?t("div",e._l(n.itemContent?.steps,(function(i){return t("div",{key:i.order_index,staticClass:"mb-2"},[t("div",[e._v("Step "+e._s(i.order_index+1)+": "+e._s(i.label))]),e._v(" "),t(n.WorkflowTree,{attrs:{input:i,"skip-head":!0}})],1)})),0):e._e()],1)],1)],1)}),[],!1,null,"a1a3af04",null).exports;const vu=(0,a.defineComponent)({__name:"WorkflowImage",props:{workflowId:null,workflowVersion:{default:null},size:{default:"lg"}},setup(e){const t=e,n=(0,a.computed)((()=>{let e="";return t.workflowVersion&&(e=`&version=${t.workflowVersion}`),`${(0,g.getAppRoot)()}workflow/gen_image?id=${t.workflowId}&embed=true${e}`})),i=(0,a.computed)((()=>{const e=t.size;return"sm"==e?"300px":"md"==e?"550px":"100%"}));return{__sfc:!0,props:t,src:n,width:i}}}),gu=vu;const yu=(0,m.Z)(gu,(function(){var e=this._self._c,t=this._self._setupProxy;return e("img",{attrs:{alt:"Preview of Galaxy Workflow",src:t.src,width:t.width,height:"auto"}})}),[],!1,null,null,null).exports;const bu={components:{LoadingSpan:z.Z,ExternalLink:ao.Z},props:{licenseId:{type:String,required:!0},inputLicenseInfo:{type:Object,required:!1},title:{type:String,default:null}},data(){return{license:this.inputLicenseInfo}},watch:{licenseId:function(e,t){e!=t&&this.fetchLicense()}},created(){null==this.license&&this.fetchLicense()},methods:{fetchLicense(){this.license=null;const e=`${(0,g.getAppRoot)()}api/licenses/${this.licenseId}`;v.Z.get(e).then((e=>e.data)).then((e=>{this.license=e}))}}},wu=bu;const ku=(0,m.Z)(wu,(function(){var e=this,t=e._self._c;return null==e.license?t("LoadingSpan",{attrs:{message:"Loading license information"}}):e.license.name?t("span",{staticClass:"text-muted"},[t("link",{attrs:{itemprop:"license",href:e.license.licenseId}}),e._v(" "),e.title?t("span",[e._v("\n        "+e._s(e.title)+"\n    ")]):e._e(),e._v(" "),t("ExternalLink",{attrs:{href:e.license.url}},[e._v("\n        "+e._s(e.license.name)+"\n    ")]),e._v(" "),e._t("buttons")],2):t("span",[e._v("\n    Unknown License ("),t("i",[e._v(e._s(e.license.url))]),e._v(")\n    "),e._t("buttons")],2)}),[],!1,null,null,null).exports,Cu=(0,a.defineComponent)({__name:"WorkflowLicense",props:{licenseId:{default:null}},setup:e=>({__sfc:!0,props:e,License:ku})});const xu=(0,m.Z)(Cu,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",[n.props.licenseId?t(n.License,{attrs:{"license-id":n.props.licenseId}}):t("p",[t("i",[e._v("Workflow does not define a license.")])])],1)}),[],!1,null,null,null).exports,Su={__name:"MarkdownContainer",props:{name:{type:String,required:!0},args:{type:Object,required:!0},datasets:{type:Object,default:null},collections:{type:Object,default:null},histories:{type:Object,default:null},invocations:{type:Object,default:null},jobs:{type:Object,default:null},time:{type:String,default:null},version:{type:String,default:null},workflows:{type:Object,default:null}},setup(e){const t=e,{config:n,isConfigLoaded:i}=(0,c.Z)(),o=(0,a.ref)(!1),s=(0,a.computed)((()=>void 0!==t.args.collapse)),r=(0,a.computed)((()=>!s.value||o.value));return{__sfc:!0,config:n,isConfigLoaded:i,toggle:o,props:t,isCollapsible:s,isVisible:r,HistoryDatasetAsImage:Ic,HistoryDatasetCollectionDisplay:Yc,HistoryDatasetDetails:Fc,HistoryDatasetDisplay:Wc,HistoryDatasetIndex:qc,HistoryDatasetLink:Jc,HistoryLink:Xc,InstanceUrl:eu,InvocationTime:nu,JobMetrics:ou,JobParameters:su,ToolStd:lu,Visualization:uu,WorkflowDisplay:_u,WorkflowImage:yu,WorkflowLicense:xu}}},Mu=Su;const Tu=(0,m.Z)(Mu,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.isCollapsible?t("b-link",{staticClass:"font-weight-bold",on:{click:function(e){n.toggle=!n.toggle}}},[e._v("\n        "+e._s(e.args.collapse)+"\n    ")]):e._e(),e._v(" "),t("b-collapse",{attrs:{visible:n.isVisible}},["generate_galaxy_version"==e.name?t("div",{staticClass:"galaxy-version"},[t("pre",[t("code",[e._v(e._s(e.version))])])]):"generate_time"==e.name?t("div",{staticClass:"galaxy-time"},[t("pre",[t("code",[e._v(e._s(e.time))])])]):"workflow_image"==e.name?t("div",{staticClass:"workflow-image",staticStyle:{"text-align":"center"}},[t(n.WorkflowImage,{attrs:{"workflow-id":e.args.workflow_id,size:e.args.size||"lg","workflow-version":e.args.workflow_checkpoint||void 0}})],1):"workflow_license"==e.name?t("div",{staticClass:"workflow-license"},[t(n.WorkflowLicense,{attrs:{"license-id":e.workflows[e.args.workflow_id].license}})],1):"instance_citation_link"==e.name?t(n.InstanceUrl,{attrs:{href:n.config.citation_url,loading:!n.isConfigLoaded}}):"instance_terms_link"==e.name?t(n.InstanceUrl,{attrs:{href:n.config.terms_url,loading:!n.isConfigLoaded}}):"instance_support_link"==e.name?t(n.InstanceUrl,{attrs:{href:n.config.support_url,loading:!n.isConfigLoaded}}):"instance_help_link"==e.name?t(n.InstanceUrl,{attrs:{href:n.config.helpsite_url,loading:!n.isConfigLoaded}}):"instance_resources_link"==e.name?t(n.InstanceUrl,{attrs:{href:n.config.instance_resource_url,loading:!n.isConfigLoaded}}):"instance_access_link"==e.name?t(n.InstanceUrl,{attrs:{href:n.config.instance_access_url,loading:!n.isConfigLoaded}}):"instance_organization_link"==e.name?t(n.InstanceUrl,{attrs:{href:n.config.ga4gh_service_organization_url,title:n.config.ga4gh_service_organization_name,loading:!n.isConfigLoaded}}):"history_link"==e.name?t(n.HistoryLink,{attrs:{args:e.args,histories:e.histories}}):"history_dataset_as_image"==e.name?t(n.HistoryDatasetAsImage,{attrs:{args:e.args}}):"history_dataset_link"==e.name?t(n.HistoryDatasetLink,{attrs:{args:e.args}}):"history_dataset_index"==e.name?t(n.HistoryDatasetIndex,{attrs:{args:e.args}}):"invocation_time"==e.name?t(n.InvocationTime,{attrs:{args:e.args,invocations:e.invocations}}):"job_metrics"==e.name?t(n.JobMetrics,{attrs:{args:e.args}}):"job_parameters"==e.name?t(n.JobParameters,{attrs:{args:e.args}}):"workflow_display"==e.name?t(n.WorkflowDisplay,{attrs:{"workflow-id":e.args.workflow_id,"workflow-version":e.args.workflow_checkpoint,workflows:e.workflows}}):"visualization"==e.name?t(n.Visualization,{attrs:{args:e.args}}):"history_dataset_collection_display"==e.name?t(n.HistoryDatasetCollectionDisplay,{attrs:{args:e.args,collections:e.collections}}):["tool_stdout","tool_stderr"].includes(e.name)?t(n.ToolStd,{attrs:{args:e.args,name:e.name,jobs:e.jobs}}):["history_dataset_embedded","history_dataset_display"].includes(e.name)?t(n.HistoryDatasetDisplay,{attrs:{args:e.args,datasets:e.datasets,embedded:"history_dataset_embedded"==e.name}}):["history_dataset_name","history_dataset_info","history_dataset_peek","history_dataset_type"].includes(e.name)?t(n.HistoryDatasetDetails,{attrs:{name:e.name,args:e.args,datasets:e.datasets}}):e._e()],1)],1)}),[],!1,null,null,null).exports;var Lu=n(96277);const Du="\\s*[\\w\\|]+\\s*=\\s*(?:[\\w_\\-]+|\\\"[^\\\"]+\\\"|\\'[^\\']+\\')\\s*",Eu=new RegExp(`\\s*(\\w+)\\s*\\(\\s*(?:(${Du})(,${Du})*)?\\s*\\)\\s*`,"m"),Ou=Lc()(/<br>/,(()=>"<div style='clear:both;'/><br>")),Au=ye()();Au.use(Ou),a.default.use(d.ZPm),u.vI.add(h.q7m,h.Xcf);const Iu={store:r.Z,components:{MarkdownContainer:Tu,FontAwesomeIcon:p.GN,LoadingSpan:z.Z,StsDownloadButton:Lu.Z},props:{markdownConfig:{type:Object,default:null},enable_beta_markdown_export:{type:Boolean,default:!1},downloadEndpoint:{type:String,default:null},readOnly:{type:Boolean,default:!1},exportLink:{type:String,default:null}},data:()=>({markdownObjects:[],markdownErrors:[],datasets:{},histories:{},collections:{},workflows:{},jobs:{},invocations:{},loading:!0,workflowID:""}),computed:{effectiveExportLink(){return this.enable_beta_markdown_export?this.exportLink:null},time(){let e=this.markdownConfig.generate_time;if(e){e.endsWith("Z")||(e+="Z");return new Date(e).toLocaleString("default",{day:"numeric",month:"long",year:"numeric",minute:"numeric",hour:"numeric",timeZone:"UTC",timeZoneName:"short"})}return"unavailable"},workflowVersions(){return this.getStoredWorkflowByInstanceId(this.workflowID)},version(){return this.markdownConfig.generate_version||"Unknown Galaxy Version"}},watch:{markdownConfig(){this.initConfig()}},created(){this.initConfig(),this.fetchWorkflowForInstanceId(this.workflowID)},methods:{...(0,o.nv)(Dc.I,["getStoredWorkflowByInstanceId","fetchWorkflowForInstanceId"]),initConfig(){if(Object.keys(this.markdownConfig).length){const e=this.markdownConfig,t=e.content||e.markdown||"";this.markdownErrors=e.errors||[],this.markdownObjects=this.splitMarkdown(t),this.datasets=e.history_datasets||{},this.histories=e.histories||{},this.collections=e.history_dataset_collections||{},this.workflows=e.workflows||{},this.jobs=e.jobs||{},this.invocations=e.invocations||{},this.loading=!1,this.workflowID=Object.keys(this.markdownConfig.workflows)[0]}},splitMarkdown(e){const t=[];let n=e;for(;n.length>0;){const e=n.indexOf("```galaxy");if(-1==e){t.push({name:"default",content:Au.render(n)});break}{const i=n.substr(e+1).indexOf("```");if(-1!=i){if(e>0){const i=n.substr(0,e).trim();i&&t.push({name:"default",content:Au.render(i)})}const o=i+4,a=n.substr(e,o);let s=null;try{s=this.getArgs(a),t.push(s)}catch(e){this.markdownErrors.push({error:"Found an unresolved tag.",line:a})}n=n.substr(e+o)}else n=n.substr(e+1)}}return t},getArgs(e){const t={},n=Eu.exec(e)[1],i=[...e.matchAll(new RegExp(Du,"g"))];for(let e=0;e<i.length;e++){if(void 0===i[e])continue;const n=i[e].toString().replace(/,/g,"").trim();if(n){const[e,i]=n.split("=");t[e.trim()]=i.replace(/['"]+/g,"").trim()}}return{name:n,args:t,content:e}}}},Pu=Iu;const Ru=(0,m.Z)(Pu,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"markdown-wrapper"},[e.loading?t("LoadingSpan"):t("div",[t("div",[e.effectiveExportLink?t("StsDownloadButton",{staticClass:"float-right markdown-pdf-export",attrs:{"fallback-url":e.exportLink,"download-endpoint":e.downloadEndpoint,size:"sm",title:"Generate PDF"}}):e._e(),e._v(" "),e.readOnly?e._e():t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-right markdown-edit mr-2",attrs:{role:"button",size:"sm",title:"Edit Markdown"},on:{click:function(t){return e.$emit("onEdit")}}},[e._v("\n                Edit\n                "),t("FontAwesomeIcon",{attrs:{icon:"edit"}})],1),e._v(" "),t("h1",{staticClass:"float-right align-middle mr-2 mt-1 h-md"},[e._v("Galaxy "+e._s(e.markdownConfig.model_class))]),e._v(" "),t("span",{staticClass:"float-left font-weight-light"},[t("h1",{staticClass:"text-break align-middle"},[e._v("\n                    Title: "+e._s(e.markdownConfig.title||e.markdownConfig.model_class)+"\n                ")]),e._v(" "),e.workflowVersions?t("h2",{staticClass:"text-break align-middle"},[e._v("\n                    Workflow Checkpoint: "+e._s(e.workflowVersions.version)+"\n                ")]):e._e()])],1),e._v(" "),t("b-badge",{staticClass:"w-100 rounded mb-3 white-space-normal",attrs:{variant:"info"}},[t("div",{staticClass:"float-left m-1 text-break"},[e._v("Generated with Galaxy "+e._s(e.version)+" on "+e._s(e.time))]),e._v(" "),t("div",{staticClass:"float-right m-1"},[e._v("Identifier: "+e._s(e.markdownConfig.id))])]),e._v(" "),t("div",[e.markdownErrors.length>0?t("b-alert",{attrs:{variant:"warning",show:""}},e._l(e.markdownErrors,(function(n,i){return t("div",{key:i,staticClass:"mb-1"},[t("h2",{staticClass:"h-text"},[e._v(e._s(n.error||"Error"))]),e._v("\n                    "+e._s(n.line)+"\n                ")])})),0):e._e()],1),e._v(" "),e._l(e.markdownObjects,(function(n,i){return t("div",{key:i,staticClass:"markdown-components"},["default"==n.name?t("p",{staticClass:"text-justify m-2",domProps:{innerHTML:e._s(n.content)}}):t("MarkdownContainer",{attrs:{name:n.name,args:n.args,datasets:e.datasets,collections:e.collections,histories:e.histories,invocations:e.invocations,jobs:e.jobs,time:e.time,version:e.version,workflows:e.workflows}})],1)}))],2)],1)}),[],!1,null,null,null).exports,ju={components:{LoadingSpan:z.Z,Markdown:Ru,PageHtml:Mc,PublishedItem:_s},props:{pageId:{type:String,required:!0}},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0),n=(0,Xe.L)(),{currentUser:i}=(0,o.Jk)(n);return{config:e,currentUser:i,isConfigLoaded:t}},data:()=>({page:{}}),computed:{userOwnsPage(){return this.currentUser.username===this.page.username},dataUrl(){return`/api/pages/${this.pageId}`},exportUrl(){return`${this.dataUrl}.pdf`},editUrl(){return`/pages/editor?id=${this.pageId}`}},created(){(0,en.e)({url:this.dataUrl}).then((e=>{this.page=e}))},methods:{onEdit(){window.location=(0,D.dq)(this.editUrl)},stsUrl(e){return`${this.dataUrl}/prepare_download`}}},Yu=ju;const Hu=(0,m.Z)(Yu,(function(){var e=this,t=e._self._c;return t("PublishedItem",{attrs:{item:e.page},scopedSlots:e._u([{key:"default",fn:function(){return[e.isConfigLoaded?t("div",["markdown"==e.page.content_format?t("Markdown",{attrs:{"markdown-config":e.page,enable_beta_markdown_export:e.config.enable_beta_markdown_export,"download-endpoint":e.stsUrl(e.config),"export-link":e.exportUrl,"read-only":!e.userOwnsPage},on:{onEdit:e.onEdit}}):t("PageHtml",{attrs:{page:e.page}})],1):t("LoadingSpan",{attrs:{message:"Loading Galaxy configuration"}})]},proxy:!0}])})}),[],!1,null,null,null).exports;var Nu=n(18181);const Fu={__name:"MarkdownHelp",setup(e,{expose:t}){const n=(0,a.ref)(null);function i(){n.value.show()}return t({showMarkdownHelp:i}),{__sfc:!0,modal:n,showMarkdownHelp:i,datasetCommandsHtml:"\n<dt><tt>history_dataset_display</tt></dt>\n<dd>Embed a dataset description in the resulting document.</dd>\n<dt><tt>history_dataset_collection_display</tt></dt>\n<dd>Embed a dataset collection description in the resulting document.</dd>\n<dt><tt>history_dataset_as_image</tt></dt>\n<dd>Embed a dataset as an image in the resulting document - the dataset should be an image datatype.</dd>\n<dt><tt>history_dataset_peek</tt></dt>\n<dd>Embed Galaxy's metadata attribute 'peek' into the resulting document - this is datatype dependent metadata but usually this is a few lines from the start of a file.</dd>\n<dt><tt>history_dataset_info</tt></dt>\n<dd>Embed Galaxy's metadata attribute 'info' into the resulting document - this is datatype dependent metadata but usually this is the program output that generated the dataset.</dd>\n</dl>\n</div>\n",markdownGeneralHelpHtml:'\n<p>\n    For an overview of standard Markdown visit the\n    <a href="https://commonmark.org/help/tutorial/">commonmark.org tutorial</a>.\n</p>\n\n<p>\n    The Galaxy extensions to Markdown are represented as code blocks, these blocks start\n    with the line <tt>```galaxy</tt> and end with the line <tt>```</tt> and have a\n    command with arguments that reference parts of the workflow in the middle.\n</p>'}}},Bu=Fu;const $u=(0,m.Z)(Bu,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-modal",{ref:"modal",attrs:{"hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[t("h2",{staticClass:"mb-0"},[e._v("Markdown Help")])]},proxy:!0}])},[e._v(" "),t("div",[t("h3",[e._v("Overview")]),e._v(" "),t("p",[e._v("\n                This Markdown document will be used to generate your Galaxy Page. This document should be Markdown with\n                embedded commands for extracting and displaying Galaxy objects and their metadata.\n            ")]),e._v(" "),t("p",{domProps:{innerHTML:e._s(n.markdownGeneralHelpHtml)}}),e._v(" "),t("h3",[e._v("History Contents Commands")]),e._v(" "),t("p",[e._v("\n                These commands reference a dataset. For instance, the following examples would display the dataset\n                collection corresponding to a Galaxy dataset collection ID and display a single dataset as an image\n                corresponding to a Galaxy dataset ID.\n            ")]),e._v(" "),t("pre",[e._v("```galaxy\nhistory_dataset_collection_display(history_dataset_collection_id=33b43b4e7093c91f)\n```\n")]),e._v(" "),t("pre",[e._v("```galaxy\nhistory_dataset_as_image(history_dataset_id=33b43b4e7093c91f)\n```\n")]),e._v(" "),t("p",{domProps:{innerHTML:e._s(n.datasetCommandsHtml)}}),e._v(" "),t("h3",[e._v("Workflow Commands")]),e._v(" "),t("p",[e._v("\n                These commands reference a workflow (currently only one). The following example would display a\n                representation of the workflow in the resulting Galaxy Page:\n            ")]),e._v(" "),t("pre",[e._v("```galaxy\nworkflow_display(workflow_id=33b43b4e7093c91f>)\n```\n")]),e._v(" "),t("dl",[t("dt",[t("tt",[e._v("workflow_display")])],1),e._v(" "),t("dd",[e._v("Embed a description of the workflow itself in the resulting document.")])]),e._v(" "),t("h3",[e._v("Job Commands")]),e._v(" "),t("p",[e._v("\n                These commands reference a Galaxy job.For instance, the following example would show the job parameters\n                the job ID 33b43b4e7093c91f:\n            ")]),e._v(" "),t("pre",[e._v("```galaxy\njob_parameters(job_id=33b43b4e7093c91f)\n```\n")]),e._v(" "),t("dt",[t("tt",[e._v("tool_stderr")])],1),e._v(" "),t("dd",[e._v("Embed the tool standard error stream for this job in the resulting document.")]),e._v(" "),t("dt",[t("tt",[e._v("tool_stdout")])],1),e._v(" "),t("dd",[e._v("Embed the tool standard output stream for this job in the resulting document.")]),e._v(" "),t("dt",[t("tt",[e._v("job_metrics")])],1),e._v(" "),t("dd",[e._v("\n                Embed the job metrics for this job in the resulting document (if Galaxy is configured and you have\n                permission).\n            ")]),e._v(" "),t("dt",[t("tt",[e._v("job_parameters")])],1),e._v(" "),t("dd",[e._v("Embed the tool parameters for this job in the resulting document.")])])])}),[],!1,null,null,null).exports;var zu=n(99454);const Wu={mixins:[n(1500).Z],props:{getData:{type:Function,required:!0},title:{type:String,required:!0},leafIcon:{type:String,default:null},labelKey:{type:String,default:"id"},detailsKey:{type:String,default:null},timeKey:{type:String,default:"update_time"},isEncoded:{type:Boolean,default:!1}},data:()=>({errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,hasValue:!1}),created(){this.load()},methods:{onOk(e){this.$emit("onOk",e)},onCancel(){this.$emit("onCancel")},async load(){this.filter=null,this.optionsShow=!1;try{const e=(await this.getData()).data;this.items=e.map((e=>{let t=e[this.timeKey];if(t){t=new Date(t).toLocaleString("default",{day:"numeric",month:"short",year:"numeric",minute:"numeric",hour:"numeric"})}return{id:e.id,label:e[this.labelKey]||null,details:e[this.detailsKey]||null,time:t||null,isLeaf:!0}})),this.optionsShow=!0}catch(e){this.errorMessage=(0,y.a)(e)}}}};const Uu=(0,m.Z)(Wu,(function(){var e=this,t=e._self._c;return t("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":e.onCancel},scopedSlots:e._u([{key:"search",fn:function(){return[t("data-dialog-search",{attrs:{title:e.title},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?t("data-dialog-table",{attrs:{items:e.items,multiple:!1,"is-encoded":e.isEncoded,filter:e.filter,"leaf-icon":e.leafIcon,"show-details":!!e.detailsKey},on:{clicked:e.onOk,load:e.load}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports;var Vu=n(95651),qu=n(38944);a.default.use(d.ZPm);const Zu={props:{labelTitle:{type:String,default:""},labels:{type:Array,default:null},argumentName:{type:String,default:null}},data:()=>({selectedValue:0,modalShow:!0}),computed:{title(){return`Insert '${this.argumentName}'`},hasLabels(){return this.labels&&this.labels.length>0}},methods:{onOk(){this.$emit("onOk",this.labels[this.selectedValue])},onCancel(){this.$emit("onCancel")}}};const Gu=(0,m.Z)(Zu,(function(){var e=this,t=e._self._c;return t("span",[t("b-modal",{attrs:{title:e.title,"ok-title":"Continue"},on:{ok:e.onOk,cancel:e.onCancel,hidden:e.onCancel},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[t("div",{staticClass:"ml-2"},[t("h2",{staticClass:"mb-3 h-text"},[e._v("Select "+e._s(e.labelTitle)+" Label:")]),e._v(" "),e.hasLabels?t("div",e._l(e.labels,(function(n,i){return t("b-form-radio",{key:i,staticClass:"my-2",attrs:{name:"labels",value:i},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},[e._v("\n                    "+e._s(n)+"\n                ")])})),1):t("b-alert",{attrs:{show:"",variant:"info"}},[e._v("\n                No labels found. Please specify labels in the Workflow Editor.\n            ")]),e._v(" "),t("p",{staticClass:"mt-3 text-muted"},[e._v("\n                You may add new labels by selecting a step in the workflow editor and then editing the corresponding\n                label field in the step form.\n            ")])],1)])],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const Ju={components:{MarkdownSelector:Gu,DataDialog:zu.Z,FormDisplay:le.Z},props:{argumentName:{type:String,required:!0},argumentPayload:{type:Object,default:null},history:{type:String,required:!0},labels:{type:Array,default:null},useLabels:{type:Boolean,required:!0}},data:()=>({dataTag:null,formData:{},formShow:!1,labelShow:!1,dataShow:!1}),computed:{formInputs(){let e=null;return this.argumentPayload.settings&&this.argumentPayload.settings.length>0&&(e=this.argumentPayload.settings.slice()),this.argumentPayload.groups&&this.argumentPayload.groups.length>0&&(e=e||[],e.push({type:"repeat",title:"Columns",name:"groups",min:1,inputs:this.argumentPayload.groups.map((e=>("data_column"==e.type&&(e.is_workflow=!0),e)))})),e}},created(){this.useLabels?this.labelShow=!0:this.dataShow=!0},methods:{onChange(e){this.formData=e},onLabel(e){this.dataTag=`output="${e}"`,this.labelShow=!1,this.formInputs?this.formShow=!0:this.onOk()},onData(e){this.dataTag=`history_dataset_id=${e}`,this.dataShow=!1,this.formInputs?this.formShow=!0:this.onOk()},onOk(){let e="";Object.entries(this.formData).forEach((([t,n])=>{n&&(e+=`, ${t}="${n}"`)})),this.$emit("onOk",`visualization(visualization_id=${this.argumentName}, ${this.dataTag}${e})`)},onCancel(){this.$emit("onCancel")}}};const Ku=(0,m.Z)(Ju,(function(){var e=this,t=e._self._c;return t("span",[e.labelShow?t("MarkdownSelector",{attrs:{"argument-name":e.argumentName,labels:e.labels},on:{onOk:e.onLabel,onCancel:e.onCancel}}):e._e(),e._v(" "),e.dataShow?t("DataDialog",{attrs:{history:e.history,format:"id"},on:{onOk:e.onData,onCancel:e.onCancel}}):e._e(),e._v(" "),e.formShow?t("b-modal",{attrs:{"modal-class":"visualization-dialog-modal",title:"Configure Visualization","ok-title":"Continue"},on:{ok:e.onOk,cancel:e.onCancel},model:{value:e.formShow,callback:function(t){e.formShow=t},expression:"formShow"}},[t("FormDisplay",{attrs:{inputs:e.formInputs},on:{onChange:e.onChange}})],1):e._e()],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const Xu={components:{MarkdownSelector:Gu,MarkdownVisualization:Ku,BasicSelectionDialog:Uu,DatasetCollectionDialog:Vu.Z,DataDialog:zu.Z},props:{argumentName:{type:String,default:null},argumentType:{type:String,default:null},argumentPayload:{type:Object,default:null},labels:{type:Array,default:null},useLabels:{type:Boolean,default:!1}},data:()=>({selectorConfig:{job_id:{labelTitle:"Step"},invocation_id:{labelTitle:"Step"},history_dataset_id:{labelTitle:"Output"},history_dataset_collection_id:{labelTitle:"Output"}},jobsUrl:`${(0,g.getAppRoot)()}api/jobs`,workflowsUrl:`${(0,g.getAppRoot)()}api/workflows`,invocationsUrl:`${(0,g.getAppRoot)()}api/invocations`,historiesUrl:`${(0,g.getAppRoot)()}api/histories?view=detailed&q=published&qv=True`,selectedShow:!1,visualizationShow:!1,workflowShow:!1,historyShow:!1,jobShow:!1,invocationShow:!1,dataShow:!1,dataCollectionShow:!1}),computed:{selectedLabelTitle(){const e=this.selectorConfig[this.argumentType];return e&&e.labelTitle||"Select Label"}},created(){this.onCreate()},methods:{getInvocations(){return v.Z.get(this.invocationsUrl)},getJobs(){return v.Z.get(this.jobsUrl)},getWorkflows(){return v.Z.get(this.workflowsUrl)},getHistories(){return v.Z.get(this.historiesUrl)},onData(e){this.dataShow=!1,this.$emit("onInsert",`${this.argumentName}(history_dataset_id=${e})`)},onDataCollection(e){this.dataCollectionShow=!1,this.$emit("onInsert",`${this.argumentName}(history_dataset_collection_id=${e.id})`)},onJob(e){this.jobShow=!1,this.$emit("onInsert",`${this.argumentName}(job_id=${e.id})`)},onInvocation(e){this.invocationShow=!1,this.$emit("onInsert",`${this.argumentName}(invocation_id=${e.id})`)},onHistory(e){this.historyShow=!1,this.$emit("onInsert",`history_link(history_id=${e.id})`)},onWorkflow(e){this.workflowShow=!1,this.$emit("onInsert",`${this.argumentName}(workflow_id=${e.id})`)},onVisualization(e){this.visualizationShow=!1,this.$emit("onInsert",e)},onCreate(){"workflow_id"==this.argumentType?this.workflowShow=!0:"history_id"==this.argumentType?this.historyShow=!0:"history_dataset_id"==this.argumentType?this.useLabels?this.selectedShow=!0:(0,qu.of)().then((e=>{this.dataHistoryId=e,this.dataShow=!0})):"history_dataset_collection_id"==this.argumentType?this.useLabels?this.selectedShow=!0:(0,qu.of)().then((e=>{this.dataHistoryId=e,this.dataCollectionShow=!0})):"invocation_id"==this.argumentType?this.useLabels?this.selectedShow=!0:this.invocationShow=!0:"job_id"==this.argumentType?this.useLabels?this.selectedShow=!0:this.jobShow=!0:"visualization_id"==this.argumentType&&(0,qu.of)().then((e=>{this.dataHistoryId=e,this.visualizationShow=!0}))},onOk(e){e=e||"<ENTER LABEL>",this.selectedShow=!1,"history_dataset_id"==this.argumentType?this.useLabels?this.$emit("onInsert",`${this.argumentName}(output="${e}")`):(0,qu.of)().then((e=>{this.dataShow=!0,this.dataHistoryId=e})):"history_dataset_collection_id"==this.argumentType?this.useLabels?this.$emit("onInsert",`${this.argumentName}(output="${e}")`):(0,qu.of)().then((e=>{this.dataCollectionShow=!0,this.dataHistoryId=e})):"job_id"==this.argumentType?this.useLabels?this.$emit("onInsert",`${this.argumentName}(step="${e}")`):this.jobShow=!0:"invocation_id"==this.argumentType&&(this.useLabels?this.$emit("onInsert",`${this.argumentName}(step="${e}")`):this.invocationShow=!0)},onCancel(){this.dataCollectionShow=!1,this.selectedShow=!1,this.workflowShow=!1,this.visualizationShow=!1,this.jobShow=!1,this.invocationShow=!1,this.dataShow=!1,this.$emit("onCancel")}}},Qu=Xu;const eh=(0,m.Z)(Qu,(function(){var e=this,t=e._self._c;return t("span",[e.selectedShow?t("MarkdownSelector",{attrs:{"initial-value":e.argumentType,"argument-name":e.argumentName,labels:e.labels,"label-title":e.selectedLabelTitle},on:{onOk:e.onOk,onCancel:e.onCancel}}):e.visualizationShow?t("MarkdownVisualization",{attrs:{"argument-name":e.argumentName,"argument-payload":e.argumentPayload,labels:e.labels,"use-labels":e.useLabels,history:e.dataHistoryId},on:{onOk:e.onVisualization,onCancel:e.onCancel}}):e.dataShow?t("DataDialog",{attrs:{history:e.dataHistoryId,format:"id"},on:{onOk:e.onData,onCancel:e.onCancel}}):e.dataCollectionShow?t("DatasetCollectionDialog",{attrs:{history:e.dataHistoryId,format:"id"},on:{onOk:e.onDataCollection,onCancel:e.onCancel}}):e.jobShow?t("BasicSelectionDialog",{attrs:{"get-data":e.getJobs,"is-encoded":!0,title:"Job","label-key":"id"},on:{onOk:e.onJob,onCancel:e.onCancel}}):e.invocationShow?t("BasicSelectionDialog",{attrs:{"get-data":e.getInvocations,"is-encoded":!0,title:"Invocation","label-key":"id"},on:{onOk:e.onInvocation,onCancel:e.onCancel}}):e.workflowShow?t("BasicSelectionDialog",{attrs:{"get-data":e.getWorkflows,title:"Workflow","leaf-icon":"fa fa-sitemap fa-rotate-270","label-key":"name"},on:{onOk:e.onWorkflow,onCancel:e.onCancel}}):e.historyShow?t("BasicSelectionDialog",{attrs:{"get-data":e.getHistories,title:"History","label-key":"name"},on:{onOk:e.onHistory,onCancel:e.onCancel}}):e._e()],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const th=[{id:"history_dataset_display",name:"Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_collection_display",name:"Collection",emitter:"onHistoryCollectionId"},{id:"history_dataset_as_image",name:"Image",emitter:"onHistoryDatasetId"},{id:"history_dataset_index",name:"Dataset Index",emitter:"onHistoryDatasetId"},{id:"history_dataset_embedded",name:"Embedded Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_type",name:"Dataset Type",emitter:"onHistoryDatasetId"},{id:"history_dataset_link",name:"Link to Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_name",name:"Name of Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_peek",name:"Peek into Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_info",name:"Dataset Details",emitter:"onHistoryDatasetId"}],nh={components:{MarkdownDialog:eh,ToolSection:Ga},props:{steps:{type:Object,default:null}},data:()=>({selectedArgumentName:null,selectedType:null,selectedLabels:null,selectedShow:!1,selectedPayload:null,visualizationIndex:{},error:null,historySection:{title:"History",name:"history",elems:[...th,{id:"history_link",name:"Link to Import",emitter:"onHistoryId"}]},historyInEditorSection:{title:"History",name:"history",elems:[...th,{id:"history_link",name:"Link to Import"}]},jobSection:{title:"Jobs",name:"jobs",elems:[{id:"job_metrics",name:"Job Metrics",description:"as table",emitter:"onJobId"},{id:"job_parameters",name:"Job Parameters",description:"as table",emitter:"onJobId"},{id:"tool_stdout",name:"Tool Output",description:"of job run",emitter:"onJobId"},{id:"tool_stderr",name:"Tool Error",description:"of job run",emitter:"onJobId"}]},workflowSection:{title:"Workflow",name:"workflow",elems:[{id:"invocation_time",name:"Invocation Time",emitter:"onInvocationId"},{id:"workflow_display",name:"Workflow Display",emitter:"onWorkflowId"},{id:"workflow_license",name:"Workflow License",emitter:"onWorkflowId"},{id:"workflow_image",name:"Workflow Image",emitter:"onWorkflowId"}]},workflowInEditorSection:{title:"Workflow",name:"workflow",elems:[{id:"invocation_inputs",name:"Invocation Inputs"},{id:"invocation_outputs",name:"Invocation Output"},{id:"invocation_time",name:"Time a Workflow",description:"was invoked"},{id:"workflow_display",name:"Current Workflow",description:"containing all steps"},{id:"workflow_image",name:"Current Workflow Image"},{id:"workflow_license",name:"Current Workflow License"}]},otherSection:{title:"Miscellaneous",name:"others",elems:[{id:"generate_galaxy_version",name:"Galaxy Version",description:"as text"},{id:"generate_time",name:"Current Time",description:"as text"}]},linksSection:{title:"Galaxy Instance Links",name:"links",elems:[{id:"instance_access_link",name:"Access",description:"(link used to access this Galaxy)"},{id:"instance_resources_link",name:"Resources",description:"(link for more information about this Galaxy)"},{id:"instance_help_link",name:"Help",description:"(link for finding help content for this Galaxy)"},{id:"instance_support_link",name:"Support",description:"(link for support for this Galaxy)"},{id:"instance_citation_link",name:"Citation",description:"(link describing how to cite this Galaxy instance)"},{id:"instance_terms_link",name:"Terms and Conditions",description:"(link describing terms and conditions for using this Galaxy instance)"},{id:"instance_organization_link",name:"Organization",description:"(link describing organization that runs this Galaxy instance)"}]},visualizationSection:{title:"Visualizations",name:"visualizations",elems:[]}}),computed:{isWorkflow(){return!!this.steps},hasVisualizations(){return this.visualizationSection.elems.length>0}},created(){this.getVisualizations()},methods:{getSteps(){const e=[];return this.steps&&Object.values(this.steps).forEach((t=>{t.label&&e.push(t.label)})),e},getOutputs(){const e=[];return this.steps&&Object.values(this.steps).forEach((t=>{t.workflow_outputs.forEach((t=>{t.label&&e.push(t.label)}))})),e},getArgumentTitle:e=>e[0].toUpperCase()+e.substr(1).replace(/_([a-z])/g,(e=>` ${e[1].toUpperCase()}`)),onClick(e){switch(e.emitter){case"onHistoryDatasetId":this.onHistoryDatasetId(e.id);break;case"onHistoryId":this.onHistoryId(e.id);break;case"onHistoryCollectionId":this.onHistoryCollectionId(e.id);break;case"onJobId":this.onJobId(e.id);break;case"onWorkflowId":this.onWorkflowId(e.id);break;case"onInvocationId":this.onInvocationId(e.id);break;case"onVisualizationId":this.onVisualizationId(e.id);break;default:this.onNoParameter(e.id)}},onInsert(e){this.$emit("onInsert",e),this.selectedShow=!1},onCancel(){this.selectedShow=!1},onNoParameter(e){this.onInsert(`${e}()`)},onVisualizationId(e){this.selectedArgumentName=e,this.selectedType="visualization_id",this.selectedPayload=this.visualizationIndex[e],this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onHistoryId(e){this.selectedArgumentName=e,this.selectedType="history_id",this.selectedShow=!0},onHistoryDatasetId(e){this.selectedArgumentName=e,this.selectedType="history_dataset_id",this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onHistoryCollectionId(e){this.selectedArgumentName=e,this.selectedType="history_dataset_collection_id",this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onWorkflowId(e){this.selectedArgumentName=e,this.selectedType="workflow_id",this.selectedShow=!0},onJobId(e){this.selectedArgumentName=e,this.selectedType="job_id",this.selectedLabels=this.getSteps(),this.selectedShow=!0},onInvocationId(e){this.selectedArgumentName=e,this.selectedType="invocation_id",this.selectedLabels=this.getSteps(),this.selectedShow=!0},async getVisualizations(){v.Z.get(`${(0,g.getAppRoot)()}api/plugins?embeddable=True`).then((({data:e})=>{this.visualizationSection.elems=e.map((e=>({id:e.name,name:e.html,description:e.description,logo:e.logo?`${(0,g.getAppRoot)()}${e.logo}`:null,emitter:"onVisualizationId"}))),this.visualizationIndex={},e.forEach((e=>{this.visualizationIndex[e.name]=e}))})).catch((e=>{this.error="Failed to load Visualizations."}))}}},ih=nh;const oh=(0,m.Z)(ih,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"unified-panel"},[e._m(0),e._v(" "),t("div",{staticClass:"unified-panel-body"},[t("div",{staticClass:"toolMenuContainer"},[e.error?t("b-alert",{staticClass:"my-2 mx-3 px-2 py-1",attrs:{variant:"danger",show:""}},[e._v("\n                "+e._s(e.error)+"\n            ")]):e._e(),e._v(" "),e.isWorkflow?t("ToolSection",{attrs:{category:e.historyInEditorSection,expanded:!0},on:{onClick:e.onClick}}):t("ToolSection",{attrs:{category:e.historySection,expanded:!0},on:{onClick:e.onClick}}),e._v(" "),t("ToolSection",{attrs:{category:e.jobSection,expanded:!0},on:{onClick:e.onClick}}),e._v(" "),e.isWorkflow?t("ToolSection",{attrs:{category:e.workflowInEditorSection,expanded:!0},on:{onClick:e.onClick}}):t("ToolSection",{attrs:{category:e.workflowSection,expanded:!0},on:{onClick:e.onClick}}),e._v(" "),t("ToolSection",{attrs:{category:e.linksSection,expanded:!1},on:{onClick:e.onClick}}),e._v(" "),t("ToolSection",{attrs:{category:e.otherSection,expanded:!0},on:{onClick:e.onClick}}),e._v(" "),e.hasVisualizations?t("ToolSection",{attrs:{category:e.visualizationSection,expanded:!0},on:{onClick:e.onClick}}):e._e()],1)]),e._v(" "),e.selectedShow?t("MarkdownDialog",{attrs:{"argument-type":e.selectedType,"argument-name":e.selectedArgumentName,"argument-payload":e.selectedPayload,labels:e.selectedLabels,"use-labels":e.isWorkflow},on:{onInsert:e.onInsert,onCancel:e.onCancel}}):e._e()],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[e("div",{staticClass:"unified-panel-header-inner"},[e("div",{staticClass:"panel-header-text"},[this._v("Insert Objects")])])])}],!1,null,null,null).exports;a.default.use(d.ZPm),u.vI.add(h.Psp);const ah={components:{MarkdownToolBox:oh,FlexPanel:La,FontAwesomeIcon:p.GN,MarkdownHelp:$u},props:{markdownText:{type:String,default:null},markdownConfig:{type:Object,default:null},steps:{type:Object,default:null},title:{type:String,default:null}},data(){return{content:this.markdownText}},watch:{markdownText(){const e=this.$refs["text-area"],t=e.selectionEnd;this.content=this.markdownText,a.default.nextTick((()=>{e.selectionEnd=t,e.focus()}))}},methods:{onInsert(e){e=`\`\`\`galaxy\n${e=e.replace(")(",", ")}\n\`\`\`\n`;const t=this.$refs["text-area"];t.focus();const n=t.selectionStart;let i=this.content.substr(0,n);i+=`\r\n${e.trim()}\r\n`,i+=this.content.substr(n),this.$emit("onUpdate",i)},onUpdate:Nu.default.debounce((function(e){this.$emit("onUpdate",this.content)}),300),onHelp(){this.$refs.help.showMarkdownHelp()}}},sh=ah;const rh=(0,m.Z)(sh,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex",attrs:{id:"columns"}},[t("FlexPanel",{attrs:{side:"left"}},[t("MarkdownToolBox",{attrs:{steps:e.steps},on:{onInsert:e.onInsert}})],1),e._v(" "),t("div",{staticClass:"overflow-auto w-100",attrs:{id:"center"}},[t("div",{staticClass:"markdown-editor h-100"},[t("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[t("div",{staticClass:"panel-header-buttons"},[e._t("buttons"),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{title:"Help",variant:"link",role:"button"},on:{click:e.onHelp}},[t("FontAwesomeIcon",{attrs:{icon:"question"}})],1)],2),e._v(" "),t("div",{staticClass:"my-1"},[e._v("\n                        "+e._s(e.title)+"\n                    ")])])]),e._v(" "),t("div",{staticClass:"unified-panel-body d-flex"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],ref:"text-area",staticClass:"markdown-textarea",attrs:{id:"workflow-report-editor"},domProps:{value:e.content},on:{input:[function(t){t.target.composing||(e.content=t.target.value)},e.onUpdate]}})])])]),e._v(" "),t("MarkdownHelp",{ref:"help"})],1)}),[],!1,null,null,null).exports;var lh=n(54282);a.default.use(d.ZPm),u.vI.add(h.Mdf,h.r6l);const dh={components:{MarkdownEditor:rh,FontAwesomeIcon:p.GN},props:{pageId:{required:!0,type:String},publicUrl:{required:!0,type:String},title:{type:String,default:null},content:{type:String,default:null},contentData:{type:Object,default:null}},data:function(){return{markdownText:this.content}},methods:{onUpdate(e){this.markdownText=e},saveContent(e){(async function(e,t,n=!0){n&&(0,lh.LJ)((0,Ee.ZP)("Saving page"),(0,Ee.ZP)("progress"));try{return await v.Z.post(`${(0,g.getAppRoot)()}api/pages/${e}/revisions`,{content:t}).finally(n&&lh.MA)}catch(e){(0,y.t)(e)}})(this.pageId,this.markdownText,!e).then((()=>{e&&(window.location=this.publicUrl)})).catch((e=>{oo.FN.error(`Failed to save page: ${e}`)}))}}};const ch={components:{PageEditorMarkdown:(0,m.Z)(dh,(function(){var e=this,t=e._self._c;return t("MarkdownEditor",{attrs:{title:e.title,"markdown-text":e.markdownText,"markdown-config":e.contentData},on:{onUpdate:e.onUpdate},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"save-button",title:"Save",variant:"link",role:"button"},on:{click:function(t){return e.saveContent(!1)}}},[t("FontAwesomeIcon",{attrs:{icon:"save"}})],1),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"view-button",title:"Save & View",variant:"link",role:"button"},on:{click:function(t){return e.saveContent(!0)}}},[t("FontAwesomeIcon",{attrs:{icon:"eye"}})],1)]},proxy:!0}])})}),[],!1,null,null,null).exports,LoadingSpan:z.Z},props:{pageId:{required:!0,type:String}},data:()=>({title:null,contentFormat:null,contentData:null,content:null,publicUrl:null,loading:!0}),created(){this.getPage(this.pageId).then((e=>{this.publicUrl=`${(0,g.getAppRoot)()}u/${e.username}/p/${e.slug}`,this.content=e.content,this.contentFormat=e.content_format,this.contentData=e,this.title=e.title,this.loading=!1})).catch((e=>{oo.FN.error(`Failed to load page: ${e}`)}))},methods:{async getPage(e){try{const{data:t}=await v.Z.get(`${(0,g.getAppRoot)()}api/pages/${e}`);return t}catch(e){(0,y.t)(e)}}}},uh=ch;const hh=(0,m.Z)(uh,(function(){var e=this,t=e._self._c;return e.loading?t("LoadingSpan",{staticClass:"m-3",attrs:{message:"Loading Page"}}):t("PageEditorMarkdown",{attrs:{title:e.title,"page-id":e.pageId,"public-url":e.publicUrl,content:e.content,"content-data":e.contentData}})}),[],!1,null,null,null).exports;var ph=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const fh=(0,o.Q_)("jobStore",{state:()=>({jobs:{},response:{}}),getters:{getJob:e=>t=>e.jobs[t],getLatestResponse:e=>e.response},actions:{fetchJob(e){return ph(this,void 0,void 0,(function*(){const{data:t}=yield v.Z.get(`${(0,g.getAppRoot)()}api/jobs/${e}?full=true`);this.saveJobForJobId(e,t)}))},saveJobForJobId(e,t){a.default.set(this.jobs,e,t)},saveLatestResponse(e){this.response=e}}});var mh=n(21718),_h=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};function vh(e=!0){return _h(this,void 0,void 0,(function*(){const t=yield(0,mh.z)(e);return new Bc(t)}))}class gh{constructor(){Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:1/0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:1/0}),Object.defineProperty(this,"endX",{enumerable:!0,configurable:!0,writable:!0,value:-1/0}),Object.defineProperty(this,"endY",{enumerable:!0,configurable:!0,writable:!0,value:-1/0})}get width(){const e=this.endX-this.x;return e>0?e:0}set width(e){this.endX=this.x+e}get height(){const e=this.endY-this.y;return e>0?e:0}set height(e){this.endY=this.y+e}reset(){this.x=1/0,this.y=1/0,this.endX=-1/0,this.endY=-1/0}fitRectangle(e){this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.endX<e.x+e.width&&(this.endX=e.x+e.width),this.endY<e.y+e.height&&(this.endY=e.y+e.height)}squareCenter(){if(this.width>this.height){const e=this.width-this.height;this.y-=.5*e,this.endY+=.5*e}else{const e=this.height-this.width;this.x-=.5*e,this.endX+=.5*e}}expand(e){this.x-=e,this.y-=e,this.endX+=e,this.endY+=e}isPointInBounds(e){return e.x>this.x&&e.y>this.y&&e.x<this.endX&&e.y<this.endY}contains(e){return this.x<=e.x&&this.y<=e.y&&this.endX>=e.x+e.width&&this.endY>=e.y+e.height}}class yh{constructor(e=[1,0,0,1,0,0]){Object.defineProperty(this,"matrix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.matrix=e}translate(e){return new yh([this.matrix[0],this.matrix[1],this.matrix[2],this.matrix[3],this.matrix[4]+e[0],this.matrix[5]+e[1]])}scale(e){return new yh([this.matrix[0]*e[0],this.matrix[1]*e[1],this.matrix[2]*e[0],this.matrix[3]*e[1],this.matrix[4],this.matrix[5]])}inverse(){const e=this.matrix,t=e[0]*e[3]-e[1]*e[2],n=e[3]/t,i=e[1]/-t,o=e[2]/-t,a=e[0]/t,s=(e[3]*e[4]-e[2]*e[5])/-t,r=(e[1]*e[4]-e[0]*e[5])/t;return new yh([n,i,o,a,s,r])}applyToContext(e){e.transform(...this.matrix)}apply(e){return[this.matrix[0]*e[0]+this.matrix[2]*e[1]+this.matrix[4],this.matrix[1]*e[0]+this.matrix[3]*e[1]+this.matrix[5]]}resetTranslation(){return new yh([this.matrix[0],this.matrix[1],this.matrix[2],this.matrix[3],0,0])}get scaleX(){return this.matrix[0]}get scaleY(){return this.matrix[3]}}function bh(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function wh(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function kh(e,t){return[Math.round(e[0]/t)*t,Math.round(e[1]/t)*t]}function Ch(e,t){return[e[0]-t[0],e[1]-t[1]]}function xh(e,t=1){const n=Math.pow(10,t);return[Math.round(e[0]*n)/n,Math.round(e[1]*n)/n]}var Sh=n(85489),Mh=n(47425),Th=n(69678),Lh=n(69613);const Dh=e=>{const{scope:t}=(0,Mh.T)();return(0,o.Q_)(`workflowCommentStore${t(e)}`,(()=>{const t=(0,a.ref)({}),n=(0,a.ref)({}),i=(0,a.computed)((()=>Object.values(t.value)));const o=(e,n=[0,0])=>{e.forEach((e=>{const i=structuredClone(e);i.position[0]+=n[0],i.position[1]+=n[1],(0,a.set)(t.value,i.id,i)}))},s=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=i.value[i.value.length-1])||void 0===e?void 0:e.id)&&void 0!==t?t:-1})),r=(0,a.computed)((()=>e=>{var t,i;return null!==(i=null===(t=n.value[e])||void 0===t?void 0:t.justCreated)&&void 0!==i&&i})),l=(0,a.computed)((()=>e=>{const n=t.value[e];return(0,Sh.Nh)(n),n}));function d(e){(0,a.del)(t.value,e)}function c(e){return{x:e.position[0],y:e.position[1],width:e.size[0],height:e.size[1]}}const u=(0,Th.l)(e);const h=(0,Lh.R)(e);return{commentsRecord:t,comments:i,addComments:o,highestCommentId:s,isJustCreated:r,changePosition:function(e,t){const n=l.value(e);(0,a.set)(n,"position",xh(t))},changeSize:function(e,t){const n=l.value(e);(0,a.set)(n,"size",xh(t))},changeData:function(e,t){const n=l.value(e);!function(e,t){if(!(0,fe.EQ)(e,{text:()=>(0,fe.BZ)(t,["text","size"]),markdown:()=>(0,fe.BZ)(t,["text"]),frame:()=>(0,fe.BZ)(t,["title"]),freehand:()=>(0,fe.BZ)(t,["thickness","line"])}))throw new TypeError(`Object "${t}" is not a valid data object for an ${e} comment`)}(n.type,t),(0,a.set)(n,"data",t)},changeColor:function(e,t){const n=l.value(e);(0,a.set)(n,"color",t)},addPoint:function(e,t){const n=l.value(e);if("freehand"!==n.type)throw new Error("Can only add points to freehand comment");n.data.line.push(t),n.size=wh(n.size,Ch(t,n.position));const i=n.position;n.position=bh(n.position,t);const o=Ch(i,n.position);var a,s;n.size=(a=n.size,s=o,[a[0]+s[0],a[1]+s[1]])},deleteComment:d,createComment:function(e){!function(e){const t=n.value[e];t?(0,a.set)(t,"justCreated",!0):(0,a.set)(n.value,e,{justCreated:!0})}(e.id),o([e])},clearJustCreated:function(e){const t=n.value[e];t&&(0,a.del)(t,"justCreated")},deleteFreehandComments:function(){Object.values(t.value).forEach((e=>{"freehand"===e.type&&d(e.id)}))},resolveCommentsInFrames:function(){const e=i.value.filter((e=>"frame"===e.type)).reverse();let t=[...i.value];e.forEach((e=>{const n=new gh;n.fitRectangle(c(e)),e.child_comments=[],t=t.flatMap((t=>{const i=c(t);return t!==e&&n.contains(i)?(e.child_comments.push(t.id),[]):[t]}))}))},resolveStepsInFrames:function(){const e=i.value.filter((e=>"frame"===e.type)).reverse();let t=[...Object.values(h.steps)];e.forEach((e=>{const n=new gh;n.fitRectangle(c(e)),e.child_steps=[],t=t.flatMap((t=>{const i=function(e){const t=u.stepPosition[e.id];return t&&e.position?{x:e.position.left,y:e.position.top,width:t.width,height:t.height}:null}(t);return i&&n.contains(i)?(e.child_steps.push(t.id),[]):[t]}))}))},$reset:function(){t.value={},n.value={}}}}))()};var Eh=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};function Oh(e,t,n=!1,i={top:0,left:0}){return Eh(this,void 0,void 0,(function*(){const o=(0,Lh.R)(e),a=Dh(e);if(n){const e=o.getStepIndex+1;Object.values(t.steps).forEach((t=>{delete t.uuid,t.position||(t.position={top:100*t.id,left:100*t.id}),t.id+=e,t.position.left+=i.left,t.position.top+=i.top,Object.values(t.input_connections).forEach((n=>{if(void 0===n)console.error("input connections invalid",t.input_connections);else{let t;t=Array.isArray(n)?n:[n],t.forEach((t=>{t.id+=e}))}}))})),t.comments.forEach(((e,t)=>{e.id=a.highestCommentId+1+t}))}Object.values(t.steps).map((e=>{o.addStep(e)})),a.addComments(t.comments,[i.left,i.top])}))}function Ah(e,t){const n=t.steps,i=t.report,o=t.license,a=t.creator,s=t.annotation,r=t.name,l=t.tags,d=Dh(e);d.resolveCommentsInFrames(),d.resolveStepsInFrames();return{steps:n,report:i,license:o,creator:a,annotation:s,name:r,comments:t.comments.filter((e=>!("text"===e.type&&""===e.data.text))),tags:l}}async function Ih(e){try{const{data:t}=await v.Z.get(`${(0,g.getAppRoot)()}api/workflows/${e}/versions`);return t}catch(e){(0,y.t)(e)}}async function Ph(e,t,n){n(t,!0);try{const{data:i}=await v.Z.post(`${(0,g.getAppRoot)()}api/workflows/build_module`,e);return n(t,!1),i}catch(e){n(t,!1,(0,y.a)(e)),(0,y.t)(e)}}async function Rh(e,t,n=!1){try{const i={actions:t,style:"editor",dry_run:n},{data:o}=await v.Z.put(`${(0,g.getAppRoot)()}api/workflows/${e}/refactor`,i);return o}catch(e){(0,y.t)(e)}}async function jh({id:e,version:t=null}){try{const n=Number.isInteger(t)?`version=${t}`:"",{data:i}=await v.Z.get(`${(0,g.getAppRoot)()}workflow/load_workflow?_=true&id=${e}&${n}`);return i}catch(e){console.debug(e),(0,y.t)(e)}}async function Yh(e){if(e.hasChanges)try{const t={workflow:Ah(e.id,e),from_tool_form:!0},{data:n}=await v.Z.put(`${(0,g.getAppRoot)()}api/workflows/${e.id}`,t);return e.name=n.name,e.hasChanges=!1,e.stored=!0,e.version=n.version,(e.annotation||n.annotation)&&(e.annotation=n.annotation),n}catch(e){(0,y.t)(e)}return{}}async function Hh(e){try{const{data:t}=await v.Z.post(`${(0,g.getAppRoot)()}api/workflows/get_tool_predictions`,e);return t}catch(e){(0,y.t)(e)}}var Nh=n(37185);function Fh(e){const t=[];return Nu.default.each(e.steps,((n,i)=>{const o=[];if(n.errors&&o.push(n.errors),Nu.default.each(e.upgrade_messages[i],(e=>{o.push(e)})),o.length){const e=Nh.Z[n.type],a={stepIndex:i,name:n.name,details:o,iconType:e,label:n.label};t.push(a)}})),t}function Bh(e,t,n){const i=[],o=new Map;for(const a of e.entries()){const e=a[1].i_extensions;for(const s of t.entries())for(const t of e.entries())if(n.isSubType(s[1],t[1])||"input"===s[1]||"_sniff_"===s[1]||"input_collection"===s[1]){const e=a[1].tool_id;if(!o.has(e)){o.set(e,!0),i.push({id:e,name:a[1].name});break}}}return i}const $h={props:{toolId:{type:String,required:!0}},data:()=>({deprecated:!1,deprecatedMessage:"",showMessage:!1}),computed:{getToolId(){let e=this.toolId||"";if(e.indexOf("/")>0){const t=e.split("/");e=t[t.length-2]}return e}},created(){this.loadRecommendations()},methods:{loadRecommendations(){Hh({tool_sequence:this.getToolId}).then((e=>{vh(!1).then((t=>{const n=e.predicted_data;if(this.deprecated=n.is_deprecated,this.deprecatedMessage=n.message,null!==e&&n.children.length>0){const e={},i=n.o_extensions,o=Bh(n.children,i,t);o.length>0&&!1===this.deprecated&&(this.showMessage=!0,e.o_extensions=n.o_extensions,e.name=n.name,e.children=o,this.renderD3Tree(e))}}))}))},renderD3Tree(e){let t=0,n=null;const i=750,o=bt.Ys("#tool-recommendation").append("svg").attr("class","tree-size").append("g"),a=o.node().parentElement,s=a.clientHeight,r=a.clientWidth,l=parseInt(.15*r);a.setAttribute("viewBox",-l+" 0 "+.5*r+" "+s),a.setAttribute("preserveAspectRatio","xMidYMid meet");const d=bt.G_s().size([s,r]);n=bt.bT9(e,(e=>e.children)),n.x0=parseInt(s/2),n.y0=0;const c=e=>{e.children&&(e._children=e.children,e._children.forEach(c),e.children=null)};n.children.forEach(c);const u=(e,t)=>`M ${e.y} ${e.x}\n                              C ${(e.y+t.y)/2} ${e.x},\n                              ${(e.y+t.y)/2} ${t.x},\n                              ${t.y} ${t.x}`,h=(e,t)=>{t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null),null==t.parent&&p(t);const n=t.data.id;void 0!==n&&"undefined"!==n&&null!==n&&""!==n&&(document.location.href=`${(0,g.getAppRoot)()}tool_runner?tool_id=${n}`)},p=e=>{const a=d(n),s=a.descendants(),l=a.descendants().slice(1);s.forEach((e=>{e.y=e.depth*(r/10)}));const c=o.selectAll("g.node").data(s,(e=>e.id||(e.id=++t))),p=c.enter().append("g").attr("class","node").attr("transform",(t=>"translate("+e.y0+","+e.x0+")")).on("click",h);p.append("circle").attr("class","node").attr("r",1e-6),p.append("text").attr("dy",".35em").attr("x",(e=>e.children||e._children?-10:10)).attr("text-anchor",(e=>e.children||e._children?"end":"start")).text((e=>{const t=e.data.name;return t.length>20?t.slice(0,20)+"...":e.data.name})),p.append("title").text((e=>e.children?e.data.name:"Open tool - "+e.data.name));const f=p.merge(c);f.transition().duration(i).attr("transform",(e=>"translate("+e.y+","+e.x+")")),f.select("circle.node").attr("r",2.5);c.exit().transition().duration(i).attr("transform",(t=>"translate("+e.y+","+e.x+")")).remove().select("circle").attr("r",1e-6);const m=o.selectAll("path.link").data(l,(e=>e.data.id));m.enter().insert("path","g").attr("class","link").attr("d",(t=>{const n={x:e.x0,y:e.y0};return u(n,n)})).merge(m).transition().duration(i).attr("d",(e=>u(e,e.parent))),m.transition().duration(i).attr("d",u),m.exit().transition().duration(i).attr("d",(t=>{const n={x:e.x,y:e.y};return u(n,n)})).remove(),s.forEach((e=>{e.x0=e.x,e.y0=e.y}))};p(n)}}},zh=$h;const Wh=(0,m.Z)(zh,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"tool-recommendation-heading"}},[!e.deprecated&&e.showMessage?t("div",{staticClass:"infomessagelarge"},[t("h2",{staticClass:"h-sm",attrs:{id:"tool-recommendation-heading"}},[e._v("Tool recommendation")]),e._v("\n        You have used "+e._s(e.getToolId)+" tool. For further analysis, you could try using the following/recommended\n        tools. The recommended tools are shown in the decreasing order of their scores predicted using machine\n        learning analysis on workflows. Therefore, tools at the top may be more useful than the ones at the bottom.\n        Please click on one of the following/recommended tools to open its definition.\n    ")]):e.deprecated?t("div",{staticClass:"warningmessagelarge"},[t("h2",{staticClass:"h-sm",attrs:{id:"tool-recommendation-heading"}},[e._v("Tool deprecated")]),e._v("\n        You have used "+e._s(e.getToolId)+" tool. "+e._s(e.deprecatedMessage)+"\n    ")]):e._e(),e._v(" "),t("div",{staticClass:"ui-tool-recommendation",attrs:{id:"tool-recommendation"}})])}),[],!1,null,null,null).exports;const Uh={props:{jobResponse:{type:Object,required:!0},toolName:{type:String,required:!0}},computed:{nOutputs(){return this.jobResponse&&this.jobResponse.outputs?this.jobResponse.outputs.length:0},nJobs(){return this.jobResponse&&this.jobResponse.jobs?this.jobResponse.jobs.length:0},nJobsText(){return this.nJobs>1?`${this.nJobs} jobs`:"1 job"},nOutputsText(){return this.nOutputs>1?`${this.nOutputs} outputs`:"this output"}}};const Vh=(0,m.Z)(Uh,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"donemessagelarge"},[t("p",[e._v("\n        Started tool "),t("b",[e._v(e._s(e.toolName))]),e._v(" and successfully added "+e._s(e.nJobsText)+" to the queue.\n    ")]),e._v(" "),t("p",[e._v("It produces "+e._s(e.nOutputsText)+":")]),e._v(" "),t("ul",e._l(e.jobResponse.outputs,(function(n){return t("li",{key:n.hid},[t("b",[e._v(e._s(n.hid)+": "+e._s(n.name))])])})),0),e._v(" "),t("p",[e._v("\n        You can check the status of queued jobs and view the resulting data by refreshing the History panel. When\n        the job has been run the status will change from 'running' to 'finished' if completed successfully or\n        'error' if problems were encountered.\n    ")])])}),[],!1,null,null,null).exports;var qh=n(72570);const Zh={props:{type:{type:String,required:!0},toolId:{type:String,default:null}},mounted(){const e=this.$refs.webhook;new qh.Z.WebhookView({el:e,type:this.type,toolId:this.toolId})}};const Gh=(0,m.Z)(Zh,(function(){return(0,this._self._c)("div",{ref:"webhook",attrs:{id:"webhook-view"}})}),[],!1,null,null,null).exports;u.vI.add(h.Xjp);const Jh={components:{FontAwesomeIcon:p.GN},props:{jobId:{type:String,required:!0}},computed:{...(0,o.rn)(Vo.B,["entryPointsForJob"]),interactiveToolsLink:function(){return(0,g.getAppRoot)()+"interactivetool_entry_points/list"}},created:function(){this.ensurePollingEntryPoints()},methods:{...(0,o.nv)(Vo.B,["ensurePollingEntryPoints"])}};const Kh=(0,m.Z)(Jh,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"infomessagelarge"},[0==e.entryPointsForJob(e.jobId).length?t("p",[e._v("\n        Waiting for InteractiveTool result view(s) to become available.\n    ")]):1==e.entryPointsForJob(e.jobId).length?t("p",[e.entryPointsForJob(e.jobId)[0].active?t("span",[e._v("\n            There is an InteractiveTool result view available,\n            "),t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{title:"Open Interactive Tool",href:e.entryPointsForJob(e.jobId)[0].target,target:"_blank"}},[e._v("\n                Open\n                "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}})],1)]):t("span",[e._v("\n            There is an InteractiveTool result view available, waiting for view to become active...\n        ")])]):t("div",[e._v("\n        There are multiple InteractiveTool result views available:\n        "),t("ul",e._l(e.entryPointsForJob(e.jobId),(function(n){return t("li",{key:n.id},[e._v("\n                "+e._s(n.name)+"\n                "),n.active?t("span",[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{title:"Open Interactive Tool",href:n.target,target:"_blank"}},[e._v("\n                        (Open\n                        "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}}),e._v(")\n                    ")],1)]):t("span",[e._v(" (waiting to become active...) ")])])})),0)]),e._v("\n\n    You may also access all active InteractiveTools from the\n    "),t("a",{attrs:{href:e.interactiveToolsLink}},[e._v("User menu")]),e._v(".\n")])}),[],!1,null,null,null).exports,Xh=(0,a.defineComponent)({__name:"ToolSuccess",setup(e){const{config:t}=(0,c.Z)(!0),n=fh(),i=(0,Nn.tv)(),o=(0,a.computed)((()=>r.value.jobDef)),s=(0,a.computed)((()=>r.value.jobResponse)),r=(0,a.computed)((()=>n.getLatestResponse)),l=(0,a.computed)((()=>t.value.enable_tool_recommendations)),d=(0,a.computed)((()=>r.value.toolName));return(0,a.onMounted)((()=>{0===Object.keys(r.value).length&&i.push("/")})),{__sfc:!0,config:t,jobStore:n,router:i,jobDef:o,jobResponse:s,responseVal:r,showRecommendation:l,toolName:d,ToolRecommendation:Wh,ToolSuccessMessage:Vh,Webhook:Gh,ToolEntryPoints:Kh}}}),Qh=Xh;const ep=(0,m.Z)(Qh,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("section",[n.jobResponse.produces_entry_points?t("div",e._l(n.jobResponse.jobs,(function(e){return t(n.ToolEntryPoints,{key:e.id,attrs:{"job-id":e.id}})})),1):e._e(),e._v(" "),t(n.ToolSuccessMessage,{attrs:{"job-response":n.jobResponse,"tool-name":n.toolName}}),e._v(" "),t(n.Webhook,{attrs:{type:"tool","tool-id":n.jobDef.tool_id}}),e._v(" "),n.showRecommendation?t(n.ToolRecommendation,{attrs:{"tool-id":n.jobDef.tool_id}}):e._e()],1)}),[],!1,null,null,null).exports;var tp=n(49026),np=n.n(tp);const ip={__name:"ToolFavoriteButton",props:{id:{type:String,required:!0}},emits:["onSetError","onUpdateFavorites"],setup(e,{emit:t}){const n=e;u.vI.add(h.Tab,zo.T);const i=(0,Xe.L)(),{currentFavorites:s,isAnonymous:r}=(0,o.Jk)(i),l=(0,a.computed)((()=>!r.value)),d=(0,a.computed)((()=>s.value.tools?.includes(n.id))),c=(0,a.computed)((()=>l.value&&!d.value)),p=(0,a.computed)((()=>l.value&&d.value)),f=(0,a.computed)((()=>c.value?"Add to Favorites":p.value?"Remove from Favorites":null));async function m(){try{await i.addFavoriteTool(n.id),t("onSetError",null),Fa("added to favorites")}catch{t("onSetError",`Failed to add '${n.id}' to favorites.`),Fa("failed to add to favorites")}}async function _(){try{await i.removeFavoriteTool(n.id),t("onSetError",null),Fa("removed from favorites")}catch{t("onSetError",`Failed to remove '${n.id}' from favorites.`),Fa("failed to remove from favorites")}}return{__sfc:!0,props:n,emit:t,userStore:i,currentFavorites:s,isAnonymous:r,hasUser:l,isFavorite:d,showAddFavorite:c,showRemoveFavorite:p,title:f,onToggleFavorite:function(){d.value?_():m()},onAddFavorite:m,onRemoveFavorite:_}}},op=ip;const ap=(0,m.Z)(op,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{role:"button",variant:"link",size:"sm",title:n.title},on:{click:n.onToggleFavorite}},[n.showAddFavorite?t("icon",{attrs:{icon:"far fa-star"}}):e._e(),e._v(" "),n.showRemoveFavorite?t("icon",{attrs:{icon:"fas fa-star"}}):e._e()],1)}),[],!1,null,null,null).exports;function sp(e,t){[5,4,3,2,1].forEach((n=>{!function(e,t,n){let i=t+n;i>6&&(i=6);const o=e.getElementsByTagName(`h${t}`);Array.from(o).forEach((e=>{const t=document.createElement(`h${i}`);t.innerHTML=e.innerHTML,Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),e.insertAdjacentElement("beforebegin",t),e.remove()}))}(e,n,t)}))}function rp(e,t=2){return{formattedContent:(0,a.computed)((()=>{const n=document.createElement("div");n.innerHTML=(0,a.unref)(e);const i=n.getElementsByTagName("a");Array.from(i).forEach((e=>{e.target="_blank"}));const o=n.getElementsByTagName("img");return Array.from(o).forEach((e=>{e.src.includes("admin_toolshed")&&(e.src=(0,g.getAppRoot)()+e.src)})),sp(n,(0,a.unref)(t)),n.innerHTML}))}}const lp={__name:"ToolsListItem",props:{id:{type:String,required:!0},name:{type:String,required:!0},section:{type:String,required:!0},ontologies:{type:Array,default:null},description:{type:String,default:null},summary:{type:String,default:null},help:{type:String,default:null},version:{type:String,default:null},link:{type:String,default:null},workflowCompatible:{type:Boolean,default:!1},local:{type:Boolean,default:!1},owner:{type:String,default:null}},emits:["open"],setup(e,{emit:t}){const n=e;u.vI.add(h.klh,h.Xjp,h.LEp,h.NBC,h.gc2,h.onQ,h.eHv,h.ILF);const i=(0,a.ref)(!1),o=(0,a.computed)((()=>{if(i.value){const{formattedContent:e}=rp(n.help);return e.value}return""}));return{__sfc:!0,props:n,emit:t,showHelp:i,formattedToolHelp:o,FontAwesomeIcon:p.GN,ToolFavoriteButton:ap}}},dp=lp;const cp=(0,m.Z)(dp,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"tool-list-item"},[t("div",{staticClass:"top-bar bg-secondary px-2 py-1 rounded-right"},[t("div",{staticClass:"py-1 d-flex flex-wrap flex-gapx-1"},[t("span",[n.props.local?t(n.FontAwesomeIcon,{attrs:{icon:"fa-wrench","fixed-width":""}}):t(n.FontAwesomeIcon,{attrs:{icon:"fa-external-link-alt","fixed-width":""}}),e._v(" "),n.props.local?t("b-button",{staticClass:"ui-link text-dark",on:{click:()=>n.emit("open")}},[t("b",[e._v(e._s(n.props.name))])]):t("b-button",{staticClass:"ui-link text-dark",attrs:{href:n.props.link}},[t("b",[e._v(e._s(n.props.name))])])],1),e._v(" "),t("span",{attrs:{itemprop:"description"}},[e._v(e._s(n.props.description))]),e._v(" "),t("span",[e._v("(Galaxy Version "+e._s(n.props.version)+")")])]),e._v(" "),t("div",{staticClass:"d-flex align-items-start"},[t(n.ToolFavoriteButton,{attrs:{id:n.props.id}}),e._v(" "),n.props.local?t("b-button",{staticClass:"text-nowrap",attrs:{variant:"primary",size:"sm"},on:{click:()=>n.emit("open")}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-wrench","fixed-width":""}}),e._v("\n                Open\n            ")],1):t("b-button",{staticClass:"text-nowrap",attrs:{variant:"primary",size:"sm",href:n.props.link}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-external-link-alt","fixed-width":""}}),e._v("\n                Open\n            ")],1)],1)]),e._v(" "),t("div",{staticClass:"tool-list-item-content"},[t("div",{staticClass:"d-flex flex-gapx-1 py-2"},[n.props.section?t("span",{staticClass:"tag info"},[t("b",[e._v("Section:")]),e._v(" "),t("b-link",{attrs:{to:`/tools/list?section=${n.props.section}`}},[e._v(e._s(e.section))])],1):e._e(),e._v(" "),n.props.local?e._e():t("span",{staticClass:"tag info"},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-external-link-alt","fixed-width":""}}),e._v("\n                External\n            ")],1),e._v(" "),n.props.workflowCompatible?e._e():t("span",{staticClass:"tag warn"},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-exclamation-triangle"}}),e._v("\n                Not Workflow compatible\n            ")],1),e._v(" "),n.props.owner?t("span",{staticClass:"tag success"},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-user"}}),e._v(" "),t("b",[e._v("Owner:")]),e._v(" "),t("b-link",{attrs:{to:`/tools/list?owner=${n.props.owner}`}},[e._v(e._s(n.props.owner))])],1):e._e(),e._v(" "),n.props.ontologies&&n.props.ontologies.length>0?t("span",e._l(n.props.ontologies,(function(n){return t("span",{key:n,staticClass:"tag toggle"},[t("b-link",{attrs:{to:`/tools/list?ontology=${n}`}},[e._v(e._s(n))])],1)})),0):e._e()]),e._v(" "),n.props.summary?t("div",{domProps:{innerHTML:e._s(n.props.summary)}}):e._e(),e._v(" "),n.props.help?t("div",{staticClass:"mt-2"},[n.showHelp?t("b-button",{staticClass:"ui-link",on:{click:()=>n.showHelp=!1}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-angle-up"}}),e._v("\n                Hide tool help\n            ")],1):t("b-button",{staticClass:"ui-link",on:{click:()=>n.showHelp=!0}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-angle-down"}}),e._v("\n                Show tool help\n            ")],1),e._v(" "),n.showHelp?t("div",{staticClass:"mt-2",domProps:{innerHTML:e._s(n.formattedToolHelp)}}):e._e()],1):e._e()])])}),[],!1,null,"213f6474",null).exports,up={components:{ToolsListItem:cp},directives:{infiniteScroll:np()},props:{tools:{type:Array,default:null}},setup(){const{openGlobalUploadModal:e}=(0,_a.N)();return{openGlobalUploadModal:e}},data:()=>({allLoaded:!1,bufferLen:0,busy:!1}),computed:{buffer(){return this.tools.slice(0,this.bufferLen).map((e=>({...e,ontologies:e.edam_operations.concat(e.edam_topics)})))}},created(){this.loadTools()},methods:{onOpen(e){if("upload1"===e.id)this.openGlobalUploadModal();else if("regular"===e.form_style){const t=e.id,n=e.version;this.$router.push({path:`/?tool_id=${encodeURIComponent(t)}&version=${n}`})}},loadTools(){this.tools&&!this.busy&&this.bufferLen<this.tools.length?(this.busy=!0,setTimeout((()=>{this.bufferLen+=4,this.tools.slice(this.bufferLen-4,this.bufferLen).forEach((async e=>{await this.fetchHelp(e)})),this.busy=!1}),100)):this.bufferLen>=this.tools.length&&(this.allLoaded=!0)},async fetchHelp(e){await async function(e){try{const{data:t}=await v.Z.get(`${(0,g.getAppRoot)()}${e}`);return t}catch(e){(0,y.t)(e)}}(`api/tools/${e.id}/build`).then((t=>{const n=t.help;a.default.set(e,"_showDetails",!1),n&&"\n"!=n?(a.default.set(e,"help",n),a.default.set(e,"summary",this.parseHelp(n))):a.default.set(e,"help","")}))},parseHelp(e){let t="";const n=(new DOMParser).parseFromString(e,"text/html"),i=[];return["//strong[text()='What it does']/../following-sibling::*","//strong[text()='What It Does']/../following-sibling::*","//h1[text()='Synopsis']/following-sibling::*","//strong[text()='Syntax']/../following-sibling::*"].forEach((e=>{i.push(n.evaluate(e,n,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)})),i.forEach((e=>{e&&(t+=e.innerHTML+"\n")})),t}}},hp=up;const pp=(0,m.Z)(hp,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadTools,expression:"loadTools"}],staticClass:"tools-list-table",attrs:{"infinite-scroll-distance":"200","infinite-scroll-disabled":"busy"}},[e._l(e.buffer,(function(n){return t("ToolsListItem",{key:n.id,attrs:{id:n.id,name:n.name,section:n.panel_section_name,ontologies:n.ontologies,description:n.description,summary:n.summary,help:n.help,local:"galaxy_main"===n.target,link:n.link,owner:n.tool_shed_repository&&n.tool_shed_repository.owner,"workflow-compatible":n.is_workflow_compatible,version:n.version},on:{open:()=>e.onOpen(n)}})})),e._v(" "),t("div",[e.allLoaded?t("div",{staticClass:"list-end my-2"},[e._v("- End of search results -")]):e._e(),e._v(" "),t("b-overlay",{attrs:{show:e.busy,opacity:"0.5"}})],1)],2)}),[],!1,null,"0a083384",null).exports;var fp=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const mp=(0,a.defineComponent)({__name:"ToolsList",props:{name:{type:String,default:""},section:{type:String,default:""},ontology:{type:String,default:""},id:{type:String,default:""},owner:{type:String,default:""},help:{type:String,default:""}},setup(e){const t=e;u.vI.add(h.NBC);const n=(0,Nn.tv)(),i=(0,a.ref)(null),{scrollTop:s}=Nl(i),r=(0,Da.n)(),{loading:l}=(0,o.Jk)(r),d=(0,a.computed)((()=>{const e={};return Object.entries(t).forEach((([t,n])=>{n&&""!==n&&(e[t]=n)})),e})),c=(0,a.ref)([]);(0,a.onMounted)((()=>fp(this,void 0,void 0,(function*(){yield r.fetchTools(d.value),c.value=Object.values(r.getToolsById(d.value))}))));const f=(0,a.computed)((()=>Object.keys(d.value).length));return{__sfc:!0,props:t,router:n,scrollContainer:i,scrollTop:s,toolStore:r,loading:l,filterSettings:d,itemsLoaded:c,filterCount:f,scrollToTop:function(){var e;null===(e=i.value)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})},showAllTools:function(){n.push({path:"/tools/list"})},FontAwesomeIcon:p.GN,ScrollToTopButton:Pl,ToolsListTable:pp,LoadingSpan:z.Z}}}),_p=mp;var vp=(0,m.Z)(_p,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("section",{staticClass:"tools-list"},[t("div",{staticClass:"mb-2"},[t("h1",{staticClass:"h-lg"},[e._v("Search Results")]),e._v(" "),0!==n.itemsLoaded.length?t("span",{staticClass:"row"},[n.filterCount?t("span",{staticClass:"col d-inline-block d-flex align-items-baseline flex-gapx-1"},[e._v("\n                Found "+e._s(n.itemsLoaded.length)+" tools for\n                "),t("b-button",{staticClass:"ui-link",attrs:{id:"popover-filters"}},[e._v("\n                    "+e._s(n.filterCount)+"\n                    "+e._s(1===n.filterCount?"filter":"filters")+".\n                ")]),e._v(" "),t("b-popover",{attrs:{target:"popover-filters",triggers:"hover focus",placement:"bottom"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Filters")]},proxy:!0}],null,!1,353689550)},[e._v(" "),e._l(n.filterSettings,(function(n,i){return t("div",{key:i},[t("b",[e._v(e._s(i))]),e._v(": "+e._s(n)+"\n                    ")])}))],2),e._v(" "),t("b-button",{attrs:{variant:"link",size:"sm"},on:{click:function(e){return e.stopPropagation(),n.showAllTools.apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-times"}}),e._v("\n                    Clear filters\n                ")],1)],1):t("span",{staticClass:"col d-inline-block"},[e._v("\n                No filters applied. Please add filters to the Advanced Tool Search in the Tool Panel.\n            ")])]):e._e()]),e._v(" "),t("div",{ref:"scrollContainer",staticClass:"overflow-auto"},[n.loading?t("b-alert",{staticClass:"m-2",attrs:{variant:"info",show:""}},[t(n.LoadingSpan,{attrs:{message:"Loading Advanced Search Results"}})],1):n.itemsLoaded&&0!=n.itemsLoaded.length?t("div",[t(n.ToolsListTable,{attrs:{tools:n.itemsLoaded}})],1):t("b-alert",{staticClass:"m-2",attrs:{variant:"info",show:""}},[e._v("\n            No tools found for the entered filters.\n        ")])],1),e._v(" "),t(n.ScrollToTopButton,{attrs:{offset:n.scrollTop},on:{click:n.scrollToTop}})],1)}),[],!1,null,"942f88bc",null);const gp=vp.exports;const yp={data:()=>({schemaTagObj:{}}),async created(){let e=[];await v.Z.get(`${(0,g.getAppRoot)()}api/tools?in_panel=False&tool_help=True`).then((({data:t})=>{e=t.reduce(((e,t)=>(e[t.id]=t,e)),{})})).catch((e=>{console.error("List of all tools not loaded",e)})),Object.keys(e).length>0&&await v.Z.get(`${(0,g.getAppRoot)()}api/tool_panels/default`).then((({data:t})=>{this.schemaTagObj=this.createToolsJson(e,t);const n=document.createElement("script");n.id="schema-json",n.type="application/ld+json",n.text=JSON.stringify(this.schemaTagObj),document.head.appendChild(n)})).catch((e=>{console.error("Tool sections by id not loaded",e)}))},methods:{createToolsJson:(e,t)=>({"@context":"http://schema.org","@graph":Object.values(t).reduce((function(t,n){return"tools"in n?t.concat(n.tools.reduce((function(t,n){const i=e[n];return i&&i.name?[...t,{"@type":"SoftwareApplication",operatingSystem:"Any",applicationCategory:"Web application",name:i.name,description:i.help||i.description,softwareVersion:i.version,url:(0,g.getAppRoot)()+String(i.link).substring(1)}]:t}),[])):t}),[])})}},bp=yp;const wp=(0,m.Z)(bp,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null).exports;const kp={components:{DelayedInput:Z},data:()=>({tours:[],search:"",error:null,searchTours:(0,Ee.ZP)("search tours")}),created(){this.root=(0,g.getAppRoot)(),(0,en.e)({url:"/api/tours"}).then((e=>{this.tours=e})).catch((e=>{this.error=e}))},methods:{onSearch(e){this.search=e},match(e){const t=this.search.toLowerCase();return!t||e.id&&e.id.toLowerCase().includes(t)||e.name&&e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.tags&&e.tags.join().toLowerCase().includes(t)}}};const Cp=(0,m.Z)(kp,(function(){var e=this,t=e._self._c;return t("div",[t("h1",{staticClass:"h-lg"},[e._v("Galaxy Tours")]),e._v(" "),t("p",[e._v("\n        This page presents a list of interactive tours available on this Galaxy server. Select any tour to get\n        started (and remember, you can click 'End Tour' at any time).\n    ")]),e._v(" "),t("h2",{staticClass:"h-sm"},[e._v("Tours")]),e._v(" "),e.error?t("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):t("div",[t("DelayedInput",{staticClass:"mb-3",attrs:{query:e.search,placeholder:e.searchTours,delay:0},on:{change:e.onSearch}}),e._v(" "),e._l(e.tours,(function(n){return t("div",{key:n.id},[e.match(n)?t("ul",{staticClass:"list-group",attrs:{id:"tourList"}},[t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:`${e.root}tours/${n.id}`}},[e._v(" "+e._s(n.name||n.id)+" ")]),e._v(" − \n                    "+e._s(n.description)+"\n                    "),e._l(n.tags,(function(n,i){return t("span",{key:i,staticClass:"badge badge-primary text-capitalize"},[e._v("\n                        "+e._s(n)+"\n                    ")])}))],2)]):e._e()])}))],2)])}),[],!1,null,null,null).exports;const xp={props:{id:{type:String,default:"frame"},src:{type:String,default:""}},computed:{srcWithRoot(){return(0,D.dq)(this.src)}},methods:{onLoad(e){const t=e.currentTarget,n=t.contentWindow&&t.contentWindow.location;try{n&&n.host&&"/"!=n.pathname&&this.$emit("load")}catch(t){console.warn("CenterFrame - onLoad location access forbidden.",e,n)}}}};const Sp=(0,m.Z)(xp,(function(){var e=this;return(0,e._self._c)("iframe",{staticClass:"center-frame",attrs:{id:e.id,name:e.id,src:e.srcWithRoot,frameborder:"0",title:"galaxy frame",width:"100%",height:"100%"},on:{load:e.onLoad}})}),[],!1,null,null,null).exports;var Mp=n(50190);const Tp={components:{CenterFrame:Sp},props:{tourId:{type:String,required:!0}},mounted(){(0,Mp.V)(this.tourId)}};const Lp=(0,m.Z)(Tp,(function(){return(0,this._self._c)("CenterFrame",{attrs:{src:"/welcome"}})}),[],!1,null,null,null).exports;const Dp=e=>(0,s.j4)()+e;const Ep={getAPIKey:async function(e){const t=Dp(`api/users/${e}/api_key/detailed`),n=await v.Z.get(t);if(204===n.status)return[];if(200!==n.status)throw new Error("Unexpected response retrieving the API key.");return[n.data]},createNewAPIKey:async function(e){const t=Dp(`api/users/${e}/api_key`),n=await v.Z.post(t);if(200!==n.status)throw new Error("Create API key failure.");return n.data},deleteAPIKey:async function(e){const t=Dp(`api/users/${e}/api_key`);if(204!==(await v.Z.delete(t)).status)throw new Error("Delete API Key failure.")}},Op={__name:"APIKeyItem",props:{item:{type:Object,required:!0}},emits:["getAPIKey"],setup(e,{emit:t}){const n=(0,l.Bz)().user.id,i=(0,a.ref)(null),o=(0,a.ref)(!1),s=(0,a.ref)(null);return{__sfc:!0,emit:t,currentUserId:n,modal:i,hover:o,errorMessage:s,toggleDeleteModal:()=>{i.value.toggle()},deleteKey:()=>{Ep.deleteAPIKey(n).then((()=>t("getAPIKey"))).catch((e=>s.value=e.message))},CopyToClipboard:Xd.Z,UtcDate:J.Z}}},Ap=Op;const Ip=(0,m.Z)(Ap,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-card",{attrs:{title:"Current API key"}},[t("div",{staticClass:"d-flex justify-content-between w-100"},[t("div",{staticClass:"w-100"},[t("b-input-group",{staticClass:"w-100",on:{blur:function(e){n.hover=!1},focus:function(e){n.hover=!0},mouseover:function(e){n.hover=!0},mouseleave:function(e){n.hover=!1}}},[t("b-input-group-prepend",[t("b-input-group-text",[t("icon",{attrs:{icon:"key"}})],1)],1),e._v(" "),t("b-input",{attrs:{type:n.hover?"text":"password",value:e.item.key,disabled:"","data-test-id":"api-key-input"}}),e._v(" "),t("b-input-group-append",[t("b-input-group-text",[t(n.CopyToClipboard,{attrs:{message:"Key was copied to clipboard",text:e.item.key,title:"Copy key"}})],1),e._v(" "),t("b-button",{attrs:{title:"Delete api key"},on:{click:n.toggleDeleteModal}},[t("icon",{attrs:{icon:"trash"}})],1)],1)],1),e._v(" "),t("span",{staticClass:"small text-black-50"},[e._v("\n                created on\n                "),t(n.UtcDate,{staticClass:"text-black-50 small",attrs:{date:e.item.create_time,mode:"pretty"}})],1)],1)]),e._v(" "),t("b-modal",{ref:"modal",attrs:{title:"Delete API key",size:"md"},on:{ok:n.deleteKey}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Are you sure you want to delete this key?")])])],1)}),[],!1,null,null,null).exports,Pp={__name:"APIKey",setup(e){const t=(0,a.ref)(null),n=(0,a.ref)(!1),i=(0,a.ref)(null),o=(0,a.ref)(!1),s=(0,l.Bz)().user.id,r=()=>{n.value=!0,Ep.getAPIKey(s).then((e=>t.value=e[0])).catch((e=>i.value=e.message)).finally((()=>n.value=!1))};return r(),{__sfc:!0,apiKey:t,loading:n,errorMessage:i,createLoading:o,currentUserId:s,getAPIKey:r,createNewAPIKey:()=>{o.value=!0,Ep.createNewAPIKey(s).then((()=>r())).catch((e=>i.value=e.message)).finally((()=>o.value=!1))},LoadingSpan:z.Z,APIKeyItem:Ip}}},Rp=Pp;const jp=(0,m.Z)(Rp,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("section",{staticClass:"api-key d-flex flex-column"},[t("h1",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"h-lg"},[e._v("Manage API Key")]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mb-2"},[e._v("\n        An API key will allow you to access via web API. Please note that this key acts as an alternate means to\n        access your account and should be treated with the same care as your login password.\n    ")]),e._v(" "),t("b-alert",{attrs:{show:n.errorMessage,dismissible:"",fade:"",variant:"warning"},on:{dismissed:function(e){n.errorMessage=null}}},[e._v("\n        "+e._s(n.errorMessage)+"\n    ")]),e._v(" "),n.loading?t("b-alert",{staticClass:"m-2",attrs:{show:"",variant:"info"}},[t(n.LoadingSpan,{attrs:{message:"Loading API keys"}})],1):n.loading||n.apiKey?n.apiKey?t("div",{staticClass:"mx-2"},[t(n.APIKeyItem,{attrs:{item:n.apiKey},on:{getAPIKey:n.getAPIKey}})],1):e._e():t("b-button",{staticClass:"create-button",attrs:{disabled:n.createLoading,variant:"primary"},on:{click:function(e){return e.preventDefault(),n.createNewAPIKey.apply(null,arguments)}}},[n.createLoading?t("icon",{attrs:{icon:"spinner",spin:""}}):t("icon",{attrs:{icon:"plus"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Create a new key")])],1)],1)}),[],!1,null,"0940dc54",null).exports;var Yp=n(68135),Hp=n(56317);const Np={components:{MaskedInput:{extends:Yp.e,props:{mask:{type:String,required:!1,default:""}},computed:{masker(){return(0,Hp.Xf)({mask:this.mask})}},methods:{getFormatted(e){const t=this.stringifyValue(e);return this.mask.length?this.masker.resolve(t):t}}}},props:{value:{type:Object,required:!0}},computed:{config(){return this.value},fieldDefs(){return this.value.constructor.fields}}};const Fp=(0,m.Z)(Np,(function(){var e=this,t=e._self._c;return t("div",e._l(e.fieldDefs,(function(n,i){return t("b-form-group",{key:i,attrs:{label:n.label||i,"label-for":"config-"+i,"label-cols-lg":"3",state:e.config.fieldValid(i),"invalid-feedback":e.config.errorMessage(i)}},[t("MaskedInput",{attrs:{id:"config-"+i,mask:n.mask,placeholder:n.placeholder,maxlength:n.maxlength||Math.Infinity,state:e.config.fieldValid(i),trim:""},model:{value:e.config[i],callback:function(t){e.$set(e.config,i,t)},expression:"config[fieldName]"}})],1)})),1)}),[],!1,null,null,null).exports;function Bp(e,t={}){t instanceof Object||(console.warn("safeAssign expected an object, instead got:",t),t={}),Object.keys(t).filter((t=>Object.prototype.hasOwnProperty.call(e,t))).forEach((n=>e[n]=t[n]))}const $p=new WeakMap,zp=new WeakMap,Wp=new WeakMap,Up=new WeakMap;let Vp=0;class qp{constructor(){Up.set(this,Vp++)}get counter(){return Up.get(this)}get dirty(){return $p.get(this)!=this.state}get clean(){return!this.dirty}get state(){const e=this.transientFields;return JSON.stringify(this,(function(t){if(!e.has(t))return this[t]}))}get lastState(){return $p.get(this)}get transientFields(){const e=this.constructor;return Wp.has(e)||Wp.set(e,new Set),Wp.get(e)}updateState(){$p.set(this,this.state)}static setTransient(...e){const t=this;Wp.has(t)||Wp.set(t,new Set);const n=Wp.get(t);e.forEach((e=>n.add(e))),Wp.set(t,n)}get valid(){return 0==Object.keys(this.validationErrors).length}get validationErrors(){return this.constructor.validate(this)}errorMessage(e){return e in this.validationErrors?this.validationErrors[e]:"errmessage"}fieldValid(e){return!(e in this.validationErrors)}static validate(e){if(zp.has(this)){return zp.get(this)(e)}throw new Error("Missing validator")}static setValidator(e){zp.set(this,e)}}class Zp extends qp{constructor(e={}){super(),this.role_arn="",Bp(this,e),this.updateState()}}Zp.setValidator((function(e){const t={};return e.role_arn.length||(t.role_arn="Missing role_arn"),t})),Zp.fields={role_arn:{label:"Role ARN",description:"The Amazon resource name (ARN) of the role to be assumed by Galaxy.",placeholder:"arn:aws:iam::XXXXXXXXXXXX:role/XXXXXXXXXXX"}};class Gp extends qp{constructor(e={}){super(),this.tenant_id="",this.client_id="",this.client_secret="",Bp(this,e),this.updateState()}}Gp.setValidator((function(e){const t={};return e.tenant_id.length<36&&(t.tenant_id="Tenant ID too short"),e.tenant_id||(t.tenant_id="Missing Tenant ID"),e.client_id.length<36&&(t.client_id="Client ID too short"),e.client_id||(t.client_id="Missing client ID"),e.client_secret||(t.client_secret="Missing secret"),t})),Gp.fields={tenant_id:{label:"Tenant ID",mask:"********-****-****-****-************",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",maxlength:36,description:"Your Tenant ID (or Directory ID) on Azure."},client_id:{label:"Client ID",mask:"********-****-****-****-************",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",maxlength:36,description:"The Client ID (or Application ID) you defined for Galaxy on your Azure directory."},client_secret:{label:"Client Secret",mask:"",placeholder:"Client Secret",description:"A secret string you obtained from Azure portal that Galaxy can use to prove its identity when requesting tokens to access your resources."}};const Jp=new Map;Jp.set("aws",{klass:Zp,label:"Amazon Web Services (AWS)"}),Jp.set("azure",{klass:Gp,label:"Microsoft Azure"});class Kp extends qp{constructor(e={}){super(),this.id=null,this.description="",this.authn_id=null,this.provider=null,this.expanded=!1,this.loading=!1;const t=Object.assign({},Kp.defaults,e);Bp(this,t),this.config=new this.configClass(t.config),this.updateState()}get title(){return this.description.length?this.description:this.provider}get valid(){return super.valid&&this.config.valid}get resourceProvider(){return this.provider}set resourceProvider(e){this.provider=e,this.config=new this.configClass({})}get configClass(){return Jp.get(this.provider).klass}match(e=""){return!e.length||this.title.includes(e)}static get defaults(){return{authn_id:null,provider:"aws",expanded:!1}}static create(e={}){return new Kp(e)}}Kp.setTransient("expanded","loading"),Kp.setValidator((function(e){const t={};return e.provider||(t.provider="Provider must be set"),e.authn_id||(t.authn_id="Please pick an identity provider"),e.config.valid||(t.config="Invalid config object"),t}));class Xp{constructor(e={}){this.id="",this.provider="",Bp(this,e)}get authn_id(){return this.id}get text(){return this.provider}get value(){return this.id}static create(e={}){return new Xp(e)}}const Qp=e=>(0,s.j4)()+e;let ef;async function tf(){if(!ef){const e=Qp("authnz"),t=await v.Z.get(e);if(200!=t.status)throw new Error("Unable to load identity providers");ef=t.data.map(Xp.create)}return ef}const nf={listCredentials:async function(){const e=Qp("api/cloud/authz"),t=await v.Z.get(e);if(200!=t.status)throw new Error("Unexpected response from listing.");return t.data.map(Kp.create)},getCredential:async function(e){const t=Qp("api/cloud/authz/${id}"),n=await v.Z.get(t);if(200!=n.status)throw new Error("Unexpected response loading key.");return Kp.create(n.data)},saveCredential:async function(e){const t=Kp.create(e),n=await async function(e){return e.id?v.Z.put(Qp(`api/cloud/authz/${e.id}`),e):v.Z.post(Qp("api/cloud/authz"),e)}(t);if(200!=n.status)throw new Error("Save failure.");return Kp.create(n.data)},deleteCredential:async function(e){const t=Kp.create(e);if(t.id){const t=Qp(`api/cloud/authz/${e.id}`);if(200!=(await v.Z.delete(t)).status)throw new Error("Delete failure.")}return t},getIdentityProviders:tf},of={components:{CredentialConfig:Fp},props:{value:{type:Kp,required:!0}},data:()=>({identityProviders:[]}),computed:{credential(){return this.value},resourceProviderOptions:()=>Array.from(Jp.entries()).map((([e,t])=>({value:e,text:t.label}))),config(){return this.credential.config},loading(){return this.credential.loading},saveButtonDisabled(){return!(this.credential.valid&&this.credential.dirty)},saveButtonVariant(){return this.saveButtonDisabled?"secondary":"primary"},saveButtonTitle(){return this.loading?"Saving Key...":"Save Key"}},created(){tf().then((e=>{this.credential.authn_id||1!=e.length||(this.credential.authn_id=e[0].authn_id,this.credential.updateState()),this.identityProviders=e}))}};const af={components:{CredentialForm:(0,m.Z)(of,(function(){var e=this,t=e._self._c;return t("b-form",{attrs:{validated:e.credential.isValid}},[t("b-form-group",{attrs:{label:"Description","label-for":"credentialDescription","label-cols-lg":"3"}},[t("b-form-input",{attrs:{id:"credentialDescription",state:e.credential.fieldValid("description"),placeholder:"Description (optional)",trim:""},model:{value:e.credential.description,callback:function(t){e.$set(e.credential,"description",t)},expression:"credential.description"}})],1),e._v(" "),e.identityProviders.length>1?t("b-form-group",{attrs:{label:"Identity Provider","label-for":"identityProvider","label-cols-lg":"3"}},[t("b-form-select",{attrs:{id:"identityProvider",state:e.credential.fieldValid("authn_id"),options:e.identityProviders},model:{value:e.credential.authn_id,callback:function(t){e.$set(e.credential,"authn_id",t)},expression:"credential.authn_id"}})],1):e._e(),e._v(" "),t("b-form-group",{attrs:{label:"Resource Provider","label-for":"resourceProvider","label-cols-lg":"3"}},[t("b-form-select",{attrs:{id:"resourceProvider",state:e.credential.fieldValid("provider"),options:e.resourceProviderOptions},model:{value:e.credential.resourceProvider,callback:function(t){e.$set(e.credential,"resourceProvider",t)},expression:"credential.resourceProvider"}})],1),e._v(" "),t("CredentialConfig",{model:{value:e.credential.config,callback:function(t){e.$set(e.credential,"config",t)},expression:"credential.config"}}),e._v(" "),t("footer",{staticClass:"border-top"},[t("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return t.preventDefault(),e.$emit("delete",e.credential)}}},[e._v(" Delete Key ")]),e._v(" "),t("b-button",{attrs:{"aria-label":"Save Key",variant:e.saveButtonVariant,disabled:e.saveButtonDisabled},on:{click:function(t){return t.preventDefault(),e.$emit("save",e.credential)}}},[e._v("\n            "+e._s(e.saveButtonTitle)+"\n        ")])],1)],1)}),[],!1,null,null,null).exports},props:{credential:{type:Kp,required:!0}},computed:{statusClasses(){const{expanded:e,valid:t,dirty:n,loading:i}=this.credential;return{loading:i,expanded:e,valid:t,dirty:n,collapsed:!e}},variant(){return this.expanded?"":this.credential.dirty?"warning":this.credential.valid?"primary":"danger"},expanded(){return this.credential.expanded}},methods:{expand(e){const t=void 0!==e?e:!this.expanded;this.$emit("expand",{expanded:t})}}};const sf=(0,m.Z)(af,(function(){var e=this,t=e._self._c;return t("b-list-group-item",{staticClass:"cloud-auth-key",class:e.statusClasses,attrs:{variant:e.variant,button:!e.expanded}},[t("header",[t("hgroup",[t("h2",{staticClass:"h-sm",on:{click:function(t){return t.preventDefault(),e.expand()}}},[e._v(e._s(e.credential.title))]),e._v(" "),t("nav",{staticClass:"operations"},[t("ul",[t("transition",{attrs:{name:"fade"}},[e.expanded&&e.credential.dirty?t("li",{staticClass:"save"},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Save Key",title:"Save Key"},on:{click:function(t){return t.preventDefault(),e.$emit("save",e.credential)}}},[t("span",[e._v("Save Key")])])]):e._e()]),e._v(" "),t("li",{staticClass:"delete"},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Delete Key",title:"Delete Key"},on:{click:function(t){return t.preventDefault(),e.$emit("delete",e.credential)}}},[t("span",[e._v("Delete Key")])])]),e._v(" "),t("li",{staticClass:"details"},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Show Details",title:"Show Details"},on:{click:function(t){return t.preventDefault(),e.expand()}}},[t("span",[e._v("Details")])])])],1)])])]),e._v(" "),e.expanded?t("CredentialForm",{staticClass:"border-top",on:{click:function(t){return t.target!==t.currentTarget?null:e.expand()},save:function(t){return e.$emit("save",e.credential)},delete:function(t){return e.$emit("delete",e.credential)}},model:{value:e.credential,callback:function(t){e.credential=t},expression:"credential"}}):e._e()],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const rf={components:{CloudAuthItem:sf},data:()=>({items:[],filter:"",showHelp:!0,showFilter:!1,loading:!1,doomedItem:null,errorMessage:null}),computed:{filteredItems(){return this.items.filter((e=>e.match(this.filter)))},filterDescription(){return`${this.filteredItems.length} matches out of ${this.items.length} items`},deleteButtonVariant(){return this.showDeleted?"primary":"secondary"},hasDoomed:{get(){return null!==this.doomedItem},set(){}}},watch:{showDeleted(e){this.loadCredentials({deleted:e})}},created(){this.loadCredentials()},methods:{loadCredentials(e={}){this.loading=!0,nf.listCredentials(e).then((e=>this.items=e)).catch(this.setError("Unable to load cloud keys.")).finally((()=>this.loading=!1))},onCreate(){const e=Kp.create({expanded:!0});this.addItem(e)},onSave(e){e.valid&&(e.loading=!0,nf.saveCredential(e).then((t=>{e.id=t.id,e.updateState()})).catch(this.setError("Unable to save key.")).finally((()=>e.loading=!1)))},onDelete(e){this.doomedItem=e,e.id?this.$refs.deleteModal.show():(this.removeItem(e),this.doomedItem=null)},deleteKey(){nf.deleteCredential(this.doomedItem).then((()=>this.removeItem(this.doomedItem))).catch(this.setError("Unable to delete cloud key.")).finally((()=>{this.doomedItem=null}))},expand(e,{expanded:t}){e.expanded=t,t&&this.items.filter((t=>t!==e)).forEach((e=>e.expanded=!1))},addItem(e){this.items=[...this.items,e]},removeItem(e){this.items=this.items.filter((t=>t!==e))},setError(e){return t=>{this.errorMessage=e,console.warn(t)}}}};const lf=(0,m.Z)(rf,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"cloud-auth"},[t("header",[t("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==e.errorMessage},on:{dismissed:function(t){e.errorMessage=null}}},[e._v("\n            "+e._s(e.errorMessage)+"\n        ")]),e._v(" "),t("hgroup",{staticClass:"cloud-auth-title"},[t("h1",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"h-lg"},[e._v("Manage Cloud Authorization")]),e._v(" "),t("nav",{staticClass:"operations"},[t("ul",[t("li",{staticClass:"cloudKeyHelp"},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:{active:e.showHelp},attrs:{"aria-label":"Instructions",title:"Instructions"},on:{click:function(t){t.preventDefault(),e.showHelp=!e.showHelp}}},[t("span",[e._v("Instructions")])])]),e._v(" "),t("li",{staticClass:"cloudKeyFilter"},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:{active:e.showFilter},attrs:{"aria-label":"Filter Results",title:"Filter Results"},on:{click:function(t){t.preventDefault(),e.showFilter=!e.showFilter}}},[t("span",[e._v("Filter")])])]),e._v(" "),t("li",{staticClass:"createCloudKey"},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Create New Key",title:"Create New Key"},on:{click:function(t){return t.preventDefault(),e.onCreate.apply(null,arguments)}}},[t("span",[e._v("Create New Key")])])])])])]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.showHelp?t("hgroup",[t("p",[e._v("See the online "),t("a",{attrs:{href:"https://galaxyproject.org/authnz/"}},[e._v("Documentation")]),e._v(".")])]):e._e()]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.showFilter?t("hgroup",[t("b-form-group",{attrs:{description:e.filterDescription}},[t("b-form-input",{attrs:{type:"text",placeholder:"Filter"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1):e._e()]),e._v(" "),t("b-button-group",{staticClass:"mb-4"},[t("button",{attrs:{name:"createNewKey"},on:{click:e.onCreate}},[e._v("Create New Authorization Key")])])],1),e._v(" "),t("div",{staticClass:"scroll-container"},[t("b-list-group",[t("transition-group",{attrs:{name:"fade"}},e._l(e.filteredItems,(function(n){return t("CloudAuthItem",{key:n.counter,staticClass:"mb-1",attrs:{credential:n},on:{delete:e.onDelete,save:e.onSave,expand:function(t){return e.expand(n,t)}}})})),1)],1)],1),e._v(" "),t("b-modal",{ref:"deleteModal",attrs:{id:"deleteCredentialModal",centered:"",title:"Delete Key?",size:"sm"},on:{ok:e.deleteKey,cancel:function(t){e.doomedItem=null}},model:{value:e.hasDoomed,callback:function(t){e.hasDoomed=t},expression:"hasDoomed"}})],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const df={components:{Multiselect:j()},data(){const e=(0,l.Bz)();return{customBuildsUrl:`${e.root}api/users/${e.user.id}/custom_builds`,selectedInstalledBuilds:[],installedBuilds:[],maxFileSize:100,fileLoaded:0,fields:[{key:"name",label:"Name"},{key:"id",label:"Key"},{key:"count",label:"Number of chroms/contigs"},{key:"action",label:""}],customBuilds:[],alertType:"info",alertMessage:"",dismissSecs:5,dismissCountDown:0,form:{id:"",name:"",file:"",text:""},dataSources:[{value:"fasta",text:"FASTA-file from history"},{value:"file",text:"Len-file from disk"},{value:"text",text:"Len-file by copy/paste"}],selectedDataSource:"fasta",fastaFilesLoading:!0,fastaFilesSelectDisabled:!0,fastaFiles:[],selectedFastaFile:null}},computed:{lengthType:function(){return this.selectedDataSource||""},lengthValue:function(){let e="";return"fasta"===this.lengthType?e=this.selectedFastaFile||"":"file"===this.lengthType?e=this.form.file:"text"===this.lengthType&&(e=this.form.text),e}},created(){const e=(0,l.Bz)(),t=e.currHistoryPanel&&e.currHistoryPanel.model.id;this.loadCustomBuilds(),t?this.loadCustomBuildsMetadata(t):this.fastaFilesLoading=!1},methods:{loadCustomBuilds(){v.Z.get(this.customBuildsUrl).then((e=>{this.customBuilds=e.data})).catch((e=>{this.showAlert("danger",e.response)}))},loadCustomBuildsMetadata(e){const t=(0,l.Bz)();v.Z.get(`${t.root}api/histories/${e}/custom_builds_metadata`).then((e=>{const t=e.data.fasta_hdas;for(let e=0;e<t.length;e++)t[e].text=t[e].label;t&&t.length>0&&(this.fastaFiles=t,this.selectedFastaFile=t[0].value,this.fastaFilesSelectDisabled=!1),this.fastaFilesLoading=!1,this.installedBuilds=e.data.installed_builds;for(let e=0;e<this.installedBuilds.length;e++)this.installedBuilds[e].text=this.installedBuilds[e].label})).catch((e=>{this.showAlert("danger",e.response),this.fastaFilesLoading=!1}))},save(e){const t={id:this.form.id,name:this.form.name,"len|type":this.lengthType,"len|value":this.lengthValue};if(!t.id.trim()||!t.name.trim()||!t["len|value"].trim())return this.showAlert("danger","All inputs are required."),!1;v.Z.put(`${this.customBuildsUrl}/${t.id}`,t).then((e=>{e.data.message?this.showAlert("warning",e.data.message):this.showAlert("success","Successfully added a new custom build."),this.loadCustomBuilds()})).catch((e=>{const t=e.response.data.err_msg;this.showAlert("danger",t||"Failed to create custom build.")}))},deleteBuild(e){v.Z.delete(`${this.customBuildsUrl}/${e}`).then((t=>{this.customBuilds=this.customBuilds.filter((t=>t.id!==e))})).catch((e=>{const t=e.response.data.err_msg;this.showAlert("danger",t||"Failed to delete custom build.")}))},readFile(e){const t=e.target.files&&e.target.files[0];if(t){const e=new FileReader;e.onprogress=e=>{e.lengthComputable&&(this.fileLoaded=100*Math.round(e.loaded/e.total))},e.onload=()=>{this.fileLoaded=0,this.form.file=e.result},e.readAsText(t)}},showAlert(e,t){this.alertType=e,this.alertMessage=t,this.dismissCountDown=this.dismissSecs},countDownChanged(e){this.dismissCountDown=e}}},cf=df;var uf=(0,m.Z)(cf,(function(){var e=this,t=e._self._c;return t("b-container",[t("b-row",[t("b-col",[t("h1",{staticClass:"h-sm"},[e._v("Current Custom Builds")])])],1),e._v(" "),t("b-row",[t("b-col",[t("b-table",{staticClass:"grid",attrs:{small:"","show-empty":"",items:e.customBuilds,fields:e.fields},scopedSlots:e._u([{key:"cell(action)",fn:function(n){return[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{href:"javascript:void(0)",title:"Delete build"},on:{click:function(t){return e.deleteBuild(n.item.id)}}},[t("i",{staticClass:"icon fa fa-lg fa-trash-o"})])]}}])})],1)],1),e._v(" "),e.installedBuilds.length>0?[t("b-row",{staticClass:"mt-2"},[t("b-col",[t("h2",{staticClass:"h-sm"},[e._v("System Installed Builds")])])],1),e._v(" "),t("b-row",[t("b-col",{staticClass:"mb-4",attrs:{id:"installed-builds"}},[t("Multiselect",{attrs:{multiple:"",taggable:"",label:"label","track-by":"value",searchable:!1,options:e.installedBuilds},model:{value:e.selectedInstalledBuilds,callback:function(t){e.selectedInstalledBuilds=t},expression:"selectedInstalledBuilds"}})],1)],1)]:e._e(),e._v(" "),t("b-row",[t("b-col",[t("h2",{staticClass:"h-sm"},[e._v("Add a Custom Build")])])],1),e._v(" "),t("b-row",[t("b-col",[t("b-card",[t("b-alert",{attrs:{fade:"",dismissible:"",variant:e.alertType,show:e.dismissCountDown},on:{dismissed:function(t){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v("\n                        "+e._s(e.alertMessage)+"\n                    ")]),e._v(" "),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Name",description:"Specify a build name, e.g. Hamster.","label-for":"name"}},[t("b-form-input",{attrs:{id:"name",tour_id:"name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Key",description:"Specify a build key, e.g. hamster_v1.","label-for":"id"}},[t("b-form-input",{attrs:{id:"id",tour_id:"id",required:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Definition",description:"Provide the data source.","label-for":"type"}},[t("b-form-select",{attrs:{id:"type",tour_id:"type",options:e.dataSources},model:{value:e.selectedDataSource,callback:function(t){e.selectedDataSource=t},expression:"selectedDataSource"}})],1),e._v(" "),t("div",["fasta"===e.selectedDataSource?t("b-form-group",{attrs:{label:"FASTA-file"}},[t("b-form-select",{attrs:{options:e.fastaFiles,disabled:e.fastaFilesSelectDisabled},model:{value:e.selectedFastaFile,callback:function(t){e.selectedFastaFile=t},expression:"selectedFastaFile"}})],1):e._e(),e._v(" "),"file"===e.selectedDataSource?t("b-form-group",{attrs:{label:"Len-file"}},[t("b-form-file",{attrs:{placeholder:"Choose a file..."},on:{change:e.readFile}}),e._v(" "),t("b-progress",{directives:[{name:"show",rawName:"v-show",value:0!==e.fileLoaded,expression:"fileLoaded !== 0"}],attrs:{animated:"","show-progress":"",value:e.fileLoaded,max:e.maxFileSize}}),e._v(" "),t("b-form-textarea",{directives:[{name:"show",rawName:"v-show",value:e.form.file,expression:"form.file"}],attrs:{value:e.form.file}})],1):e._e(),e._v(" "),"text"===e.selectedDataSource?t("b-form-group",{attrs:{label:"Edit/Paste"}},[t("b-form-textarea",{attrs:{id:"len-file-text-area"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1):e._e()],1),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{id:"save",type:"submit",variant:"primary",title:"Create new build"}},[t("i",{staticClass:"icon fa fa-save"}),e._v(" Save\n                        ")])],1)],1)],1),e._v(" "),t("b-col",["fasta"===e.selectedDataSource?t("b-card",{staticClass:"alert-info"},[t("h2",{staticClass:"h-sm"},[e._v("FASTA format")]),e._v(" "),t("p",{staticClass:"card-text"},[e._v("\n                        This is a multi-fasta file from your current history that provides the genome sequences for each\n                        chromosome/contig in your build.\n                    ")]),e._v(" "),t("p",{staticClass:"card-text"},[e._v("Here is a snippet from an example multi-fasta file:")]),e._v(" "),t("pre",{staticClass:"card-text"},[e._v(">chr1\nATTATATATAAGACCACAGAGAGAATATTTTGCCCGG...\n\n>chr2\nGGCGGCCGCGGCGATATAGAACTACTCATTATATATA...\n\n...")])]):t("b-card",{staticClass:"alert-info"},[t("h2",{staticClass:"h-sm"},[e._v("Length Format")]),e._v(" "),t("p",{staticClass:"card-text"},[e._v("The length format is two-column, separated by whitespace, of the form:")]),e._v(" "),t("pre",{staticClass:"card-text"},[e._v("chrom/contig   length of chrom/contig")]),e._v(" "),t("p",{staticClass:"card-text"},[e._v("For example, the first few entries of "),t("em",[e._v("mm9.len")]),e._v(" are as follows:")]),e._v(" "),t("pre",{staticClass:"card-text"},[e._v("chr1    197195432\nchr2    181748087\nchr3    159599783\nchr4    155630120\nchr5    152537259")]),e._v(" "),t("p",{staticClass:"card-text"},[e._v("\n                        Trackster uses this information to populate the select box for chrom/contig, andto set the\n                        maximum basepair of the track browser. You may either upload a .len fileof this format (Len File\n                        option), or directly enter the information into the box (Len Entry option).\n                    ")])])],1)],1)],2)}),[],!1,null,"f5c6b7ae",null);const hf=uf.exports;var pf=n(27856);function ff(e=!1){const t=(0,l.Bz)(),n=t.config.post_user_logout_href,i=`/user/logout?session_csrf_token=${t.session_csrf_token}&logout_all=${e}`;v.Z.get((0,D.dq)(i)).then((e=>{if(t.user&&t.user.clearSessionStorage(),t.config.enable_oidc){const e=localStorage.getItem("galaxy-provider");return e?(localStorage.removeItem("galaxy-provider"),v.Z.get((0,D.dq)(`/authnz/logout?provider=${e}`))):v.Z.get((0,D.dq)("/authnz/logout"))}return e})).then((e=>{e.data?.redirect_uri?window.top.location.href=e.data.redirect_uri:window.top.location.href=(0,D.dq)(n)}))}const mf=e=>(0,s.j4)()+e;let _f;async function vf(){const e=mf("api/users/current"),t=await v.Z.get(e);if(200!=t.status)throw new Error(t);return t.data}const gf={saveIdentity:async function(e){const t=mf(`authnz/${e}/login`),n=await v.Z.post(t);if(200!=n.status)throw new Error("Save failure.");return n},disconnectIdentity:async function(e){if(e){let t;t="custos"===e.provider||"cilogon"===e.provider?mf(`authnz/${e.provider}/disconnect/${e.email}`):mf(`authnz/${e.provider}/disconnect/`);if(200!=(await v.Z.delete(t)).status)throw new Error("Delete failure.")}},getIdentityProviders:async function(){const e=mf("authnz"),t=await v.Z.get(e);if(200!=t.status)throw new Error("Unable to load connected external identities");return _f=t.data,_f},hasUsername:async function(){const e=vf();return console.log(e.username),vf().username}};a.default.use(d.ZPm);const yf={components:{Multiselect:j(),LoadingSpan:z.Z},props:{login_page:{type:Boolean,required:!1},exclude_idps:{type:Array,required:!1}},data(){const e=(0,l.Bz)();return{loading:!1,messageText:null,messageVariant:null,enable_oidc:e.config.enable_oidc,oidc_idps:e.config.oidc,cilogon_idps:[],selected:null,rememberIdp:!1,cilogonOrCustos:null,toggle_cilogon:!1}},computed:{filtered_oidc_idps(){const e=["cilogon","custos"].concat(this.exclude_idps),t=Object.assign({},this.oidc_idps);return e.forEach((e=>{delete t[e]})),t},cilogonListShow(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"cilogon")||Object.prototype.hasOwnProperty.call(this.oidc_idps,"custos")},messageShow(){return null!=this.messageText},cilogon_enabled(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"cilogon")},custos_enabled(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"custos")}},created(){this.rememberIdp=null!==this.getIdpPreference(),this.cilogonListShow&&this.getCILogonIdps()},methods:{toggleCILogon(e){this.toggle_cilogon=!this.toggle_cilogon,this.cilogonOrCustos=this.toggle_cilogon?e:null},submitOIDCLogin(e){const t=(0,s.Bg)();this.loading=!0,v.Z.post(`${t}authnz/${e}/login`).then((e=>{this.loading=!1,e.data.redirect_uri&&(window.location=e.data.redirect_uri)})).catch((e=>{this.messageVariant="danger";const t=e.response.data&&e.response.data.err_msg;this.messageText=t||"Login failed for an unknown reason.",this.loading=!1}))},submitCILogon(e){const t=(0,s.Bg)();this.login_page&&this.setIdpPreference(),this.loading=!0,v.Z.post(`${t}authnz/${e}/login/?idphint=${this.selected.EntityID}`).then((t=>{this.loading=!1,localStorage.setItem("galaxy-provider",e),t.data.redirect_uri&&(window.location=t.data.redirect_uri)})).catch((e=>{this.messageVariant="danger";const t=e.response.data&&e.response.data.err_msg;this.messageText=t||"Login failed for an unknown reason.",this.loading=!1}))},getCILogonIdps(){const e=(0,s.Bg)();v.Z.get(`${e}authnz/get_cilogon_idps`).then((e=>{this.cilogon_idps=e.data,1==this.cilogon_idps.length?this.selected=this.cilogon_idps[0]:this.cilogon_idps.sort(((e,t)=>e.DisplayName>t.DisplayName?1:-1))})).then((()=>{if(this.login_page){const e=this.getIdpPreference();e&&(this.selected=this.cilogon_idps.find((t=>t.EntityID===e)))}}))},setIdpPreference(){this.rememberIdp?localStorage.setItem("galaxy-remembered-idp",this.selected.EntityID):localStorage.removeItem("galaxy-remembered-idp")},getIdpPreference:()=>localStorage.getItem("galaxy-remembered-idp")}};const bf=(0,m.Z)(yf,(function(){var e=this,t=e._self._c;return t("div",[t("b-alert",{attrs:{show:e.messageShow,variant:e.messageVariant}},[e._v("\n        "+e._s(e.messageText)+"\n    ")]),e._v(" "),t("b-form",{attrs:{id:"externalLogin"}},[t("hr",{staticClass:"my-4"}),e._v(" "),e.cilogonListShow?t("div",{staticClass:"cilogon"},[e.login_page?t("div",[t("b-form-group",{attrs:{label:"Use existing institutional login"}},[t("Multiselect",{attrs:{placeholder:"Select your institution",options:e.cilogon_idps,label:"DisplayName","track-by":"EntityID"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),e._v(" "),e.login_page?t("b-form-group",[t("b-form-checkbox",{attrs:{id:"remember-idp"},model:{value:e.rememberIdp,callback:function(t){e.rememberIdp=t},expression:"rememberIdp"}},[e._v("\n                        Remember institution selection\n                    ")])],1):e._e(),e._v(" "),e.cilogon_enabled?t("b-button",{attrs:{disabled:e.loading||null===e.selected},on:{click:function(t){return e.submitCILogon("cilogon")}}},[e.loading?t("LoadingSpan",{attrs:{message:"Signing In"}}):t("span",[e._v("Sign in with Institutional Credentials*")])],1):e._e(),e._v(" "),Object.prototype.hasOwnProperty.call(e.oidc_idps,"custos")?t("b-button",{attrs:{disabled:e.loading||null===e.selected},on:{click:function(t){return e.submitCILogon("custos")}}},[e.loading?t("LoadingSpan",{attrs:{message:"Signing In"}}):t("span",[e._v("Sign in with Custos*")])],1):e._e()],1):t("div",[e.cilogon_enabled?t("b-button",{on:{click:function(t){return e.toggleCILogon("cilogon")}}},[e._v("\n                    Sign in with Institutional Credentials*\n                ")]):e._e(),e._v(" "),e.custos_enabled?t("b-button",{on:{click:function(t){return e.toggleCILogon("custos")}}},[e._v("Sign in with Custos*")]):e._e(),e._v(" "),e.toggle_cilogon?t("b-form-group",[t("Multiselect",{attrs:{placeholder:"Select your institution",options:e.cilogon_idps,label:"DisplayName","track-by":"EntityID"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),e.toggle_cilogon?t("b-button",{attrs:{disabled:e.loading||null===e.selected},on:{click:function(t){return e.submitCILogon(e.cilogonOrCustos)}}},[e._v("\n                        Login*\n                    ")]):e._e()],1):e._e()],1),e._v(" "),t("p",{staticClass:"mt-3"},[t("small",{staticClass:"text-muted"},[e._v("\n                    * Galaxy uses CILogon via Custos to enable you to log in from this organization. By clicking\n                    'Sign In', you agree to the\n                    "),t("a",{attrs:{href:"https://ca.cilogon.org/policy/privacy"}},[e._v("CILogon")]),e._v(" privacy policy and you agree to\n                    share your username, email address, and affiliation with CILogon, Custos, and Galaxy.\n                ")])])]):e._e(),e._v(" "),e._l(e.filtered_oidc_idps,(function(n,i){return t("div",{key:i,staticClass:"m-1"},[n.icon?t("span",[t("b-button",{staticClass:"d-block mt-3",attrs:{variant:"link"},on:{click:function(t){return e.submitOIDCLogin(i)}}},[t("img",{attrs:{src:n.icon,height:"45",alt:i}})])],1):t("span",[t("b-button",{staticClass:"d-block mt-3",on:{click:function(t){return e.submitOIDCLogin(i)}}},[t("i",{class:e.oidc_idps[i]}),e._v("\n                    Sign in with\n                    "+e._s(i.charAt(0).toUpperCase()+i.slice(1))+"\n                ")])],1)])}))],2)],1)}),[],!1,null,"3503ef20",null).exports;a.default.use(d.ZPm);const wf={components:{ExternalLogin:bf},data(){const e=(0,l.Bz)();return{items:[],showHelp:!0,loading:!1,doomedItem:null,errorMessage:null,enable_oidc:e.config.enable_oidc,cilogonOrCustos:null,userEmail:e.user.get("email")}},computed:{connectExternal(){var e=new URLSearchParams(window.location.search);return e.has("connect_external")&&"true"==e.get("connect_external")},deleteButtonVariant(){return this.showDeleted?"primary":"secondary"},existingEmail:()=>new URLSearchParams(window.location.search).get("email_exists"),hasDoomed:{get(){return null!==this.doomedItem},set(){}}},watch:{showDeleted(e){this.loadIdentities({deleted:e})}},created(){this.loadIdentities()},mounted(){const e=new URLSearchParams(window.location.search),t=(0,pf.sanitize)(e.get("notification"));oo.FN.success(t)},methods:{loadIdentities(){this.loading=!0,gf.getIdentityProviders().then((e=>{this.items=e})).catch(this.setError("Unable to load connected external identities.")).finally((()=>this.loading=!1))},onDisconnect(e){this.doomedItem=e,e.id?this.items.length>1?this.$refs.deleteModal.show():(this.$refs.deleteAndResetModal.show(),this.setError("Before disconnecting this identity, you need to set your account password, in order to avoid being locked out of your account.")):this.setError("Before disconnecting this identity, you need to set your account password, in order to avoid being locked out of your account.")},disconnectID(){gf.disconnectIdentity(this.doomedItem).then((()=>{this.removeItem(this.doomedItem)})).catch((e=>{e.data?this.setError("Unable to disconnect external identity."):this.removeItem(this.doomedItem)})).finally((()=>{this.removeItem(this.doomedItem),this.doomedItem=null}))},disconnectAndReset(){this.disconnectID(),ff()},removeItem(e){this.items=this.items.filter((t=>t!=e))},setError(e){return t=>{this.errorMessage=e,console.warn(t)}}}};const kf=(0,m.Z)(wf,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"external-id"},[t("b-alert",{attrs:{show:!!e.connectExternal,variant:"info"}},[e._v("\n        You are logged in. You can now connect the Galaxy user account with the email "),t("i",[e._v(e._s(e.userEmail))]),e._v(", to your preferred external provider.\n    ")]),e._v(" "),t("b-alert",{attrs:{show:!!e.existingEmail,variant:"warning"}},[e._v("\n        Note: We found a Galaxy account matching the email of this identity, "),t("i",[e._v(e._s(e.existingEmail))]),e._v(". The active account "),t("i",[e._v(e._s(e.userEmail))]),e._v(" has been linked to this external identity. If you wish to link\n        this identity to a different account, you will need to disconnect it from this account first.\n    ")]),e._v(" "),t("header",[t("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==e.errorMessage},on:{dismissed:function(t){e.errorMessage=null}}},[e._v(e._s(e.errorMessage))]),e._v(" "),e._m(0),e._v(" "),t("p",[e._v("\n            Users with existing Galaxy user accounts (e.g., via Galaxy username and password) can associate their\n            account with their 3rd party identities. For instance, if a user associates their Galaxy account with\n            their Google account, then they can log in to Galaxy either using their Galaxy username and password, or\n            their Google account. Whichever method they use they will be assuming same Galaxy user account, hence\n            having access to the same histories, workflows, datasets, libraries, etc.\n        ")]),e._v(" "),e._m(1)],1),e._v(" "),e.items.length?t("div",{staticClass:"external-subheading"},[t("h2",{staticClass:"h-md"},[e._v("Connected External Identities")]),e._v(" "),e._l(e.items,(function(n){return t("b-button",{key:n.email,staticClass:"d-block mt-3",attrs:{"aria-label":"Disconnect External Identity",title:"Disconnect External Identity"},on:{click:function(t){return e.onDisconnect(n)}}},[e._v("\n            Disconnect "+e._s(n.provider.charAt(0).toUpperCase()+n.provider.slice(1))+" - "+e._s(n.email)+"\n        ")])})),e._v(" "),t("b-modal",{ref:"deleteModal",attrs:{id:"disconnectIDModal",centered:"",title:"Disconnect Identity?",size:"sm"},on:{ok:e.disconnectID,cancel:function(t){e.doomedItem=null}}}),e._v(" "),t("b-modal",{ref:"deleteAndResetModal",attrs:{id:"disconnectAndResetModal",centered:"",title:"Deleting last external identity"},on:{ok:e.disconnectAndReset,cancel:function(t){e.doomedItem=null}}},[t("p",[e._v("\n                This is your only defined external identity. If you delete this identity, you will be logged out. To\n                log back in you will need to use a password associated with your account, or reconnect to this third\n                party identity. If you don't know your Galaxy user password, you can reset it or contact an\n                administrator for help.\n            ")])]),e._v(" "),t("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==e.errorMessage},on:{dismissed:function(t){e.errorMessage=null}}},[e._v(e._s(e.errorMessage))])],2):e._e(),e._v(" "),e.enable_oidc?t("div",{staticClass:"external-subheading"},[t("h2",{staticClass:"h-md"},[e._v("Connect Other External Identities")]),e._v(" "),t("ExternalLogin",{attrs:{login_page:!1}})],1):e._e()],1)}),[function(){var e=this._self._c;return e("hgroup",{staticClass:"external-id-title"},[e("h1",{staticClass:"h-lg"},[this._v("Manage External Identities")])])},function(){var e=this,t=e._self._c;return t("p",[e._v("\n            See more information, including a list of supported identity providers,\n            "),t("a",{attrs:{href:"https://galaxyproject.org/authnz/use/oidc/"}},[e._v("here")]),e._v(".\n        ")])}],!1,null,null,null).exports;var Cf=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const xf=X._.path("/api/notifications/preferences").method("get").create();function Sf(){return Cf(this,void 0,void 0,(function*(){const{data:e}=yield xf({});return e}))}const Mf=X._.path("/api/notifications/preferences").method("put").create();function Tf(e){return Cf(this,void 0,void 0,(function*(){const{data:t}=yield Mf(e);return t}))}var Lf=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};function Df(){return"Notification"in window}function Ef(){return Lf(this,void 0,void 0,(function*(){if(Df()){return function(e){return"granted"===e?(new Notification("Notifications enabled",{icon:"static/favicon.ico"}),!0):(oo.FN.info("Push notifications disabled, please re-enable through browser settings."),!1)}(yield Notification.requestPermission())}return!1}))}var Of=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Af=(0,a.defineComponent)({__name:"AsyncButton",props:{icon:{type:String,required:!0},title:{type:String,required:!1,default:""},action:{type:Function,required:!0},size:{type:String,required:!1,default:"md"},variant:{type:String,required:!1,default:"link"},disabled:{type:Boolean,required:!1,default:!1}},setup(e){const t=e,n=(0,a.ref)(!1);return{__sfc:!0,loading:n,props:t,onClick:function(){return Of(this,void 0,void 0,(function*(){n.value=!0,yield t.action(),n.value=!1}))},FontAwesomeIcon:p.GN,BButton:jn.T}}});const If=(0,m.Z)(Af,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:!e.title,expression:"!title",modifiers:{hover:!0}}],attrs:{title:e.title,size:e.size,variant:e.variant,disabled:n.loading||e.disabled},on:{click:n.onClick}},[n.loading?t("span",{staticClass:"loading-icon fa fa-spinner fa-spin",attrs:{title:"loading"}}):t(n.FontAwesomeIcon,{attrs:{icon:n.props.icon},on:{click:n.onClick}}),e._v(" "),e._t("default")],2)}),[],!1,null,null,null).exports;var Pf=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Rf=(0,a.defineComponent)({__name:"NotificationsPreferences",props:{headerSize:{type:String,default:"h-lg"}},setup(e){u.vI.add(h.RLE);const{config:t}=(0,c.Z)(!0),n=(0,a.ref)(!1),i=(0,a.ref)(null),o=(0,a.ref)(!!Df()&&"granted"===Notification.permission),s=(0,a.ref)({}),r=(0,a.computed)((()=>Object.keys(s.value))),l=(0,a.computed)((()=>!n.value&&t.value.enable_notification_system&&s.value));function d(){return Pf(this,void 0,void 0,(function*(){n.value=!0,yield Sf().then((e=>{s.value=e.preferences})).catch((e=>{i.value=e})).finally((()=>{n.value=!1}))}))}return(0,a.watch)((()=>t.value.enable_notification_system),(()=>{t.value.enable_notification_system&&d()}),{immediate:!0}),{__sfc:!0,config:t,loading:n,errorMessage:i,pushNotificationsGranted:o,notificationsPreferences:s,categories:r,showPreferences:l,categoryDescriptionMap:{message:"You will receive notifications when someone sends you a message.",new_shared_item:"You will receive notifications when someone shares an item with you."},getNotificationsPreferences:d,updateNotificationsPreferences:function(){return Pf(this,void 0,void 0,(function*(){yield Tf({preferences:s.value}).then((e=>{s.value=e.preferences,oo.FN.success("Notifications preferences updated")})).catch((e=>{i.value=e}))}))},capitalizeWords:function(e){return e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},onTogglePushNotifications:function(){return Pf(this,void 0,void 0,(function*(){o.value=yield Ef()}))},FontAwesomeIcon:p.GN,BAlert:Rn.F,BButton:jn.T,BCard:vi._,BCol:Nd.l,BFormCheckbox:Zi.l,BRow:Hd.T,browserSupportsPushNotifications:Df,AsyncButton:If,LoadingSpan:z.Z}}}),jf=Rf;const Yf=(0,m.Z)(jf,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("section",{staticClass:"notifications-preferences"},[t("h1",{directives:[{name:"localize",rawName:"v-localize"}],class:e.headerSize},[e._v("Manage notifications preferences")]),e._v(" "),n.config.enable_notification_system?t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mb-2"},[e._v("\n        You can manage notifications channels and preferences here.\n    ")]):t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mb-2"},[e._v(" You can manage push notifications preferences here. ")]),e._v(" "),n.errorMessage?t(n.BAlert,{attrs:{show:"",dismissible:"",fade:"",variant:"warning"},on:{dismissed:function(e){n.errorMessage=null}}},[e._v("\n        "+e._s(n.errorMessage)+"\n    ")]):e._e(),e._v(" "),n.loading?t(n.BAlert,{staticClass:"m-2",attrs:{show:"",variant:"info"}},[t(n.LoadingSpan,{attrs:{message:"Loading notifications preferences"}})],1):n.showPreferences?t(n.BRow,{staticClass:"mx-1"},e._l(n.categories,(function(i){return t(n.BCol,{key:i},[t(n.BCard,{staticClass:"my-2 px-2"},[t(n.BRow,{attrs:{"align-h":"between","align-v":"center"}},[t(n.BCol,{staticClass:"mx-2",attrs:{cols:"auto"}},[t(n.BRow,[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"category-title"},[e._v(e._s(n.capitalizeWords(i)))])]),e._v(" "),n.categoryDescriptionMap[i]?t(n.BRow,[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"category-description"},[e._v("\n                                "+e._s(n.categoryDescriptionMap[i])+"\n                            ")])]):e._e()],1),e._v(" "),t(n.BCol,{staticClass:"p-0",attrs:{cols:"auto"}},[t(n.BFormCheckbox,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:n.notificationsPreferences[i].enabled?"Disable notifications":"Enable notifications",switch:""},model:{value:n.notificationsPreferences[i].enabled,callback:function(t){e.$set(n.notificationsPreferences[i],"enabled",t)},expression:"notificationsPreferences[category].enabled"}})],1)],1),e._v(" "),t(n.BRow,{staticClass:"p-2"},e._l(Object.keys(n.notificationsPreferences[i].channels),(function(o){return t(n.BCol,{key:o,staticClass:"d-flex align-items-center"},[t(n.BFormCheckbox,{directives:[{name:"localize",rawName:"v-localize"}],attrs:{disabled:!n.notificationsPreferences[i].enabled},model:{value:n.notificationsPreferences[i].channels[o],callback:function(t){e.$set(n.notificationsPreferences[i].channels,o,t)},expression:"notificationsPreferences[category].channels[channel]"}},[e._v("\n                            "+e._s(n.capitalizeWords(o))+"\n                        ")]),e._v(" "),"push"===o?t(n.FontAwesomeIcon,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Push notifications need to be enabled",expression:"'Push notifications need to be enabled'",modifiers:{hover:!0}}],staticClass:"mx-2",attrs:{icon:"exclamation-circle"}}):e._e()],1)})),1)],1)],1)})),1):e._e(),e._v(" "),n.loading?e._e():t(n.BRow,{staticClass:"m-1",attrs:{"align-h":"center"}},[n.browserSupportsPushNotifications()&&!n.pushNotificationsGranted?t(n.BCard,{staticClass:"my-2"},[e._v("\n            Allow push and tab notifications. To disable, revoke the site notification privilege in your browser.\n            "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-2",attrs:{title:"Enable push notifications"},on:{click:n.onTogglePushNotifications}},[e._v("\n                Enable push notifications\n            ")])],1):n.browserSupportsPushNotifications()&&n.pushNotificationsGranted?t(n.BAlert,{staticClass:"my-2",attrs:{show:"",variant:"info"}},[t(n.FontAwesomeIcon,{attrs:{icon:"check-circle"}}),e._v("\n            Push notifications are enabled. You can disable them by revoking the site notification privilege in your\n            browser.\n        ")],1):t(n.BAlert,{staticClass:"my-2",attrs:{show:"",variant:"warning"}},[t(n.FontAwesomeIcon,{attrs:{icon:"exclamation-circle"}}),e._v("\n            Push notifications are not supported by this browser. You can still receive in-app notifications.\n        ")],1)],1),e._v(" "),!n.loading&&n.config.enable_notification_system?t(n.BRow,{staticClass:"m-1",attrs:{"align-h":"center"}},[t(n.AsyncButton,{attrs:{action:n.updateNotificationsPreferences,icon:"save",variant:"primary",size:"md"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Save")])])],1):e._e()],1)}),[],!1,null,"5bf16b40",null).exports;const Hf=e=>{const t=(0,l.Bz)(),n=t.config;return e=e||t.user.id,{information:{title:(0,Ee.ZP)("Manage Information"),id:"edit-preferences-information",description:n.enable_account_interface?(0,Ee.ZP)("Edit your email, addresses and custom parameters or change your public name."):(0,Ee.ZP)("Edit your custom parameters."),url:`/api/users/${e}/information/inputs`,icon:"fa-user",redirect:"/user",disabled:n.use_remote_user},password:{title:(0,Ee.ZP)("Change Password"),id:"edit-preferences-password",description:(0,Ee.ZP)("Allows you to change your login credentials."),icon:"fa-unlock-alt",url:`/api/users/${e}/password/inputs`,submit_title:"Save Password",redirect:"/user",disabled:n.use_remote_user||!n.enable_account_interface},permissions:{title:(0,Ee.ZP)("Set Dataset Permissions for New Histories"),id:"edit-preferences-permissions",description:(0,Ee.ZP)("Grant others default access to newly created histories. Changes made here will only affect histories created after these settings have been stored."),url:`/api/users/${e}/permissions/inputs`,icon:"fa-users",submitTitle:"Save Permissions",redirect:"/user",disabled:n.single_user},toolbox_filters:{title:(0,Ee.ZP)("Manage Toolbox Filters"),id:"edit-preferences-toolbox-filters",description:(0,Ee.ZP)("Customize your Toolbox by displaying or omitting sets of Tools."),url:`/api/users/${e}/toolbox_filters/inputs`,icon:"fa-filter",submitTitle:"Save Filters",redirect:"/user",disabled:!n.has_user_tool_filters}}};const Nf=(0,a.defineComponent)({__name:"UserActivityBarSettings",setup(e){const t=(0,Xe.L)(),n=(0,a.ref)(!1),i=(0,a.computed)({get:()=>t.showActivityBar,set:()=>{"tools"!==t.toggledSideBar&&t.toggleSideBar("tools"),t.toggleActivityBar()}});return{__sfc:!0,userStore:t,show:n,enableActivityBar:i}}});const Ff=(0,m.Z)(Nf,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-card",{staticClass:"user-activity-bar-settings mr-3",attrs:{show:n.show}},[t("b-form-checkbox",{attrs:{switch:""},model:{value:n.enableActivityBar,callback:function(e){n.enableActivityBar=e},expression:"enableActivityBar"}},[t("b",[e._v("Enable Activity Bar")])])],1)}),[],!1,null,null,null).exports;const Bf={components:{BButton:jn.T,BModal:Nr.N,BRow:Hd.T,BAlert:Rn.F},props:{userId:{type:String,required:!0}},data:()=>({enabled:!1,beaconHistoryName:"Beacon Export 📡",beaconHistories:[{}]}),methods:{...(0,o.nv)(I.z,["setCurrentHistory"]),switchHistory:async function(e){await this.setCurrentHistory(e)},getBeaconHistories:function(){v.Z.get((0,D.dq)("api/histories?&keys=id,contents&q=name&qv="+encodeURI(this.beaconHistoryName))).then((e=>{this.beaconHistories=this.removeDeletedContents(e.data)})).catch((e=>{console.log(e.response)}))},removeDeletedContents:function(e){return e.forEach((e=>{e.contents.splice(0,e.contents.length,...e.contents.filter((e=>!e.deleted)))})),e},createBeaconHistory:function(){v.Z.post((0,D.dq)("api/histories"),{name:this.beaconHistoryName}).then((e=>{v.Z.put((0,D.dq)(`api/histories/${e.data.id}`),{annotation:"Variants will be collected from VCF datasets in this history if beacon sharing is activated"}).then((()=>{this.getBeaconHistories()}))})).catch((e=>{this.errorMessages.push(e.response.data.err_msg),console.log(e.response)}))},optIn(){try{v.Z.post((0,D.dq)(`api/users/${this.userId}/beacon`),{enabled:!0}).then((e=>{this.loadSettings(),this.beaconHistories.length<1&&(this.createBeaconHistory(),this.getBeaconHistories())}))}catch(e){console.log(e)}},optOut(){try{v.Z.post((0,D.dq)(`api/users/${this.userId}/beacon`),{enabled:!1}).then((e=>{this.loadSettings()}))}catch(e){console.log(e)}},onOpenModal(){this.loadSettings(),this.getBeaconHistories()},async loadSettings(){try{await v.Z.get((0,D.dq)(`api/users/${this.userId}/beacon`)).then((e=>{this.enabled=e.data.enabled}))}catch(e){console.log(e)}}}};const $f=(0,m.Z)(Bf,(function(){var e=this,t=e._self._c;return t("BRow",{staticClass:"ml-3 mb-1"},[t("i",{staticClass:"pref-icon pt-1 fa fa-lg fa-broadcast-tower"}),e._v(" "),t("div",{staticClass:"pref-content pr-1"},[t("a",{attrs:{id:"beacon-settings",href:"javascript:void(0)"}},[t("b",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-beacon",modifiers:{"modal-beacon":!0}},{name:"localize",rawName:"v-localize"}]},[e._v("Manage Beacon")])]),e._v(" "),t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"form-text text-muted"},[e._v("Contribute variants to Beacon")]),e._v(" "),t("BModal",{ref:"modal",attrs:{id:"modal-beacon",size:"xl","ok-only":"",title:"Manage Beacon","title-tag":"h1"},on:{show:e.onOpenModal}},[t("p",[e._v("\n                The\n                "),t("a",{attrs:{href:"https://beacon-project.io"}},[e._v("Global Alliance for Genomics & Health Beacon Project")]),e._v(" enables\n                safe sharing of human genetic variants."),t("br"),e._v(" "),t("br"),e._v("\n                Galaxy lets you use the Beacon protocol to share genetic variants directly from your analysis with\n                the scientific community in the following anonymous way:"),t("br"),e._v(" "),t("br"),e._v("\n                For participating users, we will merge variant lists to be shared into a single Beacon dataset per\n                reference genome and make that dataset accessible through a Beacon server."),t("br"),e._v("\n                If someone queries the server for a specific variant that is in our Beacon dataset, the server will\n                reply with\n                "),t("span",{staticClass:"cursive"},[e._v("“Yes, we have seen such a variant”")]),e._v("."),t("br"),e._v(" "),t("br"),e._v("\n                The user that issued the query then has the possibility to contact a Galaxy server admin who can\n                link the variant call in question to particular Galaxy users. If you are among the users that shared\n                the variant, the admin will, in turn, contact you and ask if you want to contact the user that\n                initiated the query to negotiate further information exchange or data access.\n            ")]),e._v(" "),e.enabled?t("BAlert",{attrs:{show:""}},[t("div",{staticClass:"flex-row space-between"},[t("div",{staticClass:"no-shrink"},[e._v("\n                        Beacon sharing is "),t("span",{staticClass:"bold"},[e._v("enabled")]),e._v(" for your profile\n                    ")]),e._v(" "),t("div",{staticClass:"fill"}),e._v(" "),t("div",{staticClass:"no-shrink"},[t("BButton",{attrs:{variant:"danger"},on:{click:e.optOut}},[e._v("Disable")])],1)])]):e._e(),e._v(" "),e.enabled?e._e():t("BAlert",{attrs:{show:""}},[t("div",{staticClass:"flex-row space-between"},[t("div",{staticClass:"no-shrink"},[e._v("\n                        Beacon sharing is currently "),t("span",{staticClass:"bold"},[e._v("disabled")]),e._v(" - no data will be shared\n                    ")]),e._v(" "),t("div",{staticClass:"fill"}),e._v(" "),t("div",[t("BButton",{attrs:{variant:"success"},on:{click:e.optIn}},[e._v("Enable")])],1)])]),e._v(" "),e.enabled?t("div",[t("p",[e._v("\n                    You can share data by copying VCF or VCF.bgzip files to a history called\n                    "),t("span",{staticClass:"cursive gray-background"},[e._v(e._s(e.beaconHistoryName))]),e._v(". "),t("br"),e._v(" "),t("br"),e._v("\n                    The Beacon database is rebuilt periodically. Therefore, changes do not go into effect\n                    immediately. If you disable beacon sharing or remove a dataset from the beacon history, the\n                    corresponding variants will disappear from the beacon dataset during the next rebuild.\n                ")])]):e._e(),e._v(" "),e.enabled?t("div",{staticClass:"gray-box"},[e.beaconHistories.length<1?t("div",{staticClass:"flex-row history-entry"},[t("div",{staticClass:"no-shrink"},[e._v("No beacon history found")]),e._v(" "),t("div",{staticClass:"fill"}),e._v(" "),t("div",{staticClass:"no-shrink"},[t("BButton",{on:{click:e.createBeaconHistory}},[e._v("Create Beacon History")])],1)]):e._e(),e._v(" "),e._l(e.beaconHistories,(function(n){return t("div",{key:n.id,staticClass:"flex-row history-entry",class:{"gray-border-bottom":n.id!==e.beaconHistories[e.beaconHistories.length-1].id}},[n.contents?t("div",{staticClass:"no-shrink"},[e._v("\n                        History with "+e._s(n.contents.length)+" datasets\n                    ")]):e._e(),e._v(" "),t("div",{staticClass:"fill"}),e._v(" "),t("div",{staticClass:"no-shrink"},[t("BButton",{on:{click:function(t){return e.switchHistory(n.id)}}},[e._v("Switch to History")])],1)])}))],2):e._e(),e._v(" "),e.enabled?t("div",[t("p",[e._v("Datasets must fulfill the following conditions in order to be processed")]),e._v(" "),t("ul",[t("li",[e._v("must be VCF or VCF.bgzip format")]),e._v(" "),t("li",[e._v("must have a human reference assigned to it (e.g. hg19)")]),e._v(" "),t("li",[e._v("must define at least one sample in a dedicated genotype column")]),e._v(" "),t("li",[e._v("\n                        must contain the info field "),t("span",{staticClass:"cursive"},[e._v("AC")]),e._v(", with the total number of\n                        alternate alleles in called genotypes\n                    ")])])]):e._e()],1)],1)])}),[],!1,null,"77b4e6c0",null).exports;a.default.use(d.ZPm);const zf={props:{userId:{type:String,required:!0},email:{type:String,required:!0}},data:()=>({name:"",nameState:null,deleteError:""}),computed:{showDeleteError(){return""!==this.deleteError}},methods:{checkFormValidity(){const e=this.$refs.form.checkValidity();return this.nameState=e,e},resetModal(){this.name="",this.nameState=null},handleOk(e){e.preventDefault(),this.handleSubmit()},async handleSubmit(){if(!this.checkFormValidity())return!1;if(this.email!==this.name)return this.nameState=!1,!1;this.nameState=!0;try{await v.Z.delete((0,D.dq)(`/api/users/${this.userId}`))}catch(e){if(403===e.response.status)return this.deleteError="User deletion must be configured on this instance in order to allow user self-deletion.  Please contact an administrator for assistance.",!1}!function(){const e=(0,l.Bz)();e.user?.clearSessionStorage();const t=e.config.post_user_logout_href;window.top.location.href=(0,D.dq)(t)}()}}};const Wf=(0,m.Z)(zf,(function(){var e=this,t=e._self._c;return t("b-row",{staticClass:"ml-3 mb-1"},[t("i",{staticClass:"pref-icon pt-1 fa fa-lg fa-radiation"}),e._v(" "),t("div",{staticClass:"pref-content pr-1"},[t("a",{attrs:{id:"delete-account",href:"javascript:void(0)"}},[t("b",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}},{name:"localize",rawName:"v-localize"}]},[e._v("Delete Account")])]),e._v(" "),t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"form-text text-muted"},[e._v("Delete your account on this Galaxy server.")]),e._v(" "),t("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",centered:"",title:"Account Deletion","title-tag":"h2"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk}},[t("p",[t("b-alert",{attrs:{variant:"danger",show:e.showDeleteError}},[e._v(e._s(e.deleteError))]),e._v(" "),t("b",[e._v("\n                    This action cannot be undone. Your account will be permanently deleted, along with the data\n                    contained in it.\n                ")])],1),e._v(" "),t("b-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[t("b-form-group",{attrs:{state:e.nameState,label:"Enter your user email for this account as confirmation.","label-for":"Email","invalid-feedback":"Incorrect email"}},[t("b-form-input",{attrs:{id:"name-input",state:e.nameState,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)],1)],1)])}),[],!1,null,"7774a804",null).exports;const Uf={__name:"UserPreferencesElement",props:{id:{type:String,default:null},icon:{type:String,default:"fa-gear"},title:{type:String,default:"Title not available."},description:{type:String,default:"Description not available."},to:{type:String,default:null},badge:{type:String,default:null}},setup:e=>({__sfc:!0,BRow:Hd.T})};const Vf=(0,m.Z)(Uf,(function(){var e=this,t=e._self._c;return t(e._self._setupProxy.BRow,{staticClass:"ml-3 mb-1"},[t("i",{class:["pref-icon pt-1 fa fa-lg",e.icon]}),e._v(" "),t("div",{staticClass:"pref-content pr-1"},[e.badge?t("b-badge",{attrs:{variant:"danger"}},[e._v("\n            "+e._s(e.badge)+"\n        ")]):e._e(),e._v(" "),e.to?t("router-link",{attrs:{id:e.id,to:e.to}},[t("b",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(e.title))])]):t("a",{attrs:{id:e.id,href:"#"},on:{click:function(t){return e.$emit("click")}}},[t("b",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(e.title))])]),e._v(" "),t("div",{staticClass:"form-text text-muted"},[e._v("\n            "+e._s(e.description)+"\n        ")]),e._v(" "),e._t("default")],2)])}),[],!1,null,"11791be0",null).exports;var qf=n(82653);a.default.use(qf.T);const Zf={components:{BModal:Nr.N,BRow:Hd.T,SelectObjectStore:lr},props:{userId:{type:String,required:!0},preferredObjectStoreId:{type:String,default:null}},data(){return{error:null,popoverPlacement:"left",newDatasetsDescription:"New dataset outputs from tools and workflows",titleTag:"h3",modalSize:"sm",showModal:!1,selectedObjectStoreId:this.preferredObjectStoreId,galaxySelectionDefaultTitle:"Use Galaxy Defaults",galaxySelectionDefaultDescription:"Selecting this will reset Galaxy to default behaviors configured by your Galaxy administrator."}},methods:{resetModal(){},async handleSubmit(e){const t={preferred_object_store_id:e},n=(0,D.Vd)("api/users/current");try{await v.Z.put(n,t)}catch(e){this.error=(0,y.a)(e)}this.selectedObjectStoreId=e,this.showModal=!1}}};const Gf=(0,m.Z)(Zf,(function(){var e=this,t=e._self._c;return t("BRow",{staticClass:"ml-3 mb-1"},[t("i",{staticClass:"pref-icon pt-1 fa fa-lg fa-hdd"}),e._v(" "),t("div",{staticClass:"pref-content pr-1"},[t("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-select-preferred-object-store",modifiers:{"modal-select-preferred-object-store":!0}}],staticClass:"preferred-storage",attrs:{id:"select-preferred-object-store",href:"javascript:void(0)"}},[t("b",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Preferred Object Store")])]),e._v(" "),t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"form-text text-muted"},[e._v("\n            Select a preferred default object store for the outputs of new jobs to be created in.\n        ")]),e._v(" "),t("BModal",{ref:"modal",attrs:{id:"modal-select-preferred-object-store",centered:"",title:"Preferred Object Store","title-tag":e.titleTag,"hide-footer":"",static:"",size:e.modalSize},on:{show:e.resetModal,hidden:e.resetModal},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[t("SelectObjectStore",{attrs:{"parent-error":e.error,"for-what":e.newDatasetsDescription,"selected-object-store-id":e.selectedObjectStoreId,"default-option-title":e.galaxySelectionDefaultTitle,"default-option-description":e.galaxySelectionDefaultDescription},on:{onSubmit:e.handleSubmit}})],1)],1)])}),[],!1,null,"4ea96a6f",null).exports;const Jf={__name:"ThemeSelector",setup(e){const{currentTheme:t,setCurrentTheme:n}=function(){const e=(0,Xe.L)();return{currentTheme:(0,a.computed)((()=>e.currentTheme)),setCurrentTheme:function(t){e.setCurrentTheme(t)}}}(),{config:i,isConfigLoaded:o}=(0,c.Z)(),s=(0,a.ref)(!1),r=(0,a.computed)({get:()=>t,set:e=>{n(e)}});return(0,a.watch)((()=>o.value),(()=>{const e=Object.keys(i.value.themes);s.value=e?.length>1??!1,e.includes(t.value)||n(e[0])})),{__sfc:!0,currentTheme:t,setCurrentTheme:n,config:i,isConfigLoaded:o,show:s,currentValue:r,getLogo:function(e){return e["--masthead-logo-img"]??i.value.logo_src},withPrefix:D.dq}}},Kf=Jf;const Xf=(0,m.Z)(Kf,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-card",{staticClass:"mr-3 overflow-auto",attrs:{show:n.show}},[t("b-form-radio-group",{model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}},e._l(n.config.themes,(function(i,o,a){return t("b-form-radio",{key:o,staticClass:"mb-2",attrs:{value:o}},[t("span",{staticClass:"font-weight-bold mb-1"},0===a?[e._v(" Default Theme ("+e._s(o)+"). ")]:[e._v("Theme: "+e._s(o))]),e._v(" "),t("div",{staticClass:"theme-masthead",style:i},[t("img",{attrs:{src:n.withPrefix(n.getLogo(i)),alt:"image"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"theme-color"},[e._v("Text")]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"theme-hover"},[e._v("Hover")]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"theme-active"},[e._v("Active")])])])})),1)],1)}),[],!1,null,"d6d2e0ba",null).exports;a.default.use(d.ZPm);const Qf={components:{UserActivityBarSettings:Ff,UserDeletion:Wf,UserPreferencesElement:Vf,ThemeSelector:Xf,UserBeaconSettings:$f,UserPreferredObjectStore:Gf},props:{userId:{type:String,required:!0},enableQuotas:{type:Boolean,required:!0}},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0);return{config:e,isConfigLoaded:t}},data:()=>({email:"",diskUsage:"",diskQuota:"",messageVariant:null,message:null,showLogoutModal:!1,showDataPrivateModal:!1,toggleActivityBar:!1,toggleTheme:!1}),computed:{...(0,o.rn)(Xe.L,["currentUser"]),activePreferences(){const e=Object.entries(Hf()).filter((e=>!e[1].disabled));return Object.fromEntries(e)},hasLogout(){return!!(0,l.Bz)().session_csrf_token&&!this.config.single_user},hasThemes(){const e=Object.keys(this.config.themes);return e?.length>1??!1},userPermissionsUrl:()=>(0,D.dq)("/user/permissions")},created(){const e=ga.Z.get("message"),t=ga.Z.get("status");e&&t&&(this.message=e,this.messageVariant=t),v.Z.get((0,D.dq)(`/api/users/${this.userId}`)).then((e=>{this.email=e.data.email,this.diskUsage=e.data.nice_total_disk_usage,this.diskQuota=e.data.quota}))},methods:{makeDataPrivate(){confirm((0,Ee.ZP)("WARNING: This will make all datasets (excluding library datasets) for which you have 'management' permissions, in all of your histories private, and will set permissions such that all of your new data in these histories is created as private.  Any datasets within that are currently shared will need to be re-shared or published.  Are you sure you want to do this?"))&&v.Z.post((0,D.dq)("/history/make_private?all_histories=true")).then((()=>{this.showDataPrivateModal=!0}))},signOut(){ff(!0)}}},em=Qf;const tm=(0,m.Z)(em,(function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"p-0",attrs:{fluid:""}},[t("h1",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"h-lg"},[e._v("User preferences")]),e._v(" "),t("b-alert",{attrs:{variant:e.messageVariant,show:!!e.message}},[e._v("\n        "+e._s(e.message)+"\n    ")]),e._v(" "),t("p",[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("You are signed in as")]),e._v(" "),t("strong",{attrs:{id:"user-preferences-current-email"}},[e._v(e._s(e.email))]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("and you are using")]),e._v(" "),t("strong",[e._v(e._s(e.diskUsage))]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("of disk space.")]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("If this is more than expected, please visit the")]),e._v(" "),t("router-link",{attrs:{id:"edit-preferences-cloud-auth",to:"/storage"}},[t("b",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Storage Dashboard")])]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("to free up disk space.")]),e._v(" "),e.enableQuotas?t("span",[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Your disk quota is:")]),e._v(" "),t("strong",[e._v(e._s(e.diskQuota))]),e._v(".\n        ")]):e._e()],1),e._v(" "),e._l(e.activePreferences,(function(e,n){return t("UserPreferencesElement",{key:n,attrs:{id:e.id,icon:e.icon,title:e.title,description:e.description,to:`/user/${n}`}})})),e._v(" "),t("UserPreferencesElement",{attrs:{id:"edit-preferences-api-key",icon:"fa-key",title:"Manage API Key",description:"Access your current API key or create a new one.",to:"/user/api_key"}}),e._v(" "),t("UserPreferencesElement",{attrs:{id:"edit-preferences-notifications",icon:"fa-bell",title:"Manage Notifications",description:"Manage your notification settings.",to:"/user/notifications/preferences"}}),e._v(" "),t("UserPreferencesElement",{attrs:{id:"edit-preferences-cloud-auth",icon:"fa-cloud",title:"Manage Cloud Authorization",description:"Add or modify the configuration that grants Galaxy to access your cloud-based resources.",to:"/user/cloud_auth"}}),e._v(" "),e.isConfigLoaded&&e.config.enable_oidc&&!e.config.fixed_delegated_auth?t("UserPreferencesElement",{attrs:{id:"manage-third-party-identities",icon:"fa-id-card-o",title:"Manage Third-Party Identities",description:"Connect or disconnect access to your third-party identities.",to:"/user/external_ids"}}):e._e(),e._v(" "),t("UserPreferencesElement",{attrs:{id:"edit-preferences-custom-builds",icon:"fa-cubes",title:"Manage Custom Builds",description:"Add or remove custom builds using history datasets.",to:"/custom_builds"}}),e._v(" "),t("UserPreferencesElement",{attrs:{icon:"fa-th-list",title:"Manage Activity Bar",description:"Click here to show or hide the activity bar.",badge:"New!"},on:{click:function(t){e.toggleActivityBar=!e.toggleActivityBar}}},[t("b-collapse",{model:{value:e.toggleActivityBar,callback:function(t){e.toggleActivityBar=t},expression:"toggleActivityBar"}},[t("UserActivityBarSettings")],1)],1),e._v(" "),e.hasThemes?t("UserPreferencesElement",{attrs:{icon:"fa-palette",title:"Pick a Color Theme",description:"Click here to change the user interface color theme.",badge:"New!"},on:{click:function(t){e.toggleTheme=!e.toggleTheme}}},[t("b-collapse",{model:{value:e.toggleTheme,callback:function(t){e.toggleTheme=t},expression:"toggleTheme"}},[t("ThemeSelector")],1)],1):e._e(),e._v(" "),e.isConfigLoaded&&!e.config.single_user?t("UserPreferencesElement",{attrs:{id:"edit-preferences-make-data-private",icon:"fa-lock",title:"Make All Data Private",description:"Click here to make all data private."},on:{click:e.makeDataPrivate}}):e._e(),e._v(" "),e.isConfigLoaded&&e.config.enable_beacon_integration?t("UserBeaconSettings",{attrs:{"user-id":e.userId}}):e._e(),e._v(" "),e.isConfigLoaded&&e.config.object_store_allows_id_selection&&e.currentUser?t("UserPreferredObjectStore",{attrs:{"preferred-object-store-id":e.currentUser.preferred_object_store_id,"user-id":e.userId}}):e._e(),e._v(" "),e.isConfigLoaded&&!e.config.single_user&&e.config.enable_account_interface?t("UserDeletion",{attrs:{email:e.email,"user-id":e.userId}}):e._e(),e._v(" "),e.hasLogout?t("UserPreferencesElement",{attrs:{id:"edit-preferences-sign-out",icon:"fa-sign-out",title:"Sign Out",description:"Click here to sign out of all sessions."},on:{click:function(t){e.showLogoutModal=!0}}}):e._e(),e._v(" "),t("b-modal",{attrs:{title:"Datasets are now private","title-class":"font-weight-bold","ok-only":""},model:{value:e.showDataPrivateModal,callback:function(t){e.showDataPrivateModal=t},expression:"showDataPrivateModal"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n            All of your histories and datasets have been made private. If you'd like to make all *future* histories\n            private please use the\n        ")]),e._v(" "),t("a",{attrs:{href:e.userPermissionsUrl}},[e._v("User Permissions")]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("interface")]),e._v(".\n    ")]),e._v(" "),t("b-modal",{attrs:{title:"Sign out","title-class":"font-weight-bold","ok-title":"Sign out"},on:{ok:e.signOut},model:{value:e.showLogoutModal,callback:function(t){e.showLogoutModal=t},expression:"showLogoutModal"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(" Do you want to continue and sign out of all active sessions? ")])])],2)}),[],!1,null,null,null).exports;const nm={components:{FormGeneric:sn},props:{formId:{type:String,required:!0}},computed:{formConfig(){const e=ga.Z.get("id");return Hf(e)[this.formId]}}};const im=(0,m.Z)(nm,(function(){var e=this;return(0,e._self._c)("FormGeneric",e._b({},"FormGeneric",e.formConfig,!1))}),[],!1,null,null,null).exports;const om={components:{DatasetProvider:P.zx},props:{datasetId:{type:String,required:!0}}};const am=(0,m.Z)(om,(function(){var e=this,t=e._self._c;return t("div",[t("DatasetProvider",{attrs:{id:e.datasetId},scopedSlots:e._u([{key:"default",fn:function({result:n}){return[n&&n.display_apps&&n.display_apps.length>0||n&&n.display_types&&n.display_types.length>0?t("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n            You can display your dataset with the following links:\n            "),t("div",{staticClass:"p-2"},[t("ol",[e._l(n.display_apps,(function(n,i){return t("li",{key:i},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(n.label))]),e._v(" "),e._l(n.links,(function(i,o){return t("span",{key:o},[0==o?t("span",[e._v("(")]):e._e(),e._v(" "),t("b-link",{attrs:{href:i.href,target:i.target}},[e._v(e._s(i.text))]),e._v(" "),o!=n.links.length-1?t("span",[e._v(", ")]):t("span",[e._v(")")])],1)}))],2)})),e._v(" "),e._l(n.display_types,(function(n,i){return t("li",{key:i},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(n.label))]),e._v(" "),e._l(n.links,(function(i,o){return t("span",{key:o},[0==o?t("span",[e._v("(")]):e._e(),e._v(" "),t("b-link",{attrs:{href:i.href,target:i.target}},[e._v(e._s(i.text))]),e._v(" "),o!=n.links.length-1?t("span",[e._v(", ")]):t("span",[e._v(")")])],1)}))],2)}))],2)]),e._v(" "),t("div",[e._v("or select a visualization from below.")])]):e._e()]}}])})],1)}),[],!1,null,null,null).exports;const sm={components:{DelayedInput:Z},props:{datasetId:{type:String,default:null}},data:()=>({plugins:[],hdas:[],search:"",selected:null,name:null,error:null,fixed:!1,titleSearchVisualizations:(0,Ee.ZP)("search visualizations"),titleCreateVisualization:(0,Ee.ZP)("Create Visualization"),titleSelectDataset:(0,Ee.ZP)("Select a dataset to visualize:")}),created(){let e=`${(0,g.getAppRoot)()}api/plugins`;this.datasetId&&(this.fixed=!0,this.selected=this.datasetId,e+=`?dataset_id=${this.datasetId}`),v.Z.get(e).then((e=>{this.plugins=e.data})).catch((e=>{this.error=this._errorMessage(e)}))},methods:{onSearch(e){this.search=e},select(e){if(this.fixed)this.create(e);else{const t=(0,l.Bz)(),n=t.currHistoryPanel&&t.currHistoryPanel.model.id;n?v.Z.get(`${(0,g.getAppRoot)()}api/plugins/${e.name}?history_id=${n}`).then((t=>{this.name=e.name,this.hdas=t.data&&t.data.hdas,this.hdas&&this.hdas.length>0&&(this.selected=this.hdas[0].id)})).catch((e=>{this.error=this._errorMessage(e)})):this.error="This option requires an accessible history."}},create(e){const t=`${e.href}?dataset_id=${this.selected}`;if("_top"==e.target)window.location.href=t;else{document.getElementById("galaxy_main").setAttribute("src",t)}},match(e){const t=this.search.toLowerCase();return!t||e.html.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)},_errorMessage:e=>e&&e.response&&e.response.data&&e.response.data.err_msg||"Request failed for an unknown reason."}};const rm={components:{PluginList:(0,m.Z)(sm,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"plugin-list"},[e.error?t("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):t("div",[t("DelayedInput",{staticClass:"mb-3",attrs:{query:e.search,placeholder:e.titleSearchVisualizations,delay:100},on:{change:e.onSearch}}),e._v(" "),e._l(e.plugins,(function(n){return t("div",{key:n.name},[e.match(n)?t("table",[t("tr",{staticClass:"plugin-list-item",attrs:{"data-plugin-name":n.name},on:{click:function(t){return e.select(n)}}},[t("td",[n.logo?t("img",{staticClass:"plugin-list-image",attrs:{alt:"ui thumbnails",src:n.logo}}):t("div",{staticClass:"plugin-list-icon fa fa-eye"})]),e._v(" "),t("td",[t("div",{staticClass:"plugin-list-title font-weight-bold"},[e._v(e._s(n.html))]),e._v(" "),t("div",{staticClass:"plugin-list-text"},[e._v(e._s(n.description))])])]),e._v(" "),e.fixed?e._e():t("tr",[t("td"),e._v(" "),n.name==e.name?t("td",[e.hdas&&e.hdas.length>0?t("div",[t("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.titleSelectDataset))]),e._v(" "),t("div",{staticClass:"ui-select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],staticClass:"select",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selected=t.target.multiple?n:n[0]}}},e._l(e.hdas,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v("\n                                        "+e._s(n.name)+"\n                                    ")])})),0),e._v(" "),t("div",{staticClass:"icon-dropdown fa fa-caret-down"})]),e._v(" "),t("button",{staticClass:"ui-button-default float-left mt-3 btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.create(n)}}},[t("i",{staticClass:"icon fa fa-check"}),e._v(" "),t("span",{staticClass:"title"},[e._v(e._s(e.titleCreateVisualization))])])]):t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"alert alert-danger"},[e._v("\n                            There is no suitable dataset in your current history which can be visualized with this\n                            plugin.\n                        ")])]):e._e()])]):e._e()])}))],2)])}),[],!1,null,"29e6d990",null).exports,DisplayApplications:am},props:{datasetId:{type:String,default:null}}};const lm=(0,m.Z)(rm,(function(){var e=this,t=e._self._c;return t("div",[e.datasetId?t("DisplayApplications",{attrs:{"dataset-id":e.datasetId}}):e._e(),e._v(" "),t("PluginList",{attrs:{"dataset-id":e.datasetId}})],1)}),[],!1,null,null,null).exports;const dm={components:{CenterFrame:Sp,PublishedItem:_s},props:{id:{type:String,required:!0}},data:()=>({visualization:{}}),computed:{getUrl(){return`/visualization/saved?id=${this.id}`}},created(){const e=`/api/visualizations/${this.id}`;(0,en.e)({url:e}).then((e=>{this.visualization=e}))}},cm=dm;const um=(0,m.Z)(cm,(function(){var e=this,t=e._self._c;return t("PublishedItem",{attrs:{item:e.visualization},scopedSlots:e._u([{key:"default",fn:function(){return[t("CenterFrame",{attrs:{src:e.getUrl}})]},proxy:!0}])})}),[],!1,null,null,null).exports;function hm(e,t,n){const{root:i,...o}=e,a=(0,Qd.BC)(o),s=`${i}api/invocations`;return v.Z.get(s,{params:{...a,...n}}).then((e=>{const n=e.data;return t&&t(e),n||[]}))}var pm=n(15737),fm=n(5870);const mm={components:{BButton:jn.T},directives:{VBTooltip:fm.o},props:{id:{type:String,required:!0},root:{type:String,required:!0}},computed:{title:()=>"Run workflow"},methods:{executeWorkflow(){this.$router.push(`/workflows/run?id=${this.id}`)}}};const _m=(0,m.Z)(mm,(function(){var e=this;return(0,e._self._c)("BButton",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"workflow-run btn-sm btn-primary fa fa-play",attrs:{title:e._f("localize")(e.title),"data-workflow-run":e.id},on:{click:function(t){return t.stopPropagation(),e.executeWorkflow.apply(null,arguments)}}})}),[],!1,null,null,null).exports,vm={components:{UtcDate:J.Z,WorkflowInvocationState:pm.default,WorkflowRunButton:_m},mixins:[tc],props:{noInvocationsMessage:{type:String,default:"No Workflow Invocations to display"},headerMessage:{type:String,default:""},ownerGrid:{type:Boolean,default:!0},userId:{type:String,default:null},historyId:{type:String,default:null},historyName:{type:String,default:null},storedWorkflowId:{type:String,default:null},storedWorkflowName:{type:String,default:null}},data(){const e=[{key:"expand",label:"",class:"col-button"}];return this.storedWorkflowId||e.push({key:"workflow_id",label:"Workflow",class:"col-name"}),this.historyId||e.push({key:"history_id",label:"History",class:"col-history"}),e.push({key:"create_time",label:"Invoked",class:"col-small",sortable:!0},{key:"state",class:"col-small"},{key:"execute",label:"Run",class:"col-button"}),{tableId:"invocation-list-table",dataProvider:hm,invocationItemsModel:[],invocationFields:e,perPage:this.rowsPerPage(this.defaultPerPage||50)}},computed:{...(0,o.rn)(Dc.I,["getStoredWorkflowByInstanceId","getStoredWorkflowIdByInstanceId","getStoredWorkflowNameByInstanceId"]),...(0,o.rn)(I.z,["getHistoryById","getHistoryNameById"]),title(){let e="Workflow Invocations";return this.storedWorkflowName&&(e+=` for workflow "${this.storedWorkflowName}"`),this.historyName&&(e+=` for history "${this.historyName}"`),e},effectiveNoInvocationsMessage(){let e=this.noInvocationsMessage;return this.storedWorkflowName&&(e+=` for ${this.storedWorkflowName}`),this.historyName&&(e+=` for ${this.historyName}`),e},dataProviderParameters(){const e=this.ownerGrid?{}:{include_terminal:!1};return this.storedWorkflowId&&(e.workflow_id=this.storedWorkflowId),this.historyId&&(e.history_id=this.historyId),this.userId&&(e.user_id=this.userId),e}},watch:{items:function(e){if(e){const t=new Set,n=new Set;e.forEach((e=>{t.add(e.history_id),n.add(e.workflow_id)})),t.forEach((e=>this.getHistoryById(e)||this.loadHistoryById(e))),n.forEach((e=>this.fetchWorkflowForInstanceIdCached(e)))}}},methods:{...(0,o.nv)(I.z,["loadHistoryById"]),...(0,o.nv)(Dc.I,["fetchWorkflowForInstanceIdCached"]),async provider(e){e.root=this.root;const t=this.ownerGrid?{}:{include_terminal:!1};this.storedWorkflowId&&(t.workflow_id=this.storedWorkflowId),this.historyId&&(t.history_id=this.historyId),this.userId&&(t.user_id=this.userId);const n=hm(e,this.setRows,t).catch(this.onError),i=await n;return this.invocationItems=i,i},swapRowDetails(e){e.toggleDetails()},switchHistory(e){(0,l.Bz)().currHistoryPanel.switchToHistory(e)}}},gm=vm;var ym=(0,m.Z)(gm,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"invocations-list",attrs:{"aria-labelledby":"invocations-title"}},[t("h1",{staticClass:"mb-3 h-lg",attrs:{id:"invocations-title"}},[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),e.headerMessage?t("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n        "+e._s(e.headerMessage)+"\n    ")]):e._e(),e._v(" "),t("b-alert",e._b({},"b-alert",e.alertAttrs,!1),[e._v(e._s(e.message))]),e._v(" "),t("b-table",e._b({staticClass:"invocations-table",attrs:{"no-sort-reset":"",fields:e.invocationFields},scopedSlots:e._u([{key:"empty",fn:function(){return[e.loading?t("loading-span",{attrs:{message:"Loading workflow invocations"}}):t("b-alert",{attrs:{id:"no-invocations",variant:"info",show:""}},[e._v("\n                "+e._s(e.effectiveNoInvocationsMessage)+"\n            ")])]},proxy:!0},{key:"row-details",fn:function(n){return[t("b-card",[t("small",{staticClass:"float-right",attrs:{"data-invocation-id":n.item.id}},[t("b",[e._v("Last updated: "),t("UtcDate",{attrs:{date:n.item.update_time,mode:"elapsed"}}),e._v(";")],1),e._v(" "),t("b",[e._v("Invocation ID: "),t("code",[e._v(e._s(n.item.id))])])]),e._v(" "),t("WorkflowInvocationState",{attrs:{"invocation-id":n.item.id},on:{"invocation-cancelled":e.refresh}})],1)]}},{key:"cell(expand)",fn:function(n){return[n.detailsShowing?e._e():t("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn-sm fa fa-lg fa-chevron-down toggle-invocation-details",attrs:{title:"Show Details"},on:{click:function(t){return t.stopPropagation(),e.swapRowDetails(n)}}}),e._v(" "),n.detailsShowing?t("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn-sm fa fa-lg fa-chevron-up toggle-invocation-details",attrs:{title:"Hide Details"},on:{click:function(t){return t.stopPropagation(),e.swapRowDetails(n)}}}):e._e()]}},{key:"cell(workflow_id)",fn:function(n){return[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"truncate",attrs:{title:e.getStoredWorkflowNameByInstanceId(n.item.workflow_id)}},[t("b-link",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.swapRowDetails(n)}}},[e._v("\n                    "+e._s(e.getStoredWorkflowNameByInstanceId(n.item.workflow_id))+"\n                ")])],1)]}},{key:"cell(history_id)",fn:function(n){return[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.html",modifiers:{hover:!0,top:!0,html:!0}}],staticClass:"truncate",attrs:{title:`<b>Switch to</b><br>${e.getHistoryNameById(n.item.history_id)}`}},[t("b-link",{attrs:{id:"switch-to-history",href:"#"},on:{click:function(t){return t.stopPropagation(),e.switchHistory(n.item.history_id)}}},[e._v("\n                    "+e._s(e.getHistoryNameById(n.item.history_id))+"\n                ")])],1)]}},{key:"cell(create_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"cell(update_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"cell(execute)",fn:function(n){return[e.getStoredWorkflowIdByInstanceId(n.item.workflow_id)?t("WorkflowRunButton",{attrs:{id:e.getStoredWorkflowIdByInstanceId(n.item.workflow_id),root:e.root}}):e._e()]}}]),model:{value:e.invocationItemsModel,callback:function(t){e.invocationItemsModel=t},expression:"invocationItemsModel"}},"b-table",e.indexTableAttrs,!1)),e._v(" "),e.rows>=e.perPage?t("b-pagination",e._b({staticClass:"gx-invocations-grid-pager",model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}},"b-pagination",e.paginationAttrs,!1)):e._e()],1)}),[],!1,null,"76febd68",null);const bm=ym.exports,wm=(0,a.defineComponent)({__name:"HistoryInvocations",props:{historyId:null},setup(e){const t=e,{currentUser:n}=(0,o.Jk)((0,Xe.L)()),{getHistoryNameById:i}=(0,I.z)(),s=(0,a.computed)((()=>i(t.historyId)));return{__sfc:!0,props:t,currentUser:n,getHistoryNameById:i,historyName:s,InvocationsList:bm}}});const km=(0,m.Z)(wm,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.currentUser&&n.historyName?t(n.InvocationsList,{attrs:{"user-id":n.currentUser.id,"history-id":e.historyId,"history-name":n.historyName}}):e._e()],1)}),[],!1,null,null,null).exports;const Cm=new Map([["error","danger"],["success","success"]]);function xm(e,t=!1){var n,i,o;return t?{path:"/workflows/run",query:{id:e.id}}:{path:"/workflows/list",query:{message:null!==(n=e.message)&&void 0!==n?n:"Import Successful",status:null!==(o=Cm.get(null!==(i=e.status)&&void 0!==i?i:""))&&void 0!==o?o:"success"}}}class Sm{async copyWorkflow(e){const t=(0,l.Bz)(),n=(0,D.dq)(`/api/workflows/${e.id}/download`);try{const i=(await v.Z.get(n)).data,o=e.owner;let a=`Copy of ${e.name}`;o!=t.user.attributes.username&&(a+=` shared by user ${o}`),i.name=a;const s=(0,D.dq)("/api/workflows"),r=(await v.Z.post(s,{workflow:i})).data;return this._addAttributes(r),r}catch(e){(0,y.t)(e)}}async createWorkflow(e){const t=(0,D.dq)("/api/workflows");try{const{data:n}=await v.Z.post(t,{workflow:Ah(e.id,e)});return n}catch(e){(0,y.t)(e)}}async deleteWorkflow(e){const t=(0,D.dq)(`/api/workflows/${e}`);try{return(await v.Z.delete(t)).data}catch(e){(0,y.t)(e)}}async undeleteWorkflow(e){const t=(0,D.dq)(`/api/workflows/${e}/undelete`);try{return(await v.Z.post(t)).data}catch(e){(0,y.t)(e)}}async updateWorkflow(e,t){const n=(0,D.dq)(`/api/workflows/${e}`);try{return(await v.Z.put(n,t)).data}catch(e){(0,y.t)(e)}}_addAttributes(e){const t=(0,l.Bz)();if(e.shared=e.owner!==t.user.attributes.username,e.description="",e.annotations&&e.annotations.length>0){const t=e.annotations[0].trim();t&&(e.description=t)}}async getTrsServers(){const e=(0,D.dq)("/api/trs_consume/servers");try{return(await v.Z.get(e)).data}catch(e){(0,y.t)(e)}}async getTrsTool(e,t){t=btoa(t);const n=(0,D.dq)(`/api/trs_consume/${e}/tools/${t}?tool_id_b64_encoded=true`);try{return(await v.Z.get(n)).data}catch(e){(0,y.t)(e)}}async importTrsTool(e,t,n){const i={archive_source:"trs_tool",trs_server:e,trs_tool_id:t,trs_version_id:n},o=(0,D.dq)("/api/workflows");try{return(await v.Z.post(o,i)).data}catch(e){(0,y.t)(e)}}async importTrsToolFromUrl(e){const t={archive_source:"trs_tool",trs_url:e},n=(0,D.dq)("/api/workflows");try{return(await v.Z.post(n,t)).data}catch(e){(0,y.t)(e)}}}var Mm=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Tm=(0,a.defineComponent)({__name:"TrsServerSelection",props:{queryTrsServer:null,trsSelection:null},emits:["onError","onTrsSelection"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(!0),o=(0,a.ref)(null),s=(0,a.ref)([]),r=(0,a.ref)(null),l=(0,a.computed)((()=>s.value.length>1));(0,a.watch)(n,(()=>{var e;o.value=null!==(e=n.trsSelection)&&void 0!==e?e:null}));const d=new Sm;function c(){return Mm(this,void 0,void 0,(function*(){const e=yield d.getTrsServers(),a=n.queryTrsServer;if(s.value=e,a)for(const t of e){if(t.id==a){r.value=t;break}if(h(t.api_url,a)){r.value=t;break}if(h(t.link_url,a)){r.value=t;break}}null===r.value&&(a&&t("onError","Failed to find requested TRS server "+a),r.value=e[0]),o.value=r.value,i.value=!1,u(r.value)}))}function u(e){o.value=e,t("onTrsSelection",e)}function h(e,t){return(e=e.replace(/^https?:\/\//,"").replace(/\/$/,""))===(t=t.replace(/^https?:\/\//,"").replace(/\/$/,""))}return c(),{__sfc:!0,props:n,emit:t,loading:i,selection:o,trsServers:s,trsSelectionLookup:r,showDropdown:l,services:d,configureTrsServers:c,onTrsSelection:u,possibleServeUrlsMatch:h}}}),Lm=Tm;const Dm=(0,m.Z)(Lm,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.loading?e._e():t("span",{staticClass:"m-1 text-muted"},[n.showDropdown?t("span",{staticClass:"dropdown"},[t("b-link",{staticClass:"font-weight-bold",attrs:{id:"dropdownTrsServer","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n            "+e._s(n.selection?.label)+"\n            "),t("span",{staticClass:"fa fa-caret-down"})]),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownTrsServer"}},e._l(n.trsServers,(function(i){return t("a",{key:i.id,staticClass:"dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(e){return e.preventDefault(),n.onTrsSelection(i)}}},[e._v(e._s(i.label))])})),0)],1):t("span",[t("b-link",{staticClass:"font-weight-bold",attrs:{href:n.selection?.link_url,target:"_blank",title:n.selection?.doc}},[e._v("\n            "+e._s(n.selection?.label)+"\n        ")])],1)])}),[],!1,null,"712cc46c",null).exports;const Em=(0,a.defineComponent)({__name:"TrsTool",props:{trsTool:null},emits:["onImport"],setup:(e,{emit:t})=>({__sfc:!0,props:e,emit:t,importVersion:function(e){const n=e.id.includes(`:${e.name}`)?e.name:e.id;t("onImport",n)}})}),Om=Em;const Am=(0,m.Z)(Om,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("div",[t("b",[e._v("Name:")]),e._v(" "),t("span",[e._v(e._s(n.props.trsTool.name))])]),e._v(" "),t("div",[t("b",[e._v("Description:")]),e._v(" "),t("span",[e._v(e._s(n.props.trsTool.description))])]),e._v(" "),t("div",[t("b",[e._v("Organization")]),e._v(" "),t("span",[e._v(e._s(n.props.trsTool.organization))])]),e._v(" "),t("div",[t("b",[e._v("Versions")]),e._v(" "),t("ul",e._l(n.props.trsTool.versions,(function(i){return t("li",{key:i.id},[t("b-button",{staticClass:"m-1 workflow-import",attrs:{"data-version-name":i.name},on:{click:function(e){return n.importVersion(i)}}},[e._v("\n                    "+e._s(i.name)+"\n                    "),t("icon",{attrs:{icon:"upload"}})],1)],1)})),0)])])}),[],!1,null,null,null).exports;const Im=(0,a.defineComponent)({__name:"TrsUrlImport",props:{queryTrsUrl:{type:String,default:null}},emits:["onImport"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(n.queryTrsUrl),o=(0,a.computed)((()=>!i.value)),s=(0,a.computed)((()=>o.value?"You must provide a TRS URL.":"Import workflow from TRS URL"));return i.value&&t("onImport",i.value),{__sfc:!0,props:n,trsUrl:i,isImportDisabled:o,importTooltip:s,emit:t,submit:function(e){e.preventDefault(),t("onImport",i.value)}}}}),Pm=Im;const Rm=(0,m.Z)(Pm,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-form",{staticClass:"mt-4",on:{submit:n.submit}},[t("h2",{staticClass:"h-sm"},[e._v("alternatively, provide a TRS URL directly")]),e._v(" "),t("b-form-group",{attrs:{label:"TRS URL:","label-class":"font-weight-bold"}},[t("b-form-input",{attrs:{id:"trs-import-url-input","aria-label":"TRS URL",type:"url"},model:{value:n.trsUrl,callback:function(e){n.trsUrl=e},expression:"trsUrl"}}),e._v("\n        If the workflow is accessible via a TRS URL, enter the URL above and click Import.\n    ")],1),e._v(" "),t("b-button",{attrs:{id:"trs-url-import-button",type:"submit",disabled:n.isImportDisabled,title:n.importTooltip,variant:"primary"}},[e._v("\n        Import workflow\n    ")])],1)}),[],!1,null,null,null).exports;var jm=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Ym=(0,a.defineComponent)({__name:"TrsImport",props:{queryTrsServer:{type:String,default:null},queryTrsId:{type:String,default:null},queryTrsVersionId:{type:String,default:null},queryTrsUrl:{type:String,default:null},isRun:{type:Boolean,default:!1}},setup(e){const t=e,n=(0,a.ref)(null),i=(0,a.ref)(!1),s=(0,a.ref)(!1),r=(0,a.ref)(null),l=(0,a.ref)(null),d=(0,a.ref)(t.queryTrsId),{isAnonymous:c}=(0,o.Jk)((0,Xe.L)()),u=(0,a.ref)(Boolean(t.queryTrsVersionId&&t.queryTrsServer&&t.queryTrsId||t.queryTrsUrl)),h=(0,a.computed)((()=>{var e;return(null===(e=d.value)||void 0===e?void 0:e.trim())||null})),p=(0,a.computed)((()=>null!=l.value));(0,a.watch)(h,(()=>{m()}));const f=new Sm;function m(){return jm(this,void 0,void 0,(function*(){if(n.value=null,l.value=null,r.value&&h.value){i.value=!0;try{const e=yield f.getTrsTool(r.value.id,h.value);if(n.value=e,u.value){let e="name";const i=n.value.versions.find((n=>n.name===t.queryTrsVersionId||(n.id===t.queryTrsVersionId?(e="id",!0):void 0)));i?v(r.value.id,n.value.id,i[e],t.isRun):(oo.FN.warning(`Specified version: ${t.queryTrsVersionId} doesn't exist`),u.value=!1)}}catch(e){n.value=null,l.value=e}finally{i.value=!1}}}))}const _=(0,Nn.tv)();function v(e,t,n,i=!1){return jm(this,void 0,void 0,(function*(){if(e&&t){s.value=!0,l.value=null;try{const o=xm(yield f.importTrsTool(e,t,n),i);_.push(o)}catch(e){l.value=e||"Import failed for an unknown reason."}finally{s.value=!1}}else l.value="Import Failed. Unknown Id"}))}return{__sfc:!0,props:t,trsTool:n,loading:i,importing:s,trsSelection:r,errorMessage:l,toolId:d,isAnonymous:c,isAutoImport:u,toolIdTrimmed:h,hasErrorMessage:p,services:f,onToolId:m,onTrsSelection:function(e){r.value=e,h.value&&m()},onTrsSelectionError:function(e){l.value=e},router:_,importVersion:v,importVersionFromUrl:function(e,t=!1){return jm(this,void 0,void 0,(function*(){s.value=!0,l.value=null;try{const n=xm(yield f.importTrsToolFromUrl(e),t);_.push(n)}catch(e){l.value=e||"Import failed for an unknown reason."}finally{s.value=!1}}))},TrsServerSelection:Dm,TrsTool:Am,TrsUrlImport:Rm,LoadingSpan:z.Z}}});const Hm=(0,m.Z)(Ym,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"workflow-import-trs-id"},[n.isAnonymous?t("b-alert",{staticClass:"text-center my-2",attrs:{show:"",variant:"danger"}},[e._v("\n        Anonymous user cannot import workflows, please register or log in\n    ")]):t("b-card",{attrs:{title:"GA4GH Tool Registry Server (TRS) Workflow Import"}},[t("div",[t("b",[e._v("TRS Server:")]),e._v(" "),t(n.TrsServerSelection,{attrs:{"trs-selection":n.trsSelection,"query-trs-server":n.props.queryTrsServer},on:{onError:n.onTrsSelectionError,onTrsSelection:n.onTrsSelection}})],1),e._v(" "),n.isAutoImport&&!n.hasErrorMessage?t("b-alert",{attrs:{show:"",variant:"info"}},[t(n.LoadingSpan,{attrs:{message:"Loading your Workflow"}})],1):t("div",[t("div",{staticClass:"my-3"},[t("b-form-group",{attrs:{label:"TRS ID:","label-for":"trs-id-input","label-class":"font-weight-bold"}},[t("b-form-input",{attrs:{id:"trs-id-input",debounce:"500"},model:{value:n.toolId,callback:function(e){n.toolId=e},expression:"toolId"}})],1)],1),e._v(" "),t("div",[n.loading?t("b-alert",{attrs:{show:"",variant:"info"}},[t(n.LoadingSpan,{attrs:{message:`Loading ${n.toolIdTrimmed}, this may take a while - please be patient`}})],1):e._e(),e._v(" "),t("b-alert",{attrs:{show:n.hasErrorMessage,variant:"danger"}},[e._v(e._s(n.errorMessage))]),e._v(" "),n.importing?t("b-alert",{attrs:{show:"",variant:"info"}},[t(n.LoadingSpan,{attrs:{message:"Importing workflow"}})],1):e._e()],1),e._v(" "),n.trsTool?t(n.TrsTool,{attrs:{"trs-tool":n.trsTool},on:{onImport:e=>n.importVersion(n.trsSelection?.id,n.trsTool?.id,e)}}):e._e()],1),e._v(" "),t("hr"),e._v(" "),t("div",[t(n.TrsUrlImport,{attrs:{"query-trs-url":n.props.queryTrsUrl},on:{onImport:t=>n.importVersionFromUrl(t,e.isRun)}})],1)],1)],1)}),[],!1,null,null,null).exports;var Nm=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Fm=(0,a.defineComponent)({__name:"TrsSearch",setup(e){const t=(0,a.ref)(""),n=(0,a.ref)([]),i=(0,a.ref)(""),o=(0,a.ref)(!1),s=(0,a.ref)(!1),r=(0,a.ref)(null),l=(0,a.ref)(null),d=(0,a.computed)((()=>null!=l.value)),c=(0,a.computed)((()=>p(n.value))),u=(0,a.computed)((()=>"Search by workflow description. Tags (key:value) can be used to also search by metadata - for instance name:example. Available tags include organization and name.")),h=new Sm;function p(e){return e.map((e=>({id:e.id,name:e.name,description:e.description,data:e,_showDetails:!1})))}(0,a.watch)(t,(()=>Nm(this,void 0,void 0,(function*(){if(""==t.value)n.value=[];else{o.value=!0;try{const e=yield v.Z.get((0,D.dq)(`/api/trs_search?query=${t.value}&trs_server=${i.value}`));n.value=e.data}catch(e){l.value=e}o.value=!1}}))));const f=(0,Nn.tv)();return{__sfc:!0,fields:[{key:"name",label:"Name"},{key:"description",label:"Description"},{key:"organization",label:"Organization"}],query:t,results:n,trsServer:i,loading:o,importing:s,trsSelection:r,errorMessage:l,hasErrorMessage:d,itemsComputed:c,searchHelp:u,services:h,onTrsSelection:function(e){r.value=e,i.value=e.id,t.value=""},onTrsSelectionError:function(e){l.value=e},showRowDetails:function(e,t,n){var i;"A"!==(null===(i=n.target)||void 0===i?void 0:i.nodeName)&&(e._showDetails=!e._showDetails)},computeItems:p,router:f,importVersion:function(e,t,n,i=!1){return Nm(this,void 0,void 0,(function*(){if(e&&t){s.value=!0,l.value=null;try{const o=xm(yield h.importTrsTool(e,t,n),i);f.push(o)}catch(e){l.value=e||"Import failed for an unknown reason."}s.value=!1}else l.value="Import Failed. Unknown Id"}))},BCard:vi._,TrsServerSelection:Dm,TrsTool:Am,LoadingSpan:z.Z}}}),Bm=Fm;var $m=(0,m.Z)(Bm,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BCard,{staticClass:"workflow-import-trs-search",attrs:{title:"GA4GH Tool Registry Server (TRS) Workflow Search"}},[t("b-alert",{attrs:{show:n.hasErrorMessage,variant:"danger"}},[e._v(e._s(n.errorMessage))]),e._v(" "),t("div",{staticClass:"mb-3"},[t("b",[e._v("TRS Server:")]),e._v(" "),t(n.TrsServerSelection,{attrs:{"trs-selection":n.trsSelection},on:{onTrsSelection:n.onTrsSelection,onError:n.onTrsSelectionError}})],1),e._v(" "),t("div",[t("b-input-group",{staticClass:"mb-3"},[t("b-form-input",{attrs:{id:"trs-search-query",debounce:"500",placeholder:"search query","data-description":"filter text input"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;n.query=""}},model:{value:n.query,callback:function(e){n.query=e},expression:"query"}}),e._v(" "),t("b-input-group-append",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{placement:"bottom",size:"sm","data-description":"show help toggle",title:n.searchHelp}},[t("icon",{attrs:{icon:"question"}})],1),e._v(" "),t("b-button",{attrs:{size:"sm",title:"clear search"},on:{click:function(e){n.query=""}}},[t("icon",{attrs:{icon:"times"}})],1)],1)],1)],1),e._v(" "),t("div",[n.loading?t("b-alert",{attrs:{variant:"info",show:""}},[t(n.LoadingSpan,{attrs:{message:`Searching for ${n.query}, this may take a while - please be patient`}})],1):n.query?0==n.results.length?t("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n            No search results found, refine your search.\n        ")]):t("b-table",{attrs:{fields:n.fields,items:n.itemsComputed,hover:"",striped:"","caption-top":"",busy:n.loading},on:{"row-clicked":n.showRowDetails},scopedSlots:e._u([{key:"row-details",fn:function(i){return[t(n.BCard,[n.importing?t("b-alert",{attrs:{variant:"info",show:""}},[t(n.LoadingSpan,{attrs:{message:"Importing workflow"}})],1):e._e(),e._v(" "),t(n.TrsTool,{attrs:{"trs-tool":i.item.data},on:{onImport:e=>n.importVersion(n.trsSelection?.id,i.item.data.id,e)}})],1)]}}])}):t("b-alert",{attrs:{variant:"info",show:""}},[e._v(" Enter search query to begin search. ")])],1)],1)}),[],!1,null,null,null);const zm=$m.exports;a.default.use(d.ZPm);const Wm={components:{Markdown:Ru},props:{invocationId:{type:String,required:!0}},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0);return{config:e,isConfigLoaded:t}},data:()=>({markdownConfig:{},invocationMarkdown:null}),computed:{dataUrl(){return`/api/invocations/${this.invocationId}/report`},exportUrl(){return`${this.dataUrl}.pdf`}},created(){const e=this.dataUrl;(0,en.e)({url:e}).then((e=>{this.markdownConfig=e,this.invocationMarkdown=e.invocation_markdown})).catch((e=>{oo.FN.error(`Failed to load invocation markdown: ${e}`)}))},methods:{onEdit(){window.location=(0,D.dq)(`/pages/create?invocation_id=${this.invocationId}`)},stsUrl(e){return`${this.dataUrl}/prepare_download`}}},Um=Wm;const Vm=(0,m.Z)(Um,(function(){var e=this,t=e._self._c;return e.isConfigLoaded?t("Markdown",{attrs:{"markdown-config":e.markdownConfig,enable_beta_markdown_export:e.config.enable_beta_markdown_export,"export-link":e.exportUrl,"download-endpoint":e.stsUrl(e.config)},on:{onEdit:e.onEdit}}):e._e()}),[],!1,null,null,null).exports;function qm(e,t,n={}){const{root:i,...o}=e,a=`${i}api/workflows`,s=(0,Qd.BC)(o);return v.Z.get(a,{params:{...s,...n}}).then((e=>{const n=e.data;return t&&t(e),n||[]}))}const Zm=(0,pe.F)((async function({storedWorkflowId:e}){const t=`${(0,g.getAppRoot)()}api/workflows/${e}`;try{const{data:e}=await v.Z.get(t);return e}catch(e){(0,y.t)(e)}})),Gm={components:{InvocationsList:bm,StoredWorkflowDetailsProvider:Zm},props:{storedWorkflowId:{type:String,required:!0}},computed:{...(0,o.rn)(Xe.L,["currentUser"])}};const Jm=(0,m.Z)(Gm,(function(){var e=this,t=e._self._c;return t("StoredWorkflowDetailsProvider",{attrs:{"stored-workflow-id":e.storedWorkflowId},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i}){return[!i&&e.currentUser.id?t("InvocationsList",{attrs:{"user-id":e.currentUser.id,"stored-workflow-id":n.id,"stored-workflow-name":n.name}}):e._e()]}}])})}),[],!1,null,null,null).exports;const Km={components:{InvocationsList:bm},computed:{...(0,o.rn)(Xe.L,["currentUser"])}};const Xm=(0,m.Z)(Km,(function(){var e=this,t=e._self._c;return e.currentUser?.id?t("InvocationsList",{attrs:{"user-id":e.currentUser.id}}):e._e()}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const Qm={components:{LoadingSpan:z.Z},props:{id:{type:String,required:!0}},data:()=>({error:null,workflow:null}),computed:{downloadUrl(){return(0,D.dq)(`/api/workflows/${this.workflow.id}/download?format=json-download`)},importUrl(){const e=window.location,t=(0,D.dq)(`/u/${this.workflow.owner}/w/${this.workflow.slug}/json`);return`${e.protocol}//${e.host}${t}`},svgUrl(){return(0,D.dq)(`/workflow/gen_image?id=${this.workflow.id}`)}},watch:{id(){this.getWorkflow()}},created(){this.getWorkflow()},methods:{getWorkflow(){const e=`/api/workflows/${this.id}`;(0,en.e)({url:e}).then((e=>{this.workflow=e,this.error=null})).catch((e=>{this.error=e||"Loading workflow failed."}))}}};const e_=(0,m.Z)(Qm,(function(){var e=this,t=e._self._c;return t("div",[e.workflow?t("div",[t("h1",{staticClass:"mb-4 h-lg"},[e._v("Workflow Export of `"+e._s(e.workflow.name)+"`")]),e._v(" "),e.workflow.importable&&e.workflow.slug?t("div",[t("a",{attrs:{href:e.importUrl}},[e._v(e._s(e.importUrl))]),e._v(" "),e._m(0),e._v(" "),t("hr")]):t("b-alert",{attrs:{variant:"info",show:""}},[e._v('\n            This workflow is not accessible. Please use the sharing option to "Make Workflow Accessible and Publish"\n            to obtain a URL for importing to another Galaxy.\n        ')]),e._v(" "),t("a",{attrs:{href:e.downloadUrl}},[e._v("Download Workflow")]),e._v(" "),e._m(1),e._v(" "),t("hr"),e._v(" "),t("a",{attrs:{href:e.svgUrl}},[e._v("Create Image")]),e._v(" "),e._m(2)],1):e.error?t("b-alert",{attrs:{variant:"danger",show:""}},[t("span",[e._v("\n            "+e._s(e.error)+". Click\n            "),t("router-link",{staticClass:"require-login-link",attrs:{to:"/login/start"}},[e._v("here")]),e._v("\n            to login.\n        ")],1)]):t("LoadingSpan",{attrs:{message:"Loading workflow"}})],1)}),[function(){var e=this._self._c;return e("div",[e("small",[this._v("\n                    Use this URL to import the workflows directly into another Galaxy server. You can copy it into\n                    the input field titled when importing a workflow.\n                ")])])},function(){var e=this._self._c;return e("div",[e("small",{staticClass:"text-muted"},[this._v("\n                Downloads a file which can be saved or imported into another Galaxy server.\n            ")])])},function(){var e=this._self._c;return e("div",[e("small",{staticClass:"text-muted"},[this._v(" Download an image of the workflow in SVG format. ")])])}],!1,null,null,null).exports;var t_=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const n_=(0,a.defineComponent)({__name:"FromFileOrUrl",setup(e){const t=(0,a.ref)(!1),n=(0,a.ref)(null),i=(0,a.ref)(null),o=(0,a.ref)(null),s=(0,a.computed)((()=>!i.value&&!n.value)),r=(0,a.computed)((()=>s.value?"You must provide a workflow archive URL or file.":n.value?"Import workflow from URL":"Import workflow from File")),l=(0,a.computed)((()=>null!=o.value));function d(e){const t=e.match(/^(https?:\/\/[\S]+\/u\/[\S]+\/w\/[^\s/]+)\/?$/),n=null==t?void 0:t[1];return n?`${n}/json`:e}const c=(0,Nn.tv)();return{__sfc:!0,loading:t,sourceURL:n,sourceFile:i,errorMessage:o,acceptedWorkflowFormats:".ga, .yml",isImportDisabled:s,importTooltip:r,hasErrorMessage:l,autoAppendJson:d,router:c,submit:function(e){var a,s;return t_(this,void 0,void 0,(function*(){e.preventDefault();const r=new FormData;if(i.value&&r.append("archive_file",i.value),n.value){const e=d(n.value);r.append("archive_source",e)}t.value=!0;try{const e=xm((yield v.Z.post((0,D.dq)("/api/workflows"),r)).data);c.push(e)}catch(e){let t=null;v.Z.isAxiosError(e)&&(t=null===(s=null===(a=e.response)||void 0===a?void 0:a.data)||void 0===s?void 0:s.err_msg),o.value=t||"Import failed for an unknown reason."}finally{t.value=!1}}))},LoadingSpan:z.Z}}});const i_=(0,m.Z)(n_,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-form",{staticClass:"mt-4 workflow-import-file",on:{submit:n.submit}},[t("h2",{staticClass:"h-sm"},[e._v("Import from a Galaxy workflow export URL or a workflow file")]),e._v(" "),t("b-form-group",{attrs:{label:"Archived Workflow URL"}},[t("b-form-input",{attrs:{id:"workflow-import-url-input","aria-label":"Workflow Import URL",type:"url"},model:{value:n.sourceURL,callback:function(e){n.sourceURL=e},expression:"sourceURL"}}),e._v("\n        If the workflow is accessible via a URL, enter the URL above and click Import.\n    ")],1),e._v(" "),t("b-form-group",{attrs:{label:"Archived Workflow File"}},[t("b-form-file",{attrs:{accept:n.acceptedWorkflowFormats},model:{value:n.sourceFile,callback:function(e){n.sourceFile=e},expression:"sourceFile"}}),e._v("\n        If the workflow is in a file on your computer, choose it and then click Import.\n    ")],1),e._v(" "),t("b-alert",{attrs:{show:n.hasErrorMessage,variant:"danger"}},[e._v(e._s(n.errorMessage))]),e._v(" "),n.loading?t("b-alert",{attrs:{show:"",variant:"info"}},[t(n.LoadingSpan,{attrs:{message:"Loading your workflow, this may take a while - please be patient."}})],1):e._e(),e._v(" "),t("b-button",{attrs:{id:"workflow-import-button",type:"submit",disabled:n.isImportDisabled,title:n.importTooltip,variant:"primary"}},[e._v("\n        Import workflow\n    ")])],1)}),[],!1,null,null,null).exports,o_={__name:"WorkflowImport",setup:e=>({__sfc:!0,FromFileOrUrl:i_,TrsImport:Hm,TrsSearch:zm})};const a_=(0,m.Z)(o_,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("section",[t("h1",{staticClass:"h-lg"},[e._v("Import workflow")]),e._v(" "),t("b-tabs",{attrs:{fill:""}},[t("b-tab",{attrs:{"title-link-class":"workflow-import-file-link",title:"Archived file or url",active:""}},[t(n.FromFileOrUrl)],1),e._v(" "),t("b-tab",{attrs:{"title-link-class":"workflow-import-trs-search-link",title:"GA4GH servers"}},[t("div",{staticClass:"mt-4"},[t("h2",{staticClass:"h-sm"},[e._v("Import a Workflow from Configured GA4GH Tool Registry Servers (e.g. Dockstore)")]),e._v(" "),t(n.TrsSearch)],1)]),e._v(" "),t("b-tab",{attrs:{"title-link-class":"workflow-import-trs-id-link",title:"TRS ID"}},[t("div",{staticClass:"mt-4"},[t("h2",{staticClass:"h-sm"},[e._v("Import from a TRS ID")]),e._v(" "),t(n.TrsImport)],1)])],1)],1)}),[],!1,null,null,null).exports;u.vI.add(h.Tab,zo.T);const s_={components:{BLink:Yn.we,FontAwesomeIcon:p.GN},directives:{VBTooltip:fm.o},props:{checked:{type:Boolean,required:!0}},computed:{title(){return this.checked?"Remove bookmark":"Add a bookmark. This workflow will appear in the left tool panel."}},methods:{onClick(){this.$emit("bookmark",!this.checked)}}};const r_=(0,m.Z)(s_,(function(){var e=this,t=e._self._c;return t("BLink",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"workflow-bookmark-link",attrs:{title:e.title},on:{click:e.onClick}},[e.checked?t("FontAwesomeIcon",{attrs:{icon:["fas","star"]}}):t("FontAwesomeIcon",{attrs:{icon:["far","star"]}})],1)}),[],!1,null,null,null).exports;const l_=(0,a.defineComponent)({__name:"TextSummary",props:{description:{type:String,required:!0},showDetails:{type:Boolean,default:!1},maxLength:{type:Number,default:150}},emits:["update:show-details"],setup(e,{emit:t}){const n=e,i=(0,a.computed)({get:()=>n.showDetails,set:e=>{t("update:show-details",e)}});u.vI.add(h.mTx,h.ptq);const o=Math.round(n.maxLength-n.maxLength/2),s=(0,a.computed)((()=>n.description.length>n.maxLength)),r=(0,a.computed)((()=>n.description.length>n.maxLength?n.description.slice(0,o):n.description));return{__sfc:!0,props:n,emit:t,propShowDetails:i,collapsedEnableIcon:"fas fa-chevron-down",collapsedDisableIcon:"fas fa-chevron-up",x:o,summary:s,text:r,FontAwesomeIcon:p.GN}}}),d_=l_;const c_=(0,m.Z)(d_,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[e._v("\n    "+e._s(n.text)+"\n    "),n.summary?t("span",[n.propShowDetails?t("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){e.stopPropagation(),n.propShowDetails=!1}}},[e._v("\n            ... "),t(n.FontAwesomeIcon,{attrs:{icon:n.collapsedDisableIcon}})],1):t("a",{staticClass:"text-summary-expand",attrs:{href:"javascript:void(0)"},on:{click:function(e){e.stopPropagation(),n.propShowDetails=!0}}},[e._v("\n            ... "),t(n.FontAwesomeIcon,{attrs:{icon:n.collapsedEnableIcon}})],1)]):e._e()])}),[],!1,null,null,null).exports;var u_=n(36594);u.vI.add(h.eW2),u.vI.add(h.Cuc),u.vI.add(h.NBC),u.vI.add(h.Xcf);const h_={components:{TextSummary:c_},props:{workflow:{type:Object,required:!0},detailsShowing:{type:Boolean,default:!1}},computed:{...(0,o.rn)(Xe.L,["isAnonymous"]),showDetails:{get(){return this.detailsShowing},set(){this.$emit("toggleDetails")}},urlEdit(){return`/workflows/edit?id=${this.workflow.id}`},urlDownload(){return(0,D.dq)(`/api/workflows/${this.workflow.id}/download?format=json-download`)},urlShare(){return`/workflows/sharing?id=${this.workflow.id}`},urlExport(){return(0,D.dq)(`/workflows/export?id=${this.workflow.id}`)},urlView(){return(0,D.dq)(`/published/workflow?id=${this.workflow.id}`)},urlInvocations(){return`/workflows/${this.workflow.id}/invocations`},urlViewShared(){return(0,D.dq)(`/workflow/display_by_username_and_slug?username=${this.workflow.owner}&slug=${encodeURIComponent(this.workflow.slug)}`)},readOnly(){return!!this.workflow.shared},isDeleted(){return this.workflow.deleted},sourceUrl(){return this.workflow.source_metadata?.url?this.workflow.source_metadata.url:this.workflow.source_metadata?.trs_server&&"dockstore"==this.workflow.source_metadata?.trs_server?`https://dockstore.org/workflows${this.workflow.source_metadata.trs_tool_id.slice(9)}`:null},sourceLabel(){return this.workflow.source_metadata?.url?"View external link":"dockstore"==this.workflow.source_metadata?.trs_server?"View on Dockstore":null},sourceType(){return this.workflow.source_metadata?.url?"url":this.workflow.source_metadata?.trs_server?`trs_${this.workflow.source_metadata?.trs_server}`:""}},created(){this.services=new Sm},methods:{onCopy:function(){this.services.copyWorkflow(this.workflow).then((e=>{this.$emit("onAdd",e),this.$emit("onSuccess",`Successfully copied workflow '${this.workflow.name}' to '${e.name}'.`)})).catch((e=>{this.$emit("onError",e)}))},onDelete:function(){const e=this.workflow.id;this.services.deleteWorkflow(e).then((t=>{this.$emit("onRemove",e),this.$emit("onSuccess",t)})).catch((e=>{this.$emit("onError",e)}))},onDragStart:function(e){(0,u_.f)(e,this.workflow)},onDragEnd:function(){(0,u_.s)()},onRename:function(){const e=this.workflow.id,t=this.workflow.name,n=window.prompt(`Enter a new name for workflow '${t}'`,t);if(n){const i={name:n};this.services.updateWorkflow(e,i).then((()=>{this.$emit("onUpdate",e,i),this.$emit("onSuccess",`Successfully changed name of workflow '${t}' to '${n}'.`)})).catch((e=>{this.$emit("onError",e)}))}},onRestore:function(){const e=this.workflow.id;this.services.undeleteWorkflow(e).then((t=>{this.$emit("onRestore",e),this.$emit("onSuccess",t)})).catch((e=>{this.$emit("onError",e)}))},getWorkflowTooltip:function(e,t){let n="";return e.includes("trs")?n=`Imported from TRS ID (version: ${t.source_metadata.trs_version_id})`:"url"==e&&(n=`Imported from ${t.source_metadata.url}`),n}}},p_=h_;const f_=(0,m.Z)(p_,(function(){var e=this,t=e._self._c;return t("div",[t("b-link",{staticClass:"workflow-dropdown font-weight-bold",attrs:{"aria-expanded":"false","data-toggle":"dropdown","data-workflow-dropdown":e.workflow.id,draggable:""},on:{dragstart:e.onDragStart,dragend:e.onDragEnd}},[t("Icon",{staticClass:"fa-lg",attrs:{icon:"caret-down"}}),e._v(" "),t("span",{staticClass:"workflow-dropdown-name"},[e._v(e._s(e.workflow.name))]),e._v(" "),e.sourceType.includes("trs")?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-haspopup":"true",title:e.getWorkflowTooltip(e.sourceType,e.workflow)}},[t("Icon",{staticClass:"mr-1 workflow-trs-icon",attrs:{"fixed-width":"",icon:"check"}})],1):e._e(),e._v(" "),"url"==e.sourceType?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-haspopup":"true",title:e.getWorkflowTooltip(e.sourceType,e.workflow)}},[t("Icon",{staticClass:"mr-1 workflow-external-link",attrs:{"fixed-width":"",icon:"link"}})],1):e._e()],1),e._v(" "),e.workflow.description?t("p",{staticClass:"workflow-dropdown-description"},[t("TextSummary",{attrs:{description:e.workflow.description,"show-details":e.showDetails},on:{"update:showDetails":function(t){e.showDetails=t},"update:show-details":function(t){e.showDetails=t}}})],1):e._e(),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"workflow-dropdown"}},[e.readOnly||e.isDeleted?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{keypress:function(t){return e.$router.push(e.urlEdit)},click:function(t){return t.preventDefault(),e.$router.push(e.urlEdit)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"edit"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Edit")])],1),e._v(" "),e.isDeleted||e.isAnonymous?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onCopy.apply(null,arguments)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"copy"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Copy")])],1),e._v(" "),e.readOnly||e.isDeleted?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{keypress:function(t){return e.$router.push(e.urlInvocations)},click:function(t){return t.preventDefault(),e.$router.push(e.urlInvocations)}}},[t("Icon",{staticClass:"fa-rotate-270 mr-1",attrs:{"fixed-width":"",icon:"sitemap"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Invocations")])],1),e._v(" "),e.isDeleted?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:e.urlDownload}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"download"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Download")])],1),e._v(" "),e.readOnly||e.isDeleted?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onRename.apply(null,arguments)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"signature"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Rename")])],1),e._v(" "),e.readOnly||e.isDeleted?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{keypress:function(t){return e.$router.push(e.urlShare)},click:function(t){return t.preventDefault(),e.$router.push(e.urlShare)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"share-alt"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Share")])],1),e._v(" "),e.readOnly||e.isDeleted?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:e.urlExport}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"file-export"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Export")])],1),e._v(" "),e.isDeleted?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:e.urlView}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"eye"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("View")])],1),e._v(" "),e.sourceLabel&&!e.isDeleted?t("a",{staticClass:"dropdown-item",attrs:{target:"_blank",href:e.sourceUrl}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"external-link-alt"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(e._s(e.sourceLabel))])],1):e._e(),e._v(" "),e.readOnly||e.isDeleted?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onDelete.apply(null,arguments)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"trash"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Delete")])],1),e._v(" "),e.isDeleted?t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onRestore.apply(null,arguments)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"trash-restore"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Restore")])],1):e._e()])],1)}),[],!1,null,"3911e32b",null).exports;u.vI.add(h.r8p,h.cf$);const m_={components:{BButton:jn.T,FontAwesomeIcon:p.GN},computed:{...(0,o.rn)(Xe.L,["isAnonymous"]),createTitle(){return this.isAnonymous?"Please log in or register to use this feature":"Create a new workflow"},importTitle(){return this.isAnonymous?"Please log in or register to use this feature":"Import a workflow from URL or registry"}},methods:{navigateToCreate:function(){this.$router.push("/workflows/edit")},navigateToImport:function(){this.$router.push("/workflows/import")}}};const __=(0,m.Z)(m_,(function(){var e=this,t=e._self._c;return t("span",[t("BButton",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"m-1",attrs:{id:"workflow-create","aria-haspopup":"true",title:e.createTitle,disabled:e.isAnonymous},on:{click:e.navigateToCreate}},[t("FontAwesomeIcon",{attrs:{icon:"plus"}}),e._v("\n        "+e._s(e._f("localize")("Create"))+"\n    ")],1),e._v(" "),t("BButton",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"m-1",attrs:{id:"workflow-import","aria-haspopup":"true",title:e.importTitle,disabled:e.isAnonymous},on:{click:e.navigateToImport}},[t("FontAwesomeIcon",{attrs:{icon:"upload"}}),e._v("\n        "+e._s(e._f("localize")("Import"))+"\n    ")],1)],1)}),[],!1,null,null,null).exports,v_={key:"name",label:(0,Ee.ZP)("Name"),sortable:!0},g_={key:"tags",label:(0,Ee.ZP)("Tags"),sortable:!1,thStyle:{width:"20%"}},y_={label:(0,Ee.ZP)("Updated"),key:"update_time",sortable:!0,thStyle:{width:"15%"}},b_={label:(0,Ee.ZP)("Sharing"),key:"published",sortable:!1,thStyle:{width:"10%"}},w_={label:(0,Ee.ZP)("Bookmarked"),key:"show_in_tool_panel",sortable:!1,thStyle:{width:"10%"}},k_={key:"execute",label:"Run",thStyle:{width:"10%"}},C_={key:"owner",label:(0,Ee.ZP)("Owner"),sortable:!1,thStyle:{width:"15%"}},x_=[v_,g_,y_,b_,w_,k_],S_=[v_,g_,y_,C_,k_],M_={components:{FilterMenu:ci,UtcDate:J.Z,StatelessTags:G.Z,WorkflowDropdown:f_,WorkflowBookmark:r_,WorkflowIndexActions:__,SharingIndicators:hi,WorkflowRunButton:_m},mixins:[tc],props:{inputDebounceDelay:{type:Number,default:500},importMessage:{type:String,default:null},importStatus:{type:String,default:"success"},published:{type:Boolean,default:!1},query:{type:String,required:!1,default:""}},data(){const e=this.published?S_:x_;return{tableId:"workflow-table",fields:e,filterClass:this.published?ds:rs,filterText:this.query,searchQuery:this.published?"is:published":this.query,titleSearch:(0,Ee.ZP)("search workflows"),workflowItemsModel:[],helpHtml:as,perPage:this.rowsPerPage(this.defaultPerPage||20),dataProvider:qm,defaultTableAttrs:{"sort-by":"update_time","sort-desc":!0,"no-sort-reset":"",fields:e},showAdvanced:!1}},computed:{dataProviderParameters(){const e={search:this.searchQuery,skip_step_counts:!0};return this.published&&(e.show_published=!0,e.show_shared=!1),e},title(){return this.published?(0,Ee.ZP)("Published Workflows"):(0,Ee.ZP)("Workflows")}},created(){this.root=(0,g.getAppRoot)(),this.services=new Sm},methods:{decorateData(e){this.services._addAttributes(e)},bookmarkWorkflow:function(e,t){const n={show_in_tool_panel:t};this.services.updateWorkflow(e,n).then((({id:e,name:n})=>{if(t)(0,l.Bz)().config.stored_workflow_menu_entries.push({id:e,name:n});else{const t=(0,l.Bz)().config.stored_workflow_menu_entries.findIndex((t=>t.id===e));(0,l.Bz)().config.stored_workflow_menu_entries.splice(t,1)}this.items.find((n=>{if(n.id===e)return n.show_in_tool_panel=t,!0}))})).catch((e=>{this.onError(e)}))},onTags:function(e,t){const n=this.workflowItemsModel[t];n.tags=e,this.services.updateWorkflow(n.id,{tags:n.tags}).catch((e=>{this.onError(e)})),this.$emit("input",n.tags)},onAdd:function(e){1==this.currentPage?this.refresh():this.currentPage=1},onRemove:function(e){this.refresh()},onUpdate:function(e,t){this.refresh()},onRestore:function(e){this.refresh()},onSearch(e){this.searchQuery=e,""==e&&e!==this.query&&this.$router.push("/workflows/list"),this.refresh()},applyFilter(e,t,n=!1){this.filterText=n?this.filterClass.setFilterValue(this.filterText,e,`'${t}'`):this.filterClass.setFilterValue(this.filterText,e,t)}}},T_=M_;var L_=(0,m.Z)(T_,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"workflows-list",attrs:{"aria-labelledby":"workflows-title"}},[t("h1",{staticClass:"mb-3 h-lg",attrs:{id:"workflows-title"}},[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),t("b-alert",{staticClass:"index-grid-message",attrs:{variant:e.messageVariant,show:e.showMessage}},[e._v(e._s(e.message))]),e._v(" "),t("b-alert",{staticClass:"index-grid-message",attrs:{dismissible:"",variant:e.importStatus,show:Boolean(e.importMessage)}},[e._v("\n        "+e._s(e.importMessage)+"\n    ")]),e._v(" "),t("b-row",{staticClass:"mb-3"},[t("b-col",{staticClass:"m-1",attrs:{cols:"6"}},[t("FilterMenu",{attrs:{name:e.title,placeholder:e.titleSearch,"filter-class":e.filterClass,"filter-text":e.filterText,loading:e.loading,"show-advanced":e.showAdvanced,"has-help":""},on:{"update:filterText":function(t){e.filterText=t},"update:filter-text":function(t){e.filterText=t},"update:showAdvanced":function(t){e.showAdvanced=t},"update:show-advanced":function(t){e.showAdvanced=t},"on-backend-filter":e.onSearch},scopedSlots:e._u([{key:"menu-help-text",fn:function(){return[t("div",{domProps:{innerHTML:e._s(e.helpHtml)}})]},proxy:!0}])})],1),e._v(" "),t("b-col",[t("WorkflowIndexActions",{staticClass:"float-right",attrs:{root:e.root}})],1)],1),e._v(" "),t("b-table",e._b({scopedSlots:e._u([{key:"empty",fn:function(){return[e.loading?t("loading-span",{attrs:{message:"Loading workflows"}}):t("b-alert",{attrs:{id:"no-workflows",variant:"info",show:""}},[""!==e.filterText?t("div",[e._v("\n                    No matching entries found for: "),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.filterText))]),e._v(".\n                ")]):t("div",[e._v("No workflows found. You may create or import new workflows.")])])]},proxy:!0},{key:"cell(name)",fn:function(n){return[t("WorkflowDropdown",{attrs:{workflow:n.item,"details-showing":n.detailsShowing},on:{onAdd:e.onAdd,onRemove:e.onRemove,onUpdate:e.onUpdate,onSuccess:e.onSuccess,onError:e.onError,onRestore:e.onRestore,toggleDetails:n.toggleDetails}})]}},{key:"cell(tags)",fn:function(n){return[t("StatelessTags",{attrs:{clickable:"",value:n.item.tags,disabled:n.item.deleted||e.published},on:{input:t=>e.onTags(t,n.index),"tag-click":t=>e.applyFilter("tag",t,!0)}})]}},{key:"cell(published)",fn:function(n){return[n.item.deleted?t("div",[e._v("—")]):t("SharingIndicators",{attrs:{object:n.item},on:{filter:t=>e.applyFilter(t,!0)}})]}},{key:"cell(show_in_tool_panel)",fn:function(n){return[n.item.deleted?t("div",[e._v("—")]):t("WorkflowBookmark",{attrs:{checked:n.item.show_in_tool_panel},on:{bookmark:t=>e.bookmarkWorkflow(n.item.id,t)}})]}},{key:"cell(update_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"cell(owner)",fn:function(n){return[t("a",{staticClass:"workflow-filter-link-owner",attrs:{href:"#"},on:{click:function(t){return e.applyFilter("user",n.value,!0)}}},[e._v("\n                "+e._s(n.value)+"\n            ")])]}},{key:"cell(execute)",fn:function(n){return[n.item.deleted?t("div",[e._v("—")]):t("WorkflowRunButton",{attrs:{id:n.item.id,root:e.root}})]}},{key:"row-details",fn:function(n){return[t("b-card",[t("p",{staticClass:"workflow-dropdown-description"},[e._v(e._s(n.item.description))])])]}}]),model:{value:e.workflowItemsModel,callback:function(t){e.workflowItemsModel=t},expression:"workflowItemsModel"}},"b-table",{...e.defaultTableAttrs,...e.indexTableAttrs},!1)),e._v(" "),t("b-pagination",e._b({directives:[{name:"show",rawName:"v-show",value:e.rows>=e.perPage,expression:"rows >= perPage"}],staticClass:"gx-workflows-grid-pager",model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}},"b-pagination",e.paginationAttrs,!1))],1)}),[],!1,null,null,null);const D_=L_.exports;const E_={components:{CopyModal:Tl,SelectorModal:ad},mixins:[Rr],props:{histories:{type:Array,required:!0},history:{type:Object,required:!0},title:{type:String,default:"Histories"},historiesLoading:{type:Boolean,default:!1}},data:()=>({showSwitchModal:!1}),computed:{...(0,o.rn)(Xe.L,["isAnonymous"]),...(0,o.rn)(I.z,["totalHistoryCount"])},methods:{...(0,o.nv)(I.z,["createNewHistory","deleteHistory","secureHistory","setCurrentHistory"]),userTitle(e){return this.isAnonymous?this.l("Log in to")+" "+this.l(e):this.l(e)}}};const O_={components:{HistoryPanel:Sl,CurrentCollection:Bs,HistoryNavigation:(0,m.Z)(E_,(function(){var e=this,t=e._self._c;return t("div",[t("nav",{staticClass:"d-flex justify-content-between mx-3 my-2",attrs:{"aria-label":"current history management"}},[t("h2",{staticClass:"m-1 h-sm"},[e._v("History")]),e._v(" "),t("b-button-group",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top.hover.noninteractive",modifiers:{top:!0,hover:!0,noninteractive:!0}}],staticClass:"create-hist-btn",attrs:{"data-description":"create new history",size:"sm",variant:"link",disabled:e.isAnonymous,title:e.userTitle("Create new history")},on:{click:e.createNewHistory}},[t("Icon",{attrs:{"fixed-width":"",icon:"plus"}})],1),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top.hover.noninteractive",modifiers:{top:!0,hover:!0,noninteractive:!0}}],attrs:{"data-description":"switch to another history",size:"sm",variant:"link",disabled:e.isAnonymous,title:e.userTitle("Switch to history")},on:{click:function(t){e.showSwitchModal=!e.showSwitchModal}}},[t("Icon",{attrs:{"fixed-width":"",icon:"exchange-alt"}})],1),e._v(" "),t("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top.hover.noninteractive",modifiers:{top:!0,hover:!0,noninteractive:!0}}],attrs:{size:"sm",variant:"link","toggle-class":"text-decoration-none","menu-class":"history-options-button-menu",title:"History options","data-description":"history options"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("span",{staticClass:"sr-only"},[e._v("History Options")])]},proxy:!0}])},[e._v(" "),t("b-dropdown-text",[e.historiesLoading?t("div",[e.historiesLoading?t("b-spinner",{attrs:{small:""}}):e._e(),e._v(" "),t("span",[e._v("Fetching histories from server")])],1):t("span",[e._v("You have "+e._s(e.totalHistoryCount)+" histories.")])]),e._v(" "),t("b-dropdown-item",{attrs:{"data-description":"switch to multi history view",disabled:e.isAnonymous,title:e.userTitle("Open History Multiview")},on:{click:function(t){return e.$router.push("/histories/view_multiple")}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"columns"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Show Histories Side-by-Side")])],1),e._v(" "),t("b-dropdown-divider"),e._v(" "),t("b-dropdown-item",{attrs:{title:e.l("Resume all Paused Jobs in this History")},on:{click:function(t){return e.iframeRedirect("/history/resume_paused_jobs?current=True")}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"play"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Resume Paused Jobs")])],1),e._v(" "),t("b-dropdown-divider"),e._v(" "),t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:copy-current-history-modal",arg:"copy-current-history-modal"}],attrs:{disabled:e.isAnonymous,title:e.userTitle("Copy History to a New History")}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"copy"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Copy this History")])],1),e._v(" "),t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:delete-history-modal",arg:"delete-history-modal"}],attrs:{title:e.l("Permanently Delete History")}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"trash"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Delete this History")])],1),e._v(" "),t("b-dropdown-item",{attrs:{title:e.l("Export Citations for all Tools used in this History")},on:{click:function(t){return e.$router.push(`/histories/citations?id=${e.history.id}`)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"stream"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Export Tool Citations")])],1),e._v(" "),t("b-dropdown-item",{attrs:{"data-description":"export to file",title:e.l("Export and Download History as a File")},on:{click:function(t){return e.$router.push(`/histories/${e.history.id}/export`)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"file-archive"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Export History to File")])],1),e._v(" "),t("b-dropdown-item",{attrs:{disabled:e.isAnonymous,"data-description":"archive history",title:e.userTitle("Archive this History")},on:{click:function(t){return e.$router.push(`/histories/${e.history.id}/archive`)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"archive"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Archive History")])],1),e._v(" "),t("b-dropdown-item",{attrs:{disabled:e.isAnonymous,title:e.userTitle("Convert History to Workflow")},on:{click:function(t){return e.iframeRedirect("/workflow/build_from_current_history")}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"file-export"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Extract Workflow")])],1),e._v(" "),t("b-dropdown-item",{attrs:{disabled:e.isAnonymous,title:e.userTitle("Display Workflow Invocations")},on:{click:function(t){return e.$router.push(`/histories/${e.history.id}/invocations`)}}},[t("Icon",{staticClass:"fa-rotate-270 mr-1",attrs:{"fixed-width":"",icon:"sitemap"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Show Invocations")])],1),e._v(" "),t("b-dropdown-divider"),e._v(" "),t("b-dropdown-item",{attrs:{disabled:e.isAnonymous,title:e.userTitle("Share or Publish this History"),"data-description":"share or publish"},on:{click:function(t){return e.$router.push(`/histories/sharing?id=${e.history.id}`)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"share-alt"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Share or Publish")])],1),e._v(" "),t("b-dropdown-item",{attrs:{disabled:e.isAnonymous,title:e.userTitle("Set who can View or Edit this History")},on:{click:function(t){return e.$router.push(`/histories/permissions?id=${e.history.id}`)}}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"user-lock"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Set Permissions")])],1),e._v(" "),t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal:history-privacy-modal",arg:"history-privacy-modal"}],attrs:{disabled:e.isAnonymous,title:e.userTitle("Make this History Private")}},[t("Icon",{staticClass:"mr-1",attrs:{"fixed-width":"",icon:"lock"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Make Private")])],1)],1)],1)],1),e._v(" "),t("SelectorModal",{directives:[{name:"show",rawName:"v-show",value:e.showSwitchModal,expression:"showSwitchModal"}],attrs:{id:"selector-history-modal",histories:e.histories,"additional-options":["center","multi"],"show-modal":e.showSwitchModal},on:{"update:showModal":function(t){e.showSwitchModal=t},"update:show-modal":function(t){e.showSwitchModal=t},selectHistory:function(t){return e.setCurrentHistory(t.id)}}}),e._v(" "),t("CopyModal",{attrs:{id:"copy-current-history-modal",history:e.history}}),e._v(" "),t("b-modal",{attrs:{id:"history-privacy-modal",title:"Make History Private","title-tag":"h2"},on:{ok:function(t){return e.secureHistory(e.history)}}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n            This will make all the data in this history private (excluding library datasets), and will set\n            permissions such that all new data is created as private. Any datasets within that are currently shared\n            will need to be re-shared or published. Are you sure you want to do this?\n        ")])]),e._v(" "),t("b-modal",{attrs:{id:"delete-history-modal",title:"Delete History?","title-tag":"h2"},on:{ok:function(t){return e.deleteHistory(e.history.id)}}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really delete the current history?")])]),e._v(" "),t("b-modal",{attrs:{id:"purge-history-modal",title:"Permanently Delete History?","title-tag":"h2"},on:{ok:function(t){return e.deleteHistory(e.history.id,!0)}}},[t("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really delete the current history permanently? This cannot be undone.")])])],1)}),[],!1,null,null,null).exports},data:()=>({breadcrumbs:[],listOffset:0}),computed:{...(0,o.rn)(Xe.L,["currentUser"]),...(0,o.rn)(I.z,["currentHistory","histories","historiesLoading"])},methods:{onViewCollection(e,t){this.listOffset=t,this.breadcrumbs=[...this.breadcrumbs,e]}}};const A_=(0,m.Z)(O_,(function(){var e=this,t=e._self._c;return e.currentUser&&e.currentHistory?t("div",{staticClass:"d-flex flex-column history-index overflow-auto",attrs:{id:"current-history-panel"}},[e.breadcrumbs.length?e.breadcrumbs.length?t("CurrentCollection",{attrs:{history:e.currentHistory,"selected-collections":e.breadcrumbs},on:{"update:selectedCollections":function(t){e.breadcrumbs=t},"update:selected-collections":function(t){e.breadcrumbs=t},"view-collection":e.onViewCollection}}):t("div",[t("span",{staticClass:"sr-only"},[e._v("Loading...")])]):t("HistoryPanel",{attrs:{"list-offset":e.listOffset,history:e.currentHistory,filterable:!0},on:{"view-collection":e.onViewCollection},scopedSlots:e._u([{key:"navigation",fn:function(){return[t("HistoryNavigation",{attrs:{history:e.currentHistory,histories:e.histories,"histories-loading":e.historiesLoading,title:"Histories"}})]},proxy:!0}],null,!1,1997331088)})],1):t("div",{staticClass:"flex-grow-1 loadingBackground h-100"},[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"sr-only"},[e._v("Loading History...")])])}),[],!1,null,null,null).exports;var I_=n(21904);function P_(e,t,n,i,o=800){const s=(0,a.ref)("idle");let r=null;const l={idle(e){switch(e.type){case"dragstart":return"blocked";case"dragenter":if(!((0,a.unref)(i)&&document.querySelectorAll(".modal.show").length>0))return"fileDragging"}return"idle"},blocked(e){switch(e.type){case"drop":case"dragend":return"idle"}return"blocked"},fileDragging(e){switch(r&&clearTimeout(r),e.type){case"dragover":e.preventDefault(),r=setTimeout((()=>s.value="idle"),o);break;case"drop":if(e.preventDefault(),u.value){(0,a.unref)(t)(e)}else{(0,a.unref)(n)(e)}return"idle";case"dragend":return"idle"}return"fileDragging"}},d=e=>s.value=l[s.value](e);(0,rn.ORN)(document.body,"dragstart",d,!0),(0,rn.ORN)(document.body,"dragover",d,!0),(0,rn.ORN)(document.body,"drop",d,!0),(0,rn.ORN)(document.body,"dragend",d,!0),(0,rn.ORN)(document.body,"dragenter",d,!0);const c=(0,a.computed)({get:()=>"fileDragging"===s.value,set(e){s.value=!0!==e?"idle":"fileDragging"}}),u=(0,a.ref)(!1);return(0,rn.ORN)(e,"dragenter",(()=>{u.value=!0}),!0),(0,rn.ORN)(e,"dragleave",(()=>{u.value=!1}),!0),{isFileOverDocument:c,isFileOverDropZone:u}}const R_={__name:"DragAndDropModal",setup(e){const t=(0,a.ref)(null),{isFileOverDocument:n,isFileOverDropZone:i}=P_(t,d,c,!0),o=(0,a.computed)((()=>i.value?"ui-drag-and-drop-modal drag-over":"ui-drag-and-drop-modal")),{openGlobalUploadModal:s}=(0,_a.N)(),r=(0,oo.pm)(),l=["galaxy_main","frame.center-frame"];function d(e){console.debug(e.dataTransfer),e.dataTransfer?.files?.length>0&&s({immediateUpload:!0,immediateFiles:e.dataTransfer.files})}function c(e){e.dataTransfer?.files?.length>0&&r.error("Upload cancelled","Drop file in the center to upload it")}return(0,a.watch)(n,((e,t)=>{!t&&e?(0,I_.C6)(l,!0):(0,I_.C6)(l,!1)})),{__sfc:!0,modalContentElement:t,isFileOverDocument:n,isFileOverDropZone:i,modalClass:o,openGlobalUploadModal:s,toast:r,iframesNoInteract:l,onDrop:d,onDropCancel:c}}};const j_=(0,m.Z)(R_,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("BModal",{attrs:{"modal-class":n.modalClass,"hide-header":"","hide-footer":"",centered:""},model:{value:n.isFileOverDocument,callback:function(e){n.isFileOverDocument=e},expression:"isFileOverDocument"}},[t("div",{ref:"modalContentElement",staticClass:"inner-content h-xl"},[e._v("Drop Files here to Upload")])])}),[],!1,null,null,null).exports,Y_={__name:"Analysis",setup(e){const t=(0,Nn.tv)(),n=(0,a.ref)(!1),{showActivityBar:i,showToolbox:o,showPanels:s}=So();function r(){n.value=!1}return(0,a.onMounted)((()=>{t.app.$on("router-push",r)})),(0,a.onUnmounted)((()=>{t.app.$off("router-push",r)})),{__sfc:!0,router:t,showCenter:n,showActivityBar:i,showToolbox:o,showPanels:s,hideCenter:r,onLoad:function(){n.value=!0},CenterFrame:Sp,ActivityBar:fs,HistoryIndex:A_,FlexPanel:La,ToolPanel:os,DragAndDropModal:j_}}};const H_=(0,m.Z)(Y_,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"d-flex",attrs:{id:"columns"}},[n.showActivityBar?t(n.ActivityBar):e._e(),e._v(" "),n.showToolbox?t(n.FlexPanel,{attrs:{side:"left"}},[t(n.ToolPanel)],1):e._e(),e._v(" "),t("div",{staticClass:"overflow-auto p-3 w-100",attrs:{id:"center"}},[t(n.CenterFrame,{directives:[{name:"show",rawName:"v-show",value:n.showCenter,expression:"showCenter"}],attrs:{id:"galaxy_main"},on:{load:n.onLoad}}),e._v(" "),t("router-view",{directives:[{name:"show",rawName:"v-show",value:!n.showCenter,expression:"!showCenter"}],key:e.$route.fullPath,staticClass:"h-100"})],1),e._v(" "),n.showPanels?t(n.FlexPanel,{attrs:{side:"right"}},[t(n.HistoryIndex)],1):e._e(),e._v(" "),t(n.DragAndDropModal)],1)}),[],!1,null,null,null).exports;u.vI.add(h.LM3),u.vI.add(h.zc);const N_={components:{FontAwesomeIcon:p.GN},props:{title:{type:String,required:!0},wait:{type:Boolean,default:!1},tooltip:{type:String,default:null},disabled:{type:Boolean,default:!1}}};const F_=(0,m.Z)(N_,(function(){var e=this,t=e._self._c;return e.wait?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"d-flex flex-nowrap align-items-center text-nowrap",attrs:{disabled:"",variant:"info",title:"Please Wait..."}},[t("FontAwesomeIcon",{staticClass:"mr-2",attrs:{icon:"spinner",spin:""}}),e._v(e._s(e.title)+"\n")],1):t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"d-flex flex-nowrap align-items-center text-nowrap",attrs:{variant:"primary",title:e.tooltip,disabled:e.disabled},on:{click:function(t){return e.$emit("onClick")}}},[t("FontAwesomeIcon",{staticClass:"mr-2",attrs:{icon:"play"}}),e._v(e._s(e.title)+"\n")],1)}),[],!1,null,null,null).exports;var B_=n(48391);const $_={props:{message:{type:String,default:null},variant:{type:String,default:"info"},timeout:{type:Number,default:3e3},persistent:{type:Boolean,default:!1}},data:()=>({showDismissable:!1}),computed:{showAlert(){return!!this.message&&(!!this.persistent||this.showDismissable)}},watch:{message(e){this.resetTimer()}},methods:{resetTimer(){this.message&&(this.showDismissable=!0,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showDismissable=!1}),this.timeout))}}};const z_=(0,m.Z)($_,(function(){var e=this;return(0,e._self._c)("b-alert",{staticClass:"mt-2",attrs:{variant:e.variant,show:e.showAlert}},[e._v("\n    "+e._s(e._f("l")(e.message))+"\n")])}),[],!1,null,null,null).exports;const W_={computed:{explicitMetaAttributes(){return this.items.filter((e=>-1==this.implicitMicrodataProperties.indexOf(e.attribute)))},items(){const e=[];for(const t in this.thing)"class"!=t&&e.push({attribute:t,value:this.thing[t]});return e},email(){let e=this.thing.email;return e&&0==e.indexOf("mailto:")&&(e=e.slice(7)),e},url(){return this.thing.url}}};u.vI.add(h.Xjp,h.P88);const U_={components:{FontAwesomeIcon:p.GN},mixins:[W_],props:{organization:{type:Object},hoverPlacement:{type:String,default:"left"}},data(){return{implicitMicrodataProperties:["name","email","url","identifier"],thing:this.organization}},computed:{name(){return this.organization.name}}};const V_=(0,m.Z)(U_,(function(){var e=this,t=e._self._c;return t("span",{attrs:{itemprop:"creator",itemscope:"",itemtype:"https://schema.org/Organization"}},[t("FontAwesomeIcon",{ref:"button",attrs:{icon:"building"}}),e._v(" "),t("b-popover",{attrs:{triggers:"click blur",placement:e.hoverPlacement,target:e.$refs.button||"works-lazily",title:"Organization"}},[t("b-table",{attrs:{striped:"",items:e.items}})],1),e._v(" "),e.name?t("span",[t("span",{attrs:{itemprop:"name"}},[e._v(e._s(e.name))]),e._v(" "),e.email?t("span",[e._v("\n            ("),t("span",{attrs:{itemprop:"email",content:e.organization.email}},[e._v(e._s(e.email))]),e._v(")\n        ")]):e._e()]):e.email?t("span",{attrs:{itemprop:"email",content:e.organization.email}},[e._v("\n        "+e._s(e.email)+"\n    ")]):e._e(),e._v(" "),e.url?t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Organization URL",href:e.url,target:"_blank"}},[t("link",{attrs:{itemprop:"url",href:e.url}}),e._v(" "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}})],1):e._e(),e._v(" "),e._l(e.explicitMetaAttributes,(function(e){return t("meta",{key:e.attribute,attrs:{itemprop:e.attribute,content:e.value}})})),e._v(" "),e._t("buttons")],2)}),[],!1,null,null,null).exports;var q_=n(51417);u.vI.add(q_.Fgt,h.ILF,h.Xjp);const Z_={components:{FontAwesomeIcon:p.GN},mixins:[W_],props:{person:{type:Object},hoverPlacement:{type:String,default:"left"}},data(){return{implicitMicrodataProperties:["name","givenName","email","familyName","url","identifier"],thing:this.person}},computed:{name(){let e=this.person.name;const t=this.person.familyName,n=this.person.givenName;if(null==e&&(t||n)){const i=this.person.honorificPrefix,o=this.person.honorificSuffix;e=n&&t?n+" "+t:n||t,i&&(e=i+" "+e),o&&(e=e+" "+o)}return e},orcidLink(){const e=this.person.identifier;return e&&e.indexOf("orcid.org/")>=0?e:null}}};const G_={components:{OrganizationViewer:V_,PersonViewer:(0,m.Z)(Z_,(function(){var e=this,t=e._self._c;return t("span",{attrs:{itemprop:"creator",itemscope:"",itemtype:"https://schema.org/Person"}},[t("FontAwesomeIcon",{ref:"button",attrs:{icon:"user"}}),e._v(" "),t("b-popover",{attrs:{triggers:"click blur",placement:e.hoverPlacement,target:e.$refs.button||"works-lazily",title:"Person"}},[t("b-table",{attrs:{striped:"",items:e.items}})],1),e._v(" "),e.name?t("span",[e.person.name?t("meta",{attrs:{itemprop:"name",content:e.person.name}}):e._e(),e._v(" "),e.person.givenName?t("meta",{attrs:{itemprop:"givenName",content:e.person.givenName}}):e._e(),e._v(" "),e.person.familyName?t("meta",{attrs:{itemprop:"familyName",content:e.person.familyName}}):e._e(),e._v("\n        "+e._s(e.name)+"\n        "),e.email?t("span",[e._v("\n            ("),t("span",{attrs:{itemprop:"email",content:e.person.email}},[e._v(e._s(e.email))]),e._v(")\n        ")]):e._e()]):t("span",{attrs:{itemprop:"email",content:e.person.email}},[e._v("\n        "+e._s(e.email)+"\n    ")]),e._v(" "),e.orcidLink?t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"View orcid.org profile",href:e.orcidLink,target:"_blank"}},[t("link",{attrs:{itemprop:"identifier",href:e.orcidLink}}),e._v(" "),t("FontAwesomeIcon",{attrs:{icon:["fab","orcid"]}})],1):e._e(),e._v(" "),e.url?t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"URL",href:e.url,target:"_blank"}},[t("link",{attrs:{itemprop:"url",href:e.url}}),e._v(" "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}})],1):e._e(),e._v(" "),e._l(e.explicitMetaAttributes,(function(e){return t("meta",{key:e.attribute,attrs:{itemprop:e.attribute,content:e.value}})})),e._v(" "),e._t("buttons")],2)}),[],!1,null,null,null).exports},props:{creator:{type:Object}}};const J_=(0,m.Z)(G_,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"creative-work-creator"},["Organization"==e.creator.class?t("OrganizationViewer",{attrs:{organization:e.creator},scopedSlots:e._u([{key:"buttons",fn:function(){return[e._t("buttons")]},proxy:!0}],null,!0)}):t("PersonViewer",{attrs:{person:e.creator},scopedSlots:e._u([{key:"buttons",fn:function(){return[e._t("buttons")]},proxy:!0}],null,!0)})],1)}),[],!1,null,null,null).exports,K_={components:{CreatorViewer:J_},props:{title:{type:String,default:""},creators:{type:Array}}};const X_=(0,m.Z)(K_,(function(){var e=this,t=e._self._c;return t("span",[e._v("\n    "+e._s(e.title)+"\n    "),e._l(e.creators,(function(e,n){return t("div",{key:n},[t("CreatorViewer",{attrs:{creator:e}})],1)}))],2)}),[],!1,null,null,null).exports;u.vI.add(h.Psp,h.kZ_,h.Sbq,h.Vfw);const Q_={components:{CitationItem:_,License:ku,Creators:X_,FontAwesomeIcon:p.GN},props:{id:{type:String},hasCitations:{type:Boolean,default:!1},xrefs:{type:Array},license:{type:String},creators:{type:Array},requirements:{type:Array}},data:()=>({citations:[]}),computed:{hasRequirements(){return this.requirements&&this.requirements.length>0},hasReferences(){return this.xrefs&&this.xrefs.length>0},hasCreators(){return this.creators&&this.creators.length>0},hasLicense(){return!!this.license},hasContent(){return this.hasRequirements||this.hasReferences||this.hasCreators||this.hasCitations||this.hasLicense}},watch:{id(){this.loadCitations()}},created(){this.loadCitations()},methods:{loadCitations(){this.hasCitations&&b("tools",this.id).then((e=>{this.citations=e})).catch((e=>{console.error(e)}))},copyBibtex(){var e="";this.citations.forEach((t=>{const n=t.cite.format("bibtex",{});e+=n})),(0,Be.J)(e,"Citations copied to your clipboard as BibTeX")}}};const ev=(0,m.Z)(Q_,(function(){var e=this,t=e._self._c;return e.hasContent?t("b-card",{staticClass:"tool-footer"},[e.hasCitations?t("div",{staticClass:"mb-1"},[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"footer-section-name"},[e._v("Citations")]),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{cursor:"pointer"},attrs:{title:"Copy all citations as BibTeX",variant:"link",size:"sm"},on:{click:e.copyBibtex}},[t("FontAwesomeIcon",{attrs:{icon:"copy"}})],1),e._v(" "),e._l(e.citations,(function(e,n){return t("CitationItem",{key:n,staticClass:"formatted-reference",attrs:{citation:e,prefix:"-"}})}))],2):e._e(),e._v(" "),e.hasRequirements?t("div",{staticClass:"mb-1"},[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"footer-section-name"},[e._v("Requirements")]),e._v(" "),t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Learn more about Galaxy Requirements",href:"https://galaxyproject.org/tools/requirements/",target:"_blank"}},[e._v("\n            See details "),t("FontAwesomeIcon",{attrs:{icon:"external-link-alt"}})],1),e._v(" "),e._l(e.requirements,(function(n,i){return t("div",{key:i},[e._v("\n            - "+e._s(n.name)+"\n            "),n.version?t("span",[e._v(" (Version "+e._s(n.version)+") ")]):e._e()])}))],2):e._e(),e._v(" "),e.hasLicense?t("div",{staticClass:"mb-1"},[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"footer-section-name"},[e._v("License")]),e._v(" "),t("License",{attrs:{"license-id":e.license}})],1):e._e(),e._v(" "),e.hasReferences?t("div",{staticClass:"mb-1"},[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"footer-section-name"},[e._v("References")]),e._v(" "),e._l(e.xrefs,(function(n,i){return t("div",{key:i},[e._v("\n            -\n            "),"bio.tools"==n.reftype?[e._v("\n                bio.tools: "+e._s(n.value)+" ("),t("a",{attrs:{href:`https://bio.tools/${n.value}`,target:"_blank"}},[e._v("bio.tools\n                    "),t("FontAwesomeIcon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Visit bio.tools reference",icon:"external-link-alt"}})],1),e._v(") ("),t("a",{attrs:{href:`https://openebench.bsc.es/tool/${n.value}`,target:"_blank"}},[e._v("OpenEBench\n                    "),t("FontAwesomeIcon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Visit OpenEBench reference",icon:"external-link-alt"}})],1),e._v(")\n            ")]:"bioconductor"==n.reftype?[e._v("\n                Bioconductor Package:\n                "),t("a",{attrs:{href:`https://bioconductor.org/packages/${n.value}/`,target:"_blank"}},[e._v(e._s(n.value)+" (doi:10.18129/B9.bioc."+e._s(n.value)+")")])]:[e._v(" "+e._s(n.reftype)+": "+e._s(n.value)+" ")]],2)}))],2):e._e(),e._v(" "),e.hasCreators?t("div",{staticClass:"mb-1"},[t("span",{staticClass:"font-weight-bold"},[e._v("Creators:")]),e._v(" "),t("Creators",{attrs:{creators:e.creators}})],1):e._e()]):e._e()}),[],!1,null,"3bdf6fed",null).exports;const tv={__name:"ToolHelp",props:{content:{type:String,required:!0}},setup(e){const t=e,{formattedContent:n}=rp(t.content);return{__sfc:!0,props:t,formattedContent:n}}};const nv=(0,m.Z)(tv,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"form-help form-text",domProps:{innerHTML:e._s(n.formattedContent)}})}),[],!1,null,"05cd6a49",null).exports;var iv=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ov=(0,a.defineComponent)({__name:"ToolSelectPreferredObjectStore",props:{toolPreferredObjectStoreId:{default:null}},emits:["updated"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(n.toolPreferredObjectStoreId);return{__sfc:!0,props:n,selectedObjectStoreId:i,newDatasetsDescription:"The default object store for the outputs of this tool",defaultOptionTitle:"Use Defaults",defaultOptionDescription:"If the history has a default set, that will be used. If instead, you've set an option in your user preferences - that will be assumed to be your default selection. Finally, the Galaxy configuration will be used.",emit:t,handleSubmit:function(e){return iv(this,void 0,void 0,(function*(){i.value=e,t("updated",e)}))},SelectObjectStore:lr}}}),av=ov;const sv=(0,m.Z)(av,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.SelectObjectStore,{attrs:{"for-what":t.newDatasetsDescription,"selected-object-store-id":t.selectedObjectStoreId,"default-option-title":t.defaultOptionTitle,"default-option-description":t.defaultOptionDescription},on:{onSubmit:t.handleSubmit}})}),[],!1,null,null,null).exports;const rv={components:{ShowSelectedObjectStore:er},props:{titleSuffix:{type:String,default:null}},computed:{title(){return this.l(`Preferred Target Object Store ${this.titleSuffix||""}`)}}},lv={mixins:[rv],props:{toolPreferredObjectStoreId:{type:String,default:null},user:{type:Object,required:!0}}};const dv=(0,m.Z)(lv,(function(){var e=this,t=e._self._c;return t("b-popover",{attrs:{target:"tool-storage",triggers:"hover",placement:"bottomleft"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0}])},[e._v(" "),e.toolPreferredObjectStoreId?t("p",[e._v("\n        This target object store has been set at the tool level, by default history or user preferences will be used\n        and if those are not set Galaxy will pick an adminstrator configured default.\n    ")]):e._e(),e._v(" "),e.toolPreferredObjectStoreId?t("ShowSelectedObjectStore",{attrs:{"preferred-object-store-id":e.toolPreferredObjectStoreId,"for-what":"Galaxy will default to storing this tool run's output in"}}):t("div",[e._v("\n        No selection has been made for this tool execution. Defaults from history, user, or Galaxy will be used.\n    ")]),e._v(" "),t("div",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n        Change this preference object store target by clicking on the storage button in the tool header.\n    ")])],1)}),[],!1,null,null,null).exports;function cv(e,t){const n=(0,B_.F)();return new URL(`/t/${t}/${e}`,n.config.help_forum_api_url)}var uv=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const hv=(0,a.defineComponent)({__name:"ToolHelpForum",props:{toolId:null,toolName:null},setup(e){const t=e,n="tool-help",i=X._.path("/api/help/forum/search").method("get").create(),o=(0,a.ref)([]),s=(0,a.ref)([]),r=(0,a.computed)((()=>o.value.length>0)),l=(0,a.ref)(null),d=(0,a.computed)((()=>`tags:${t.toolId}+${n} status:solved`));(0,a.onMounted)((()=>uv(this,void 0,void 0,(function*(){var e,t;const n=(yield i({query:d.value})).data;o.value=null!==(e=n.topics)&&void 0!==e?e:[],s.value=null!==(t=n.posts)&&void 0!==t?t:[]}))));const c=(0,a.computed)((()=>o.value.slice(0,4))),u=(0,a.computed)((()=>o.value.length>5));const{createNewTopicUrl:h,searchTopicUrl:f}=function(e){const t=(0,B_.F)();return{createNewTopicUrl:(0,a.computed)((()=>{const n=new URL("/new-topic",t.config.help_forum_api_url),{title:i,category:o,tags:a,body:s}=e;return n.searchParams.append("title",i.value),(null==o?void 0:o.value)&&n.searchParams.append("category",o.value),(null==a?void 0:a.value)&&n.searchParams.append("tags",a.value.join(",")),(null==s?void 0:s.value)&&n.searchParams.append("body",s.value),n})),searchTopicUrl:(0,a.computed)((()=>{const n=new URL("/search",t.config.help_forum_api_url),{query:i}=e;return n.searchParams.append("q",i.value),n}))}}({title:(0,a.computed)((()=>t.toolName)),tags:(0,a.computed)((()=>[t.toolId,n])),query:d}),m=(0,B_.F)();return{__sfc:!0,props:t,toolHelpTag:n,helpFetcher:i,topics:o,posts:s,helpAvailable:r,root:l,query:d,displayCount:5,displayedTopics:c,hasMore:u,blurbForTopic:function(e){var t;const n=s.value.find((t=>t.topic_id===e));return null!==(t=null==n?void 0:n.blurb)&&void 0!==t?t:"no content"},createNewTopicUrl:h,searchTopicUrl:f,configStore:m,FontAwesomeIcon:p.GN,BButton:jn.T,BCard:vi._,createTopicUrl:cv,Heading:Dt,ExternalLink:ao.Z}}}),pv=hv;const fv=(0,m.Z)(pv,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"root",staticClass:"tool-help-forum mt-2 mb-4"},[t(n.Heading,{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v("Help Forum")]),e._v(" "),n.helpAvailable?t("p",[e._v("\n        Following questions on the\n        "),t(n.ExternalLink,{attrs:{href:n.configStore.config.help_forum_api_url}},[e._v(" Help Forum ")]),e._v(" may be related to\n        this tool:\n    ")],1):t("p",[e._v("\n        There are no questions on the\n        "),t(n.ExternalLink,{attrs:{href:n.configStore.config.help_forum_api_url}},[e._v(" Help Forum ")]),e._v("\n        about this tool.\n    ")],1),e._v(" "),e._l(n.displayedTopics,(function(i){return t(n.BCard,{key:i.id,staticClass:"mb-2"},[t(n.ExternalLink,{attrs:{href:n.createTopicUrl(i.id,i.slug).href}},[t(n.Heading,{attrs:{h3:"",inline:"",size:"sm"}},[e._v(" "+e._s(i.title)+" ")])],1),e._v(" "),t("p",{staticClass:"mb-0 mt-2"},[e._v(e._s(n.blurbForTopic(i.id)))])],1)})),e._v(" "),n.hasMore?t("a",{staticClass:"d-block mb-2",attrs:{href:n.searchTopicUrl.href,target:"_blank"}},[e._v("Show all...")]):e._e(),e._v(" "),t(n.BButton,{staticClass:"font-weight-bold",attrs:{variant:"primary",target:"blank",href:n.createNewTopicUrl.href}},[t(n.FontAwesomeIcon,{attrs:{icon:["gxd","galaxyLogo"]}}),e._v(" Ask a new question\n    ")],1)],2)}),[],!1,null,"57f85017",null).exports;var mv=n(31304),_v=n.n(mv);function vv(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var gv=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const yv=(0,a.ref)(null),bv=new Map;function wv(e,t,n,i){const{config:o,isConfigLoaded:s}=(0,c.Z)(),r=(0,a.computed)((()=>Boolean(s.value&&o.value.tool_training_recommendations&&o.value.tool_training_recommendations_api_url))),l=(0,a.ref)(!1);(0,a.watch)((()=>s.value),(()=>gv(this,void 0,void 0,(function*(){if(s.value){if(r.value&&!yv.value){const t=yield fetch(o.value.tool_training_recommendations_api_url);t.ok&&(yv.value=yield t.json(),Object.entries(null!==(e=yv.value)&&void 0!==e?e:{}).forEach((([e,t])=>{t.tool_id.forEach((([t,n])=>{if(t===n)bv.set(t,e);else{const i=new RegExp(`${vv(n)}$`),o=t.replace(i,"");bv.set(o,e)}}))})))}var e;l.value=!0}}))),{immediate:!0});const d=(0,a.computed)((()=>{var t;const i=new RegExp(`${vv(n)}$`),o=e.replace(i,"");return l.value&&null!==(t=bv.get(o))&&void 0!==t?t:o})),u=(0,a.computed)((()=>!(!r.value||!yv.value)&&Object.keys(yv.value).includes(d.value))),h=(0,a.computed)((()=>{var e,t;return u.value&&null!==(t=null===(e=yv.value)||void 0===e?void 0:e[d.value])&&void 0!==t?t:null})),p=(0,a.computed)((()=>{if(!h.value)return[];const e=new Set;return h.value.tutorials.forEach((t=>{e.add(t[2])})),Array.from(e)})),f=(0,a.computed)((()=>{if(!h.value)return[];const e=[];return h.value.tutorials.forEach((t=>{e.push({title:t[1],category:t[2],url:new URL(t[3],o.value.tool_training_recommendations_api_url)})})),e})),m=(0,a.computed)((()=>{if(!l.value||!o.value.tool_training_recommendations_link)return;let a=o.value.tool_training_recommendations_link;return a=a.replace("{training_tool_identifier}",d.value),a=a.replace("{tool_id}",e),a=a.replace("{name}",t),a=a.replace("{repository_owner}",null!=i?i:""),a=a.replace("{version}",n),a})),_=(0,a.computed)((()=>{if(!h.value)return!1;for(let e=0;e<h.value.tool_id.length;e++){if(h.value.tool_id[e][1]===n)return!0}return!1}));return{trainingAvailable:u,trainingCategories:p,tutorialDetails:f,allTutorialsUrl:m,versionAvailable:_}}var kv=n(38046);const Cv=(0,a.defineComponent)({__name:"ToolTutorialRecommendations",props:{name:null,id:null,version:null,owner:null},setup(e){const t=e;u.vI.add(h.eW2);const{trainingAvailable:n,trainingCategories:i,tutorialDetails:o,allTutorialsUrl:s,versionAvailable:r}=wv(t.id,t.name,t.version,t.owner),l=(0,kv.Z)("collapse-");const d=(0,a.computed)((()=>o.value.length>1?`There are ${o.value.length} tutorials available which use this tool.`:"There is 1 tutorial available which uses this tool."));return{__sfc:!0,props:t,trainingAvailable:n,trainingCategories:i,tutorialDetails:o,allTutorialsUrl:s,versionAvailable:r,collapseId:l,idForCategory:function(e){return`${l.value}-${_v()(e)}`},tutorialsInCategory:function(e){return o.value.filter((t=>t.category===e))},tutorialText:d,FontAwesomeIcon:p.GN,BButton:jn.T,BCollapse:qi.k,Heading:Dt,ExternalLink:ao.Z}}});const xv=(0,m.Z)(Cv,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.trainingAvailable?t("div",{staticClass:"mt-2 mb-4"},[t(n.Heading,{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v("Tutorials")]),e._v(" "),t("p",[e._v("\n        "+e._s(n.tutorialText)+"\n        "),n.versionAvailable?t("span",[e._v(" These tutorials include training for the current version of the tool. ")]):e._e(),e._v(" "),n.allTutorialsUrl?t(n.ExternalLink,{attrs:{href:n.allTutorialsUrl}},[e._v("\n            View all tutorials referencing this tool.\n        ")]):e._e()],1),e._v(" "),t(n.BButton,{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:n.collapseId,expression:"collapseId"}],staticClass:"ui-link"},[t("b",[e._v("\n            Tutorials available in "+e._s(n.trainingCategories.length)+"\n            "+e._s(n.trainingCategories.length>1?"categories":"category")+"\n        ")]),e._v(" "),t(n.FontAwesomeIcon,{attrs:{icon:"caret-down"}})],1),e._v(" "),t(n.BCollapse,{attrs:{id:n.collapseId}},e._l(n.trainingCategories,(function(i){return t("div",{key:i},[t(n.BButton,{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:n.idForCategory(i),expression:"idForCategory(category)"}],staticClass:"ui-link ml-3"},[e._v("\n                "+e._s(i)+" ("+e._s(n.tutorialsInCategory(i).length)+")\n                "),t(n.FontAwesomeIcon,{attrs:{icon:"caret-down"}})],1),e._v(" "),t(n.BCollapse,{attrs:{id:n.idForCategory(i)}},[t("ul",{staticClass:"d-flex flex-column my-1"},e._l(n.tutorialsInCategory(i),(function(i){return t("li",{key:i.title},[t(n.ExternalLink,{staticClass:"ml-2",attrs:{href:i.url.toString()}},[e._v("\n                            "+e._s(i.title)+"\n                        ")])],1)})),0)])],1)})),0)],1):e._e()}),[],!1,null,null,null).exports;var Sv=n(43264),Mv=n.n(Sv);const Tv=(0,pe.F)((async function({id:e}){const t=`${(0,g.getAppRoot)()}api/tools/${e}/raw_tool_source`;try{const{data:e,headers:n}=await v.Z.get(t),i={};return i.language=n.language,"xml"===n.language?i.source=Mv()(e):i.source=e,i}catch(e){(0,y.t)(e)}})),Lv={components:{Alert:M,LoadingSpan:z.Z,ToolSourceProvider:Tv,ToolSourceDisplay:()=>Promise.all([n.e(348),n.e(977),n.e(128),n.e(544)]).then(n.bind(n,10495))},props:{toolId:{type:String,required:!0}}};const Dv=(0,m.Z)(Lv,(function(){var e=this,t=e._self._c;return t("ToolSourceProvider",{attrs:{id:e.toolId},scopedSlots:e._u([{key:"default",fn:function({result:e,loading:n,error:i}){return[n?t("LoadingSpan",{attrs:{message:"Waiting on tool source"}}):i?t("Alert",{attrs:{message:i,variant:"error"}}):t("ToolSourceDisplay",{attrs:{language:e.language,code:e.source}})]}}])})}),[],!1,null,null,null).exports,Ev={__name:"ToolSourceMenuItem",props:{toolId:{type:String,required:!0}},setup(e){const t=e;u.vI.add(zo.Md);const{config:n}=(0,c.Z)(!0),{currentUser:i}=(0,o.Jk)((0,Xe.L)());return{__sfc:!0,config:n,currentUser:i,props:t,FontAwesomeIcon:p.GN,ToolSource:Dv}}},Ov=Ev;const Av=(0,m.Z)(Ov,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.config.enable_tool_source_display||n.currentUser&&n.currentUser.is_admin?t("div",[t("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.tool-source-viewer",modifiers:{"tool-source-viewer":!0}}]},[t(n.FontAwesomeIcon,{attrs:{icon:"far fa-eye"}}),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("View Tool source")])],1),e._v(" "),t("b-modal",{attrs:{id:"tool-source-viewer",title:`Tool Source for ${n.props.toolId}`,size:"lg","ok-only":"","ok-title":"Close"}},[t(n.ToolSource,{attrs:{"tool-id":n.props.toolId}})],1)],1):e._e()}),[],!1,null,null,null).exports;function Iv(e){if(e&&"extra_user_preferences"in e){const t=JSON.parse(e.extra_user_preferences),n="use_cached_job|use_cached_job_checkbox";return!!(n in t)&&["true",!0].includes(t[n])}return!1}const Pv={__name:"ToolOptionsButton",props:{id:{type:String,required:!0},sharableUrl:{type:String,default:null},options:{type:Object,required:!0}},setup(e){const t=e;u.vI.add(h.eW2,h.nNP,h.q7m,h.Xjp,zo.kZ);const{currentUser:n}=(0,o.Jk)((0,Xe.L)()),i=(0,a.ref)([]);qh.Z.load({type:"tool-menu",callback:e=>{e.forEach((e=>{e.activate&&e.config.function&&i.value.push({icon:`fa ${e.config.icon}`,title:e.config.title,onclick:()=>{new Function("options",e.config.function)(t.options)}})}))}});const s=(0,a.computed)((()=>n.value?.is_admin)),r=(0,a.computed)((()=>Boolean(t.sharableUrl)));return{__sfc:!0,currentUser:n,props:t,webhookDetails:i,showDownload:s,showLink:r,onCopyLink:function(){!function(e,t){const n=`${window.location.origin+(0,g.getAppRoot)()}root?tool_id=${e}`;(0,Be.J)(encodeURI(n),t)}(t.id,"Link was copied to your clipboard")},onCopyId:function(){var e,n;e=t.id,n="Tool ID was copied to your clipboard",(0,Be.J)(e,n)},onDownload:function(){var e;e=t.id,window.location.href=`${(0,g.getAppRoot)()}api/tools/${e}/download`},onLink:function(){var e;e=t.sharableUrl,window.open(e)},FontAwesomeIcon:p.GN,ToolSourceMenuItem:Av}}},Rv=Pv;const jv=(0,m.Z)(Rv,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"tool-dropdown",attrs:{"no-caret":"",right:"",role:"button",title:"Options",variant:"link","aria-label":"View all Options",size:"sm"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t(n.FontAwesomeIcon,{attrs:{icon:"fa-caret-down"}})]},proxy:!0}])},[e._v(" "),t("b-dropdown-item",{on:{click:n.onCopyLink}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-link"}}),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Copy Link")])],1),e._v(" "),t("b-dropdown-item",{on:{click:n.onCopyId}},[t(n.FontAwesomeIcon,{attrs:{icon:"far fa-copy"}}),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Copy Tool ID")])],1),e._v(" "),n.showDownload?t("b-dropdown-item",{on:{click:n.onDownload}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-download"}}),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Download")])],1):e._e(),e._v(" "),t(n.ToolSourceMenuItem,{attrs:{"tool-id":e.id}}),e._v(" "),n.showLink?t("b-dropdown-item",{on:{click:n.onLink}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-external-link-alt"}}),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("See in Tool Shed")])],1):e._e(),e._v(" "),e._l(n.webhookDetails,(function(n){return t("b-dropdown-item",{key:n.title,on:{click:n.onclick}},[t("span",{class:n.icon}),e._v(e._s(e.l(n.title))+"\n    ")])}))],2)}),[],!1,null,null,null).exports;const Yv={__name:"ToolVersionsButton",props:{version:{type:String,required:!0},versions:{type:Array,default:null}},emits:["onChangeVersion"],setup(e,{emit:t}){const n=e;u.vI.add(h.LEp,h.NkB,h.hGM);const i=(0,a.computed)((()=>[...n.versions].reverse()));return{__sfc:!0,props:n,emit:t,availableVersions:i,FontAwesomeIcon:p.GN}}},Hv=Yv;const Nv=(0,m.Z)(Hv,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"tool-versions",attrs:{"no-caret":"",right:"",role:"button",title:"Versions",variant:"link","aria-label":"Select Versions",size:"sm"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t(n.FontAwesomeIcon,{attrs:{icon:"fas fa-cubes"}})]},proxy:!0}])},[e._v(" "),e._l(n.availableVersions,(function(i){return t("b-dropdown-item",{key:i,attrs:{active:i===n.props.version},on:{click:()=>n.emit("onChangeVersion",i)}},[i!==n.props.version?t("span",[t(n.FontAwesomeIcon,{attrs:{icon:"fas fa-cube"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Switch to")]),e._v(" "+e._s(i)+"\n        ")],1):t("span",[t(n.FontAwesomeIcon,{attrs:{icon:"fas fa-check"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Selected")]),e._v(" "+e._s(i)+" ")],1)])}))],2)}),[],!1,null,null,null).exports,Fv={__name:"ToolCard",props:{id:{type:String,required:!0},version:{type:String,required:!1,default:"1.0"},title:{type:String,required:!0},description:{type:String,required:!1,default:""},options:{type:Object,required:!0},messageText:{type:String,required:!0},messageVariant:{type:String,default:"info"},disabled:{type:Boolean,default:!1},allowObjectStoreSelection:{type:Boolean,default:!1},preferredObjectStoreId:{type:String,default:null}},emits:["onChangeVersion","updatePreferredObjectStoreId"],setup(e,{emit:t}){const n=e;const i=(0,a.ref)(null);(0,a.watch)((()=>n.id),(()=>{i.value=null}));const{currentUser:s,isAnonymous:r}=(0,o.Jk)((0,Xe.L)()),{isLoaded:l,config:d}=(0,o.Jk)((0,B_.F)()),c=(0,a.computed)((()=>!r.value)),u=(0,a.computed)((()=>n.options.versions)),h=(0,a.computed)((()=>n.options.versions?.length>1)),p=(0,a.computed)((()=>(0,g.getAppRoot)())),f=(0,a.ref)(!1),m=(0,a.ref)(n.preferredObjectStoreId);const _=(0,a.computed)((()=>l.value&&d.value.enable_help_forum_tool_panel_integration));return{__sfc:!0,props:n,emit:t,onChangeVersion:function(e){t("onChangeVersion",e)},errorText:i,onSetError:function(e){i.value=e},currentUser:s,isAnonymous:r,isConfigLoaded:l,config:d,hasUser:c,versions:u,showVersions:h,root:p,showPreferredObjectStoreModal:f,toolPreferredObjectStoreId:m,onShowObjectStoreSelect:function(){f.value=!0},onUpdatePreferredObjectStoreId:function(e){f.value=!1,m.value=e,t("updatePreferredObjectStoreId",e)},showHelpForum:_,Heading:Dt,FormMessage:z_,ToolFooter:ev,ToolHelp:nv,ToolSelectPreferredObjectStore:sv,ToolTargetPreferredObjectStorePopover:dv,ToolHelpForum:fv,ToolTutorialRecommendations:xv,ToolFavoriteButton:ap,ToolOptionsButton:jv,ToolVersionsButton:Nv}}},Bv=Fv;const $v=(0,m.Z)(Bv,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"position-relative"},[t("div",{staticClass:"underlay sticky-top"}),e._v(" "),t("div",{staticClass:"tool-header sticky-top bg-secondary px-2 py-1 rounded"},[t("div",{staticClass:"d-flex justify-content-between"},[t("div",{staticClass:"py-1 d-flex flex-wrap flex-gapx-1"},[t("span",[t("icon",{staticClass:"fa-fw",attrs:{icon:"wrench"}}),e._v(" "),t(n.Heading,{attrs:{h1:"",inline:"",bold:"",size:"text",itemprop:"name"}},[e._v(e._s(n.props.title))])],1),e._v(" "),t("span",{attrs:{itemprop:"description"}},[e._v(e._s(n.props.description))]),e._v(" "),t("span",[e._v("(Galaxy Version "+e._s(n.props.version)+")")])]),e._v(" "),t("div",{staticClass:"d-flex flex-nowrap align-items-start flex-gapx-1"},[t("b-button-group",{staticClass:"tool-card-buttons"},[n.hasUser?t(n.ToolFavoriteButton,{attrs:{id:n.props.id},on:{onSetError:n.onSetError}}):e._e(),e._v(" "),n.showVersions?t(n.ToolVersionsButton,{attrs:{version:n.props.version,versions:n.versions},on:{onChangeVersion:n.onChangeVersion}}):e._e(),e._v(" "),t(n.ToolOptionsButton,{attrs:{id:n.props.id,"sharable-url":n.props.options.sharable_url,options:n.props.options}}),e._v(" "),e.allowObjectStoreSelection?t("b-button",{staticClass:"float-right tool-storage",attrs:{id:"tool-storage",role:"button",variant:"link",size:"sm"},on:{click:n.onShowObjectStoreSelect}},[t("span",{staticClass:"fa fa-hdd"})]):e._e(),e._v(" "),e.allowObjectStoreSelection?t(n.ToolTargetPreferredObjectStorePopover,{attrs:{"tool-preferred-object-store-id":n.toolPreferredObjectStoreId,user:n.currentUser}}):e._e(),e._v(" "),t("b-modal",{attrs:{title:"Tool Execution Preferred Object Store","modal-class":"tool-preferred-object-store-modal","title-tag":"h3",size:"sm","hide-footer":""},model:{value:n.showPreferredObjectStoreModal,callback:function(e){n.showPreferredObjectStoreModal=e},expression:"showPreferredObjectStoreModal"}},[t(n.ToolSelectPreferredObjectStore,{attrs:{"tool-preferred-object-store-id":n.toolPreferredObjectStoreId,root:n.root},on:{updated:n.onUpdatePreferredObjectStoreId}})],1)],1),e._v(" "),e._t("header-buttons")],2)])]),e._v(" "),t("div",{attrs:{id:"tool-card-body"}},[t(n.FormMessage,{attrs:{variant:"danger",message:n.errorText,persistent:!0}}),e._v(" "),t(n.FormMessage,{attrs:{variant:n.props.messageVariant,message:n.props.messageText}}),e._v(" "),e._t("body"),e._v(" "),n.props.disabled?t("div",{staticClass:"portlet-backdrop"}):e._e()],2),e._v(" "),e._t("buttons"),e._v(" "),t("div",[n.props.options.help?t("div",{staticClass:"mt-2 mb-4"},[t(n.Heading,{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v(" Help ")]),e._v(" "),t(n.ToolHelp,{attrs:{content:n.props.options.help}})],1):e._e(),e._v(" "),t(n.ToolTutorialRecommendations,{attrs:{id:n.props.options.id,name:n.props.options.name,version:n.props.options.version,owner:n.props.options.tool_shed_repository?.owner}}),e._v(" "),n.showHelpForum?t(n.ToolHelpForum,{attrs:{"tool-id":n.props.id,"tool-name":n.props.title}}):e._e(),e._v(" "),t(n.ToolFooter,{attrs:{id:n.props.id,"has-citations":n.props.options.citations,xrefs:n.props.options.xrefs,license:n.props.options.license,creators:n.props.options.creator,requirements:n.props.options.requirements}})],1)],2)}),[],!1,null,"ef970490",null).exports,zv={components:{ButtonSpinner:F_,LoadingSpan:z.Z,FormDisplay:le.Z,ToolCard:$v,FormElement:Ut.Z,ToolEntryPoints:Kh,ToolRecommendation:Wh,Heading:Dt},props:{id:{type:String,default:null},version:{type:String,default:null},job_id:{type:String,default:null},history_id:{type:String,default:null}},setup(){const{config:e,isLoaded:t}=(0,o.Jk)((0,B_.F)());return{config:e,isConfigLoaded:t}},data(){return{disabled:!1,loading:!1,showLoading:!0,showForm:!1,showEntryPoints:!1,showRecommendation:!1,showError:!1,showExecuting:!1,formConfig:{},formData:void 0,remapAllowed:!1,errorTitle:null,errorContent:null,errorMessage:"",messageShow:!1,messageVariant:"",messageText:"",useCachedJobs:!1,useEmail:!1,useJobRemapping:!1,entryPoints:[],jobDef:{},jobResponse:{},validationInternal:null,validationScrollTo:null,currentVersion:this.version,preferredObjectStoreId:null}},computed:{...(0,o.rn)(Xe.L,["currentUser"]),...(0,o.rn)(I.z,["currentHistoryId"]),...(0,o.rn)(Us.v,["lastUpdateTime"]),toolName(){return this.formConfig.name},toolId(){const{id:e,version:t}=this.formConfig;return e.endsWith(t)?e:`${e}/${t}`},tooltip(){return`Run tool: ${this.formConfig.name} (${this.formConfig.version})`},errorContentPretty(){return JSON.stringify(this.errorContent,null,4)},remapTitle(){return"job_produced_collection_elements"===this.remapAllowed?"Replace elements in collection?":"Resume dependencies from this job?"},remapHelp(){return"job_produced_collection_elements"===this.remapAllowed?"The previous run of this tool failed. Use this option to replace the failed element(s) in the dataset collection that were produced during the previous tool run.":"The previous run of this tool failed and other tools were waiting for it to finish successfully. Use this option to resume those tools using the new output(s) of this tool run."},initialized(){return void 0!==this.formData}},watch:{currentHistoryId(){this.onHistoryChange()},lastUpdateTime(){this.onHistoryChange()}},created(){this.requestTool()},methods:{...(0,o.nv)(fh,["saveLatestResponse"]),emailAllowed:(e,t)=>e.server_mail_configured&&!t.isAnonymous,reuseAllowed:e=>Iv(e.preferences),onHistoryChange(){const e=(0,l.Bz)();this.initialized&&e&&e.currHistoryPanel&&(console.debug(`ToolForm::onHistoryChange - Loading history changes. [${this.id}]`),this.onUpdate())},onValidation(e){this.validationInternal=e},onChange(e,t){this.formData=e,t&&this.onUpdate()},onUpdate(){this.disabled=!0,console.debug("ToolForm - Updating input parameters.",this.formData),async function(e,t,n,i){const o={tool_id:e,tool_version:t,inputs:i,history_id:n},a=`${(0,g.getAppRoot)()}api/tools/${e}/build`;try{const{data:e}=await v.Z.post(a,o);return e}catch(e){(0,y.t)(e)}}(this.formConfig.id,this.currentVersion,this.history_id,this.formData).then((e=>{this.formConfig=e})).finally((()=>{this.disabled=!1}))},onChangeVersion(e){this.requestTool(e)},requestTool(e){return this.currentVersion=e||this.currentVersion,this.disabled=!0,this.loading=!0,console.debug("ToolForm - Requesting tool.",this.id),async function(e,t,n,i){let o="";const a={};if(n)o=`${(0,g.getAppRoot)()}api/jobs/${n}/build_for_rerun`;else{o=`${(0,g.getAppRoot)()}api/tools/${e}/build`;const t=window.location.search,n=new URLSearchParams(t);for(const[e,t]of n.entries())"tool_id"!=e&&(a[e]=t)}i&&(a.history_id=i),t&&(a.tool_version=t),0!=Object.entries(a).length&&(o=`${o}?${new URLSearchParams(a).toString()}`);try{const{data:e}=await v.Z.get(o);return e}catch(e){(0,y.t)(e)}}(this.id,this.currentVersion,this.job_id,this.history_id).then((t=>{this.formConfig=t,this.remapAllowed=this.job_id&&t.job_remap,this.showForm=!0,this.messageShow=!1,e&&(this.messageVariant="success",this.messageText=`Now you are using '${t.name}' version ${t.version}, id '${t.id}'.`)})).catch((e=>{this.messageVariant="danger",this.messageText=`Loading tool ${this.id} failed: ${e}`,this.messageShow=!0})).finally((()=>{this.disabled=!1,this.loading=!1,this.showLoading=!1}))},onUpdatePreferredObjectStoreId(e){this.preferredObjectStoreId=e},onExecute(e,t){if(this.validationInternal)return void(this.validationScrollTo=this.validationInternal.slice());this.showExecuting=!0;const n={history_id:t,tool_id:this.formConfig.id,tool_version:this.formConfig.version,inputs:{...this.formData}};this.useEmail&&(n.inputs.send_email_notification=!0),this.useJobRemapping&&(n.inputs.rerun_remap_job_id=this.job_id),this.useCachedJobs&&(n.inputs.use_cached_job=!0),this.preferredObjectStoreId&&(n.preferred_object_store_id=this.preferredObjectStoreId),console.debug("toolForm::onExecute()",n);const i=this.$route.fullPath;(async function(e){const t=`${(0,g.getAppRoot)()}api/tools`,{data:n}=await v.Z.post(t,e);return n})(n).then((t=>{this.showExecuting=!1;let o=!1;(0,qu.B8)(),t.produces_entry_points&&(this.showEntryPoints=!0,this.entryPoints=t.jobs);if((t&&t.jobs?t.jobs.length:0)>0){this.showForm=!1;const e=this.toolName;this.saveLatestResponse({jobDef:n,jobResponse:t,toolName:e}),o=i===this.$route.fullPath}else this.showError=!0,this.showForm=!0,this.errorTitle="Job submission rejected.",this.errorContent=t;o?this.$router.push("/jobs/submission/success"):([!0,"true"].includes(e.enable_tool_recommendations)&&(this.showRecommendation=!0),document.querySelector("#center").scrollTop=0)}),(e=>{this.errorMessage=e?.response?.data?.err_msg,this.showExecuting=!1;let t=!0;const i=e&&e.response&&e.response.data&&e.response.data.err_data;if(i){const e=Object.entries(i);e.length>0&&(this.validationScrollTo=e[0],t=!1)}t&&(this.showError=!0,this.errorTitle="Job submission failed.",this.errorContent=n)}))}}},Wv=zv;const Uv=(0,m.Z)(Wv,(function(){var e=this,t=e._self._c;return e.currentUser&&e.currentHistoryId?t("div",[t("b-alert",{attrs:{show:e.messageShow,variant:e.messageVariant}},[e._v("\n        "+e._s(e.messageText)+"\n    ")]),e._v(" "),e.showLoading?t("LoadingSpan",{attrs:{message:"Loading Tool"}}):e._e(),e._v(" "),e.showEntryPoints?t("div",e._l(e.entryPoints,(function(e){return t("ToolEntryPoints",{key:e.id,attrs:{"job-id":e.id}})})),1):e._e(),e._v(" "),t("b-modal",{attrs:{size:"sm",title:e._f("l")(e.errorTitle),scrollable:"","ok-only":""},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e.errorMessage?t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n            "+e._s(e.errorMessage)+"\n        ")]):e._e(),e._v(" "),t("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("\n            The server could not complete this request. Please verify your parameter settings, retry submission and\n            contact the Galaxy Team if this error persists. A transcript of the submitted data is shown below.\n        ")]),e._v(" "),t("small",{staticClass:"text-muted"},[t("pre",[e._v(e._s(e.errorContentPretty))])])],1),e._v(" "),e.showRecommendation?t("ToolRecommendation",{attrs:{"tool-id":e.formConfig.id}}):e._e(),e._v(" "),e.showForm?t("ToolCard",{attrs:{id:e.formConfig.id,version:e.formConfig.version,title:e.formConfig.name,description:e.formConfig.description,options:e.formConfig,"message-text":e.messageText,"message-variant":e.messageVariant,disabled:e.disabled||e.showExecuting,"allow-object-store-selection":e.config.object_store_allows_id_selection,"preferred-object-store-id":e.preferredObjectStoreId,itemscope:"itemscope",itemtype:"https://schema.org/CreativeWork"},on:{updatePreferredObjectStoreId:e.onUpdatePreferredObjectStoreId,onChangeVersion:e.onChangeVersion},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"mt-2 mb-4"},[t("Heading",{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v(" Tool Parameters ")]),e._v(" "),t("FormDisplay",{attrs:{id:e.toolId,inputs:e.formConfig.inputs,errors:e.formConfig.errors,loading:e.loading,"validation-scroll-to":e.validationScrollTo,warnings:e.formConfig.warnings},on:{onChange:e.onChange,onValidation:e.onValidation}})],1),e._v(" "),e.emailAllowed(e.config,e.currentUser)||e.remapAllowed||e.reuseAllowed(e.currentUser)?t("div",{staticClass:"mt-2 mb-4"},[t("Heading",{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v(" Additional Options ")]),e._v(" "),e.emailAllowed(e.config,e.currentUser)?t("FormElement",{attrs:{id:"send_email_notification",title:"Email notification",help:"Send an email notification when the job completes.",type:"boolean"},model:{value:e.useEmail,callback:function(t){e.useEmail=t},expression:"useEmail"}}):e._e(),e._v(" "),e.remapAllowed?t("FormElement",{attrs:{id:"rerun_remap_job_id",title:e.remapTitle,help:e.remapHelp,type:"boolean"},model:{value:e.useJobRemapping,callback:function(t){e.useJobRemapping=t},expression:"useJobRemapping"}}):e._e(),e._v(" "),e.reuseAllowed(e.currentUser)?t("FormElement",{attrs:{id:"use_cached_job",title:"Attempt to re-use jobs with identical parameters?",help:"This may skip executing jobs that you have already run.",type:"boolean"},model:{value:e.useCachedJobs,callback:function(t){e.useCachedJobs=t},expression:"useCachedJobs"}}):e._e()],1):e._e()]},proxy:!0},{key:"header-buttons",fn:function(){return[t("ButtonSpinner",{staticClass:"btn-sm",attrs:{id:"execute",title:"Run Tool",wait:e.showExecuting,tooltip:e.tooltip},on:{onClick:function(t){return e.onExecute(e.config,e.currentHistoryId)}}})]},proxy:!0},{key:"buttons",fn:function(){return[t("ButtonSpinner",{staticClass:"mt-3 mb-3",attrs:{title:"Run Tool",wait:e.showExecuting,tooltip:e.tooltip},on:{onClick:function(t){return e.onExecute(e.config,e.currentHistoryId)}}})]},proxy:!0}],null,!1,4201418420)}):e._e()],1):e._e()}),[],!1,null,null,null).exports;class Vv{constructor(e){this.runData=e,this.name=e.name,this.workflowResourceParameters=e.workflow_resource_parameters,this.hasWorkflowResourceParameters=!Nu.default.isEmpty(this.workflowResourceParameters),this.historyId=e.history_id,this.workflowId=e.id,this.hasUpgradeMessages=e.has_upgrade_messages,this.hasStepVersionChanges=!Nu.default.isEmpty(e.step_version_changes),this.steps=[],this.links=[],this.parms=[],this.wpInputs={},this.parameterInputLabels=[];let t=!1,n=!1;Nu.default.each(e.steps,((e,t)=>{const n="parameter_input"==e.step_type;var i=`${parseInt(t+1)}: ${e.step_label||e.step_name}`;e.annotation&&(i+=` - ${e.annotation}`),e.step_version&&(i+=` (Galaxy Version ${e.step_version})`),e=Object.assign({index:t,fixed_title:Nu.default.escape(i),expanded:0==t||qv(e)||n,errors:e.messages},e),this.steps[t]=e,this.links[t]=[],this.parms[t]={},n&&e.step_label&&this.parameterInputLabels.push(e.step_label)})),Nu.default.each(this.steps,((e,t)=>{(0,Qt.UO)(e.inputs,((e,n)=>{this.parms[t][n]=e}))})),Nu.default.each(this.steps,((e,t)=>{Nu.default.each(e.output_connections,(e=>{Nu.default.each(this.steps,((n,i)=>{n.step_index===e.input_step_index&&this.links[t].push(n)}))}))})),Nu.default.each(this.steps,((e,t)=>{Nu.default.each(this.steps,((n,i)=>{var o={};Nu.default.each(e.output_connections,(e=>{n.step_index===e.input_step_index&&(o[e.input_name]=e)})),Nu.default.each(this.parms[i],((n,i)=>{var a=o[i];a&&(n.connected=!0,n.type="hidden",n.help=n.step_linked?`${n.help}, `:"",n.help+=`Connected to '${a.output_name}' from Step ${parseInt(t)+1}`,n.step_linked=n.step_linked||[],n.step_linked.push({index:e.index,step_type:e.step_type}))}))}))}));var i=0;const o=e=>this.wpInputs[e]=this.wpInputs[e]||{label:e,name:e,type:"text",color:`hsl( ${100*++i}, 70%, 30% )`,cls:"ui-input-linked",links:[],optional:!0};Nu.default.each(this.steps,((e,t)=>{Nu.default.each(this.parms[t],((t,i)=>{!function(e,t){for(var n,i=/\$\{(.+?)\}/g;n=i.exec(String(e));){var a=n[1];t(o(a))}}(t.value,(i=>{n=!0,i.links.push(e),t.wp_linked=!0,t.type="text",t.cls="ui-input-linked"}))})),Nu.default.each(e.replacement_parameters,(e=>{-1==this.parameterInputLabels.indexOf(e)&&o(e)}))})),Nu.default.each(this.steps,(e=>{if("tool"==e.step_type){var n=!0;(0,Qt.UO)(e.inputs,((i,o,a)=>{var s=i.value&&"RuntimeValue"==i.value.__class__,r=-1!=["data","data_collection"].indexOf(i.type),l=a[i.data_ref];i.step_linked&&!qv(i.step_linked)&&(n=!1),i.options&&(0==i.options.length&&!n||i.wp_linked)&&(i.is_workflow=!0),l&&(i.is_workflow=l.step_linked&&!qv(l.step_linked)||i.wp_linked),!i.optional&&(r||i.value&&"RuntimeValue"==i.value.__class__&&!i.step_linked)&&(e.expanded=!0,t=!0),s&&(i.value=null),i.flavor="workflow",s||r||"hidden"===i.type||i.wp_linked||(i.optional||!(0,fe.xb)(i.value)&&""!==i.value)&&(i.collapsible_value=i.value,i.collapsible_preview=!0)}))}})),this.hasOpenToolSteps=t,this.hasReplacementParametersInToolForm=n}isConnected(e,t){return this.parms[e][t].connected}}function qv(e){for(var t=Array.isArray(e)?e:[e],n=0;n<t.length;n++){var i=t[n];if(!i||!i.step_type||!i.step_type.startsWith("data"))return!1}return!0}async function Zv(e,t){const n=`${(0,g.getAppRoot)()}api/workflows/${e}/invocations`;return(await v.Z.post(n,t)).data}u.vI.add(h.Xcf,h.X7o);const Gv={components:{FormDisplay:le.Z,FormCard:Xt.Z,FormMessage:z_},props:{model:{type:Object,required:!0},replaceParams:{type:Object,default:null},validationScrollTo:{type:Array,required:!0},historyId:{type:String,default:null}},data(){return{expanded:this.model.expanded,errorText:null,modelData:{},modelIndex:{},modelInputs:this.model.inputs}},computed:{...(0,o.rn)(Us.v,["lastUpdateTime"]),icon(){return Nh.Z[this.model.step_type]},historyStatusKey(){return`${this.historyId}_${this.lastUpdateTime}`}},watch:{validationScrollTo(){this.validationScrollTo.length>0&&(this.expanded=!0)},historyStatusKey(){this.onHistoryChange()}},methods:{onCreateIndex(){this.modelIndex={},(0,Qt.UO)(this.modelInputs,((e,t)=>{this.modelIndex[t]=e}))},onHistoryChange(){const e=(0,l.Bz)();e&&e.currHistoryPanel&&this.onUpdate()},onChange(e,t){this.modelData=e,t&&this.onUpdate(),this.$emit("onChange",this.model.index,e)},onUpdate(){(async function(e,t,n,i){const o={tool_id:e,tool_version:t,inputs:JSON.parse(JSON.stringify(n)),history_id:i};try{const{data:t}=await v.Z.post(`${(0,g.getAppRoot)()}api/tools/${e}/build`,o);return t}catch(e){(0,y.t)(e)}})(this.model.id,this.model.version,this.modelData,this.historyId).then((e=>{this.onCreateIndex(),(0,Qt.UO)(e.inputs,((e,t)=>{const n=this.modelIndex[t];n.options=e.options,n.textable=e.textable})),this.modelInputs=JSON.parse(JSON.stringify(this.modelInputs))}),(e=>{this.errorText=e}))},onValidation(e){this.$emit("onValidation",this.model.index,e)}}},Jv=Gv;const Kv=(0,m.Z)(Jv,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"step-label":e.model.step_label}},[t("FormCard",{attrs:{title:e.model.fixed_title,icon:e.icon,collapsible:!0,expanded:e.expanded},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormMessage",{attrs:{message:e.errorText,variant:"danger",persistent:!0}}),e._v(" "),t("FormDisplay",{attrs:{inputs:e.modelInputs,"sustain-repeats":!0,"sustain-conditionals":!0,"replace-params":e.replaceParams,"validation-scroll-to":e.validationScrollTo,"collapsed-enable-text":"Edit","collapsed-enable-icon":"fa fa-edit","collapsed-disable-text":"Undo","collapsed-disable-icon":"fa fa-undo"},on:{onChange:e.onChange,onValidation:e.onValidation}})]},proxy:!0}])})],1)}),[],!1,null,null,null).exports;const Xv={components:{FormDisplay:le.Z,FormCard:Xt.Z},props:{model:{type:Object,required:!0},validationScrollTo:{type:Array,required:!0}},data(){return{expanded:this.model.expanded}},computed:{icon(){return Nh.Z[this.model.step_type]},isSimpleInput(){return this.model.step_type.startsWith("data_input")||this.model.step_type.startsWith("data_collection_input")},inputs(){return this.model.inputs.forEach((e=>{e.flavor="module",e.hide_label=this.isSimpleInput})),this.model.inputs&&this.model.inputs.length>0?this.model.inputs:[]},hasInputs(){return this.inputs.length>0}},watch:{validationScrollTo(){this.validationScrollTo.length>0&&(this.expanded=!0)}},methods:{onChange(e){console.log("emitting default change",e),this.$emit("onChange",this.model.index,e)},onValidation(e){this.$emit("onValidation",this.model.index,e)}}},Qv=Xv;const eg=(0,m.Z)(Qv,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"step-label":e.model.step_label}},[t("FormCard",{attrs:{title:e.model.fixed_title,icon:e.icon,collapsible:!0,expanded:e.expanded},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"body",fn:function(){return[e.hasInputs?t("FormDisplay",{attrs:{inputs:e.inputs,"validation-scroll-to":e.validationScrollTo},on:{onChange:e.onChange,onValidation:e.onValidation}}):t("div",{staticClass:"py-2"},[e._v("No options available.")])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,tg={components:{ButtonSpinner:F_,FormDisplay:le.Z,FormCard:Xt.Z,FormElement:Ut.Z,WorkflowRunDefaultStep:Kv,WorkflowRunInputStep:eg},props:{model:{type:Object,required:!0}},data(){return{showExecuting:!1,stepData:{},stepValidations:{},stepScrollTo:{},wpData:{},inputs:{},historyData:{},useCachedJobs:!1,historyInputs:[{type:"conditional",name:"new_history",test_param:{name:"check",label:"Send results to a new history",type:"boolean",value:"false",help:""},cases:[{value:"true",inputs:[{name:"name",label:"History name",type:"text",value:this.model.name}]},{value:"false",inputs:[]}]}]}},computed:{...(0,o.rn)(Xe.L,["currentUser"]),...(0,o.rn)(I.z,["currentHistoryId"]),resourceInputsAvailable(){return this.resourceInputs.length>0},resourceInputs(){return this.toArray(this.model.workflowResourceParameters)},wpInputsAvailable(){return this.wpInputs.length>0},wpInputs(){return this.toArray(this.model.wpInputs)}},methods:{reuseAllowed:e=>Iv(e.preferences),getReplaceParams(e){return function(e,t,n){const i={};(0,Qt.UO)(e,((e,t)=>{i[t]=e}));const o={};return Nu.default.each(i,((e,i)=>{if(e.wp_linked||e.step_linked){let a=null;if(e.step_linked&&(Nu.default.each(e.step_linked,(e=>{if(qv(e)){const n=t[e.index],i=n&&n.input;i&&(a={values:[]},Nu.default.each(i.values,(e=>{a.values.push(e)})))}})),!e.multiple&&a&&a.values.length>0&&(a={values:[a.values[0]]})),e.wp_linked){a=e.value;const t=/\$\{(.+?)\}/g;let i;for(;i=t.exec(e.value);){const e=n[i[1]];e&&(a=a.split(i[0]).join(e))}}void 0!==a&&(o[i]=a)}})),o}(e,this.stepData,this.wpData)},getValidationScrollTo(e){return this.stepScrollTo.stepId==e?this.stepScrollTo.stepError:[]},onDefaultStepInputs(e,t){this.inputs[e]=t.input},onToolStepInputs(e,t){this.stepData[e]=t},onHistoryInputs(e){this.historyData=e},onResourceInputs(e){this.resourceData=e},onWpInputs(e){this.wpData=e},onValidation(e,t){this.stepValidations[e]=t},onExecute(){for(const[e,t]of Object.entries(this.stepValidations))if(t)return void(this.stepScrollTo={stepId:e,stepError:t.slice()});const e={};Object.entries(this.stepData).forEach((([t,n])=>{const i={};Object.entries(n).forEach((([e,n])=>{this.model.isConnected(t,e)||(i[e]=n)})),e[t]=i}));const t={new_history_name:this.historyData["new_history|name"]?this.historyData["new_history|name"]:null,history_id:this.historyData["new_history|name"]?null:this.model.historyId,resource_params:this.resourceData,replacement_params:this.wpData,use_cached_job:this.useCachedJobs,inputs:this.inputs,parameters:e,parameters_normalized:!0,batch:!0,require_exact_tool_versions:!1};console.debug("WorkflowRunForm::onExecute()","Ready for submission.",t),this.showExecuting=!0,Zv(this.model.workflowId,t).then((e=>{console.debug("WorkflowRunForm::onExecute()","Submission successful.",e),this.showExecuting=!1,this.$emit("submissionSuccess",e)})).catch((e=>{console.debug("WorkflowRunForm::onExecute()","Submission failed.",e),this.showExecuting=!1;const t=e&&e.response&&e.response.data&&e.response.data.err_data;if(t)try{const e=Object.entries(t);this.stepScrollTo={stepId:e[0][0],stepError:Object.entries(e[0][1])[0]}}catch(n){console.debug(n,"WorkflowRunForm::onExecute()","Invalid server error response format.",t),this.$emit("submissionError",e)}else this.$emit("submissionError",e)}))},toArray:e=>e?Object.keys(e).map((t=>e[t])):[]}},ng=tg;const ig=(0,m.Z)(ng,(function(){var e=this,t=e._self._c;return e.currentUser&&e.currentHistoryId?t("div",{staticClass:"workflow-expanded-form"},[t("div",{staticClass:"h4 clearfix mb-3"},[t("b",[e._v("Workflow: "+e._s(e.model.name))]),e._v(" "),t("ButtonSpinner",{staticClass:"float-right",attrs:{id:"run-workflow",title:"Run Workflow",wait:e.showExecuting},on:{onClick:e.onExecute}})],1),e._v(" "),e.wpInputsAvailable?t("FormCard",{attrs:{title:"Workflow Parameters"},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormDisplay",{attrs:{inputs:e.wpInputs},on:{onChange:e.onWpInputs}})]},proxy:!0}],null,!1,4074436656)}):e._e(),e._v(" "),t("FormCard",{attrs:{title:"History Options"},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormDisplay",{attrs:{inputs:e.historyInputs},on:{onChange:e.onHistoryInputs}})]},proxy:!0}],null,!1,2105969872)}),e._v(" "),e.reuseAllowed(e.currentUser)?t("FormCard",{attrs:{title:"Job re-use Options"},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormElement",{attrs:{title:"Attempt to re-use jobs with identical parameters?",help:"This may skip executing jobs that you have already run.",type:"boolean"},model:{value:e.useCachedJobs,callback:function(t){e.useCachedJobs=t},expression:"useCachedJobs"}})]},proxy:!0}],null,!1,105983046)}):e._e(),e._v(" "),e.resourceInputsAvailable?t("FormCard",{attrs:{title:"Workflow Resource Options"},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormDisplay",{attrs:{inputs:e.resourceInputs},on:{onChange:e.onResourceInputs}})]},proxy:!0}],null,!1,1783589968)}):e._e(),e._v(" "),e._l(e.model.steps,(function(n){return t("div",{key:n.index},["tool"==n.step_type||"subworkflow"==n.step_type?t("WorkflowRunDefaultStep",{attrs:{model:n,"replace-params":e.getReplaceParams(n.inputs),"validation-scroll-to":e.getValidationScrollTo(n.index),"history-id":e.currentHistoryId},on:{onChange:e.onToolStepInputs,onValidation:e.onValidation}}):t("WorkflowRunInputStep",{attrs:{model:n,"validation-scroll-to":e.getValidationScrollTo(n.index)},on:{onChange:e.onDefaultStepInputs,onValidation:e.onValidation}})],1)}))],2):e._e()}),[],!1,null,null,null).exports;const og=["data_input","data_collection_input","parameter_input"];function ag(e){return og.includes(e)}var sg=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const rg=(0,a.defineComponent)({__name:"WorkflowSelectPreferredObjectStore",props:{invocationPreferredObjectStoreId:{default:null}},emits:["updated"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(n.invocationPreferredObjectStoreId);return{__sfc:!0,props:n,emit:t,selectedObjectStoreId:i,newDatasetsDescription:"The default object store for the outputs of this workflow invocation",defaultOptionTitle:"Use Defaults",defaultOptionDescription:"If the history has a default set, that will be used. If instead, you've set an option in your user preferences - that will be assumed to be your default selection. Finally, the Galaxy configuration will be used.",handleSubmit:function(e){return sg(this,void 0,void 0,(function*(){i.value=e,t("updated",e)}))},SelectObjectStore:lr}}}),lg=rg;const dg=(0,m.Z)(lg,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.SelectObjectStore,{attrs:{"for-what":t.newDatasetsDescription,"selected-object-store-id":t.selectedObjectStoreId,"default-option-title":t.defaultOptionTitle,"default-option-description":t.defaultOptionDescription},on:{onSubmit:t.handleSubmit}})}),[],!1,null,null,null).exports;const cg={mixins:[rv],props:{invocationPreferredObjectStoreId:{type:String,default:null},target:{type:String,required:!0}}};const ug={components:{WorkflowSelectPreferredObjectStore:dg,WorkflowTargetPreferredObjectStorePopover:(0,m.Z)(cg,(function(){var e=this,t=e._self._c;return t("b-popover",{attrs:{target:e.target,triggers:"hover",placement:"bottomleft"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0}])},[e._v(" "),e.invocationPreferredObjectStoreId?t("p",[e._v("This target object store has been set at the invocation level.")]):e._e(),e._v(" "),e.invocationPreferredObjectStoreId?t("ShowSelectedObjectStore",{attrs:{"preferred-object-store-id":e.invocationPreferredObjectStoreId,"for-what":"Galaxy will default to storing this tool run's output in"}}):t("div",[e._v("\n        No selection has been made for this worklfow invocation. Defaults from history, user, or Galaxy will be\n        used.\n    ")]),e._v(" "),t("div",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n        Change this preference object store target by clicking on the storage button in the worklfow run header.\n    ")])],1)}),[],!1,null,null,null).exports},props:{splitObjectStore:{type:Boolean,required:!0},invocationPreferredObjectStoreId:{type:String,default:null},invocationPreferredIntermediateObjectStoreId:{type:String,default:null}},data(){return{showPreferredObjectStoreModal:!1,showIntermediatePreferredObjectStoreModal:!1,selectedObjectStoreId:this.invocationPreferredObjectStoreId,selectedIntermediateObjectStoreId:this.invocationPreferredIntermediateObjectStoreId}},computed:{suffixPrimary(){return this.splitObjectStore?" (Workflow Output Datasets)":""},modalProps:()=>({"modal-class":"invocation-preferred-object-store-modal","title-tag":"h3",size:"sm"}),buttonProps:()=>({role:"button",variant:"link"})},methods:{async onUpdate(e){this.selectedObjectStoreId=e,this.$emit("updated",e,!1),this.showPreferredObjectStoreModal=!1},async onUpdateIntermediate(e){this.selectedIntermediateObjectStoreId=e,this.$emit("updated",e,!0),this.showIntermediatePreferredObjectStoreModal=!1}}};const hg=(0,m.Z)(ug,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"workflow-storage-indicators"},[t("b-button",e._b({staticClass:"workflow-storage-indicator workflow-storage-indicator-primary",attrs:{id:"workflow-storage-indicator-primary"},on:{click:function(t){e.showPreferredObjectStoreModal=!0}}},"b-button",e.buttonProps,!1),[t("span",{staticClass:"fa fa-hdd"})]),e._v(" "),t("WorkflowTargetPreferredObjectStorePopover",{attrs:{target:"workflow-storage-indicator-primary","title-suffix":e.suffixPrimary,"invocation-preferred-object-store-id":e.selectedObjectStoreId}}),e._v(" "),t("b-modal",e._b({attrs:{title:"Invocation Preferred Object Store","hide-footer":""},model:{value:e.showPreferredObjectStoreModal,callback:function(t){e.showPreferredObjectStoreModal=t},expression:"showPreferredObjectStoreModal"}},"b-modal",e.modalProps,!1),[t("WorkflowSelectPreferredObjectStore",{attrs:{"invocation-preferred-object-store-id":e.selectedObjectStoreId},on:{updated:e.onUpdate}})],1),e._v(" "),e.splitObjectStore?t("b-button",e._b({staticClass:"workflow-storage-indicator workflow-storage-indicator-intermediate",attrs:{id:"workflow-storage-indicator-intermediate"},on:{click:function(t){e.showIntermediatePreferredObjectStoreModal=!0}}},"b-button",e.buttonProps,!1),[t("span",{staticClass:"fa fa-hdd"})]):e._e(),e._v(" "),e.splitObjectStore?t("WorkflowTargetPreferredObjectStorePopover",{attrs:{target:"workflow-storage-indicator-intermediate","title-suffix":" (Intermediate Datasets)","invocation-preferred-object-store-id":e.selectedIntermediateObjectStoreId}}):e._e(),e._v(" "),t("b-modal",e._b({attrs:{title:"Invocation Preferred Object Store (Intermediate Datasets)","hide-footer":""},model:{value:e.showIntermediatePreferredObjectStoreModal,callback:function(t){e.showIntermediatePreferredObjectStoreModal=t},expression:"showIntermediatePreferredObjectStoreModal"}},"b-modal",e.modalProps,!1),[t("WorkflowSelectPreferredObjectStore",{attrs:{"invocation-preferred-object-store-id":e.selectedIntermediateObjectStoreId},on:{updated:e.onUpdateIntermediate}})],1)],1)}),[],!1,null,null,null).exports,pg={components:{ButtonSpinner:F_,FormDisplay:le.Z,WorkflowStorageConfiguration:hg},props:{model:{type:Object,required:!0},targetHistory:{type:String,default:"current"},useJobCache:{type:Boolean,default:!1}},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0),{currentUser:n}=(0,o.Jk)((0,Xe.L)());return{config:e,isConfigLoaded:t,currentUser:n}},data(){return{formData:{},inputTypes:{},stepValidations:{},sendToNewHistory:"new"==this.targetHistory||"prefer_new"==this.targetHistory,useCachedJobs:this.useJobCache,splitObjectStore:!1,preferredObjectStoreId:null,preferredIntermediateObjectStoreId:null,waitingForRequest:!1}},computed:{formInputs(){const e=[];return Object.values(this.model.wpInputs).forEach((t=>{const n=Object.assign({},t);n.color=void 0,e.push(n),this.inputTypes[n.name]="replacement_parameter"})),this.model.steps.forEach(((t,n)=>{if(ag(t.step_type)){const n=new String(t.step_index),i=t.step_label||new String(t.step_index+1),o=t.annotation,a=t.inputs[0],s=Object.assign({},a,{name:n,help:o,label:i});s.flavor="module",e.push(s),this.inputTypes[n]=t.step_type}})),e},hasValidationErrors(){return Boolean(Object.values(this.stepValidations).find((e=>null!=e)))}},methods:{onValidation(e){e?a.default.set(this.stepValidations,e[0],e[1]):this.stepValidations={}},reuseAllowed:e=>e&&Iv(e.preferences),showRuntimeSettings(e){return this.targetHistory.indexOf("prefer")>=0||e&&this.reuseAllowed(e)},onChange(e){this.formData=e},onStorageUpdate:function(e,t){t?this.preferredIntermediateObjectStoreId=e:this.preferredObjectStoreId=e},onExecute(){const e={},t={};for(const n in this.formData){const i=this.formData[n],o=this.inputTypes[n];"replacement_parameter"==o?e[n]=i:ag(o)&&(t[n]=i)}const n={replacement_dict:e,inputs:t,inputs_by:"step_index",batch:!0,use_cached_job:this.useCachedJobs,require_exact_tool_versions:!1};this.sendToNewHistory?n.new_history_name=this.model.name:n.history_id=this.model.historyId,this.splitObjectStore?(null!=this.preferredObjectStoreId&&(n.preferred_outputs_object_store_id=this.preferredObjectStoreId),null!=this.preferredIntermediateObjectStoreId&&this.splitObjectStore&&(n.preferred_intermediate_object_store_id=this.preferredIntermediateObjectStoreId)):null!=this.preferredObjectStoreId&&(n.preferred_object_store_id=this.preferredObjectStoreId),this.waitingForRequest=!0,Zv(this.model.workflowId,n).then((e=>{this.$emit("submissionSuccess",e)})).catch((e=>{this.$emit("submissionError",(0,y.a)(e))})).finally((()=>this.waitingForRequest=!1))}}},fg=pg;const mg=(0,m.Z)(fg,(function(){var e=this,t=e._self._c;return t("div",[e.isConfigLoaded?t("div",{staticClass:"h4 clearfix mb-3"},[t("b",[e._v("Workflow: "+e._s(e.model.name))]),e._v(" "),t("ButtonSpinner",{staticClass:"float-right",attrs:{id:"run-workflow",wait:e.waitingForRequest,disabled:e.hasValidationErrors,title:"Run Workflow"},on:{onClick:e.onExecute}}),e._v(" "),e.showRuntimeSettings(e.currentUser)?t("b-dropdown",{ref:"dropdown",staticClass:"workflow-run-settings float-right",staticStyle:{"margin-right":"10px"},attrs:{id:"dropdown-form",title:"Workflow Run Settings","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("span",{staticClass:"fa fa-cog"})]},proxy:!0}],null,!1,2396378870)},[e._v(" "),t("b-dropdown-form",[t("b-form-checkbox",{staticClass:"workflow-run-settings-target",model:{value:e.sendToNewHistory,callback:function(t){e.sendToNewHistory=t},expression:"sendToNewHistory"}},[e._v("\n                    Send results to a new history\n                ")]),e._v(" "),e.reuseAllowed(e.currentUser)?t("b-form-checkbox",{attrs:{title:"This may skip executing jobs that you have already run."},model:{value:e.useCachedJobs,callback:function(t){e.useCachedJobs=t},expression:"useCachedJobs"}},[e._v("\n                    Attempt to re-use jobs with identical parameters?\n                ")]):e._e(),e._v(" "),e.isConfigLoaded&&e.config.object_store_allows_id_selection?t("b-form-checkbox",{model:{value:e.splitObjectStore,callback:function(t){e.splitObjectStore=t},expression:"splitObjectStore"}},[e._v("\n                    Send outputs and intermediate to different object stores?\n                ")]):e._e(),e._v(" "),e.isConfigLoaded&&e.config.object_store_allows_id_selection?t("WorkflowStorageConfiguration",{attrs:{"split-object-store":e.splitObjectStore,"invocation-preferred-object-store-id":e.preferredObjectStoreId,"invocation-intermediate-preferred-object-store-id":e.preferredIntermediateObjectStoreId},on:{updated:e.onStorageUpdate}}):e._e()],1)],1):e._e()],1):e._e(),e._v(" "),t("FormDisplay",{attrs:{inputs:e.formInputs,"allow-empty-value-on-required-input":!0},on:{onChange:e.onChange,onValidation:e.onValidation}}),e._v(" "),t("a",{staticClass:"workflow-expand-form-link",attrs:{href:"#"},on:{click:function(t){return e.$emit("showAdvanced")}}},[e._v("Expand to full workflow form.")])],1)}),[],!1,null,null,null).exports;const _g={components:{WorkflowInvocationState:pm.default},props:{workflowName:{type:String,required:!0},invocations:{type:Array,required:!0}},computed:{...(0,o.rn)(I.z,["currentHistoryId"]),timesExecuted(){return this.invocations.length},multipleInvocations(){return this.timesExecuted>1},multipleHistoryTargets(){return this.targetHistories.length>1},targetHistories(){return this.invocations.reduce(((e,t)=>(t.history_id&&!e.includes(t.history_id)&&e.push(t.history_id),e)),[])},multiHistoryView:()=>`${(0,g.getAppRoot)()}histories/view_multiple`,newHistoryTarget(){return`${(0,g.getAppRoot)()}history/switch_to_history?hist_id=${this.invocations[0].history_id}`},wasNewHistoryTarget(){return!(this.invocations.length<1)&&(this.invocations[0].history_id&&this.currentHistoryId!=this.invocations[0].history_id)}},mounted(){new qh.Z.WebhookView({type:"workflow",toolId:null,toolVersion:null}),(0,qu.B8)()}};const vg=(0,m.Z)(_g,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"donemessagelarge"},[t("p",[e._v("\n            Successfully invoked workflow "),t("b",[e._v(e._s(e.workflowName))]),e._v(" "),e.multipleInvocations?t("em",[e._v(" - "+e._s(e.timesExecuted)+" times")]):e._e(),e._v(".\n        ")]),e._v(" "),e.multipleHistoryTargets?t("p",[e._v("\n            This workflow will generate results in multiple histories. You can observe progress in the\n            "),t("a",{attrs:{href:e.multiHistoryView}},[e._v("history multi-view")]),e._v(".\n        ")]):e.wasNewHistoryTarget?t("p",[e._v("\n            This workflow will generate results in a new history.\n            "),t("a",{staticClass:"workflow-new-history-target-link",attrs:{href:e.newHistoryTarget}},[e._v("Switch to that history now")]),e._v(".\n        ")]):t("p",[e._v("You can check the status of queued jobs and view the resulting data the History panel.")])]),e._v(" "),e._l(e.invocations,(function(e,n){return t("WorkflowInvocationState",{key:e.id,attrs:{index:n,"invocation-id":e.id}})})),e._v(" "),t("div",{attrs:{id:"webhook-view"}})],2)}),[],!1,null,null,null).exports,gg={components:{LoadingSpan:z.Z,WorkflowRunSuccess:vg,WorkflowRunForm:ig,WorkflowRunFormSimple:mg},props:{workflowId:{type:String,required:!0},preferSimpleForm:{type:Boolean,default:!1},simpleFormTargetHistory:{type:String,default:"current"},simpleFormUseJobCache:{type:Boolean,default:!1}},data:()=>({error:null,loading:!0,hasUpgradeMessages:!1,hasStepVersionChanges:!1,workflowName:"",invocations:null,simpleForm:null,submissionError:null,model:null}),computed:{...(0,o.rn)(I.z,["currentHistoryId","getHistoryById"]),...(0,o.rn)(Us.v,["lastUpdateTime"]),historyStatusKey(){return`${this.currentHistoryId}_${this.lastUpdateTime}`}},watch:{historyStatusKey(){this.invocations||this.loadRun()}},created(){this.loadRun()},methods:{handleInvocations(e){this.invocations=e,this.invocations.forEach((e=>{this.getHistoryById(e.history_id)}))},handleSubmissionError(e){this.submissionError=(0,y.a)(e)},loadRun(){(async function(e){const t=`${(0,g.getAppRoot)()}api/workflows/${e}/download?style=run`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}})(this.workflowId).then((e=>{this.loading=!1;const t=new Vv(e);let n=this.preferSimpleForm;n&&(t.hasReplacementParametersInToolForm&&(console.log("cannot render simple workflow form - has ${} values in tool steps"),n=!1),t.hasOpenToolSteps&&(console.log("cannot render simple workflow form - one or more tools have disconnected runtime inputs"),n=!1),t.hasWorkflowResourceParameters&&(console.log("Cannot render simple workflow form - workflow resource parameters are configured"),n=!1)),this.simpleForm=n,this.model=t,this.hasUpgradeMessages=t.hasUpgradeMessages,this.hasStepVersionChanges=t.hasStepVersionChanges,this.workflowName=this.model.name})).catch((e=>{this.error=(0,y.a)(e)}))},showAdvanced(){this.simpleForm=!1}}};const yg=(0,m.Z)(gg,(function(){var e=this,t=e._self._c;return t("span",[e.error?t("b-alert",{attrs:{variant:"danger",show:""}},[t("h2",{staticClass:"h-text"},[e._v("Workflow cannot be executed. Please resolve the following issue:")]),e._v("\n        "+e._s(e.error)+"\n    ")]):t("span",[e.loading?t("b-alert",{attrs:{variant:"info",show:""}},[t("LoadingSpan",{attrs:{message:"Loading workflow run data"}})],1):e.invocations?t("WorkflowRunSuccess",{attrs:{invocations:e.invocations,"workflow-name":e.workflowName}}):t("div",{staticClass:"ui-form-composite"},[t("div",{staticClass:"ui-form-composite-messages mb-4"},[e.hasUpgradeMessages?t("b-alert",{attrs:{variant:"warning",show:""}},[e._v("\n                    Some tools in this workflow may have changed since it was last saved or some errors were found.\n                    The workflow may still run, but any new options will have default values. Please review the\n                    messages below to make a decision about whether the changes will affect your analysis.\n                ")]):e._e(),e._v(" "),e.hasStepVersionChanges?t("b-alert",{attrs:{variant:"warning",show:""}},[e._v("\n                    Some tools are being executed with different versions compared to those available when this\n                    workflow was last saved because the other versions are not or no longer available on this Galaxy\n                    instance. To upgrade your workflow and dismiss this message simply edit the workflow and re-save\n                    it.\n                ")]):e._e(),e._v(" "),e.submissionError?t("b-alert",{attrs:{variant:"danger",show:""}},[e._v("\n                    Workflow submission failed: "+e._s(e.submissionError)+"\n                ")]):e._e()],1),e._v(" "),e.simpleForm?t("WorkflowRunFormSimple",{attrs:{model:e.model,"target-history":e.simpleFormTargetHistory,"use-job-cache":e.simpleFormUseJobCache},on:{submissionSuccess:e.handleInvocations,submissionError:e.handleSubmissionError,showAdvanced:e.showAdvanced}}):t("WorkflowRunForm",{attrs:{model:e.model},on:{submissionSuccess:e.handleInvocations,submissionError:e.handleSubmissionError}})],1)],1)],1)}),[],!1,null,null,null).exports;var bg=n(44020),wg=n.n(bg);const kg={components:{CenterFrame:Sp,ToolForm:Uv,WorkflowRun:yg},props:{config:{type:Object,required:!0},query:{type:Object,required:!0}},computed:{isController(){return this.query.m_c&&this.query.m_a},isTool(){return this.query.tool_id||this.query.job_id},isUpload(){return"upload1"===this.query.tool_id},isWorkflow(){return this.query.workflow_id},controllerParams(){return`${this.query.m_c}/${this.query.m_a}`},toolParams(){const e={...this.query},t=this.query.tool_id;t&&(e.id=t.indexOf("+")>=0?t:wg()(t));const n=this.query.version;return n&&(e.version=n.indexOf("+")>=0?n:wg()(n)),e},workflowParams(){const e=this.query.workflow_id;let t="prefer"==this.config.simplified_workflow_run_ui;"prefer"==this.query.simplified_workflow_run_ui&&(t=!0);return{workflowId:e,preferSimpleForm:t,simpleFormTargetHistory:this.config.simplified_workflow_run_ui_target_history,simpleFormUseJobCache:"on"==this.config.simplified_workflow_run_ui_job_cache}}}};const Cg=(0,m.Z)(kg,(function(){var e=this,t=e._self._c;return t("div",[e.isTool&&!e.isUpload?t("ToolForm",e._b({},"ToolForm",e.toolParams,!1)):e.isWorkflow?t("WorkflowRun",e._b({},"WorkflowRun",e.workflowParams,!1)):e.isController?t("div",{attrs:{src:e.controllerParams}}):t("CenterFrame",{attrs:{src:"/welcome"}})],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const xg={props:{token:{type:String,default:null},expiredUser:{type:String,default:null},messageText:{type:String,default:null},messageVariant:{type:String,default:null}},data(){return{password:null,confirm:null,current:null,message:this.messageText,variant:this.messageVariant}},methods:{submit(){v.Z.post((0,D.dq)("/user/change_password"),{token:this.token,id:this.expiredUser,current:this.current,password:this.password,confirm:this.confirm}).then((e=>{window.location=(0,D.dq)("/")})).catch((e=>{this.variant="danger";const t=e.response&&e.response.data&&e.response.data.err_msg;this.message=t||"Password change failed for an unknown reason."}))}}};const Sg=(0,m.Z)(xg,(function(){var e=this,t=e._self._c;return t("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e.message?t("b-alert",{attrs:{variant:e.variant,show:""}},[e._v("\n        "+e._s(e.message)+"\n    ")]):e._e(),e._v(" "),t("b-card",{attrs:{header:"Change your password"}},[e.expiredUser?t("b-form-group",{attrs:{label:"Current Password"}},[t("b-form-input",{attrs:{type:"password"},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}})],1):e._e(),e._v(" "),t("b-form-group",{attrs:{label:"New Password"}},[t("b-form-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Confirm password"}},[t("b-form-input",{attrs:{type:"password"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}})],1),e._v(" "),t("b-button",{attrs:{type:"submit"}},[e._v("Save new password")])],1)],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const Mg={props:{registrationWarningMessage:{type:String,default:null},termsUrl:{type:String,default:null}},data(){const e=new URLSearchParams(window.location.search);return{messageText:null,messageVariant:null,provider:e.get("provider"),termsRead:!1,token:e.get("provider_token")}},computed:{termsUrlwithRoot(){return(0,D.dq)(this.termsUrl)}},methods:{login(){this.$emit("setRedirect","/user/external_ids"),window.location=(0,D.dq)("/login")},submit(){this.provider&&this.token?v.Z.post((0,D.dq)(`/authnz/${this.provider}/create_user?token=${this.token}`)).then((e=>{e.data.redirect_uri?window.location=e.data.redirect_uri:window.location=(0,D.dq)("/")})).catch((e=>{this.messageVariant="danger";const t=e.response.data&&e.response.data.err_msg;this.messageText=t||"Login failed for an unknown reason."})):(this.messageVariant="danger",this.messageText="Missing provider and/or token.")}}};const Tg=(0,m.Z)(Mg,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"row justify-content-md-center"},[t("div",{staticClass:"col col-lg-6"},[t("b-alert",{attrs:{show:!!e.registrationWarningMessage,variant:"info"}},[e._v("\n                "+e._s(e.registrationWarningMessage)+"\n            ")]),e._v(" "),t("b-alert",{attrs:{show:!!e.messageText,variant:e.messageVariant}},[e._v("\n                "+e._s(e.messageText)+"\n            ")]),e._v(" "),t("b-form",{attrs:{id:"confirmation"},on:{submit:function(t){return t.preventDefault(),e.submit()}}},[t("b-card",{attrs:{"no-body":"",header:"Confirm new account creation"}},[t("b-card-body",[t("p",[e._v("Looks like you are about to create a new account!")]),e._v(" "),t("p",[e._v("\n                            Do you already have a Galaxy account? If so, click\n                            "),t("em",[e._v("'No, go back to login'")]),e._v(" to log in using your existing username and password to\n                            connect this account via "),t("strong",[e._v("User Preferences")]),e._v(".\n                            "),t("a",{attrs:{href:"https://galaxyproject.org/authnz/use/oidc/idps/custos/#link-an-existing-galaxy-account",target:"_blank"}},[e._v("\n                                More details here.\n                            ")])]),e._v(" "),t("p",[e._v("\n                            If you wish to continue and create a new account, select\n                            "),t("em",[e._v("'Yes, create new account'")]),e._v(".\n                        ")]),e._v(" "),t("p",[e._v("\n                            Reminder: Registration and usage of multiple accounts is tracked and such accounts are\n                            subject to termination and data deletion on public Galaxy servers. Connect existing\n                            account now to continue to use your existing data and avoid possible loss of data.\n                        ")]),e._v(" "),t("b-form-group",[t("b-form-checkbox",{model:{value:e.termsRead,callback:function(t){e.termsRead=t},expression:"termsRead"}},[e._v("\n                                I have read and accept these terms to create a new Galaxy account.\n                            ")])],1),e._v(" "),t("b-button",{attrs:{name:"confirm",type:"submit",disabled:!e.termsRead},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("\n                            Yes, create new account\n                        ")]),e._v(" "),t("b-button",{attrs:{name:"cancel",type:"submit"},on:{click:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[e._v("No, go back to login")])],1),e._v(" "),t("b-card-footer",[e._v("\n                        Already have an account?\n                        "),t("a",{attrs:{id:"login-toggle",href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[e._v("\n                            Log in here.\n                        ")])])],1)],1)],1),e._v(" "),e.termsUrl?t("div",{staticClass:"col"},[t("b-embed",{attrs:{type:"iframe",src:e.termsUrlwithRoot,aspect:"1by1"}})],1):e._e()])])}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const Lg={components:{ExternalLogin:bf,NewUserConfirmation:Tg},props:{allowUserCreation:{type:Boolean,default:!1},enableOidc:{type:Boolean,default:!1},redirect:{type:String,default:null},registrationWarningMessage:{type:String,default:null},sessionCsrfToken:{type:String,required:!0},showWelcomeWithLogin:{type:Boolean,default:!1},termsUrl:{type:String,default:null},welcomeUrl:{type:String,default:null}},data(){const e=new URLSearchParams(window.location.search);return{login:null,password:null,url:null,messageText:null,messageVariant:null,headerWelcome:(0,Ee.ZP)("Welcome to Galaxy, please log in"),labelNameAddress:(0,Ee.ZP)("Public Name or Email Address"),labelPassword:(0,Ee.ZP)("Password"),confirmURL:e.has("confirm")&&"true"==e.get("confirm"),connectExternalEmail:e.get("connect_external_email"),connectExternalProvider:e.get("connect_external_provider"),connectExternalLabel:e.get("connect_external_label")}},computed:{welcomeUrlWithRoot(){return(0,D.dq)(this.welcomeUrl)}},methods:{toggleLogin(){this.$emit("toggle-login")},submitLogin(){let e=this.redirect;this.connectExternalEmail&&(this.login=this.connectExternalEmail),localStorage.getItem("redirect_url")&&(e=localStorage.getItem("redirect_url")),v.Z.post((0,D.dq)("/user/login"),{login:this.login,password:this.password,redirect:e,session_csrf_token:this.sessionCsrfToken}).then((({data:e})=>{e.message&&e.status&&alert(e.message),e.expired_user?window.location=(0,D.dq)(`/root/login?expired_user=${e.expired_user}`):this.connectExternalProvider?window.location=(0,D.dq)("/user/external_ids?connect_external=true"):e.redirect?window.location=encodeURI(e.redirect):window.location=(0,D.dq)("/")})).catch((e=>{this.messageVariant="danger";const t=e.response&&e.response.data&&e.response.data.err_msg;this.connectExternalProvider&&t&&t.toLowerCase().includes("invalid")?this.messageText=t+" Try logging in to the existing account through an external provider below.":this.messageText=t||"Login failed for an unknown reason."}))},setRedirect(e){localStorage.setItem("redirect_url",e)},resetLogin(){v.Z.post((0,D.dq)("/user/reset_password"),{email:this.login}).then((e=>{this.messageVariant="info",this.messageText=e.data.message})).catch((e=>{this.messageVariant="danger";const t=e.response.data&&e.response.data.err_msg;this.messageText=t||"Password reset failed for an unknown reason."}))},returnToLogin(){window.location=(0,D.dq)("/login/start")}}},Dg=Lg;const Eg=(0,m.Z)(Dg,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"row justify-content-md-center"},[e.confirmURL?[t("NewUserConfirmation",{attrs:{"registration-warning-message":e.registrationWarningMessage,"terms-url":e.termsUrl},on:{setRedirect:e.setRedirect}})]:[t("div",{staticClass:"col col-lg-6"},[t("b-alert",{attrs:{show:!!e.messageText,variant:e.messageVariant}},[t("span",{domProps:{innerHTML:e._s(e.messageText)}})]),e._v(" "),t("b-alert",{attrs:{show:!!e.connectExternalProvider,variant:"info"}},[e._v("\n                    There already exists a user with the email "),t("i",[e._v(e._s(e.connectExternalEmail))]),e._v(". In order to associate this account with "),t("i",[e._v(e._s(e.connectExternalLabel))]),e._v(", you must first login to your existing account.\n                ")]),e._v(" "),t("b-form",{attrs:{id:"login"},on:{submit:function(t){return t.preventDefault(),e.submitLogin()}}},[t("b-card",{attrs:{"no-body":""}},[e.connectExternalProvider?e._e():t("b-card-header",[t("span",[e._v(e._s(e.headerWelcome))])]),e._v(" "),t("b-card-body",[t("div",[t("b-form-group",{attrs:{label:e.labelNameAddress,"label-for":"login-form-name"}},[e.connectExternalProvider?t("b-form-input",{attrs:{id:"login-form-name",disabled:"",value:e.connectExternalEmail,name:"login",type:"text"}}):t("b-form-input",{attrs:{id:"login-form-name",name:"login",type:"text"},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}})],1),e._v(" "),t("b-form-group",{attrs:{label:e.labelPassword,"label-for":"login-form-password"}},[t("b-form-input",{attrs:{id:"login-form-password",name:"password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),t("b-form-text",[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Forgot password?")]),e._v(" "),t("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.resetLogin.apply(null,arguments)}}},[e._v("\n                                            Click here to reset your password.\n                                        ")])])],1),e._v(" "),t("b-button",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{name:"login",type:"submit"}},[e._v("Login")])],1),e._v(" "),e.enableOidc?t("div",[t("ExternalLogin",{attrs:{login_page:!0,exclude_idps:[e.connectExternalProvider]}})],1):e._e()]),e._v(" "),t("b-card-footer",[e.connectExternalProvider?t("span",[e._v("\n                                Do not wish to connect to an external provider?\n                                "),t("a",{attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.returnToLogin.apply(null,arguments)}}},[e._v("\n                                    Return to login here.\n                                ")])]):t("span",[e._v("\n                                Don't have an account?\n                                "),e.allowUserCreation?t("span",[t("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{id:"register-toggle",href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.toggleLogin.apply(null,arguments)}}},[e._v("\n                                        Register here.\n                                    ")])]):t("span",[e._v("\n                                    Registration for this Galaxy instance is disabled. Please contact an\n                                    administrator for assistance.\n                                ")])])])],1)],1)],1)],e._v(" "),e.showWelcomeWithLogin?t("div",{staticClass:"col"},[t("b-embed",{attrs:{type:"iframe",src:e.welcomeUrlWithRoot,aspect:"1by1"}})],1):e._e()],2)])}),[],!1,null,"24397faf",null).exports;a.default.use(d.ZPm);const Og={components:{ExternalLogin:bf},props:{enableOidc:{type:Boolean,default:!1},showLoginLink:{type:Boolean,default:!1},mailingJoinAddr:{type:String,default:null},preferCustosLogin:{type:Boolean,default:!1},redirect:{type:String,default:null},registrationWarningMessage:{type:String,default:null},serverMailConfigured:{type:Boolean,default:!1},sessionCsrfToken:{type:String,required:!0},termsUrl:{type:String,default:null}},data:()=>({disableCreate:!1,email:null,password:null,username:null,confirm:null,subscribe:null,messageText:null,messageVariant:null,labelEmailAddress:(0,Ee.ZP)("Email address"),labelPassword:(0,Ee.ZP)("Password"),labelConfirmPassword:(0,Ee.ZP)("Confirm password"),labelPublicName:(0,Ee.ZP)("Public name"),labelSubscribe:(0,Ee.ZP)("Subscribe to mailing list")}),computed:{custosPreferred(){return this.enableOidc&&this.preferCustosLogin}},methods:{toggleLogin(){this.$emit("toggle-login")},submit(){this.disableCreate=!0,v.Z.post((0,D.dq)("/user/create"),{email:this.email,username:this.username,password:this.password,confirm:this.confirm,subscribe:this.subscribe,session_csrf_token:this.sessionCsrfToken}).then((e=>{e.data.message&&e.data.status&&alert(e.data.message),window.location=this.redirect||(0,D.dq)("/welcome/new")})).catch((e=>{this.disableCreate=!1,this.messageVariant="danger";const t=e.response.data&&e.response.data.err_msg;this.messageText=t||"Registration failed for an unknown reason."}))}}};const Ag=(0,m.Z)(Og,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"row justify-content-md-center"},[t("div",{staticClass:"col col-lg-6"},[t("b-alert",{attrs:{show:!!e.registrationWarningMessage,variant:"info"}},[t("span",{domProps:{innerHTML:e._s(e.registrationWarningMessage)}})]),e._v(" "),t("b-alert",{attrs:{show:!!e.messageText,variant:e.messageVariant}},[e._v("\n                "+e._s(e.messageText)+"\n            ")]),e._v(" "),t("b-form",{attrs:{id:"registration"},on:{submit:function(t){return t.preventDefault(),e.submit()}}},[t("b-card",{attrs:{"no-body":""}},[e.custosPreferred?t("span",[t("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-oidc",modifiers:{"accordion-oidc":!0}}],attrs:{role:"button"}},[e._v("\n                            Register using institutional account\n                        ")]),e._v(" "),t("b-collapse",{attrs:{id:"accordion-oidc",visible:"",role:"tabpanel",accordion:"registration_acc"}},[t("b-card-body",[e._v("\n                                Create a Galaxy account using an institutional account (e.g.:Google/JHU). This will\n                                redirect you to your institutional login through Custos.\n                                "),t("ExternalLogin",{attrs:{login_page:!1}})],1)],1)],1):e._e(),e._v(" "),e.custosPreferred?t("b-card-header",{directives:[{name:"localize",rawName:"v-localize"},{name:"b-toggle",rawName:"v-b-toggle.accordion-register",modifiers:{"accordion-register":!0}}],attrs:{role:"button"}},[e._v("\n                        Or, register with email\n                    ")]):t("b-card-header",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Create a Galaxy account")]),e._v(" "),t("b-collapse",{attrs:{id:"accordion-register",visible:!e.custosPreferred,role:"tabpanel",accordion:"registration_acc"}},[t("b-card-body",[t("b-form-group",{attrs:{label:e.labelEmailAddress,"label-for":"register-form-email"}},[t("b-form-input",{attrs:{id:"register-form-email",name:"email",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),t("b-form-group",{attrs:{label:e.labelPassword,"label-for":"register-form-password"}},[t("b-form-input",{attrs:{id:"register-form-password",name:"password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),t("b-form-group",{attrs:{label:e.labelConfirmPassword,"label-for":"register-form-confirm"}},[t("b-form-input",{attrs:{id:"register-form-confirm",name:"confirm",type:"password"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}})],1),e._v(" "),t("b-form-group",{attrs:{label:e.labelPublicName,"label-for":"register-form-username"}},[t("b-form-input",{attrs:{id:"register-form-username",name:"username",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),t("b-form-text",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Your public name is an identifier that will be used to generate addresses for\n                                    information you share publicly. Public names must be at least three characters\n                                    in length and contain only lower-case letters, numbers, dots, underscores, and\n                                    dashes ('.', '_', '-').\n                                ")])],1),e._v(" "),e.mailingJoinAddr&&e.serverMailConfigured?t("b-form-group",[t("b-form-checkbox",{attrs:{id:"register-form-subscribe",name:"subscribe",type:"checkbox"},model:{value:e.subscribe,callback:function(t){e.subscribe=t},expression:"subscribe"}},[e._v("\n                                    "+e._s(e.labelSubscribe)+"\n                                ")])],1):e._e(),e._v(" "),t("b-button",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{name:"create",type:"submit",disabled:e.disableCreate}},[e._v("\n                                Create\n                            ")])],1)],1),e._v(" "),e.showLoginLink?t("b-card-footer",[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Already have an account?")]),e._v(" "),t("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{id:"login-toggle",href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.toggleLogin.apply(null,arguments)}}},[e._v("\n                            Log in here.\n                        ")])]):e._e()],1)],1)],1),e._v(" "),e.termsUrl?t("div",{staticClass:"col position-relative embed-container"},[t("iframe",{staticClass:"terms-iframe",attrs:{title:"terms-of-use",src:e.termsUrl,frameborder:"0"}}),e._v(" "),t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"scroll-hint"},[e._v("↓ Scroll to review ↓")])]):e._e()])])}),[],!1,null,"fa93c1dc",null).exports;a.default.use(d.ZPm);const Ig={components:{LoginForm:Eg,RegisterForm:Ag},props:{allowUserCreation:{type:Boolean,required:!0},enableOidc:{type:Boolean,default:!1},mailingJoinAddr:{type:String,default:null},preferCustosLogin:{type:Boolean,default:!1},redirect:{type:String,default:null},registrationWarningMessage:{type:String,default:null},showLoginLink:{type:Boolean,default:!0},sessionCsrfToken:{type:String,required:!0},serverMailConfigured:{type:Boolean,default:!1},showWelcomeWithLogin:{type:Boolean,default:!1},termsUrl:{type:String,default:null},welcomeUrl:{type:String,default:null}},data:()=>({showLogin:!0}),methods:{toggleLogin(){this.showLogin=!this.showLogin}}};const Pg={components:{ChangePassword:Sg,LoginIndex:(0,m.Z)(Ig,(function(){var e=this,t=e._self._c;return t("div",[e.showLogin?t("LoginForm",{attrs:{"allow-user-creation":e.allowUserCreation,"enable-oidc":e.enableOidc,redirect:e.redirect,"registration-warning-message":e.registrationWarningMessage,"session-csrf-token":e.sessionCsrfToken,"show-welcome-with-login":e.showWelcomeWithLogin,"terms-url":e.termsUrl,"welcome-url":e.welcomeUrl},on:{"toggle-login":e.toggleLogin}}):t("RegisterForm",{attrs:{"enable-oidc":e.enableOidc,"mailing-join-addr":e.mailingJoinAddr,"prefer-custos-login":e.preferCustosLogin,"registration-warning-message":e.registrationWarningMessage,"show-login-link":e.showLoginLink,"server-mail-configured":e.serverMailConfigured,"session-csrf-token":e.sessionCsrfToken,"terms-url":e.termsUrl},on:{"toggle-login":e.toggleLogin}})],1)}),[],!1,null,null,null).exports},computed:{config:()=>(0,l.Bz)().config,hasToken(){return this.$route.query.token||this.$route.query.expired_user},sessionCsrfToken:()=>(0,l.Bz)().session_csrf_token}};const Rg=(0,m.Z)(Pg,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"overflow-auto m-3"},[e.hasToken?t("ChangePassword",{attrs:{"expired-user":e.$route.query.expired_user,"message-text":e.$route.query.message,"message-variant":e.$route.query.status,token:e.$route.query.token}}):t("LoginIndex",{attrs:{"allow-user-creation":e.config.allow_user_creation,"enable-oidc":e.config.enable_oidc,"mailing-join-addr":e.config.mailing_join_addr,"prefer-custos-login":e.config.prefer_custos_login,redirect:e.$route.query.redirect,"registration-warning-message":e.config.registration_warning_message,"server-mail-configured":e.config.server_mail_configured,"session-csrf-token":e.sessionCsrfToken,"show-welcome-with-login":e.config.show_welcome_with_login,"terms-url":e.config.terms_url,"welcome-url":e.config.welcome_url}})],1)}),[],!1,null,null,null).exports;class jg{constructor(e,t){Object.defineProperty(this,"stepId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.references.push(this),this.stepId=t.id}}class Yg extends jg{constructor(e,t,n){super(e,t),Object.defineProperty(this,"toolInput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.toolInput=n}}class Hg extends jg{constructor(e,t,n){super(e,t),Object.defineProperty(this,"pja",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pja=n}}class Ng{constructor(e){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"references",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e,this.references=[]}canExtract(){return!0}}class Fg{constructor(){Object.defineProperty(this,"parameters",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.parameters=[]}getParameter(e){for(const t of this.parameters)if(t.name==e)return t;const t=new Ng(e);return this.parameters.push(t),t}getParameterFromMatch(e){return this.getParameter(e.substring(2,e.length-1))}}var Bg=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const $g=(0,o.Q_)("datatypesMapperStore",{state:()=>({datatypesMapper:null,loading:!1}),actions:{createMapper(){return Bg(this,void 0,void 0,(function*(){if(!this.loading&&!this.datatypesMapper){this.loading=!0;try{this.datatypesMapper=yield vh(!1),this.loading=!1}catch(e){this.loading=!1,(0,y.t)(e)}}}))}}});var zg=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};function Wg(){const e=(0,a.ref)(!0),t=(0,a.ref)(null),n=$g(),i=(0,a.ref)([]);return function(){zg(this,void 0,void 0,(function*(){try{yield n.createMapper(),t.value=n.datatypesMapper,n.datatypesMapper&&(i.value=n.datatypesMapper.datatypes)}catch(e){console.error("unable to create datatypes mapper\n",e)}finally{e.value=!1}if(!n.datatypesMapper)throw Error("Error creating datatypesMapper")}))}(),{datatypes:i,datatypesMapper:t,datatypesMapperLoading:e}}var Ug=n(78477);const Vg=e=>{const{scope:t}=(0,Mh.T)();return(0,o.Q_)(`workflowEditorToolbarStore${t(e)}`,(()=>{const e=(0,Do.p)("workflow-editor-toolbar-snap-active",!1),t=(0,a.ref)("pointer"),n=(0,a.ref)(!1),i=new Set,o=(0,a.ref)(10),s=(0,a.reactive)({bold:!1,italic:!1,color:"none",textSize:2,lineThickness:5,smoothing:2}),r=(0,a.ref)(!1);function l(e,t){const n={type:e,callback:t};i.add(n),(0,a.onScopeDispose)((()=>{i.delete(n)}))}l("pointerdown",(()=>r.value=!0)),l("pointerup",(()=>r.value=!1)),l("temporarilyDisabled",(()=>r.value=!1)),(0,a.watch)((()=>n.value),(()=>{n.value||(r.value=!1)}));const{shift:d,space:c,alt:u,ctrl:h}=(0,rn.IKb)(),p=(0,a.computed)((()=>!((null==d?void 0:d.value)||(null==c?void 0:c.value)||(null==u?void 0:u.value)||(null==h?void 0:h.value))));return{snapActive:e,snapDistance:o,currentTool:t,inputCatcherActive:n,inputCatcherEnabled:p,commentOptions:s,inputCatcherPressed:r,onInputCatcherEvent:l,emitInputCatcherEvent:function(e,t){i.forEach((n=>{n.type===e&&n.callback(t)}))}}}))()};function qg(e){"string"==typeof e&&(e=(0,a.ref)(e)),(0,a.provide)("workflowId",e);const t=(0,Ug.PB)(e.value),n=(0,Th.l)(e.value),i=(0,Lh.R)(e.value),o=Dh(e.value),s=Vg(e.value);return(0,a.onScopeDispose)((()=>{t.$dispose(),n.$dispose(),i.$dispose(),o.$dispose(),s.$dispose()})),{connectionStore:t,stateStore:n,stepStore:i,commentStore:o,toolbarStore:s}}function Zg(){const e=(0,a.inject)("workflowId"),t=(0,a.unref)(e);if("string"!=typeof t)throw new Error("Workflow ID not provided by parent component. Use `provideScopedWorkflowStores` on a parent component.");return{connectionStore:(0,Ug.PB)(t),stateStore:(0,Th.l)(t),stepStore:(0,Lh.R)(t),commentStore:Dh(t),toolbarStore:Vg(t)}}function Gg(e,t){return{left:(-t.x+e.width/2+Jg(-150,-50))/t.k,top:(-t.y+e.height/2+Jg(-75,25))/t.k}}function Jg(e,t){return Math.floor(Math.random()*(t-e+1))+e}u.vI.add(h.r6l),u.vI.add(h.NBC),u.vI.add(h.Xcf),a.default.use(d.ZPm);const Kg={components:{License:ku,LoadingSpan:z.Z,FontAwesomeIcon:p.GN},props:{inputLicense:{type:String}},data(){return{license:this.inputLicense||null,licensesLoading:!1,licenses:[],editLicense:!1}},computed:{currentLicenseInfo(){for(const e of this.licenses)if(e.licenseId==this.license)return e;return null},licenseOptions(){const e=[];e.push({value:null,text:"*Do not specify a license.*"});for(const t of this.licenses)(t.licenseId==this.license||t.recommended)&&e.push({value:t.licenseId,text:t.name});return e}},watch:{inputLicense(){this.license=this.inputLicense}},mounted(){const e=`${(0,g.getAppRoot)()}api/licenses`;v.Z.get(e).then((e=>e.data)).then((e=>{this.licenses=e,this.licensesLoading=!1})).catch((e=>{console.error(e)}))},methods:{onSave(){this.onLicense(this.license),this.disableEdit()},disableEdit(){this.editLicense=!1},onLicense(e){this.$emit("onLicense",e)}}},Xg=Kg;const Qg=(0,m.Z)(Xg,(function(){var e=this,t=e._self._c;return e.editLicense?t("div",[e.licensesLoading?t("LoadingSpan",{attrs:{message:"Loading licenses..."}}):t("b-form-select",{attrs:{"data-description":"license select",options:e.licenseOptions},model:{value:e.license,callback:function(t){e.license=t},expression:"license"}}),e._v(" "),e.currentLicenseInfo?t("License",{attrs:{"license-id":e.license,"input-license-info":e.currentLicenseInfo},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Save License"}},[t("FontAwesomeIcon",{attrs:{"data-description":"license save",icon:"save"},on:{click:e.onSave}})],1),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Cancel Edit"}},[t("FontAwesomeIcon",{attrs:{icon:"times"},on:{click:e.disableEdit}})],1)]},proxy:!0}],null,!1,2030404416)}):t("div",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onSave.apply(null,arguments)}}},[e._v("Save without license")]),e._v(" or\n        "),t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.editLicense=!1}}},[e._v("cancel edit.")])])],1):e.license?t("div",{attrs:{"data-description":"license selector","data-license":e.license}},[t("License",{attrs:{"license-id":e.license},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit License"}},[t("FontAwesomeIcon",{attrs:{icon:"edit","data-description":"edit license link"},on:{click:function(t){e.editLicense=!0}}})],1)]},proxy:!0}])})],1):t("div",{attrs:{"data-description":"license selector","data-license":"null"}},[t("i",[t("a",{attrs:{href:"#","data-description":"edit license link"},on:{click:function(t){t.preventDefault(),e.editLicense=!0}}},[e._v("Specify a license for this workflow.")])])])}),[],!1,null,null,null).exports;const ey={computed:{addAttributes(){const e=[{value:null,text:"Add attribute"}];for(const t of this.attributeInfo)this.show[t.key]||e.push({value:t.key,text:"- "+t.placeholder});return e},displayedAttributes(){return this.attributeInfo.filter((e=>this.show[e.key]))}},watch:{addAttribute(){this.addAttribute&&(this.show[this.addAttribute]=!0),this.$nextTick((()=>{this.addAttribute=null}))}},methods:{onReset(e){e.preventDefault(),this.$emit("onReset")},onHide(e){this.show[e]=!1},onSave(e){e.preventDefault();const t={};t.class=this.schemaOrgClass;for(const e of this.attributeInfo){const n=e.key;if(this.show[n]){let e=this.currentValues[n];"email"==n&&0!==e.indexOf("mailto:")&&(e="mailto:"+e),t[n]=e}}this.$emit("onSave",t)}}},ty=[{key:"name",label:"Name",placeholder:"name"},{key:"url",label:"URL",placeholder:"URL",type:"url"},{key:"identifier",label:"Identifier",placeholder:"identifier"},{key:"image",label:"Image URL",placeholder:"image URL",type:"url"},{key:"address",label:"Address",placeholder:"address"},{key:"email",label:"Email",placeholder:"email",type:"email"},{key:"telephone",label:"Telephone",placeholder:"telephone",type:"tel"},{key:"faxNumber",label:"Fax Number",placeholder:"fax number",type:"tel"},{key:"alternateName",label:"Alternate Name",placeholder:"alternate name"}],ny=ty.map((e=>e.key));u.vI.add(h.Aq,h.nNP);const iy={components:{FontAwesomeIcon:p.GN},mixins:[ey],props:{organization:{type:Object}},data(){const e={},t={};for(const n of ny){const i=n in this.organization;if(i){let t=this.organization[n];"email"==n&&0==t.indexOf("mailto:")&&(t=t.slice(7)),e[n]=t}t[n]=i}return{attributeInfo:ty,show:t,currentValues:e,addAttribute:null,schemaOrgClass:"Organization"}}};const oy=(0,m.Z)(iy,(function(){var e=this,t=e._self._c;return t("b-form",{on:{submit:e.onSave,reset:e.onReset}},[e._l(e.displayedAttributes,(function(n){return t("div",{key:n.key,staticClass:"form-group",attrs:{role:"group"}},[t("label",{attrs:{for:n.key}},[e._v(e._s(n.label))]),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Hide Attribute"}},[t("FontAwesomeIcon",{attrs:{icon:"eye-slash"},on:{click:function(t){return e.onHide(n.key)}}})],1),e._v(" "),t("b-form-input",{attrs:{id:n.key,placeholder:"Enter "+n.placeholder+".",type:n.type},model:{value:e.currentValues[n.key],callback:function(t){e.$set(e.currentValues,n.key,t)},expression:"currentValues[attribute.key]"}})],1)})),e._v(" "),t("div",{staticClass:"form-group",attrs:{role:"group"}},[t("b-form-select",{attrs:{options:e.addAttributes,size:"sm"},model:{value:e.addAttribute,callback:function(t){e.addAttribute=t},expression:"addAttribute"}})],1),e._v(" "),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Save")]),e._v(" "),t("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Cancel")])],2)}),[],!1,null,null,null).exports;const ay=[{key:"name",label:"Name",placeholder:"name"},{key:"givenName",label:"Given Name",placeholder:"given name"},{key:"familyName",label:"Family Name",placeholder:"family name"},{key:"url",label:"URL",placeholder:"URL",type:"url"},{key:"identifier",label:"Identifier (typically an orcid.org ID)",placeholder:"identifier"},{key:"image",label:"Image URL",placeholder:"image URL",type:"url"},{key:"address",label:"Address",placeholder:"address"},{key:"email",label:"Email",placeholder:"email",type:"email"},{key:"telephone",label:"Telephone",placeholder:"telephone",type:"tel"},{key:"faxNumber",label:"Fax Number",placeholder:"fax number",type:"tel"},{key:"alternateName",label:"Alternate Name",placeholder:"alternate name"},{key:"honorificPrefix",label:"Honorific Prefix (e.g. Dr/Mrs/Mr)",placeholder:"honorific prefix"},{key:"honorificSuffix",label:"Honorific Suffix (e.g. M.D.)",placeholder:"honorific suffix"},{key:"jobTitle",label:"Job Title",placeholder:"job title"}],sy=ay.map((e=>e.key));u.vI.add(h.Aq,h.nNP);const ry={components:{FontAwesomeIcon:p.GN},mixins:[ey],props:{person:{type:Object}},data(){const e={},t={};for(const n of sy){const i=n in this.person;if(i){let t=this.person[n];"email"==n&&0==t.indexOf("mailto:")&&(t=t.slice(7)),e[n]=t}t[n]=i}return{attributeInfo:ay,show:t,currentValues:e,addAttribute:null,schemaOrgClass:"Person"}}};const ly=(0,m.Z)(ry,(function(){var e=this,t=e._self._c;return t("b-form",{on:{submit:e.onSave,reset:e.onReset}},[e._l(e.displayedAttributes,(function(n){return t("div",{key:n.key,staticClass:"form-group",attrs:{role:"group"}},[t("label",{attrs:{for:n.key}},[e._v(e._s(n.label))]),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Hide Attribute"}},[t("FontAwesomeIcon",{attrs:{icon:"eye-slash"},on:{click:function(t){return e.onHide(n.key)}}})],1),e._v(" "),t("b-form-input",{attrs:{id:n.key,placeholder:"Enter "+n.placeholder+".",type:n.type},model:{value:e.currentValues[n.key],callback:function(t){e.$set(e.currentValues,n.key,t)},expression:"currentValues[attribute.key]"}})],1)})),e._v(" "),t("div",{staticClass:"form-group",attrs:{role:"group"}},[t("b-form-select",{attrs:{options:e.addAttributes,size:"sm"},model:{value:e.addAttribute,callback:function(t){e.addAttribute=t},expression:"addAttribute"}})],1),e._v(" "),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Save")]),e._v(" "),t("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Cancel")])],2)}),[],!1,null,null,null).exports;u.vI.add(h.NBC),u.vI.add(h.Xcf);const dy={components:{FontAwesomeIcon:p.GN,PersonForm:ly,CreatorViewer:J_,OrganizationForm:oy},props:{creators:{type:Array,default:()=>[]}},data:()=>({creatorsCurrent:[],editIndex:null}),watch:{creators:{handler(e){this.creatorsCurrent=e},immediate:!0}},methods:{onEdit(e){this.editIndex=e},onRemove(e){const t=[...this.creatorsCurrent];t.splice(e,1),this.$emit("onCreators",t)},onSave(e){const t=this.editIndex,n=[...this.creatorsCurrent];n[t]=e,this.$emit("onCreators",n),this.editIndex=null},onCancel(){const e=this.editIndex;this.creatorsCurrent[e].isNew&&this.creatorsCurrent.splice(e,1),this.editIndex=null},editNewPerson(){this.creatorsCurrent.push({class:"Person",isNew:!0,name:"",identifier:""}),this.editIndex=this.creatorsCurrent.length-1},editNewOrganization(){this.creatorsCurrent.push({class:"Organization",isNew:!0,name:""}),this.editIndex=this.creatorsCurrent.length-1}}};const cy=(0,m.Z)(dy,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"creators-editor"},[null!=e.editIndex&&"Person"==e.creatorsCurrent[e.editIndex].class?t("div",[t("PersonForm",{attrs:{person:e.creatorsCurrent[e.editIndex]},on:{onSave:e.onSave,onReset:e.onCancel}})],1):null!=e.editIndex&&"Organization"==e.creatorsCurrent[e.editIndex].class?t("div",[t("OrganizationForm",{attrs:{organization:e.creatorsCurrent[e.editIndex]},on:{onSave:e.onSave,onReset:e.onCancel}})],1):e.creatorsCurrent?t("div",e._l(e.creatorsCurrent,(function(n,i){return t("div",{key:i},[t("CreatorViewer",{attrs:{creator:n},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit Creator"}},[t("FontAwesomeIcon",{attrs:{icon:"edit"},on:{click:function(t){return e.onEdit(i)}}})],1),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Remove Creator"}},[t("FontAwesomeIcon",{attrs:{icon:"times"},on:{click:function(t){return e.onRemove(i)}}})],1)]},proxy:!0}],null,!0)})],1)})),0):e._e(),e._v(" "),t("div",[t("i",[e._v("\n            Add a new creator - either\n            "),t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.editNewPerson()}}},[e._v("a person")]),e._v("\n            or "),t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.editNewOrganization()}}},[e._v("an organization")]),e._v(".\n        ")])])])}),[],!1,null,null,null).exports;var uy=n(32449);a.default.use(d.ZPm);const hy={name:"Attributes",components:{StatelessTags:G.Z,LicenseSelector:Qg,CreatorEditor:cy},props:{id:{type:String,required:!0},name:{type:String,default:null},tags:{type:Array,required:!0},annotation:{type:String,default:null},license:{type:String,default:""},creator:{type:Array,default:null},version:{type:Number,default:null},versions:{type:Array,default:null},parameters:{type:Fg,default:null}},data(){return{message:null,messageVariant:null,tagsCurrent:this.tags,versionCurrent:this.version,annotationCurrent:this.annotation,nameCurrent:this.name}},computed:{creatorAsList(){let e=this.creator;return e?e instanceof Array||(e=[e]):e=[],e},hasParameters(){return this.parameters&&this.parameters.parameters.length>0},versionOptions(){const e=[];for(let t=0;t<this.versions.length;t++){const n=this.versions[t];let i;i=n.update_time?`${(0,uy.Z)((0,ji.Z)(n.update_time,"yyyy-MM-dd",new Date),"MMM do yyyy")}`:"";const o=`${n.version+1}: ${i}, ${n.steps} steps`;e.push({version:t,label:o})}return e}},watch:{version(){this.versionCurrent=this.version},license(){this.licenseCurrent=this.license},creator(){let e=this.creator;e?e instanceof Array||(e=[e]):e=[],this.creatorCurrent=e},annotation(){this.annotationCurrent=this.annotation},name(){this.nameCurrent=this.name}},created(){this.services=new Sm},methods:{onTags(e){this.tagsCurrent=e,this.onAttributes({tags:e}),this.$emit("onTags",this.tagsCurrent)},onVersion(){this.$emit("onVersion",this.versionCurrent)},onLicense(e){this.$emit("onLicense",e)},onCreator(e){this.$emit("onCreator",e)},onError(e){this.message=e,this.messageVariant="danger"},onAttributes(e){this.id.includes("workflow-editor")||this.services.updateWorkflow(this.id,e).catch((e=>{this.onError(e)}))}}},py=hy;const fy=(0,m.Z)(py,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-content p-2",attrs:{id:"edit-attributes",itemscope:"",itemtype:"http://schema.org/CreativeWork"}},[t("b-alert",{attrs:{variant:e.messageVariant,show:!!e.message}},[e._v("\n        "+e._s(e.message)+"\n    ")]),e._v(" "),t("div",{attrs:{id:"workflow-name-area"}},[t("b",[e._v("Name")]),e._v(" "),t("meta",{attrs:{itemprop:"name",content:e.name}}),e._v(" "),t("b-input",{attrs:{id:"workflow-name",state:!!e.nameCurrent&&null},on:{keyup:function(t){return e.$emit("update:nameCurrent",e.nameCurrent)}},model:{value:e.nameCurrent,callback:function(t){e.nameCurrent=t},expression:"nameCurrent"}})],1),e._v(" "),e.versionOptions.length>0?t("div",{staticClass:"mt-2",attrs:{id:"workflow-version-area"}},[t("b",[e._v("Version")]),e._v(" "),t("b-form-select",{on:{change:e.onVersion},model:{value:e.versionCurrent,callback:function(t){e.versionCurrent=t},expression:"versionCurrent"}},e._l(e.versionOptions,(function(n){return t("b-form-select-option",{key:n.version,attrs:{value:n.version}},[e._v("\n                "+e._s(n.label)+"\n            ")])})),1)],1):e._e(),e._v(" "),e.hasParameters?t("div",{staticClass:"mt-2",attrs:{id:"workflow-parameters-area"}},[t("b",[e._v("Parameters")]),e._v(" "),t("b-list-group",e._l(e.parameters.parameters.entries(),(function([n,i]){return t("b-list-group-item",{key:n},[e._v(e._s(n+1)+": "+e._s(i.name)+"\n            ")])})),1)],1):e._e(),e._v(" "),t("div",{staticClass:"mt-2",attrs:{id:"workflow-annotation-area"}},[t("b",[e._v("Annotation")]),e._v(" "),t("meta",{attrs:{itemprop:"description",content:e.annotationCurrent}}),e._v(" "),t("b-textarea",{attrs:{id:"workflow-annotation"},on:{keyup:function(t){return e.$emit("update:annotationCurrent",e.annotationCurrent)}},model:{value:e.annotationCurrent,callback:function(t){e.annotationCurrent=t},expression:"annotationCurrent"}}),e._v(" "),t("div",{staticClass:"form-text text-muted"},[e._v("These notes will be visible when this workflow is viewed.")])],1),e._v(" "),t("div",{staticClass:"mt-2",attrs:{id:"workflow-license-area"}},[t("b",[e._v("License")]),e._v(" "),t("LicenseSelector",{attrs:{"input-license":e.license},on:{onLicense:e.onLicense}})],1),e._v(" "),t("div",{staticClass:"mt-2",attrs:{id:"workflow-creator-area"}},[t("b",[e._v("Creator")]),e._v(" "),t("CreatorEditor",{attrs:{creators:e.creatorAsList},on:{onCreators:e.onCreator}})],1),e._v(" "),t("div",{staticClass:"mt-2"},[t("b",[e._v("Tags")]),e._v(" "),t("StatelessTags",{attrs:{value:e.tagsCurrent},on:{input:e.onTags}}),e._v(" "),t("div",{staticClass:"form-text text-muted"},[e._v("\n            Apply tags to make it easy to search for and find items with the same tag.\n        ")])],1)],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm),u.vI.add(h.een),u.vI.add(h.wn1),u.vI.add(h.UJf),u.vI.add(h.LEp),u.vI.add(h.eHv);const my={components:{FontAwesomeIcon:p.GN},props:{okay:{type:Boolean,default:!0},attributeLink:{type:String,default:"Edit Workflow Attributes"},successMessage:{type:String,required:!0},warningMessage:{type:String,required:!0},warningItems:{type:Array,default:null}},computed:{isOkay(){return this.okay&&!this.hasWarningItems},hasWarningItems(){return this.warningItems&&this.warningItems.length>0}},methods:{onMouseOver(e){this.$emit("onMouseOver",e)},onMouseLeave(e){this.$emit("onMouseLeave",e)},onClick(e,t){this.$emit("onClick",e,t)}}};const _y=(0,m.Z)(my,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-2"},[e.isOkay?t("div",[t("FontAwesomeIcon",{staticClass:"text-success",attrs:{icon:"check"}}),e._v(" "),t("span",[e._v(e._s(e.successMessage))])],1):t("div",[t("FontAwesomeIcon",{staticClass:"text-warning",attrs:{icon:"exclamation-triangle"}}),e._v(" "),t("span",[e._v(e._s(e._f("localize")(e.warningMessage)))]),e._v(" "),e.hasWarningItems?t("div",{staticClass:"mt-2"},e._l(e.warningItems,(function(n,i){return t("div",{key:i,staticClass:"ml-2",on:{focusin:function(t){return e.onMouseOver(n)},mouseover:function(t){return e.onMouseOver(n)},focusout:function(t){return e.onMouseLeave(n)},mouseleave:function(t){return e.onMouseLeave(n)}}},[t("a",{staticClass:"scrolls",attrs:{href:"#"},on:{click:function(t){return e.onClick(n)}}},[n.autofix?t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"magic"}}):t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"search"}}),e._v("\n                    "+e._s(n.stepLabel)+": "+e._s(n.warningLabel)+"\n                ")],1)])})),0):t("p",{staticClass:"mt-2 ml-2"},[t("a",{attrs:{href:"#"},on:{click:e.onClick}},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"pencil-alt"}}),e._v(e._s(e.attributeLink)+" ")],1)])],1)])}),[],!1,null,null,null).exports;var vy=n(17187),gy=n.n(vy);const yy={isCollection:!1,collectionType:null,rank:0,canMatch:function(e){return!1},canMapOver:function(){return!1},toString:function(){return"NullCollectionType[]"},append:function(e){return e},equal:function(e){return e===this},effectiveMapOver:function(e){return yy}},by={isCollection:!0,collectionType:"any",rank:-1,canMatch:function(e){return yy!==e},canMapOver:function(){return!1},toString:function(){return"AnyCollectionType[]"},append:function(){return by},equal:function(e){return e===this},effectiveMapOver:function(e){return yy}};class wy{constructor(e){Object.defineProperty(this,"collectionType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isCollection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rank",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.collectionType=e,this.isCollection=!0,this.rank=e.split(":").length}append(e){return e===yy?this:e===by?e:new wy(`${this.collectionType}:${e.collectionType}`)}canMatch(e){return e!==yy&&(e===by||e.collectionType==this.collectionType)}canMapOver(e){if(!e.collectionType||"any"===e.collectionType)return!1;if(this.rank<=e.rank)return!1;const t=e.collectionType;return this._endsWith(this.collectionType,t)}effectiveMapOver(e){if(e.collectionType&&this.canMapOver(e)){const t=e.collectionType,n=this.collectionType.substring(0,this.collectionType.length-t.length-1);return new wy(n)}return yy}equal(e){return!!e&&e.collectionType==this.collectionType}toString(){return`CollectionType[${this.collectionType}]`}_endsWith(e,t){return-1!==e.indexOf(t,e.length-t.length)}}class ky{constructor(e,t){Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"canAccept",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.canAccept=e,this.reason=t}}class Cy extends(gy()){constructor(e){super(),Object.defineProperty(this,"connectionStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stepStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multiple",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stepId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"terminalType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"datatypesMapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"localMapOver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.connectionStore=e.connectionStore,this.stepStore=e.stepStore,this.stepId=e.stepId,this.name=e.name,this.multiple=!1,this.terminalType="input",this.datatypesMapper=e.datatypesMapper,this.localMapOver=yy}get id(){return`node-${this.stepId}-${this.terminalType}-${this.name}`}get connections(){return this.connectionStore.getConnectionsForTerminal(this.id)}get mapOver(){return this.stepStore.stepMapOver[this.stepId]||yy}connect(e){const t={input:{stepId:this.stepId,name:this.name,connectorType:"input"},output:{stepId:e.stepId,name:e.name,connectorType:"output"}};this.connectionStore.addConnection(t)}disconnect(e){let t;t=e instanceof Cy?{input:{stepId:this.stepId,name:this.name,connectorType:"input"},output:{stepId:e.stepId,name:e.name,connectorType:"output"}}:e,this.connectionStore.removeConnection((0,Ug.en)(t)),this.resetMappingIfNeeded(t)}setMapOver(e){var t;let n=e;if(this.multiple){const t=new wy("list");if(e.collectionType===t.collectionType)return;n=e.effectiveMapOver(t)}const i=this._effectiveMapOver(n);this.localMapOver.equal(i)||(this.stepStore.changeStepInputMapOver(this.stepId,this.name,i),this.localMapOver=i),this.mapOver.equal(i)||!i.isCollection&&Object.values(null!==(t=this.stepStore.stepInputMapOver[this.stepId])&&void 0!==t?t:[]).find((e=>e.isCollection))||this.stepStore.changeStepMapOver(this.stepId,i)}_effectiveMapOver(e){return e}isMappedOver(){return Boolean(this.mapOver.isCollection)}resetMapping(e){this.stepStore.changeStepMapOver(this.stepId,yy),this.stepStore.resetStepInputMapOver(this.stepId)}hasConnectedMappedInputTerminals(){return this.connectionStore.getConnectionsForStep(this.stepId).some((e=>{var t;return e.input.stepId===this.stepId&&(null===(t=this.stepStore.stepMapOver[this.stepId])||void 0===t?void 0:t.collectionType)}))}_getOutputConnections(){return this.connectionStore.getConnectionsForStep(this.stepId).filter((e=>e.output.stepId===this.stepId))}hasConnectedOutputTerminals(){return this._getOutputConnections().length>0}hasMappedOverInputTerminals(){var e;return Boolean(null===(e=this.stepStore.stepMapOver[this.stepId])||void 0===e?void 0:e.collectionType)}resetMappingIfNeeded(e){if(!this.mapOver.isCollection)return;!this.hasConnectedOutputTerminals()&&this.resetMapping(e)}}class xy extends Cy{constructor(e){var t;super(e),Object.defineProperty(this,"datatypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"localMapOver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.datatypes=e.input.datatypes,this.multiple=e.input.multiple,this.optional=e.input.optional,this.stepStore.stepInputMapOver[this.stepId]&&(null===(t=this.stepStore.stepInputMapOver[this.stepId])||void 0===t?void 0:t[this.name])?this.localMapOver=this.stepStore.stepInputMapOver[this.stepId][this.name]:this.localMapOver=yy}connect(e){super.connect(e),this.setDefaultMapOver(e)}setDefaultMapOver(e){const t=this._otherCollectionType(e);if(t.isCollection)return this.setMapOver(t)}getStepMapOver(){this.getConnectedTerminals().forEach((e=>{this.setDefaultMapOver(e)}))}canAccept(e){return this.stepId==e.stepId?new ky(!1,"Cannot connect output to input of same step."):this._inputFilled()?new ky(!1,"Input already filled with another connection, delete it before connecting another output."):this.attachable(e)}attachable(e){throw Error("Subclass needs to implement this")}_getOutputStepsMapOver(){const e=this._getOutputConnections();return Array.from(new Set(e.map((e=>e.output.stepId)))).map((e=>this.stepStore.stepMapOver[e]||yy))}resetMapping(e){super.resetMapping(e),this.stepStore.changeStepInputMapOver(this.stepId,this.name,yy);const t=this._getOutputTerminals().map((e=>e.stepId));e&&t.push(e.output.stepId),Array.from(new Set(t)).forEach((e=>{const t=this.stepStore.getStep(e);if(t){const e=t.outputs[0];if(e){Py(t.id,e,this.datatypesMapper,this.connectionStore,this.stepStore).resetMappingIfNeeded(),t.inputs.forEach((e=>{Py(t.id,e,this.datatypesMapper,this.connectionStore,this.stepStore).getStepMapOver()}))}}else console.error(`Invalid step. Could not fine step with id ${e} in store.`)}))}_getOutputTerminals(){return this.connectionStore.getOutputTerminalsForInputTerminal(this.id)}_getFirstOutputTerminal(){const e=this._getOutputTerminals();return e.length>0?e[0]:null}isMappedOver(){return Boolean(this.localMapOver.isCollection)}connected(){return Boolean(this._getFirstOutputTerminal())}_inputFilled(){let e;return e=!!this.connected()&&(!this.multiple||!!this._collectionAttached()),e}_collectionAttached(){return this._getOutputTerminals().some((e=>{var t;const n=this.stepStore.getStep(e.stepId);if(!n)return console.error(`Invalid step. Could not find step with id ${e.stepId} in store.`),!1;const i=n.outputs.find((t=>t.name==e.name));return!(!i||!("collection"in i&&i.collection||(null===(t=this.stepStore.stepMapOver[e.stepId])||void 0===t?void 0:t.isCollection)||"extensions"in i&&i.extensions.indexOf("input")>0))||void 0}))}_mappingConstraints(){return this.mapOver.isCollection?[this.mapOver]:this._getOutputStepsMapOver()}_producesAcceptableDatatype(e){return e instanceof Ay?new ky(!1,"Cannot connect workflow parameter to data input."):function(e,t,n){for(const i in t){const o=t[i];if("input"===o)return new ky(!0,null);if(n.some((t=>"input"===t||"_sniff_"===t||e.isSubType(t,o))))return new ky(!0,null)}const i=new Set(e.datatypes),o=n.filter((e=>!i.has(e)));if(o.length)return new ky(!1,`Effective output data type(s) [${o.join(", ")}] unknown. This tool cannot be run on this Galaxy Server at this moment, please contact the Administrator.`);return new ky(!1,`Effective output data type(s) [${n.join(", ")}] do not appear to match input type(s) [${t.join(", ")}].`)}(this.datatypesMapper,this.datatypes,e.datatypes)}_producesAcceptableDatatypeAndOptionalness(e){return this.optional||this.multiple||!e.optional?this._producesAcceptableDatatype(e):new ky(!1,"Cannot connect an optional output to a non-optional input")}_otherCollectionType(e){let t=yy;e.isCollection&&e.collectionType&&(t=e.collectionType);const n=e.mapOver;return n.isCollection&&(t=n.append(t)),t}getConnectedTerminals(){return this.connections.map((e=>{const t=this.stepStore.getStep(e.output.stepId);if(!t)return new Iy({stepId:-1,optional:!1,datatypes:[],name:e.output.name,valid:!1,datatypesMapper:this.datatypesMapper,connectionStore:this.connectionStore,stepStore:this.stepStore});let n=t.outputs.find((t=>t.name===e.output.name));if(!n)return new Iy({stepId:-1,optional:!1,datatypes:[],name:e.output.name,valid:!1,datatypesMapper:this.datatypesMapper,connectionStore:this.connectionStore,stepStore:this.stepStore});const i=`ChangeDatatypeAction${e.output.name}`;if("extensions"in n&&t.post_job_actions&&i in t.post_job_actions){const e=t.post_job_actions[i].action_arguments.newtype;n=Object.assign(Object.assign({},n),{extensions:e?[e]:[]})}return Py(t.id,n,this.datatypesMapper,this.connectionStore,this.stepStore)}))}getInvalidConnectedTerminals(){return this.getConnectedTerminals().filter((e=>{var t;const n=this.attachable(e),i=`${this.stepId}-${this.name}-${e.stepId}-${e.name}`;return n.canAccept?(this.connectionStore.invalidConnections[i]&&this.connectionStore.dropFromInvalidConnections(i),!1):(this.connectionStore.markInvalidConnection(i,null!==(t=n.reason)&&void 0!==t?t:"Unknown"),!0)}))}destroyInvalidConnections(){this.getInvalidConnectedTerminals().forEach((e=>this.disconnect(e)))}}class Sy extends xy{constructor(e){super(e),Object.defineProperty(this,"valid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"localMapOver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.valid=!1,this.localMapOver=yy}attachable(e){return new ky(!1,"Cannot attach to invalid input. Disconnect this input.")}}class My extends xy{constructor(e){super(e),Object.defineProperty(this,"collection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.collection=!1,this.getStepMapOver()}attachable(e){const t=this._otherCollectionType(e),n=this.mapOver;if(t.isCollection){if(this.multiple){if(this.connected()&&!this._collectionAttached())return new ky(!1,"Cannot attach collections to data parameters with individual data inputs already attached.");if(t.collectionType&&t.collectionType.endsWith("paired"))return new ky(!1,"Cannot attach paired inputs to multiple data parameters, only lists may be treated this way.")}if(n.isCollection&&n.canMatch(t))return this._producesAcceptableDatatypeAndOptionalness(e);if(this.multiple&&new wy("list").append(this.mapOver).canMatch(t))return this._producesAcceptableDatatypeAndOptionalness(e);return this._mappingConstraints().every(t.canMatch.bind(t))?this._producesAcceptableDatatypeAndOptionalness(e):n.isCollection?this.hasConnectedMappedInputTerminals()?new ky(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new ky(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry."):new ky(!1,"Can't map over this input with output collection type - an output of this tool is mapped over constraining this input. Disconnect output(s) and retry.")}return this.localMapOver.isCollection?new ky(!1,"Cannot attach non-collection output to mapped over input, consider disconnecting inputs and outputs to reset this input's mapping."):this._producesAcceptableDatatypeAndOptionalness(e)}}class Ty extends xy{constructor(e){super(e),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=e.type,this.getStepMapOver()}effectiveType(e){return"select"==e?"text":e}attachable(e){const t=this.effectiveType(this.type),n="type"in e&&e.type||"data",i=this.effectiveType(n),o=t===i;return new ky(o,o?null:`Cannot attach a ${i} parameter to a ${t} input`)}}class Ly extends xy{constructor(e){super(e),Object.defineProperty(this,"collection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"collectionTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.multiple=!1,this.collection=!0,this.collectionTypes=e.collection_types?e.collection_types.map((e=>new wy(e))):[],this.collectionTypes.length||this.collectionTypes.push(by),this.getStepMapOver()}_effectiveMapOver(e){const t=this.collectionTypes;if(!t.some((t=>t.canMatch(e))))for(const n in t){const i=t[n];if(e.canMapOver(i)){const t=e.effectiveMapOver(i);if(t!=yy)return t}}return yy}_effectiveCollectionTypes(){return this.collectionTypes.map((e=>this.localMapOver.append(e)))}attachable(e){const t=this._otherCollectionType(e);if(t.isCollection){const n=this._effectiveCollectionTypes(),i=this.mapOver;if(n.some((e=>e.canMatch(t))))return this._producesAcceptableDatatypeAndOptionalness(e);if(i.isCollection)return this.hasConnectedMappedInputTerminals()?new ky(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new ky(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry.");if(this.collectionTypes.some((e=>t.canMapOver(e)))){const n=this._effectiveMapOver(t);return this._mappingConstraints().every((e=>n.canMatch(e)))?this._producesAcceptableDatatypeAndOptionalness(e):new ky(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry.")}return new ky(!1,"Incompatible collection type(s) for attachment.")}return new ky(!1,"Cannot attach a data output to a collection input.")}}class Dy extends Cy{constructor(e){var t;super(e),Object.defineProperty(this,"datatypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isCollection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"collectionType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.datatypes=e.datatypes,this.optional=e.optional||Boolean(null===(t=this.stepStore.getStep(this.stepId))||void 0===t?void 0:t.when),this.terminalType="output"}getConnectedTerminals(){return this.connections.map((e=>{const t=this.stepStore.getStep(e.input.stepId);(0,Sh.Nh)(t,`Invalid step. Could not find step with id ${e.input.stepId} in store.`);const n=[...this.stepStore.getStepExtraInputs(t.id),...t.inputs].find((t=>t.name===e.input.name));return n?Py(t.id,n,this.datatypesMapper,this.connectionStore,this.stepStore):new Sy({valid:!1,name:e.input.name,stepId:e.input.stepId,datatypesMapper:this.datatypesMapper,input_type:"dataset",input:{datatypes:[],optional:!1,multiple:!1},connectionStore:this.connectionStore,stepStore:this.stepStore})}))}getInvalidConnectedTerminals(){return this.getConnectedTerminals().filter((e=>{var t;const n=e.attachable(this),i=`${e.stepId}-${e.name}-${this.stepId}-${this.name}`;return n.canAccept?(this.connectionStore.invalidConnections[i]&&this.connectionStore.dropFromInvalidConnections(i),!1):(this.connectionStore.markInvalidConnection(i,null!==(t=n.reason)&&void 0!==t?t:"Unknown"),!0)}))}destroyInvalidConnections(){this.getConnectedTerminals().forEach((e=>{e.attachable(this).canAccept||e.disconnect(this)}))}validInputTerminals(){const e=[];return Object.values(this.stepStore.steps).map((t=>{var n;null===(n=t.inputs)||void 0===n||n.forEach((n=>{const i=Py(t.id,n,this.datatypesMapper,this.connectionStore,this.stepStore);i.canAccept(this).canAccept&&e.push(i)}))})),e}}class Ey extends Dy{}class Oy extends Dy{constructor(e){super(e),Object.defineProperty(this,"collectionTypeSource",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.collectionTypeSource=null,e.collection_type?this.collectionType=new wy(e.collection_type):(this.collectionTypeSource=e.collection_type_source,this.collectionTypeSource||console.log("Warning: No collection type or collection type source defined."),this.collectionType=this.getCollectionTypeFromInput()||by),this.isCollection=!0}getCollectionTypeFromInput(){const e=this.connectionStore.connections.find((e=>e.input.name===this.collectionTypeSource&&e.input.stepId===this.stepId));if(e){const t=this.stepStore.getStep(e.output.stepId),n=this.stepStore.getStep(this.stepId);if((0,Sh.Nh)(n,`Invalid step. Could not find step with id ${e.input.stepId} in store.`),t){const i=t.outputs.find((t=>t.name==e.output.name)),o=n.inputs.find((e=>e.name===this.collectionTypeSource));if(o&&i){const t=Py(e.output.stepId,i,this.datatypesMapper,this.connectionStore,this.stepStore),n=Py(e.output.stepId,o,this.datatypesMapper,this.connectionStore,this.stepStore),a=n._otherCollectionType(t);if("collectionTypes"in n){const e=n.collectionTypes.find((e=>a.canMatch(e)||a.canMapOver(e)));if(e)return"any"===e.collectionType?a:e}}}}return by}}class Ay extends Dy{constructor(e){super(Object.assign(Object.assign({},e),{datatypes:[]})),this.type=e.type}}class Iy extends Dy{constructor(e){super(e),Object.defineProperty(this,"valid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.valid=!1}validInputTerminals(){return[]}canAccept(){return new ky(!1,"Can't connect to invalid terminal.")}}function Py(e,t,n,i,o){if("input_type"in t){const a={datatypesMapper:n,input_type:t.input_type,name:t.name,stepId:e,connectionStore:i,stepStore:o};if("valid"in t)return new Sy(Object.assign(Object.assign({},a),{input:{datatypes:[],multiple:!1,optional:!1},valid:t.valid}));{const e={datatypes:t.extensions,multiple:t.multiple,optional:t.optional};if("dataset"==t.input_type)return new My(Object.assign(Object.assign({},a),{input:e}));if("dataset_collection"===t.input_type)return new Ly(Object.assign(Object.assign({},a),{collection_types:t.collection_types,input:Object.assign({},e)}));if("parameter"===t.input_type)return new Ty(Object.assign(Object.assign({},a),{type:t.type,input:Object.assign({},e)}))}}else if(t.name){const s={name:t.name,optional:t.optional,stepId:e,datatypesMapper:n,connectionStore:i,stepStore:o};if("name"in(a=t)&&"parameter"in a&&!0===a.parameter)return new Ay(Object.assign(Object.assign({},s),{type:t.type}));if(function(e){return"name"in e&&"collection"in e&&e.collection}(t))return new Oy(Object.assign(Object.assign({},s),{datatypes:t.extensions,collection_type:t.collection_type,collection_type_source:t.collection_type_source}));if(function(e){return"name"in e&&"extensions"in e}(t))return new Ey(Object.assign(Object.assign({},s),{datatypes:t.extensions}))}var a;if(function(e){return"name"in e&&"valid"in e&&!1===e.valid}(t))return new Iy(t);throw Error(`Could not build terminal for ${t}`)}function Ry(e={},t,n,i){const o=[];return Object.values(e).forEach((e=>{e.inputs.map((a=>{const s=Py(e.id,a,t,n,i);if(!s.optional&&0===s.connections.length){const t=a.label||a.name;o.push({stepId:e.id,stepLabel:e.label||e.content_id||e.name,warningLabel:t,inputName:a.name,autofix:!s.multiple})}}))})),o}function jy(e){return"data_input"==e||"data_collection_input"==e||"parameter_input"==e}function Yy(e){const t=[];return Object.values(e).forEach((e=>{if(jy(e.type))return;const n=e.workflow_outputs||[];for(const i of n)i.label||t.push({stepId:e.id,stepLabel:e.label||e.content_id||e.name,warningLabel:i.output_name,autofix:!0})})),t}function Hy(e){const t=[];return e&&e.parameters.forEach((e=>{try{const n=e.references[0];(0,Sh.Nh)(n,`Parameter references for ${e.name} are empty.`);const i="toolInput"in n?n.toolInput.label:e.name;t.push({stepId:n.stepId,stepLabel:i,warningLabel:e.name,name:e.name,autofix:e.canExtract()})}catch(e){console.error(e)}})),t}function Ny(e){return{action_type:"extract_untyped_parameter",name:e.name}}function Fy(e){return{action_type:"extract_input",input:{order_index:e.stepId,input_name:e.inputName}}}a.default.use(d.ZPm),u.vI.add(h.eHv),u.vI.add(h.een);const By={components:{FontAwesomeIcon:p.GN,LintSection:_y},props:{untypedParameters:{type:Fg,required:!0},steps:{type:Object,required:!0},annotation:{type:String,default:null},license:{type:String,default:null},creator:{type:Array,default:null},datatypesMapper:{type:Bc,required:!0}},setup(){const{connectionStore:e,stepStore:t}=Zg(),{hasActiveOutputs:n}=(0,o.Jk)(t);return{connectionStore:e,stepStore:t,hasActiveOutputs:n}},computed:{showRefactor(){return!this.checkUntypedParameters||!this.checkDisconnectedInputs||!this.checkUnlabeledOutputs},checkAnnotation(){return!!this.annotation},checkLicense(){return!!this.license},checkCreator(){return this.creator instanceof Array?this.creator.length>0:!!this.creator},checkUntypedParameters(){return 0==this.warningUntypedParameters.length},checkDisconnectedInputs(){return 0==this.warningDisconnectedInputs.length},checkUnlabeledOutputs(){return 0==this.warningUnlabeledOutputs.length},warningUntypedParameters(){return Hy(this.untypedParameters)},warningDisconnectedInputs(){return Ry(this.steps,this.datatypesMapper,this.connectionStore,this.stepStore)},warningMissingMetadata(){return function(e){const t=[];return Object.values(e).forEach((e=>{if(jy(e.type)){const n=!e.annotation,i=!e.label;let o=null;i&&n?o="Missing a label and annotation":i?o="Missing a label":n&&(o="Missing an annotation"),o&&t.push({stepId:e.id,stepLabel:e.label||e.content_id||e.name,warningLabel:o})}})),t}(this.steps)},warningUnlabeledOutputs(){return Yy(this.steps)}},methods:{onAttributes(){this.$emit("onAttributes")},onFixUntypedParameter(e){confirm("This issue can be fixed automatically by creating an explicit parameter input step. Do you want to proceed?")?this.$emit("onRefactor",[Ny(e)]):this.$emit("onScrollTo",e.stepId)},onFixDisconnectedInput(e){confirm("This issue can be fixed automatically by creating an explicit data input step. Do you want to proceed?")?this.$emit("onRefactor",[Fy(e)]):this.$emit("onScrollTo",e.stepId)},onFixUnlabeledOutputs(e){confirm("This issue can be fixed automatically by removing all unlabeled workflow output. Do you want to proceed?")?this.$emit("onRefactor",[{action_type:"remove_unlabeled_workflow_outputs"}]):this.$emit("onScrollTo",e.stepId)},onScrollTo(e){this.$emit("onScrollTo",e.stepId)},onHighlight(e){this.$emit("onHighlight",e.stepId)},onUnhighlight(e){this.$emit("onUnhighlight",e.stepId)},onRefactor(){const e=function(e,t,n,i,o){const a=[],s=Hy(t);for(const e of s)e.autofix&&a.push(Ny(e));const r=Ry(e,n,i,o);for(const e of r)e.autofix&&a.push(Fy(e));return Yy(e).length>0&&a.push({action_type:"remove_unlabeled_workflow_outputs"}),a}(this.steps,this.untypedParameters,this.datatypesMapper,this.connectionStore,this.stepStore);this.$emit("onRefactor",e)}}},$y=By;const zy=(0,m.Z)($y,(function(){var e=this,t=e._self._c;return t("b-card",{staticClass:"right-content",attrs:{id:"lint-panel","header-tag":"header","body-class":"p-0"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"mb-1 font-weight-bold"},[t("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:"magic"}}),e._v("\n            Best Practices Review\n        ")],1),e._v(" "),e.showRefactor?t("div",[t("a",{staticClass:"refactor-button",attrs:{href:"#"},on:{click:e.onRefactor}},[e._v(" Try to automatically fix issues. ")])]):e._e()]},proxy:!0}])},[e._v(" "),t("b-card-body",[t("LintSection",{attrs:{okay:e.checkAnnotation,"success-message":"This workflow is annotated. Ideally, this helps the executors of the workflow\n                understand the purpose and usage of the workflow.","warning-message":"This workflow is not annotated. Providing an annotation helps workflow executors\n                understand the purpose and usage of the workflow.","attribute-link":"Annotate your Workflow."},on:{onClick:e.onAttributes}}),e._v(" "),t("LintSection",{attrs:{okay:e.checkCreator,"success-message":"This workflow defines creator information.","warning-message":"This workflow does not specify creator(s). This is important metadata for workflows\n                that will be published and/or shared to help workflow executors know how to cite the\n                workflow authors.","attribute-link":"Provide Creator Details."},on:{onClick:e.onAttributes}}),e._v(" "),t("LintSection",{attrs:{okay:e.checkLicense,"success-message":"This workflow defines a license.","warning-message":"This workflow does not specify a license. This is important metadata for workflows\n                that will be published and/or shared to help workflow executors understand how it\n                may be used.","attribute-link":"Specify a License."},on:{onClick:e.onAttributes}}),e._v(" "),t("LintSection",{attrs:{"success-message":"Workflow parameters are using formal input parameters.","warning-message":"This workflow uses legacy workflow parameters. They should be replaced with\n            formal workflow inputs. Formal input parameters make tracking workflow provenance, usage within subworkflows,\n            and executing the workflow via the API more robust:","warning-items":e.warningUntypedParameters},on:{onMouseOver:e.onHighlight,onMouseLeave:e.onUnhighlight,onClick:e.onFixUntypedParameter}}),e._v(" "),t("LintSection",{attrs:{"success-message":"All non-optional inputs to workflow steps are connected to formal input parameters.","warning-message":"Some non-optional inputs are not connected to formal workflow inputs. Formal input parameters\n            make tracking workflow provenance, usage within subworkflows, and executing the workflow via the API more robust:","warning-items":e.warningDisconnectedInputs},on:{onMouseOver:e.onHighlight,onMouseLeave:e.onUnhighlight,onClick:e.onFixDisconnectedInput}}),e._v(" "),t("LintSection",{attrs:{"success-message":"All workflow inputs have labels and annotations.","warning-message":"Some workflow inputs are missing labels and/or annotations:","warning-items":e.warningMissingMetadata},on:{onMouseOver:e.onHighlight,onMouseLeave:e.onUnhighlight,onClick:e.onScrollTo}}),e._v(" "),t("LintSection",{attrs:{"success-message":"This workflow has outputs and they all have valid labels.","warning-message":"The following workflow outputs have no labels, they should be assigned a useful label or\n                unchecked in the workflow editor to mark them as no longer being a workflow output:","warning-items":e.warningUnlabeledOutputs},on:{onMouseOver:e.onHighlight,onMouseLeave:e.onUnhighlight,onClick:e.onFixUnlabeledOutputs}}),e._v(" "),e.hasActiveOutputs?e._e():t("div",[t("FontAwesomeIcon",{staticClass:"text-warning",attrs:{icon:"exclamation-triangle"}}),e._v(" "),t("span",[e._v("This workflow has no labeled outputs, please select and label at least one output.")])],1)],1)],1)}),[],!1,null,null,null).exports;const Wy={props:{title:{type:String,required:!1,default:void 0},message:{type:String,required:!1,default:void 0},error:{type:Boolean,required:!1,default:void 0}},data(){return{show:!!this.title}},computed:{},watch:{message(){this.show=!!this.title}},methods:{onHidden(){this.$emit("onHidden")},onOk(){}}};const Uy=(0,m.Z)(Wy,(function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{title:e.title,scrollable:"","hide-header-close":!0,"no-close-on-esc":!e.error,"no-close-on-backdrop":!e.error,"hide-footer":!e.error,"ok-only":""},on:{ok:e.onOk,hidden:e.onHidden},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{staticClass:"workflow-message-modal"},["progress"==e.message?t("div",[t("div",{staticClass:"progress progress-striped active"},[t("div",{staticClass:"progress-bar",staticStyle:{width:"100%"}})])]):t("div",[e._v("\n            "+e._s(e.message)+"\n        ")])])])}),[],!1,null,null,null).exports;var Vy=n(31642),qy=n(87379),Zy=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Gy=(0,a.defineComponent)({__name:"Options",props:{isNewTempWorkflow:{type:Boolean},hasChanges:{type:Boolean},hasInvalidConnections:{type:Boolean},requiredReindex:{type:Boolean}},emits:["onAttributes","onSave","onCreate","onReport","onSaveAs","onLayout","onLint","onUpgrade","onDownload","onRun"],setup(e,{emit:t}){const n=e,{confirm:i}=Ci(),o=(0,a.computed)((()=>n.isNewTempWorkflow?"Create a new workflow":n.hasChanges?n.hasInvalidConnections?"Workflow has invalid connections, review and remove invalid connections":"Save Workflow":"Workflow has no changes"));function s(){n.isNewTempWorkflow?t("onCreate"):t("onSave")}return{__sfc:!0,emit:t,props:n,confirm:i,saveHover:o,emitSaveOrCreate:s,onSave:function(){return Zy(this,void 0,void 0,(function*(){if(n.hasInvalidConnections){console.log("getting confirmation");(yield i("Workflow has invalid connections. You can save the workflow, but it may not run correctly.",{id:"save-workflow-confirmation",okTitle:"Save Workflow"}))&&s()}else s()}))},BButton:jn.T,BDropdown:Vy.R,BDropdownItem:qy.E}}}),Jy=Gy;const Ky=(0,m.Z)(Jy,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"panel-header-buttons"},[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive",modifiers:{hover:!0,noninteractive:!0}}],staticClass:"editor-button-attributes",attrs:{id:"workflow-home-button",role:"button",title:"Edit Attributes",variant:"link","aria-label":"Edit Attributes"},on:{click:function(t){return e.$emit("onAttributes")}}},[t("span",{staticClass:"fa fa-pencil-alt"})]),e._v(" "),t("b-button-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive",modifiers:{hover:!0,noninteractive:!0}}],staticClass:"editor-button-save-group",attrs:{title:n.saveHover}},[t(n.BButton,{staticClass:"editor-button-save",attrs:{id:"workflow-save-button",role:"button",variant:"link","aria-label":"Save Workflow",disabled:!e.isNewTempWorkflow&&!e.hasChanges},on:{click:n.onSave}},[t("span",{staticClass:"fa fa-floppy-o"})])],1),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive",modifiers:{hover:!0,noninteractive:!0}}],staticClass:"editor-button-report",attrs:{id:"workflow-report-button",role:"button",title:"Edit Report",variant:"link","aria-label":"Edit Report",disabled:e.isNewTempWorkflow},on:{click:function(t){return e.$emit("onReport")}}},[t("span",{staticClass:"fa fa-edit"})]),e._v(" "),t(n.BDropdown,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive",modifiers:{hover:!0,noninteractive:!0}}],staticClass:"editor-button-options",attrs:{id:"workflow-options-button","no-caret":"",right:"",role:"button",title:"Workflow Options",variant:"link","aria-label":"Workflow Options",disabled:e.isNewTempWorkflow},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("span",{staticClass:"fa fa-cog"})]},proxy:!0}])},[e._v(" "),t(n.BDropdownItem,{attrs:{href:"#"},on:{click:function(t){return e.$emit("onSaveAs")}}},[t("span",{staticClass:"fa fa-floppy-o"}),e._v("Save As...")]),e._v(" "),t(n.BDropdownItem,{attrs:{href:"#"},on:{click:function(t){return e.$emit("onLayout")}}},[t("span",{staticClass:"fa fa-align-left"}),e._v("Auto Layout")]),e._v(" "),t(n.BDropdownItem,{attrs:{href:"#"},on:{click:function(t){return e.$emit("onLint")}}},[t("span",{staticClass:"fa fa-magic"}),e._v("Best Practices")]),e._v(" "),t(n.BDropdownItem,{attrs:{href:"#"},on:{click:function(t){return e.$emit("onUpgrade")}}},[t("span",{staticClass:"fa fa-recycle"}),e._v("Upgrade Workflow")]),e._v(" "),t(n.BDropdownItem,{attrs:{href:"#"},on:{click:function(t){return e.$emit("onDownload")}}},[t("span",{staticClass:"fa fa-download"}),e._v("Download")])],1),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive",modifiers:{hover:!0,noninteractive:!0}}],staticClass:"editor-button-run",attrs:{id:"workflow-run-button",role:"button",title:"Run Workflow",variant:"link","aria-label":"Run Workflow",disabled:e.isNewTempWorkflow},on:{click:function(t){return e.$emit("onRun")}}},[t("span",{staticClass:"fa fa-play"})])],1)}),[],!1,null,null,null).exports;const Xy={components:{BModal:Nr.N},props:{refactorActions:{type:Array,required:!0},workflowId:{type:String,required:!0},title:{type:String,default:"Issues reworking this workflow"},message:{type:String,default:"Please review the following potential issues..."}},data(){return{show:this.refactorActions.length>0,confirmActionExecutions:[]}},watch:{refactorActions(){this.refactorActions.length>0&&this.dryRun()},show(){this.show&&this.$emit("onShow")}},methods:{dryRun(){this.$emit("onWorkflowMessage","Pre-checking requested workflow changes (dry run)...","progress"),Rh(this.workflowId,this.refactorActions,!0).then(this.onDryRunResponse).catch(this.onError)},onError(e){this.$emit("onWorkflowError","Reworking workflow failed...",e)},onDryRunResponse(e){let t=!1;for(const n of e.action_executions)n.messages.length>0&&(t=!0);t?(this.show=!0,this.confirmActionExecutions=e.action_executions):this.executeRefactoring()},executeRefactoring(){this.show=!1,this.$emit("onWorkflowMessage","Applying requested workflow changes...","progress"),Rh(this.workflowId,this.refactorActions).then((e=>{this.$emit("onRefactor",e)})).catch(this.onError)}}},Qy=Xy;const eb=(0,m.Z)(Qy,(function(){var e=this,t=e._self._c;return t("BModal",{attrs:{title:e.title,scrollable:"","ok-title":"Save"},on:{ok:e.executeRefactoring},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{staticClass:"workflow-refactor-modal"},[e._v("\n        "+e._s(e.message)+"\n        "),t("ul",e._l(e.confirmActionExecutions,(function(n,i){return t("li",{key:i},[t("ul",e._l(n.messages,(function(n,i){return t("li",{key:i},[e._v("\n                        - "+e._s(n.message)+"\n                    ")])})),0)])})),0)])])}),[],!1,null,null,null).exports;const tb={components:{BModal:Nr.N},props:{stateMessages:{type:Array,required:!0},title:{type:String,default:"Issues loading this workflow"},message:{type:String,default:"Please review the following issues, possibly resulting from tool upgrades or changes."}},data(){return{show:this.stateMessages.length>0}},watch:{stateMessages(){this.stateMessages.length>0&&(this.show=!0)}},methods:{humanIndex:e=>`${parseInt(e.stepIndex,10)+1}`,nodeTitle:e=>e.label?e.label:e.name,iconClass(e){let t="";return e.iconType&&(t=`icon fa fa-fw ${e.iconType}`),t}}};const nb=(0,m.Z)(tb,(function(){var e=this,t=e._self._c;return t("BModal",{attrs:{title:e.title,scrollable:"","ok-only":"","ok-title":"Continue"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{staticClass:"state-upgrade-modal"},[e._v("\n        "+e._s(e.message)+"\n        "),t("ul",{staticClass:"workflow-state-upgrade-step-summaries"},e._l(e.stateMessages,(function(n,i){return t("li",{key:i},[t("b",[t("i",{class:e.iconClass(n)}),e._v("\n                    Step "+e._s(e.humanIndex(n))+": "+e._s(e.nodeTitle(n))+"\n                ")]),e._v(" "),t("ul",{staticClass:"workflow-state-upgrade-step-details"},e._l(n.details,(function(n,i){return t("li",{key:i},[e._v("\n                        - "),t("span",{domProps:{innerHTML:e._s(n)}})])})),0)])})),0)])])}),[],!1,null,null,null).exports;var ib=n(23838),ob=n(28964);const ab=e=>!e.target.classList.contains("prevent-zoom");function sb(e=0){let t=null;return Hl((()=>{t&&(t(),t=null)}),e),{throttle:e=>{t=e}}}const rb=[.1,.2,.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.33,1.5,2,2.5,3,4,5],lb=rb[0],db=rb[rb.length-1];function cb(e){return rb.reduce(((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t))}function ub(e){return e===lb}function hb(e){return e===db}const pb=(0,a.defineComponent)({__name:"AdaptiveGrid",props:{viewportBounds:null,viewportBoundingBox:null,transform:null},setup(e){const t=e,n=[{condition:e=>e>.15,frequency:10,width:1},{condition:e=>!0,frequency:20,width:2},{condition:e=>e<=.5,frequency:100,width:4},{condition:e=>e<=.2,frequency:200,width:8}],i={grid:"black",landmark:"black"};(0,a.onMounted)((()=>{const e=o.value,t=getComputedStyle(e);i.grid=t.getPropertyValue("--grid-color"),i.landmark=t.getPropertyValue("--landmark-color")}));const o=(0,a.ref)(null),s=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=o.value)||void 0===e?void 0:e.getContext("2d"))&&void 0!==t?t:null}));let r=!0;function l(e){const o=t.transform.k,a={x:t.transform.x/o,y:t.transform.y/o};o>.5&&(e.strokeStyle=i.grid,e.lineWidth=1,e.beginPath(),d(e,10,a,t.viewportBoundingBox),e.stroke()),e.strokeStyle=i.landmark,n.forEach((n=>{if(n.condition(o)){e.lineWidth=n.width;const i=10*n.frequency;e.beginPath(),d(e,i,a,t.viewportBoundingBox),e.stroke()}}))}function d(e,t,n,i){const o=n.x%t-t,a=n.y%t-t,s=i.width/t+2,r=i.height/t+2;for(let n=0;n<s;n++){const a=o+n*t;e.moveTo(a,0),e.lineTo(a,i.height)}for(let n=0;n<r;n++){const o=a+n*t;e.moveTo(0,o),e.lineTo(i.width,o)}}return(0,a.watch)((()=>[t.transform,t.viewportBounds]),(()=>r=!0),{deep:!0}),Hl((()=>{const e=s.value;e&&r&&(e.canvas.width=e.canvas.offsetWidth,e.canvas.height=e.canvas.offsetHeight,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.resetTransform(),(new yh).scale([t.transform.k,t.transform.k]).applyToContext(e),l(e),r=!1)})),{__sfc:!0,lineGap:10,landmarkLines:n,props:t,colors:i,canvas:o,context:s,redraw:r,renderGrid:l,traceGrid:d}}}),fb=pb;const mb=(0,m.Z)(fb,(function(){var e=this._self._c;this._self._setupProxy;return e("canvas",{ref:"canvas",staticClass:"adaptive-grid-canvas"})}),[],!1,null,"6faa01a2",null).exports;var _b=n(2134);const vb={black:"#000",blue:"#004cec",turquoise:"#00bbd9",green:"#319400",lime:"#68c000",orange:"#f48400",yellow:"#fdbd0b",red:"#e31920",pink:"#fb00a6"},gb=(()=>{const e={},t=new _b.n;return Object.entries(vb).forEach((([n,i])=>{t.hex=i,t.hexToHsluv(),t.hsluv_l+=.5*(100-t.hsluv_l),t.hsluvToHex(),e[n]=t.hex})),e})(),yb=(()=>{const e={},t=new _b.n;return Object.entries(vb).forEach((([n,i])=>{t.hex=i,t.hexToHsluv(),t.hsluv_l+=.95*(100-t.hsluv_l),t.hsluvToHex(),e[n]=t.hex})),e})(),bb=Object.assign(Object.assign({},vb),{turquoise:"#00a6c0",lime:"#5eae00",yellow:"#e9ad00"});function wb(e,t,n){(0,a.watch)((()=>t.value),(([t,n])=>{const i=e.value;i&&(i.style.width=`${t}px`,i.style.height=`${n}px`)}));let i=t.value[0],o=t.value[1];const{toolbarStore:s}=Zg();(0,rn.ORN)(e,"mouseup",(()=>{const t=e.value;if(t){const e=t.offsetWidth,a=t.offsetHeight;i===e&&o===a||(s.snapActive?n(kh([e,a],s.snapDistance)):n([e,a]),i=e,o=a)}}))}function kb(e){var t,n;if(e.focus(),e instanceof HTMLTextAreaElement)e.select();else{const i=document.createRange();i.selectNodeContents(e),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),null===(n=window.getSelection())||void 0===n||n.addRange(i),function(){const e=()=>{var t;null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),window.removeEventListener("click",e,{capture:!0})};window.addEventListener("click",e,{capture:!0})}()}}const Cb=(0,a.defineComponent)({__name:"ColorSelector",props:{color:null},emits:["set-color"],setup:(e,{emit:t})=>({__sfc:!0,props:e,emit:t,onClickColor:function(e){t("set-color",e)},brightColors:gb,colors:vb})}),xb=Cb;const Sb=(0,m.Z)(xb,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"comment-color-selector"},[t("button",{staticClass:"color-button prevent-zoom",class:{selected:"none"===n.props.color},attrs:{title:"No Color","data-color":"none"},on:{click:()=>n.onClickColor("none")}}),e._v(" "),e._l(n.colors,(function(e,i){return t("button",{key:i,staticClass:"color-button prevent-zoom",class:{selected:n.props.color===i},style:{"--color":e,"--color-bright":n.brightColors[i]},attrs:{"data-color":i,title:`Color ${i}`},on:{click:()=>n.onClickColor(i)}})}))],2)}),[],!1,null,"069e924a",null).exports;var Mb=n(27355);function Tb(e,t={}){const n=t.draggingElement??window,i=t.handle??e,o=(0,Mb.iH)((0,Pn.Ly)(t.initialValue)??{x:0,y:0}),a=(0,Mb.iH)(),s=(0,Mb.iH)(),r=(0,Mb.iH)(),l=e=>!t.pointerTypes||t.pointerTypes.includes(e.pointerType),d=e=>{(0,Pn.Ly)(t.preventDefault)&&e.preventDefault(),(0,Pn.Ly)(t.stopPropagation)&&e.stopPropagation()},c=i=>{if(!l(i))return;if((0,Pn.Ly)(t.exact)&&i.target!==(0,Pn.Ly)(e))return;const c=(0,Pn.Ly)(e)?.getBoundingClientRect(),u={x:i.clientX-c.left,y:i.clientY-c.top};if(!1===t.onStart?.(u,i))return;a.value=u;function h(e){return Lb((()=>(e=>{l(e)&&a.value&&(o.value={x:e.clientX-a.value.x,y:e.clientY-a.value.y},t.onMove?.(o.value,e),d(e))})(e)))}s.value&&s.value(),r.value&&r.value(),r.value=(0,rn.ORN)(window,"dragover",h,t.useCapture??!0),s.value=(0,rn.ORN)(n,"pointermove",h,t.useCapture??!0),d(i)},u=e=>{l(e)&&a.value&&(a.value=void 0,t.onEnd?.(o.value,e),d(e),s.value&&s.value(),r.value&&r.value())};if(Pn.C5){const e=t.useCapture??!0;(0,rn.ORN)(i,"dragstart",c,e),(0,rn.ORN)(i,"pointerdown",c,e),(0,rn.ORN)(n,"dragend",u,e),(0,rn.ORN)(n,"pointerup",u,e)}return{...(0,Pn.BK)(o),position:o,isDragging:(0,Mb.Fl)((()=>!!a.value)),style:(0,Mb.Fl)((()=>`left:${o.value.x}px;top:${o.value.y}px;`))}}const Lb=function(e){let t;return n=>{t||e((()=>{const e=t;t=null,e()})),t=n}}(requestAnimationFrame),Db=(0,a.defineComponent)({__name:"Draggable",props:{rootOffset:{type:Object,required:!0},preventDefault:{type:Boolean,default:!0},stopPropagation:{type:Boolean,default:!0},dragData:{type:Object,required:!1,default:null},disabled:{type:Boolean,default:!1}},emits:["mousedown","mouseup","move","dragstart","start","stop"],setup(e,{emit:t}){const n=e;let i=null;const s=(0,a.ref)(),r=(0,a.reactive)(function(e){const t=(0,a.ref)(0),n=(0,a.ref)(0);return Wl(e,(()=>{const i=(0,Pn.Ly)(e);i&&(t.value=i.offsetWidth,n.value=i.offsetHeight)})),{width:t,height:n}}(s)),l=(0,a.inject)("transform"),{throttle:d}=sb();let c=!1;const u=(e,o)=>{if(t("start"),t("mousedown",o),"dragstart"==o.type){i=document.createElement("img"),i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",document.body.appendChild(i),o.dataTransfer.effectAllowed="link";try{o.dataTransfer.setDragImage(i,0,0)}catch(e){console.error(e)}n.dragData&&o.dataTransfer.setData("text/plain",JSON.stringify(n.dragData)),t("dragstart",o)}},{toolbarStore:h}=Zg(),{snapActive:p}=(0,o.Jk)(h);function f(e){return p.value?Object.assign(Object.assign({},e),{x:Math.round(e.x/h.snapDistance)*h.snapDistance,y:Math.round(e.y/h.snapDistance)*h.snapDistance}):Object.assign(Object.assign({},e),{x:e.x,y:e.y})}const m=(e,i)=>{c=!0,"drag"==i.type&&0==i.x&&0==i.y||d((()=>{if(c){const o={unscaled:Object.assign(Object.assign({},e),r),x:(e.x-n.rootOffset.x-l.value.x)/l.value.k,y:(e.y-n.rootOffset.y-l.value.y)/l.value.k};t("move",f(o),i)}}))},_=(e,n)=>{i&&(document.body.removeChild(i),i=null),c=!1,t("mouseup",n),t("stop")},v=(0,a.computed)((()=>n.disabled?null:s.value));return Tb(v,{preventDefault:n.preventDefault,stopPropagation:n.stopPropagation,useCapture:!1,onStart:u,onMove:m,onEnd:_}),{__sfc:!0,props:n,emit:t,dragImg:i,draggable:s,size:r,transform:l,throttle:d,dragging:c,onStart:u,toolbarStore:h,snapActive:p,getSnappedPosition:f,onMove:m,onEnd:_,maybeDraggable:v}}}),Eb=Db;const Ob=(0,m.Z)(Eb,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"draggable"},[e._t("default")],2)}),[],!1,null,null,null).exports,Ab=(0,a.defineComponent)({__name:"DraggablePan",props:{rootOffset:{type:Object,required:!0},scale:{type:Number,required:!1,default:1},preventDefault:{type:Boolean,default:!0},stopPropagation:{type:Boolean,default:!0},dragData:{type:Object,required:!1,default:null},disabled:{type:Boolean,default:!1},panMargin:{type:Number,default:60}},emits:["pan-by","move","mouseup","start"],setup(e,{emit:t}){const n=e;let i=!1;const o={x:0,y:0};let a,s={x:0,y:0,unscaled:{x:0,y:0}};function r(e){if(i){a||(a=e);const n=(e-a)/1e3,i={x:o.x*n,y:o.y*n};t("pan-by",i),s.x-=i.x,s.y-=i.y,t("move",s),a=e,requestAnimationFrame(r)}else a=void 0}return{__sfc:!0,props:n,emit:t,isPanning:i,panBy:o,movePosition:s,previousTimestamp:a,pan:r,panSpeedFactor:6,onMove:function(e,a){let l=!1;o.x=0,o.y=0;const d=e=>{const t=Math.abs(6*e/n.scale);return Math.min(t,1200/n.scale)},c=a.pageX-n.rootOffset.left-n.panMargin,u=n.rootOffset.right-a.pageX-n.panMargin,h=a.pageY-n.rootOffset.top-n.panMargin,p=n.rootOffset.bottom-a.pageY-n.panMargin;c<0&&(o.x=d(c),l=!0),h<0&&(o.y=d(h),l=!0),u<0&&(o.x=-d(u),l=!0),p<0&&(o.y=-d(p),l=!0),s=Object.assign({},e),l||(t("move",e,a),i=!1),l&&!i&&(i=!0,requestAnimationFrame(r))},onMouseUp:function(e){i=!1,t("mouseup",e)},onStart:function(){t("start")},Draggable:Ob}}}),Ib=Ab;const Pb=(0,m.Z)(Ib,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.Draggable,e._g({attrs:{"root-offset":e.rootOffset,"prevent-default":e.preventDefault,"stop-propagation":e.stopPropagation,"drag-data":e.dragData,disabled:e.disabled},on:{move:n.onMove,mouseup:n.onMouseUp,start:n.onStart}},e.$listeners),[e._t("default")],2)}),[],!1,null,null,null).exports,Rb=(0,a.defineComponent)({__name:"FrameComment",props:{comment:null,rootOffset:null,scale:null,readonly:{type:Boolean}},emits:["change","resize","move","pan-by","remove","set-color"],setup(e,{emit:t}){const n=e;u.vI.add(h.tU8,zo.I7,h.q2v,h.V9$);const i=(0,a.ref)();function o(e){return(0,pf.sanitize)(e,{ALLOWED_TAGS:[]}).replace(/(?:^(\s|&nbsp;)+)|(?:(\s|&nbsp;)+$)/g,"")}wb(i,(0,a.computed)((()=>n.comment.size)),(([e,n])=>{t("resize",[e,n])}));const s=(0,a.ref)();function r(){var e;const t=s.value;if(t){return o(null!==(e=t.innerHTML)&&void 0!==e?e:"")}return""}function l(){t("change",Object.assign(Object.assign({},n.comment.data),{title:r()}))}const d=(0,a.ref)(!1),c=(0,a.ref)(),{focused:f}=(0,rn.L_M)(c);(0,a.watch)((()=>f.value),(()=>{f.value||(d.value=!1)}));const{stateStore:m,stepStore:_,commentStore:v}=Zg();function g(e){const t=[];return Object.values(_.steps).forEach((n=>{const i=m.stepPosition[n.id];if(i&&n.position){const o={x:n.position.left,y:n.position.top,width:i.width,height:i.height};e.contains(o)&&t.push(n)}})),t}function y(e){const t=[];return v.comments.forEach((i=>{const o={x:i.position[0],y:i.position[1],width:i.size[0],height:i.size[1]};i!==n.comment&&e.contains(o)&&t.push(i)})),t}let b=[],w=[];const k=new Map,C=new Map;function x(){const e=new gh;return e.x=n.comment.position[0],e.y=n.comment.position[1],e.width=n.comment.size[0],e.height=n.comment.size[1],e}const S=(0,a.computed)((()=>{const e={};return"none"!==n.comment.color&&(e["--primary-color"]=bb[n.comment.color],e["--secondary-color"]=yb[n.comment.color]),e}));return(0,a.onMounted)((()=>{v.isJustCreated(n.comment.id)&&s.value&&kb(s.value)})),{__sfc:!0,props:n,emit:t,resizeContainer:i,escapeAndSanitize:o,editableElement:s,getInnerText:r,saveText:l,showColorSelector:d,rootElement:c,focused:f,onClick:function(){var e;null===(e=s.value)||void 0===e||e.focus()},onSetColor:function(e){t("set-color",e)},stateStore:m,stepStore:_,commentStore:v,getStepsInBounds:g,getCommentsInBounds:y,stepsInBounds:b,commentsInBounds:w,stepStartOffsets:k,commentStartOffsets:C,getAABB:x,onDragStart:function(){const e=x();b=g(e),w=y(e),b.forEach((t=>{k.set(t.id,[t.position.left-e.x,t.position.top-e.y])})),w.forEach((t=>{C.set(t.id,[t.position[0]-e.x,t.position[1]-e.y])}))},onDragEnd:function(){l(),b=[],w=[],k.clear(),C.clear()},onMove:function(e){b.forEach((t=>{var n;const i={left:0,top:0},o=null!==(n=k.get(t.id))&&void 0!==n?n:[0,0];i.left=e.x+o[0],i.top=e.y+o[1],_.updateStep(Object.assign(Object.assign({},t),{position:i}))})),w.forEach((t=>{var n;const i=null!==(n=C.get(t.id))&&void 0!==n?n:[0,0],o=[e.x+i[0],e.y+i[1]];v.changePosition(t.id,o)})),t("move",[e.x,e.y])},onDoubleClick:function(){s.value&&kb(s.value)},onFitToContent:function(){const e=x();b=g(e),w=y(e);const n=new gh;b.forEach((e=>{const t=m.stepPosition[e.id];if(t&&e.position){const i={x:e.position.left,y:e.position.top,width:t.width,height:t.height};n.fitRectangle(i)}})),w.forEach((e=>{const t={x:e.position[0],y:e.position[1],width:e.size[0],height:e.size[1]};n.fitRectangle(t)})),n.expand(20),n.y-=20,t("move",[n.x,n.y]),t("resize",[n.width,n.height])},cssVariables:S,FontAwesomeIcon:p.GN,BButton:jn.T,BButtonGroup:_o.a,reactive:a.reactive,ColorSelector:Sb,DraggablePan:Pb}}}),jb=Rb;const Yb=(0,m.Z)(jb,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"rootElement",staticClass:"frame-workflow-comment"},[t("div",{ref:"resizeContainer",staticClass:"resize-container",class:{resizable:!n.props.readonly,"prevent-zoom":!n.props.readonly},style:n.cssVariables,on:{click:n.onClick}},[n.props.readonly?e._e():t(n.DraggablePan,{staticClass:"draggable-pan",attrs:{"root-offset":n.reactive(n.props.rootOffset),scale:n.props.scale},on:{move:n.onMove,mouseup:n.onDragEnd,start:n.onDragStart,"pan-by":e=>n.emit("pan-by",e)}}),e._v(" "),t("div",{staticClass:"frame-comment-header"},[t(n.FontAwesomeIcon,{attrs:{icon:"fas fa-object-group"}}),e._v(" "),t("span",{ref:"editableElement",staticClass:"prevent-zoom",attrs:{contenteditable:!n.props.readonly,spellcheck:"false"},domProps:{innerHTML:e._s(n.escapeAndSanitize(n.props.comment.data.title))},on:{blur:n.saveText,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),n.saveText.apply(null,arguments))},dblclick:function(e){return e.preventDefault(),n.onDoubleClick.apply(null,arguments)},mouseup:function(e){e.stopPropagation()}}})],1)],1),e._v(" "),n.props.readonly?e._e():t(n.BButtonGroup,{staticClass:"style-buttons"},[t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"outline-primary",title:"Fit to content"},on:{click:n.onFitToContent}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:"fa-compress-alt"}})],1),e._v(" "),t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"outline-primary",title:"Color",pressed:n.showColorSelector},on:{click:()=>n.showColorSelector=!n.showColorSelector}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:"fa-palette"}})],1),e._v(" "),t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"dark",title:"Delete comment"},on:{click:()=>n.emit("remove")}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:"far fa-trash-alt"}})],1)],1),e._v(" "),n.showColorSelector?t(n.ColorSelector,{staticClass:"color-selector",attrs:{color:n.props.comment.color},on:{"set-color":n.onSetColor}}):e._e()],1)}),[],!1,null,"6ca043e8",null).exports;const Hb=(0,a.defineComponent)({__name:"FreehandComment",props:{comment:null},emits:["remove"],setup(e,{emit:t}){const n=e,i=(0,bt.jvg)().curve(bt.c_6),o=(0,bt.jvg)().curve(bt.zgE),{commentStore:s,toolbarStore:r}=Zg(),l=(0,a.computed)((()=>{var e,t;return s.isJustCreated(n.comment.id)?null!==(e=i(n.comment.data.line.map((e=>Ch(e,n.comment.position)))))&&void 0!==e?e:void 0:null!==(t=o(n.comment.data.line))&&void 0!==t?t:void 0})),d=(0,a.computed)((()=>{const e={"pointer-events":"freehandEraser"===r.currentTool?"stroke":"none","--thickness":`${n.comment.data.thickness}px`};return"none"!==n.comment.color&&(e["--color"]=vb[n.comment.color]),r.inputCatcherEnabled&&(e.cursor="crosshair"),e}));return{__sfc:!0,props:n,emit:t,linear:i,catmullRom:o,commentStore:s,toolbarStore:r,curve:l,style:d,onMouseOver:function(){r.inputCatcherPressed&&t("remove")},onClick:function(){r.inputCatcherEnabled&&t("remove")}}}}),Nb=Hb;const Fb=(0,m.Z)(Nb,(function(){var e=this._self._c,t=this._self._setupProxy;return e("svg",{staticClass:"freehand-workflow-comment"},[e("path",{staticClass:"prevent-zoom",style:t.style,attrs:{d:t.curve},on:{mouseover:t.onMouseOver,mousedown:function(e){return e.preventDefault(),t.onClick.apply(null,arguments)}}})])}),[],!1,null,"13ab1853",null).exports;const Bb=(0,a.defineComponent)({__name:"MarkdownComment",props:{comment:null,rootOffset:null,scale:null,readonly:{type:Boolean}},emits:["change","resize","move","pan-by","remove","set-color"],setup(e,{emit:t}){const n=e;u.vI.add(zo.I7,h.q2v);const i=(0,a.ref)();wb(i,(0,a.computed)((()=>n.comment.size)),(([e,n])=>{t("resize",[e,n])}));const o=(0,kv.Z)("textarea-"),{renderMarkdown:s}=(0,Vt.A)({openLinksInNewPage:!0,increaseHeadingLevelBy:1}),r=(0,a.computed)((()=>{const e=s(n.comment.data.text),t=document.createElement("div");t.innerHTML=e;const i=t.querySelectorAll("*");return Array.from(i).forEach((e=>{e.classList.add("prevent-zoom")})),t.innerHTML})),l=(0,a.ref)();const d=(0,a.ref)(!1),c=(0,a.ref)(),{focused:f}=(0,rn.L_M)(c);(0,a.watch)((()=>f.value),(()=>{f.value||(d.value=!1)}));const m=(0,a.computed)((()=>{const e={};return"none"!==n.comment.color&&(e["--primary-color"]=bb[n.comment.color]),e})),{commentStore:_}=Zg();return(0,a.onMounted)((()=>{_.isJustCreated(n.comment.id)&&l.value&&kb(l.value)})),{__sfc:!0,props:n,emit:t,resizeContainer:i,textAreaId:o,renderMarkdown:s,content:r,markdownTextarea:l,onClick:function(){var e,t;n.readonly||""!==(null===(e=window.getSelection())||void 0===e?void 0:e.toString())||null===(t=l.value)||void 0===t||t.focus()},onMove:function(e){t("move",[e.x,e.y])},onMouseup:function(){const e=l.value;e&&""===e.value.trim()&&e.focus()},showColorSelector:d,rootElement:c,focused:f,onSetColor:function(e){t("set-color",e)},onTextChange:function(){const e=l.value;e&&t("change",{text:e.value})},cssVariables:m,commentStore:_,FontAwesomeIcon:p.GN,BButton:jn.T,BButtonGroup:_o.a,reactive:a.reactive,ColorSelector:Sb,DraggablePan:Pb}}}),$b=Bb;const zb=(0,m.Z)($b,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"rootElement",staticClass:"markdown-workflow-comment"},[t("div",{ref:"resizeContainer",staticClass:"resize-container",class:{resizable:!n.props.readonly,"prevent-zoom":!n.props.readonly},style:n.cssVariables},[n.props.readonly?e._e():t(n.DraggablePan,{staticClass:"draggable-pan",attrs:{"root-offset":n.reactive(n.props.rootOffset),scale:n.props.scale},on:{mouseup:n.onMouseup,move:n.onMove,"pan-by":e=>n.emit("pan-by",e)}}),e._v(" "),t("label",{staticClass:"sr-only",attrs:{for:n.textAreaId}},[e._v("Markdown Input")]),e._v(" "),t("textarea",{ref:"markdownTextarea",staticClass:"markdown-textarea prevent-zoom",attrs:{id:n.textAreaId},domProps:{value:n.props.comment.data.text},on:{input:n.onTextChange}}),e._v(" "),t("div",{staticClass:"rendered-markdown",domProps:{innerHTML:e._s(n.content)},on:{click:n.onClick}})],1),e._v(" "),n.props.readonly?e._e():t(n.BButtonGroup,{staticClass:"style-buttons"},[t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"outline-primary",title:"Color",pressed:n.showColorSelector},on:{click:()=>n.showColorSelector=!n.showColorSelector}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:"fa-palette"}})],1),e._v(" "),t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"dark",title:"Delete comment"},on:{click:()=>n.emit("remove")}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:"far fa-trash-alt"}})],1)],1),e._v(" "),n.showColorSelector?t(n.ColorSelector,{staticClass:"color-selector",attrs:{color:n.props.comment.color},on:{"set-color":n.onSetColor}}):e._e()],1)}),[],!1,null,"1328c669",null).exports;var Wb=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const Ub=(0,a.defineComponent)({__name:"TextComment",props:{comment:null,rootOffset:null,scale:null,readonly:{type:Boolean}},emits:["change","resize","move","pan-by","remove","set-color"],setup(e,{emit:t}){const n=e;u.vI.add(zo.I7,h.q2v);const i=(0,a.ref)();function o(e){return(0,pf.sanitize)(e,{ALLOWED_TAGS:["br"]}).replace(/(?:^(\s|&nbsp;)+)|(?:(\s|&nbsp;)+$)/g,"")}wb(i,(0,a.computed)((()=>n.comment.size)),(([e,n])=>{t("resize",[e,n]),l()}));const s=(0,a.ref)();function r(){var e;const t=s.value;if(t){return o(null!==(e=t.innerHTML)&&void 0!==e?e:"")}return""}function l(){t("change",Object.assign(Object.assign({},n.comment.data),{text:r()}))}const d=(0,a.computed)((()=>n.comment.data.size)),c=(0,a.computed)((()=>d.value<5)),f=(0,a.computed)((()=>d.value>1));const m=(0,a.computed)((()=>c.value?`Increase font size to ${d.value+1}`:"Maximum font size"));const _=(0,a.computed)((()=>f.value?"Decrease font size to "+(d.value-1):"Minimum font size"));const v=(0,a.ref)(!1),g=(0,a.ref)(),{focused:y}=(0,rn.L_M)(g);(0,a.watch)((()=>y.value),(()=>{y.value||(v.value=!1,""===r()?t("remove"):l())}));const b=(0,a.computed)((()=>{const e={"--font-size":`${d.value}rem`};return"none"!==n.comment.color&&(e["--font-color"]=vb[n.comment.color]),e})),{commentStore:w}=Zg();return(0,a.onMounted)((()=>{w.isJustCreated(n.comment.id)&&s.value&&kb(s.value)})),{__sfc:!0,props:n,emit:t,resizeContainer:i,escapeAndSanitize:o,editableElement:s,getInnerText:r,saveText:l,toggleBold:function(){if(n.comment.data.bold){const e=n.comment.data,{bold:i}=e,o=Wb(e,["bold"]);t("change",o)}else t("change",Object.assign(Object.assign({},n.comment.data),{bold:!0}))},toggleItalic:function(){if(n.comment.data.italic){const e=n.comment.data,{italic:i}=e,o=Wb(e,["italic"]);t("change",o)}else t("change",Object.assign(Object.assign({},n.comment.data),{italic:!0}))},fontSize:d,canIncreaseFontSize:c,canDecreaseFontSize:f,increaseFontSize:function(){c.value&&t("change",Object.assign(Object.assign({},n.comment.data),{size:d.value+1}))},increaseFontSizeTitle:m,decreaseFontSize:function(){f.value&&t("change",Object.assign(Object.assign({},n.comment.data),{size:d.value-1}))},decreaseFontSizeTitle:_,onRootClick:function(){var e;null===(e=s.value)||void 0===e||e.focus()},onMove:function(e){t("move",[e.x,e.y])},showColorSelector:v,rootElement:g,focused:y,onSetColor:function(e){t("set-color",e)},cssVariables:b,commentStore:w,onDoubleClick:function(){s.value&&kb(s.value)},FontAwesomeIcon:p.GN,BButton:jn.T,BButtonGroup:_o.a,reactive:a.reactive,ColorSelector:Sb,DraggablePan:Pb}}}),Vb=Ub;const qb=(0,m.Z)(Vb,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"rootElement",staticClass:"text-workflow-comment"},[t("div",{ref:"resizeContainer",staticClass:"resize-container",class:{resizable:!n.props.readonly,"prevent-zoom":!n.props.readonly},style:n.cssVariables,on:{click:n.onRootClick}},[n.props.readonly?e._e():t(n.DraggablePan,{staticClass:"draggable-pan",attrs:{"root-offset":n.reactive(n.props.rootOffset),scale:n.props.scale},on:{move:n.onMove,mouseup:n.saveText,"pan-by":e=>n.emit("pan-by",e)}}),e._v(" "),t("span",{ref:"editableElement",staticClass:"prevent-zoom",class:{bold:n.props.comment.data.bold,italic:n.props.comment.data.italic},attrs:{contenteditable:!n.props.readonly,spellcheck:"false"},domProps:{innerHTML:e._s(n.escapeAndSanitize(n.props.comment.data.text))},on:{blur:n.saveText,mouseup:function(e){e.stopPropagation()},dblclick:function(e){return e.preventDefault(),n.onDoubleClick.apply(null,arguments)}}})],1),e._v(" "),n.props.readonly?e._e():t(n.BButtonGroup,{staticClass:"style-buttons"},[t(n.BButton,{staticClass:"button font-weight-bold prevent-zoom",attrs:{variant:"outline-primary",title:n.props.comment.data.bold?"Reset bold":"Make bold",pressed:n.props.comment.data.bold},on:{click:n.toggleBold}},[e._v("\n            B\n        ")]),e._v(" "),t(n.BButton,{staticClass:"button font-italic prevent-zoom",attrs:{variant:"outline-primary",title:n.props.comment.data.italic?"Reset italic":"Make italic",pressed:n.props.comment.data.italic},on:{click:n.toggleItalic}},[e._v("\n            I\n        ")]),e._v(" "),t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"outline-primary",title:"Color",pressed:n.showColorSelector},on:{click:()=>n.showColorSelector=!n.showColorSelector}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:"fa-palette"}})],1),e._v(" "),t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"primary",title:n.decreaseFontSizeTitle},on:{click:n.decreaseFontSize}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:["gxd","textSmaller"]}})],1),e._v(" "),t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"primary",title:n.increaseFontSizeTitle},on:{click:n.increaseFontSize}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:["gxd","textLarger"]}})],1),e._v(" "),t(n.BButton,{staticClass:"button prevent-zoom",attrs:{variant:"dark",title:"Delete comment"},on:{click:()=>n.emit("remove")}},[t(n.FontAwesomeIcon,{staticClass:"prevent-zoom",attrs:{icon:"far fa-trash-alt"}})],1)],1),e._v(" "),n.showColorSelector?t(n.ColorSelector,{staticClass:"color-selector",attrs:{color:n.props.comment.color},on:{"set-color":n.onSetColor}}):e._e()],1)}),[],!1,null,"17ad98c6",null).exports,Zb=(0,a.defineComponent)({__name:"WorkflowComment",props:{comment:null,scale:null,rootOffset:null,readonly:{type:Boolean}},emits:["pan-by"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>({"--position-left":`${n.comment.position[0]}px`,"--position-top":`${n.comment.position[1]}px`,"--width":`${n.comment.size[0]}px`,"--height":`${n.comment.size[1]}px`}))),{commentStore:o}=Zg();return{__sfc:!0,props:n,emit:t,cssVariables:i,commentStore:o,onUpdateData:function(e){o.changeData(n.comment.id,e)},onResize:function(e){o.changeSize(n.comment.id,e)},onMove:function(e){o.changePosition(n.comment.id,e)},onPan:function(e){t("pan-by",e)},onRemove:function(){o.deleteComment(n.comment.id)},onSetColor:function(e){o.changeColor(n.comment.id,e)},FrameComment:Yb,FreehandComment:Fb,MarkdownComment:zb,TextComment:qb}}}),Gb=Zb;const Jb=(0,m.Z)(Gb,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"workflow-editor-comment",style:n.cssVariables},["text"===n.props.comment.type?t(n.TextComment,{attrs:{comment:n.props.comment,scale:n.props.scale,readonly:n.props.readonly,"root-offset":n.props.rootOffset},on:{change:n.onUpdateData,resize:n.onResize,move:n.onMove,"pan-by":n.onPan,remove:n.onRemove,"set-color":n.onSetColor}}):"markdown"===n.props.comment.type?t(n.MarkdownComment,{attrs:{comment:n.props.comment,scale:n.props.scale,readonly:n.props.readonly,"root-offset":n.props.rootOffset},on:{change:n.onUpdateData,resize:n.onResize,move:n.onMove,"pan-by":n.onPan,remove:n.onRemove,"set-color":n.onSetColor}}):"frame"===n.props.comment.type?t(n.FrameComment,{attrs:{comment:n.props.comment,scale:n.props.scale,readonly:n.props.readonly,"root-offset":n.props.rootOffset},on:{change:n.onUpdateData,resize:n.onResize,move:n.onMove,"pan-by":n.onPan,remove:n.onRemove,"set-color":n.onSetColor}}):"freehand"===n.props.comment.type?t(n.FreehandComment,{attrs:{comment:n.props.comment},on:{remove:n.onRemove}}):e._e()],1)}),[],!1,null,"1e3035b8",null).exports;const Kb=(0,a.defineComponent)({__name:"InputCatcher",props:{transform:null},setup(e){const t=e,{toolbarStore:n}=Zg(),i=(0,a.ref)(),o=["pointerup","pointerdown","pointermove","pointerleave"],s=(0,a.computed)((()=>(new yh).translate([t.transform.x,t.transform.y]).scale([t.transform.k,t.transform.k]).inverse())),r=(0,a.computed)((()=>({transform:`matrix(${s.value.matrix.join(",")})`})));let l=[0,0];return(0,rn.ORN)(i,[...o],(e=>{e.preventDefault(),e.stopPropagation();const t=s.value.apply([e.offsetX,e.offsetY]),i={type:e.type,position:t};l=t,n.emitInputCatcherEvent(e.type,i)})),(0,a.watch)((()=>n.inputCatcherEnabled),(()=>{n.inputCatcherEnabled&&n.emitInputCatcherEvent("temporarilyDisabled",{type:"temporarilyDisabled",position:l})})),{__sfc:!0,props:t,toolbarStore:n,inputCatcher:i,events:o,inverseCanvasTransform:s,style:r,lastPosition:l}}}),Xb=Kb;const Qb=(0,m.Z)(Xb,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.toolbarStore.inputCatcherActive&&n.toolbarStore.inputCatcherEnabled?t("div",{ref:"inputCatcher",staticClass:"input-catcher",style:n.style}):e._e()}),[],!1,null,"54a6f78a",null).exports;var ew=n(16479),tw=n.n(ew);const nw=(0,a.defineComponent)({__name:"ToolBar",setup(e){u.vI.add(h.mlU,h.kwz,h.tU8,q_.cCZ,h.IwR,h.xf2);const{toolbarStore:t,commentStore:n}=Zg(),{snapActive:i,currentTool:o}=(0,a.toRefs)(t),{commentOptions:s}=t,r=(0,a.computed)((()=>i.value?"Deactivate snapping (Ctrl + 2)":"Activate snapping (Ctrl + 2)"));(0,a.watch)((()=>t.currentTool),(e=>{t.inputCatcherActive="pointer"!==e}));const l=(0,kv.Z)("snapping-distance-"),d=(0,a.computed)({get:()=>(0,fe.EQ)(t.snapDistance,{10:()=>"1",20:()=>"2",50:()=>"3",100:()=>"4",200:()=>"5"}),set(e){t.snapDistance=(0,fe.EQ)(parseInt(e),{1:()=>10,2:()=>20,3:()=>50,4:()=>100,5:()=>200})}}),c=(0,kv.Z)("font-size-"),f=(0,a.computed)({get:()=>`${s.textSize}`,set(e){s.textSize=parseInt(e)}}),m=(0,kv.Z)("thickness-"),_=(0,kv.Z)("smoothing-");!function(e,t){let n=null,i=null;const{commentOptions:o}=e;(0,a.watch)((()=>e.currentTool),(()=>{"freehand"===(null==n?void 0:n.type)?s(n):n=null})),e.onInputCatcherEvent("pointerdown",(({position:a})=>{if(i=a,"freehandEraser"!==e.currentTool&&("freehand"===(null==n?void 0:n.type)||!n)){const s={id:t.highestCommentId+1,position:i,size:[0,0],color:o.color};n=(0,fe.EQ)(e.currentTool,{textComment:()=>Object.assign(Object.assign({},s),{type:"text",data:{size:o.textSize,text:"Enter Text",bold:o.bold||void 0,italic:o.italic||void 0}}),markdownComment:()=>Object.assign(Object.assign({},s),{type:"markdown",data:{text:"*Enter Text*"}}),frameComment:()=>Object.assign(Object.assign({},s),{type:"frame",data:{title:"Frame"}}),freehandComment:()=>Object.assign(Object.assign({},s),{type:"freehand",data:{thickness:o.lineThickness,line:[a]}}),pointer:()=>{throw new Error("Tool logic should not be active when pointer tool is selected")}}),t.createComment(n)}})),e.onInputCatcherEvent("pointermove",(({position:o})=>{"freehandEraser"!==e.currentTool&&n&&i&&("freehand"===n.type?t.addPoint(n.id,o):r(i,o,n))})),e.onInputCatcherEvent("pointerup",(()=>{"freehandEraser"!==e.currentTool&&("freehand"===(null==n?void 0:n.type)?s(n):"freehandComment"!==e.currentTool&&(e.currentTool="pointer"),n=null)})),e.onInputCatcherEvent("pointerleave",(()=>{"freehand"===(null==n?void 0:n.type)&&(s(n),n=null)})),e.onInputCatcherEvent("temporarilyDisabled",(()=>{"freehand"===(null==n?void 0:n.type)&&(s(n),n=null)}));const s=e=>{const n=t.commentsRecord[e.id];if((0,Sh.Nh)(n),"freehand"!==n.type)throw new Error("Comment is not of type freehandComment");const i=n.data.line.map((e=>({x:e[0],y:e[1]}))),a=tw()(i,o.smoothing).map((e=>[e.x,e.y])).map((e=>Ch(e,n.position))).map((e=>xh(e)));t.changeData(n.id,Object.assign(Object.assign({},n.data),{line:a})),t.changePosition(n.id,xh(n.position)),t.changeSize(n.id,xh(n.size)),t.clearJustCreated(n.id)},r=(n,i,o)=>{e.snapActive&&(n=kh(n,e.snapDistance),i=kh(i,e.snapDistance));const a=bh(n,i),s=a,r=Ch(wh(n,i),a);t.changePosition(o.id,s),t.changeSize(o.id,r)}}(t,n);const{ctrl_1:v,ctrl_2:g,ctrl_3:y,ctrl_4:b,ctrl_5:w,ctrl_6:k,ctrl_7:C}=(0,rn.IKb)();return(0,Pn.$M)(v,(()=>t.currentTool="pointer")),(0,Pn.$M)(g,(()=>t.snapActive=!t.snapActive)),(0,Pn.$M)(y,(()=>t.currentTool="textComment")),(0,Pn.$M)(b,(()=>t.currentTool="markdownComment")),(0,Pn.$M)(w,(()=>t.currentTool="frameComment")),(0,Pn.$M)(k,(()=>t.currentTool="freehandComment")),(0,Pn.$M)(C,(()=>t.currentTool="freehandEraser")),{__sfc:!0,toolbarStore:t,commentStore:n,snapActive:i,currentTool:o,commentOptions:s,snapButtonTitle:r,onClickPointer:function(){o.value="pointer"},onCommentToolClick:function(e){o.value=e},snappingDistanceId:l,snappingDistanceRangeValue:d,fontSizeId:c,fontSize:f,thicknessId:m,smoothingId:_,onRemoveAllFreehand:function(){n.deleteFreehandComments()},ctrl_1:v,ctrl_2:g,ctrl_3:y,ctrl_4:b,ctrl_5:w,ctrl_6:k,ctrl_7:C,FontAwesomeIcon:p.GN,BButton:jn.T,BButtonGroup:_o.a,BFormInput:to.e,ColorSelector:Sb}}});const iw=(0,m.Z)(nw,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"workflow-editor-toolbar"},[t("div",{staticClass:"tools"},[t(n.BButtonGroup,{attrs:{vertical:""}},[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.right",modifiers:{hover:!0,noninteractive:!0,right:!0}}],staticClass:"button",attrs:{"data-tool":"pointer",title:"Pointer Tool (Ctrl + 1)",pressed:"pointer"===n.currentTool,variant:"outline-primary"},on:{click:n.onClickPointer}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-mouse-pointer",size:"lg"}})],1),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.right",modifiers:{hover:!0,noninteractive:!0,right:!0}}],staticClass:"button",attrs:{"data-tool":"toggle_snap",title:n.snapButtonTitle,pressed:n.snapActive,variant:"outline-primary"},on:{"update:pressed":function(e){n.snapActive=e}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-magnet",size:"lg"}})],1)],1),e._v(" "),t(n.BButtonGroup,{attrs:{vertical:""}},[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.right",modifiers:{hover:!0,noninteractive:!0,right:!0}}],staticClass:"button font-weight-bold",attrs:{"data-tool":"text_comment",title:"Text comment (Ctrl + 3)",pressed:"textComment"===n.currentTool,variant:"outline-primary"},on:{click:()=>n.onCommentToolClick("textComment")}},[t("span",{staticClass:"icon-t"},[e._v("T")])]),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.right",modifiers:{hover:!0,noninteractive:!0,right:!0}}],staticClass:"button",attrs:{"data-tool":"markdown_comment",title:"Markdown comment (Ctrl + 4)",pressed:"markdownComment"===n.currentTool,variant:"outline-primary"},on:{click:()=>n.onCommentToolClick("markdownComment")}},[t(n.FontAwesomeIcon,{attrs:{icon:["fab","markdown"],size:"lg"}})],1),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.right",modifiers:{hover:!0,noninteractive:!0,right:!0}}],staticClass:"button",attrs:{"data-tool":"frame_comment",title:"Frame comment (Ctrl + 5)",pressed:"frameComment"===n.currentTool,variant:"outline-primary"},on:{click:()=>n.onCommentToolClick("frameComment")}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-object-group",size:"lg"}})],1)],1),e._v(" "),t(n.BButtonGroup,{attrs:{vertical:""}},[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.right",modifiers:{hover:!0,noninteractive:!0,right:!0}}],staticClass:"button",attrs:{title:"Freehand Pen (Ctrl + 6)","data-tool":"freehand_pen",pressed:"freehandComment"===n.currentTool,variant:"outline-primary"},on:{click:()=>n.onCommentToolClick("freehandComment")}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-pen",size:"lg"}})],1),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.noninteractive.right",modifiers:{hover:!0,noninteractive:!0,right:!0}}],staticClass:"button",attrs:{title:"Freehand Eraser (Ctrl + 7)","data-tool":"freehand_eraser",pressed:"freehandEraser"===n.currentTool,variant:"outline-primary"},on:{click:()=>n.onCommentToolClick("freehandEraser")}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-eraser",size:"lg"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"options"},[n.toolbarStore.snapActive&&!["freehandComment","freehandEraser"].includes(n.toolbarStore.currentTool)?t("div",{staticClass:"option wide"},[t("label",{staticClass:"flex-label",attrs:{for:n.snappingDistanceId}},[t("span",{staticClass:"font-weight-bold"},[e._v("Snapping Distance")]),e._v("\n                "+e._s(n.toolbarStore.snapDistance)+" pixels\n            ")]),e._v(" "),t(n.BFormInput,{attrs:{id:n.snappingDistanceId,"data-option":"snapping-distance",type:"range",min:"1",max:"5",step:"1"},model:{value:n.snappingDistanceRangeValue,callback:function(e){n.snappingDistanceRangeValue=e},expression:"snappingDistanceRangeValue"}})],1):e._e(),e._v(" "),"textComment"===n.toolbarStore.currentTool?t("div",{staticClass:"option buttons"},[t(n.BButtonGroup,[t(n.BButton,{staticClass:"button font-weight-bold",attrs:{pressed:n.commentOptions.bold,variant:"outline-primary","data-option":"toggle-bold"},on:{"update:pressed":function(t){return e.$set(n.commentOptions,"bold",t)}}},[e._v("\n                    Bold\n                ")]),e._v(" "),t(n.BButton,{staticClass:"button font-italic",attrs:{pressed:n.commentOptions.italic,variant:"outline-primary","data-option":"toggle-italic"},on:{"update:pressed":function(t){return e.$set(n.commentOptions,"italic",t)}}},[e._v("\n                    Italic\n                ")])],1)],1):e._e(),e._v(" "),["pointer","freehandEraser"].includes(n.toolbarStore.currentTool)?e._e():t("div",{staticClass:"option buttons"},[t(n.ColorSelector,{staticClass:"color-selector",attrs:{color:n.commentOptions.color},on:{"set-color":e=>n.commentOptions.color=e}})],1),e._v(" "),"textComment"===n.toolbarStore.currentTool?t("div",{staticClass:"option small"},[t("label",{staticClass:"flex-label",attrs:{for:n.fontSizeId}},[t("span",{staticClass:"font-weight-bold"},[e._v("Text Size")]),e._v("\n                "+e._s(n.commentOptions.textSize)+"00%\n            ")]),e._v(" "),t(n.BFormInput,{attrs:{id:n.fontSizeId,"data-option":"font-size",type:"range",min:"1",max:"5",step:"1"},model:{value:n.fontSize,callback:function(e){n.fontSize=e},expression:"fontSize"}})],1):e._e(),e._v(" "),"freehandComment"===n.toolbarStore.currentTool?t("div",{staticClass:"option small"},[t("label",{staticClass:"flex-label",attrs:{for:n.thicknessId}},[t("span",{staticClass:"font-weight-bold"},[e._v("Size")]),e._v("\n                "+e._s(n.commentOptions.lineThickness)+" pixels\n            ")]),e._v(" "),t(n.BFormInput,{attrs:{id:n.thicknessId,"data-option":"line-thickness",type:"range",min:"4",max:"20",step:"1"},model:{value:n.commentOptions.lineThickness,callback:function(t){e.$set(n.commentOptions,"lineThickness",t)},expression:"commentOptions.lineThickness"}})],1):e._e(),e._v(" "),"freehandComment"===n.toolbarStore.currentTool?t("div",{staticClass:"option small"},[t("label",{staticClass:"flex-label",attrs:{for:n.smoothingId}},[t("span",{staticClass:"font-weight-bold"},[e._v("Smoothing")]),e._v("\n                "+e._s(n.commentOptions.smoothing)+"\n            ")]),e._v(" "),t(n.BFormInput,{attrs:{id:n.smoothingId,"data-option":"smoothing",type:"range",min:"1",max:"10",step:"1"},model:{value:n.commentOptions.smoothing,callback:function(t){e.$set(n.commentOptions,"smoothing",t)},expression:"commentOptions.smoothing"}})],1):e._e(),e._v(" "),["freehandComment","freehandEraser"].includes(n.toolbarStore.currentTool)?t("div",{staticClass:"option buttons"},[t(n.BButton,{staticClass:"button",attrs:{"data-option":"remove-freehand",title:"Remove all freehand comments"},on:{click:n.onRemoveAllFreehand}},[e._v("\n                Remove all\n            ")])],1):e._e()])])}),[],!1,null,"94692818",null).exports;function ow(e,t){const n=(0,a.ref)({offsetLeft:0,offsetTop:0}),i=(0,a.inject)("transform"),o=new ResizeObserver((()=>{if(e.value&&t.value){const o=function(e,t){const n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{offsetLeft:n.left-i.left,offsetTop:n.top-i.top}}(e.value,t.value);n.value={offsetLeft:o.offsetLeft/i.value.k,offsetTop:o.offsetTop/i.value.k}}}));return(0,a.watch)([e,t],(()=>{o.disconnect(),e.value&&t.value&&function(e,t,n){let i=e;for(;i&&i!==t;)n.observe(i),i=i.parentElement;n.observe(t)}(e.value,t.value,o)}),{immediate:!0}),(0,a.onScopeDispose)((()=>{o.disconnect()})),n}function aw(e,t,n){const i=(0,a.ref)(null),{connectionStore:o,stepStore:s}=Zg(),r=(0,a.computed)((()=>s.getStep(e.value))),l=(0,a.computed)((()=>{var t,n;return null!==(n=null===(t=s.stepMapOver[e.value])||void 0===t?void 0:t.isCollection)&&void 0!==n&&n}));return(0,a.watch)([r,t,n],(()=>{const a=Py(e.value,t.value,n.value,o,s);a.getInvalidConnectedTerminals(),i.value=a}),{immediate:!0}),{terminal:i,isMappedOver:l}}const sw=(0,a.defineComponent)({__name:"NodeInput",props:{input:{type:Object,required:!0},stepId:{type:Number,required:!0},datatypesMapper:{type:Bc,required:!0},stepPosition:{type:Object,required:!0},rootOffset:{type:Object,required:!0},scale:{type:Number,required:!0},scroll:{type:Object,required:!0},parentNode:{type:HTMLElement,default:null},readonly:{type:Boolean,default:!1}},setup(e){const t=e;u.vI.add(h.Bc6,h.El_),(0,a.onBeforeUnmount)((()=>{_.deleteInputTerminalPosition(t.stepId,t.input.name)}));const{stepId:n,input:i,datatypesMapper:s}=(0,a.toRefs)(t),r=(0,a.computed)((()=>`node-${t.stepId}-input-${t.input.name}`)),{terminal:l,isMappedOver:d}=aw(n,i,s),c=(0,a.ref)(null),f=ow(c,(0,a.computed)((()=>t.parentNode))),{connectionStore:m,stateStore:_,stepStore:v}=Zg(),g=(0,a.ref)(!1);(0,a.watchEffect)((()=>{g.value=m.getOutputTerminalsForInputTerminal(r.value).length>0}));const y=(0,a.computed)((()=>m.getConnectionsForTerminal(r.value))),b=(0,a.computed)((()=>y.value.map((e=>m.invalidConnections[(0,Ug.en)(e)])).filter((e=>e)))),{draggingTerminal:w}=(0,o.Jk)(_),k=(0,a.computed)((()=>{if(w.value)return l.value.canAccept(w.value);{const e=b.value[0];if(e)return new ky(!1,e)}return null})),C=(0,a.computed)((()=>{var e;return!!(null===(e=k.value)||void 0===e?void 0:e.canAccept)})),x=(0,a.computed)((()=>{var e,n;return f.value.offsetLeft+t.stepPosition.left+(null!==(n=null===(e=c.value)||void 0===e?void 0:e.offsetWidth)&&void 0!==n?n:2)/2})),S=(0,a.computed)((()=>{var e,n;return f.value.offsetTop+t.stepPosition.top+(null!==(n=null===(e=c.value)||void 0===e?void 0:e.offsetHeight)&&void 0!==n?n:2)/2}));(0,a.watch)([x,S],(([e,n])=>{_.setInputTerminalPosition(t.stepId,t.input.name,{endX:e,endY:n})}));const M=(0,a.inject)("isDragging"),T=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=k.value)||void 0===e?void 0:e.reason)&&void 0!==t?t:void 0})),L=(0,a.computed)((()=>t.input.label||t.input.name)),D=(0,a.computed)((()=>y.value.length>0)),E=(0,a.computed)((()=>{var e;const n=["form-row","dataRow","input-data-row"];return!1===(null===(e=t.input)||void 0===e?void 0:e.valid)&&n.push("form-row-error"),n})),O=(0,a.ref)(!1);return{__sfc:!0,props:t,stepId:n,input:i,datatypesMapper:s,id:r,terminal:l,isMultiple:d,dropTarget:c,position:f,connectionStore:m,stateStore:_,stepStore:v,hasTerminals:g,connections:y,invalidConnectionReasons:b,draggingTerminal:w,canAccept:k,acceptsInput:C,endX:x,endY:S,isDragging:M,reason:T,label:L,hasConnections:D,rowClass:E,showTooltip:O,dragEnter:function(e){T.value&&(O.value=!0),e.preventDefault()},dragLeave:function(e){O.value=!1},onRemove:function(){m.getConnectionsForTerminal(r.value).forEach((e=>l.value.disconnect(e)))},onDrop:function(e){if(!e.dataTransfer)return;const n=JSON.parse(e.dataTransfer.getData("text/plain")),i=Py(n.stepId,n.output,t.datatypesMapper,m,v);O.value=!1,l.value.canAccept(i).canAccept&&l.value.connect(i)},FontAwesomeIcon:p.GN}}});const rw=(0,m.Z)(sw,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"node-input",class:n.rowClass},[t("div",{ref:"dropTarget",staticClass:"input-terminal prevent-zoom",class:{"input-active":n.isDragging,"can-accept":n.acceptsInput,"can-not-accept":!n.acceptsInput,"mapped-over":n.isMultiple},attrs:{id:n.id,"input-name":n.input.name},on:{drop:function(e){return e.preventDefault(),n.onDrop.apply(null,arguments)},dragenter:function(e){return e.preventDefault(),n.dragEnter.apply(null,arguments)},dragleave:function(e){return e.preventDefault(),n.dragLeave.apply(null,arguments)}}},[t("b-tooltip",{attrs:{target:n.id,show:n.showTooltip}},[e._v("\n            "+e._s(n.reason)+"\n        ")]),e._v(" "),t(n.FontAwesomeIcon,{staticClass:"terminal-icon",attrs:{icon:"fa-chevron-circle-right"}})],1),e._v(" "),n.hasConnections&&!e.readonly?t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"delete-terminal-button",attrs:{title:n.reason},on:{click:n.onRemove}},[t(n.FontAwesomeIcon,{staticClass:"delete-button-icon",attrs:{icon:"fa-minus-square"}})],1):e._e(),e._v("\n    "+e._s(n.label)+"\n    "),n.input.optional||n.hasTerminals?e._e():t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"input-required",attrs:{title:"Input is required"}},[e._v("\n        *\n    ")])])}),[],!1,null,null,null).exports;const lw=Pn.C5?window:void 0;function dw(e,t={}){const n=function(e={}){const{window:t=lw}=e,n=(0,Pn.fA)((()=>null),(()=>null==t?void 0:t.document.activeElement));return t&&((0,rn.ORN)(t,"blur",(()=>{(t.requestAnimationFrame||t.setTimeout)((()=>n.trigger()))}),!0),(0,rn.ORN)(t,"focus",n.trigger,!0)),n}(t),i=(0,a.computed)((()=>(0,rn.NXq)(e)));return{focused:(0,a.computed)((()=>!(!i.value||!n.value)&&i.value.contains(n.value)))}}const cw=(0,a.defineComponent)({__name:"ConnectionMenu",props:{terminal:null},emits:["closeMenu"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(),{focused:o}=dw(i),s=(0,a.ref)(0),r=(0,a.ref)();(0,a.onMounted)((()=>{var e;r.value&&("length"in r.value?null===(e=r.value[0])||void 0===e||e.focus():r.value.focus())})),(0,a.watch)(o,(e=>{e||t("closeMenu",!0)}));const{connectionStore:l,stepStore:d}=Zg();function c(e,t){const n=d.getStep(e.stepId);(0,Sh.Nh)(n);const i=`${e.name} in step ${n.id+1}: ${n.label}`;return{stepId:n.id,inputName:e.name,inputLabel:i,connected:t}}function u(e){const t=d.getStep(e.stepId);(0,Sh.Nh)(t);const i=t.inputs.find((t=>t.name==e.inputName));return Py(e.stepId,i,n.terminal.datatypesMapper,l,d)}const h=(0,a.computed)((()=>n.terminal.validInputTerminals().map((e=>c(e,!1))))),p=(0,a.computed)((()=>n.terminal.getConnectedTerminals().map((e=>c(e,!0))))),f=(0,a.computed)((()=>{const e=[...p.value,...h.value];return e.sort(((e,t)=>{const n=e.stepId-t.stepId;return 0===n?(e.inputLabel||e.inputName)<(t.inputLabel||t.inputName)?-1:1:n})),e}));return{__sfc:!0,props:n,menu:i,focused:o,activeElement:s,menuItem:r,emit:t,connectionStore:l,stepStore:d,increment:function(){var e;r.value&&"length"in r.value&&(s.value+=1,s.value=Math.min(s.value,r.value.length-1),null===(e=r.value[s.value])||void 0===e||e.focus())},decrement:function(){var e;r.value&&"length"in r.value&&(s.value=Math.max(s.value-1,0),null===(e=r.value[s.value])||void 0===e||e.focus())},terminalToInputObject:c,inputObjectToTerminal:u,validInputs:h,connectedInputs:p,allElements:f,toggleConnection:function(e){e.connected?u(e).disconnect(n.terminal):u(e).connect(n.terminal)}}}}),uw=cw;const hw=(0,m.Z)(uw,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-list-group",{ref:"menu",attrs:{id:"input-choices-menu",role:"menu"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:n.increment.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:n.decrement.apply(null,arguments)}]}},[0===n.allElements.length?[t("b-list-group-item",{ref:"menuItem",attrs:{tabindex:"0",role:"menuitem"}},[e._v("\n            No compatible input found in workflow\n        ")])]:e._l(n.allElements,(function(i,o){return t("b-list-group-item",{key:i.inputLabel+i.stepId,ref:"menuItem",refInFor:!0,attrs:{role:"menuitem",tabindex:"0",active:n.activeElement===o},on:{click:function(e){return n.toggleConnection(i)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.toggleConnection(i)},focus:function(e){n.activeElement=o}}},[e._v("\n            "+e._s(i.connected?"Disconnect from":"Connect to")+" "+e._s(i.inputLabel)+"\n        ")])}))],2)}),[],!1,null,"7f8d2eb2",null).exports;var pw=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))},fw=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const mw=(0,a.defineComponent)({__name:"NodeOutput",props:{output:null,workflowOutputs:null,stepType:null,stepId:null,postJobActions:null,stepPosition:null,rootOffset:null,scroll:null,scale:null,datatypesMapper:null,parentNode:null,readonly:{type:Boolean}},emits:["pan-by","stopDragging","onDragConnector"],setup(e,{emit:t}){const n=e;u.vI.add(zo.e3,h.a3n,h.Bc6,h.Mdf,h.Aq,h.Kl4,h.r8p);const{stateStore:i,stepStore:o}=Zg(),{rootOffset:s,output:r,stepId:l,datatypesMapper:d}=(0,a.toRefs)(n),c=(0,a.ref)(null),f=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=c.value)||void 0===e?void 0:e.$el)&&void 0!==t?t:null})),m=ow(f,(0,a.computed)((()=>n.parentNode))),_=(0,a.computed)((()=>{let e;e="label"in n.output&&n.postJobActions[`ChangeDatatypeAction${n.output.label}`]?n.postJobActions[`ChangeDatatypeAction${n.output.label}`]:n.postJobActions[`ChangeDatatypeAction${n.output.name}`];let t=(null==e?void 0:e.action_arguments.newtype)||"extensions"in n.output&&n.output.extensions||"type"in n.output&&n.output.type||"unspecified";return Array.isArray(t)||(t=[t]),t})),v=(0,a.ref)(Object.assign(Object.assign({},r.value),{extensions:_.value}));(0,a.watch)(_,(()=>{v.value=Object.assign(Object.assign({},r.value),{extensions:_.value})}));const{terminal:g,isMappedOver:y}=aw(l,v,d),b=(0,a.computed)((()=>n.workflowOutputs.find((e=>e.output_name==n.output.name)))),w=(0,a.computed)((()=>!(`HideDatasetAction${n.output.name}`in n.postJobActions))),k=(0,a.computed)((()=>w.value?"Output will be visible in history. Click to hide output.":"Output will be hidden in history. Click to make output visible.")),C=(0,a.computed)((()=>{var e;return(null===(e=b.value)||void 0===e?void 0:e.label)||n.output.name})),x=(0,a.computed)((()=>{var e;const t=["form-row","dataRow","output-data-row"];return"valid"in n.output&&!1===(null===(e=n.output)||void 0===e?void 0:e.valid)&&t.push("form-row-error"),t})),S=(0,a.ref)(),M=(0,a.ref)(!1);const T=(0,a.ref)(0),L=(0,a.ref)(0),D=(0,a.ref)(!1),E=(0,a.computed)((()=>{var e,t,i,o;return m.value.offsetLeft+(null!==(t=null===(e=n.stepPosition)||void 0===e?void 0:e.left)&&void 0!==t?t:0)+(null!==(o=null===(i=f.value)||void 0===i?void 0:i.offsetWidth)&&void 0!==o?o:2)/2})),O=(0,a.computed)((()=>{var e,t,i,o;return m.value.offsetTop+(null!==(t=null===(e=n.stepPosition)||void 0===e?void 0:e.top)&&void 0!==t?t:0)+(null!==(o=null===(i=f.value)||void 0===i?void 0:i.offsetHeight)&&void 0!==o?o:2)/2})),A=(0,a.computed)((()=>(T.value||E.value)+n.scroll.x.value/n.scale)),I=(0,a.computed)((()=>(L.value||O.value)+n.scroll.y.value/n.scale)),P=(0,a.computed)((()=>({startX:E.value,endX:A.value,startY:O.value,endY:I.value})));(0,a.watch)([P,D],(()=>{D.value&&t("onDragConnector",P.value,g.value)})),(0,a.watch)([E,O],(([e,t])=>{i.setOutputTerminalPosition(n.stepId,n.output.name,{startX:e,startY:t})}),{immediate:!0});const R=(0,a.computed)((()=>`node-${n.stepId}-output-${n.output.name}`)),j=(0,a.computed)((()=>"tool"===n.stepType||"subworkflow"===n.stepType)),Y=(0,a.computed)((()=>"tool"===n.stepType));function H(e){let t=e.collectionType;if(e&&e.isCollection&&e.collectionType)switch(e.collectionType){case"list:paired":t="list of pairs dataset collection";break;case"list:list":t="list of lists dataset collection";break;default:e.rank>1&&(t=`dataset collection with ${e.rank} levels of nesting`)}return t}const N=(0,a.computed)((()=>{let e="collectionType"in g.value&&g.value.collectionType;const t=e&&e.isCollection&&e.collectionType?`output is ${H(e)}`:"output is dataset";if(y.value){e||(e=yy);return`${t} and mapped-over to produce a ${H(g.value.mapOver.append(e))} `}return t})),F=(0,a.computed)((()=>{const e=o.duplicateLabels;return Boolean(C.value&&e.has(C.value))})),B=(0,a.computed)((()=>F.value?"alert-info":null)),$=(0,a.computed)((()=>{var e;return`Output label '${null===(e=b.value)||void 0===e?void 0:e.label}' is not unique`}));(0,a.onBeforeUnmount)((()=>{i.deleteOutputTerminalPosition(n.stepId,n.output.name)}));const z=(0,a.computed)((()=>{var e,t,i,o;return null!==(o=null===(i=null===(t=null===(e=n.postJobActions[`TagDatasetAction${n.output.name}`])||void 0===e?void 0:e.action_arguments)||void 0===t?void 0:t.tags)||void 0===i?void 0:i.split(","))&&void 0!==o?o:[]})),W=(0,a.computed)((()=>{var e,t,i,o;return null!==(o=null===(i=null===(t=null===(e=n.postJobActions[`RemoveTagDatasetAction${n.output.name}`])||void 0===e?void 0:e.action_arguments)||void 0===t?void 0:t.tags)||void 0===i?void 0:i.split(","))&&void 0!==o?o:[]}));return{__sfc:!0,props:n,emit:t,stateStore:i,stepStore:o,rootOffset:s,output:r,stepId:l,datatypesMapper:d,terminalComponent:c,terminalElement:f,position:m,extensions:_,effectiveOutput:v,terminal:g,isMultiple:y,workflowOutput:b,isVisible:w,visibleHint:k,label:C,rowClass:x,menu:S,showChildComponent:M,closeMenu:function(){M.value=!1},toggleChildComponent:function(){var e;return pw(this,void 0,void 0,(function*(){M.value=!M.value,M.value?(yield(0,a.nextTick)(),(null===(e=S.value)||void 0===e?void 0:e.$el)instanceof HTMLElement&&S.value.$el.focus()):f.value.focus()}))},onToggleActive:function(){if(n.readonly)return;const e=o.getStep(l.value);(0,Sh.Nh)(e);let t=[...e.workflow_outputs||[]];b.value?t=t.filter((e=>e.output_name!==r.value.name)):t.push({output_name:r.value.name,label:r.value.name}),o.updateStep(Object.assign(Object.assign({},e),{workflow_outputs:t}))},onToggleVisible:function(){if(n.readonly)return;const e=`HideDatasetAction${n.output.name}`,t=Object.assign({},(0,Sh.IS)(o.getStep(l.value)));if(w.value)t.post_job_actions=Object.assign(Object.assign({},t.post_job_actions),{[e]:{action_type:"HideDatasetAction",output_name:n.output.name,action_arguments:{}}});else if(t.post_job_actions){const n=t.post_job_actions,i=e,o=(n[i],fw(n,["symbol"==typeof i?i:i+""]));t.post_job_actions=o}else t.post_job_actions={};o.updateStep(t)},onPanBy:function(e){t("pan-by",e)},onStopDragging:function(){D.value=!1,T.value=0,L.value=0,t("stopDragging")},dragX:T,dragY:L,isDragging:D,startX:E,startY:O,endX:A,endY:I,dragPosition:P,onMove:function(e){T.value=e.x+f.value.clientWidth/2,L.value=e.y+f.value.clientHeight/2},id:R,showCalloutActiveOutput:j,showCalloutVisible:Y,collectionTypeToDescription:H,outputDetails:N,isDuplicateLabel:F,labelClass:B,labelToolTipTitle:$,addTagsAction:z,removeTagsAction:W,FontAwesomeIcon:p.GN,DraggableWrapper:Pb,StatelessTags:G.Z,ConnectionMenu:hw}}}),_w=mw;const vw=(0,m.Z)(_w,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"node-output",class:n.rowClass,attrs:{"data-output-name":n.output.name}},[t("div",{staticClass:"d-flex flex-column w-100"},[t("div",{staticClass:"node-output-buttons"},[n.showCalloutActiveOutput?t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"callout-terminal inline-icon-button mark-terminal",class:{"mark-terminal-active":n.workflowOutput},attrs:{title:"Checked outputs will become primary workflow outputs and are available as subworkflow outputs."},on:{click:n.onToggleActive}},[n.workflowOutput?t(n.FontAwesomeIcon,{attrs:{"fixed-width":"",icon:"fa-check-square"}}):t(n.FontAwesomeIcon,{attrs:{"fixed-width":"",icon:"far fa-square"}})],1):e._e(),e._v(" "),n.showCalloutVisible?t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"callout-terminal inline-icon-button mark-terminal",class:{"mark-terminal-visible":n.isVisible,"mark-terminal-hidden":!n.isVisible},attrs:{title:n.visibleHint},on:{click:n.onToggleVisible}},[n.isVisible?t(n.FontAwesomeIcon,{attrs:{"fixed-width":"",icon:"fa-eye"}}):t(n.FontAwesomeIcon,{attrs:{"fixed-width":"",icon:"fa-eye-slash"}})],1):e._e(),e._v(" "),t("span",[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"d-inline-block rounded",class:n.labelClass,attrs:{title:n.labelToolTipTitle,disabled:!n.isDuplicateLabel}},[e._v("\n                    "+e._s(n.label)+"\n                ")]),e._v(" "),t("span",[e._v(" ("+e._s(n.extensions.join(", "))+") ")])])]),e._v(" "),n.addTagsAction.length>0?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.left",modifiers:{left:!0}}],staticClass:"d-flex align-items-center overflow-x-hidden",attrs:{title:"These tags will be added to the output dataset"}},[t(n.FontAwesomeIcon,{staticClass:"mr-1",attrs:{icon:"fa-plus"}}),e._v(" "),t(n.StatelessTags,{attrs:{disabled:"","no-padding":"",value:n.addTagsAction}})],1):e._e(),e._v(" "),n.removeTagsAction.length>0?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.left",modifiers:{left:!0}}],staticClass:"d-flex align-items-center overflow-x-hidden",attrs:{title:"These tags will be removed from the output dataset"}},[t(n.FontAwesomeIcon,{staticClass:"mr-1",attrs:{icon:"fa-minus"}}),e._v(" "),t(n.StatelessTags,{attrs:{disabled:"","no-padding":"",value:n.removeTagsAction}})],1):e._e()]),e._v(" "),t(n.DraggableWrapper,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:n.outputDetails,expression:"outputDetails",modifiers:{hover:!0}}],ref:"terminalComponent",staticClass:"output-terminal prevent-zoom",class:{"mapped-over":n.isMultiple},attrs:{id:n.id,"output-name":n.output.name,"root-offset":n.rootOffset,"prevent-default":!1,"stop-propagation":!0,"drag-data":{stepId:n.stepId,output:n.effectiveOutput},draggable:!e.readonly,disabled:e.readonly},on:{"pan-by":n.onPanBy,start:function(e){n.isDragging=!0},stop:n.onStopDragging,move:n.onMove}},[t("button",{staticClass:"connection-menu-button",attrs:{"aria-label":`Connect output ${n.output.name} to input. Press space to see a list of available inputs`},on:{click:n.toggleChildComponent}}),e._v(" "),t(n.FontAwesomeIcon,{staticClass:"terminal-icon",attrs:{icon:"fa-chevron-circle-right"}}),e._v(" "),n.showChildComponent?t(n.ConnectionMenu,{ref:"menu",attrs:{terminal:n.terminal},on:{closeMenu:n.closeMenu}}):e._e()],1)],1)}),[],!1,null,null,null).exports;const gw={components:{LoadingSpan:z.Z},props:{stepId:{type:Number,required:!0},datatypesMapper:{type:Object,required:!0}},setup(){const{stepStore:e}=Zg();return{stepStore:e}},data:()=>({compatibleTools:[],isDeprecated:!1,popoverHeaderText:(0,Ee.ZP)("Tool recommendations"),noRecommendationsMessage:(0,Ee.ZP)("No tool recommendations"),deprecatedMessage:"",showLoading:!0}),created(){this.loadRecommendations()},methods:{getToolId(e){if(null!=e&&e.indexOf("/")>-1){const t=e.split("/");e=t[t.length-2]}return e},getWorkflowPath(e){const t={},n={};Object.values(this.stepStore.steps).map((e=>{const i=e.input_connections;n[e.id]=this.getToolId(e.content_id);for(const n in i){const o=i[n];if(null!=o){const n=[];for(const e of o)n.push(e.id.toString());t[e.id.toString()]=n}}}));let i=[];const o=[];i.push(e),i=function e(n,i){for(const o in t)if(parseInt(o)===parseInt(n)){const n=parseInt(t[o][0]);null!=n&&(i.push(n),void 0!==t[n]&&null!==t[n]&&e(n,i))}return i}(e,i);for(const e of i){const t=n[e.toString()];null!=t&&o.push(t)}return o.join(",")},loadRecommendations(){Hh({tool_sequence:this.getWorkflowPath(this.stepId)}).then((e=>{const t=e.predicted_data,n=t.o_extensions,i=t.children;this.isDeprecated=t.is_deprecated,this.deprecatedMessage=t.message,i.length>0&&(this.compatibleTools=Bh(i,n,this.datatypesMapper)),this.showLoading=!1}))}}};const yw=(0,m.Z)(gw,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"workflow-recommendations"},[t("div",{staticClass:"header-background"},[t("h2",{staticClass:"h-sm"},[e._v(e._s(e.popoverHeaderText))])]),e._v(" "),e.showLoading?t("LoadingSpan",{attrs:{message:"Loading recommendations"}}):e._e(),e._v(" "),e.compatibleTools.length>0&&!e.isDeprecated?t("div",e._l(e.compatibleTools,(function(n){return t("div",{key:n.id},[t("i",{staticClass:"fa mr-1 fa-wrench"}),e._v(" "),t("a",{attrs:{id:n.id,href:"#",title:"Open tool"},on:{click:function(t){return e.$emit("onCreate",n.id,n.name,t)}}},[e._v(e._s(n.name))])])})),0):e.isDeprecated?t("div",[e._v(e._s(e.deprecatedMessage))]):e._e(),e._v(" "),0!==e.compatibleTools.length||e.showLoading?e._e():t("div",[e._v(e._s(e.noRecommendationsMessage))])],1)}),[],!1,null,"56932942",null).exports,bw=(0,a.defineComponent)({__name:"Node",props:{id:{type:Number,required:!0},contentId:{type:String,default:null},name:{type:String,default:null},step:{type:Object,required:!0},datatypesMapper:{type:Bc,required:!0},activeNodeId:{type:null,required:!0,validator:e=>"number"==typeof e||null===e},rootOffset:{type:Object,required:!0},scroll:{type:Object,required:!0},scale:{type:Number,default:1},highlight:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["onRemove","onActivate","onChange","onCreate","onUpdate","onClone","onUpdateStepPosition","pan-by","onDragConnector","stopDragging"],setup(e,{emit:t}){const n=e;a.default.use(d.ZPm),u.vI.add(h.mh3);const i=(0,a.ref)(!1),o=(0,a.computed)((()=>`popover-${n.id}`)),s=(0,a.ref)(!1);const r=(0,a.ref)(null),c=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=r.value)||void 0===e?void 0:e.$el)&&void 0!==t?t:null})),f=(0,a.computed)((()=>n.step.post_job_actions||{})),m=(0,a.computed)((()=>n.step.workflow_outputs||[])),{connectionStore:_,stateStore:v,stepStore:g}=Zg(),y=(0,a.computed)((()=>{var e;return Boolean(null===(e=v.getStepLoadingState(n.id))||void 0===e?void 0:e.loading)}));!function(e,t,n,i){const o=(0,rn.rBN)(e,{windowResize:!1});(0,a.watch)(Object.values(o),(()=>{n.setStepPosition(t,{height:(0,a.unref)(o.height)/i.value,width:(0,a.unref)(o.width)/i.value,left:(0,a.unref)(o.left)/i.value,right:(0,a.unref)(o.right)/i.value,top:(0,a.unref)(o.top)/i.value,bottom:(0,a.unref)(o.bottom)/i.value,x:(0,a.unref)(o.x)/i.value,y:(0,a.unref)(o.y)/i.value,update:o.update})}),{immediate:!0}),(0,a.onUnmounted)((()=>{n.deleteStepPosition(t)}))}(c,n.id,v,(0,a.computed)((()=>n.scale)));const b=(0,a.computed)((()=>n.step.label||n.step.name)),w=(0,a.computed)((()=>`wf-node-step-${n.id}`)),k=(0,a.computed)((()=>{var e,t;return(null===(e=n.step.inputs)||void 0===e?void 0:e.length)>0&&(null===(t=n.step.outputs)||void 0===t?void 0:t.length)>0})),C=(0,a.computed)((()=>`icon fa fa-fw ${Nh.Z[n.step.type]}`)),x=(0,a.computed)((()=>"subworkflow"!==n.step.type)),S=(0,l.Bz)().config.enable_tool_recommendations,M=(0,a.computed)((()=>n.id===n.activeNodeId)),T=(0,a.computed)((()=>({"node-on-scroll-to":s.value,"node-highlight":n.highlight||M.value,"is-active":M.value}))),L=(0,a.computed)((()=>({top:n.step.position.top+"px",left:n.step.position.left+"px"}))),D=(0,a.computed)((()=>{var e;return n.step.errors||(null===(e=v.getStepLoadingState(n.id))||void 0===e?void 0:e.error)})),E=(0,a.computed)((()=>{const e=_.getConnectionsForStep(n.id),t=[...g.getStepExtraInputs(n.id),...n.step.inputs||[]],i=[];e.forEach((e=>{e.input.stepId!=n.id||t.find((t=>t.name===e.input.name))||i.push(e.input.name)}));const o=[...new Set(i)].map((e=>({name:e,optional:!1,extensions:[],valid:!1,input_type:"dataset"})));return[...t,...o]})),O=(0,a.computed)((()=>{const e=_.getConnectionsForStep(n.id).filter((e=>e.output.stepId==n.id&&!n.step.outputs.find((t=>t.name===e.output.name))));return[...new Set(e.map((e=>e.output.name)))].map((e=>({name:e,optional:!1,datatypes:[],valid:!1})))})),A=(0,a.computed)((()=>[...n.step.outputs,...O.value]));return{__sfc:!0,props:n,emit:t,popoverShow:i,popoverId:o,scrolledTo:s,remove:function(){t("onRemove",n.id)},el:r,elHtml:c,postJobActions:f,workflowOutputs:m,connectionStore:_,stateStore:v,stepStore:g,isLoading:y,title:b,idString:w,showRule:k,iconClass:C,canClone:x,isEnabled:S,isActive:M,classes:T,style:L,errors:D,inputs:E,invalidOutputs:O,outputs:A,onDragConnector:function(e,n){t("onDragConnector",e,n)},onMoveTo:function(e){t("onUpdateStepPosition",n.id,{top:e.y+n.scroll.y.value/n.scale,left:e.x+n.scroll.x.value/n.scale})},onPanBy:function(e){t("pan-by",e)},onStopDragging:function(){t("stopDragging")},onChange:function(){t("onChange")},onCreate:function(e,n){t("onCreate",e,n),i.value=!1},onClone:function(){t("onClone",n.id)},makeActive:function(){t("onActivate",n.id)},FontAwesomeIcon:p.GN,reactive:a.reactive,LoadingSpan:z.Z,DraggableWrapper:Pb,NodeInput:rw,NodeOutput:vw,Recommendations:yw}}}),ww=bw;const kw=(0,m.Z)(ww,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.DraggableWrapper,{ref:"el",staticClass:"workflow-node card",class:n.classes,style:n.style,attrs:{id:n.idString,scale:e.scale,"root-offset":e.rootOffset,name:e.name,"node-label":n.title,disabled:e.readonly},on:{move:n.onMoveTo,"pan-by":n.onPanBy}},[t("div",{staticClass:"node-header unselectable clearfix card-header py-1 px-2",on:{click:n.makeActive,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.makeActive.apply(null,arguments)}}},[t("b-button-group",{staticClass:"float-right"},[n.isLoading?t(n.LoadingSpan,{attrs:{"spinner-only":""}}):e._e(),e._v(" "),n.canClone&&!e.readonly?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"node-clone py-0",attrs:{variant:"primary",size:"sm","aria-label":"clone node",title:"Duplicate"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onClone.apply(null,arguments)}}},[t("i",{staticClass:"fa fa-files-o"})]):e._e(),e._v(" "),e.readonly?e._e():t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"node-destroy py-0",attrs:{variant:"primary",size:"sm","aria-label":"destroy node",title:"Remove"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.remove.apply(null,arguments)}}},[t("i",{staticClass:"fa fa-times"})]),e._v(" "),n.isEnabled&&!e.readonly?t("b-button",{staticClass:"node-recommendations py-0",attrs:{id:n.popoverId,variant:"primary",size:"sm","aria-label":"tool recommendations"}},[t("i",{staticClass:"fa fa-arrow-right"})]):e._e(),e._v(" "),n.isEnabled&&!e.readonly?t("b-popover",{attrs:{target:n.popoverId,triggers:"hover",placement:"bottom",show:n.popoverShow},on:{"update:show":function(e){n.popoverShow=e}}},[t("div",[n.popoverShow?t(n.Recommendations,{attrs:{"step-id":e.id,"datatypes-mapper":e.datatypesMapper},on:{onCreate:n.onCreate}}):e._e()],1)]):e._e()],1),e._v(" "),t("i",{class:n.iconClass}),e._v(" "),e.step.when?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"This step is conditionally executed."}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-code-branch"}})],1):e._e(),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Index of the step in the workflow run form. Steps are ordered by distance to the upper-left corner of the window; inputs are listed first."}},[e._v(e._s(e.step.id+1)+":\n        ")]),e._v(" "),t("span",{staticClass:"node-title"},[e._v(e._s(n.title))])],1),e._v(" "),n.errors?t("b-alert",{staticClass:"node-error m-0 rounded-0 rounded-bottom",attrs:{variant:"danger",show:""},on:{click:n.makeActive}},[e._v("\n        "+e._s(n.errors)+"\n    ")]):t("div",{staticClass:"node-body card-body p-0 mx-2",on:{click:n.makeActive,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.makeActive.apply(null,arguments)}}},[e._l(n.inputs,(function(i,o){return t(n.NodeInput,{key:`in-${o}-${i.name}`,attrs:{input:i,"step-id":e.id,"datatypes-mapper":e.datatypesMapper,"step-position":e.step.position??{top:0,left:0},"root-offset":e.rootOffset,scroll:e.scroll,scale:e.scale,"parent-node":n.elHtml,readonly:e.readonly},on:{onChange:n.onChange}})})),e._v(" "),n.showRule?t("div",{staticClass:"rule"}):e._e(),e._v(" "),e._l(n.outputs,(function(i,o){return t(n.NodeOutput,{key:`out-${o}-${i.name}`,attrs:{output:i,"workflow-outputs":n.workflowOutputs,"post-job-actions":n.postJobActions,"step-id":e.id,"step-type":e.step.type,"step-position":e.step.position??{top:0,left:0},"root-offset":n.reactive(e.rootOffset),scroll:e.scroll,scale:e.scale,"datatypes-mapper":e.datatypesMapper,"parent-node":n.elHtml,readonly:e.readonly},on:{onDragConnector:n.onDragConnector,stopDragging:n.onStopDragging,onChange:n.onChange}})}))],2)],1)}),[],!1,null,"316feeb1",null).exports;const Cw=(0,a.defineComponent)({__name:"SVGConnection",props:{id:String,connection:{type:Object,required:!0},terminalPosition:{type:Object,default:null}},setup(e){const t=e,n=(0,bt.jvg)().curve(bt.$0Z),{connectionStore:i,stateStore:o,stepStore:s}=Zg(),r=(0,a.computed)((()=>{if(t.terminalPosition)return{startX:t.terminalPosition.startX,startY:t.terminalPosition.startY};{const e=o.getOutputTerminalPosition(t.connection.output.stepId,t.connection.output.name);return e||null}})),l=(0,a.computed)((()=>{if(t.terminalPosition)return{endX:t.terminalPosition.endX,endY:t.terminalPosition.endY};{const e=o.getInputTerminalPosition(t.connection.input.stepId,t.connection.input.name);return e||null}})),d=(0,a.computed)((()=>l.value&&r.value?{startX:r.value.startX,startY:r.value.startY,endX:l.value.endX,endY:l.value.endY}:null)),c=(0,a.computed)((()=>{var e;return null===(e=s.stepMapOver[t.connection.output.stepId])||void 0===e?void 0:e.isCollection})),u=(0,a.computed)((()=>{var e,n;return null===(n=null===(e=s.stepInputMapOver[t.connection.input.stepId])||void 0===e?void 0:e[t.connection.input.name])||void 0===n?void 0:n.isCollection})),h=(0,a.computed)((()=>{var e,n;return Boolean((null===(e=s.getStep(t.connection.output.stepId))||void 0===e?void 0:e.when)||(null===(n=s.getStep(t.connection.output.stepId))||void 0===n?void 0:n.outputs.find((e=>e.name===t.connection.output.name&&e.optional))))})),p=(0,a.computed)((()=>!i.invalidConnections[(0,Ug.en)(t.connection)])),f=(0,a.computed)((()=>C(u.value,c.value))),m=.15,_=.08,v=(0,a.computed)((()=>{const e=d.value;if(!e)return 15;const t=Math.abs(e.endX-e.startX-15),n=Math.abs(e.endY-e.startY);if(e.endX>=e.startX){return 15+t*m+n*_}return 30+t*m*.5+n*_*.5})),g=(0,a.computed)((()=>{const e=d.value,t=f.value;if(!e||!t)return[];const i=e.endX>=e.startX;return[...Array(t.numOffsets).keys()].map((n=>{const o=t.startOffsets[n]||0,a=t.endOffsets[n]||0;if(i)return[[e.startX,e.startY+o],[e.startX+v.value,e.startY+o],[e.endX-v.value,e.endY+a],[e.endX,e.endY+a]];{const t=(e.endY-e.startY)/2;return[[e.startX,e.startY+o],[e.startX+v.value,e.startY+o],[e.startX+v.value,e.startY+t+o],[e.endX-v.value,e.endY-t+a],[e.endX-v.value,e.endY+a],[e.endX,e.endY+a]]}})).map((e=>n(e)))})),y=(0,a.computed)((()=>u.value||c.value?2:4)),b=(0,a.computed)((()=>{const e=["connection"];return h.value&&e.push("optional"),p.value||e.push("invalid"),e.join(" ")}));function w(e,t){const n=[-8,-4,0,4,8];let i=[0],o=[0],a=1;return t&&(i=n,a=n.length),e&&(o=n,a=n.length),{numOffsets:a,startOffsets:i,endOffsets:o}}const k={"false-false":w(!1,!1),"true-false":w(!0,!1),"false-true":w(!1,!0),"true-true":w(!0,!0)};function C(e,t){return k[`${null!=e&&e}-${null!=t&&t}`]}return{__sfc:!0,props:t,ribbonMargin:4,curve:n,connectionStore:i,stateStore:o,stepStore:s,outputPos:r,inputPos:l,connectionPosition:d,outputIsMappedOver:c,inputIsMappedOver:u,outputIsOptional:h,connectionIsValid:p,lineOffsets:f,baseLineShift:15,lineShiftGrowFactorX:m,lineShiftGrowFactorY:_,lineShiftX:v,paths:g,lineWidth:y,connectionClass:b,generateLineOffsets:w,lineOffsetDictionary:k,getLineOffsets:C,keyForIndex:function(e){var n;return`${null!==(n=t.id)&&void 0!==n?n:"no-key"}-${e}`}}}});const xw=(0,m.Z)(Cw,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("g",{staticClass:"workflow-editor-drawable-connection",attrs:{id:n.props.id}},e._l(n.paths,(function(e,i){return t("path",{key:n.keyForIndex(i),class:n.connectionClass,attrs:{d:e,"stroke-width":n.lineWidth,fill:"none"}})})),0)}),[],!1,null,null,null).exports,Sw=(0,a.defineComponent)({__name:"WorkflowEdges",props:{draggingConnection:null,draggingTerminal:null,transform:null},setup(e){const t=e,{connectionStore:n}=Zg(),{connections:i}=(0,o.Jk)(n),s=(0,a.computed)((()=>{if(t.draggingConnection&&t.draggingTerminal){return[{input:{connectorType:"input",name:"draggingInput",stepId:-1},output:t.draggingTerminal},t.draggingConnection]}return null}));return{__sfc:!0,props:t,connectionStore:n,connections:i,draggingConnection:s,key:function(e){return`${e.input.stepId}-${e.input.name}-${e.output.stepId}`},id:function(e){return`connection-node-${e.input.stepId}-input-${e.input.name}-node-${e.output.stepId}-output-${e.output.name}`},SVGConnection:xw}}});const Mw=(0,m.Z)(Sw,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"workflow-edges"},[t("svg",{staticClass:"workflow-edges"},[n.draggingConnection?t(n.SVGConnection,{attrs:{connection:n.draggingConnection[0],"terminal-position":n.draggingConnection[1]}}):e._e(),e._v(" "),e._l(n.connections,(function(e){return t(n.SVGConnection,{key:n.key(e),attrs:{id:n.id(e),connection:e}})}))],2)])}),[],!1,null,"f5b4c8c2",null).exports;function Tw(e,t,n,i,o=!1){e.lineWidth=n,o?t.forEach((t=>{e.beginPath(),"none"!==t.color?(e.fillStyle=yb[t.color],e.strokeStyle=vb[t.color]):(e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=i),e.rect(t.position[0],t.position[1],t.size[0],t.size[1]),e.fill(),e.stroke()})):t.forEach((t=>{e.beginPath(),"none"!==t.color?e.strokeStyle=vb[t.color]:e.strokeStyle=i,e.rect(t.position[0],t.position[1],t.size[0],t.size[1]),e.fill(),e.stroke()}))}function Lw(e,t,n,i){e.beginPath(),e.fillStyle=n,t.forEach((t=>{const n=i.stepPosition[t.id];n&&e.rect(t.position.left,t.position.top,n.width,n.height)})),e.fill()}function Dw(e,t,n){const i=(0,bt.jvg)().curve(bt.zgE).context(e);t.forEach((t=>{"none"===t.color?e.strokeStyle=n:e.strokeStyle=vb[t.color],e.lineWidth=t.data.thickness;const o=t.data.line.map((e=>[e[0]+t.position[0],e[1]+t.position[1]]));e.beginPath(),i(o),e.stroke(),e.closePath()}))}const Ew=(0,a.defineComponent)({__name:"WorkflowMinimap",props:{steps:null,comments:null,viewportBounds:null,viewportBoundingBox:null},emits:["panBy","moveTo"],setup(e,{emit:t}){const n=e,{stateStore:i,commentStore:o,toolbarStore:s}=Zg(),{isJustCreated:r}=o,l=(0,a.ref)(null);let d=!1;const{throttle:c}=sb();(0,a.watch)((()=>n.viewportBoundingBox),(()=>d=!0),{deep:!0});const u=new gh;let h=!1,p=new yh;function f(){if(u.reset(),Object.values(n.steps).forEach((e=>{const t=i.stepPosition[e.id];t&&u.fitRectangle({x:e.position.left,y:e.position.top,width:t.width,height:t.height})})),n.comments.forEach((e=>{u.fitRectangle({x:e.position[0],y:e.position[1],width:e.size[0],height:e.size[1]})})),u.squareCenter(),u.expand(120),l.value){const e=l.value.width/u.width;p=(new yh).translate([-u.x*e,-u.y*e]).scale([e,e])}}(0,a.watch)((()=>[n.steps,n.comments,s.inputCatcherPressed]),(()=>{s.inputCatcherPressed||(d=!0,h=!0)}),{deep:!0});const m={node:"#000",error:"#000",selectedOutline:"#000",view:"#000",viewOutline:"#000"},_={default:150,min:50,max:300,padding:5,border:0};function v(){const e=l.value.getContext("2d");e.resetTransform(),e.clearRect(0,0,e.canvas.width,e.canvas.height),p.applyToContext(e);const t=[],o=[],a=[],s=[];n.comments.forEach((e=>{"frame"===e.type?t.push(e):"markdown"===e.type?o.push(e):"text"===e.type?a.push(e):r(e.id)||s.push(e)}));const d=Object.values(n.steps),c=[],u=[];let h;if(d.forEach((e=>{i.activeNodeId===e.id&&(h=e),e.errors?u.push(e):c.push(e)})),Tw(e,t,2/p.scaleX,m.node,!0),e.fillStyle="white",Tw(e,o,2/p.scaleX,m.node),e.fillStyle="rgba(0, 0, 0, 0)",Tw(e,a,1/p.scaleX,m.node),Lw(e,c,m.node,i),Lw(e,u,m.error,i),Dw(e,s,m.node),h){const t=2/p.scaleX;e.beginPath(),e.strokeStyle=m.selectedOutline,e.lineWidth=t;const n=i.stepPosition[h.id];n&&e.rect(h.position.left-t,h.position.top-t,n.width+2*t,n.height+2*t),e.stroke()}e.beginPath(),e.strokeStyle=m.viewOutline,e.fillStyle=m.view,e.lineWidth=1/p.scaleX,e.rect(n.viewportBoundingBox.x,n.viewportBoundingBox.y,n.viewportBoundingBox.width,n.viewportBoundingBox.height),e.fill(),e.stroke()}(0,a.onMounted)((()=>{const e=l.value,t=getComputedStyle(e);m.node=t.getPropertyValue("--node-color"),m.error=t.getPropertyValue("--error-color"),m.selectedOutline=t.getPropertyValue("--selected-outline-color"),m.view=t.getPropertyValue("--view-color"),m.viewOutline=t.getPropertyValue("--view-outline-color"),_.default=parseInt(t.getPropertyValue("--workflow-overview-size")),_.min=parseInt(t.getPropertyValue("--workflow-overview-min-size")),_.max=parseInt(t.getPropertyValue("--workflow-overview-max-size")),_.padding=parseInt(t.getPropertyValue("--workflow-overview-padding")),_.border=parseInt(t.getPropertyValue("--workflow-overview-border")),f(),d=!0})),Hl((()=>{h&&(f(),h=!1),d&&l.value&&(v(),d=!1)}));const g=(0,a.ref)(null),{position:y,isDragging:b}=(0,rn.O1d)(g,{preventDefault:!0,exact:!0}),w=(0,a.ref)(parseInt(localStorage.getItem("overview-size")||_.default.toString()));(0,a.watch)(y,(()=>{w.value=Math.max((0,a.unref)(n.viewportBounds.right)-y.value.x,(0,a.unref)(n.viewportBounds.bottom)-y.value.y),w.value=Math.min(Math.max(w.value,_.min),_.max)})),(0,a.watch)(b,(()=>{b.value||localStorage.setItem("overview-size",w.value.toString())}));const k=(0,a.computed)((()=>_.max/w.value));let C=!1;return(0,rn.O1d)(l,{onStart:(e,t)=>{const[i,o]=p.inverse().scale([k.value,k.value]).apply([t.offsetX,t.offsetY]);n.viewportBoundingBox.isPointInBounds({x:i,y:o})&&(C=!0)},onMove:(e,i)=>{c((()=>{if(!C||0===Object.values(n.steps).length)return;const[e,o]=p.resetTranslation().inverse().scale([k.value,k.value]).apply([-i.movementX,-i.movementY]);t("panBy",{x:e,y:o})}))},onEnd(e,i){const[o,a]=p.inverse().scale([k.value,k.value]).apply([i.offsetX,i.offsetY]);!C&&Object.values(n.steps).length>0&&t("moveTo",{x:o,y:a}),C=!1}}),{__sfc:!0,props:n,emit:t,stateStore:i,commentStore:o,toolbarStore:s,isJustCreated:r,canvas:l,redraw:d,dragThrottle:c,aabb:u,aabbChanged:h,canvasTransform:p,recalculateAABB:f,colors:m,size:_,renderMinimap:v,minimap:g,dragHandlePosition:y,isHandleDragging:b,minimapSize:w,scaleFactor:k,dragViewport:C}}}),Ow=Ew;const Aw=(0,m.Z)(Ow,(function(){var e=this._self._c,t=this._self._setupProxy;return e("div",{ref:"minimap",staticClass:"workflow-overview",style:{"--workflow-overview-size":`${t.minimapSize+t.size.padding+t.size.border}px`}},[e("canvas",{ref:"canvas",staticClass:"workflow-overview-body",attrs:{width:t.size.max,height:t.size.max}})])}),[],!1,null,"5c3aab09",null).exports;const Iw=(0,a.defineComponent)({__name:"ZoomControl",props:{zoomLevel:{type:Number,default:1}},emits:["onZoom"],setup(e,{emit:t}){const n=e;a.default.use(d.ZPm);const i=(0,a.computed)((()=>Math.round(100*n.zoomLevel)));return{__sfc:!0,props:n,emit:t,zoomDefault:1,zoomPercentage:i,onZoomIn:function(){t("onZoom",function(e){const t=cb(e),n=rb.indexOf(t);return n===rb.length-1?t:rb[n+1]}(n.zoomLevel))},onZoomOut:function(){t("onZoom",function(e){const t=cb(e),n=rb.indexOf(t);return 0===n?t:rb[n-1]}(n.zoomLevel))},onZoomReset:function(){t("onZoom",1)},isMaxZoom:hb,isMinZoom:ub}}}),Pw=Iw;const Rw=(0,m.Z)(Pw,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{staticClass:"zoom-control float-right btn-group-horizontal"},[t("b-button",{staticClass:"fa fa-minus",attrs:{disabled:n.isMinZoom(n.props.zoomLevel),role:"button",title:"Zoom Out",size:"sm","aria-label":"Zoom Out"},on:{click:n.onZoomOut}}),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"zoom-reset",attrs:{role:"button",variant:"light",title:"Reset Zoom Level",size:"sm","aria-label":"Reset Zoom Level"},on:{click:n.onZoomReset}},[e._v("\n        "+e._s(n.zoomPercentage)+"%\n    ")]),e._v(" "),t("b-button",{staticClass:"fa fa-plus",attrs:{disabled:n.isMaxZoom(n.props.zoomLevel),role:"button",title:"Zoom In",size:"sm","aria-label":"Zoom In"},on:{click:n.onZoomIn}})],1)}),[],!1,null,"c1b67a18",null).exports,jw=(0,a.defineComponent)({__name:"WorkflowGraph",props:{steps:{type:Object,required:!0},datatypesMapper:{type:Bc,required:!0},highlightId:{type:Number,default:null},scrollToId:{type:Number,default:null},readonly:{type:Boolean,default:!1},initialPosition:{type:Object,default:()=>({x:50,y:20})},showMinimap:{type:Boolean,default:!0},showZoomControls:{type:Boolean,default:!0}},emits:["transform","graph-offset","onRemove","scrollTo"],setup(e,{expose:t,emit:n}){const i=e,{stateStore:s,stepStore:r}=Zg(),{scale:l,activeNodeId:d,draggingPosition:c,draggingTerminal:u}=(0,o.Jk)(s),h=(0,a.ref)(null),p=(0,rn.rBN)(h,{windowResize:!1,windowScroll:!1}),f=(0,rn.vO3)(h),{transform:m,panBy:_,setZoom:v,moveTo:g}=function(e,t,n,i,o,s={x:0,y:0}){const r=(0,a.ref)({x:s.x,y:s.y,k:e}),l=(0,ob.sP)().filter(ab).scaleExtent([t,n]);return(0,a.watch)(i,(()=>{if(i.value){const e=(0,ib.Z)(i.value).call(l),t=ob.CR.translate(r.value.x,r.value.y).scale(r.value.k);l.transform(e,t)}l.on("zoom",(e=>{r.value=e.transform})),l.on("start",(e=>{r.value=e.transform})),l.on("end",(e=>{r.value=e.transform}))})),{transform:r,setZoom:function(e){if(i.value){const t=(0,ib.Z)(i.value).call(l);l.scaleTo(t,e)}},panBy:function(e){if(i.value){const t=(0,ib.Z)(i.value).call(l);l.translateBy(t,e.x,e.y)}},moveTo:function(e){if(i.value){const t=(0,ib.Z)(i.value).call(l);l.translateTo(t,e.x,e.y)}}}}(l.value,lb,db,h,0,i.initialPosition);t({setZoom:v,moveTo:g});const{viewportBoundingBox:y}=function(e,t,n){const{throttle:i}=sb(100),o=(0,a.ref)(new gh);return(0,a.watch)((()=>({x:(0,a.unref)(n).x,y:(0,a.unref)(n).y,scale:(0,a.unref)(t),width:(0,a.unref)(e.width),height:(0,a.unref)(e.height)})),(({x:e,y:t,scale:n,width:a,height:s})=>{i((()=>{const i=o.value;i.x=-e/n,i.y=-t/n,i.width=a/n,i.height=s/n,o.value=i}))})),{viewportBoundingBox:o}}(p,l,m),b=(0,a.ref)(!1);function w(e,t=null){v(e),t&&_({x:t.x-m.value.x,y:t.y-m.value.y}),s.setScale(e)}(0,a.provide)("isDragging",b),(0,a.provide)("transform",m),(0,a.watch)((()=>i.scrollToId),(()=>{if(null!==i.scrollToId){const e=s.stepPosition[i.scrollToId],t=r.getStep(i.scrollToId);(0,Sh.Nh)(e),(0,Sh.Nh)(t);const{width:o,height:l}=e,{position:d}=t;if(d){const{width:e,height:t}=(0,a.reactive)(p),n=t/2;w(1,{x:e/2-(d.left+o/2),y:n-(d.top+l/2)})}else console.log("Step has no position");n("scrollTo")}})),(0,a.watch)((()=>m.value.k),(()=>s.setScale(m.value.k))),(0,a.watch)(m,(()=>n("transform",m.value))),(0,a.watchEffect)((()=>{n("graph-offset",(0,a.reactive)(p))}));const k=(0,a.computed)((()=>({transform:`translate(${m.value.x}px, ${m.value.y}px) scale(${m.value.k})`}))),{commentStore:C}=Zg(),{comments:x}=(0,o.Jk)(C);return{__sfc:!0,emit:n,props:i,stateStore:s,stepStore:r,scale:l,activeNodeId:d,draggingPosition:c,draggingTerminal:u,canvas:h,elementBounding:p,scroll:f,transform:m,panBy:_,setZoom:v,moveTo:g,viewportBoundingBox:y,isDragging:b,onZoom:w,onStopDragging:function(){s.draggingPosition=null,s.draggingTerminal=null,b.value=!1},onDragConnector:function(e,t){s.draggingPosition=e,s.draggingTerminal=t,b.value=!0},onActivate:function(e){d.value!==e&&s.setActiveNode(e)},onDeactivate:function(){s.setActiveNode(null)},canvasStyle:k,commentStore:C,comments:x,AdaptiveGrid:mb,WorkflowComment:Jb,InputCatcher:Qb,ToolBar:iw,WorkflowNode:kw,WorkflowEdges:Mw,WorkflowMinimap:Aw,ZoomControl:Rw}}}),Yw=jw;const Hw=(0,m.Z)(Yw,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"unified-panel-body workflow-canvas",attrs:{id:"workflow-canvas"}},[n.props.showZoomControls?t(n.ZoomControl,{attrs:{"zoom-level":n.scale,pan:n.transform},on:{onZoom:n.onZoom,"update:pan":n.panBy}}):e._e(),e._v(" "),e.readonly?e._e():t(n.ToolBar),e._v(" "),t("div",{ref:"canvas",staticClass:"canvas-content",attrs:{id:"canvas-container"},on:{drop:function(e){e.preventDefault()},dragover:function(e){e.preventDefault()}}},[t(n.AdaptiveGrid,{attrs:{"viewport-bounds":n.elementBounding,"viewport-bounding-box":n.viewportBoundingBox,transform:n.transform}}),e._v(" "),t("div",{staticClass:"node-area",style:n.canvasStyle},[t(n.InputCatcher,{attrs:{transform:n.transform}}),e._v(" "),t(n.WorkflowEdges,{attrs:{transform:n.transform,"dragging-terminal":n.draggingTerminal,"dragging-connection":n.draggingPosition}}),e._v(" "),e._l(e.steps,(function(i,o){return t(n.WorkflowNode,e._g({key:o,attrs:{id:i.id,name:i.name,"content-id":i.content_id,step:i,"datatypes-mapper":e.datatypesMapper,"active-node-id":n.activeNodeId,"root-offset":n.elementBounding,scroll:n.scroll,scale:n.scale,readonly:e.readonly},on:{"pan-by":n.panBy,stopDragging:n.onStopDragging,onDragConnector:n.onDragConnector,onActivate:n.onActivate,onDeactivate:n.onDeactivate}},e.$listeners))})),e._v(" "),e._l(n.comments,(function(i){return t(n.WorkflowComment,{key:`workflow-comment-${i.id}`,attrs:{id:`workflow-comment-${i.id}`,comment:i,scale:n.scale,readonly:e.readonly,"root-offset":n.elementBounding},on:{"pan-by":n.panBy}})}))],2)],1),e._v(" "),n.elementBounding&&n.props.showMinimap?t(n.WorkflowMinimap,{attrs:{steps:e.steps,comments:n.comments,"viewport-bounds":n.elementBounding,"viewport-bounding-box":n.viewportBoundingBox},on:{panBy:n.panBy,moveTo:n.moveTo}}):e._e()],1)}),[],!1,null,"77cada10",null).exports;function Nw(e){const{id:t,content_id:n,name:i,type:o,inputs:s,outputs:r,post_job_actions:l}=(0,Pn.BK)(e),d=(0,a.computed)((()=>{var t;return null!==(t=e.value.label)&&void 0!==t?t:void 0}));return{stepId:t,contentId:n,annotation:(0,a.computed)((()=>{var t;return null!==(t=e.value.annotation)&&void 0!==t?t:null})),label:d,name:i,type:o,stepInputs:s,stepOutputs:r,configForm:(0,a.computed)((()=>e.value.config_form)),postJobActions:l}}function Fw(e,t){const n=(0,a.ref)("");return t&&e.workflowOutputs[t]?n.value=`Duplicate label ${t}. Please fix this before saving the workflow.`:n.value="",n}const Bw=(0,a.defineComponent)({__name:"FormConditional",props:{step:null},emits:["onUpdateStep"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>Boolean(n.step.when)));return{__sfc:!0,emit:t,props:n,conditionalDefined:i,onSkipBoolean:function(e){if(n.step.when&&!1===e)t("onUpdateStep",Object.assign(Object.assign({},n.step),{when:void 0}));else if(!0===e&&!n.step.when){const e="$(inputs.when)",i=Object.assign(Object.assign({},n.step),{when:e,input_connections:Object.assign(Object.assign({},n.step.input_connections),{when:void 0})});t("onUpdateStep",i)}},FormElement:Ut.Z}}}),$w=Bw;const zw=(0,m.Z)($w,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.FormElement,{attrs:{id:"__conditional",value:t.conditionalDefined,title:"Conditionally skip step?",help:"Set to true and connect a boolean parameter that determines whether the step should run. The step runs if the parameter value is true and will be skipped if the parameter value is false",type:"boolean"},on:{input:t.onSkipBoolean}})}),[],!1,null,null,null).exports;const Ww=(0,a.defineComponent)({__name:"FormOutputLabel",props:{name:null,step:null,showDetails:{type:Boolean,default:!1}},setup(e){const t=e,{stepStore:n}=Zg(),i=(0,a.ref)(void 0),o=(0,a.computed)((()=>`__label__${t.name}`)),s=(0,a.computed)((()=>t.showDetails?`Label for: '${t.name}'`:"Label")),r=(0,a.computed)((()=>{var e;if(null===(e=t.step.workflow_outputs)||void 0===e?void 0:e.length){const e=t.step.workflow_outputs.find((e=>e.output_name===t.name));if(e)return e.label}return null}));return{__sfc:!0,props:t,stepStore:n,error:i,id:o,title:s,label:r,onInput:function(e){if(null==e)return;if(""===e){const e=(t.step.workflow_outputs||[]).filter((e=>e.output_name!==t.name));return n.updateStep(Object.assign(Object.assign({},t.step),{workflow_outputs:e})),void(i.value=void 0)}const o=n.workflowOutputs[e];if(o)o.stepId!==t.step.id&&(i.value=`Duplicate output label '${e}' will be ignored.`);else{const o=[...t.step.workflow_outputs||[]].filter((e=>e.output_name!==t.name));o.push({label:e,output_name:t.name}),n.updateStep(Object.assign(Object.assign({},t.step),{workflow_outputs:o})),i.value=void 0}},FormElement:Ut.Z}}});const Uw=(0,m.Z)(Ww,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.FormElement,{attrs:{id:t.id,value:t.label,error:t.error,title:t.title,type:"text",help:"Provide a short, unique name to describe this output."},on:{input:t.onInput}})}),[],!1,null,null,null).exports,Vw=(0,a.defineComponent)({__name:"FormDefault",props:{step:null,datatypes:null},emits:["onAnnotation","onLabel","onAttemptRefactor","onEditSubworkflow","onSetData"],setup(e,{emit:t}){const n=e,i=(0,a.toRef)(n,"step"),{stepId:o,contentId:s,annotation:r,label:l,name:d,type:c,configForm:u}=Nw(i),{stepStore:h}=Zg(),p=Fw(h,l.value),f=(0,a.computed)((()=>l.value?l.value:v.value?d.value:(null==s?void 0:s.value)||d.value)),m=(0,a.computed)((()=>Nh.Z[c.value])),_=(0,a.computed)((()=>o.value.toString())),v=(0,a.computed)((()=>"subworkflow"===c.value));return{__sfc:!0,props:n,emit:t,stepRef:i,stepId:o,contentId:s,annotation:r,label:l,name:d,type:c,configForm:u,stepStore:h,uniqueErrorLabel:p,stepTitle:f,nodeIcon:m,formDisplayId:_,isSubworkflow:v,onAnnotation:function(e){t("onAnnotation",o.value,e)},onLabel:function(e){t("onLabel",o.value,e)},onEditSubworkflow:function(){t("onEditSubworkflow",s.value)},onUpgradeSubworkflow:function(){t("onAttemptRefactor",[{action_type:"upgrade_subworkflow",step:{order_index:o.value}}])},onChange:function(e){t("onSetData",o.value,{id:o.value,type:c.value,content_id:s.value,inputs:e})},FormConditional:zw,FormCard:Xt.Z,FormDisplay:le.Z,FormElement:Ut.Z,FormOutputLabel:Uw}}}),qw=Vw;const Zw=(0,m.Z)(qw,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.FormCard,{attrs:{title:n.stepTitle,icon:n.nodeIcon},scopedSlots:e._u([{key:"operations",fn:function(){return[n.isSubworkflow?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-right py-0 px-1",attrs:{role:"button",title:"Edit this Subworkflow. You will need to upgrade this Workflow Step afterwards.",variant:"link",size:"sm"},on:{click:n.onEditSubworkflow}},[t("span",{staticClass:"fa fa-pencil-alt"})]):e._e(),e._v(" "),n.isSubworkflow?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-right py-0 px-1",attrs:{role:"button",title:"Upgrade this Workflow Step to latest Subworkflow version.",variant:"link",size:"sm"},on:{click:n.onUpgradeSubworkflow}},[t("span",{staticClass:"fa fa-sync"})]):e._e()]},proxy:!0},{key:"body",fn:function(){return[t(n.FormElement,{attrs:{id:"__label",value:n.label,title:"Label",help:"Add a step label.",error:n.uniqueErrorLabel},on:{input:n.onLabel}}),e._v(" "),t(n.FormElement,{attrs:{id:"__annotation",value:n.annotation,title:"Step Annotation",area:!0,help:"Add an annotation or notes to this step. Annotations are available when a workflow is viewed."},on:{input:n.onAnnotation}}),e._v(" "),n.isSubworkflow?t(n.FormConditional,e._g({attrs:{step:e.step}},e.$listeners)):e._e(),e._v(" "),n.configForm?.inputs?t(n.FormDisplay,{attrs:{id:n.formDisplayId,inputs:n.configForm.inputs},on:{onChange:n.onChange}}):e._e(),e._v(" "),n.isSubworkflow?t("div",e._l(e.step.outputs,(function(i,o){return t(n.FormOutputLabel,{key:o,attrs:{name:i.name,step:e.step,"show-details":!0}})})),1):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports;const Gw=["RenameDatasetAction__newname","ChangeDatatypeAction__newtype","TagDatasetAction__tags","RemoveTagDatasetAction__tags"],Jw=["ColumnSetAction__chromCol","ColumnSetAction__startCol","ColumnSetAction__endCol","ColumnSetAction__strandCol","ColumnSetAction__nameCol"],Kw={components:{FormCard:Xt.Z,FormElement:Ut.Z,FormOutputLabel:Uw},props:{outputName:{type:String,required:!0},outputLabel:{type:String,default:null},inputs:{type:Array,required:!0},datatypes:{type:Array,required:!0},formData:{type:Object,required:!0},step:{type:Object,required:!0}},data:()=>({expanded:!1,expandedColumn:!1,renameHelpUrl:"https://galaxyproject.org/learn/advanced-workflow/variables/"}),computed:{outputTitle(){return`Configure Output: '${this.outputLabel||this.outputName}'`},actionNames(){const e={};return Gw.concat(Jw).forEach((t=>{e[t]=`pja__${this.outputName}__${t}`})),e},datatypeExtensions(){const e=[];for(const t in this.datatypes)e.push({0:this.datatypes[t],1:this.datatypes[t]});return e.sort(((e,t)=>e.label>t.label?1:e.label<t.label?-1:0)),e.unshift({0:"Sequences",1:"Sequences"}),e.unshift({0:"Roadmaps",1:"Roadmaps"}),e.unshift({0:"Leave unchanged",1:""}),e},renameHelp(){const e=`This action will rename the output dataset. Click ${`<a href="${this.renameHelpUrl}">here</a>`} for more information. Valid input variables are:`;let t="";for(const e of this.inputs){t+=`<li><strong>${e.name.replace(/\|/g,".")}</strong>${e.label?`(${e.label})`:""}</li>`}return`${e}<ul>${t}</ul>`}},created(){this.setExpanded()},methods:{setExpanded(){this.expandedColumn=this.hasActions(Jw),this.expandedColumn?this.expanded=!0:this.expanded=this.hasActions(Gw)},hasActions(e){for(const t of e)if(null!=this.formData[this.actionNames[t]])return!0;return!1},onInput(e,t){this.$emit("onInput",e,t)},onDatatype(e){this.$emit("onDatatype",this.actionNames.ChangeDatatypeAction__newtype,this.outputName,e)}}},Xw=Kw;const Qw=(0,m.Z)(Xw,(function(){var e=this,t=e._self._c;return t("FormCard",{attrs:{title:e.outputTitle,collapsible:"",expanded:e.expanded},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormOutputLabel",{attrs:{name:e.outputName,step:e.step}}),e._v(" "),t("FormElement",{attrs:{id:e.actionNames.RenameDatasetAction__newname,value:e.formData[e.actionNames.RenameDatasetAction__newname],help:e.renameHelp,title:"Rename dataset",type:"text"},on:{input:e.onInput}}),e._v(" "),t("FormElement",{attrs:{id:e.actionNames.ChangeDatatypeAction__newtype,value:e.formData[e.actionNames.ChangeDatatypeAction__newtype],attributes:{options:e.datatypeExtensions},title:"Change datatype",type:"select",help:"This action will change the datatype of the output to the indicated datatype."},on:{input:e.onDatatype}}),e._v(" "),t("FormElement",{attrs:{id:e.actionNames.TagDatasetAction__tags,value:e.formData[e.actionNames.TagDatasetAction__tags],attributes:{placeholder:"Enter Tags"},title:"Add Tags",type:"tags",help:"This action will set tags for the dataset."},on:{input:e.onInput}}),e._v(" "),t("FormElement",{attrs:{id:e.actionNames.RemoveTagDatasetAction__tags,value:e.formData[e.actionNames.RemoveTagDatasetAction__tags],attributes:{placeholder:"Enter Tags"},title:"Remove Tags",type:"tags",help:"This action will remove tags for the dataset."},on:{input:e.onInput}}),e._v(" "),t("FormCard",{attrs:{title:"Assign columns",collapsible:"",expanded:e.expandedColumn},on:{"update:expanded":function(t){e.expandedColumn=t}},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormElement",{attrs:{id:e.actionNames.ColumnSetAction__chromCol,value:e.formData[e.actionNames.ColumnSetAction__chromCol],title:"Chrom column",type:"integer",help:"This action will set the chromosome column."},on:{input:e.onInput}}),e._v(" "),t("FormElement",{attrs:{id:e.actionNames.ColumnSetAction__startCol,value:e.formData[e.actionNames.ColumnSetAction__startCol],title:"Start column",type:"integer",help:"This action will set the start column."},on:{input:e.onInput}}),e._v(" "),t("FormElement",{attrs:{id:e.actionNames.ColumnSetAction__endCol,value:e.formData[e.actionNames.ColumnSetAction__endCol],title:"End column",type:"integer",help:"This action will set the end column."},on:{input:e.onInput}}),e._v(" "),t("FormElement",{attrs:{id:e.actionNames.ColumnSetAction__strandCol,value:e.formData[e.actionNames.ColumnSetAction__strandCol],title:"Strand column",type:"integer",help:"This action will set the strand column."},on:{input:e.onInput}}),e._v(" "),t("FormElement",{attrs:{id:e.actionNames.ColumnSetAction__nameCol,value:e.formData[e.actionNames.ColumnSetAction__nameCol],title:"Name column",type:"integer",help:"This action will set the name column."},on:{input:e.onInput}})]},proxy:!0}])})]},proxy:!0}])})}),[],!1,null,null,null).exports,ek={components:{FormElement:Ut.Z,FormOutput:Qw},props:{id:{type:Number,required:!0},nodeInputs:{type:Array,required:!0},nodeOutputs:{type:Array,required:!0},step:{type:Object,required:!0},datatypes:{type:Array,required:!0},postJobActions:{type:Object,required:!0}},data:()=>({formData:{}}),computed:{outputs(){return this.nodeOutputs},firstOutput(){return this.outputs.length>0&&this.outputs[0]},emailActionKey(){return`pja__${this.firstOutput.name}__EmailAction`},emailPayloadKey(){return`${this.emailActionKey}__host`},emailActionValue(){return Boolean(this.formData[this.emailActionKey])},deleteActionKey(){return`pja__${this.firstOutput.name}__DeleteIntermediatesAction`},deleteActionValue(){return Boolean(this.formData[this.deleteActionKey])}},watch:{formData(){const e={};Object.entries(this.formData).forEach((([t,n])=>{const[i,o,a,s]=t.split("__",4);if("pja"==i){const t=`${a}${o}`;e[t]||(e[t]={action_type:a,output_name:o,action_arguments:{}}),s&&("output_name"==s?e[t].output_name=n:e[t].action_arguments[s]=n)}})),this.$emit("onChange",e)}},created(){this.setFormData()},methods:{setFormData(){const e={};Object.values(this.postJobActions).forEach((t=>{if(Object.keys(t.action_arguments).length>0)Object.entries(t.action_arguments).forEach((([n,i])=>{const o=`pja__${t.output_name}__${t.action_type}__${n}`;e[o]=i}));else{const n=`pja__${t.output_name}__${t.action_type}`;e[n]=!0}})),e[this.emailPayloadKey]&&(e[this.emailActionKey]=!0),this.formData=e},setEmailAction(e){e[this.emailActionKey]?e[this.emailPayloadKey]=window.location.host:this.emailPayloadKey in e&&delete e[this.emailPayloadKey]},onInput(e,t){let n=!1;const i=t in this.formData;if([null,void 0,"",!1].includes(e))i&&(n=!0,delete this.formData[t]);else{e!==this.formData[t]&&(this.formData[t]=e,n=!0)}this.setEmailAction(this.formData),n&&(this.formData=Object.assign({},this.formData))},onDatatype(e,t,n){this.onInput(n,e)}}};const tk=(0,m.Z)(ek,(function(){var e=this,t=e._self._c;return e.firstOutput?t("div",[t("FormElement",{attrs:{id:e.emailActionKey,value:e.emailActionValue,title:"Email notification",type:"boolean",help:"An email notification will be sent when the job has completed."},on:{input:e.onInput}}),e._v(" "),t("FormElement",{attrs:{id:e.deleteActionKey,value:e.deleteActionValue,title:"Output cleanup",type:"boolean",help:"Upon completion of this step, delete unchecked outputs from completed workflow steps if they are no longer required as inputs."},on:{input:e.onInput}}),e._v(" "),e._l(e.outputs,(function(n,i){return t("FormOutput",{key:i,attrs:{"output-name":n.name,step:e.step,inputs:e.nodeInputs,datatypes:e.datatypes,"form-data":e.formData},on:{onInput:e.onInput,onDatatype:e.onDatatype}})}))],2):e._e()}),[],!1,null,null,null).exports,nk={components:{FormDisplay:le.Z,ToolCard:$v,FormElement:Ut.Z,FormConditional:zw,FormSection:tk,Heading:Dt},props:{step:{type:Object,required:!0},datatypes:{type:Array,required:!0}},emits:["onSetData","onUpdateStep","onChangePostJobActions","onAnnotation","onLabel"],setup(e,{emit:t}){const{stepId:n,annotation:i,label:o,stepInputs:s,stepOutputs:r,configForm:l,postJobActions:d}=Nw((0,a.toRef)(e,"step")),{stepStore:c}=Zg();return{stepId:n,annotation:i,label:o,stepInputs:s,stepOutputs:r,configForm:l,postJobActions:d,uniqueErrorLabel:Fw(c,o)}},data:()=>({mainValues:null,messageText:"",messageVariant:"success"}),computed:{id(){return`${this.stepId}:${this.configForm.id}`},toolCardId(){return`${this.stepId}`},hasData(){return!!this.configForm?.id},inputs(){const e=this.configForm.inputs;return fe.ZP.deepEach(e,(e=>{if(e.type)if(-1!=["data","data_collection"].indexOf(e.type)){const t=Array.isArray(e.extensions)?fe.ZP.textify(e.extensions):"";e.titleonly=!0,e.info=`Data input '${e.name}' (${t})`,e.value={__class__:"RuntimeValue"}}else e.connectable=-1==["rules"].indexOf(e.type),e.collapsible_value={__class__:"RuntimeValue"},e.is_workflow=e.options&&0===e.options.length||-1!=["integer","float"].indexOf(e.type)})),fe.ZP.deepEach(e,(e=>{"conditional"===e.type&&(e.connectable=!1,e.test_param.collapsible_value=void 0)})),e},errors(){return this.configForm.errors}},methods:{onAnnotation(e){this.$emit("onAnnotation",this.stepId,e)},onLabel(e){this.$emit("onLabel",this.stepId,e)},onChange(e){const t=null===this.mainValues;this.mainValues=e,t||this.postChanges()},onChangePostJobActions(e){this.$emit("onChangePostJobActions",this.stepId,e)},onChangeVersion(e){this.messageText=`Now you are using '${this.configForm.name}' version ${e}.`,this.postChanges(e)},onUpdateFavorites(e,t){e.preferences.favorites=t},postChanges(e){const t=Object.assign({},this.mainValues),n=this.configForm;let i=n.id,o=n.version;e&&(i=i.replace(o,e),o=e),this.$emit("onSetData",this.stepId,{tool_id:i,tool_version:o,type:"tool",inputs:t})}}};const ik=(0,m.Z)(nk,(function(){var e=this,t=e._self._c;return e.hasData?t("ToolCard",{attrs:{id:e.configForm.id,version:e.configForm.version,title:e.configForm.name,description:e.configForm.description,options:e.configForm,"message-text":e.messageText,"message-variant":e.messageVariant},on:{onChangeVersion:e.onChangeVersion,onUpdateFavorites:e.onUpdateFavorites},scopedSlots:e._u([{key:"body",fn:function(){return[t("FormElement",{attrs:{id:"__label",value:e.label,title:"Label",help:"Add a step label.",error:e.uniqueErrorLabel},on:{input:e.onLabel}}),e._v(" "),t("FormElement",{attrs:{id:"__annotation",value:e.annotation,title:"Step Annotation",area:!0,help:"Add an annotation or notes to this step. Annotations are available when a workflow is viewed."},on:{input:e.onAnnotation}}),e._v(" "),t("FormConditional",e._g({attrs:{step:e.step}},e.$listeners)),e._v(" "),t("div",{staticClass:"mt-2 mb-4"},[t("Heading",{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v(" Tool Parameters ")]),e._v(" "),t("FormDisplay",{attrs:{id:e.id,inputs:e.inputs,errors:e.errors,"text-enable":"Set in Advance","text-disable":"Set at Runtime","workflow-building-mode":!0},on:{onChange:e.onChange}})],1),e._v(" "),t("div",{staticClass:"mt-2 mb-4"},[t("Heading",{attrs:{h2:"",separator:"",bold:"",size:"sm"}},[e._v(" Additional Options ")]),e._v(" "),t("FormSection",{attrs:{id:e.stepId,"node-inputs":e.stepInputs,"node-outputs":e.stepOutputs,step:e.step,datatypes:e.datatypes,"post-job-actions":e.postJobActions},on:{onChange:e.onChangePostJobActions}})],1)]},proxy:!0}],null,!1,3041185222)}):e._e()}),[],!1,null,null,null).exports,ok={components:{MarkdownEditor:rh,FlexPanel:La,StateUpgradeModal:nb,ToolPanel:os,FormDefault:Zw,FormTool:ik,WorkflowOptions:Ky,WorkflowAttributes:fy,WorkflowLint:zy,RefactorConfirmationModal:eb,MessagesModal:Uy,WorkflowGraph:Hw},props:{workflowId:{type:String,default:void 0},initialVersion:{type:Number,default:void 0},workflowTags:{type:Array,default:()=>[]},moduleSections:{type:Array,required:!0},dataManagers:{type:Array,required:!0},workflows:{type:Array,required:!0}},setup(e,{emit:t}){const{datatypes:n,datatypesMapper:i,datatypesMapperLoading:s}=Wg(),r=(0,a.unref)((0,kv.Z)("workflow-editor-")),l=(0,a.ref)(e.workflowId||r),{connectionStore:d,stepStore:c,stateStore:u,commentStore:h}=qg(l),{comments:p}=(0,o.Jk)(h),{getStepIndex:f,steps:m}=(0,o.Jk)(c),{activeNodeId:_}=(0,o.Jk)(u),v=(0,a.computed)((()=>null!==_.value?c.getStep(_.value):null)),g=(0,a.ref)(!1),y=(0,a.ref)(!0),b=(0,a.computed)((()=>Object.keys(d.invalidConnections).length>0));function w(){g.value=!1,d.$reset(),c.$reset(),u.$reset(),h.$reset()}return c.$subscribe(((e,t)=>{y.value||(g.value=!0)})),h.$subscribe(((e,t)=>{y.value||(g.value=!0)})),(0,a.onUnmounted)((()=>{w(),t("update:confirmation",!1)})),{id:l,connectionStore:d,hasChanges:g,hasInvalidConnections:b,stepStore:c,steps:m,comments:p,nodeIndex:f,datatypes:n,activeStep:v,activeNodeId:_,datatypesMapper:i,datatypesMapperLoading:s,stateStore:u,resetStores:w,initialLoading:y}},data(){return{isCanvas:!0,markdownConfig:null,markdownText:null,versions:[],parameters:null,report:{},labels:{},license:null,creator:null,annotation:null,name:"Unnamed Workflow",tags:this.workflowTags,services:null,stateMessages:[],insertedStateMessages:[],refactorActions:[],scrollToId:null,highlightId:null,messageTitle:null,messageBody:null,messageIsError:!1,version:this.initialVersion,showInPanel:"attributes",saveAsName:null,saveAsAnnotation:null,showSaveAsModal:!1,transform:{x:0,y:0,k:1},graphOffset:{left:0,top:0,width:0,height:0}}},computed:{showAttributes(){return"attributes"==this.showInPanel},showLint(){return"lint"==this.showInPanel},activeNodeType(){return this.activeStep?.type},hasActiveNodeDefault(){return this.activeStep&&"tool"!=this.activeStep?.type},hasActiveNodeTool(){return"tool"==this.activeStep?.type},isNewTempWorkflow(){return!this.workflowId}},watch:{id(e,t){t&&this._loadCurrent(e)},annotation(e,t){e==t||this.isNewTempWorkflow||(this.hasChanges=!0)},name(e,t){e==t||this.isNewTempWorkflow||(this.hasChanges=!0)},hasChanges(){this.$emit("update:confirmation",this.hasChanges)},initialVersion(e,t){e!=t&&void 0===t&&(this.version=this.initialVersion)}},async created(){this.services=new Sm,this.lastQueue=new Sa.h,await this._loadCurrent(this.id,this.version),(0,lh.MA)(),this.initialLoading=!1},methods:{onUpdateStep(e){this.stepStore.updateStep(e)},onUpdateStepPosition(e,t){const n={...this.steps[e],position:t};this.onUpdateStep(n)},onConnect(e){this.connectionStore.addConnection(e)},onAttemptRefactor(e){if(this.hasChanges){if(0==window.confirm("You've made changes to your workflow that need to be saved before attempting the requested action. Save those changes and continue?"))return;return this.onWorkflowMessage("Saving workflow...","progress"),Yh(this).then((t=>{this.refactorActions=e})).catch((e=>{this.onWorkflowError("Saving workflow failed, cannot apply requested changes...",e,{Ok:()=>{this.hideModal()}})}))}this.refactorActions=e},onWorkflowError(e,t){this.messageTitle=e,this.messageBody=t.toString(),this.messageIsError=!0},onWorkflowMessage(e,t){this.messageTitle=e,this.messageBody=t,this.messageIsError=!1},hideModal(){this.messageTitle=null,this.messageBody=null,this.messageIsError=!1,(0,lh.MA)()},async onRefactor(e){this.resetStores(),await Oh(this.id,e.workflow),this._loadEditorData(e.workflow)},onUpdate(e){Ph({type:e.type,content_id:e.contentId,_:"true"},this.id,this.stateStore.setLoadingState).then((t=>{this.onUpdateStep({...this.steps[e.id],config_form:t.config_form,content_id:t.content_id,errors:t.errors,inputs:t.inputs,outputs:t.outputs,tool_state:t.tool_state,tool_version:t.tool_version})}))},onChange(){this.hasChanges=!0},onChangePostJobActions(e,t){const n={...this.steps[e],post_job_actions:t};this.stepStore.updateStep(n),this.onChange()},onRemove(e){this.stepStore.removeStep(e),this.showInPanel="attributes"},onEditSubworkflow(e){const t=`/workflows/edit?workflow_id=${e}`;this.onNavigate(t)},async onClone(e){const t=this.steps[parseInt(e)],n=JSON.parse(JSON.stringify(t)),{id:i}=this.stepStore.addStep({...n,id:null,uuid:null,label:null,position:Gg(this.graphOffset,this.transform)});this.stateStore.setActiveNode(i)},onInsertTool(e,t){this._insertStep(e,t,"tool")},onInsertModule(e,t){this._insertStep(t,t,e)},onInsertWorkflow(e,t){this._insertStep(e,t,"subworkflow")},copyIntoWorkflow(e){this.onWorkflowMessage("Importing workflow","progress"),jh({id:e}).then((e=>{Oh(this.id,e,!0,Gg(this.graphOffset,this.transform));const t=Fh(e);this.onInsertedStateMessages(t)}))},async onInsertWorkflowSteps(e,t){if(this.isCanvas)if(t<10)this.copyIntoWorkflow(e);else{await ki.confirm(`Warning this will add ${t} new steps into your current workflow.  You may want to consider using a subworkflow instead.`)&&this.copyIntoWorkflow(e)}else this.isCanvas=!0},onDownload(){window.location=`${(0,g.getAppRoot)()}api/workflows/${this.id}/download?format=json-download`},async doSaveAs(){if(!this.saveAsName&&!this.nameValidate())return;const e=this.saveAsName??`SavedAs_${this.name}`,t=this.saveAsAnnotation??"";try{const n={...this,name:e,annotation:t},{id:i,name:o,number_of_steps:a}=await this.services.createWorkflow(n),s=`Created new workflow '${o}' with ${a} steps.`;this.hasChanges=!1,await this.routeToWorkflow(i),oo.FN.success(s)}catch(t){const n=`Saving workflow as '${e}' failed`;this.onWorkflowError(n,(0,y.a)(t)||"Please contact an administrator.",{Ok:()=>{this.hideModal()}})}},onSaveAs(){this.showSaveAsModal=!0},onLayout(){return Promise.all([n.e(295),n.e(621)]).then(n.bind(n,85299)).then((e=>{e.autoLayout(this.id,this.steps).then((e=>{e.map((e=>this.onUpdateStep(e)))}))}))},onAttributes(){this._ensureParametersSet(),this.stateStore.setActiveNode(null),this.showInPanel="attributes"},onWorkflowTextEditor(){this.stateStore.setActiveNode(null),this.showInPanel="attributes"},onAnnotation(e,t){const n={...this.steps[e],annotation:t};this.onUpdateStep(n)},async routeToWorkflow(e){const{addScopePointer:t}=(0,Mh.T)();t(e,this.id),this.id=e,await this.onSave(),this.hasChanges=!1,this.$router.replace({query:{id:e}})},async onCreate(){if(this.nameValidate())try{const{id:e,name:t,number_of_steps:n}=await this.services.createWorkflow(this),i=`Created new workflow '${t}' with ${n} steps.`;this.hasChanges=!1,await this.routeToWorkflow(e),oo.FN.success(i)}catch(e){this.onWorkflowError("Creating workflow failed",(0,y.a)(e)||"Please contact an administrator.",{Ok:()=>{this.hideModal()}})}},nameValidate(){return!!this.name||(oo.FN.error("Please provide a name for your workflow."),this.onAttributes(),!1)},onSetData(e,t){this.lastQueue.enqueue((()=>Ph(t,e,this.stateStore.setLoadingState))).then((t=>{const n={...this.steps[e],content_id:t.content_id,inputs:t.inputs,outputs:t.outputs,config_form:t.config_form,tool_state:t.tool_state,tool_version:t.tool_version,errors:t.errors};this.onUpdateStep(n)}))},onLabel(e,t){const n={...this.steps[e],label:t};this.onUpdateStep(n)},onScrollTo(e){this.scrollToId=e,this.onHighlight(e)},onHighlight(e){this.highlightId=e},onUnhighlight(e){this.highlightId=null},onLint(){this._ensureParametersSet(),this.stateStore.setActiveNode(null),this.showInPanel="lint"},onUpgrade(){this.onAttemptRefactor([{action_type:"upgrade_all_steps"}])},onEdit(){this.isCanvas=!0},onReport(){this.isCanvas=!1},onReportUpdate(e){this.hasChanges=!0,this.report.markdown=e,this.markdownText=e},onRun(){const e=`/workflows/run?id=${this.id}`;this.onNavigate(e)},async onNavigate(e){this.isNewTempWorkflow?await this.onCreate():await this.onSave(!0),this.hasChanges=!1,this.$router.push(e)},onSave(e=!1){if(this.nameValidate())return!e&&this.onWorkflowMessage("Saving workflow...","progress"),Yh(this).then((e=>{Ih(this.id).then((e=>{this.versions=e,this.hideModal()}))})).catch((e=>{this.onWorkflowError("Saving workflow failed...",e,{Ok:()=>{this.hideModal()}})}))},onVersion(e){if(e!=this.version){if(this.hasChanges){if(0==window.confirm("There are unsaved changes to your workflow which will be lost. Continue ?"))return}this.version=e,this._loadCurrent(this.id,e)}},_ensureParametersSet(){this.parameters=function(e){const t=new Fg,n=/\$\{.+?\}/g;return Object.values(e).forEach((e=>{var i;(null===(i=e.config_form)||void 0===i?void 0:i.inputs)&&fe.ZP.deepEach(e.config_form.inputs,(i=>{if("string"==typeof i.value){const o=i.value.match(n);if(o)for(const n of o){const o=t.getParameterFromMatch(n);new Yg(o,e,i)}}})),e.post_job_actions&&Object.values(e.post_job_actions).forEach((i=>{i.action_arguments&&Object.values(i.action_arguments).forEach((o=>{if("string"==typeof o){const a=o.match(n);if(a)for(const n of a){const o=t.getParameterFromMatch(n);new Hg(o,e,i)}}}))}))})),t}(this.steps)},_insertStep(e,t,n){if(!this.isCanvas)return void(this.isCanvas=!0);const i=this.stepStore.insertNewStep(e,t,n,Gg(this.graphOffset,this.transform));Ph({name:t,type:n,content_id:e},i.id,this.stateStore.setLoadingState).then((e=>{this.stepStore.updateStep({...i,tool_state:e.tool_state,inputs:e.inputs,outputs:e.outputs,config_form:e.config_form}),this.stateStore.setActiveNode(i.id)}))},async _loadEditorData(e){void 0!==e.name&&(this.name=e.name),void 0!==e.annotation&&(this.annotation=e.annotation),void 0!==e.version&&(this.version=e.version);const t=e.report||{},n=t.markdown||"\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n";this.markdownText=n,this.markdownConfig=t,this.hideModal(),this.stateMessages=Fh(e);const i=this.stateMessages.length>0;this.license=e.license,this.creator=e.creator,Ih(this.id).then((e=>{this.versions=e})),await a.default.nextTick(),this.hasChanges=i},async _loadCurrent(e,t){if(!this.isNewTempWorkflow){this.resetStores(),this.onWorkflowMessage("Loading workflow...","progress");try{const n=await this.lastQueue.enqueue(jh,{id:e,version:t});await Oh(e,n),await this._loadEditorData(n)}catch(e){this.onWorkflowError("Loading workflow failed...",e)}}},onTags(e){this.tags!=e&&(this.tags=e)},onLicense(e){this.license!=e&&(this.hasChanges=!0,this.license=e)},onCreator(e){this.creator!=e&&(this.hasChanges=!0,this.creator=e)},onActiveNode(e){this.$refs["right-panel"].scrollTop=0},onInsertedStateMessages(e){this.insertedStateMessages=e,this.hideModal()},resetMessage(){this.messageTitle=null,this.messageBody=null,this.messageError=!1}}},ak=ok;const sk={components:{Editor:(0,m.Z)(ak,(function(){var e=this,t=e._self._c;return e.isCanvas?t("div",{staticClass:"d-flex",attrs:{id:"columns"}},[t("StateUpgradeModal",{attrs:{"state-messages":e.stateMessages}}),e._v(" "),t("StateUpgradeModal",{attrs:{"state-messages":e.insertedStateMessages,title:"Subworkflow embedded with changes",message:"Problems were encountered loading this workflow (possibly a result of tool upgrades). Please review the following parameters and then save."}}),e._v(" "),t("RefactorConfirmationModal",{attrs:{"workflow-id":e.id,"refactor-actions":e.refactorActions},on:{onWorkflowError:e.onWorkflowError,onWorkflowMessage:e.onWorkflowMessage,onRefactor:e.onRefactor,onShow:e.hideModal}}),e._v(" "),t("MessagesModal",{attrs:{title:e.messageTitle,message:e.messageBody,error:e.messageIsError},on:{onHidden:e.resetMessage}}),e._v(" "),t("b-modal",{attrs:{title:"Save As a New Workflow","ok-title":"Save","cancel-title":"Cancel"},on:{ok:function(t){return e.doSaveAs(!1)}},model:{value:e.showSaveAsModal,callback:function(t){e.showSaveAsModal=t},expression:"showSaveAsModal"}},[t("b-form-group",{attrs:{label:"Name"}},[t("b-form-input",{model:{value:e.saveAsName,callback:function(t){e.saveAsName=t},expression:"saveAsName"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Annotation"}},[t("b-form-textarea",{model:{value:e.saveAsAnnotation,callback:function(t){e.saveAsAnnotation=t},expression:"saveAsAnnotation"}})],1)],1),e._v(" "),t("FlexPanel",{attrs:{side:"left"}},[t("ToolPanel",{attrs:{workflow:"","module-sections":e.moduleSections,"data-managers":e.dataManagers,"editor-workflows":e.workflows},on:{onInsertTool:e.onInsertTool,onInsertModule:e.onInsertModule,onInsertWorkflow:e.onInsertWorkflow,onInsertWorkflowSteps:e.onInsertWorkflowSteps}})],1),e._v(" "),t("div",{staticClass:"workflow-center",attrs:{id:"center"}},[t("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[t("span",{staticClass:"sr-only"},[e._v("Workflow Editor")]),e._v(" "),!e.isNewTempWorkflow||e.name?t("span",[e._v(e._s(e.name))]):t("i",[e._v("Create New Workflow")])])]),e._v(" "),e.datatypesMapperLoading?e._e():t("WorkflowGraph",{attrs:{steps:e.steps,"datatypes-mapper":e.datatypesMapper,"highlight-id":e.highlightId,"scroll-to-id":e.scrollToId},on:{scrollTo:function(t){e.scrollToId=null},transform:t=>e.transform=t,"graph-offset":t=>e.graphOffset=t,onUpdate:e.onUpdate,onClone:e.onClone,onCreate:e.onInsertTool,onChange:e.onChange,onConnect:e.onConnect,onRemove:e.onRemove,onUpdateStep:e.onUpdateStep,onUpdateStepPosition:e.onUpdateStepPosition}})],1),e._v(" "),t("FlexPanel",{attrs:{side:"right"}},[t("div",{staticClass:"unified-panel bg-white"},[t("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[t("WorkflowOptions",{attrs:{"is-new-temp-workflow":e.isNewTempWorkflow,"has-changes":e.hasChanges,"has-invalid-connections":e.hasInvalidConnections},on:{onSave:e.onSave,onCreate:e.onCreate,onSaveAs:e.onSaveAs,onRun:e.onRun,onDownload:e.onDownload,onReport:e.onReport,onLayout:e.onLayout,onEdit:e.onEdit,onAttributes:e.onAttributes,onLint:e.onLint,onUpgrade:e.onUpgrade}})],1)]),e._v(" "),t("div",{ref:"right-panel",staticClass:"unified-panel-body workflow-right p-2"},[e.initialLoading?e._e():t("div",[e.hasActiveNodeTool?t("FormTool",{key:e.activeStep.id,attrs:{step:e.activeStep,datatypes:e.datatypes},on:{onChangePostJobActions:e.onChangePostJobActions,onAnnotation:e.onAnnotation,onLabel:e.onLabel,onUpdateStep:e.onUpdateStep,onSetData:e.onSetData}}):e.hasActiveNodeDefault?t("FormDefault",{attrs:{step:e.activeStep,datatypes:e.datatypes},on:{onAnnotation:e.onAnnotation,onLabel:e.onLabel,onEditSubworkflow:e.onEditSubworkflow,onAttemptRefactor:e.onAttemptRefactor,onUpdateStep:e.onUpdateStep,onSetData:e.onSetData}}):e.showAttributes?t("WorkflowAttributes",{attrs:{id:e.id,tags:e.tags,parameters:e.parameters,"annotation-current":e.annotation,annotation:e.annotation,"name-current":e.name,name:e.name,version:e.version,versions:e.versions,license:e.license,creator:e.creator},on:{"update:annotationCurrent":function(t){e.annotation=t},"update:annotation-current":function(t){e.annotation=t},"update:nameCurrent":function(t){e.name=t},"update:name-current":function(t){e.name=t},onVersion:e.onVersion,onTags:e.onTags,onLicense:e.onLicense,onCreator:e.onCreator}}):e.showLint?t("WorkflowLint",{attrs:{"untyped-parameters":e.parameters,annotation:e.annotation,creator:e.creator,license:e.license,steps:e.steps,"datatypes-mapper":e.datatypesMapper},on:{onAttributes:e.onAttributes,onHighlight:e.onHighlight,onUnhighlight:e.onUnhighlight,onRefactor:e.onAttemptRefactor,onScrollTo:e.onScrollTo}}):e._e()],1)])])])],1):t("MarkdownEditor",{attrs:{"markdown-text":e.markdownText,"markdown-config":e.markdownConfig,title:"Workflow Report: "+e.name,steps:e.steps},on:{onUpdate:e.onReportUpdate},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"workflow-canvas-button",title:"Return to Workflow",variant:"link",role:"button"},on:{click:e.onEdit}},[t("span",{staticClass:"fa fa-times"})])]},proxy:!0}])})}),[],!1,null,"5a43599c",null).exports},data:()=>({storedWorkflowId:null,workflowId:null,editorConfig:null,editorReloadKey:0}),watch:{"$route.params":{handler(){this.getEditorConfig()},immediate:!0}},methods:{async getEditorConfig(){let e=!0;this.storedWorkflowId||this.workflowId||(e=!1),this.storedWorkflowId=ga.Z.get("id"),this.workflowId=ga.Z.get("workflow_id");const t={};this.workflowId?t.workflow_id=this.workflowId:this.storedWorkflowId&&(t.id=this.storedWorkflowId),this.editorConfig=await(0,en.e)({url:"/workflow/editor",params:t}),e&&(this.editorReloadKey+=1)}}};const rk=(0,m.Z)(sk,(function(){var e=this,t=e._self._c;return e.editorConfig?t("Editor",{key:e.editorReloadKey,attrs:{"workflow-id":e.editorConfig.id,"data-managers":e.editorConfig.dataManagers,"initial-version":e.editorConfig.initialVersion,"module-sections":e.editorConfig.moduleSections,"workflow-tags":e.editorConfig.tags,workflows:e.editorConfig.workflows},on:{"update:confirmation":function(t){return e.$emit("update:confirmation",t)}}}):e._e()}),[],!1,null,null,null).exports;const lk={components:{InvocationsList:bm}};const dk=(0,m.Z)(lk,(function(){return(0,this._self._c)("InvocationsList",{attrs:{"header-message":"Workflow invocations that are still being scheduled are displayed on this page.","no-invocations-message":"There are no scheduling workflow invocations to show currently.","owner-grid":!1}})}),[],!1,null,null,null).exports;const ck={components:{Alert:M},beforeRouteEnter(e,t,n){console.log("beforeRouteEnter"),n((e=>e.debouncedLoad()))},props:{debouncePeriod:{type:Number,required:!1,default:100}},data:()=>({dataManagers:[],dataTables:[],filter:"",viewOnly:!1,message:"",status:"",loading:!1}),computed:{dataManagersFiltered(){return this.dataManagers.filter((e=>e.name.match(new RegExp(this.filter,"i"))))},dataTablesFiltered(){return this.dataTables.filter((e=>e.name.match(new RegExp(this.filter,"i"))))}},created(){console.log("created"),this.debouncedLoad=(0,Nu.debounce)(this.load,this.debouncePeriod),this.debouncedLoad()},methods:{kebabCase:e=>e.toLowerCase().replace(/ /g,"-"),load(){this.loading=!0,v.Z.get(`${(0,g.getAppRoot)()}data_manager/data_managers_list`).then((e=>{console.log("response",e),this.dataManagers=e.data.dataManagers,this.dataTables=e.data.dataTables,this.viewOnly=e.data.viewOnly,this.message=e.data.message,this.status=e.data.status})).catch((e=>{console.error(e)})).finally((()=>{this.loading=!1}))}}};const uk=(0,m.Z)(ck,(function(){var e=this,t=e._self._c;return t("div",[t("Alert",{attrs:{message:e.message,variant:e.status}}),e._v(" "),e.viewOnly?t("Alert",{attrs:{message:"Not implemented",variant:"dark"}}):e.loading?t("Alert",{attrs:{message:"Waiting for data",variant:"info"}}):e.dataManagers&&!e.dataManagers.length?t("div",[t("Alert",{attrs:{variant:"primary"}},[t("span",{staticClass:"alert-heading h-sm"},[e._v("None installed")]),e._v("\n            You do not currently have any Data Managers installed.\n        ")])],1):e.dataManagers&&e.dataTables?t("div",[t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"6"}},[t("b-form-group",{attrs:{description:"Search for strings or regular expressions"}},[t("b-input-group",[t("b-form-input",{attrs:{placeholder:"Type to Search"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.filter=""}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),t("b-input-group-append",[t("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear (esc)")])],1)],1)],1)],1)],1)],1),e._v(" "),t("b-card-group",{attrs:{columns:""}},[t("b-card",{attrs:{id:"data-managers-card","no-body":"",header:"Installed Data Managers"}},[t("b-list-group",{attrs:{flush:""}},e._l(e.dataManagersFiltered,(function(n,i){return t("b-list-group-item",{key:i},[t("b-button-group",{attrs:{vertical:""}},[t("b-button",{attrs:{id:e.kebabCase(n.name),href:n.toolUrl,target:"_blank",variant:"primary"}},[t("div",[e._v(e._s(n.name))]),e._v(" "),n.description?t("div",[t("i",[e._v(e._s(n.description))])]):e._e()]),e._v(" "),t("b-button",{attrs:{id:e.kebabCase(n.name)+"-jobs",to:{name:"DataManagerJobs",params:{id:encodeURIComponent(n.id)}}}},[e._v("\n                                Jobs\n                            ")])],1)],1)})),1)],1),e._v(" "),t("b-card",{attrs:{"no-body":"",header:"Tool Data Tables"}},[t("b-list-group",{attrs:{flush:""}},e._l(e.dataTablesFiltered,(function(n,i){return t("b-list-group-item",{key:i,attrs:{id:e.kebabCase(n.name)+"-table",to:{name:"DataManagerTable",params:{name:n.name}},variant:!0===n.managed?"primary":"link"}},[e._v("\n                        "+e._s(n.name)+"\n                        "),!0===n.managed?t("b-badge",{attrs:{variant:"primary",pill:""}},[t("span",{staticClass:"fa fa-exchange"})]):e._e()],1)})),1)],1)],1)],1):e._e()],1)}),[],!1,null,null,null).exports;const hk={components:{Alert:M},props:{id:{type:String,required:!0}},data:()=>({jobId:Number,exitCode:Number,runUrl:"#",dataManager:[],hdaInfo:[],dataManagerOutput:[],errorMessages:[],fields:[{key:"created"},{key:"fileSize",label:"Filesize"},{key:"fileName",label:"Full path",tdClass:"table-cell-break-word"}],viewOnly:!1,message:"",status:"",loading:!0}),computed:{breadcrumbItems(){return[{text:"Data Managers",to:{name:"DataManager"}},{text:this.dataManager.name+" ( "+this.dataManager.description+" )",href:this.dataManager.toolUrl,target:"_blank"},{text:"Jobs",to:{name:"DataManagerJobs",params:{id:this.dataManager.id}}},{text:"Job "+this.jobId,active:!0}]}},created(){v.Z.get(`${(0,g.getAppRoot)()}data_manager/job_info?id=${this.id}`).then((e=>{this.jobId=e.data.jobId,this.exitCode=e.data.exitCode,this.runUrl=e.data.runUrl,this.dataManager=e.data.dataManager,this.hdaInfo=e.data.hdaInfo,this.dataManagerOutput=e.data.dataManagerOutput,this.errorMessages=e.data.errorMessages,this.viewOnly=e.data.viewOnly,this.message=e.data.message,this.status=e.data.status,this.loading=!1})).catch((e=>{console.error(e)}))},methods:{outputFields:e=>Object.keys(e).reduce(((e,t)=>[...e,{key:t,label:t}]),[])}};const pk=(0,m.Z)(hk,(function(){var e=this,t=e._self._c;return t("div",[e.dataManager&&e.jobId&&!e.loading?t("b-breadcrumb",{attrs:{id:"breadcrumb",items:e.breadcrumbItems}}):e._e(),e._v(" "),t("Alert",{attrs:{message:e.message,variant:e.status}}),e._v(" "),e._l(e.errorMessages,(function(e,n){return t("Alert",{key:n,attrs:{message:e,variant:"error"}})})),e._v(" "),e.viewOnly?t("Alert",{attrs:{message:"Not implemented",variant:"dark"}}):e.loading?t("Alert",{attrs:{message:"Waiting for data",variant:"info"}}):e.dataManager?t("b-container",[t("b-row",[t("b-col",[t("b-card",{staticClass:"mb-3",attrs:{id:"data-manager-card","header-bg-variant":"primary","header-text-variant":"white","border-variant":"primary"},scopedSlots:e._u([{key:"header",fn:function(){return[t("b-container",[t("b-row",{attrs:{"align-v":"center"}},[t("b-col",{attrs:{cols:"auto"}},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Rerun",href:e.runUrl}},[t("span",{staticClass:"fa fa-redo"})])],1),e._v(" "),t("b-col",[t("b",[e._v(e._s(e.dataManager.name))]),e._v(" "),t("i",[e._v(e._s(e.dataManager.description))])])],1)],1)]},proxy:!0}])},[e._v(" "),e._l(e.hdaInfo,(function(n,i){return t("b-card",{key:i,staticClass:"mb-4",attrs:{id:"data-card-"+i},scopedSlots:e._u([{key:"header",fn:function(){return[t("b-table",{attrs:{fields:e.fields,items:[n],"caption-top":"",small:"",stacked:""},scopedSlots:e._u([{key:"table-caption",fn:function(){return[t("b-container",[t("b-row",{attrs:{"align-v":"center"}},[t("b-col",{attrs:{cols:"auto"}},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"View complete info",href:e.hdaInfo[i].infoUrl,target:"galaxy_main"}},[t("span",{staticClass:"fa fa-info-circle"})])],1),e._v(" "),t("b-col",[t("b",[e._v(e._s(n.name))])])],1)],1)]},proxy:!0}],null,!0)})]},proxy:!0}],null,!0)},[e._v(" "),e._l(e.dataManagerOutput[i],(function(n,i){return t("b-table",{key:i,attrs:{fields:e.outputFields(n[1][0]),items:n[1],small:"",stacked:"",hover:"",striped:""},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("\n                                Data Table: "),t("b",[e._v(e._s(n[0]))])]},proxy:!0}],null,!0)})}))],2)}))],2)],1)],1)],1):e._e()],2)}),[],!1,null,null,null).exports;const fk={components:{Alert:M},props:{id:{type:String,required:!0}},data:()=>({dataManager:[],jobs:[],fields:[{key:"id",label:"Job ID",sortable:!0},{key:"user"},{key:"updateTime",label:"Last Update",sortable:!0},{key:"state"},{key:"actions"},{key:"jobRunnerName",label:"Job Runner"},{key:"jobRunnerExternalId",label:"PID/Cluster ID",sortable:!0}],showCommandLine:!0,filter:"",viewOnly:!1,message:"",status:"",loading:!0}),computed:{breadcrumbItems(){return[{text:"Data Managers",to:{name:"DataManager"}},{text:this.dataManager.name+" ( "+this.dataManager.description+" )",href:this.dataManager.toolUrl,target:"_blank"},{text:"Jobs",active:!0}]},tableFields(){const e=this.fields.slice(0);return this.showCommandLine&&e.splice(5,0,{key:"commandLine",tdClass:["code","command-line"]}),e},tableItems(){const e=this.jobs.slice(0);for(const t of e)switch(t.updateTime=t.updateTime.replace("T","\n"),t.state){case"ok":t._cellVariants={state:"success"};break;case"error":t._cellVariants={state:"danger"};break;case"deleted":t._cellVariants={state:"warning"};break;case"running":t._cellVariants={state:"info"};break;case"waiting":case"queued":t._cellVariants={state:"primary"};break;case"paused":t._cellVariants={state:"secondary"}}return e}},created(){v.Z.get(`${(0,g.getAppRoot)()}data_manager/jobs_list?id=${decodeURIComponent(this.id)}`).then((e=>{this.dataManager=e.data.dataManager,this.jobs=e.data.jobs,this.viewOnly=e.data.viewOnly,this.message=e.data.message,this.status=e.data.status,this.loading=!1})).catch((e=>{console.error(e)}))}};var mk=(0,m.Z)(fk,(function(){var e=this,t=e._self._c;return t("div",[e.dataManager&&!e.loading?t("b-breadcrumb",{attrs:{id:"breadcrumb",items:e.breadcrumbItems}}):e._e(),e._v(" "),t("Alert",{attrs:{message:e.message,variant:e.status}}),e._v(" "),e.viewOnly?t("Alert",{attrs:{message:"Not implemented",variant:"dark"}}):e.loading?t("Alert",{attrs:{message:"Waiting for data",variant:"info"}}):e.jobs&&!e.jobs.length?t("Alert",{attrs:{message:"There are no jobs for this data manager.",variant:"primary"}}):e.jobs?t("div",[t("b-container",{staticClass:"mb-3",attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"6"}},[t("b-form-group",{attrs:{description:"Search for strings or regular expressions"}},[t("b-input-group",[t("b-form-input",{attrs:{placeholder:"Type to Search"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.filter=""}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),t("b-input-group-append",[t("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear (esc)")])],1)],1)],1)],1)],1),e._v(" "),t("b-row",[t("b-col",[t("b-button",{attrs:{pressed:e.showCommandLine,variant:"outline-secondary"},on:{"update:pressed":function(t){e.showCommandLine=t}}},[e._v("\n                        "+e._s(e.showCommandLine?"Hide":"Show")+" Command Line\n                    ")])],1)],1)],1),e._v(" "),t("b-table",{attrs:{id:"jobs-table",fields:e.tableFields,items:e.tableItems,filter:e.filter,hover:"",responsive:"",striped:""},scopedSlots:e._u([{key:"cell(actions)",fn:function(n){return[t("b-button-group",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Rerun",target:"_top",href:e.jobs[n.index].runUrl}},[t("span",{staticClass:"fa fa-redo"})]),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{id:"job-"+e.jobs[n.index].encId,title:"View Info",to:{name:"DataManagerJob",params:{id:e.jobs[n.index].encId}}}},[t("span",{staticClass:"fa fa-info-circle"})]),e._v(" "),e.showCommandLine?e._e():t("b-button",{attrs:{pressed:n.detailsShowing},on:{"update:pressed":function(t){return e.$set(n,"detailsShowing",t)},click:function(e){return e.stopPropagation(),n.toggleDetails()}}},[e._v("\n                        "+e._s(n.detailsShowing?"Hide":"Show")+" Command Line\n                    ")])],1)]}},{key:"row-details",fn:function(n){return[t("b-card",{scopedSlots:e._u([{key:"footer",fn:function(){return[t("b-button",{staticClass:"mt-3",on:{click:n.toggleDetails}},[e._v("Hide Info")])]},proxy:!0}],null,!0)},[t("h2",{staticClass:"h-text"},[e._v("Command Line")]),e._v(" "),t("pre",{staticClass:"code"},[t("code",{staticClass:"command-line"},[e._v(e._s(n.item.commandLine))])])])]}}])})],1):e._e()],1)}),[],!1,null,null,null);const _k=mk.exports;const vk={components:{Alert:M},props:{name:{type:String,required:!0}},data:()=>({dataTable:{},viewOnly:!1,message:"",status:"",loading:!0}),computed:{dataTableName(){return this.dataTable&&this.dataTable.name?this.dataTable.name:"null"},buttonLabel(){return`Reload ${this.dataTableName} tool data table`},breadcrumbItems(){return[{text:"Tool Data Tables",to:"/admin/data_manager"},{text:this.dataTableName}]}},created(){v.Z.get(`${(0,g.getAppRoot)()}data_manager/tool_data_table_info?table_name=${this.name}`).then((e=>{this.dataTable=e.data.dataTable,this.viewOnly=e.data.viewOnly,this.message=e.data.message,this.status=e.data.status,this.loading=!1})).catch((e=>{console.error(e)}))},methods:{fields:e=>e.map(((e,t)=>({key:t.toString(),label:e}))),reload(){v.Z.get(`${(0,g.getAppRoot)()}data_manager/reload_tool_data_tables?table_name=${this.dataTableName}`).then((e=>{e.data.dataTable&&(this.dataTable=e.data.dataTable),this.message=e.data.message,this.status=e.data.status})).catch((e=>{console.error(e)}))}}};const gk=(0,m.Z)(vk,(function(){var e=this,t=e._self._c;return t("div",[e.dataTable&&!e.loading?t("b-breadcrumb",{attrs:{id:"breadcrumb",items:e.breadcrumbItems}}):e._e(),e._v(" "),t("Alert",{attrs:{message:e.message,variant:e.status}}),e._v(" "),e.viewOnly?t("Alert",{attrs:{message:"Not implemented",variant:"dark"}}):e.loading?t("Alert",{attrs:{message:"Waiting for data",status:"info"}}):e.dataTable&&!e.dataTable.data.length?t("Alert",{attrs:{message:"There are currently no entries in this tool data table.",variant:"primary"}}):e.dataTable?t("b-container",[t("b-row",[t("b-col",[t("b-card",{attrs:{id:"data-table-card",flush:""},scopedSlots:e._u([{key:"header",fn:function(){return[t("b-container",[t("b-row",{attrs:{"align-v":"center"}},[t("b-col",{attrs:{cols:"auto"}},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.buttonLabel},on:{click:function(t){return e.reload()}}},[t("span",{staticClass:"fa fa-sync"})])],1),e._v(" "),t("b-col",[t("b",[e._v(e._s(e.dataTableName))])])],1)],1)]},proxy:!0}])},[e._v(" "),t("b-table",{attrs:{fields:e.fields(e.dataTable.columns),items:e.dataTable.data,small:"",hover:"",striped:""}})],1)],1)],1)],1):e._e()],1)}),[],!1,null,null,null).exports;const yk={computed:{toolShedLink:()=>`${(0,g.getAppRoot)()}admin/toolshed`}};const bk=(0,m.Z)(yk,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"data-managers-title"}},[t("span",{staticClass:"mb-3"},[t("h1",{staticClass:"h-lg",attrs:{id:"data-managers-title"}},[e._v("Local Data")]),e._v(" "),t("p",[e._v("\n            Data Managers are used to manage Galaxy's local data. They can be installed manually, or via the\n            "),t("b-link",{attrs:{href:e.toolShedLink}},[e._v("ToolShed")]),e._v(". For more comprehensive information\n            "),t("b-link",{attrs:{href:"https://galaxyproject.org/admin/tools/data-managers/",target:"_blank"}},[e._v("See the Wiki")]),e._v(".\n        ")],1)]),e._v(" "),t("router-view")],1)}),[],!1,null,null,null).exports;const wk={name:"Message",props:{message:{type:String,default:null},status:{type:String,default:"done"}}};const kk=(0,m.Z)(wk,(function(){var e=this,t=e._self._c;return e.message?t("div",{class:[e.status+"message"]},[e._v(e._s(e.message))]):e._e()}),[],!1,null,null,null).exports;const Ck={props:{dataManagerTableName:{type:String,required:!0},dataManagerColumns:{type:Array,required:!0},dataManagerItems:{type:Array,required:!0}},methods:{handleReloadButtonClick(e){this.$emit("reloaddatamanager",this.dataManagerTableName)}}};const xk=(0,m.Z)(Ck,(function(){var e=this,t=e._self._c;return t("table",{staticClass:"tabletip"},[t("thead",[t("tr",[t("th",{staticStyle:{"font-size":"120%"},attrs:{colspan:e.dataManagerColumns.length}},[e._v("\n                Data Manager: "+e._s(e.dataManagerTableName)+"\n                "),t("a",{staticClass:"icon-btn",attrs:{href:"javascript:void(0)",title:`Reload ${e.dataManagerTableName} tool data table`},on:{click:e.handleReloadButtonClick}},[t("span",{staticClass:"fa fa-sync"})])])]),e._v(" "),t("tr",e._l(e.dataManagerColumns,(function(n){return t("th",[e._v(e._s(n))])})),0)]),e._v(" "),e._l(e.dataManagerItems,(function(n){return t("tbody",{key:n.value},[t("tr",e._l(e.dataManagerColumns,(function(i){return t("td",[e._v(e._s(n[i]))])})),0)])}))],2)}),[],!1,null,null,null).exports;const Sk={props:{isLoaded:{type:Boolean},title:{type:String,default:""},columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]}}};var Mk=(0,m.Z)(Sk,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[e._t("title",(function(){return[e._v(e._s(e.title))]}))],2),e._v(" "),t("div",{staticClass:"card-body"},[t("table",{staticClass:"manage-table",attrs:{border:"0",cellspacing:"0",cellpadding:"0",width:"100%"}},[e._t("columns",(function(){return e._l(e.columns,(function(n){return t("th",{key:n.dataIndex},[e._v(e._s(n.text))])}))})),e._v(" "),e._t("rows",(function(){return[e._l(e.rows,(function(n){return[t("tr",e._l(e.columns,(function(i){return t("td",{key:i.dataIndex},[e._v(e._s(n[i.dataIndex]))])})),0)]}))]}))],2),e._v(" "),void 0===e.isLoaded||e.isLoaded?e._e():t("div",{style:{textAlign:"center",padding:"7px 0"}},[e._v("\n            Loading...\n        ")])])])}),[],!1,null,"700aff8f",null);const Tk=Mk.exports,Lk={components:{"base-grid":Tk},props:{isLoaded:{type:Boolean,required:!0},rows:{type:Array,required:!0}},data:()=>({columns:[{text:"Name",dataIndex:"name"},{text:"Filename",dataIndex:"filename"},{text:"Tool data path",dataIndex:"tool_data_path"},{text:"Errors",dataIndex:"errors"}]}),methods:{handleTableNameClick(e){this.$emit("changeview",e.target.text)}}};var Dk=(0,m.Z)(Lk,(function(){var e=this,t=e._self._c;return t("base-grid",{attrs:{id:"data-tables-grid","is-loaded":e.isLoaded,columns:e.columns},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Current data table registry contains "+e._s(e.rows.length)+" data tables ")]},proxy:!0},{key:"rows",fn:function(){return[e._l(e.rows,(function(n){return[t("tr",{key:n.id},[t("td",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:e.handleTableNameClick}},[e._v(e._s(n.name))])]),e._v(" "),t("td",[e._v(e._s(n.filename))]),e._v(" "),t("td",[e._v(e._s(n.tool_data_path))]),e._v(" "),t("td",[e._v(e._s(n.errors))])])]}))]},proxy:!0}])})}),[],!1,null,null,null);const Ek={components:{message:kk,"data-tables-grid":Dk.exports,"data-manager-grid":xk},data:()=>({currentView:"data-tables-grid",isLoaded:!1,dataTables:[],dataManagerTableName:"",dataManagerColumns:[],dataManagerItems:[],message:"",status:""}),computed:{currentProps(){let e;return e="data-tables-grid"===this.currentView?{isLoaded:this.isLoaded,rows:this.dataTables}:{dataManagerTableName:this.dataManagerTableName,dataManagerColumns:this.dataManagerColumns,dataManagerItems:this.dataManagerItems},e}},created(){v.Z.get(`${(0,g.getAppRoot)()}admin/data_tables_list`).then((e=>{this.isLoaded=!0,this.dataTables=e.data.data,this.message=e.data.message,this.status=e.data.status})).catch((e=>{console.error(e)}))},methods:{showDataManager(e){v.Z.get(`${(0,g.getAppRoot)()}data_manager/tool_data_table_items`,{params:{table_name:e}}).then((t=>{this.message=t.data.message,this.status=t.data.status,"error"!==t.data.status&&"warning"!==t.data.status&&(this.dataManagerTableName=e,this.dataManagerColumns=t.data.data.columns,this.dataManagerItems=t.data.data.items,this.currentView="data-manager-grid")})).catch((e=>{console.error(e)}))},reloadDataManager(e){v.Z.get(`${(0,g.getAppRoot)()}data_manager/reload_tool_data_table`,{params:{table_name:e}}).then((e=>{this.message=e.data.message,this.status=e.data.status,"error"!==e.data.status&&"warning"!==e.data.status&&(this.dataManagerItems=e.data.data.items)})).catch((e=>{console.error(e)}))}}};const Ok=(0,m.Z)(Ek,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"data-tables-heading"}},[t("h1",{staticClass:"h-lg",attrs:{id:"data-tables-heading"}},[e._v("Data Tables")]),e._v(" "),t("message",{attrs:{message:e.message,status:e.status}}),e._v(" "),"error"!==e.status?t(e.currentView,e._b({tag:"component",on:{changeview:e.showDataManager,reloaddatamanager:e.reloadDataManager}},"component",e.currentProps,!1)):e._e()],1)}),[],!1,null,null,null).exports;const Ak={components:{Message:kk,BaseGrid:Tk},data:()=>({showAllColumns:!1,keys:[],dataTypes:[],message:"",status:""}),computed:{columns(){let e=this.prettyColumns();if(this.keys.length>0&&this.showAllColumns){let t=this.keys;for(const n of e)t=t.filter((e=>e!==n.dataIndex));e=t.reduce((function(e,t){let n=t[0].toUpperCase();return n+=t.slice(1).replace(/_/g," "),e.push({text:n,dataIndex:t}),e}),e)}return e},isDataLoaded(){return""!==status||this.dataTypes.length>0}},created(){v.Z.get(`${(0,g.getAppRoot)()}admin/data_types_list`).then((e=>{this.keys=e.data.keys,this.dataTypes=e.data.data,this.message=e.data.message,this.status=e.data.status})).catch((e=>{console.error(e)}))},methods:{prettyColumns:()=>[{text:"Extension",dataIndex:"extension"},{text:"Type",dataIndex:"type"},{text:"MIME Type",dataIndex:"mimetype"},{text:"Display in Upload",dataIndex:"display_in_upload"}]}};const Ik=(0,m.Z)(Ak,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"data-types-heading"}},[t("h1",{staticClass:"h-lg",attrs:{id:"data-types-heading"}},[e._v("Data Types")]),e._v(" "),t("Message",{attrs:{message:e.message,status:e.status}}),e._v(" "),"error"!==e.status?t("BaseGrid",{attrs:{id:"data-types-grid",columns:e.columns,rows:e.dataTypes,"is-loaded":e.isDataLoaded},scopedSlots:e._u([{key:"title",fn:function(){return[t("p",[e._v("Current data types registry contains "+e._s(e.dataTypes.length)+" data types.")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.showAllColumns,expression:"showAllColumns"}],attrs:{id:"showAllColumns",type:"checkbox"},domProps:{checked:Array.isArray(e.showAllColumns)?e._i(e.showAllColumns,null)>-1:e.showAllColumns},on:{change:function(t){var n=e.showAllColumns,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.showAllColumns=n.concat([null])):a>-1&&(e.showAllColumns=n.slice(0,a).concat(n.slice(a+1)))}else e.showAllColumns=o}}}),e._v(" "),t("label",{attrs:{for:"showAllColumns"}},[e._v("Show all columns")])]},proxy:!0}],null,!1,1476032257)}):e._e()],1)}),[],!1,null,null,null).exports;function Pk(){const e=`${(0,g.getAppRoot)()}api/display_applications`;return v.Z.get(e)}function Rk(e){const t=`${(0,g.getAppRoot)()}api/display_applications/reload`;return v.Z.post(t,{ids:e})}function jk(){const e=`${(0,g.getAppRoot)()}api/tool_shed_repositories?uninstalled=False`;return v.Z.get(e)}function Yk(e){const t=`${(0,g.getAppRoot)()}api/tool_shed_repositories/reset_metadata_on_selected_installed_repositories?repository_ids=${e}`;return v.Z.post(t)}const Hk={props:{object:{type:Object,required:!0}},computed:{asJson:function(){return JSON.stringify(this.object)}}};const Nk=(0,m.Z)(Hk,(function(){return(0,this._self._c)("span",{staticClass:"fa fa-code",attrs:{title:this.asJson}})}),[],!1,null,null,null).exports,Fk={components:{DisplayRaw:Nk},props:{containerDescription:{type:Object},compact:{type:Boolean,default:!0}},computed:{title:function(){return this.compact?this.description:""},description:function(){return`This is a ${this.containerDescription.type} container. ${this.shellDescription}`},shellDescription:function(){return`This container uses shell [${this.containerDescription.shell}].`},identifier:function(){return this.containerDescription&&this.containerDescription.identifier},externalUrl:function(){const e=this.identifier;return e&&e.startsWith("quay.io")?"http://"+e:null}}};const Bk=(0,m.Z)(Fk,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"container-description"},[e.containerDescription?t("span",{attrs:{title:e.title}},[e.externalUrl?t("a",{staticClass:"icon-btn",attrs:{href:e.externalUrl}},[t("span",{staticClass:"fa fa-link"})]):e._e(),e._v("\n        "+e._s(e.containerDescription.identifier)+"\n        "),e.compact?e._e():t("span",[t("i",[e._v(e._s(e.description))]),e._v(" "),t("DisplayRaw",{attrs:{object:e.containerDescription}})],1)]):t("span",[t("i",[e._v("no container resolved")])])])}),[],!1,null,null,null).exports;const $k={explicit:"This explicit container resolver looks for containers annotated as part of the tool description - independent of tool requirements and Galaxy configuration.",mulled:"The mulled container resolver fetches pre-built Docker containers based on hashing a tool's requirements.",mulled_singularity:"The mulled_singularity container resolver fetches pre-built Singularity containers based on hashing a tool requirements.",cached_mulled:"The cached_mulled container resolver finds mulled containers cached on the Galaxy server and discovered with `docker images`.",cached_mulled_singularity:"The cached_mulled_singularity container resolver finds mulled containers cached in a directory mounted by the Galaxy server.",build_mulled:"",build_mulled_cached:""},zk={components:{DisplayRaw:Nk},props:{containerResolver:{type:Object},compact:{type:Boolean,default:!0}},computed:{title:function(){return this.compact?this.description:""},description:function(){return`${$k[this.resolverType]||`Container resolver of type ${this.resolverType}.`}`},resolverType:function(){return this.containerResolver&&this.containerResolver.resolver_type}}};const Wk=(0,m.Z)(zk,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"container-resolver"},[e.containerResolver?t("span",{attrs:{title:e.title}},[e._v("\n        "+e._s(e.resolverType)+"\n        "),e.compact?e._e():t("span",[t("i",[e._v(e._s(e.description))]),e._v(" "),t("DisplayRaw",{attrs:{object:e.containerResolver}})],1)]):e.compact?t("span"):t("span",[t("i",[e._v("no container resolver")])])])}),[],!1,null,null,null).exports;const Uk={props:{requirement:{type:Object,required:!0}}};const Vk=(0,m.Z)(Uk,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"requirement"},[t("b",{staticClass:"requirement-name"},[e._v(e._s(e.requirement.name))]),e._v(" "),e.requirement.version?t("span",{staticClass:"requirement-version"},[e._v("@"+e._s(e.requirement.version))]):e._e()])}),[],!1,null,null,null).exports,qk={components:{Requirement:Vk},props:{requirements:{type:Array,required:!0}}};const Zk=(0,m.Z)(qk,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"requirements-cell"},[0==e.requirements.length?t("span",[t("i",[e._v("no requirements defined")])]):e._l(e.requirements,(function(e,n){return t("div",{key:n},[t("Requirement",{attrs:{requirement:e}})],1)}))],2)}),[],!1,null,null,null).exports;const Gk={conda:"The Conda package manager will be used for resolution. ",galaxy_package:"A manually configured Galaxy package directory will be used for resolution. ",tool_shed_packages:"Legacy Tool Shed package installations will be used for resolution. ",docker:"Resolution of dependencies is assumed to be handled by specified Docker container. ",singularity:"Resolution of dependencies is assumed to be handled by specified Singularity container. "};function Jk(e){let t;t=e.exact?"This dependency is assumed to exactly match the requirement ":"Ignoring version information this dependency is assumed to match the requirement ";let n=e.name||"";return e.version&&(n+=` at version ${e.version}`),`${t}${n}. `}const Kk={components:{DisplayRaw:Nk},props:{status:{type:Object,required:!0},allStatuses:{type:Array,default:null},compact:{type:Boolean,default:!0}},computed:{merged:function(){return"MergedCondaDependency"==this.status.model_class||"ContainerDependency"==this.status.model_class},mergedMultiple:function(){return this.merged&&null!=this.allStatuses&&this.allStatuses.length>1},description:function(){const e=this.status.dependency_type;let t=Gk[e]||`The dependency resolver ${e} will be used for resolution.`;if("conda"==e&&(t+=`The Conda environment found at ${this.status.environment_path} will be used for resolution. `),this.mergedMultiple)for(const e of this.allStatuses)t+=Jk(e);else this.status.name&&(t+=Jk(this.status));return t},title:function(){return this.compact?this.description:""}}};const Xk=(0,m.Z)(Kk,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"dependency-status"},[e.status.dependency_type?t("span",{attrs:{title:e.title}},[t("b",[t("span",{staticClass:"fa fa-check text-success"}),e._v(e._s(e.status.dependency_type)+"\n            "),e.mergedMultiple?t("span",[e._v("(merged)")]):e._e()]),e._v(" "),e.compact?e._e():t("span",[e._v(e._s(e.description)+" "),t("DisplayRaw",{attrs:{object:e.status}})],1)]):t("b",[t("span",{staticClass:"fa fa-times text-danger"}),t("i",[e._v("unresolved")])])])}),[],!1,null,null,null).exports;const Qk={props:{toolId:{type:String,required:!0},toolVersion:{type:String,default:null}},computed:{showVersion:function(){return this.toolVersion&&!this.toolId.endsWith(this.toolVersion)}}};const eC=(0,m.Z)(Qk,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"tool-display"},[t("b",{staticClass:"tool-id"},[e._v(e._s(e.toolId))]),e.showVersion?t("span",[e._v("@"+e._s(e.toolVersion))]):e._e()])}),[],!1,null,null,null).exports;const tC={components:{ToolDisplay:eC},props:{toolIds:{type:Array,required:!0},compact:{type:Boolean,default:!0}},computed:{title:function(){return this.compact?this.toolIds.join(", "):""}}};const nC=(0,m.Z)(tC,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tools",attrs:{title:e.title}},[1==e.toolIds.length?t("span",[t("ToolDisplay",{attrs:{"tool-id":e.toolIds[0]}})],1):e.compact?t("span",[e._v(" "+e._s(e.toolIds.length)+" tools ")]):e._l(e.toolIds,(function(e,n){return t("div",{key:n},[t("ToolDisplay",{attrs:{"tool-id":e}})],1)}))],2)}),[],!1,null,null,null).exports,iC={components:{ContainerDescription:Bk,ContainerResolver:Wk,Requirements:Zk,StatusDisplay:Xk,ToolDisplay:eC,Tools:nC},props:{resolution:{type:Object,required:!0}},computed:{singleTool:function(){return null!=this.resolution.tool_id}}};const oC=(0,m.Z)(iC,(function(){var e=this,t=e._self._c;return t("b-card",[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e.singleTool||1==e.resolution.tool_ids.length?t("span",[e._v("Tool")]):t("span",[e._v("Tools")])]),e._v(" "),t("div",{staticClass:"col-8"},[e.singleTool?t("div",[t("ToolDisplay",{attrs:{"tool-id":e.resolution.tool_id}})],1):t("div",[t("Tools",{attrs:{"tool-ids":e.resolution.tool_ids,compact:!1}})],1)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Requirements")]),e._v(" "),t("div",{staticClass:"col-8"},[t("Requirements",{attrs:{requirements:e.resolution.requirements}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Status Display")]),e._v(" "),t("div",{staticClass:"col-8"},[t("StatusDisplay",{attrs:{status:e.resolution.status,compact:!1}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Container")]),e._v(" "),t("div",{staticClass:"col-8"},[t("ContainerDescription",{attrs:{"container-description":e.resolution.status.container_description,compact:!1}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Container Resolver")]),e._v(" "),t("div",{staticClass:"col-8"},[t("ContainerResolver",{attrs:{"container-resolver":e.resolution.status.container_resolver,compact:!1}})],1)])])}),[],!1,null,null,null).exports;const aC={components:{LoadingSpan:z.Z},props:{loading:{type:Boolean,required:!0},loadingMessage:{type:String,required:!0},error:{type:String,default:null}}};const sC=(0,m.Z)(aC,(function(){var e=this,t=e._self._c;return t("div",[e.error?t("div",{staticClass:"alert alert-danger",attrs:{show:""}},[e._v(e._s(e.error))]):t("div",[e._t("header"),e._v(" "),e.loading?t("LoadingSpan",{attrs:{message:e.loadingMessage}}):t("div",[e._t("actions"),e._v(" "),e._t("body"),e._v(" "),e._t("actions")],2)],2)])}),[],!1,null,null,null).exports;const rC={components:{DisplayRaw:Nk},props:{dependencyResolver:{type:Object},compact:{type:Boolean,default:!1}},computed:{resolverType:function(){return this.dependencyResolver&&this.dependencyResolver.resolver_type}}};const lC=(0,m.Z)(rC,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"dependency-resolver"},[e.dependencyResolver?t("span",["conda"==e.dependencyResolver.resolver_type?t("span",[e._v("\n            A Conda dependency resolver was used with prefix "),t("tt",[e._v(e._s(e.dependencyResolver.prefix))]),e._v(" and channels\n            "),t("tt",[e._v(e._s(e.dependencyResolver.ensure_channels))]),e._v(".\n            "),e.dependencyResolver.use_local?t("span",[e._v("\n                Local Conda packages are enabled for this resolver (this is not best practice for production but may\n                be useful for development).\n            ")]):t("span",[e._v("\n                Local Conda packages are disabled for this resolver (this is best practice for production).\n            ")])],1):t("span",[e._v("\n            A dependency resolver of type "+e._s(e.dependencyResolver.resolver_type)+" was used to resolve these\n            dependencies.\n        ")]),e._v(" "),t("DisplayRaw",{attrs:{object:e.dependencyResolver}})],1):t("span",[e._v(" no dependency resolver ")])])}),[],!1,null,null,null).exports;const dC={components:{StatusDisplay:Xk},props:{statuses:{type:Array,required:!0},compact:{type:Boolean,default:!0}},computed:{merged:function(){return this.statuses.length>=1&&"MergedCondaDependency"==this.statuses[0].model_class}}};const cC={components:{ContainerDescription:Bk,ContainerResolver:Wk,DependencyIndexWrapper:sC,DependencyResolver:lC,Requirements:Zk,StatusDisplay:Xk,Statuses:(0,m.Z)(dC,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"dependency-statuses"},[0==e.statuses.length?t("b",[t("span",{staticClass:"fa fa-times text-danger"}),t("i",[e._v("unresolved")])]):e.merged?t("span",[t("StatusDisplay",{attrs:{status:e.statuses[0],"all-statuses":e.statuses}})],1):e._l(e.statuses,(function(e,n){return t("div",{key:n},[t("StatusDisplay",{attrs:{status:e}})],1)}))],2)}),[],!1,null,null,null).exports,ToolDisplay:eC,Tools:nC},created(){this.root=(0,g.getAppRoot)(),this.load()},computed:{hasSelection:function(){for(const e of this.items)if(e.selected)return!0;return!1}},methods:{showRowDetails(e,t,n){"A"!=n.target.nodeName&&(e._showDetails=!e._showDetails)},handleError(e){this.error=e}}};a.default.use(d.ZPm);const uC=Nu.default.keys($k).map((e=>({value:e,text:e})));uC.splice(0,0,{value:null,text:"*any*"});const hC={components:{ContainerResolutionDetails:oC},mixins:[cC],data:()=>({error:null,loading:!0,fields:[{key:"selected",label:""},{key:"tool"},{key:"requirement",label:"Requirements"},{key:"resolution"},{key:"resolver"},{key:"container"}],containerType:null,containerTypeOptions:[{value:null,text:"*any*"},{value:"docker",text:"Docker"},{value:"singularity",text:"Singularity"}],resolverType:null,resolverTypeOptions:uC,filterResolution:null,filterResolverType:null,filterContainerType:null,resolutions:[]}),computed:{items:function(){return this.resolutions.filter((e=>("unresolved"!=this.filterResolution||null==e.status.dependency_type)&&(("resolved"!=this.filterResolution||null!=e.status.dependency_type)&&(!(this.filterContainerType&&(!e.status.container_description||e.status.container_description.type!=this.filterContainerType))&&!(this.filterResolverType&&(!e.status.container_description||e.status.container_resolver.resolver_type!=this.filterResolverType)))))).map((e=>({selected:!1,requirements:e.requirements,status:e.status,tool_id:e.tool_id,_showDetails:!1})))}},watch:{containerType:function(e){this.load()},resolverType:function(e){this.load()},filterResolution:function(e){"unresolved"==e&&(this.filterResolverType=null,this.filterContainerType=null)}},methods:{load(){this.loading=!0;(async function(e){const t=e||{},n=`${(0,g.getAppRoot)()}api/container_resolvers/toolbox`;try{return(await v.Z.get(n,{params:t})).data}catch(e){(0,y.t)(e)}})(this.apiParams()).then((e=>{this.resolutions=e,this.loading=!1})).catch(this.handleError)},installSelected(){this.loading=!0,async function(e,t){const n=t||{},i=`${(0,g.getAppRoot)()}api/container_resolvers/toolbox/install`;e&&e.length>0&&(n.tool_ids=e||[]);try{return(await v.Z.post(i,n)).data}catch(e){(0,y.t)(e)}}(this.selectedToolIds(),this.apiParams()).then((e=>{this.resolutions=e,this.loading=!1})).catch(this.handleError)},apiParams(){const e={};return this.containerType&&(e.container_type=this.containerType),this.resolverType&&(e.resolver_type=this.resolverType),e},selectedToolIds(){return this.items.filter((e=>e.selected)).map((e=>e.tool_id))}}},pC=hC;var fC=(0,m.Z)(pC,(function(){var e=this,t=e._self._c;return t("dependency-index-wrapper",{attrs:{error:e.error,loading:e.loading,"loading-message":"Loading container resolution information"},scopedSlots:e._u([{key:"header",fn:function(){return[t("b-row",{staticClass:"m-1"},[t("b-form",{attrs:{inline:""}},[t("b",[e._v("Resolution:")]),e._v(" "),t("label",{staticClass:"mr-sm-2",attrs:{for:"manage-container-type"}},[e._v("Resolve containers of type")]),e._v(" "),t("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-container-type",options:e.containerTypeOptions},model:{value:e.containerType,callback:function(t){e.containerType=t},expression:"containerType"}}),e._v(" "),t("label",{staticClass:"mr-sm-2",attrs:{for:"manage-resolver-type"}},[e._v("using resolvers of type")]),e._v(" "),t("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-resolver-type",options:e.resolverTypeOptions},model:{value:e.resolverType,callback:function(t){e.resolverType=t},expression:"resolverType"}})],1)],1),e._v(" "),t("b-row",{staticClass:"m-1"},[t("b-form",{attrs:{inline:""}},[t("b",[e._v("Filter:")]),e._v(" "),t("label",{staticClass:"mr-sm-2",attrs:{for:"manage-filter-resolution"}},[e._v("Resolution")]),e._v(" "),t("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-filter-resolution"},model:{value:e.filterResolution,callback:function(t){e.filterResolution=t},expression:"filterResolution"}},[t("option",{domProps:{value:null}},[e._v("*any*")]),e._v(" "),t("option",{attrs:{value:"unresolved"}},[e._v("Unresolved")]),e._v(" "),t("option",{attrs:{value:"resolved"}},[e._v("Resolved")])]),e._v(" "),"unresolved"!=e.filterResolution?t("label",{staticClass:"mr-sm-2",attrs:{for:"manage-filter-container-type"}},[e._v("Containers of type")]):e._e(),e._v(" "),"unresolved"!=e.filterResolution?t("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-filter-container-type",options:e.containerTypeOptions},model:{value:e.filterContainerType,callback:function(t){e.filterContainerType=t},expression:"filterContainerType"}}):e._e(),e._v(" "),"unresolved"!=e.filterResolution?t("label",{staticClass:"mr-sm-2",attrs:{for:"manage-filter-resolver-type"}},[e._v("Resolvers of type")]):e._e(),e._v(" "),"unresolved"!=e.filterResolution?t("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-filter-resolver-type",options:e.resolverTypeOptions},model:{value:e.filterResolverType,callback:function(t){e.filterResolverType=t},expression:"filterResolverType"}}):e._e()],1)],1)]},proxy:!0},{key:"actions",fn:function(){return[t("b-row",{staticClass:"m-1"},[t("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-0",on:{click:e.installSelected}},[t("span",{staticClass:"fa fa-plus"}),e._v("\n                Attempt Build\n            ")])],1)]},proxy:!0},{key:"body",fn:function(){return[t("b-table",{attrs:{id:"containers-table",striped:"",fields:e.fields,items:e.items},on:{"row-clicked":e.showRowDetails},scopedSlots:e._u([{key:"cell(selected)",fn:function(n){return[t("b-form-checkbox",{model:{value:n.item.selected,callback:function(t){e.$set(n.item,"selected",t)},expression:"data.item.selected"}})]}},{key:"cell(requirement)",fn:function(e){return[t("requirements",{attrs:{requirements:e.item.requirements}})]}},{key:"cell(resolution)",fn:function(e){return[t("status-display",{attrs:{status:e.item.status}})]}},{key:"cell(container)",fn:function(e){return[t("container-description",{attrs:{"container-description":e.item.status.container_description}})]}},{key:"cell(resolver)",fn:function(e){return[t("container-resolver",{attrs:{"container-resolver":e.item.status.container_resolver}})]}},{key:"cell(tool)",fn:function(e){return[t("tool-display",{attrs:{"tool-id":e.item.tool_id}})]}},{key:"row-details",fn:function(e){return[t("ContainerResolutionDetails",{attrs:{resolution:e.item}})]}}])})]},proxy:!0}])})}),[],!1,null,null,null);const mC=fC.exports;const _C={components:{ContainerResolutionDetails:oC,DependencyResolver:lC,Requirement:Vk,Requirements:Zk,StatusDisplay:Xk,ToolDisplay:eC,Tools:nC},props:{resolution:{type:Object,required:!0}},computed:{singleTool:function(){return null!=this.resolution.tool_id},isContainerResolution:function(){return this.resolution.status.length>=1&&"ContainerDependency"==this.resolution.status[0].model_class},containerResolution:function(){return{...this.resolution,status:this.resolution.status[0]}},separateDetails:function(){return this.resolution.status.length>1&&"MergedCondaDependency"!=this.resolution.status[0].model_class}}};const vC=(0,m.Z)(_C,(function(){var e=this,t=e._self._c;return e.isContainerResolution?t("div",[t("ContainerResolutionDetails",{attrs:{resolution:e.containerResolution}})],1):t("b-card",[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e.singleTool||1==e.resolution.tool_ids.length?t("span",[e._v("Tool")]):t("span",[e._v("Tools")])]),e._v(" "),t("div",{staticClass:"col-8"},[e.singleTool?t("div",[t("ToolDisplay",{attrs:{"tool-id":e.resolution.tool_id}})],1):t("div",[t("Tools",{attrs:{"tool-ids":e.resolution.tool_ids,compact:!1}})],1)])]),e._v(" "),0==e.resolution.status.length?t("div",{staticClass:"row"},[t("i",[t("b",[e._v("No requirements to resolve, no explicit dependency resolution configured.")])])]):e.separateDetails?t("div",e._l(e.resolution.requirements,(function(n,i){return t("span",{key:i},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("Requirement",{attrs:{requirement:e.resolution.requirements[i]}})],1),e._v(" "),t("div",{staticClass:"col"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Status")]),e._v(" "),t("div",{staticClass:"col"},[t("StatusDisplay",{attrs:{status:e.resolution.status[i],compact:!1}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Dependency Resolver")]),e._v(" "),t("div",{staticClass:"col"},[t("DependencyResolver",{attrs:{"dependency-resolver":e.resolution.status[i].dependency_resolver}})],1)])])])])})),0):t("span",[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Requirements")]),e._v(" "),t("div",{staticClass:"col-8"},[t("Requirements",{attrs:{requirements:e.resolution.requirements}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Status")]),e._v(" "),t("div",{staticClass:"col-8"},[t("StatusDisplay",{attrs:{status:e.resolution.status[0],compact:!1,"all-statuses":e.resolution.status}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e._v("Dependency Resolver")]),e._v(" "),t("div",{staticClass:"col-8"},[t("DependencyResolver",{attrs:{"dependency-resolver":e.resolution.status[0].dependency_resolver}})],1)])])])}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const gC=Nu.default.keys({conda:"",tool_shed_packages:"",galaxy_packages:"",lmod:"",module:""}).map((e=>({value:e,text:e})));gC.splice(0,0,{value:null,text:"*any*"});const yC={components:{ResolutionDetails:vC},mixins:[cC],data:()=>({toggleState:!1,expandToolIds:!1,error:null,loading:!0,resolverType:null,resolverTypeOptions:gC,baseFields:[{key:"selected",label:""},{key:"requirement"},{key:"resolution"}],filterResolution:null,requirements:[]}),computed:{fields:function(){const e=this.baseFields.slice();return this.expandToolIds?e.splice(1,0,{key:"tool",label:"Tool"}):e.splice(3,0,{key:"tools",label:"Tools"}),e},items:function(){let e=this.requirements.filter((e=>{if(this.filterResolution){let t=0==e.status.length;for(const n of e.status)console.log(n),t=t||null==n.dependency_type;if("resolved"==this.filterResolution&&t)return!1;if("unresolved"==this.filterResolution&&!t)return!1}return!0})).map((e=>({selected:!1,requirements:e.requirements,status:e.status,tool_ids:e.tool_ids,_showDetails:!1})));if(this.expandToolIds){const t=[];for(const n of e)for(const e of n.tool_ids)t.push({...n,tool:e});e=t}return e},selectedToolIds:function(){const e=[];for(const t of this.items)if(t.selected){const n=t.tool_ids;n&&e.push(n[0])}return e}},watch:{resolverType:function(e){this.load()}},methods:{unchecked:function(){return this.items.filter((e=>!1===e.selected))},changeToggleCheckboxState(e){e&&1===this.unchecked().length?this.toggleState=!0:this.toggleState=!1},toggleSelectAll:function(e){this.items.forEach((t=>t.selected=e))},load(){this.loading=!0,async function(e){const t=e||{},n=`${(0,g.getAppRoot)()}api/dependency_resolvers/toolbox`;try{return(await v.Z.get(n,{params:t})).data}catch(e){(0,y.t)(e)}}(this.apiParams()).then((e=>{this.requirements=e,this.loading=!1})).catch(this.handleError)},apiParams(){const e={};return this.expandToolIds&&(e.index_by="tools"),this.resolverType&&(e.resolver_type=this.resolverType),e},installSelected(){this.loading=!0,async function(e,t){const n={...t,tool_ids:e},i=`${(0,g.getAppRoot)()}api/dependency_resolvers/toolbox/install`;try{return(await v.Z.post(i,n)).data}catch(e){(0,y.t)(e)}}(this.selectedToolIds).then((()=>{this.load()})).catch(this.handleError)},uninstallSelected(){this.loading=!0,async function(e,t){const n={...t,tool_ids:e},i=`${(0,g.getAppRoot)()}api/dependency_resolvers/toolbox/uninstall`;try{return(await v.Z.post(i,n)).data}catch(e){(0,y.t)(e)}}(this.selectedToolIds).then((()=>{this.load()})).catch(this.handleError)},setExpandToolIds(e){this.expandToolIds=e,this.load()}}},bC=yC;var wC=(0,m.Z)(bC,(function(){var e=this,t=e._self._c;return t("dependency-index-wrapper",{attrs:{error:e.error,loading:e.loading,"loading-message":"Loading tool requirement resolution information"},scopedSlots:e._u([{key:"header",fn:function(){return[t("b-row",{staticClass:"m-1"},[t("b-form",{attrs:{inline:""}},[t("b",[e._v("Resolution:")]),e._v(" "),t("label",{staticClass:"mr-sm-2",attrs:{for:"manage-resolver-type"}},[e._v("Using resolvers of type")]),e._v(" "),t("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-resolver-type",options:e.resolverTypeOptions},model:{value:e.resolverType,callback:function(t){e.resolverType=t},expression:"resolverType"}})],1)],1),e._v(" "),t("b-row",{staticClass:"m-1"},[t("b-form",{attrs:{inline:""}},[t("b",[e._v("Filter:")]),e._v(" "),t("label",{staticClass:"mr-sm-2",attrs:{for:"manage-filter-resolution"}},[e._v("Resolution")]),e._v(" "),t("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-filter-resolution"},model:{value:e.filterResolution,callback:function(t){e.filterResolution=t},expression:"filterResolution"}},[t("option",{domProps:{value:null}},[e._v("*any*")]),e._v(" "),t("option",{attrs:{value:"unresolved"}},[e._v("Unresolved")]),e._v(" "),t("option",{attrs:{value:"resolved"}},[e._v("Resolved")])])],1)],1)]},proxy:!0},{key:"body",fn:function(){return[t("b-table",{attrs:{id:"requirements-table",striped:"",fields:e.fields,items:e.items},on:{"row-clicked":e.showRowDetails},scopedSlots:e._u([{key:"cell(selected)",fn:function(n){return[t("b-form-checkbox",{on:{change:function(t){return e.changeToggleCheckboxState(t)}},model:{value:n.item.selected,callback:function(t){e.$set(n.item,"selected",t)},expression:"data.item.selected"}})]}},{key:"head(selected)",fn:function(){return[t("b-form-checkbox",{on:{change:e.toggleSelectAll},model:{value:e.toggleState,callback:function(t){e.toggleState=t},expression:"toggleState"}})]},proxy:!0},{key:"cell(requirement)",fn:function(e){return[t("requirements",{attrs:{requirements:e.item.requirements}})]}},{key:"cell(resolution)",fn:function(e){return[t("statuses",{attrs:{statuses:e.item.status}})]}},{key:"cell(tools)",fn:function(e){return[t("tools",{attrs:{"tool-ids":e.item.tool_ids}})]}},{key:"cell(tool)",fn:function(e){return[t("tool-display",{attrs:{"tool-id":e.item.tool}})]}},{key:"row-details",fn:function(e){return[t("ResolutionDetails",{attrs:{resolution:e.item}})]}}])})]},proxy:!0},{key:"actions",fn:function(){return[t("b-row",{staticClass:"m-1"},[t("b-button",{staticClass:"m-1",on:{click:e.installSelected}},[t("span",{staticClass:"fa fa-plus"}),e._v(" "),e._v("\n                Install\n            ")]),e._v(" "),t("b-button",{staticClass:"m-1",on:{click:e.uninstallSelected}},[t("span",{staticClass:"fa fa-minus"}),e._v(" "),e._v("\n                Uninstall\n            ")]),e._v(" "),e.expandToolIds?e._e():t("b-button",{staticClass:"m-1",on:{click:function(t){return e.setExpandToolIds(!0)}}},[t("span",{staticClass:"fa fa-chevron-down"}),e._v("\n                Expand Tools\n            ")]),e._v(" "),e.expandToolIds?t("b-button",{staticClass:"m-1",on:{click:function(t){return e.setExpandToolIds(!1)}}},[t("span",{staticClass:"fa fa-chevron-up"}),e._v("\n                Group by Requirements\n            ")]):e._e()],1)]},proxy:!0}])})}),[],!1,null,null,null);const kC=wC.exports;const CC={components:{DependencyIndexWrapper:sC},data:()=>({error:null,loading:!0,fields:[{key:"selected",label:""},{key:"path"}],paths:[]}),computed:{items:function(){return this.paths.map((e=>({path:e,selected:!1,_showDetails:!1})))},hasSelectedPaths:function(){for(const e of this.items)if(e.selected)return!0;return!1}},created:function(){this.load()},methods:{load(){(async function(){const e={},t=`${(0,g.getAppRoot)()}api/dependency_resolvers/unused_paths`;try{return(await v.Z.get(t,{params:e})).data}catch(e){(0,y.t)(e)}})().then((e=>{this.paths=e,this.loading=!1})).catch(this.handleError)},deleteSelected(){const e=[];for(const t of this.items)t.selected&&e.push(t.path);this.loading=!0,async function(e){const t=`${(0,g.getAppRoot)()}api/dependency_resolvers/unused_paths`;try{await v.Z.put(t,{paths:e})}catch(e){(0,y.t)(e)}}(e).then((()=>{this.load()})).catch(this.handleError)},handleError(e){this.error=e}}};var xC=(0,m.Z)(CC,(function(){var e=this,t=e._self._c;return t("DependencyIndexWrapper",{attrs:{loading:e.loading,error:e.error,"loading-message":"Loading tool dependency resolver information"},scopedSlots:e._u([{key:"body",fn:function(){return[t("b-table",{attrs:{id:"unused-paths-table",striped:"",fields:e.fields,items:e.items},scopedSlots:e._u([{key:"cell(selected)",fn:function(n){return[t("b-form-checkbox",{model:{value:n.item.selected,callback:function(t){e.$set(n.item,"selected",t)},expression:"data.item.selected"}})]}}])})]},proxy:!0},{key:"actions",fn:function(){return[t("div",[t("b-button",{on:{click:e.deleteSelected}},[e._v(" Delete Selected Environments ")])],1)]},proxy:!0}])})}),[],!1,null,null,null);const SC=xC.exports;a.default.use(d.ZPm);const MC={components:{ContainerIndex:mC,ResolutionIndex:kC,UnusedIndex:SC},data:function(){return{mode:"dependencies"}},methods:{setMode(e){this.mode=e}}};const TC=(0,m.Z)(MC,(function(){var e=this,t=e._self._c;return t("div",[t("b-nav",{attrs:{tabs:""}},[t("b-nav-item",{attrs:{active:"dependencies"==e.mode},on:{click:function(t){return e.setMode("dependencies")}}},[e._v("Dependencies")]),e._v(" "),t("b-nav-item",{attrs:{active:"containers"==e.mode},on:{click:function(t){return e.setMode("containers")}}},[e._v("Containers")]),e._v(" "),t("b-nav-item",{attrs:{active:"unused"==e.mode},on:{click:function(t){return e.setMode("unused")}}},[e._v("Unused")])],1),e._v(" "),"dependencies"==e.mode?t("ResolutionIndex"):"containers"==e.mode?t("ContainerIndex"):"unused"==e.mode?t("UnusedIndex"):e._e()],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const LC={props:{icon:{type:String},tooltip:{type:String},plural:{type:String},success:{type:String},fields:{type:Array},getter:{type:Function},setter:{type:Function}},data:()=>({items:[],busy:!1,messageText:null,messageVariant:null}),computed:{tooltipAll:function(){return`${this.tooltip} all`},itemsIndex:function(){return this.items.reduce(((e,t)=>(e[t.id]=t,e)),{})},itemsAll:function(){return this.items.map((e=>e.id))},itemsVisible:function(){return this.items.length>0},itemsLength:function(){return this.items.length},messageVisible:function(){return null!=this.messageText}},created(){this.messageText=null,this.getter().then((e=>{this.items=e.data,this.itemsVisible||(this.messageVariant="warning",this.messageText=`No ${this.plural} available.`)})).catch((e=>{this._errorMessage(e)}))},methods:{executeAll:function(){this.execute(this.itemsAll)},execute:function(e){this.busy=!0,this.messageVariant="warning",this.messageText="Executing request. Please wait...",this._highlightRows(this.itemsAll,"default"),this.setter(e).then((e=>{const t=e.data;t&&(this.messageVariant="info",this.messageText=t.message,this._highlightRows(t.failed,"danger"),this._highlightRows(t[this.success],"success")),this.busy=!1})).catch((e=>{this._errorMessage(e),this.busy=!1}))},_highlightRows:function(e,t){if(e)for(const n of e){const e=this.itemsIndex[n];e&&(e._rowVariant=t)}},_errorMessage:function(e){const t=e&&e.response&&e.response.data&&e.response.data.err_msg;this.messageText=t||"Request failed for an unknown reason.",this.messageVariant="danger"}}},DC=LC;var EC=(0,m.Z)(DC,(function(){var e=this,t=e._self._c;return t("div",[t("b-alert",{attrs:{show:e.messageVisible,variant:e.messageVariant}},[e._v(" "+e._s(e.messageText)+" ")]),e._v(" "),e.itemsVisible?t("div",{staticClass:"card-header"},[e._v("\n        There are "+e._s(e.itemsLength)+"\n        "),t("b-button",{attrs:{size:"sm",disabled:e.busy,title:e.tooltipAll,"data-placement":"bottom"},on:{click:function(t){return t.preventDefault(),e.executeAll()}}},[t("span",{class:e.icon})]),e._v("\n        "+e._s(e.plural)+" available.\n    ")],1):e._e(),e._v(" "),e.itemsVisible?t("b-table",{attrs:{striped:"","no-sort-reset":"",fields:e.fields,items:e.items},scopedSlots:e._u([{key:"cell(execute)",fn:function(n){return[t("b-button",{attrs:{size:"sm",disabled:e.busy,title:e.tooltip,"data-placement":"bottom"},on:{click:function(t){return t.preventDefault(),e.execute([n.item.id])}}},[t("span",{class:e.icon})])]}},{key:"cell(links)",fn:function(n){return e._l(n.item.links,(function(n){return t("li",{key:n.name},[e._v("\n                "+e._s(n.name)+"\n            ")])}))}}],null,!1,2172873526)}):e._e()],1)}),[],!1,null,null,null);const OC=EC.exports,AC={components:{BaseList:OC},data:()=>({fields:[{key:"execute",label:"Refresh"},{key:"name",sortable:!0},{key:"id",sortable:!0},{key:"version"},{key:"links"}],getter:Pk,setter:Rk})};const IC=(0,m.Z)(AC,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"display-applications-heading"}},[t("h1",{staticClass:"h-lg",attrs:{id:"display-applications-heading"}},[e._v("Display Applications")]),e._v(" "),t("BaseList",{attrs:{fields:e.fields,icon:"fa fa-sync",tooltip:"Refresh",plural:"display applications",success:"reloaded",getter:e.getter,setter:e.setter}})],1)}),[],!1,null,null,null).exports;const PC={data:()=>({errorStack:[],errorStackLoaded:!1,errorStackAttributes:[{key:"time",sortable:!0},{key:"phase",sortable:!0},{key:"file",sortable:!0},{key:"error"}],messageText:null}),computed:{errorStackVisible:function(){return this.errorStack.length>0},messageVisible:function(){return null!=this.messageText},infoVisible:function(){return!this.errorStackVisible&&this.errorStackLoaded}},created(){(function(){const e=`${(0,g.getAppRoot)()}api/tools/error_stack`;return v.Z.get(e)})().then((e=>{this.errorStack=e.data,this.errorStackLoaded=!0})).catch((e=>{const t=e&&e.response&&e.response.data&&e.response.data.err_msg;this.messageText=t||"Request failed for an unknown reason."}))}};const RC=(0,m.Z)(PC,(function(){var e=this,t=e._self._c;return t("div",[t("b-alert",{attrs:{show:e.messageVisible,variant:"danger"}},[e._v(" "+e._s(e.messageText)+" ")]),e._v(" "),t("b-alert",{attrs:{show:e.infoVisible,variant:"info"}},[e._v(" No errors available. ")]),e._v(" "),e.errorStackVisible?t("b-table",{attrs:{striped:"",fields:e.errorStackAttributes,items:e.errorStack}}):e._e()],1)}),[],!1,null,null,null).exports;u.vI.add(h.xf3,h.ILF,h.klh);const jC={components:{Heading:Dt},props:{isToolshedInstalled:{type:Boolean,default:!1}}};const YC=(0,m.Z)(jC,(function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Administration")]),e._v(" "),e._m(0),e._v(" "),t("Heading",{attrs:{h2:"",icon:"fa-server",size:"md"}},[e._v("Server")]),e._v(" "),t("ul",[t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/data_types"}},[e._v("Data Types")])],1),e._v("\n            - See all datatypes available in this Galaxy.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/data_tables"}},[e._v("Data Tables")])],1),e._v("\n            - See all data tables available in this Galaxy.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/display_applications"}},[e._v("Display Applications")])],1),e._v("\n            - See all display applications configured in this Galaxy.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/jobs"}},[e._v("Jobs")])],1),e._v("\n            - Display all jobs that are currently not finished (i.e., their state is new, waiting, queued, or\n            running). Administrators are able to cleanly stop long-running jobs.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/data_manager"}},[e._v("Local Data")])],1),e._v("\n            - Manage the reference (and other) data that is stored within Tool Data Tables. See\n            "),t("a",{attrs:{href:"https://galaxyproject.org/admin/tools/data-managers",target:"_blank"}},[e._v("wiki")]),e._v(" for details.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/notifications"}},[e._v("Notifications and Broadcasts")])],1),e._v("\n            - Manage the notifications and broadcast messages that are displayed to users.\n        ")])]),e._v(" "),t("Heading",{attrs:{h2:"",icon:"fa-user",size:"md"}},[e._v("User Management")]),e._v(" "),t("ul",[t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/users"}},[e._v("Users")])],1),e._v("\n            - The primary user management interface, displaying information associated with each user and providing\n            operations for resetting passwords, updating user information, impersonating a user, and more.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/quotas"}},[e._v("Quotas")])],1),e._v("\n            - Manage user space quotas. See\n            "),t("a",{attrs:{href:"https://galaxyproject.org/admin/disk-quotas",target:"_blank"}},[e._v("wiki")]),e._v(" for details.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/groups"}},[e._v("Groups")])],1),e._v("\n            - A view of all groups along with the members of the group and the roles associated with each group.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/roles"}},[e._v("Roles")])],1),e._v("\n            - A view of all non-private roles along with the role type, and the users and groups that are\n            associated, with the role. Also includes a view of the data library datasets that are associated with\n            the role and the permissions applied to each dataset.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/forms"}},[e._v("Forms")])],1),e._v("\n            - Manage local form definitions.\n        ")])]),e._v(" "),t("Heading",{attrs:{h2:"",icon:"fa-wrench",size:"md"}},[e._v("Tool Management")]),e._v(" "),t("ul",[t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/sanitize_allow"}},[e._v("Manage Allowlist")])],1),e._v("\n            - Manage HTML rendering for installed tools' output datasets.\n        ")]),e._v(" "),e.isToolshedInstalled?t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/toolshed"}},[e._v("Install and Uninstall")])],1),e._v("\n            - Search and install new tools and other Galaxy utilities from the Tool Shed. See\n            "),t("a",{attrs:{href:"https://galaxyproject.org/admin/tools/add-tool-from-toolshed-tutorial",target:"_blank"}},[e._v("the tutorial")]),e._v(".\n        ")]):e._e(),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/reset_metadata"}},[e._v("Manage Metadata")])],1),e._v("\n            - Select on which repositories you want to reset metadata.\n        ")]),e._v(" "),t("li",[t("strong",[t("router-link",{attrs:{to:"/admin/tool_versions"}},[e._v("View Lineage")])],1),e._v("\n            - A view of a version lineages for all installed tools. Useful for debugging.\n        ")])])],1)}),[function(){var e=this,t=e._self._c;return t("p",[e._v("\n        Please visit\n\n        "),t("a",{attrs:{href:"https://galaxyproject.org/admin",target:"_blank"}},[e._v("the Galaxy administration hub")]),e._v(" to learn how to\n        keep your Galaxy in best shape.\n    ")])}],!1,null,null,null).exports;const HC={components:{UtcDate:J.Z,JobDetails:Ed,LoadingSpan:z.Z},props:{tableCaption:{type:String,required:!0},fields:{required:!0},items:{required:!0},busy:{type:Boolean,required:!0},loading:{type:Boolean,default:!1},noItemsMessage:{type:String,default:"No jobs to display."},value:{}},data(){return{innerValue:this.value}},watch:{innerValue(e){this.$emit("input",e)},items(e){this.setCellVariants(e)}},created(){this.setCellVariants(this.items)},methods:{setCellVariants(e){e.forEach((e=>{e._cellVariants={state:this.translateState(e.state)}}))},toggleDetails(e){this.$set(e,"_showDetails",!e._showDetails)},translateState:e=>({ok:"success",error:"danger",new:"primary",queued:"secondary",running:"info",upload:"dark"}[e]||"primary")}};var NC=(0,m.Z)(HC,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"jobs-table-wrapper"},[t("b-table",{staticClass:"jobs-table",attrs:{fields:e.fields,items:e.items,hover:"",responsive:"","no-sort-reset":"",striped:"","caption-top":"",busy:e.busy,"show-empty":""},on:{"row-clicked":e.toggleDetails},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("\n            "+e._s(e.tableCaption)+"\n        ")]},proxy:!0},{key:"empty",fn:function(){return[e.loading?t("LoadingSpan",{attrs:{message:"Loading jobs"}}):t("b-alert",{staticClass:"no-jobs",attrs:{variant:"info",show:""}},[e._v("\n                "+e._s(e.noItemsMessage)+"\n            ")])]},proxy:!0},{key:"cell(update_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"row-details",fn:function(e){return[t("JobDetails",{attrs:{job:e.item}})]}},{key:"cell(user_email)",fn:function(n){return[t("a",{staticClass:"job-filter-link-user",attrs:{"data-user":n.value},on:{click:function(t){return e.$emit("user-clicked",n.value)}}},[e._v(e._s(n.value))])]}},{key:"cell(tool_id)",fn:function(n){return[t("a",{staticClass:"job-filter-link-tool-id",attrs:{"data-tool-id":n.value},on:{click:function(t){return e.$emit("tool-clicked",n.value)}}},[e._v(e._s(n.value))])]}},{key:"cell(job_runner_name)",fn:function(n){return[t("a",{staticClass:"job-filter-link-runner",attrs:{"data-runner":n.value},on:{click:function(t){return e.$emit("runner-clicked",n.value)}}},[e._v(e._s(n.value))])]}},{key:"cell(handler)",fn:function(n){return[t("a",{staticClass:"job-filter-link-handler",attrs:{"data-handler":n.handler},on:{click:function(t){return e.$emit("handler-clicked",n.value)}}},[e._v(e._s(n.value))])]}},e._l(e.$scopedSlots,(function(t,n){return{key:n,fn:function(t){return[e._t(n,null,null,t)]}}}))],null,!0),model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}})],1)}),[],!1,null,null,null);const FC=NC.exports;var BC=n(4060),$C=n(22418),zC=n(42965),WC=n(53741),UC=n(94975),VC=n(83286);const qC={props:{value:{required:!0},delay:{type:Number,required:!1,default:500}},data:()=>({previousEmit:null,incomingValue:null}),methods:{sendUpdate(e){e!==this.previousEmit&&(this.$emit("input",e),this.previousEmit=e)}},watch:{incomingValue(e){0===this.delay&&this.sendUpdate(e)}},beforeMount(){if(0!==this.delay){const e=this.watch$("incomingValue").pipe((0,zC.b)(this.delay),(0,WC.x)(),(0,UC.h)((e=>null!==e&&e!==this.value)),(0,VC.x)((()=>this.sendUpdate(this.incomingValue))));this.$subscribeTo(e,(e=>this.sendUpdate(e)))}},render(){return this.$scopedSlots.default({value:this.value,input:e=>{this.incomingValue=e&&e.target?e.target.value:e}})}};u.vI.add(h.NBC,h.Psp);const ZC={components:{DebouncedInput:qC,BInputGroup:BC.w,BInputGroupAppend:$C.B,BButton:jn.T,BModal:Nr.N,FontAwesomeIcon:p.GN},props:{id:{type:String,required:!0},placeholder:{type:String,required:!0},helpHtml:{type:String,required:!0},debounceDelay:{type:Number,default:500},size:{type:String,default:"sm"},value:{type:String,required:!0}},data(){return{showHelp:!1,localFilter:this.value}},watch:{value(e){this.localFilter=e},localFilter(e){this.$emit("input",e)}},methods:{onHelp(){this.showHelp=!0},onReset(){this.localFilter=""}}};const GC={components:{IndexFilter:(0,m.Z)(ZC,(function(){var e=this,t=e._self._c;return t("span",[t("BInputGroup",[t("DebouncedInput",{attrs:{delay:e.debounceDelay},scopedSlots:e._u([{key:"default",fn:function({value:n,input:i}){return[t("b-form-input",{staticClass:"search-query index-filter-query",attrs:{id:e.id,name:"query",value:n,autocomplete:"off",placeholder:e._f("localize")(e.placeholder),"data-description":"filter index input",size:e.size},on:{input:i,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onReset.apply(null,arguments)}}})]}}]),model:{value:e.localFilter,callback:function(t){e.localFilter=t},expression:"localFilter"}}),e._v(" "),t("BInputGroupAppend",[t("BButton",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-haspopup":"true",title:"Advanced Filtering Help",size:e.size},on:{click:e.onHelp}},[t("FontAwesomeIcon",{attrs:{icon:"question"}})],1),e._v(" "),t("BButton",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-haspopup":"true",title:"Clear Filters (esc)",size:e.size},on:{click:e.onReset}},[t("FontAwesomeIcon",{attrs:{icon:"times"}})],1)],1)],1),e._v(" "),t("BModal",{attrs:{title:"Filtering Options Help","ok-only":""},model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}},[t("div",{domProps:{innerHTML:e._s(e.helpHtml)}})])],1)}),[],!1,null,null,null).exports},props:{inputDebounceDelay:{type:Number,default:500}},data:()=>({filter:"",implicitFilter:null,helpHtml:null}),computed:{isFiltered(){return Boolean(this.filter)},effectiveFilter(){let e=this.filter;const t=this.implicitFilter;return t&&e?e=`${t} ${e}`:t&&(e=t),e},filterAttrs(){return{"debounce-delay":this.inputDebounceDelay,placeholder:this.titleSearch,"help-html":this.helpHtml}}},methods:{appendTagFilter(e,t){this.appendFilter(`${e}:'${t}'`)},appendFilter(e,t=!1){const n=t?"":this.filter;0===n.length?this.filter=e:n.indexOf(e)<0&&(this.filter=`${e} ${n}`)}}},JC=[{key:"id",label:"Encoded Job ID",sortable:!0},{key:"decoded_job_id",label:"Decoded Job ID",sortable:!0},{key:"user_email"},{key:"tool_id",label:"Tool",tdClass:["break-word"]},{key:"state"},{key:"handler"},{key:"job_runner_name",label:"Job Runner"},{key:"external_id",label:"PID/Cluster ID",sortable:!0}];const KC=X._.path("/api/job_lock").method("get").create(),XC=X._.path("/api/job_lock").method("put").create();var QC=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ex=(0,a.defineComponent)({__name:"JobLock",setup(e){const t=(0,a.ref)(!1),n=(0,a.ref)(!0);return(0,a.watch)(t,(e=>QC(this,void 0,void 0,(function*(){n.value=!0;const{data:e}=yield XC({active:t.value});t.value=e.active,n.value=!1})))),(0,a.onMounted)((()=>QC(this,void 0,void 0,(function*(){const e=yield KC({});t.value=e.data.active,n.value=!1})))),{__sfc:!0,jobLock:t,jobLockUpdating:n}}}),tx=ex;const nx=(0,m.Z)(tx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-form-group",[t("b-form-checkbox",{attrs:{id:"prevent-job-dispatching",disabled:n.jobLockUpdating,switch:"",size:"lg"},model:{value:n.jobLock,callback:function(e){n.jobLock=e},expression:"jobLock"}},[e._v("\n        Job dispatching is currently\n        "),t("strong",[e._v(e._s(n.jobLock?"locked":"unlocked"))])])],1)}),[],!1,null,null,null).exports;const ix={components:{JobLock:nx,JobsTable:FC,Heading:Dt},mixins:[GC],data:()=>({jobs:[],finishedJobs:[],unfinishedJobs:[],jobsItemsModel:[],finishedJobFields:[...JC,{key:"update_time",label:"Finished",sortable:!0}],unfinishedJobFields:[{key:"selected",label:""},...JC,{key:"update_time",label:"Last Update",sortable:!0}],selectedStopJobIds:[],selectedJobId:null,allSelected:!1,indeterminate:!1,stopMessage:"",message:"",status:"info",loading:!0,busy:!0,cutoffMin:5,showAllRunning:!1,titleSearch:"search jobs",helpHtml:"<div>\n<p>This textbox box can be used to filter the jobs displayed.\n\n<p>Text entered here will be searched against job user, tool ID, job runner, and handler. Additionally,\nadvanced filtering tags can be used to refine the search more precisely. Tags are of the form\n<code>&lt;tag_name&gt;:&lt;tag_value&gt;</code> or <code>&lt;tag_name&gt;:'&lt;tag_value&gt;'</code>.\nFor instance to search just for jobs with <code>cat1</code> in the tool name, <code>tool:cat1</code> can be used.\nNotice by default the search is not case-sensitive.\n\n<p>If the quoted version of tag is used, the search is case sensitive and only full matches will be\nreturned. So <code>tool:'cat1'</code> would show only jobs from the <code>cat1</code> tool exactly.</p>\n\n<p>The available tags are:\n<dl>\n    <dt><code>user</code></dt>\n    <dd>This filters the job index to contain only jobs executed by matching user(s). You may also just click on a user in the list of jobs to filter on that exact user using this directly.</dd>\n    <dt><code>handler</code></dt>\n    <dd>This filters the job index to contain only jobs executed on matching handler(s).  You may also just click on a handler in the list of jobs to filter on that exact user using this directly.</dd>\n    <dt><code>runner</code></dt>\n    <dd>This filters the job index to contain only jobs executed on matching job runner(s).  You may also just click on a runner in the list of jobs to filter on that exact user using this directly.</dd>\n    <dt><code>tool</code></dt>\n    <dd>This filters the job index to contain only jobs from the matching tool(s).  You may also just click on a tool in the list of jobs to filter on that exact user using this directly.</dd>\n</dl>\n</div>\n"}),computed:{finishedTableCaption(){return`These jobs have completed in the previous ${this.cutoffMin} minutes.`},runningTableCaption(){return`These jobs are unfinished and have had their state updated in the previous ${this.cutoffMin} minutes. For currently running jobs, the "Last Update" column should indicate the runtime so far.`},finishedNoJobsMessage(){return`There are no recently finished jobs to show with current cutoff time of ${this.cutoffMin} minutes.`},runningNoJobsMessage(){let e="There are no unfinished jobs";return this.showAllRunning||(e+=` to show with current cutoff time of ${this.cutoffMin} minutes`),e+=".",e}},watch:{filter(e){this.update()},cutoffMin(e){this.update()},selectedStopJobIds(e){0===e.length?(this.indeterminate=!1,this.allSelected=!1):e.length===this.jobsItemsModel.length?(this.indeterminate=!1,this.allSelected=!0):(this.indeterminate=!0,this.allSelected=!1)},jobs(e){const t=[],n=[];e.forEach((e=>{hd.Z.NON_TERMINAL_STATES.includes(e.state)?t.push(e):n.push(e)})),this.unfinishedJobs=t,this.finishedJobs=n}},created(){this.update()},methods:{async update(){this.busy=!0;const e={view:"admin_job_list"};if(this.showAllRunning)e.state="running";else{const t=Math.floor(this.cutoffMin),n=new Date(Date.now()-60*t*1e3).toISOString();e.date_range_min=`${n}`}this.filter&&(e.search=this.filter);const t={root:(0,g.getAppRoot)(),...e};try{const e=await(0,Ht.SA)(t);this.jobs=e,this.loading=!1,this.busy=!1,this.status="info"}catch(e){console.log(e),this.message=(0,y.a)(e),this.status="danger"}},onRefresh(){this.update()},onStopJobs(){v.Z.all(this.selectedStopJobIds.map((e=>function(e,t){const n=`${(0,g.getAppRoot)()}api/jobs/${e}`;return v.Z.delete(n,{data:{message:t}})}(e,this.stopMessage)))).then((e=>{this.update(),this.selectedStopJobIds=[],this.stopMessage=""}))},toggleAll(e){this.selectedStopJobIds=e?this.jobsItemsModel.reduce(((e,t)=>[...e,t.id]),[]):[]}}};var ox=(0,m.Z)(ix,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"aria-labelledby":"jobs-title"}},[t("h1",{staticClass:"h-lg",attrs:{id:"jobs-title"}},[e._v("Jobs")]),e._v(" "),e.message?t("b-alert",{attrs:{variant:e.status,show:""}},[e._v("\n        "+e._s(e.message)+"\n    ")]):e._e(),e._v(" "),t("Heading",{attrs:{h2:"",size:"md",separator:""}},[e._v("Job Lock")]),e._v(" "),t("JobLock"),e._v(" "),t("Heading",{attrs:{h2:"",size:"md",separator:""}},[e._v("Job Overview")]),e._v(" "),t("p",[e._v("\n        Below unfinished jobs are displayed (in the 'new', 'queued', 'running', or 'upload' states) and recently\n        completed jobs (in 'error' or 'ok' states).\n    ")]),e._v(" "),e._m(0),e._v(" "),t("b-row",[t("b-col",{staticClass:"col-sm-4"},[t("b-form-group",{attrs:{description:"Select whether or not to use the cutoff below."}},[t("b-form-checkbox",{attrs:{id:"show-all-running",switch:"",size:"lg"},on:{change:e.update},model:{value:e.showAllRunning,callback:function(t){e.showAllRunning=t},expression:"showAllRunning"}},[e._v("\n                    "+e._s(e.showAllRunning?"Showing all unfinished jobs":"Time cutoff applied to query")+"\n                ")])],1),e._v(" "),t("b-form",{attrs:{name:"jobs"},on:{submit:function(t){return t.preventDefault(),e.onRefresh.apply(null,arguments)}}},[t("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!e.showAllRunning,expression:"!showAllRunning"}],attrs:{id:"cutoff",label:"Cutoff in minutes",description:"Display jobs that had their state updated in the given time period."}},[t("b-input-group",[t("b-form-input",{attrs:{id:"cutoff",type:"number"},model:{value:e.cutoffMin,callback:function(t){e.cutoffMin=t},expression:"cutoffMin"}})],1)],1)],1),e._v(" "),t("b-form-group",{attrs:{description:"Use strings or regular expressions to search jobs."}},[t("IndexFilter",e._b({attrs:{id:"job-search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},"IndexFilter",e.filterAttrs,!1))],1)],1)],1),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.unfinishedJobs.length&&e.selectedStopJobIds.length?t("b-form",{on:{submit:function(t){return t.preventDefault(),e.onStopJobs.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Stop Selected Jobs",description:"Stop message will be displayed to the user"}},[t("b-input-group",[t("b-form-input",{attrs:{id:"stop-message",placeholder:"Stop message",required:""},model:{value:e.stopMessage,callback:function(t){e.stopMessage=t},expression:"stopMessage"}}),e._v(" "),t("b-input-group-append",[t("b-btn",{attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1)],1):e._e()],1),e._v(" "),t("h3",{staticClass:"mb-0 h-sm"},[e._v("Unfinished Jobs")]),e._v(" "),t("JobsTable",{attrs:{fields:e.unfinishedJobFields,items:e.unfinishedJobs,"table-caption":e.runningTableCaption,"no-items-message":e.runningNoJobsMessage,loading:e.loading,busy:e.busy},scopedSlots:e._u([{key:"head(selected)",fn:function(){return[t("b-form-checkbox",{attrs:{indeterminate:e.indeterminate},on:{change:e.toggleAll},model:{value:e.allSelected,callback:function(t){e.allSelected=t},expression:"allSelected"}})]},proxy:!0},{key:"cell(selected)",fn:function(n){return[t("b-form-checkbox",{key:n.index,attrs:{checked:e.allSelected,value:n.item.id},model:{value:e.selectedStopJobIds,callback:function(t){e.selectedStopJobIds=t},expression:"selectedStopJobIds"}})]}}]),model:{value:e.jobsItemsModel,callback:function(t){e.jobsItemsModel=t},expression:"jobsItemsModel"}}),e._v(" "),e.showAllRunning?e._e():[t("h3",{staticClass:"mb-0 h-sm"},[e._v("Finished Jobs")]),e._v(" "),t("JobsTable",{attrs:{"table-caption":e.finishedTableCaption,fields:e.finishedJobFields,items:e.finishedJobs,"no-items-message":e.finishedNoJobsMessage,loading:e.loading,busy:e.busy},on:{"tool-clicked":t=>e.appendTagFilter("tool",t),"runner-clicked":t=>e.appendTagFilter("runner",t),"handler-clicked":t=>e.appendTagFilter("handler",t),"user-clicked":t=>e.appendTagFilter("user",t)}})]],2)}),[function(){var e=this,t=e._self._c;return t("p",[e._v('\n        You may choose to stop some of the displayed jobs and provide the user with a message. Your stop message\n        will be displayed to the user as: "This job was stopped by an administrator:\n        '),t("strong",[e._v("<YOUR MESSAGE>")]),e._v('\n        For more information or help, report this error".\n    ')])}],!1,null,null,null);const ax=ox.exports;const sx=(0,a.defineComponent)({__name:"GDateTime",props:{value:null},emits:["input"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>`${n.value.getFullYear().toString().padStart(4,"0")}-${(n.value.getMonth()+1).toString().padStart(2,"0")}-${n.value.getDate().toString().padStart(2,"0")}`)),o=(0,a.computed)((()=>`${n.value.getHours().toString().padStart(2,"0")}:${n.value.getMinutes().toString().padStart(2,"0")}`));return{__sfc:!0,props:n,emit:t,date:i,time:o,updateDate:function(e){const i=e.match(/(\d{4})-(\d{2})-(\d{2})/);if((null==i?void 0:i.length)&&i.length>=4){const[e,o,a,s]=i,r=new Date(n.value);try{r.setFullYear(parseInt(o)),r.setDate(1),r.setMonth(0),r.setMonth(parseInt(a)-1),r.setDate(parseInt(s))}finally{t("input",r)}}},updateTime:function(e){const i=e.match(/(\d{2}):(\d{2})/);if((null==i?void 0:i.length)&&i.length>=3){const[e,o,a]=i,s=new Date(n.value);try{s.setHours(parseInt(o),parseInt(a))}finally{t("input",s)}}},BFormInput:to.e,BInputGroup:BC.w}}}),rx=sx;const lx=(0,m.Z)(rx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BInputGroup,[t(n.BFormInput,{attrs:{value:n.date,type:"date"},on:{input:n.updateDate}}),e._v(" "),t(n.BFormInput,{attrs:{value:n.time,type:"time"},on:{input:n.updateTime}})],1)}),[],!1,null,null,null).exports;const dx=(0,a.defineComponent)({__name:"BroadcastContainer",props:{options:null},setup(e){const t=e;u.vI.add(h.sqG,h.NBC,h._tD,h.A35,h.eHv,h.RLE);const n=ca(),{renderMarkdown:i}=(0,Vt.A)({openLinksInNewPage:!0}),o=(0,a.computed)((()=>!t.options.previewMode&&t.options.broadcasts.length>1)),s=(0,a.ref)(0),r=(0,a.computed)({get:()=>s.value,set:e=>{s.value=e,l()}});function l(){s.value<0?s.value=f.value.length-1:s.value>=f.value.length&&(s.value=0)}const d=(0,a.computed)((()=>(0,Sh.IS)(f.value[r.value])));function c(e,t){const n=e=>(0,fe.EQ)(e,{info:()=>0,warning:()=>1,urgent:()=>2}),i=n(e.variant),o=n(t.variant);return i!==o?o-i:new Date(t.publication_time).getTime()-new Date(e.publication_time).getTime()}const f=(0,a.computed)((()=>{if(t.options.previewMode)return[t.options.broadcast];{const e=[...t.options.broadcasts];return e.sort(c),e}}));return(0,a.watch)((()=>f.value),(()=>{l()})),{__sfc:!0,props:t,broadcastsStore:n,renderMarkdown:i,multiple:o,page:s,currentPage:r,checkPageInBounds:l,displayedBroadcast:d,sortByImportanceAndPublicationTime:c,sortedBroadcasts:f,actionLinkBind:function(e){return e.startsWith("/")?{to:e}:{href:e}},dismiss:function(){t.options.previewMode||n.dismissBroadcast(d.value)},FontAwesomeIcon:p.GN,BButton:jn.T,Heading:Dt}}});const cx=(0,m.Z)(dx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"broadcast-container shadow",class:{single:!n.multiple,preview:n.props.options.previewMode,warning:"warning"===n.displayedBroadcast.variant,urgent:"urgent"===n.displayedBroadcast.variant}},[n.multiple?t(n.BButton,{staticClass:"arrow left inline-icon-button area-l",attrs:{title:"Previous"},on:{click:function(e){n.currentPage-=1}}},[t(n.FontAwesomeIcon,{attrs:{"fixed-width":"",icon:"fa-chevron-left"}})],1):e._e(),e._v(" "),t("div",{staticClass:"info-icon area-i"},["warning"===n.displayedBroadcast.variant?t(n.FontAwesomeIcon,{staticClass:"warning",attrs:{icon:"fa-exclamation-triangle"}}):e._e(),e._v(" "),"urgent"===n.displayedBroadcast.variant?t(n.FontAwesomeIcon,{staticClass:"urgent",attrs:{icon:"fa-exclamation-circle"}}):e._e()],1),e._v(" "),t("section",{staticClass:"main-content area-m"},[t(n.Heading,{attrs:{h2:""}},[e._v(e._s(n.displayedBroadcast.content.subject))]),e._v(" "),t("div",{staticClass:"message mb-1",domProps:{innerHTML:e._s(n.renderMarkdown(n.displayedBroadcast.content.message))}}),e._v(" "),t("div",{staticClass:"bottom-row"},[t("div",{staticClass:"action-links"},e._l(n.displayedBroadcast.content.action_links,(function(i,o){return t(n.BButton,e._b({key:`${n.displayedBroadcast.id}-${o}`,attrs:{variant:"urgent"===n.displayedBroadcast.variant?"danger":"primary"}},"BButton",n.actionLinkBind(i.link),!1),[e._v("\n                    "+e._s(i.action_name)+"\n                ")])})),1),e._v(" "),n.multiple?t("div",{staticClass:"page-indicator"},[e._v(e._s(n.currentPage+1)+" / "+e._s(n.sortedBroadcasts.length))]):e._e()])],1),e._v(" "),n.multiple?t(n.BButton,{staticClass:"arrow right inline-icon-button area-r",attrs:{title:"Next"},on:{click:function(e){n.currentPage+=1}}},[t(n.FontAwesomeIcon,{attrs:{"fixed-width":"",icon:"fa-chevron-right"}})],1):e._e(),e._v(" "),t(n.BButton,{staticClass:"dismiss-button inline-icon-button area-x",attrs:{title:"Dismiss"},on:{click:n.dismiss}},[t(n.FontAwesomeIcon,{attrs:{"fixed-width":"",icon:"fa-times"}})],1)],1)}),[],!1,null,"3dda289a",null).exports;var ux=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const hx=(0,a.defineComponent)({__name:"BroadcastForm",props:{id:{type:String,default:null}},setup(e){const t=e,n=(0,Nn.tv)(),i=(0,a.computed)((()=>t.id?"Edit Broadcast":"New Broadcast")),o=(0,a.ref)(!1),s=(0,a.ref)({source:"admin",variant:"info",content:{subject:"",message:""},expiration_time:new Date(Date.now()+15552e6).toISOString().slice(0,16),publication_time:(new Date).toISOString().slice(0,16)}),r=(0,a.ref)(!1),l=(0,a.computed)((()=>""!==s.value.content.subject&&""!==s.value.content.message)),d=(0,a.computed)({get:()=>new Date(`${s.value.publication_time}Z`),set:e=>{s.value.publication_time=e.toISOString().slice(0,16)}}),c=(0,a.computed)({get:()=>new Date(`${s.value.expiration_time}Z`),set:e=>{s.value.expiration_time=e.toISOString().slice(0,16)}});function u(e){const t=new Date(e);return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,16)}function h(){return ux(this,void 0,void 0,(function*(){o.value=!0;try{const e=yield function(e){return na(this,void 0,void 0,(function*(){const{data:t}=yield ia({notification_id:e});return t}))}(t.id);s.value.publication_time=u(e.publication_time),e.expiration_time&&(s.value.expiration_time=u(e.expiration_time)),s.value=e,s.value.publication_time&&(r.value=new Date(s.value.publication_time)<new Date)}catch(e){oo.FN.error((0,y.a)(e))}o.value=!1}))}return t.id&&h(),{__sfc:!0,props:t,router:n,title:i,loading:o,broadcastData:s,broadcastPublished:r,requiredFieldsFilled:l,publicationDate:d,expirationDate:c,convertUTCtoLocal:u,addActionLink:function(){var e;s.value.content.action_links||a.default.set(s.value.content,"action_links",[]),null===(e=s.value.content.action_links)||void 0===e||e.push({action_name:"",link:""})},createOrUpdateBroadcast:function(){return ux(this,void 0,void 0,(function*(){try{t.id?(yield la(t.id,s.value),oo.FN.success("Broadcast updated")):(yield function(e){return na(this,void 0,void 0,(function*(){const{data:t}=yield sa(e);return t}))}(s.value),oo.FN.success("Broadcast created"))}catch(e){oo.FN.error((0,y.a)(e))}finally{n.push("/admin/notifications")}}))},loadBroadcastData:h,FontAwesomeIcon:p.GN,BAlert:Rn.F,BButton:jn.T,BCol:Nd.l,BFormGroup:Gi.x,BFormInput:to.e,BRow:Hd.T,AsyncButton:If,Heading:Dt,FormElement:Ut.Z,GDateTime:lx,LoadingSpan:z.Z,BroadcastContainer:cx}}}),px=hx;const fx=(0,m.Z)(px,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t(n.Heading,{staticClass:"flex-grow-1",attrs:{h1:"",separator:"",inline:""}},[e._v(" "+e._s(n.title)+" ")]),e._v(" "),n.loading?t(n.BAlert,{attrs:{show:""}},[t(n.LoadingSpan,{attrs:{message:"Loading broadcast"}})],1):t("div",[n.props.id&&n.broadcastPublished?t(n.BAlert,{attrs:{id:"broadcast-published-warning",variant:"warning",show:""}},[e._v("\n            This broadcast has already been published. Some users may have already seen it and changing it now will\n            not affect them.\n        ")]):e._e(),e._v(" "),t(n.FormElement,{attrs:{id:"broadcast-subject",type:"text",title:"Subject",optional:!1,help:"This will be displayed in the broadcast banner. It should be short and to the point.",placeholder:"Enter subject",required:""},model:{value:n.broadcastData.content.subject,callback:function(t){e.$set(n.broadcastData.content,"subject",t)},expression:"broadcastData.content.subject"}}),e._v(" "),t(n.FormElement,{attrs:{id:"broadcast-variant",type:"select",title:"Variant",optional:!1,help:"This will determine the position and the icon of the broadcast banner. Urgent broadcasts will be displayed at the top of the page otherwise they will be displayed at the bottom.",options:[["Info","info"],["Warning","warning"],["Urgent","urgent"]]},model:{value:n.broadcastData.variant,callback:function(t){e.$set(n.broadcastData,"variant",t)},expression:"broadcastData.variant"}}),e._v(" "),t(n.FormElement,{attrs:{id:"broadcast-message",type:"text",title:"Message",optional:!1,help:"The message can be written in markdown.",placeholder:"Enter message",required:"",area:""},model:{value:n.broadcastData.content.message,callback:function(t){e.$set(n.broadcastData.content,"message",t)},expression:"broadcastData.content.message"}}),e._v(" "),t(n.BFormGroup,{attrs:{id:"broadcast-action-link-group",label:"Action Links","label-for":"broadcast-action-link"}},[e._l(n.broadcastData.content.action_links,(function(i,o){return t(n.BRow,{key:o,staticClass:"my-2"},[t(n.BCol,{attrs:{cols:"auto"}},[t(n.BFormInput,{attrs:{id:`broadcast-action-link-name-${o}`,type:"text",placeholder:"Enter action name",required:""},model:{value:i.action_name,callback:function(t){e.$set(i,"action_name",t)},expression:"actionLink.action_name"}})],1),e._v(" "),t(n.BCol,[t(n.BFormInput,{attrs:{id:`broadcast-action-link-link-${o}`,type:"url",placeholder:"Enter action link",required:""},model:{value:i.link,callback:function(t){e.$set(i,"link",t)},expression:"actionLink.link"}})],1),e._v(" "),t(n.BCol,{attrs:{cols:"auto"}},[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:`delete-action-link-${o}}`,title:"Delete action link",variant:"error-outline",role:"button"},on:{click:function(e){n.broadcastData.content.action_links?.splice(n.broadcastData.content.action_links.indexOf(i),1)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"times"}})],1)],1)],1)})),e._v(" "),t(n.BButton,{attrs:{id:"create-action-link",title:"Add new action link",variant:"outline-primary",role:"button"},on:{click:n.addActionLink}},[t(n.FontAwesomeIcon,{attrs:{icon:"plus"}}),e._v("\n                Add action link\n            ")],1)],2),e._v(" "),t(n.BRow,[t(n.BCol,[t(n.BFormGroup,{attrs:{id:"broadcast-publication-time-group",label:"Publication Time (local time)","label-for":"broadcast-publication-time",description:"The broadcast will be displayed from this time onwards. Default is the time of creation."}},[t(n.GDateTime,{attrs:{id:"broadcast-publication-time"},model:{value:n.publicationDate,callback:function(e){n.publicationDate=e},expression:"publicationDate"}})],1)],1),e._v(" "),t(n.BCol,[t(n.BFormGroup,{attrs:{id:"broadcast-expiration-time-group",label:"Expiration Time (local time)","label-for":"broadcast-expiration-time",description:"The broadcast will not be displayed and will be deleted from the database after this time. Default is 6 months from the creation time."}},[t(n.GDateTime,{attrs:{id:"broadcast-expiration-time"},model:{value:n.expirationDate,callback:function(e){n.expirationDate=e},expression:"expirationDate"}})],1)],1)],1),e._v(" "),t(n.BRow,{staticClass:"m-1",attrs:{"align-v":"center"}},[t(n.Heading,{attrs:{size:"md"}},[e._v(" Preview ")])],1),e._v(" "),t(n.BroadcastContainer,{attrs:{options:{broadcast:n.broadcastData,previewMode:!0}}}),e._v(" "),t(n.BRow,{staticClass:"m-2",attrs:{"align-h":"center"}},[t(n.AsyncButton,{attrs:{id:"broadcast-submit",icon:"save",title:n.requiredFieldsFilled?"":"Please fill all required fields",variant:"primary",size:"md",disabled:!n.requiredFieldsFilled,action:n.createOrUpdateBroadcast}},[n.props.id?t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(" Update Broadcast ")]):t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(" Create Broadcast ")])])],1)],1)],1)}),[],!1,null,null,null).exports;var mx=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};function _x(){return mx(this,void 0,void 0,(function*(){const{data:e}=yield v.Z.get("/api/groups");return e}))}var vx=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const gx=X._.path("/api/roles").method("get").create();function yx(){return vx(this,void 0,void 0,(function*(){const{data:e}=yield gx({});return e}))}var bx=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const wx=X._.path("/api/users/current/recalculate_disk_usage").method("put").create(),kx=X._.path("/api/users/{user_id}/usage").method("get").create(),Cx=X._.path("/api/users").method("get").create();function xx(){return bx(this,void 0,void 0,(function*(){const{data:e}=yield Cx({});return e}))}const Sx=(0,a.defineComponent)({__name:"NotificationActions",props:{notification:null},setup(e){u.vI.add(h.B2l);return{__sfc:!0,notificationsStore:ha(),getNotificationExpirationTitle:function(e){if(e.expiration_time){const t=(0,ji.Z)(e.expiration_time);return`This notification will be automatically deleted ${(0,Yi.Z)(t,{addSuffix:!0})}`}return"This notification will never be automatically deleted"},FontAwesomeIcon:p.GN,BButton:jn.T,BCol:Nd.l,BInputGroup:BC.w,BRow:Hd.T,AsyncButton:If,UtcDate:J.Z}}});const Mx=(0,m.Z)(Sx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return e.notification?t(n.BCol,[t(n.BRow,{attrs:{"align-h":"end","align-v":"center"}},[t(n.UtcDate,{staticClass:"mx-2",attrs:{date:e.notification.create_time,mode:"elapsed"}}),e._v(" "),t(n.BInputGroup,[e.notification.seen_time?e.notification.expiration_time?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{id:"expiration-time-button",variant:"link",title:n.getNotificationExpirationTitle(e.notification)}},[t(n.FontAwesomeIcon,{attrs:{icon:"hourglass-half"}})],1):e._e():t(n.AsyncButton,{attrs:{id:"mark-as-read-button",title:"Mark as read",icon:"check",action:()=>n.notificationsStore.updateNotification(e.notification,{seen:!0})}}),e._v(" "),t(n.AsyncButton,{attrs:{id:"delete-button",icon:"trash",title:"Delete",action:()=>n.notificationsStore.updateNotification(e.notification,{deleted:!0})}})],1)],1)],1):e._e()}),[],!1,null,null,null).exports,Tx=(0,a.defineComponent)({__name:"MessageNotification",props:{options:null},setup(e){const t=e;u.vI.add(h.wK3);const{renderMarkdown:n}=(0,Vt.A)({openLinksInNewPage:!0}),i=(0,a.computed)((()=>"urgent"===t.options.notification.variant?"danger":t.options.notification.variant));return{__sfc:!0,props:t,renderMarkdown:n,notificationVariant:i,FontAwesomeIcon:p.GN,BCol:Nd.l,BRow:Hd.T,Heading:Dt,NotificationActions:Mx}}});const Lx=(0,m.Z)(Tx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BCol,[t(n.BRow,{attrs:{"align-v":"center"}},[t(n.Heading,{staticClass:"mb-0",attrs:{size:"md",bold:!n.props.options.notification.seen_time}},[t(n.FontAwesomeIcon,{class:`text-${n.notificationVariant}`,attrs:{icon:"inbox"}}),e._v("\n            "+e._s(n.props.options.notification?.content?.subject)+"\n        ")],1),e._v(" "),n.props.options.previewMode?e._e():t(n.NotificationActions,{attrs:{notification:n.props.options.notification}})],1),e._v(" "),t(n.BRow,[t("span",{attrs:{id:"notification-message"},domProps:{innerHTML:e._s(n.renderMarkdown(n.props.options.notification.content.message))}})])],1)}),[],!1,null,null,null).exports;var Dx=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Ex=(0,a.defineComponent)({__name:"NotificationForm",setup(e){u.vI.add(h.sqG);const t=(0,Nn.tv)(),n=(0,a.ref)(!1),i=(0,a.ref)([]),o=(0,a.ref)([]),s=(0,a.ref)([]),r=(0,a.ref)({notification:{source:"admin",category:"message",variant:"info",content:{category:"message",subject:"",message:""},expiration_time:new Date(Date.now()+15552e6).toISOString().slice(0,16),publication_time:(new Date).toISOString().slice(0,16)},recipients:{user_ids:[],role_ids:[],group_ids:[]}}),l=(0,a.computed)((()=>{var e,t,n;return""!==r.value.notification.content.subject&&""!==r.value.notification.content.message&&((null===(e=r.value.recipients.user_ids)||void 0===e?void 0:e.length)||(null===(t=r.value.recipients.role_ids)||void 0===t?void 0:t.length)||(null===(n=r.value.recipients.group_ids)||void 0===n?void 0:n.length))})),d=(0,a.computed)({get:()=>new Date(`${r.value.notification.publication_time}Z`),set:e=>{r.value.notification.publication_time=e.toISOString().slice(0,16)}}),c=(0,a.computed)({get:()=>new Date(`${r.value.notification.expiration_time}Z`),set:e=>{r.value.notification.expiration_time=e.toISOString().slice(0,16)}});function f(e,t,n){return Dx(this,void 0,void 0,(function*(){try{const i=yield e();t.value=i.map(n)}catch(e){oo.FN.error((0,y.a)(e))}}))}return f(xx,o,(e=>[`${e.username} | ${e.email}`,e.id])),f(yx,i,(e=>[`${e.name} | ${e.description}`,e.id])),f(_x,s,(e=>[`${e.name}`,e.id])),{__sfc:!0,router:t,loading:n,roles:i,users:o,groups:s,notificationData:r,requiredFieldsFilled:l,publicationDate:d,expirationDate:c,loadData:f,sendNewNotification:function(){return Dx(this,void 0,void 0,(function*(){try{yield function(e){return Jo(this,void 0,void 0,(function*(){const{data:t}=yield Ko(e);return t}))}(r.value),oo.FN.success("Notification sent"),t.push("/admin/notifications")}catch(e){oo.FN.error((0,y.a)(e))}}))},faInfoCircle:h.sqG,FontAwesomeIcon:p.GN,BAlert:Rn.F,BCard:vi._,BCol:Nd.l,BFormGroup:Gi.x,BRow:Hd.T,AsyncButton:If,Heading:Dt,FormElement:Ut.Z,GDateTime:lx,LoadingSpan:z.Z,MessageNotification:Lx}}}),Ox=Ex;const Ax=(0,m.Z)(Ox,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t(n.Heading,{staticClass:"flex-grow-1",attrs:{h1:"",separator:"",inline:""}},[e._v(" New Notification ")]),e._v(" "),n.loading?t(n.BAlert,{attrs:{show:""}},[t(n.LoadingSpan,{attrs:{message:"Loading notification"}})],1):t("div",[t(n.FormElement,{attrs:{id:"notification-subject",type:"text",title:"Subject",optional:!1,help:"This will be the subject of the notification",placeholder:"Enter subject",required:""},model:{value:n.notificationData.notification.content.subject,callback:function(t){e.$set(n.notificationData.notification.content,"subject",t)},expression:"notificationData.notification.content.subject"}}),e._v(" "),t(n.FormElement,{attrs:{id:"notification-message",type:"text",title:"Message",optional:!1,help:"The message can be written in markdown.",placeholder:"Enter message",required:""},model:{value:n.notificationData.notification.content.message,callback:function(t){e.$set(n.notificationData.notification.content,"message",t)},expression:"notificationData.notification.content.message"}}),e._v(" "),t(n.FormElement,{attrs:{id:"notification-variant",type:"select",title:"Variant",optional:!1,help:"This will change the color of the notification",options:[["Info","info"],["Warning","warning"],["Urgent","urgent"]]},model:{value:n.notificationData.notification.variant,callback:function(t){e.$set(n.notificationData.notification,"variant",t)},expression:"notificationData.notification.variant"}}),e._v(" "),t(n.FormElement,{attrs:{id:"notification-recipients-user-ids",type:"select",title:"User recipients",help:"The users that will receive the notification",multiple:"",options:n.users},model:{value:n.notificationData.recipients.user_ids,callback:function(t){e.$set(n.notificationData.recipients,"user_ids",t)},expression:"notificationData.recipients.user_ids"}}),e._v(" "),t(n.FormElement,{attrs:{id:"notification-recipients-role-ids",type:"select",title:"Role recipients",help:"The roles that will receive the notification",multiple:"",options:n.roles},model:{value:n.notificationData.recipients.role_ids,callback:function(t){e.$set(n.notificationData.recipients,"role_ids",t)},expression:"notificationData.recipients.role_ids"}}),e._v(" "),t(n.FormElement,{attrs:{id:"notification-recipients-group-ids",type:"select",title:"Group recipients",help:"The groups that will receive the notification",multiple:"",options:n.groups},model:{value:n.notificationData.recipients.group_ids,callback:function(t){e.$set(n.notificationData.recipients,"group_ids",t)},expression:"notificationData.recipients.group_ids"}}),e._v(" "),t(n.BRow,{attrs:{"align-v":"center"}},[t(n.BCol,[t(n.BFormGroup,{attrs:{id:"notification-publication-time-group",label:"Publication Time (local time)","label-for":"notification-publication-time",description:"The notification will be displayed after this time. Default is the current time."}},[t(n.GDateTime,{attrs:{id:"notification-publication-time"},model:{value:n.publicationDate,callback:function(e){n.publicationDate=e},expression:"publicationDate"}})],1)],1),e._v(" "),t(n.BCol,[t(n.BFormGroup,{attrs:{id:"notification-expiration-time-group",label:"Expiration Time (local time)","label-for":"notification-expiration-time",description:"The notification will be deleted from the database after this time. Default is 6 months from the creation time."}},[t(n.GDateTime,{attrs:{id:"notification-expiration-time"},model:{value:n.expirationDate,callback:function(e){n.expirationDate=e},expression:"expirationDate"}})],1)],1)],1),e._v(" "),t(n.BRow,{staticClass:"m-1",attrs:{"align-v":"center"}},[t(n.Heading,{attrs:{size:"md"}},[e._v(" Preview ")])],1),e._v(" "),t(n.BCard,{staticClass:"my-2"},[t(n.MessageNotification,{attrs:{options:{notification:n.notificationData.notification,previewMode:!0}}})],1),e._v(" "),t(n.BAlert,{attrs:{show:"",variant:"info"}},[t(n.FontAwesomeIcon,{staticClass:"mr-2",attrs:{icon:n.faInfoCircle}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n                Once you send the notification, it will be sent to all the recipients and cannot be edited or\n                deleted.\n            ")])],1),e._v(" "),t(n.BRow,{staticClass:"m-2",attrs:{"align-h":"center"}},[t(n.AsyncButton,{attrs:{id:"notification-submit",icon:"save",title:n.requiredFieldsFilled?"":"Please fill all required fields",variant:"primary",size:"md",disabled:!n.requiredFieldsFilled,action:n.sendNewNotification}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v(" Send Notification ")])])],1)],1)],1)}),[],!1,null,null,null).exports;var Ix=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Px=(0,a.defineComponent)({__name:"BroadcastCard",props:{broadcastNotification:null},emits:["edit","expire","go-to-link"],setup(e,{emit:t}){const n=e;u.vI.add(h.T07,h.SZw,h.Xcf,h.B2l,h.sqG,h.$aW);const{confirm:i}=Ci(),{renderMarkdown:o}=(0,Vt.A)({openLinksInNewPage:!0}),s=(0,a.computed)((()=>n.broadcastNotification)),r=(0,a.computed)((()=>s.value.expiration_time&&new Date(s.value.expiration_time)<new Date)),l=(0,a.computed)((()=>new Date(s.value.publication_time)<new Date)),d=(0,a.computed)((()=>"urgent"===s.value.variant?"danger":s.value.variant)),c=(0,a.computed)((()=>l.value?"Published":"Scheduled to be published")),f=(0,a.computed)((()=>s.value.expiration_time?r.value?"Expired":"Expires":"Does not expire"));return{__sfc:!0,confirm:i,renderMarkdown:o,props:n,emit:t,notification:s,hasExpired:r,hasBeenPublished:l,notificationVariant:d,publicationTimePrefix:c,expirationTimePrefix:f,onEditClick:function(){t("edit",s.value)},onForceExpirationClick:function(){return Ix(this,void 0,void 0,(function*(){(yield i("Are you sure you want to expire this broadcast? It will be automatically deleted on the next cleanup cycle.","Expire broadcast"))&&t("expire",s.value)}))},onActionClick:function(e){t("go-to-link",e)},faBroadcastTower:h.T07,faClock:h.SZw,faEdit:h.Xcf,faHourglassHalf:h.B2l,faInfoCircle:h.sqG,faTrash:h.$aW,FontAwesomeIcon:p.GN,BButton:jn.T,BCol:Nd.l,BInputGroup:BC.w,BRow:Hd.T,Heading:Dt,UtcDate:J.Z}}}),Rx=Px;const jx=(0,m.Z)(Rx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"broadcast-card mb-2"},[t(n.BRow,{attrs:{"align-v":"center","align-h":"between","no-gutters":""}},[t(n.Heading,{staticClass:"mb-0",class:n.hasExpired?"expired-broadcast":"",attrs:{size:"md"}},[t(n.FontAwesomeIcon,{class:`text-${n.notificationVariant}`,attrs:{icon:n.faInfoCircle}}),e._v("\n            "+e._s(n.notification.content.subject)+"\n        ")],1),e._v(" "),t(n.BRow,{attrs:{"align-h":"end","align-v":"center","no-gutters":""}},[t("span",[e._v("\n                created\n                "),t(n.UtcDate,{staticClass:"mr-2",attrs:{date:n.notification.create_time,mode:"elapsed"}})],1),e._v(" "),n.hasExpired?e._e():t(n.BInputGroup,[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{id:"edit-broadcast-button",variant:"link",title:"Edit broadcast"},on:{click:n.onEditClick}},[t(n.FontAwesomeIcon,{attrs:{icon:n.faEdit}})],1),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{id:"delete-button",variant:"link",title:"Delete broadcast"},on:{click:n.onForceExpirationClick}},[t(n.FontAwesomeIcon,{attrs:{icon:n.faTrash}})],1)],1)],1)],1),e._v(" "),t(n.BRow,{attrs:{"align-v":"center","align-h":"between","no-gutters":""}},[t(n.BCol,{attrs:{cols:"auto"}},[t(n.BRow,{attrs:{"align-v":"center","no-gutters":""}},[t("span",{class:n.hasExpired?"expired-broadcast":"",domProps:{innerHTML:e._s(n.renderMarkdown(n.notification.content.message))}})]),e._v(" "),t(n.BRow,{attrs:{"no-gutters":""}},e._l(n.notification.content.action_links,(function(i){return t(n.BButton,{key:i.action_name,staticClass:"mr-1",attrs:{title:i.action_name,variant:"primary"},on:{click:function(e){return n.onActionClick(i.link)}}},[e._v("\n                    "+e._s(i.action_name)+"\n                ")])})),1)],1),e._v(" "),t(n.BCol,[t(n.BRow,{attrs:{"align-v":"center","align-h":"end","no-gutters":""}},[t(n.FontAwesomeIcon,{staticClass:"mx-1",class:n.hasBeenPublished?"published":"scheduled",attrs:{icon:n.hasBeenPublished?n.faBroadcastTower:n.faClock}}),e._v("\n                "+e._s(n.publicationTimePrefix)+"\n                "),t(n.UtcDate,{staticClass:"ml-1",attrs:{date:n.notification.publication_time,mode:"elapsed"}})],1),e._v(" "),t(n.BRow,{attrs:{"align-v":"center","align-h":"end","no-gutters":""}},[t(n.FontAwesomeIcon,{staticClass:"mx-1",class:n.hasExpired?"expired":"expires",attrs:{variant:"danger",icon:n.faHourglassHalf}}),e._v("\n                "+e._s(n.expirationTimePrefix)+"\n                "),n.notification.expiration_time?t(n.UtcDate,{staticClass:"ml-1",attrs:{date:n.notification.expiration_time,mode:"elapsed"}}):e._e()],1)],1)],1)],1)}),[],!1,null,"54226605",null).exports;var Yx=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Hx=(0,a.defineComponent)({__name:"BroadcastsList",setup(e){u.vI.add(h.LEp,h.SZw,h.B2l,h.XSV);const t=(0,Nn.tv)(),n=(0,a.ref)(!1),i=(0,a.ref)(!1),o=(0,a.ref)(!0),s=(0,a.ref)(!0),r=(0,a.ref)(!0),l=(0,a.ref)([]),d=(0,a.computed)((()=>l.value.filter(f))),c=e=>e.expiration_time&&new Date(e.expiration_time)<new Date;function f(e){return c(e)?s.value:m(e)?o.value:r.value}function m(e){return new Date(e.publication_time)<new Date}function _(e=!1){return Yx(this,void 0,void 0,(function*(){e?n.value=!0:i.value=!0;try{l.value=yield aa(),l.value.sort(((e,t)=>new Date(t.create_time).getTime()-new Date(e.create_time).getTime()))}finally{i.value=!1,n.value=!1}}))}return _(),{__sfc:!0,router:t,overlay:n,loading:i,showActive:o,showExpired:s,showScheduled:r,broadcasts:l,filteredBroadcasts:d,broadcastExpired:c,filterBroadcasts:f,broadcastPublished:m,onEdit:function(e){t.push(`/admin/notifications/edit_broadcast/${e.id}`)},onForceExpire:function(e){return Yx(this,void 0,void 0,(function*(){yield la(e.id,{expiration_time:(new Date).toISOString().slice(0,23)}),yield _(!0),oo.FN.info("Broadcast marked as expired and will be removed from the database in the next cleanup cycle.")}))},onGoToLink:function(e){e.startsWith("/")?t.push(e):window.open(e,"_blank")},loadBroadcastsList:_,faCheck:h.LEp,faClock:h.SZw,faHourglassHalf:h.B2l,faRedo:h.XSV,FontAwesomeIcon:p.GN,BAlert:Rn.F,BButton:jn.T,BCol:Nd.l,BRow:Hd.T,BroadcastCard:jx,Heading:Dt,LoadingSpan:z.Z}}});const Nx=(0,m.Z)(Hx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t(n.Heading,{staticClass:"mb-2",attrs:{h2:""}},[e._v(" Broadcasts list ")]),e._v(" "),t("p",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mb-2"},[e._v("\n        Broadcasts are notifications that are displayed to all users. They can be scheduled to be published at a\n        specific time and can be set to expire at a specific time. They can also be marked as urgent to make them\n        stand out.\n    ")]),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"list-operations mb-2"},[t(n.BRow,{staticClass:"align-items-center",attrs:{"no-gutters":""}},[t(n.BCol,{staticClass:"ml-2"},[t(n.BRow,{attrs:{"align-h":"start","align-v":"center"}},[t("span",{staticClass:"mx-2"},[e._v(" Filters: ")]),e._v(" "),t("BButtonGroup",[t(n.BButton,{attrs:{id:"show-active-filter-button",size:"sm",pressed:n.showActive,title:"Show active broadcasts",variant:"outline-primary"},on:{click:function(e){n.showActive=!n.showActive}}},[t(n.FontAwesomeIcon,{attrs:{icon:n.faCheck}}),e._v("\n                            Active\n                        ")],1),e._v(" "),t(n.BButton,{attrs:{id:"show-scheduled-filter-button",size:"sm",pressed:n.showScheduled,title:"Show scheduled broadcasts",variant:"outline-primary"},on:{click:function(e){n.showScheduled=!n.showScheduled}}},[t(n.FontAwesomeIcon,{attrs:{icon:n.faClock}}),e._v("\n                            Scheduled\n                        ")],1),e._v(" "),t(n.BButton,{attrs:{id:"show-expired-filter-button",size:"sm",pressed:n.showExpired,title:"Show expired broadcasts",variant:"outline-primary"},on:{click:function(e){n.showExpired=!n.showExpired}}},[t(n.FontAwesomeIcon,{attrs:{icon:n.faHourglassHalf}}),e._v("\n                            Expired\n                        ")],1)],1)],1)],1),e._v(" "),t(n.BCol,[t(n.BRow,{attrs:{"align-h":"end","align-v":"center","no-gutters":""}},[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{size:"sm",disabled:n.loading||n.overlay,variant:"outline-primary",title:"Refresh broadcasts"},on:{click:n.loadBroadcastsList}},[t(n.FontAwesomeIcon,{attrs:{icon:n.faRedo}})],1)],1)],1)],1)],1),e._v(" "),n.loading?t(n.BAlert,{attrs:{variant:"info",show:""}},[t(n.LoadingSpan,{attrs:{message:"Loading broadcasts"}})],1):0===n.filteredBroadcasts.length?t(n.BAlert,{attrs:{id:"empty-broadcast-list-alert",variant:"info",show:""}},[e._v("\n        There are no broadcast notifications to show. Use the button above to create a new broadcast notification or\n        change the filters.\n    ")]):t("BOverlay",{attrs:{show:n.overlay,rounded:"sm"}},e._l(n.filteredBroadcasts,(function(e){return t(n.BroadcastCard,{key:e.id,attrs:{"broadcast-notification":e,"data-test-id":"broadcast-item"},on:{edit:n.onEdit,expire:n.onForceExpire,"go-to-link":n.onGoToLink}})})),1)],1)}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"mb-2"},[t("b",[e._v("NOTE:")]),e._v(" Expired broadcasts are completely removed from the database in a periodic cleanup process. The\n        cleanup interval is defined in the Galaxy configuration file under the\n        "),t("code",[e._v("expired_notifications_cleanup_interval")]),e._v(" key.\n    ")])}],!1,null,"10107951",null).exports,Fx=(0,a.defineComponent)({__name:"NotificationsManagement",setup(e){const t=(0,Nn.tv)(),{config:n,isConfigLoaded:i}=(0,c.Z)();return{__sfc:!0,router:t,config:n,isConfigLoaded:i,goToCreateNewNotification:function(){t.push("/admin/notifications/create_new_notification")},goToCreateNewBroadcast:function(){t.push("/admin/notifications/create_new_broadcast")},FontAwesomeIcon:p.GN,BAlert:Rn.F,BButton:jn.T,BroadcastsList:Nx,Heading:Dt}}}),Bx=Fx;const $x=(0,m.Z)(Bx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{attrs:{"aria-labelledby":"notifications-managements"}},[t(n.Heading,{staticClass:"flex-grow-1",attrs:{id:"notifications-title",h1:"",separator:"",inline:""}},[e._v("\n        Notifications and Broadcasts\n    ")]),e._v(" "),e._m(0),e._v(" "),n.isConfigLoaded&&n.config.enable_notification_system?t("div",[t("div",[t(n.BButton,{staticClass:"mb-2",attrs:{id:"send-notification-button",variant:"outline-primary"},on:{click:n.goToCreateNewNotification}},[t(n.FontAwesomeIcon,{attrs:{icon:"plus"}}),e._v("\n                Send new notification\n            ")],1),e._v(" "),t(n.BButton,{staticClass:"mb-2",attrs:{id:"create-broadcast-button",variant:"outline-primary"},on:{click:n.goToCreateNewBroadcast}},[t(n.FontAwesomeIcon,{attrs:{icon:"plus"}}),e._v("\n                Create new broadcast\n            ")],1)],1),e._v(" "),t(n.BroadcastsList,{staticClass:"mt-2"})],1):t(n.BAlert,{attrs:{variant:"warning",show:""}},[e._v("\n        The notification system is disabled. To enable it, set the\n        "),t("code",[e._v("enable_notification_system")]),e._v(" option to "),t("code",[e._v("true")]),e._v(" in the Galaxy configuration file.\n    ")])],1)}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("\n        As an admin, you can send individual notifications to users (groups or roles), or display\n        "),t("i",[e._v("broadcast notifications")]),e._v(" to all users (even anonymous users).\n    ")])}],!1,null,null,null).exports;const zx={components:{BaseList:OC},data:()=>({fields:[{key:"execute",label:"Reset"},{key:"name",label:"Metadata",sortable:!0},{key:"owner",sortable:!0},{key:"ctx_rev",label:"Revision"}],getter:jk,setter:Yk})};const Wx=(0,m.Z)(zx,(function(){var e=this;return(0,e._self._c)("BaseList",{attrs:{fields:e.fields,icon:"fa fa-trash-o",tooltip:"Reset",plural:"metadata entries",success:"successful",getter:e.getter,setter:e.setter}})}),[],!1,null,null,null).exports;const Ux={components:{message:kk,"base-grid":Tk},data:()=>({isLoaded:!1,localAllowed:[],localBlocked:[],toolshedAllowed:[],toolshedBlocked:[],columns:[{text:"Tool Name",dataIndex:"tool_name"},{text:"Tool ID",dataIndex:"tool_id"},{text:"Action",dataIndex:"action"}],toolshedColumns:[{text:"Tool Name",dataIndex:"tool_name"},{text:"Toolshed"},{text:"Owner"},{text:"Repository"},{text:"Tool"},{text:"Version"}],message:"",status:""}),created(){v.Z.get(`${(0,g.getAppRoot)()}api/sanitize_allow`).then((e=>{this.isLoaded=!0,this.localAllowed=e.data.allowed_local,this.localBlocked=e.data.blocked_local,this.toolshedAllowed=e.data.allowed_toolshed,this.toolshedBlocked=e.data.blocked_toolshed,this.message=e.data.message,this.status=e.data.status})).catch((e=>{console.error(e)}))},methods:{allowHTML(e){v.Z.put(`${(0,g.getAppRoot)()}api/sanitize_allow?tool_id=${encodeURIComponent(e)}`,{params:{tool_id:e}}).then((e=>{this.localAllowed=e.data.allowed_local,this.localBlocked=e.data.blocked_local,this.toolshedAllowed=e.data.allowed_toolshed,this.toolshedBlocked=e.data.blocked_toolshed,this.message=e.data.message,this.status=e.data.status})).catch((e=>{console.error(e)}))},sanitizeHTML(e){v.Z.delete(`${(0,g.getAppRoot)()}api/sanitize_allow`,{params:{tool_id:e}}).then((e=>{this.localAllowed=e.data.allowed_local,this.localBlocked=e.data.blocked_local,this.toolshedAllowed=e.data.allowed_toolshed,this.toolshedBlocked=e.data.blocked_toolshed,this.message=e.data.message,this.status=e.data.status})).catch((e=>{console.error(e)}))}}};var Vx=(0,m.Z)(Ux,(function(){var e=this,t=e._self._c;return t("div",[t("message",{attrs:{message:e.message,status:e.status}}),e._v(" "),t("b-tabs",[t("b-tab",{attrs:{title:"Toolshed Tools"}},[t("b-tabs",[t("b-tab",{attrs:{title:"HTML Sanitized"}},[t("base-grid",{attrs:{id:"sanitize-allow-grid","is-loaded":e.isLoaded,columns:e.toolshedColumns},scopedSlots:e._u([{key:"rows",fn:function(){return[e._l(e.toolshedBlocked,(function(n,i){return[t("tr",{key:i},[t("td",[e._v(e._s(n.tool_name))]),e._v(" "),t("td",[t("span",[e._v(e._s(n.tool_id[0]))])]),e._v(" "),t("td",[t("button",{on:{click:function(t){return e.allowHTML(n.ids.owner)}}},[e._v(e._s(n.tool_id[2]))])]),e._v(" "),t("td",[t("button",{on:{click:function(t){return e.allowHTML(n.ids.repository)}}},[e._v(e._s(n.tool_id[3]))])]),e._v(" "),t("td",[t("button",{on:{click:function(t){return e.allowHTML(n.ids.tool)}}},[e._v(e._s(n.tool_id[4]))])]),e._v(" "),t("td",[t("button",{on:{click:function(t){return e.allowHTML(n.ids.full)}}},[e._v(e._s(n.tool_id[5]))])])])]}))]},proxy:!0}])})],1),e._v(" "),t("b-tab",{attrs:{title:"HTML Rendered"}},[t("base-grid",{attrs:{id:"sanitize-allow-grid","is-loaded":e.isLoaded,columns:e.columns},scopedSlots:e._u([{key:"rows",fn:function(){return[e._l(e.toolshedAllowed,(function(n,i){return[t("tr",{key:i},[t("td",[n.tool_name?t("span",[e._v("\n                                            "+e._s(n.tool_name)+"\n                                        ")]):t("span",[t("i",[e._v("Not installed")])])]),e._v(" "),t("td",[e._l(n.tool_id,(function(n,i){return[i>0?[e._v("/")]:e._e(),t("span",{key:i},[e._v(e._s(n))])]}))],2),e._v(" "),t("td",[t("button",{on:{click:function(t){return e.sanitizeHTML(n.ids.allowed)}}},[e._v("Sanitize HTML")])])])]}))]},proxy:!0}])})],1)],1)],1),e._v(" "),t("b-tab",{attrs:{title:"Local Tools"}},[t("b-tabs",[t("b-tab",{attrs:{title:"HTML Sanitized"}},[t("base-grid",{attrs:{id:"sanitize-allow-grid","is-loaded":e.isLoaded,columns:e.columns},scopedSlots:e._u([{key:"rows",fn:function(){return[e._l(e.localBlocked,(function(n,i){return[t("tr",{key:i},[t("td",[e._v(e._s(n.tool_name))]),e._v(" "),t("td",[e._v(e._s(n.tool_id[0]))]),e._v(" "),t("td",[t("button",{on:{click:function(t){return e.allowHTML(n.ids.full)}}},[e._v("Render HTML")])])])]}))]},proxy:!0}])})],1),e._v(" "),t("b-tab",{attrs:{title:"HTML Rendered"}},[t("base-grid",{attrs:{id:"sanitize-allow-grid","is-loaded":e.isLoaded,columns:e.columns},scopedSlots:e._u([{key:"rows",fn:function(){return[e._l(e.localAllowed,(function(n,i){return[t("tr",{key:i},[t("td",[n.tool_name?t("span",[e._v("\n                                            "+e._s(n.tool_name)+"\n                                        ")]):t("span",[t("i",[e._v("Not installed")])])]),e._v(" "),t("td",[e._v(e._s(n.tool_id[0]))]),e._v(" "),t("td",[t("button",{on:{click:function(t){return e.sanitizeHTML(n.ids.allowed)}}},[e._v("Sanitize HTML")])])])]}))]},proxy:!0}])})],1)],1)],1)],1)],1)}),[],!1,null,null,null);const qx=Vx.exports;const Zx={props:{urlBase:{type:String,default:null},userFilter:{type:String,default:null}},mounted(){new Tn.Z({active_tab:"shared",url_base:`${(0,s.Bg)()}${this.urlBase}`,url_data:{"f-username":this.userFilter||""}}).$el.appendTo(this.$refs.target)}};const Gx=(0,m.Z)(Zx,(function(){return(0,this._self._c)("div",{ref:"target"})}),[],!1,null,null,null).exports;class Jx{async getCategories(e){const t=`tool_shed_url=${e}&controller=categories`,n=`${(0,g.getAppRoot)()}api/tool_shed/request?${t}`;try{return(await v.Z.get(n)).data}catch(e){(0,y.t)(e)}}async getRepositories(e){const t=this._getParamsString(e),n=`${(0,g.getAppRoot)()}api/tool_shed/request?controller=repositories&${t}`;try{const e=(await v.Z.get(n)).data,t=e.hits.map((e=>e.repository));return t.forEach((t=>{t.owner=t.repo_owner_username,t.times_downloaded=this._formatCount(t.times_downloaded),t.repository_url=`${e.hostname}repository?repository_id=${t.id}`})),t}catch(e){(0,y.t)(e)}}async getRepository(e,t){const n=`tool_shed_url=${e}&id=${t}&controller=repositories&action=metadata`,i=`${(0,g.getAppRoot)()}api/tool_shed/request?${n}`;try{const e=(await v.Z.get(i)).data,t=Object.keys(e).map((t=>e[t]));if(0===t.length)throw Error("Repository does not contain any installable revisions.");return t.sort(((e,t)=>t.numeric_revision-e.numeric_revision)),t.forEach((e=>{Array.isArray(e.tools)&&(e.profile=e.tools.reduce(((e,t)=>t.profile>e?t.profile:e),null))})),t}catch(e){(0,y.t)(e)}}async getRepositoryByName(e,t,n){const i=`tool_shed_url=${e}&name=${t}&owner=${n}`,o=`${(0,g.getAppRoot)()}api/tool_shed/request?controller=repositories&${i}`;try{const t=await v.Z.get(o);if(t.data.length>0){const n=t.data[0];return n.repository_url=`${e}repository?repository_id=${n.id}`,n}throw Error("Repository details not found.")}catch(e){(0,y.t)(e)}}async getInstalledRepositories(e={}){const t=(0,l.Bz)(),n=`${(0,g.getAppRoot)()}api/tool_shed_repositories/?uninstalled=False`;try{const i=await v.Z.get(n),o=this._groupByNameOwnerToolshed(i.data,e.filter,e.selectLatest);return this._fixToolshedUrls(o,t.config.tool_shed_urls),o}catch(e){(0,y.t)(e)}}async getInstalledRepositoriesByName(e,t){const n=`name=${e}&owner=${t}`,i=`${(0,g.getAppRoot)()}api/tool_shed_repositories?${n}`;try{const e=(await v.Z.get(i)).data,t={};return e.forEach((e=>{const n={status:e.status,installed:!e.deleted&&!e.uninstalled};t[e.changeset_revision]=t[e.installed_changeset_revision]=n})),t}catch(e){(0,y.t)(e)}}async installRepository(e){const t=`${(0,g.getAppRoot)()}api/tool_shed_repositories`;try{return(await v.Z.post(t,e)).data}catch(e){(0,y.t)(e)}}async uninstallRepository(e){const t=Object.keys(e).reduce((function(t,n){return`${t}${n}=${e[n]}&`}),""),n=`${(0,g.getAppRoot)()}api/tool_shed_repositories?${t}`;try{return(await v.Z.delete(n)).data}catch(e){(0,y.t)(e)}}_groupByNameOwnerToolshed(e,t,n){if(n){const t=(e,t)=>e===t?0:e<t?-1:1;e=e.sort(((e,n)=>t(e.name,n.name)||t(e.owner,n.owner)||t(e.tool_shed,n.tool_shed)||t(parseInt(n.ctx_rev),parseInt(e.ctx_rev))))}const i={},o=[];return e.forEach((e=>{const n=`${e.name}_${e.owner}_${e.tool_shed}`;t&&!t(e)||i[n]||(i[n]=!0,o.push(e))})),o}_fixToolshedUrls(e,t){e.forEach((e=>{for(const n of t)if(n.includes(e.tool_shed)){e.tool_shed_url=n;break}}))}_formatCount(e){return e>1e3?`>${Math.floor(e/1e3)}k`:e}_getParamsString(e){return e?Object.keys(e).reduce((function(t,n){return`${t}${n}=${e[n]}&`}),""):""}}const Kx={__name:"InstallationActions",props:{status:String},emits:["onInstall","onUninstall"],setup(e,{emit:t}){const n=e,i=(0,a.computed)((()=>!n.status||"Uninstalled"===n.status)),o=(0,a.computed)((()=>"Installed"===n.status));return{__sfc:!0,props:n,installState:i,uninstallState:o,emit:t,onCancel:function(){window.confirm("Do you want to reset this repository?")&&t("onUninstall")}}}},Xx=Kx;const Qx=(0,m.Z)(Xx,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.installState?t("b-button",{staticClass:"btn-sm",attrs:{variant:"primary"},on:{click:()=>n.emit("onInstall")}},[e._v("\n        Install\n    ")]):n.uninstallState?t("b-button",{staticClass:"btn-sm",attrs:{variant:"danger"},on:{click:()=>n.emit("onUninstall")}},[e._v("\n        Uninstall\n    ")]):t("b-button",{staticClass:"btn-sm",attrs:{variant:"warning",title:e.l("Reset Broken or Stuck Installation")},on:{click:n.onCancel}},[e._v("\n        Reset\n    ")])],1)}),[],!1,null,"4a886edd",null).exports;const eS={props:{repo:{type:Object,required:!0},changesetRevision:{type:String,required:!0},requiresPanel:{type:Boolean,required:!0},toolshedUrl:{type:String,required:!0},currentPanel:{type:Object,default:null},toolDynamicConfigs:{type:Array,default:null},modalStatic:{type:Boolean,default:!1}},data:()=>({modalShow:!0,advancedShow:!1,installToolDependencies:!0,installRepositoryDependencies:!0,installResolverDependencies:!0,toolConfig:null,toolSection:null}),computed:{advancedTitle(){return this.advancedShow?"Hide":"Show"},modalTitle(){return`Installing '${this.repo.name}'`},showConfig(){return this.toolConfigs.length>1},toolSections(){const e=Object.values(this.currentPanel);return e?e.filter((e=>e.tools)):[]},toolConfigs(){return this.toolDynamicConfigs||[]}},created(){this.toolConfigs.length>0&&(this.toolConfig=this.toolConfigs[0])},methods:{findSection:function(e){const t=["",""];if(e){const n=this.toolSections.find((t=>t.name.toLowerCase().trim()==e.toLowerCase().trim()));n?t[0]=n.id:t[1]=e}return t},onAdvanced:function(){this.advancedShow=!this.advancedShow},onOk:function(){const[e,t]=this.findSection(this.toolSection);this.$emit("ok",{tool_shed_url:this.toolshedUrl,name:this.repo.name,owner:this.repo.owner,changeset_revision:this.changesetRevision,new_tool_panel_section_label:t,tool_panel_section_id:e,shed_tool_conf:this.toolConfig,install_resolver_dependencies:this.installResolverDependencies,install_tool_dependencies:this.installToolDependencies,install_repository_dependencies:this.installRepositoryDependencies})},onHide:function(){this.$emit("hide")}}};const tS=(0,m.Z)(eS,(function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"repo-install-settings",static:e.modalStatic},on:{ok:e.onOk,hide:e.onHide},scopedSlots:e._u([{key:"modal-header",fn:function(){return[t("h2",{staticClass:"title m-0 h-sm"},[e._v("\n            "+e._s(e.modalTitle)+"\n        ")])]},proxy:!0}]),model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e._v(" "),t("div",{staticClass:"description mb-1"},[e._v("\n        "+e._s(e.repo.long_description||e.repo.description)+"\n    ")]),e._v(" "),t("div",{staticClass:"revision text-muted small mb-3"},[e._v(e._s(e.repo.owner)+" rev. "+e._s(e.changesetRevision))]),e._v(" "),e.requiresPanel?t("b-form-group",{attrs:{label:"Target Section:",description:"Choose an existing tool panel section or create a new section to contain the installed tools (optional)."}},[t("b-form-input",{attrs:{list:"sectionSelect"},model:{value:e.toolSection,callback:function(t){e.toolSection=t},expression:"toolSection"}}),e._v(" "),t("datalist",{attrs:{id:"sectionSelect"}},e._l(e.toolSections,(function(n){return t("option",{key:n.id},[e._v("\n                "+e._s(n.name)+"\n            ")])})),0)],1):e._e(),e._v(" "),t("b-link",{attrs:{variant:"primary"},on:{click:e.onAdvanced}},[e._v(" "+e._s(e.advancedTitle)+" advanced settings. ")]),e._v(" "),t("b-collapse",{staticClass:"mt-2",attrs:{id:"advanced-collapse"},model:{value:e.advancedShow,callback:function(t){e.advancedShow=t},expression:"advancedShow"}},[t("b-card",[e.showConfig?t("b-form-group",{attrs:{label:"Tool Configuration:",description:"Choose a tool configuration."}},e._l(e.toolConfigs,(function(n){return t("b-form-radio",{key:n,attrs:{value:n},model:{value:e.toolConfig,callback:function(t){e.toolConfig=t},expression:"toolConfig"}},[e._v("\n                    "+e._s(n)+"\n                ")])})),1):e._e(),e._v(" "),t("b-form-group",{attrs:{label:"Dependencies:",description:"Choose how to handle dependencies."}},[t("b-form-checkbox",{model:{value:e.installResolverDependencies,callback:function(t){e.installResolverDependencies=t},expression:"installResolverDependencies"}},[e._v("\n                    Install resolvable dependencies\n                ")]),e._v(" "),t("b-form-checkbox",{model:{value:e.installRepositoryDependencies,callback:function(t){e.installRepositoryDependencies=t},expression:"installRepositoryDependencies"}},[e._v("\n                    Install repository dependencies\n                ")]),e._v(" "),t("b-form-checkbox",{model:{value:e.installToolDependencies,callback:function(t){e.installToolDependencies=t},expression:"installToolDependencies"}},[e._v(" Install tool dependencies ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;const nS={props:{tools:{type:Array,required:!0}},data:()=>({clsExpanded:"bg-transparent border-bottom",clsCollapsed:"bg-transparent",clsFirstColumn:"p-0 w-50 text-left",clsSecondColumn:"p-0 w-50 text-center",expanded:!1,preview:2}),computed:{clsRow(){return this.expanded?this.clsExpanded:this.clsCollapsed},canExpand(){return this.tools&&this.tools.length>this.preview},visibleTools(){return this.canExpand&&!this.expanded?this.tools.slice(0,this.preview):this.tools}},methods:{onExpand(){this.expanded=!this.expanded}}};const iS=(0,m.Z)(nS,(function(){var e=this,t=e._self._c;return e.tools?t("table",{staticClass:"table table-borderless"},[t("tbody",[e.canExpand&&e.expanded?t("tr",{staticClass:"bg-transparent"},[t("td",{class:e.clsFirstColumn},[t("a",{attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onExpand.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-angle-double-up"}),e._v(" "),t("span",[e._v("Show less")])])]),e._v(" "),t("td",{class:e.clsSecondColumn})]):e._e(),e._v(" "),e._l(e.visibleTools,(function(n){return t("tr",{key:n.guid,class:e.clsRow},[t("td",{class:e.clsFirstColumn},[e._v("\n                "+e._s(n.id)+"\n            ")]),e._v(" "),t("td",{class:e.clsSecondColumn},[e._v("\n                "+e._s(n.version)+"\n            ")])])})),e._v(" "),e.canExpand&&!e.expanded?t("tr",{staticClass:"bg-transparent"},[t("td",{class:e.clsFirstColumn},[t("a",{attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onExpand.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-angle-double-down"}),e._v(" "),t("span",[e._v("Show more")])])]),e._v(" "),t("td",{class:e.clsSecondColumn})]):e._e()],2)]):t("span",[e._v("-")])}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const oS={components:{InstallationSettings:tS,InstallationActions:Qx,RepositoryTools:iS},props:{repo:{type:Object,required:!0},toolshedUrl:{type:String,required:!0}},setup(){const{config:e,isConfigLoaded:t}=(0,c.Z)(!0);return{config:e,isConfigLoaded:t}},data:()=>({repoChecked:"fa fa-check text-success",repoUnchecked:"fa fa-times text-danger",selectedChangeset:null,selectedRequiresPanel:!1,repoTable:[],repoFields:[{key:"numeric_revision",label:"Revision"},{key:"tools",label:"Tools and Versions"},{key:"profile",label:"Requires"},{key:"missing_test_components",label:"Tests"},{key:"status"},{key:"actions",label:"",class:"toolshed-repo-actions"}],showSettings:!1,error:null,loading:!0,delay:2e3}),computed:{...(0,o.rn)(Da.n,["panel"])},created(){this.services=new Jx,this.load(),this.panel.default||this.fetchPanel("default")},destroyed(){this.clearTimeout()},methods:{...(0,o.nv)(Da.n,["fetchPanel"]),clearTimeout(){this.timeout&&clearTimeout(this.timeout)},setTimeout(){this.clearTimeout(),this.timeout=setTimeout((()=>{this.loadInstalledRepositories()}),this.delay)},load(){this.services.getRepository(this.toolshedUrl,this.repo.id).then((e=>{this.repoTable=e,this.loadInstalledRepositories()})).catch((e=>{this.error=e,this.loading=!1}))},loadInstalledRepositories(){this.services.getInstalledRepositoriesByName(this.repo.name,this.repo.owner).then((e=>{let t=!1;this.repoTable.forEach((n=>{const i=e[n.changeset_revision];if(i&&i.status!==n.status)return n.status=i.status,n.installed=i.installed,t=!0,!1})),t&&(this.repoTable=[...this.repoTable]),this.setTimeout(),this.loading=!1})).catch((e=>{this.error=e,this.loading=!1}))},onOk:function(e){this.services.installRepository(e).then((e=>{this.showSettings=!1})).catch((e=>{console.log(e)}))},onHide:function(){this.showSettings=!1},setupRepository:function(e){this.selectedChangeset=e.changeset_revision,this.selectedRequiresPanel=e.includes_tools_for_display_in_tool_panel||"repository_suite_definition"==e.repository.type,this.showSettings=!0},uninstallRepository:function(e){this.services.uninstallRepository({tool_shed_url:this.toolshedUrl,name:this.repo.name,owner:this.repo.owner,changeset_revision:e.changeset_revision}).catch((e=>{this.error=e}))}}},aS=oS;var sS=(0,m.Z)(aS,(function(){var e=this,t=e._self._c;return t("b-card",[t("div",{staticClass:"mb-1"},[e._v(e._s(e.repo.long_description))]),e._v(" "),t("div",{staticClass:"mb-3"},[t("b-link",{attrs:{href:e.repo.repository_url,target:"_blank"}},[e._v("Show additional details and dependencies.")])],1),e._v(" "),t("div",[e.loading?t("span",[t("span",{staticClass:"fa fa-spinner fa-spin"}),e._v(" "),t("span",{staticClass:"loading-message"},[e._v("Loading repository details...")])]):t("div",[e.error?t("b-alert",{attrs:{variant:"danger",show:""}},[e._v("\n                "+e._s(e.error)+"\n            ")]):t("div",{staticClass:"border rounded"},[t("b-table",{staticClass:"text-center m-0",attrs:{borderless:"",items:e.repoTable,fields:e.repoFields},scopedSlots:e._u([{key:"cell(numeric_revision)",fn:function(n){return[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(n.value))])]}},{key:"cell(tools)",fn:function(e){return[t("RepositoryTools",{attrs:{tools:e.value}})]}},{key:"cell(profile)",fn:function(t){return[e._v("\n                        "+e._s(t.value?`+${t.value}`:"-")+"\n                    ")]}},{key:"cell(missing_test_components)",fn:function(n){return[n.value?t("span",{class:e.repoUnchecked}):t("span",{class:e.repoChecked})]}},{key:"cell(status)",fn:function(n){return[n.item.status?t("span",[["Error","Installed","Uninstalled"].includes(n.item.status)?e._e():t("span",{staticClass:"fa fa-spinner fa-spin"}),e._v("\n                            "+e._s(n.item.status)+"\n                        ")]):t("span",[e._v(" - ")])]}},{key:"cell(actions)",fn:function(n){return[t("InstallationActions",{attrs:{status:n.item.status},on:{onInstall:function(t){return e.setupRepository(n.item)},onUninstall:function(t){return e.uninstallRepository(n.item)}}})]}}])}),e._v(" "),e.showSettings?t("InstallationSettings",{attrs:{repo:e.repo,"toolshed-url":e.toolshedUrl,"changeset-revision":e.selectedChangeset,"requires-panel":e.selectedRequiresPanel,"current-panel":e.panel.default,"tool-dynamic-configs":e.config.tool_dynamic_configs},on:{hide:e.onHide,ok:e.onOk}}):e._e()],1)],1)])])}),[],!1,null,null,null);const rS=sS.exports,lS={components:{LoadingSpan:z.Z,RepositoryDetails:rS},props:{repo:{type:Object,required:!0}},data:()=>({loading:!0,toolshedRepository:null,error:null}),created(){this.root=(0,g.getAppRoot)(),this.services=new Jx,this.load()},methods:{load(){this.loading=!0,this.services.getRepositoryByName(this.repo.tool_shed_url,this.repo.name,this.repo.owner).then((e=>{this.toolshedRepository=e,this.loading=!1})).catch((e=>{this.error=e}))}}};const dS=(0,m.Z)(lS,(function(){var e=this,t=e._self._c;return t("div",[e.error?t("div",{staticClass:"alert alert-danger",attrs:{show:""}},[e._v(e._s(e.error))]):t("div",[e.loading?t("span",[t("b-card",[t("LoadingSpan",{attrs:{message:"Loading installed repository details"}})],1)],1):t("div",[t("RepositoryDetails",{attrs:{repo:e.toolshedRepository,"toolshed-url":e.repo.tool_shed_url}})],1)])])}),[],!1,null,null,null).exports;a.default.use(d.ZPm);const cS={components:{InstallationActions:Qx},data:()=>({delay:5e3,loading:!0,error:null,items:[],fields:["name","status","actions"]}),computed:{showItems(){return this.items.length>0},showEmpty(){return!this.loading&&0===this.items.length}},created(){this.services=new Jx,this.load()},destroyed(){this.clearTimeout()},methods:{setTimeout(){this.clearTimeout(),this.timeout=setTimeout((()=>{this.load()}),this.delay)},clearTimeout(){this.timeout&&clearTimeout(this.timeout)},load(){this.services.getInstalledRepositories({filter:e=>"Installed"!==e.status}).then((e=>{this.items=e,this.loading=!1,this.setTimeout()})).catch((e=>{this.error=e}))},onQuery(e){this.$emit("onQuery",e)},uninstallRepository:function(e){this.services.uninstallRepository(e).catch((e=>{this.error=e}))}}};var uS=(0,m.Z)(cS,(function(){var e=this,t=e._self._c;return t("div",[e.error?t("b-alert",{attrs:{variant:"danger",show:""}},[e._v("\n        "+e._s(e.error)+"\n    ")]):e._e(),e._v(" "),e.showItems?t("b-card",{staticClass:"my-2",attrs:{"no-body":""}},[t("h2",{staticClass:"m-3 h-text"},[e._v("Currently installing...")]),e._v(" "),t("b-table",{staticClass:"mx-3 mb-0",attrs:{"sticky-header":"","thead-class":"installation-monitor-header",items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell(name)",fn:function(n){return[t("b-link",{on:{click:function(t){return e.onQuery(n.item.name)}}},[e._v(" "+e._s(n.item.name)+" ("+e._s(n.item.owner)+") ")])]}},{key:"cell(status)",fn:function(n){return[t("b",[e._v("Status: ")]),t("span",[e._v(e._s(n.item.status))])]}},{key:"cell(actions)",fn:function(n){return[t("InstallationActions",{staticClass:"float-right",attrs:{status:n.item.status},on:{onUninstall:function(t){return e.uninstallRepository(n.item)}}})]}}],null,!1,3584181372)})],1):e._e(),e._v(" "),e.showEmpty?t("b-alert",{attrs:{variant:"info",show:""}},[e._v(" Currently there are no installing repositories. ")]):e._e()],1)}),[],!1,null,null,null);const hS=uS.exports;a.default.use(d.ZPm);const pS={components:{LoadingSpan:z.Z,Monitor:hS,RepositoryDetails:dS},props:{filter:{type:String,required:!0}},data:()=>({error:null,loading:!0,message:null,messageVariant:null,nRepositories:0,repositories:[],showMonitor:!1,sortBy:"name"}),computed:{showNotFound(){return 0===this.nRepositories&&this.filter},showNotAvailable(){return 0===this.nRepositories&&!this.filter},showMessage(){return!!this.message},numToolsheds(){const e=new Set;return this.repositories.forEach((t=>{e.add(t.tool_shed)})),e.size},fields(){const e=[{key:"name",sortable:!0,sortByFormatted:(e,t,n)=>`${this.isLatest(n)}_${e}`},{key:"owner",sortable:!0}];return this.numToolsheds>1&&e.push({key:"tool_shed",sortable:!0}),e}},created(){this.root=(0,g.getAppRoot)(),this.services=new Jx,this.load()},methods:{isLatest(e){const t=e.tool_shed_status&&e.tool_shed_status.latest_installable_revision;return"false"!=String(t).toLowerCase()},load(){this.loading=!0,this.services.getInstalledRepositories({selectLatest:!0}).then((e=>{this.repositories=e,this.nRepositories=e.length,this.loading=!1})).catch((e=>{this.error=e}))},filtered(e){this.nRepositories=e.length},toggleMonitor(){this.showMonitor=!this.showMonitor},onQuery(e){this.$emit("onQuery",e)}}},fS=pS;var mS=(0,m.Z)(fS,(function(){var e=this,t=e._self._c;return t("div",[e.error?t("div",{staticClass:"alert alert-danger",attrs:{show:""}},[e._v(e._s(e.error))]):t("div",[e.loading?t("LoadingSpan",{attrs:{message:"Loading installed repositories"}}):t("div",[t("b-alert",{attrs:{variant:e.messageVariant,show:e.showMessage}},[e._v(e._s(e.message))]),e._v(" "),t("div",{staticClass:"m-1"},[t("span",{staticClass:"installed-message text-muted"},[e._v("\n                    "+e._s(e.repositories.length)+" repositories installed on this instance.\n                ")]),e._v(" "),t("b-link",{staticClass:"font-weight-bold",on:{click:e.toggleMonitor}},[e.showMonitor?t("span",[t("span",{staticClass:"fa fa-angle-double-up"}),e._v(" "),t("span",[e._v("Hide installation progress.")])]):t("span",[t("span",{staticClass:"fa fa-angle-double-down"}),e._v(" "),t("span",[e._v("Show installation progress.")])])])],1),e._v(" "),e.showMonitor?t("Monitor",{on:{onQuery:e.onQuery}}):e._e(),e._v(" "),t("b-table",{attrs:{id:"repository-table",striped:"",fields:e.fields,"sort-by":e.sortBy,items:e.repositories,filter:e.filter},on:{filtered:e.filtered},scopedSlots:e._u([{key:"cell(name)",fn:function(n){return[t("b-link",{staticClass:"font-weight-bold",attrs:{href:"#",role:"button"},on:{click:n.toggleDetails}},[e.isLatest(n.item)?e._e():t("div",[t("b-badge",{staticClass:"mb-2",attrs:{variant:"danger"}},[e._v(" Newer version available! ")])],1),e._v(" "),t("div",{staticClass:"name"},[e._v(e._s(n.item.name))])]),e._v(" "),t("div",[e._v(e._s(n.item.description))])]}},{key:"row-details",fn:function(e){return[t("RepositoryDetails",{attrs:{repo:e.item}})]}}])}),e._v(" "),e.showNotFound?t("div",[e._v("\n                No matching entries found for: "),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.filter))]),e._v(".\n            ")]):e._e(),e._v(" "),e.showNotAvailable?t("div",[e._v("No installed repositories found.")]):e._e()],1)],1)])}),[],!1,null,null,null);const _S=mS.exports;a.default.use(d.ZPm);const vS={components:{LoadingSpan:z.Z},props:{toolshedUrl:{type:String,required:!0},loading:{type:Boolean,required:!0}},data:()=>({categories:[],fields:[{key:"name",label:"Category",sortable:!0},{key:"description",sortable:!1},{key:"repositories",sortable:!0}]}),watch:{toolshedUrl(){this.load()}},created(){this.services=new Jx,this.load()},methods:{load(){this.$emit("onLoading",!0),this.services.getCategories(this.toolshedUrl).then((e=>{this.categories=e;this.$emit("onTotal",this.categories.reduce(((e,t)=>e+t.repositories),0)),this.$emit("onLoading",!1)})).catch((e=>{this.$emit("onError",e),this.$emit("onLoading",!1)}))},onCategory(e){this.$emit("onCategory",`category:'${e}'`)}}};var gS=(0,m.Z)(vS,(function(){var e=this,t=e._self._c;return t("div",[e.loading?t("LoadingSpan",{attrs:{message:"Loading categories"}}):t("b-table",{attrs:{striped:"","no-sort-reset":"",items:e.categories,fields:e.fields},scopedSlots:e._u([{key:"cell(name)",fn:function(n){return[t("b-link",{staticClass:"font-weight-bold",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return e.onCategory(n.value)}}},[e._v("\n                "+e._s(n.value)+"\n            ")])]}}])})],1)}),[],!1,null,null,null);const yS=gS.exports;a.default.use(d.ZPm);const bS={components:{LoadingSpan:z.Z,RepositoryDetails:rS},props:{query:{type:String,required:!0},scrolled:{type:Boolean,required:!0},toolshedUrl:{type:String,required:!0}},data:()=>({repositories:[],fields:[{key:"name"},{key:"owner",label:"Owner"},{key:"times_downloaded",label:"Downloaded"},{key:"last_updated",label:"Updated"}],page:1,pageSize:50,pageState:0,error:null}),computed:{pageLoading(){return 1===this.pageState},noResultsFound(){return 0===this.repositories.length&&!this.pageLoading}},watch:{toolshedUrl(){this.load()},query(){this.load()},scrolled(){this.scrolled&&0===this.pageState&&this.load(this.page+1)}},created(){this.services=new Jx,this.load()},methods:{load(e=1){this.page=e,this.pageState=1,1==e&&(this.repositories=[]),this.services.getRepositories({tool_shed_url:this.toolshedUrl,q:this.query,page:this.page,page_size:this.pageSize}).then((e=>{this.repositories=this.repositories.concat(e),e.length<this.pageSize?this.pageState=2:this.pageState=0})).catch((e=>{this.$emit("onError",e)}))}}};var wS=(0,m.Z)(bS,(function(){var e=this,t=e._self._c;return t("div",[t("b-table",{attrs:{id:"shed-search-results",striped:"",items:e.repositories,fields:e.fields},scopedSlots:e._u([{key:"cell(name)",fn:function(n){return[t("b-link",{staticClass:"font-weight-bold",attrs:{href:"javascript:void(0)",role:"button"},on:{click:n.toggleDetails}},[e._v("\n                "+e._s(n.item.name)+"\n            ")]),e._v(" "),t("div",[e._v(e._s(n.item.description))])]}},{key:"row-details",fn:function(n){return[t("RepositoryDetails",{attrs:{repo:n.item,"toolshed-url":e.toolshedUrl}})]}}])}),e._v(" "),e.noResultsFound?t("div",{staticClass:"unavailable-message"},[e._v("No matching repositories found.")]):e._e(),e._v(" "),e.pageLoading?t("LoadingSpan",{attrs:{message:"Loading repositories"}}):e._e()],1)}),[],!1,null,null,null);const kS=wS.exports;a.default.use(d.ZPm);const CS={props:{toolshedUrl:{type:String,required:!0},toolshedUrls:{type:Array,required:!0},loading:{type:Boolean,required:!0},total:{type:Number,required:!0}},computed:{showDropdown(){return this.toolshedUrls.length>1}},methods:{onToolshed(e){this.$emit("onToolshed",e)}}};const xS={components:{Categories:yS,Repositories:kS,ServerSelection:(0,m.Z)(CS,(function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"m-1 text-muted"},[t("span",{staticClass:"description"},[e._v(" "+e._s(e.total)+" repositories available at ")]),e._v(" "),e.showDropdown?t("span",{staticClass:"dropdown"},[t("b-link",{staticClass:"font-weight-bold",attrs:{id:"dropdownToolshedUrl","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n            "+e._s(e.toolshedUrl)+"\n            "),t("span",{staticClass:"fa fa-caret-down"})]),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownToolshedUrl"}},e._l(e.toolshedUrls,(function(n){return t("a",{key:n,staticClass:"dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.onToolshed(n)}}},[e._v(e._s(n))])})),0)],1):t("span",[t("b-link",{staticClass:"font-weight-bold",attrs:{href:e.toolshedUrl,target:"_blank"}},[e._v("\n            "+e._s(e.toolshedUrl)+"\n        ")])],1)])}),[],!1,null,"70b037db",null).exports},props:{query:{type:String,default:null},scrolled:{type:Boolean,required:!0}},data:()=>({toolshedUrl:null,toolshedUrls:[],queryLength:3,loading:!1,total:0,error:null,tabCurrent:"true",tabOptions:[{text:"Search All",value:!0},{text:"Installed Only",value:!1}]}),computed:{queryEmpty(){return!this.query||this.query.length<this.queryLength}},created(){this.configureToolsheds()},methods:{configureToolsheds(){const e=(0,l.Bz)();this.toolshedUrls=e.config.tool_shed_urls,this.toolshedUrls&&0!=this.toolshedUrls.length?this.toolshedUrl=this.toolshedUrls[0]:this.setError("Toolshed registry is empty, no servers found.")},setError(e){this.error=e},setQuery(e){this.$emit("onQuery",e)},setToolshed(e){this.error=null,this.toolshedUrl=e},setTotal(e){this.total=e},setLoading(e){this.loading=e}}};const SS={components:{SearchList:(0,m.Z)(xS,(function(){var e=this,t=e._self._c;return t("div",[t("ServerSelection",{attrs:{"toolshed-url":e.toolshedUrl,"toolshed-urls":e.toolshedUrls,total:e.total,loading:e.loading},on:{onToolshed:e.setToolshed}}),e._v(" "),e.error?t("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):t("div",[e.queryEmpty?e._e():t("Repositories",{attrs:{query:e.query,scrolled:e.scrolled,"toolshed-url":e.toolshedUrl},on:{onError:e.setError}}),e._v(" "),t("Categories",{directives:[{name:"show",rawName:"v-show",value:e.queryEmpty,expression:"queryEmpty"}],attrs:{"toolshed-url":e.toolshedUrl,loading:e.loading},on:{onCategory:e.setQuery,onTotal:e.setTotal,onError:e.setError,onLoading:e.setLoading}})],1)],1)}),[],!1,null,null,null).exports,InstalledList:_S},data:()=>({queryInput:null,queryDelay:1e3,queryTimer:null,queryLength:3,query:null,scrolled:!1,loading:!1,total:0,error:null,tabValue:!0,tabOptions:[{text:"Search All",value:!0},{text:"Installed Only",value:!1}],titleClearSearch:(0,Ee.ZP)("clear search (esc)")}),computed:{queryEmpty(){return!this.query||this.query.length<this.queryLength}},watch:{tabValue(){this.setQuery("")}},methods:{clearTimer(){this.queryTimer&&clearTimeout(this.queryTimer)},delayQuery(e){this.clearTimer(),e?this.queryTimer=setTimeout((()=>{this.setQuery(e)}),this.queryDelay):this.setQuery(e)},setError(e){this.error=e},setQuery(e){this.clearTimer(),this.query=this.queryInput=e},onScroll({target:{scrollTop:e,clientHeight:t,scrollHeight:n}}){this.scrolled=e+t>=n}}};const MS=(0,m.Z)(SS,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"overflow-auto h-100 p-1",on:{scroll:e.onScroll}},[e.error?t("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):t("div",[t("b-input-group",{staticClass:"mb-3"},[t("b-input",{attrs:{id:"toolshed-repo-search",placeholder:"Search Repositories"},on:{input:e.delayQuery,change:e.setQuery,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.setQuery()}},model:{value:e.queryInput,callback:function(t){e.queryInput=t},expression:"queryInput"}}),e._v(" "),t("b-input-group-append",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleClearSearch}},[t("b-btn",{on:{click:function(t){return e.setQuery()}}},[t("i",{staticClass:"fa fa-times"})])],1)],1),e._v(" "),t("b-form-radio-group",{staticClass:"mb-3",attrs:{options:e.tabOptions},model:{value:e.tabValue,callback:function(t){e.tabValue=t},expression:"tabValue"}}),e._v(" "),e.tabValue?t("div",[t("SearchList",{attrs:{query:e.query,scrolled:e.scrolled},on:{onQuery:e.setQuery,onError:e.setError}})],1):t("div",[t("InstalledList",{attrs:{filter:e.queryInput},on:{onQuery:e.setQuery}})],1)],1)])}),[],!1,null,null,null).exports;const TS={props:{enableQuotas:{type:Boolean,default:!1},isToolshedInstalled:{type:Boolean,default:!1},versionMajor:{type:String,default:""}},computed:{sections(){return[{title:"Server",items:[{id:"admin-link-datatypes",title:"Data Types",route:"/admin/data_types"},{id:"admin-link-data-tables",title:"Data Tables",route:"/admin/data_tables"},{id:"admin-link-display-applications",title:"Display Applications",route:"/admin/display_applications"},{id:"admin-link-jobs",title:"Jobs",route:"/admin/jobs"},{id:"admin-link-invocations",title:"Workflow Invocations",route:"/admin/invocations"},{id:"admin-link-local-data",title:"Local Data",route:"/admin/data_manager"},{id:"admin-link-notifications",title:"Notifications and Broadcasts",route:"/admin/notifications"}]},{title:"User Management",items:[{id:"admin-link-users",title:"Users",route:"/admin/users"},{id:"admin-link-quotas",title:"Quotas",route:"/admin/quotas",disabled:!this.enableQuotas},{id:"admin-link-groups",title:"Groups",route:"/admin/groups"},{id:"admin-link-roles",title:"Roles",route:"/admin/roles"},{id:"admin-link-forms",title:"Forms",route:"/admin/forms"}]},{title:"Tool Management",items:[{id:"admin-link-toolshed",title:"Install and Uninstall",route:"/admin/toolshed",disabled:!this.isToolshedInstalled},{id:"admin-link-metadata",title:"Manage Metadata",route:"/admin/reset_metadata"},{id:"admin-link-allowlist",title:"Manage Allowlist",route:"/admin/sanitize_allow"},{id:"admin-link-manage-dependencies",title:"Manage Dependencies",route:"/admin/toolbox_dependencies"},{id:"admin-link-tool-versions",title:"View Lineage",route:"/admin/tool_versions"},{id:"admin-link-error-stack",title:"View Error Logs",route:"/admin/error_stack"}]}]}}};const LS=(0,m.Z)(TS,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"unified-panel"},[t("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[t("div",{staticClass:"panel-header-text"},[e._v("Galaxy Version "+e._s(e.versionMajor))])])]),e._v(" "),t("div",{staticClass:"unified-panel-body"},[t("div",{staticClass:"toolMenuContainer"},[t("div",{staticClass:"toolSectionWrapper"},e._l(e.sections,(function(n,i){return t("div",{key:i,staticClass:"toolSectionTitle pt-1 px-3"},[t("h2",{staticClass:"font-weight-bold h-text mb-0"},[e._v(e._s(n.title))]),e._v(" "),t("div",{staticClass:"toolSectionBody"},e._l(n.items,(function(n,i){return t("div",{key:i,staticClass:"toolTitle"},[n.disabled?e._e():t("router-link",{staticClass:"title-link",attrs:{id:n.id,to:n.route}},[t("small",{staticClass:"name"},[e._v(e._s(n.title))])])],1)})),0)])})),0)])])])}),[],!1,null,null,null).exports,DS={__name:"Admin",setup(e){const{config:t,isConfigLoaded:n}=(0,c.Z)(),i=(0,a.computed)((()=>({enableQuotas:t.value.enable_quotas,isToolshedInstalled:t.value.tool_shed_urls&&t.value.tool_shed_urls.length>0,versionMajor:t.value.version_major})));return{__sfc:!0,config:t,isConfigLoaded:n,panelProperties:i,AdminPanel:LS,FlexPanel:La}}},ES=DS;const OS=[{path:"/admin",component:(0,m.Z)(ES,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.isConfigLoaded?t("div",{staticClass:"d-flex",attrs:{id:"columns"}},[t(n.FlexPanel,{attrs:{side:"left"}},[t(n.AdminPanel,e._b({},"AdminPanel",n.panelProperties,!1))],1),e._v(" "),t("div",{staticClass:"overflow-auto p-3 w-100",attrs:{id:"center"}},[t("router-view",{key:e.$route.fullPath})],1)],1):e._e()}),[],!1,null,null,null).exports,meta:{requiresAdmin:!0},children:[{path:"",component:YC,props:()=>{const e=(0,l.Bz)().config;return{isToolShedInstalled:e.tool_shed_urls&&e.tool_shed_urls.length>0}}},{path:"data_tables",component:Ok},{path:"data_types",component:Ik},{path:"display_applications",component:IC},{path:"error_stack",component:RC},{path:"invocations",component:dk},{path:"jobs",component:ax},{path:"reset_metadata",component:Wx},{path:"sanitize_allow",component:qx},{path:"toolbox_dependencies",component:TC},{path:"toolshed",component:MS},{path:"users/create",component:Ag,props:()=>{const e=(0,l.Bz)();return{redirect:"/admin/users",registrationWarningMessage:e.config.registration_warning_message,mailingJoinAddr:e.config.mailing_join_addr,serverMailConfigured:e.config.server_mail_configured,sessionCsrfToken:e.session_csrf_token}}},{path:"data_manager",component:bk,children:[{path:"",name:"DataManager",component:uk},{path:"jobs/:id",name:"DataManagerJobs",component:_k,props:!0},{path:"job/:id",name:"DataManagerJob",component:pk,props:!0},{path:"table/:name",name:"DataManagerTable",component:gk,props:!0}]},{path:"notifications",component:$x},{path:"notifications/create_new_broadcast",name:"NewBroadcast",component:fx},{path:"notifications/edit_broadcast/:id",name:"EditBroadcast",component:fx,props:!0},{path:"notifications/create_new_notification",name:"NewNotification",component:Ax},{path:"forms",component:Gx,props:{urlBase:"forms/forms_list"}},{path:"groups",component:Gx,props:{urlBase:"admin/groups_list"}},{path:"quotas",component:Gx,props:{urlBase:"admin/quotas_list"}},{path:"roles",component:Gx,props:{urlBase:"admin/roles_list"}},{path:"users",component:Gx,props:{urlBase:"admin/users_list"}},{path:"tool_versions",component:Gx,props:{urlBase:"admin/tool_versions_list"}},{path:"form/reset_user_password",component:sn,props:e=>({title:"Reset passwords",url:`/admin/reset_user_password?id=${e.query.id}`,icon:"fa-user",submitTitle:"Save new password",redirect:"/admin/users"})},{path:"form/manage_roles_and_groups_for_user",component:sn,props:e=>({url:`/admin/manage_roles_and_groups_for_user?id=${e.query.id}`,icon:"fa-users",redirect:"/admin/users"})},{path:"form/manage_users_and_groups_for_role",component:sn,props:e=>({url:`/admin/manage_users_and_groups_for_role?id=${e.query.id}`,redirect:"/admin/users"})},{path:"form/manage_users_and_roles_for_group",component:sn,props:e=>({url:`/admin/manage_users_and_roles_for_group?id=${e.query.id}`,redirect:"/admin/users"})},{path:"form/manage_users_and_groups_for_quota",component:sn,props:e=>({url:`/admin/manage_users_and_groups_for_quota?id=${e.query.id}`,redirect:"/admin/quotas"})},{path:"form/create_role",component:sn,props:{url:"/admin/create_role",redirect:"/admin/roles"}},{path:"form/create_group",component:sn,props:{url:"/admin/create_group",redirect:"/admin/groups"}},{path:"form/create_quota",component:sn,props:{url:"/admin/create_quota",redirect:"/admin/quotas"}},{path:"form/rename_role",component:sn,props:e=>({url:`/admin/rename_role?id=${e.query.id}`,redirect:"/admin/roles"})},{path:"form/rename_group",component:sn,props:e=>({url:`/admin/rename_group?id=${e.query.id}`,redirect:"/admin/groups"})},{path:"form/rename_quota",component:sn,props:e=>({url:`/admin/rename_quota?id=${e.query.id}`,redirect:"/admin/quotas"})},{path:"form/edit_quota",component:sn,props:e=>({url:`/admin/edit_quota?id=${e.query.id}`,redirect:"/admin/quotas"})},{path:"form/set_quota_default",component:sn,props:e=>({url:`/admin/set_quota_default?id=${e.query.id}`,redirect:"/admin/quotas"})},{path:"form/create_form",component:sn,props:{url:"/forms/create_form",redirect:"/admin/forms"}},{path:"form/edit_form",component:sn,props:e=>({url:`/forms/edit_form?id=${e.query.id}`,redirect:"/admin/forms"})}]}];const AS=[zo.gM,zo.Pk,h.LM3,h.U7t,h.DD4,h.g4A,zo.r6,h.NBC,h.gPx,h.tAh,h.UJf,h.FVb,zo.a3,zo.e3,h.El_],IS=[h.UXu,zo.r6,zo.gM],PS=[h.J9Y,h.r8p,h.$aW,h.q7m,h.FL8],RS=[h.g4A,h.UJf,zo.r6,h.NBC,h.$aW,h.FVb,h.J9Y,h.tAh];function jS(){IS.forEach((e=>u.vI.add(e)))}function YS(e){void 0!==e.responseJSON?oo.FN.error(e.responseJSON.err_msg):oo.FN.error("An error occurred during with the last library interaction")}function HS(e,t){return Object.entries(e).flatMap((([e,n])=>t[e]?{name:n,value:t[e]}:[]))}function NS(e){const t=[];return e&&e.forEach((e=>{t.push({name:e[0],id:e[1]})})),t}var FS=n(35334);a.default.use(d.ZPm);const BS={props:{text:{type:String},changedValue:{type:String},isEditMode:{type:Boolean},isExpanded:{type:Boolean}},data:()=>({maxDescriptionLength:40}),methods:{sanitize:pf.sanitize,updateValue(e){this.$emit("update:changedValue",e)},toggleDescriptionExpand(){this.$emit("toggleDescriptionExpand")},linkify:e=>(0,FS.Z)(e)}};const $S=(0,m.Z)(BS,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"text-field"},[e.isEditMode?t("div",[t("b-form-textarea",{staticClass:"form-control",attrs:{value:e.text,rows:"3","no-resize":""},on:{change:e.updateValue}})],1):e.text.length>e.maxDescriptionLength&&!e.isExpanded?t("div",[t("span",{staticClass:"shrinked-description",attrs:{title:e.text},domProps:{innerHTML:e._s(e.linkify(e.sanitize(e.text.substring(0,e.maxDescriptionLength))))}}),e._v(" "),t("span",{attrs:{title:e.text}},[e._v("...")]),e._v(" "),t("a",{staticClass:"more-text-btn",attrs:{href:"javascript:void(0)"},on:{click:e.toggleDescriptionExpand}},[e._v("(more) ")])]):t("div",[t("div",{domProps:{innerHTML:e._s(e.linkify(e.sanitize(e.text)))}}),e._v(" "),e.text.length>e.maxDescriptionLength?t("a",{staticClass:"more-text-btn",attrs:{href:"javascript:void(0)"},on:{click:e.toggleDescriptionExpand}},[e._v("(less)\n            ")]):e._e()])])])}),[],!1,null,"ceca9532",null).exports;const zS={name:"SearchField",props:{typingDelay:{type:Number,default:1e3,required:!1}},data:()=>({search:"",awaitingSearch:!1,titleSearch:(0,Ee.ZP)("Search")}),watch:{search:function(){this.awaitingSearch||setTimeout((()=>{this.startSearch()}),this.typingDelay),this.awaitingSearch=!0}},methods:{startSearch(){this.$emit("updateSearch",this.search),this.awaitingSearch=!1}}};const WS=(0,m.Z)(zS,(function(){var e=this,t=e._self._c;return t("b-input-group",{attrs:{size:"sm"}},[t("b-form-input",{staticClass:"mr-1",attrs:{id:"filterInput",type:"search",placeholder:e.titleSearch},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.startSearch()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)}),[],!1,null,"5a9ac56a",null).exports;class US{constructor(e={}){this.root=e.root||(0,g.getAppRoot)()}async getLibraries(e=!1){const t=`${this.root}api/libraries?deleted=${e}`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}}async saveChanges(e,t,n){const i=`${this.root}api/libraries/${e.id}`;try{return v.Z.patch(i,e).then((e=>{t(e.data)})).catch((e=>{n(e)})).data}catch(e){(0,y.t)(e)}}async deleteLibrary(e,t,n,i=!1){const o=`${this.root}api/libraries/${e.id}${i?"?undelete=true":""}`;try{return v.Z.delete(o,e).then((e=>{t(e.data)})).catch((e=>{n(e)})).data}catch(e){(0,y.t)(e)}}async createNewLibrary(e,t,n,i,o){const a=`${this.root}api/libraries`;try{return v.Z.post(a,{name:e,description:t,synopsis:n}).then((e=>{i(e.data)})).catch((e=>{o(e)})).data}catch(e){(0,y.t)(e)}}}const VS=[{label:"Name",key:"name",sortable:!0},{label:"Description",key:"description",sortable:!1},{label:"Synopsis",key:"synopsis",sortable:!1},{label:"",key:"is_unrestricted",sortable:!1},{label:"",key:"buttons",sortable:!1}];RS.forEach((e=>u.vI.add(e))),a.default.use(d.ZPm);const qS={components:{FontAwesomeIcon:p.GN,LibraryEditField:$S,SearchField:WS},data:()=>({newDescriptionProperty:"newDescription",newSynopsisProperty:"newSynopsis",isNewLibFormVisible:!1,currentPage:1,fields:VS,perPage:10,librariesList:[],maxDescriptionLength:40,includeDeleted:!1,exclude_restricted:!1,filterOn:[],excluded:[],filter:null,newLibraryForm:{name:"",description:"",synopsis:""},titleLibrary:(0,Ee.ZP)("Library"),titleName:(0,Ee.ZP)("Name"),titleDescription:(0,Ee.ZP)("Description"),titleSynopsis:(0,Ee.ZP)("Synopsis"),titleSave:(0,Ee.ZP)("Save"),titleUndelete:(0,Ee.ZP)("Undelete"),titleEdit:(0,Ee.ZP)("Edit"),titleCancel:(0,Ee.ZP)("Cancel"),titleDelete:(0,Ee.ZP)("Delete"),titlePerPage:(0,Ee.ZP)("per page"),titleTotal:(0,Ee.ZP)("total"),sortBy:"name"}),computed:{...(0,o.rn)(Xe.L,["currentUser"]),rows(){return this.librariesList.length}},created(){this.root=(0,g.getAppRoot)(),this.services=new US({root:this.root}),this.loadLibraries(this.includeDeleted)},methods:{loadLibraries(e=!1){this.services.getLibraries(e).then((e=>this.librariesList=e))},toggleEditMode(e){e.editMode=!e.editMode,this.$refs.libraries_list.refresh()},toggleDescriptionExpand(e){e.isExpanded=!e.isExpanded,this.$refs.libraries_list.refresh()},saveChanges(e){const t=e[this.newDescriptionProperty],n=e[this.newSynopsisProperty];t&&(e.description=t),n&&(e.synopsis=n),this.services.saveChanges(e,(()=>{oo.FN.success("Changes to library saved")}),(e=>YS(e))),this.toggleEditMode(e)},deleteLibrary(e){this.services.deleteLibrary(e,(()=>{oo.FN.success("Library has been marked deleted."),e.deleted=!0,this.toggleEditMode(e),this.includeDeleted||this.hideOn("deleted",!1)}),(e=>YS(e)))},gotoFirstPage(){this.currentPage=1},onFiltered(e){this.totalRows=e.length,this.currentPage=1},searchValue(e){this.filter=e},toggle_include_deleted(e){this.includeDeleted=e,this.includeDeleted?this.services.getLibraries(this.includeDeleted).then((e=>{this.librariesList=this.librariesList.concat(e),this.$refs.libraries_list.refresh()})):this.hideOn("deleted",!1)},toggle_exclude_restricted(e){this.exclude_restricted=e,this.exclude_restricted?this.excluded=this.hideOn("public",!0):this.librariesList=this.librariesList.concat(this.excluded)},hideOn(e,t){const n=[];return this.librariesList=this.librariesList.filter((i=>{if(i[e]===t)return i;n.push(i)})),n},undelete(e){this.services.deleteLibrary(e,(()=>{e.deleted=!1,oo.FN.success("Library has been undeleted."),this.$refs.libraries_list.refresh()}),(e=>YS(e)),!0)},newLibrary(){this.services.createNewLibrary(this.newLibraryForm.name,this.newLibraryForm.description,this.newLibraryForm.synopsis,(e=>{this.librariesList.push(e),this.newLibraryForm.name="",this.newLibraryForm.description="",this.newLibraryForm.synopsis="",this.isNewLibFormVisible=!1,oo.FN.success("Library created.")}),(e=>YS(e)))}}},ZS=qS;var GS=(0,m.Z)(ZS,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"form-inline d-flex align-items-center mb-2"},[t("b-button",{staticClass:"mr-1",attrs:{title:"go to first page"},on:{click:e.gotoFirstPage}},[t("FontAwesomeIcon",{attrs:{icon:"home"}})],1),e._v(" "),e.currentUser&&e.currentUser.is_admin?t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-2",modifiers:{"collapse-2":!0}}],staticClass:"mr-1",attrs:{id:"create-new-lib",title:"Create new folder"}},[t("FontAwesomeIcon",{attrs:{icon:"plus"}}),e._v("\n            "+e._s(e.titleLibrary)+"\n        ")],1):e._e(),e._v(" "),t("SearchField",{attrs:{"typing-delay":0},on:{updateSearch:function(t){return e.searchValue(t)}}}),e._v(" "),e.currentUser&&e.currentUser.is_admin?t("b-form-checkbox",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mr-1",on:{input:function(t){return e.toggle_include_deleted(t)}}},[e._v("\n            include deleted\n        ")]):e._e(),e._v(" "),t("b-form-checkbox",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mr-1",on:{input:function(t){return e.toggle_exclude_restricted(t)}}},[e._v("\n            exclude restricted\n        ")])],1),e._v(" "),t("b-collapse",{attrs:{id:"collapse-2"},model:{value:e.isNewLibFormVisible,callback:function(t){e.isNewLibFormVisible=t},expression:"isNewLibFormVisible"}},[t("b-card",[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.newLibrary.apply(null,arguments)}}},[t("b-input-group",{staticClass:"mb-2 new-row",scopedSlots:e._u([{key:"append",fn:function(){return[t("b-button",{attrs:{id:"save_new_library",type:"submit",title:e.titleSave}},[t("FontAwesomeIcon",{attrs:{icon:["far","save"]}}),e._v("\n                            "+e._s(e.titleSave)+"\n                        ")],1)]},proxy:!0}])},[t("b-form-input",{attrs:{required:"",placeholder:e.titleName},model:{value:e.newLibraryForm.name,callback:function(t){e.$set(e.newLibraryForm,"name",t)},expression:"newLibraryForm.name"}}),e._v(" "),t("b-form-input",{attrs:{required:"",placeholder:e.titleDescription},model:{value:e.newLibraryForm.description,callback:function(t){e.$set(e.newLibraryForm,"description",t)},expression:"newLibraryForm.description"}}),e._v(" "),t("b-form-input",{attrs:{placeholder:e.titleSynopsis},model:{value:e.newLibraryForm.synopsis,callback:function(t){e.$set(e.newLibraryForm,"synopsis",t)},expression:"newLibraryForm.synopsis"}})],1)],1)],1)],1),e._v(" "),t("b-table",{ref:"libraries_list",attrs:{id:"libraries_list","no-sort-reset":"",striped:"",hover:"",fields:e.fields,items:e.librariesList,"sort-by":e.sortBy,"per-page":e.perPage,"current-page":e.currentPage,"show-empty":"",filter:e.filter,"filter-included-fields":e.filterOn},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(name)",fn:function(n){return[n.item.editMode?t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.item.name,expression:"row.item.name"}],staticClass:"form-control input_library_name",attrs:{"aria-label":"Library name",rows:"3"},domProps:{value:n.item.name},on:{input:function(t){t.target.composing||e.$set(n.item,"name",t.target.value)}}}):n.item.deleted&&e.includeDeleted?t("div",{staticClass:"deleted-item"},[e._v(e._s(n.item.name))]):t("b-link",{attrs:{to:{path:`/libraries/folders/${n.item.root_folder_id}`}}},[e._v("\n                "+e._s(n.item.name)+"\n            ")])]}},{key:"cell(description)",fn:function({item:n}){return[t("LibraryEditField",{ref:`description-${n.id}`,attrs:{"is-expanded":n.isExpanded,"is-edit-mode":n.editMode,text:n.description,"changed-value":n[e.newDescriptionProperty]},on:{"update:changedValue":function(t){return e.$set(n,e.newDescriptionProperty,t)},"update:changed-value":function(t){return e.$set(n,e.newDescriptionProperty,t)},toggleDescriptionExpand:function(t){return e.toggleDescriptionExpand(n)}}})]}},{key:"cell(synopsis)",fn:function({item:n}){return[t("LibraryEditField",{ref:`synopsis-${n.id}`,attrs:{"is-expanded":n.isExpanded,"is-edit-mode":n.editMode,text:n.synopsis,"changed-value":n[e.newSynopsisProperty]},on:{"update:changedValue":function(t){return e.$set(n,e.newSynopsisProperty,t)},"update:changed-value":function(t){return e.$set(n,e.newSynopsisProperty,t)},toggleDescriptionExpand:function(t){return e.toggleDescriptionExpand(n)}}})]}},{key:"cell(is_unrestricted)",fn:function(n){return[n.item.public&&!n.item.deleted?t("FontAwesomeIcon",{attrs:{title:"Public library",icon:"globe"}}):e._e()]}},{key:"cell(buttons)",fn:function(n){return[n.item.deleted?t("b-button",{attrs:{size:"sm",title:"Undelete "+n.item.name},on:{click:function(t){return e.undelete(n.item)}}},[t("FontAwesomeIcon",{attrs:{icon:"unlock"}}),e._v("\n                "+e._s(e.titleUndelete)+"\n            ")],1):e._e(),e._v(" "),n.item.can_user_modify&&n.item.editMode?t("b-button",{staticClass:"lib-btn permission_folder_btn",attrs:{size:"sm",title:"Permissions of "+n.item.name},on:{click:function(t){return e.saveChanges(n.item)}}},[t("FontAwesomeIcon",{attrs:{icon:["far","save"]}}),e._v("\n                "+e._s(e.titleSave)+"\n            ")],1):e._e(),e._v(" "),n.item.can_user_modify&&!n.item.deleted?t("b-button",{staticClass:"lib-btn edit_library_btn save_library_btn",attrs:{size:"sm",title:`Edit ${n.item.name}`},on:{click:function(t){return e.toggleEditMode(n.item)}}},[n.item.editMode?t("div",[t("FontAwesomeIcon",{attrs:{icon:["fas","times"]}}),e._v("\n                    "+e._s(e.titleCancel)+"\n                ")],1):t("div",[t("FontAwesomeIcon",{attrs:{icon:"pencil-alt"}}),e._v("\n                    "+e._s(e.titleEdit)+"\n                ")],1)]):e._e(),e._v(" "),e.currentUser&&e.currentUser.is_admin&&!n.item.deleted?t("b-button",{staticClass:"lib-btn permission_library_btn",attrs:{size:"sm",title:"Permissions of "+n.item.name,to:{path:`/libraries/${n.item.id}/permissions`}}},[t("FontAwesomeIcon",{attrs:{icon:"users"}}),e._v("\n                Manage\n            ")],1):e._e(),e._v(" "),e.currentUser&&e.currentUser.is_admin&&n.item.editMode&&!n.item.deleted?t("b-button",{staticClass:"lib-btn delete-lib-btn",attrs:{size:"sm",title:`Delete ${n.item.name}`},on:{click:function(t){return e.deleteLibrary(n.item)}}},[t("FontAwesomeIcon",{attrs:{icon:"trash"}}),e._v("\n                "+e._s(e.titleDelete)+"\n            ")],1):e._e()]}}])}),e._v(" "),t("b-container",[t("b-row",{staticClass:"justify-content-md-center"},[t("b-col",{attrs:{md:"auto"}},[t("b-pagination",{attrs:{"total-rows":e.rows,"per-page":e.perPage,"aria-controls":"libraries_list"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),e._v(" "),t("b-col",{attrs:{cols:"1.5"}},[t("table",[t("tr",[t("td",{staticClass:"m-0 p-0"},[t("b-form-input",{staticClass:"pagination-input-field",attrs:{id:"paginationPerPage",autocomplete:"off",type:"number",onkeyup:"this.value|=0;if(this.value<1)this.value=1"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e._v(" "),t("td",{staticClass:"text-muted ml-1 paginator-text"},[t("span",{staticClass:"pagination-total-pages-text"},[e._v(e._s(e.titlePerPage)+", "+e._s(e.rows)+" "+e._s(e.titleTotal))])])])])])],1)],1)],1)}),[],!1,null,"1335da04",null);const JS=GS.exports;class KS{constructor(e={}){this.root=e.root||(0,g.getAppRoot)()}async getFolderContents(e,t,n,i,o,a,s){const r=`${this.root}api/folders/${e}/contents`,l={params:{include_deleted:t,sort_by:n,sort_desc:i,limit:o,offset:a}};(s=s.trim())&&(l.params.search_text=s);try{return(await v.Z.get(r,l)).data}catch(e){(0,y.t)(e)}}async getFilteredFolderContents(e,t,n){const i={params:{limit:0}};n=n?.trim(),n&&(i.params.search_text=n);return(await v.Z.get(`${this.root}api/folders/${e}/contents`,i)).data.folder_contents.filter((e=>!t.some((t=>t.id===e.id))))}updateFolder(e,t,n){const i=`${this.root}api/folders/${e.id}`;try{return v.Z.patch(i,e).then((()=>{t()})).catch((e=>{n(e)})).data}catch(e){(0,y.t)(e)}}newFolder(e,t,n){const i=`${this.root}api/folders/${e.parent_id}`;try{return v.Z.post(i,{name:e.name,description:e.description}).then((e=>{t(e.data)})).catch((e=>{n(e)})).data}catch(e){(0,y.t)(e)}}undeleteFolder(e,t,n){const i=`${this.root}api/folders/${e.id}?undelete=true`;try{return v.Z.delete(i).then((e=>{t(e.data)})).catch((e=>{n(e)})).data}catch(e){(0,y.t)(e)}}undeleteDataset(e,t,n){const i=`${this.root}api/libraries/datasets/${e.id}?undelete=true`;try{return v.Z.delete(i).then((e=>{t(e.data)})).catch((e=>{n(e)})).data}catch(e){(0,y.t)(e)}}async getDataset(e,t){const n=`${this.root}api/libraries/datasets/${e}`;try{return(await v.Z.get(n).catch((e=>{t(e)}))).data}catch(e){(0,y.t)(e)}}async updateDataset(e,t,n,i){const o=`${this.root}api/libraries/datasets/${e}`;try{await v.Z.patch(o,t).then((e=>n(e.data))).catch((e=>{i(e.err_msg)}))}catch(e){(0,y.t)(e)}}}const XS=[{label:"",key:"type_icon"},{label:"&check;",key:"selected",sortable:!1},{label:"Name",key:"name",sortable:!0},{label:"Description",key:"message",sortable:!0},{label:"Type",key:"type",sortable:!0},{label:"Size",key:"raw_size",sortable:!0},{label:"Updated",key:"update_time",sortable:!0},{label:"State",key:"state",sortable:!1},{label:"",key:"is_unrestricted",sortable:!1},{label:"",key:"buttons",sortable:!1}];u.vI.add(h.sqG);const QS={components:{FontAwesomeIcon:p.GN,UtcDate:J.Z},props:{id:{type:String,required:!0},metadata:{type:Object,required:!0},isStatic:{type:Boolean,required:!1,default:!1}},data:()=>({detailsCaption:(0,Ee.ZP)("Details"),folderHeader:(0,Ee.ZP)("Folder"),libraryHeader:(0,Ee.ZP)("Library"),titleLocationDetails:(0,Ee.ZP)("Location Details"),fields:[{key:"name",tdClass:"name-column"},{key:"value"}],folderFieldTitles:{folder_name:(0,Ee.ZP)("Name"),folder_description:(0,Ee.ZP)("Description"),id:"ID"},libraryFieldTitles:{name:(0,Ee.ZP)("Name"),description:(0,Ee.ZP)("Description"),synopsis:(0,Ee.ZP)("Synopsis"),create_time_pretty:(0,Ee.ZP)("Created"),id:"ID"},libraryDetails:null,folderDetails:null,error:null}),computed:{hasError(){return!!this.error}},methods:{async getDetails(){const e={...this.metadata,id:this.id};this.folderDetails=HS(this.folderFieldTitles,e),this.libraryDetails=await this.retrieveLibraryDetails()},async retrieveLibraryDetails(){try{this.error=null;const e=`${(0,g.getAppRoot)()}api/libraries/${this.metadata.parent_library_id}`,t=await v.Z.get(e);return HS(this.libraryFieldTitles,t.data)}catch(e){return this.error=`${(0,Ee.ZP)("Failed to retrieve library details.")} ${e}`,null}}}};var eM=(0,m.Z)(QS,(function(){var e=this,t=e._self._c;return t("div",[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.details-modal",modifiers:{"details-modal":!0}}],staticClass:"details-btn",attrs:{title:"Show location details","data-testid":"loc-details-btn"}},[t("FontAwesomeIcon",{attrs:{icon:"info-circle"}}),e._v(" "+e._s(e.detailsCaption)+"\n    ")],1),e._v(" "),t("b-modal",{attrs:{id:"details-modal",static:e.isStatic,title:e.titleLocationDetails,"title-tag":"h3","ok-only":""},on:{show:e.getDetails}},[t("div",[t("b-alert",{attrs:{show:e.hasError,variant:"danger","data-testid":"error-alert"}},[e._v(" "+e._s(e.error)+" ")]),e._v(" "),e.libraryDetails?t("div",[t("b-table-lite",{attrs:{fields:e.fields,items:e.libraryDetails,striped:"",small:"","caption-top":"","thead-class":"d-none","data-testid":"library-table"},scopedSlots:e._u([{key:"table-caption",fn:function(){return[t("h2",{staticClass:"h-sm"},[t("b",[e._v(e._s(e.libraryHeader))])])]},proxy:!0}],null,!1,4143371080)})],1):e._e(),e._v(" "),t("div",[t("b-table-lite",{attrs:{fields:e.fields,items:e.folderDetails,striped:"",small:"","caption-top":"","thead-class":"d-none","data-testid":"folder-table"},scopedSlots:e._u([{key:"table-caption",fn:function(){return[t("h2",{staticClass:"h-sm"},[t("b",[e._v(e._s(e.folderHeader))])])]},proxy:!0},{key:"cell(value)",fn:function(n){return[n.item.name===e.libraryFieldTitles.create_time_pretty?t("div",[t("UtcDate",{attrs:{date:n.item.value,mode:"elapsed"}})],1):t("div",[e._v(e._s(n.item.value))])]}}])})],1)],1)])],1)}),[],!1,null,null,null);const tM=eM.exports;const nM={props:{full_path:{type:Array,required:!0},currentId:{type:String,required:!1,default:void 0}},methods:{isCurrentId(e){return this.currentId===e}}};const iM=(0,m.Z)(nM,(function(){var e=this,t=e._self._c;return t("b-breadcrumb",[t("b-breadcrumb-item",{attrs:{title:"Return to the list of libraries",to:{path:"/libraries"}}},[e._v("\n        Libraries\n    ")]),e._v(" "),e._l(e.full_path,(function(n){return[t("b-breadcrumb-item",{key:n[0],attrs:{title:e.isCurrentId(n[0])?"You are here":"Return to this folder",active:e.isCurrentId(n[0]),to:{path:`/libraries/folders/${n[0]}`},href:"#"}},[e._v(e._s(n[1]))])]}))],2)}),[],!1,null,null,null).exports;n(10383);const oM={View:xn().View.extend({optionsDefault:{css:"",placeholder:"No data available",data:[],value:null,multiple:!1,minimumInputLength:0,maximumTextLength:100,initialData:""},initialize:function(e){if(this.options=fe.ZP.merge(e,this.optionsDefault),this.setElement(this._template(this.options)),this.options.container){if(this.options.container.append(this.$el),this.select_data=this.options.data,this._refresh(),!this.options.multiple){this.options.value&&this._setValue(this.options.value);var t=this;this.options.onchange&&this.$el.on("change",(()=>{t.options.onchange(t.value())}))}}else console.log("ui-select::initialize() : container not specified.")},value:function(e){var t=this._getValue();void 0!==e&&this._setValue(e);var n=this._getValue();return n!=t&&this.options.onchange&&this.options.onchange(n),n},text:function(){return this.$el.select2("data").text},disabled:function(){return!this.$el.select2("enable")},enable:function(){this.$el.select2("enable",!0)},disable:function(){this.$el.select2("enable",!1)},add:function(e){this.select_data.push({id:e.id,text:e.text}),this._refresh()},del:function(e){var t=this._getIndex(e);-1!=t&&(this.select_data.splice(t,1),this._refresh())},remove:function(){this.$el.select2("destroy")},update:function(e){for(var t in this.select_data=[],e.data)this.select_data.push(e.data[t]);this._refresh()},_refresh:function(){let e;if(this.options.multiple)e={multiple:this.options.multiple,containerCssClass:this.options.css,placeholder:this.options.placeholder,minimumInputLength:this.options.minimumInputLength,ajax:this.options.ajax,dropdownCssClass:this.options.dropdownCssClass,escapeMarkup:this.options.escapeMarkup,formatResult:this.options.formatResult,formatSelection:this.options.formatSelection,initSelection:this.options.initSelection,initialData:this.options.initialData},this.$el.select2(e);else{this.select_data&&this.select_data.map((e=>{const t=this.options.maximumTextLength+3;if(e.text&&e.text.length>t){let n=e.text.indexOf(`(${e.id})`);n=-1!=n&&n<t?n:t;const i=e.text.substring(0,n).replace(/[ .]*$/,"");e.text=`${i}...(${e.id})`}}));var t=this._getValue();e={data:this.select_data,containerCssClass:this.options.css,placeholder:this.options.placeholder,dropdownAutoWidth:!0},this.$el.select2(e),this._setValue(t)}},_getIndex:function(e){Nu.default.findIndex(this.select_data,{id:e})},_getValue:function(){return this.$el.select2("val")},_setValue:function(e){-1==this._getIndex(e)&&this.select_data.length>0&&(e=this.select_data[0].id),this.$el.select2("val",e)},_template:function(e){return`<input type="hidden" value="${this.options.initialData}"/>`}})};var aM=(e,t)=>(n,i)=>{return n.has(e)||i.has(e)?n.has(e)?i.has(e)?("number"==typeof n.get(e)?(o=n.get(e),a=i.get(e)):(o=n.get(e).toLowerCase(),a=i.get(e).toLowerCase()),o>a?"asc"===t?1:-1:a>o?"asc"===t?-1:1:0):-1:1:0;var o,a},sM=xn().Model.extend({urlRoot:`${(0,g.getAppRoot)()}api/libraries/`,isVisible:function(e){var t=!0;return!e&&this.get("deleted")&&(t=!1),t}}),rM=xn().Collection.extend({urlRoot:`${(0,g.getAppRoot)()}api/libraries`,model:sM,initialize:function(e){e=e||{}},search:function(e){if(""==e)return this;var t=e.toLowerCase();return this.filter((e=>-1!==e.get("name").toLowerCase().indexOf(t)))},getVisible:function(e,t){return t=t||[],new rM(this.filter((t=>t.isVisible(e))))},sortLibraries:function(e,t){this.comparator=aM(e,t),this.sort()}}),lM=xn().Model.extend({}),dM=lM.extend({urlRoot:`${(0,g.getAppRoot)()}api/libraries/datasets/`}),cM=lM.extend({urlRoot:`${(0,g.getAppRoot)()}api/folders/`}),uM=xn().Collection.extend({model:lM}),hM=xn().Model.extend({defaults:{folder:new uM,urlRoot:`${(0,g.getAppRoot)()}api/folders/`,id:"unknown"},search:function(e){if(""==e)return this;const t=e.toLowerCase();return this.get("folder").filter((e=>-1!==e.get("name").toLowerCase().indexOf(t)))},sortFolder:function(e,t){return this.get("folder").comparator=aM(e,t),this.get("folder").sort(),this.get("folder")},parse:function(e){this.get("folder").reset();for(var t=0;t<e.folder_contents.length;t++)if("folder"===e.folder_contents[t].type){var n=new cM(e.folder_contents[t]);this.get("folder").add(n)}else if("file"===e.folder_contents[t].type){var i=new dM(e.folder_contents[t]);this.get("folder").add(i)}else console.error("Unknown folder item type encountered while parsing response.");return e}}),pM=xn().Model.extend({urlRoot:`${(0,g.getAppRoot)()}api/histories/`}),fM=xn().Collection.extend({urlRoot:`${(0,g.getAppRoot)()}api/histories/`,initialize:function(e){this.id=e.id},url:function(){return`${this.urlRoot+this.id}/contents?shareable=true`},model:pM}),mM=xn().Model.extend({urlRoot:`${(0,g.getAppRoot)()}api/histories/`}),_M=xn().Collection.extend({url:`${(0,g.getAppRoot)()}api/histories`,model:mM}),vM=xn().Model.extend({urlRoot:`${(0,g.getAppRoot)()}api/remote_files`});const gM={Library:sM,Libraries:rM,Item:dM,Ldda:dM,FolderAsModel:cM,Folder:uM,FolderContainer:hM,HistoryItem:pM,HistoryContents:fM,GalaxyHistory:mM,GalaxyHistories:_M,Jstree:vM};let yM=0,bM=0,wM=0;const kM={};function CM(e,t,n,i){const o=(0,l.Bz)();var a=[],s=[];if(0===e.length)oo.FN.info("You must select at least one item for deletion.");else{var r=Nu.default.template('<div class="import_text">\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>');o.modal.show({closing_events:!0,title:(0,Ee.ZP)("Deleting selected items"),body:r({}),buttons:{Close:()=>{o.modal.hide()}}}),kM.total_number=0,kM.failed_number=0,e.forEach((e=>{const t=e.id;void 0!==t&&("F"==t.substring(0,1)?s.push(t):a.push(t))})),bM=a.length+s.length,wM=100/bM,yM=0;var d=[];for(let e=a.length-1;e>=0;e--){var c=new gM.Item({id:a[e]});d.push(c)}for(let e=s.length-1;e>=0;e--){var u=new gM.FolderAsModel({id:s[e]});d.push(u)}kM.total_number=bM,xM(d,t,n,i)}}function xM(e,t,n,i){const o=(0,l.Bz)(),a=new gM.Folder;var s=e.pop();if(void 0===s)return 0===kM.failed_number?(i(),oo.FN.success("Selected items were deleted.")):kM.failed_number===kM.total_number?oo.FN.error("There was an error and no items were deleted. Please make sure you have sufficient permissions."):kM.failed_number<kM.total_number&&oo.FN.warning("Some of the items could not be deleted. Please make sure you have sufficient permissions."),o.modal.hide(),a;s.destroy().done((o=>{t(o),SM(),xM(e,t,n,i)})).fail((()=>{kM.failed_number+=1,SM(),xM(e,t,n,i)})),n()}function SM(){yM+=wM,Mn()(".progress-bar-import").width(`${Math.round(yM)}%`);var e=`${Math.round(yM)}% Complete`;Mn()(".completion_span").text(e)}const MM={AddDatasets:xn().View.extend({options:null,initialize:function(e){this.options=e,this.options.chain_call_control={total_number:0,failed_number:0},this.list_extensions=e.list_extensions,this.list_genomes=e.list_genomes,this.showImportModal(e)},showImportModal:function(e){switch(e.source){case"history":this.addFilesFromHistoryModal();break;case"importdir":this.importFilesFromGalaxyFolderModal({source:"importdir"});break;case"path":this.importFilesFromPathModal();break;case"userdir":this.importFilesFromGalaxyFolderModal({source:"userdir"});break;default:oo.FN.error("Invalid import source.")}},templateBrowserModal:function(){return Nu.default.template('<div id="file_browser_modal">\n                    <div style="margin-bottom:1em;">\n                        <label title="Switch to selecting files" class="radio-inline import-type-switch">\n                            <input type="radio" name="jstree-radio" value="jstree-disable-folders" checked="checked">\n                            Choose Files\n                        </label>\n                        <label title="Switch to selecting folders" class="radio-inline import-type-switch">\n                            <input type="radio" name="jstree-radio" value="jstree-disable-files">\n                            Choose Folders\n                        </label>\n                    </div>\n                    <div class="alert alert-info jstree-files-message">\n                        All files you select will be imported into the current folder ignoring their folder structure.\n                    </div>\n                    <div class="alert alert-info jstree-folders-message" style="display:none;">\n                        All files within the selected folders and their subfolders will be imported into the current folder.\n                    </div>\n                    <div style="margin-bottom:1em;">\n                        <label class="checkbox-inline jstree-preserve-structure" style="display:none;">\n                            <input class="preserve-checkbox" type="checkbox" value="preserve_directory_structure">\n                                Preserve directory structure\n                            </label>\n                        <label class="checkbox-inline">\n                            <input class="link-checkbox" type="checkbox" value="link_files">\n                                Link files instead of copying\n                        </label>\n                        <label class="checkbox-inline">\n                            <input class="posix-checkbox" type="checkbox" value="to_posix_lines" checked="checked">\n                                Convert line endings to POSIX\n                        </label>\n                        <label class="checkbox-inline">\n                            <input class="spacetab-checkbox" type="checkbox" value="space_to_tab">\n                                Convert spaces to tabs\n                        </label>\n                    </div>\n                    <button title="Select all files" type="button" class="button primary-button libimport-select-all">\n                        Select all\n                    </button>\n                    <button title="Select no files" type="button" class="button primary-button libimport-select-none">\n                        Unselect all\n                    </button>\n                    <hr /> \x3c!-- append jstree object here --\x3e\n                    <div id="jstree_browser">\n                    </div>\n                    <hr />\n                    <p>You can set extension type and genome for all imported datasets at once:</p>\n                    <div>\n                        Type: <span id="library_extension_select" class="library-extension-select" />\n                        Genome: <span id="library_genome_select" class="library-genome-select" />\n                    </div>\n                    <br />\n                    <div>\n                        <label class="checkbox-inline tag-files">\n                            Tag datasets based on file names\n                            <input class="tag-files" type="checkbox" value="tag_using_filenames">\n                        </label>\n                    </div>\n                </div>')},templateImportPathModal:function(){return Nu.default.template('<div id="file_browser_modal">\n                <div class="alert alert-info jstree-folders-message">\n                    All files within the given folders and their subfolders will be imported into the current folder.\n                </div>\n                <div style="margin-bottom: 0.5em;">\n                    <label class="checkbox-inline">\n                        <input class="preserve-checkbox" type="checkbox" value="preserve_directory_structure">\n                        Preserve directory structure\n                    </label>\n                    <label class="checkbox-inline">\n                        <input class="link-checkbox" type="checkbox" value="link_files">\n                        Link files instead of copying\n                    </label>\n                    <br>\n                    <label class="checkbox-inline">\n                        <input class="posix-checkbox" type="checkbox" value="to_posix_lines" checked="checked">\n                        Convert line endings to POSIX\n                    </label>\n                    <label class="checkbox-inline">\n                        <input class="spacetab-checkbox" type="checkbox" value="space_to_tab">\n                        Convert spaces to tabs\n                    </label>\n                </div>\n                <textarea id="import_paths" class="form-control" rows="5"\n                    placeholder="Absolute paths (or paths relative to Galaxy root) separated by newline" autofocus>\n                </textarea>\n                <hr />\n                <p>You can set extension type and genome for all imported datasets at once:</p>\n                <div>\n                    Type: <span id="library_extension_select" class="library-extension-select"></span>\n                    Genome: <span id="library_genome_select" class="library-genome-select"></span>\n                </div>\n                <div>\n                    <label class="checkbox-inline tag-files">\n                        Tag datasets based on file names\n                        <input class="tag-files" type="checkbox" value="tag_using_filenames">\n                    </label>\n                </div>\n            </div>')},renderSelectBoxes:function(){const e=(0,l.Bz)();this.select_genome=new oM.View({css:"library-genome-select",data:this.list_genomes,container:e.modal.$el.find("#library_genome_select"),value:"?"}),this.select_extension=new oM.View({css:"library-extension-select",data:this.list_extensions,container:e.modal.$el.find("#library_extension_select"),value:"auto"})},addFilesFromHistoryModal:function(){const e=(0,l.Bz)();this.histories=new gM.GalaxyHistories,this.histories.fetch().done((()=>{this.modal=e.modal;var t=this.templateAddFilesFromHistory();this.modal.show({closing_events:!0,title:(0,Ee.ZP)("Adding datasets from your history"),body:t({histories:this.histories.models}),buttons:{Add:()=>{this.addAllDatasetsFromHistory()},Close:()=>{e.modal.hide()}},closing_callback:()=>{}}),this.fetchAndDisplayHistoryContents(this.histories.models[0].id),Mn()("#dataset_add_bulk").change((e=>{this.fetchAndDisplayHistoryContents(e.target.value)}))})).fail(((e,t)=>{void 0!==t.responseJSON?oo.FN.error(t.responseJSON.err_msg):oo.FN.error("An error occurred.")}))},importFilesFromGalaxyFolderModal:function(e){var t=this.templateBrowserModal();const n=(0,l.Bz)();this.modal=n.modal,this.modal.show({closing_events:!0,title:(0,Ee.ZP)("Please select folders or files"),body:t({}),buttons:{Import:()=>{this.importFromJstreePath(this,e)},Close:()=>{n.modal.hide()}},closing_callback:()=>{this.options.updateContent()}}),Mn()(".libimport-select-all").bind("click",(()=>{Mn()("#jstree_browser").jstree("check_all")})),Mn()(".libimport-select-none").bind("click",(()=>{Mn()("#jstree_browser").jstree("uncheck_all")})),this.renderSelectBoxes(),e.disabled_jstree_element="folders",this.renderJstree(e),Mn()("input[type=radio]").change((t=>{"jstree-disable-folders"===t.target.value?(e.disabled_jstree_element="folders",this.renderJstree(e),Mn()(".jstree-folders-message").hide(),Mn()(".jstree-preserve-structure").hide(),Mn()(".jstree-files-message").show()):"jstree-disable-files"===t.target.value&&(Mn()(".jstree-files-message").hide(),Mn()(".jstree-folders-message").show(),Mn()(".jstree-preserve-structure").show(),e.disabled_jstree_element="files",this.renderJstree(e))}))},importFromJstreePath:function(e,t){var n=Mn()("#jstree_browser").jstree().get_selected(!0),i=Nu.default.filter(n,(e=>0==e.state.disabled)),o=this.modal.$el.find(".preserve-checkbox").is(":checked"),a=this.modal.$el.find(".link-checkbox").is(":checked"),s=this.modal.$el.find(".spacetab-checkbox").is(":checked"),r=this.modal.$el.find(".posix-checkbox").is(":checked"),l=this.select_extension.value(),d=this.select_genome.value(),c=this.modal.$el.find(".tag-files").is(":checked"),u=i[0].type,h=[];if(i.length<1)oo.FN.info("Please select some items first.");else{this.modal.disableButton("Import");for(let e=i.length-1;e>=0;e--)void 0!==i[e].li_attr.full_path&&h.push(`"${i[e].li_attr.full_path}"`);if(this.initChainCallControlAddingDatasets({length:h.length}),"folder"===u){const e=`${t.source}_folder`;this.chainCallImportingFolders({paths:h,preserve_dirs:o,link_data:a,space_to_tab:s,to_posix_lines:r,source:e,file_type:l,dbkey:d,tag_using_filenames:c})}else if("file"===u){const e=`${t.source}_file`;this.chainCallImportingUserdirFiles({paths:h,file_type:l,dbkey:d,link_data:a,space_to_tab:s,to_posix_lines:r,source:e,tag_using_filenames:c})}}},chainCallImportingUserdirFiles:function(e){const t=(0,l.Bz)(),n=e.paths.pop();if(void 0===n)return 0===this.options.chain_call_control.failed_number?(oo.FN.success("Selected files imported into the current folder"),t.modal.hide()):oo.FN.error("An error occurred."),!0;const i=`${(0,g.getAppRoot)()}api/libraries/datasets`,o={encoded_folder_id:this.id,source:e.source,path:n,file_type:e.file_type,link_data:e.link_data,space_to_tab:e.space_to_tab,to_posix_lines:e.to_posix_lines,dbkey:e.dbkey,tag_using_filenames:e.tag_using_filenames};Mn().when(Mn().post(i,o)).done((t=>{SM(),this.chainCallImportingUserdirFiles(e)})).fail((()=>{this.options.chain_call_control.failed_number+=1,SM(),this.chainCallImportingUserdirFiles(e)}))},renderJstree:function(e){this.options=Nu.default.extend(this.options,e);var t=e.source||"userdir",n=this.options.disabled_jstree_element;this.jstree=new gM.Jstree,this.jstree.url=`${this.jstree.urlRoot}?target=${t}&format=jstree&disable=${n}`,this.jstree.fetch({success:(e,t)=>{Mn()("#jstree_browser").jstree("destroy"),Mn()("#jstree_browser").jstree({core:{data:e},plugins:["types","checkbox"],types:{folder:{icon:"jstree-folder"},file:{icon:"jstree-file"}},checkbox:{three_state:!1}})},error:(e,t)=>{void 0!==t.responseJSON?404001===t.responseJSON.err_code?(oo.FN.warning(t.responseJSON.err_msg),(0,l.Bz)().modal.hide()):oo.FN.error(t.responseJSON.err_msg):oo.FN.error("An error occurred.")}})},importFilesFromPathModal:function(){const e=(0,l.Bz)();this.modal=e.modal;var t=this.templateImportPathModal();this.modal.show({closing_events:!0,title:(0,Ee.ZP)("Please enter paths to import"),body:t({}),buttons:{Import:()=>{this.importFromPathsClicked(this)},Close:()=>{e.modal.hide()}},closing_callback:()=>{this.options.updateContent()}}),this.renderSelectBoxes()},importFromPathsClicked:function(){var e=this.modal.$el.find(".preserve-checkbox").is(":checked"),t=this.modal.$el.find(".link-checkbox").is(":checked"),n=this.modal.$el.find(".spacetab-checkbox").is(":checked"),i=this.modal.$el.find(".posix-checkbox").is(":checked"),o=this.modal.$el.find(".tag-files").is(":checked"),a=this.select_extension.value(),s=this.select_genome.value(),r=Mn()("textarea#import_paths").val(),l=[];if(r){this.modal.disableButton("Import");for(let e=(r=r.split("\n")).length-1;e>=0;e--){var d=r[e].trim();0!==d.length&&l.push(d)}this.initChainCallControlAddingDatasets({length:l.length}),this.chainCallImportingFolders({paths:l,preserve_dirs:e,link_data:t,space_to_tab:n,to_posix_lines:i,source:"admin_path",file_type:a,tag_using_filenames:o,dbkey:s})}else oo.FN.info("Please enter a path relative to Galaxy root.")},chainCallImportingFolders:function(e){const t=(0,l.Bz)(),n=e.paths.pop();if(void 0===n)return 0===this.options.chain_call_control.failed_number?(oo.FN.success("Selected folders and their contents imported into the current folder."),t.modal.hide()):oo.FN.error("An error occurred."),!0;const i=`${(0,g.getAppRoot)()}api/libraries/datasets`,o={encoded_folder_id:this.id,source:e.source,path:n,preserve_dirs:e.preserve_dirs,link_data:e.link_data,to_posix_lines:e.to_posix_lines,space_to_tab:e.space_to_tab,file_type:e.file_type,dbkey:e.dbkey,tag_using_filenames:e.tag_using_filenames};Mn().when(Mn().post(i,o)).done((t=>{SM(),this.chainCallImportingFolders(e)})).fail((()=>{this.options.chain_call_control.failed_number+=1,SM(),this.chainCallImportingFolders(e)}))},fetchAndDisplayHistoryContents:function(e){new gM.HistoryContents({id:e}).fetch({success:t=>{var n=this.templateHistoryContents();t.length>0?(this.histories.get(e).set({contents:t}),this.modal.$el.find(".library_selected_history_content").html(n({history_contents:t.models.reverse()})),this.modal.$el.find(".history-import-select-all").bind("click",(()=>{Mn()(".library_selected_history_content [type=checkbox]").prop("checked",!0)})),this.modal.$el.find(".history-import-unselect-all").bind("click",(()=>{Mn()(".library_selected_history_content [type=checkbox]").prop("checked",!1)})),this.modal.$el.find(".history-import-toggle-all").bind("click",(e=>{this.selectAll(e)})),this.modal.$el.find(".dataset_row").bind("click",(e=>{this.selectClickedRow(e)}))):this.modal.$el.find(".library_selected_history_content").html("<p>Selected history is empty.</p>")},error:(e,t)=>{void 0!==t.responseJSON?oo.FN.error(t.responseJSON.err_msg):oo.FN.error("An error occurred.")}})},templateAddingDatasetsProgressBar:function(){return Nu.default.template('<div class="import_text">\n                Adding selected datasets to library folder <b><%= _.escape(folder_name) %></b>\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateAddFilesFromHistory:function(){return Nu.default.template('<div id="add_files_modal">\n                <div class="form-group">\n                    <label>1. Select history:</label>\n                    <select id="dataset_add_bulk" name="dataset_add_bulk" class="form-control">\n                        <% _.each(histories, function(history) { %> \x3c!-- history select box --\x3e\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library_selected_history_content">\n                </div>\n            </div>')},templateHistoryContents:function(){return Nu.default.template('<div class="form-group">\n                <label>2. Choose the datasets to import:</label>\n                <div class="library_style_container" style="width: 100%;" id="dataset_list">\n                    <table class="grid table table-hover table-sm">\n                        <thead>\n                            <tr>\n                                <th style="width: 30px;" class="mid" title="Check to select all datasets">\n                                    <input class="history-import-toggle-all" style="margin: 0;" type="checkbox" />\n                                </th>\n                                <th style="width: 30px;"></th>\n                                <th>Name</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <% _.each(history_contents, function(history_item) { %>\n                                <% if (history_item.get("deleted") != true ) { %>\n                                    <% var item_name = history_item.get("name") %>\n                                    <% if (history_item.get("type") === "collection") { %>\n                                        <% var collection_type = history_item.get("collection_type") %>\n                                        <% if (collection_type === "list") { %>\n                                            <tr class="dataset_row" data-id="<%= _.escape(history_item.get("id")) %>"\n                                                data-name="<%= _.escape(history_item.get("type")) %>">\n                                                <td><input style="margin: 0;" type="checkbox"></td>\n                                                <td><%= _.escape(history_item.get("hid")) %></td>\n                                                <td>\n                                                    <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                                    (Dataset Collection)\n                                                </td>\n                                            </tr>\n                                        <% } else { %>\n                                            <tr class="dataset_row" title="You can convert this collection into a collection of type list using the Collection Tools">\n                                                <td><input style="margin: 0;" type="checkbox" onclick="return false;" disabled="disabled" /></td>\n                                                <td><%= _.escape(history_item.get("hid")) %></td>\n                                                <td>\n                                                    <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                                    (Dataset Collection of type <%= _.escape(collection_type) %> not supported.)\n                                                </td>\n                                            </tr>\n                                        <% } %>\n                                    <% } else if (history_item.get("visible") === true && history_item.get("state") === "ok") { %>\n                                        <tr class="dataset_row" data-id="<%= _.escape(history_item.get("id")) %>"\n                                            data-name="<%= _.escape(history_item.get("type")) %>">\n                                            <td><input style="margin: 0;" type="checkbox"></td>\n                                            <td><%= _.escape(history_item.get("hid")) %></td>\n                                            <td>\n                                                <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                            </td>\n                                        </tr>\n                                    <% } %>\n                                <% } %>\n                            <% }); %>\n                        </tbody>\n                    </table>\n                </div>\n            </div>')},selectClickedRow:function(e){var t,n,i="";t=Mn()(e.target).closest("tr"),"input"===e.target.localName?(i=e.target,n="input"):"td"===e.target.localName&&(i=t.find(":checkbox")[0],n="td"),i.checked?"td"===n?(i.checked="",this.makeWhiteRow(t)):"input"===n&&this.makeDarkRow(t):"td"===n?(i.checked="selected",this.makeDarkRow(t)):"input"===n&&this.makeWhiteRow(t)},selectAll:function(e){var t=e.target.checked,n=this;Mn()(":checkbox","#dataset_list tbody").each((function(){this.checked=t;var e=Mn()(this).closest("tr");t?n.makeDarkRow(e):n.makeWhiteRow(e)}))},makeDarkRow:function(e){e.addClass("table-primary")},makeWhiteRow:function(e){e.removeClass("table-primary")},addAllDatasetsFromHistory:function(){var e=this.modal.$el.find(".library_selected_history_content").find(":checked"),t=[],n=[],i=[];if(e.length<1)oo.FN.info("You must select some datasets first.");else{this.modal.disableButton("Add"),e.each((function(){var e=Mn()(this).closest("tr").data("id");if(e){var i=Mn()(this).closest("tr").data("name");t.push(e),n.push(i)}}));for(let e=t.length-1;e>=0;e--){var o=t[e],a=new gM.Item;a.url=`${(0,g.getAppRoot)()}api/folders/${this.options.id}/contents`,"collection"===n[e]?a.set({from_hdca_id:o}):a.set({from_hda_id:o}),i.push(a)}this.initChainCallControlAddingDatasets({length:i.length}),this.chainCallAddingHdas(i)}},initChainCallControlAddingDatasets:function(e){var t;t=this.templateAddingDatasetsProgressBar(),this.modal.$el.find(".modal-body").html(t({folder_name:this.options.folder_name})),this.progress=0,this.progressStep=100/e.length,this.options.chain_call_control.total_number=e.length,this.options.chain_call_control.failed_number=0},chainCallAddingHdas:function(e){const t=(0,l.Bz)();this.added_hdas=new gM.Folder;var n=e.pop();if(void 0===n)return 0===this.options.chain_call_control.failed_number?oo.FN.success("Selected datasets from history added to the folder"):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?oo.FN.error("There was an error and no datasets were added to the folder."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&oo.FN.warning("Some of the datasets could not be added to the folder"),this.options.updateContent(),t.modal.hide(),this.added_hdas;Mn().when(n.save({from_hda_id:n.get("from_hda_id")})).done((t=>{SM(),this.chainCallAddingHdas(e)})).fail((()=>{this.options.chain_call_control.failed_number+=1,SM(),this.chainCallAddingHdas(e)}))}})};function TM(e,t,n){!function(e,t,n){if(e&&t){t="string"==typeof t?t:Mn().param(t);var i="";Mn().each(t.split("&"),(function(){var e=this.split("=");i+=`<input type="hidden" name="${e[0]}" value="${e[1]}" />`})),Mn()(`<form action="${e}" method="${n||"post"}">${i}</form>`).appendTo("body").submit().remove(),oo.FN.info("Your download will begin soon.")}}(`${(0,s.Bg)()}api/libraries/datasets/download/${e}`,{ld_ids:t,folder_ids:n},"get")}var LM=xn().View.extend({options:null,initialize:function(e){this.options=e,this.options.chain_call_control={total_number:0,failed_number:0},this.showCollectionSelect()},findCheckedItems:function(){return this.options.selected},fetchUserHistories:function(){return this.histories=new gM.GalaxyHistories,this.histories.fetch()},async createNewHistory(e){const{data:t}=await v.Z.post(`${(0,g.getAppRoot)()}api/histories`,{name:e});return(0,l.Bz)().currHistoryPanel.switchToHistory(t.id),t},showCollectionSelect:function(e){const t=(0,l.Bz)();var n=this.findCheckedItems();if(0===n.length)oo.FN.info("You must select some datasets first.");else{var i=this.templateCollectionSelectModal();this.fetchUserHistories().done((()=>{this.modal=t.modal,this.modal.show({closing_events:!0,title:"Create History Collection from Datasets",body:i({selected_datasets:n.dataset_ids.length,histories:this.histories.models}),buttons:{Continue:()=>{this.showCollectionBuilder(n.dataset_ids)},Close:()=>{t.modal.hide()}}})})).fail(((e,t)=>{void 0!==t.responseJSON?oo.FN.error(t.responseJSON.err_msg):oo.FN.error("An error occurred.")}))}},showCollectionBuilder:function(e){const t=[];for(let n=e.length-1;n>=0;n--){const i={},o=e[n];i.id=o.ldda_id,i.name=o.name,i.deleted=o.deleted,i.state=o.state,i.src="ldda",t.push(i)}const n=this.modal.$("input[name=history_name]").val();if(""!==n)this.createNewHistory(n).then((e=>{oo.FN.success("History created"),this.collectionImport(t,e.id)})).catch((e=>{console.error(e),oo.FN.error("An error occurred.")}));else{this.select_collection_history=this.modal.$el.find("#library-collection-history-select");const e=this.select_collection_history.val();this.collectionImport(t,e)}},collectionImport:function(e,t){const n=this.modal.$el.find("#library-collection-type-select").val();let i=null;"rules"==n?(i=e,i.selectionType="library_datasets"):i={models:e};(0,l.Bz)().currHistoryPanel.buildCollection(n,i,t)},templateCollectionSelectModal:function(){return Nu.default.template('<div> \x3c!-- elements selection --\x3e\n                \x3c!-- type selection --\x3e\n                <div class="library-modal-item">\n                    <h4>Collection type</h4>\n                    <div class="form-group">\n                        <select id="library-collection-type-select" name="library-collection-type-select" class="form-control">\n                            <option value="list">List</option>\n                            <option value="paired">Paired</option>\n                            <option value="list:paired">List of Pairs</option>\n                            <option value="rules">From Rules</option>\n                        </select>\n                    </div>\n                    <h5>Which type to choose?</h5>\n                    <dl class="row">\n                        <dt class="col-sm-3">List</dt>\n                        <dd class="col-sm-9">Generic collection which groups any number of datasets into a set; similar to file system folder.</dd>\n\n                        <dt class="col-sm-3">Paired</dt>\n                        <dd class="col-sm-9">Simple collection containing exactly two sequence datasets; one reverse and the other forward.</dd>\n\n                        <dt class="col-sm-3">List of Pairs</dt>\n                        <dd class="col-sm-9">Advanced collection containing any number of Pairs; imagine as Pair-type collections inside of a List-type collection.</dd>\n\n                        <dt class="col-sm-3">From Rules</dt>\n                        <dd class="col-sm-9">Use Galaxy\'s rule builder to describe collections. This is more of an advanced feature that allows building any number of collections or any type.</dd>\n                    </dl>\n                </div>\n                \x3c!-- history selection/creation --\x3e\n                <div class="library-modal-item">\n                    <h4>Select history</h4>\n                    <div class="form-group">\n                        <select id="library-collection-history-select" name="library-collection-history-select" class="form-control">\n                            <% _.each(histories, function(history) { %> \x3c!-- history select box --\x3e\n                                <option value="<%= _.escape(history.get("id")) %>">\n                                    <%= _.escape(history.get("name")) %>\n                                </option>\n                            <% }); %>\n                        </select>\n                        <label>or create new:</label>\n                        <input class="form-control" type="text" name="history_name" value="" placeholder="name of the new history" />\n                    </div>\n                </div>\n            </div>')}});const DM={ImportCollectionModal:LM};const EM={ImportDatasetModal:xn().View.extend({options:null,initialize:function(e){this.options=e,this.options.chain_call_control={total_number:0,failed_number:0},this.importToHistoryModal()},findCheckedItems:function(){return this.options.selected},importToHistoryModal:function(){const e=(0,l.Bz)();var t=this.findCheckedItems(),n=this.templateImportIntoHistoryModal();0===t.length?oo.FN.info("You must select some datasets first."):this.fetchUserHistories().done((()=>{this.modal=e.modal,this.modal.show({closing_events:!0,title:(0,Ee.ZP)("Import into History"),body:n({histories:this.histories.models}),buttons:{Import:()=>{this.importAllIntoHistory()},Close:()=>{e.modal.hide()}}})})).fail(((e,t)=>{void 0!==t.responseJSON?oo.FN.error(t.responseJSON.err_msg):oo.FN.error("An error occurred.")}))},fetchUserHistories:function(){return this.histories=new gM.GalaxyHistories,this.histories.fetch()},importAllIntoHistory:function(){this.modal.disableButton("Import");var e=this.modal.$("input[name=history_name]").val();if(""!==e)this.createNewHistory(e).done((e=>{this.processImportToHistory(e.id,e.name)})).fail(((e,t,n)=>{oo.FN.error("An error occurred.")})).always((()=>{this.modal.disableButton("Import")}));else{var t=Mn()("select[name=import_to_history] option:selected").val(),n=Mn()("select[name=import_to_history] option:selected").text();this.processImportToHistory(t,n),this.modal.disableButton("Import")}},createNewHistory:function(e){return Mn().post(`${(0,g.getAppRoot)()}api/histories`,{name:e})},processImportToHistory:function(e,t){var n=this.findCheckedItems(),i=[];for(let t=n.dataset_ids.length-1;t>=0;t--){const o=n.dataset_ids[t],a=new gM.HistoryItem;a.url=`${a.urlRoot+e}/contents`,a.content=o,a.source="library",i.push(a)}n.folder_ids=n.folder_ids?n.folder_ids:[];for(let t=n.folder_ids.length-1;t>=0;t--){const o=n.folder_ids[t],a=new gM.HistoryItem;a.url=`${a.urlRoot+e}/contents`,a.content=o,a.source="library_folder",i.push(a)}this.initChainCallControlToHistory({length:i.length,history_name:t}),Mn().getJSON(`${(0,g.getAppRoot)()}history/set_as_current?id=${e}`),this.chainCallImportingIntoHistory(i,t,e)},initChainCallControlToHistory:function(e){var t;t=this.templateImportIntoHistoryProgressBar(),this.modal.$el.find(".modal-body").html(t({history_name:e.history_name})),this.progress=0,this.progressStep=100/e.length,this.options.chain_call_control.total_number=e.length,this.options.chain_call_control.failed_number=0},chainCallImportingIntoHistory:function(e,t,n){const i=(0,l.Bz)();var o=e.pop();if(void 0===o)return 0===this.options.chain_call_control.failed_number?oo.FN.success("Click here to start analyzing it.","Selected datasets imported into history",`${(0,g.getAppRoot)()}histories/view?id=${n}`):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?oo.FN.error("There was an error and no datasets were imported into history."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&oo.FN.warning("Some of the datasets could not be imported into history. Click this to see what was imported.","",`${(0,g.getAppRoot)()}histories/view?id=${n}`),i.modal.hide(),!0;Mn().when(o.save({content:o.content,source:o.source})).done((()=>{SM(),this.chainCallImportingIntoHistory(e,t)})).fail((()=>{this.options.chain_call_control.failed_number+=1,SM(),this.chainCallImportingIntoHistory(e,t)}))},templateImportIntoHistoryProgressBar:function(){return Nu.default.template('<div class="import_text">\n                Importing selected items to history <b><%= _.escape(history_name) %></b>\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateDeletingItemsProgressBar:function(){return Nu.default.template('<div class="import_text">\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateImportIntoHistoryModal:function(){return Nu.default.template('<div>\n                <div class="library-modal-item">\n                    Select history:\n                    <select name="import_to_history" style="width:50%; margin-bottom: 1em; " autofocus>\n                        <% _.each(histories, function(history) { %>\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library-modal-item">\n                    or create new:\n                    <input type="text" name="history_name" value=""\n                        placeholder="name of the new history" style="width:50%;" />\n                </div>\n            </div>')}})};PS.forEach((e=>u.vI.add(e))),a.default.use(d.ZPm);const OM={name:"FolderTopBar",components:{SearchField:WS,FontAwesomeIcon:p.GN,LibraryBreadcrumb:iM,FolderDetails:tM},props:{folder_id:{type:String,required:!0},includeDeleted:{type:Boolean,required:!0},isAllSelectedMode:{type:Boolean,required:!0},selected:{type:Array,required:!0},unselected:{type:Array,required:!0},metadata:{type:Object,required:!0},folderContents:{type:Array,required:!0}},data:()=>({is_admin:!1,user_library_import_dir_available:!1,library_import_dir:!1,allow_library_path_paste:!1,list_genomes:[],list_extensions:[],auto:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically.\n                     If your file is not detected properly as one of the known formats,\n                     it most likely means that it has some format problems (e.g., different\n                     number of columns on different rows). You can still coerce the system\n                     to set your data to the format you think it should be.\n                     You can also upload compressed files, which will automatically be decompressed"}}),computed:{contains_file_or_folder:function(){return this.folderContents.find((e=>"folder"===e.type||"file"===e.type))},canDelete:function(){return!(!this.contains_file_or_folder||!this.is_admin)},dataset_manipulation:function(){const e=(0,l.Bz)();return!(!this.contains_file_or_folder||!e.user)}},created(){const e=(0,l.Bz)();this.services=new KS,this.is_admin=e.user.attributes.is_admin,this.user_library_import_dir_available=e.config.user_library_import_dir_available,this.library_import_dir=e.config.library_import_dir,this.allow_library_path_paste=e.config.allow_library_path_paste,this.fetchExtAndGenomes()},methods:{updateSearch:function(e){this.$emit("updateSearch",e)},deleteSelected:function(){this.getSelected().then((e=>CM(e,(e=>this.$emit("deleteFromTable",e)),(()=>this.$emit("refreshTable")),(()=>this.$emit("refreshTableContent")))))},async getSelected(){if(this.isAllSelectedMode){this.$emit("setBusy",!0);const e=await this.services.getFilteredFolderContents(this.folder_id,this.unselected,this.$parent.searchText);return this.$emit("setBusy",!1),e}return this.selected},newFolder(){this.$emit("newFolder")},downloadData(e){this.findCheckedItems().then((({datasets:t,folders:n})=>{0!==this.selected.length?TM(e,t,n):oo.FN.info("You must select at least one dataset to download")}))},addDatasets(e){new MM.AddDatasets({source:e,id:this.folder_id,updateContent:this.updateContent,list_genomes:this.list_genomes,list_extensions:this.list_extensions})},findCheckedItems:async function(e=!0){const t=[],n=[];return(await this.getSelected()).forEach((i=>{const o=e?i.id:i;"file"===i.type?t.push(o):n.push(o)})),{datasets:t,folders:n}},importToHistoryModal:function(e){this.findCheckedItems(!e).then((({datasets:t,folders:n})=>{const i=this.selected;i.dataset_ids=t,i.folder_ids=n,e?new DM.ImportCollectionModal({selected:i}):new EM.ImportDatasetModal({selected:i})}))},fetchExtAndGenomes:function(){fe.ZP.get({url:`${(0,g.getAppRoot)()}api/datatypes?extension_only=False`,success:e=>{this.list_extensions=[];for(const t in e)this.list_extensions.push({id:e[t].extension,text:e[t].extension,description:e[t].description,description_url:e[t].description_url});this.list_extensions.sort(((e,t)=>e.id>t.id?1:e.id<t.id?-1:0)),this.list_extensions.unshift(this.auto)},cache:!0}),fe.ZP.get({url:`${(0,g.getAppRoot)()}api/genomes`,success:e=>{this.list_genomes=[];for(const t in e)this.list_genomes.push({id:e[t][1],text:e[t][0]});this.list_genomes.sort(((e,t)=>e.id>t.id?1:e.id<t.id?-1:0))},cache:!0})},updateContent:function(){this.$emit("fetchFolderContents")}}},AM=OM;const IM=(0,m.Z)(AM,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"form-inline d-flex align-items-center mb-2"},[t("b-button",{staticClass:"mr-1 btn btn-secondary",attrs:{to:{path:"/libraries"},"data-toggle":"tooltip",title:"Go to libraries list"}},[t("FontAwesomeIcon",{attrs:{icon:"home"}})],1),e._v(" "),t("div",[t("div",{staticClass:"form-inline"},[t("SearchField",{on:{updateSearch:function(t){return e.updateSearch(t)}}}),e._v(" "),e.metadata.can_add_library_item?t("button",{staticClass:"btn btn-secondary toolbtn-create-folder add-library-items add-library-items-folder mr-1",attrs:{title:"Create new folder",type:"button"},on:{click:e.newFolder}},[t("FontAwesomeIcon",{attrs:{icon:"plus"}}),e._v("\n                    Folder\n                ")],1):e._e(),e._v(" "),e.metadata.can_add_library_item?t("div",[t("div",{staticClass:"dropdown add-library-items add-library-items-datasets mr-1",attrs:{title:"Add datasets to current folder"}},[e._m(0),e._v(" "),t("div",{staticClass:"dropdown-menu"},[t("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(t){return e.addDatasets("history")}}},[e._v("\n                                from History")]),e._v(" "),e.user_library_import_dir_available?t("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(t){return e.addDatasets("userdir")}}},[e._v("\n                                from User Directory\n                            ")]):e._e(),e._v(" "),e.library_import_dir||e.allow_library_path_paste?t("div",[t("h2",{staticClass:"dropdown-header cursor-pointer h-text"},[e._v("Admins only")]),e._v(" "),e.library_import_dir?t("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(t){return e.addDatasets("importdir")}}},[e._v("\n                                    from Import Directory\n                                ")]):e._e(),e._v(" "),e.allow_library_path_paste?t("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(t){return e.addDatasets("path")}}},[e._v("\n                                    from Path\n                                ")]):e._e()]):e._e()])])]):e._e(),e._v(" "),t("div",{staticClass:"dropdown mr-1"},[t("button",{staticClass:"primary-button dropdown-toggle add-to-history",attrs:{type:"button","data-toggle":"dropdown"}},[t("FontAwesomeIcon",{attrs:{icon:"book"}}),e._v("\n                        Add to History "),t("span",{staticClass:"caret"})],1),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[t("a",{staticClass:"toolbtn-bulk-import add-to-history-datasets dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return e.importToHistoryModal(!1)}}},[e._v("\n                            as Datasets\n                        ")]),e._v(" "),t("a",{staticClass:"toolbtn-collection-import add-to-history-collection dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return e.importToHistoryModal(!0)}}},[e._v("\n                            as a Collection\n                        ")])])]),e._v(" "),e.dataset_manipulation?t("div",{staticClass:"dropdown dataset-manipulation mr-1",attrs:{title:"Download items as archive"}},[t("button",{staticClass:"primary-button",attrs:{id:"download--btn",type:"button"},on:{click:function(t){return e.downloadData("zip")}}},[t("FontAwesomeIcon",{attrs:{icon:"download"}}),e._v("\n                        Download\n                    ")],1)]):e._e(),e._v(" "),e.canDelete?t("button",{staticClass:"primary-button toolbtn-bulk-delete logged-dataset-manipulation mr-1",attrs:{"data-toggle":"tooltip",title:"Mark items deleted",type:"button"},on:{click:e.deleteSelected}},[t("FontAwesomeIcon",{attrs:{icon:"trash"}}),e._v("\n                    Delete\n                ")],1):e._e(),e._v(" "),t("FolderDetails",{staticClass:"mr-1",attrs:{id:e.folder_id,metadata:e.metadata}}),e._v(" "),e.canDelete?t("div",{staticClass:"form-check logged-dataset-manipulation mr-1"},[t("b-form-checkbox",{attrs:{checked:e.includeDeleted},on:{change:function(t){return e.$emit("update:includeDeleted",t)}}},[e._v("\n                        include deleted\n                    ")])],1):e._e()],1)])],1),e._v(" "),e.metadata&&e.metadata.full_path?t("LibraryBreadcrumb",{attrs:{full_path:e.metadata.full_path,"current-id":e.folder_id}}):e._e()],1)}),[function(){var e=this._self._c;return e("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[e("span",{staticClass:"fa fa-plus"}),this._v(" Datasets "),e("span",{staticClass:"caret"})])}],!1,null,null,null).exports;AS.forEach((e=>u.vI.add(e))),a.default.use(d.ZPm);const PM={components:{FolderTopBar:IM,UtcDate:J.Z,FontAwesomeIcon:p.GN},beforeRouteUpdate(e,t,n){this.getFolder(e.params.folder_id,e.params.page),n()},props:{folder_id:{type:String,required:!0},page:{type:Number,default:1,required:!1}},data:()=>({selected:[],unselected:[],expandedMessage:[],folderContents:[],includeDeleted:!1,isAllSelectedMode:!1,currentPage:1,sortBy:"name",sortDesc:!1,searchText:"",currentFolderId:null,error:null,isBusy:!1,folder_metadata:{},fields:XS,selectMode:"multi",perPage:10,maxDescriptionLength:40,total_rows:0,root:(0,g.getAppRoot)()}),computed:{...(0,o.rn)(Xe.L,["currentUser"])},watch:{perPage(){this.fetchFolderContents()},includeDeleted(){this.fetchFolderContents()},sortBy(){this.fetchFolderContents()},sortDesc(){this.fetchFolderContents()}},created(){this.services=new KS({root:this.root}),this.getFolder(this.folder_id,this.page)},methods:{sanitize:pf.sanitize,getFolder(e,t){this.currentFolderId=e,this.currentPage=t,this.resetData(),this.fetchFolderContents()},resetData(){const e={selected:[],unselected:[],expandedMessage:[],folderContents:[],includeDeleted:!1,isAllSelectedMode:!1};Object.keys(e).forEach((t=>this[t]=e[t]))},onSort(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc},fetchFolderContents(){this.setBusy(!0),this.services.getFolderContents(this.currentFolderId,this.includeDeleted,this.sortBy,this.sortDesc,this.perPage,(this.currentPage-1)*this.perPage,this.searchText).then((e=>{this.folderContents=e.folder_contents,this.folder_metadata=e.metadata,this.total_rows=e.metadata.total_rows,this.isAllSelectedMode?(this.selected=[],a.default.nextTick((()=>{this.selectAllRenderedRows()}))):this.selected.length>0&&a.default.nextTick((()=>{this.selected.forEach((e=>this.select_unselect_row_by_id(e.id)))})),this.setBusy(!1)})).catch((e=>{this.error=e}))},updateSearchValue(e){this.searchText=e,this.folderContents=[],this.fetchFolderContents()},selectAllRenderedRows(){this.$refs.folder_content_table.items.forEach(((e,t)=>{e.isNewFolder||e.deleted||this.unselected.some((t=>t.id===e.id))||(this.select_unselect_row(t),this.selected.some((t=>t.id===e.id))||this.selected.push(e))}))},clearRenderedSelectedRows(){this.$refs.folder_content_table.clearSelected(),this.selected=[]},refreshTable(){this.$refs.folder_content_table.refresh()},refreshTableContent(){this.fetchFolderContents()},deleteFromTable(e){this.folderContents=this.folderContents.filter((t=>{if(t.id!==e.id)return t}))},isAllSelectedOnPage(){if(!this.$refs.folder_content_table)return!1;let e=0;return this.$refs.folder_content_table.computedItems.forEach((t=>{(t.isNewFolder||t.deleted)&&e++})),this.selected.length+e===this.$refs.folder_content_table.computedItems.length},toggleSelect(){this.unselected=[],this.isAllSelectedOnPage()?(this.isAllSelectedMode=!1,this.clearRenderedSelectedRows()):(this.isAllSelectedMode=!0,this.selectAllRenderedRows())},newFolder(){this.folderContents.unshift({editMode:!0,isNewFolder:!0,type:"folder",name:"",description:""}),this.refreshTable()},onRowClick(e,t,n){const i=this.selected.findIndex((t=>t.id===e.id));i>-1?(this.selected.splice(i,1),this.select_unselect_row(t,!0),this.isAllSelectedMode&&(this.unselected.push(e),this.total_rows===this.unselected.length&&(this.isAllSelectedMode=!1,this.unselected=[]))):e.isNewFolder||e.deleted||(this.select_unselect_row(t),this.selected.push(e))},select_unselect_row_by_id(e,t=!1){const n=this.$refs.folder_content_table.items.findIndex((t=>t.id===e));this.select_unselect_row(n,t)},select_unselect_row(e,t=!1){t?this.$refs.folder_content_table.unselectRow(e):this.$refs.folder_content_table.selectRow(e)},bytesToString:e=>fe.ZP.bytesToString(e),navigateToPermission(e){return"file"===e.type?`/libraries/folders/${this.folder_id}/dataset/${e.id}/permissions`:"folder"===e.type?`/libraries/folders/${e.id}/permissions`:void 0},getMessage:e=>"file"===e.type?e.message:"folder"===e.type?e.description:void 0,expandMessage(e){this.expandedMessage.push(e.id)},setBusy(e){this.isBusy=e},linkify:e=>(0,FS.Z)(e),toggleEditMode(e){e.editMode=!e.editMode,this.folderContents=this.folderContents.filter((e=>{if(!e.isNewFolder)return e})),this.refreshTable()},createNewFolder:function(e){e.name?e.name.length<3?oo.FN.warning("Folder name has to be at least 3 characters long."):this.services.newFolder({parent_id:this.currentFolderId,name:e.name,description:e.description},(t=>{e.id=t.id,e.update_time=t.update_time,e.editMode=!1,e.can_manage=!0,e.isNewFolder=!1,this.refreshTable(),oo.FN.success("Folder created.")}),(()=>{oo.FN.error("An error occurred.")})):oo.FN.error("Folder's name is missing.")},undelete:function(e,t){const n=t=>{const n=""+("folder"===e.type?"Folder":"Dataset");void 0!==t.responseJSON?oo.FN.error(`${n} was not undeleted. ${t.responseJSON.err_msg}`):oo.FN.error(`An error occurred! ${n} was not undeleted. Please try again.`)};"folder"===e.type?this.services.undeleteFolder(e,(t=>{e.deleted=t.deleted,this.refreshTable(),oo.FN.success("Folder undeleted.")}),n):this.services.undeleteDataset(e,(n=>{e.deleted=n.deleted,this.refreshTable(),oo.FN.success("Dataset undeleted. Click here to see it.","",{onclick:function(){window.location=`${(0,g.getAppRoot)()}libraries/folders/${t}/dataset/${e.id}`}})}),n)},changePage(e){this.$router.push({name:"LibraryFolder",params:{folder_id:this.folder_id,page:e}})},saveChanges(e){let t=!1;const n=this.$refs[`name${e.id}`].value;if(n&&n!==e.name){if(!(n.length>2))return void oo.FN.warning("Folder name has to be at least 3 characters long.");e.name=n,t=!0}const i=this.$refs[`description${e.id}`].value;void 0!==i&&i!==e.description&&(e.description=i,t=!0),t?this.services.updateFolder(e,(()=>{oo.FN.success("Changes to folder saved."),e.editMode=!1,this.refreshTable()}),(e=>{e.data&&e.data.err_msg?oo.FN.error(e.data.err_msg):oo.FN.error("An error occurred while attempting to update the folder.")})):oo.FN.info("Nothing has changed.")}}},RM=PM;var jM=(0,m.Z)(RM,(function(){var e=this,t=e._self._c;return t("div",[t("FolderTopBar",{attrs:{"folder-contents":e.folderContents,"include-deleted":e.includeDeleted,folder_id:e.currentFolderId,selected:e.selected,metadata:e.folder_metadata,unselected:e.unselected,"is-all-selected-mode":e.isAllSelectedMode},on:{"update:includeDeleted":function(t){e.includeDeleted=t},"update:include-deleted":function(t){e.includeDeleted=t},updateSearch:function(t){return e.updateSearchValue(t)},refreshTable:e.refreshTable,refreshTableContent:e.refreshTableContent,fetchFolderContents:function(t){return e.fetchFolderContents(t)},deleteFromTable:e.deleteFromTable,setBusy:function(t){return e.setBusy(t)},newFolder:e.newFolder}}),e._v(" "),t("b-table",{ref:"folder_content_table",attrs:{id:"folder_list_body",striped:"",hover:"",busy:e.isBusy,fields:e.fields,items:e.folderContents,"per-page":e.perPage,selectable:"","no-select-on-click":"","show-empty":""},on:{"update:busy":function(t){e.isBusy=t},"sort-changed":e.onSort,"row-clicked":e.onRowClick},scopedSlots:e._u([{key:"empty",fn:function(){return[e.isBusy?t("div",{staticClass:"text-center my-2"},[t("b-spinner",{staticClass:"align-middle"}),e._v(" "),t("strong",[e._v("Loading...")])],1):t("div",{staticClass:"empty-folder-message"},[e._v("\n                This folder is either empty or you do not have proper access permissions to see the contents. If you\n                expected something to show up please consult the\n                "),t("a",{attrs:{href:"https://galaxyproject.org/data-libraries/#permissions",target:"_blank"}},[e._v("\n                    library security wikipage\n                ")])])]},proxy:!0},{key:"head(selected)",fn:function(){return[e.isAllSelectedMode&&!e.isAllSelectedOnPage()?t("FontAwesomeIcon",{staticClass:"select-checkbox cursor-pointer",attrs:{size:"lg",title:"Check to select all datasets",icon:"minus-square"},on:{click:e.toggleSelect}}):t("FontAwesomeIcon",{staticClass:"select-checkbox cursor-pointer",attrs:{size:"lg",title:"Check to select all datasets",icon:e.isAllSelectedOnPage()?["far","check-square"]:["far","square"]},on:{click:e.toggleSelect}})]},proxy:!0},{key:"cell(selected)",fn:function(n){return[n.item.isNewFolder||n.item.deleted?e._e():t("FontAwesomeIcon",{staticClass:"select-checkbox lib-folder-checkbox",attrs:{size:"lg",icon:n.rowSelected?["far","check-square"]:["far","square"]}})]}},{key:"cell(name)",fn:function(n){return[n.item.editMode?t("div",[n.item.isNewFolder?t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.item.name,expression:"row.item.name"}],ref:"name"+n.item.id,staticClass:"form-control",attrs:{name:"input_folder_name",rows:"3"},domProps:{value:n.item.name},on:{input:function(t){t.target.composing||e.$set(n.item,"name",t.target.value)}}}):t("textarea",{ref:"name"+n.item.id,staticClass:"form-control",attrs:{rows:"3"},domProps:{value:n.item.name}})]):n.item.deleted?t("div",[t("div",{staticClass:"deleted-item"},[e._v(e._s(n.item.name))])]):t("div",["folder"===n.item.type?t("b-link",{attrs:{to:{name:"LibraryFolder",params:{folder_id:`${n.item.id}`}}}},[e._v("\n                    "+e._s(n.item.name)+"\n                ")]):t("b-link",{attrs:{to:{name:"LibraryDataset",params:{folder_id:e.folder_id,dataset_id:`${n.item.id}`}}}},[e._v("\n                    "+e._s(n.item.name)+"\n                ")])],1)]}},{key:"cell(message)",fn:function(n){return[n.item.editMode?t("div",[n.item.isNewFolder?t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.item.description,expression:"row.item.description"}],ref:"description"+n.item.id,staticClass:"form-control input_folder_description",attrs:{rows:"3"},domProps:{value:n.item.description},on:{input:function(t){t.target.composing||e.$set(n.item,"description",t.target.value)}}}):t("textarea",{ref:"description"+n.item.id,staticClass:"form-control input_folder_description",attrs:{rows:"3"},domProps:{value:n.item.description}})]):t("div",[e.getMessage(n.item)?t("div",{staticClass:"description-field"},[e.getMessage(n.item).length>e.maxDescriptionLength&&!e.expandedMessage.includes(n.item.id)?t("div",[t("span",{staticClass:"shrinked-description",attrs:{title:e.getMessage(n.item)},domProps:{innerHTML:e._s(e.linkify(e.sanitize(e.getMessage(n.item).substring(0,e.maxDescriptionLength))))}}),e._v(" "),t("span",{attrs:{title:e.getMessage(n.item)}},[e._v(" ...")]),e._v(" "),t("a",{staticClass:"more-text-btn",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.expandMessage(n.item)}}},[e._v("\n                            (more)\n                        ")])]):t("div",{domProps:{innerHTML:e._s(e.linkify(e.sanitize(e.getMessage(n.item))))}})]):e._e()])]}},{key:"cell(type_icon)",fn:function(n){return["folder"===n.item.type?t("FontAwesomeIcon",{attrs:{icon:["far","folder"],title:"Folder"}}):"file"===n.item.type?t("FontAwesomeIcon",{attrs:{title:"Dataset",icon:["far","file"]}}):e._e()]}},{key:"cell(type)",fn:function(n){return["folder"===n.item.type?t("div",[e._v(e._s(n.item.type))]):"file"===n.item.type?t("div",[e._v(e._s(n.item.file_ext))]):e._e()]}},{key:"cell(raw_size)",fn:function(n){return["file"===n.item.type?t("div",{domProps:{innerHTML:e._s(e.bytesToString(n.item.raw_size))}}):e._e()]}},{key:"cell(state)",fn:function(n){return["ok"!=n.item.state?t("div",[e._v("\n                "+e._s(n.item.state)+"\n            ")]):e._e()]}},{key:"cell(update_time)",fn:function(n){return[n.item.update_time?t("UtcDate",{attrs:{date:n.item.update_time,mode:"elapsed"}}):e._e()]}},{key:"cell(is_unrestricted)",fn:function(n){return[n.item.is_unrestricted?t("FontAwesomeIcon",{attrs:{title:"Unrestricted dataset",icon:"globe"}}):n.item.deleted?t("FontAwesomeIcon",{attrs:{title:"Marked deleted",icon:"ban"}}):n.item.is_private?t("FontAwesomeIcon",{attrs:{title:"Private dataset",icon:"key"}}):!1===n.item.is_private&&!1===n.item.is_unrestricted?t("FontAwesomeIcon",{attrs:{title:"Restricted dataset",icon:"shield-alt"}}):e._e()]}},{key:"cell(buttons)",fn:function(n){return[n.item.editMode?t("div",[t("button",{staticClass:"primary-button btn-sm permission_folder_btn save_folder_btn",attrs:{title:"save "+n.item.name},on:{click:function(t){n.item.isNewFolder?e.createNewFolder(n.item):e.saveChanges(n.item)}}},[t("FontAwesomeIcon",{attrs:{icon:["far","save"]}}),e._v("\n                    Save\n                ")],1),e._v(" "),t("button",{staticClass:"primary-button btn-sm permission_folder_btn",attrs:{title:"Discard Changes"},on:{click:function(t){return e.toggleEditMode(n.item)}}},[t("FontAwesomeIcon",{attrs:{icon:["fas","times"]}}),e._v("\n                    Cancel\n                ")],1)]):t("div",[n.item.can_manage&&!n.item.deleted&&"folder"===n.item.type?t("b-button",{staticClass:"lib-btn permission_folder_btn edit_folder_btn",attrs:{"data-toggle":"tooltip","data-placement":"top",size:"sm",title:"Edit "+n.item.name},on:{click:function(t){return e.toggleEditMode(n.item)}}},[t("FontAwesomeIcon",{attrs:{icon:"pencil-alt"}}),e._v("\n                    Edit\n                ")],1):e._e(),e._v(" "),e.currentUser.is_admin?t("b-button",{staticClass:"lib-btn permission_lib_btn",attrs:{size:"sm",title:`Permissions of ${n.item.name}`,to:{path:`${e.navigateToPermission(n.item)}`}}},[t("FontAwesomeIcon",{attrs:{icon:"users"}}),e._v("\n                    Manage\n                ")],1):e._e(),e._v(" "),n.item.deleted?t("button",{staticClass:"lib-btn primary-button btn-sm undelete_dataset_btn",attrs:{title:"Undelete "+n.item.name,type:"button"},on:{click:function(t){return e.undelete(n.item,e.folder_id)}}},[t("FontAwesomeIcon",{attrs:{icon:"unlock"}}),e._v("\n                    Undelete\n                ")],1):e._e()],1)]}}])}),e._v(" "),t("b-container",[t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-v":"center"}},[t("b-col",{attrs:{md:"auto"}},[e.isBusy?t("div",[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" "),t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" "),t("b-spinner",{attrs:{small:"",type:"grow"}})],1):t("b-pagination",{attrs:{value:e.currentPage,"total-rows":e.total_rows,"per-page":e.perPage,"aria-controls":"folder_list_body"},on:{input:e.changePage}})],1),e._v(" "),t("b-col",{attrs:{cols:"1.5"}},[t("table",[t("tr",[t("td",{staticClass:"m-0 p-0"},[t("b-form-input",{staticClass:"pagination-input-field",attrs:{id:"paginationPerPage",autocomplete:"off",type:"number"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e._v(" "),t("td",{staticClass:"text-muted ml-1 paginator-text"},[t("span",{staticClass:"pagination-total-pages-text"},[e._v("per page, "+e._s(e.total_rows)+" total")])])])])])],1)],1)],1)}),[],!1,null,"09dd3955",null);const YM=jM.exports;const HM={name:"Name",file_ext:"Data type",genome_build:"Genome build",file_size:"Size",update_time:"Date last updated (UTC)",date_uploaded:"Date uploaded (UTC)",uploaded_by:"Uploaded by",metadata_data_lines:"Data Lines",metadata_comment_lines:"Comment Lines",metadata_columns:"Number of Columns",metadata_column_types:"Column Types",message:"Message",misc_blurb:"Miscellaneous blurb",misc_info:"Miscellaneous information",tags:"Tags",uuid:"UUID"};u.vI.add(h.FVb,h.XSV,h.FL8,h.q7m,h.UJf,h.NBC,zo.r6);const NM={components:{LibraryBreadcrumb:iM,CopyToClipboard:Xd.Z,FontAwesomeIcon:p.GN,DbKeyProvider:P.xS,DatatypesProvider:P.Sk,SingleItemSelector:_l},props:{dataset_id:{type:String,required:!0},folder_id:{type:String,required:!0}},data:()=>({dataset:void 0,modifiedDataset:{},currentRouteName:window.location.href,datasetDownloadFormat:"uncompressed",download:TM,isEditMode:!1,fieldTitles:HM,table_items:[],fields:[{key:"name"},{key:"value"}]}),computed:{...(0,o.rn)(Xe.L,["currentUser"]),datasetChanges(){const e={};for(var t in this.dataset)this.dataset[t]!==this.modifiedDataset[t]&&(e[t]=this.modifiedDataset[t]);return e},hasChanges(){for(var e in this.datasetChanges)return!0;return!1}},async created(){this.services=new KS({root:this.root});const e=await this.services.getDataset(this.dataset_id);this.populateDatasetDetailsTable(e)},methods:{populateDatasetDetailsTable(e){this.dataset=e,Object.assign(this.modifiedDataset,this.dataset),this.table_items=HS(this.fieldTitles,this.dataset)},detectDatatype(){this.services.updateDataset(this.dataset_id,{file_ext:"auto"},(e=>{this.populateDatasetDetailsTable(e),oo.FN.success("Changes to library dataset saved.")}),(e=>oo.FN.error(e)))},updateDataset(){this.hasChanges&&this.services.updateDataset(this.dataset_id,this.datasetChanges,(e=>{this.populateDatasetDetailsTable(e),oo.FN.success("Changes to library dataset saved.")}),(e=>oo.FN.error(e))),this.isEditMode=!1},importToHistory(){new EM.ImportDatasetModal({selected:{dataset_ids:[this.dataset_id]}})},onSelectedDbKey(e){this.modifiedDataset.genome_build=e.id},onSelectedDatatype(e){this.modifiedDataset.file_ext=e.id}}},FM=NM;var BM=(0,m.Z)(FM,(function(){var e=this,t=e._self._c;return e.dataset?t("div",[e.isEditMode?e._e():t("div",[t("LibraryBreadcrumb",{attrs:{"current-id":e.dataset_id,full_path:e.dataset.full_path}}),e._v(" "),t("b-button",{staticClass:"mr-1 mb-2",attrs:{title:"Download dataset","data-test-id":"download-btn"},on:{click:function(t){return e.download(e.datasetDownloadFormat,e.dataset_id)}}},[t("FontAwesomeIcon",{attrs:{icon:"download"}}),e._v("\n            Download\n        ")],1),e._v(" "),t("b-button",{staticClass:"mr-1 mb-2",attrs:{title:"Import dataset into history","data-test-id":"import-history-btn"},on:{click:e.importToHistory}},[t("FontAwesomeIcon",{attrs:{icon:"book"}}),e._v("\n            to History\n        ")],1),e._v(" "),e.dataset.can_user_modify?t("span",[t("b-button",{staticClass:"mr-1 mb-2",attrs:{title:"Modify library item","data-test-id":"modify-btn"},on:{click:function(t){e.isEditMode=!0}}},[t("FontAwesomeIcon",{attrs:{icon:"pencil-alt"}}),e._v("\n                Modify\n            ")],1),e._v(" "),t("b-button",{staticClass:"mr-1 mb-2",attrs:{title:"Attempt to detect the format of dataset","data-test-id":"auto-detect-btn"},on:{click:e.detectDatatype}},[t("FontAwesomeIcon",{attrs:{icon:"redo"}}),e._v("\n                Auto-detect datatype\n            ")],1)],1):e._e(),e._v(" "),e.currentUser.is_admin?t("b-button",{staticClass:"mr-1 mb-2",attrs:{title:"Manage permissions",to:{name:"LibraryFolderDatasetPermissions",params:{folder_id:e.folder_id,dataset_id:e.dataset_id}},"data-test-id":"permissions-btn"}},[t("FontAwesomeIcon",{attrs:{icon:"users"}}),e._v("\n            Permissions\n        ")],1):e._e()],1),e._v(" "),e.dataset.is_unrestricted?t("div",{attrs:{"data-test-id":"unrestricted-msg"}},[e._v("\n        This dataset is unrestricted so everybody with the link can access it.\n        "),t("CopyToClipboard",{attrs:{message:"A link to current dataset was copied to your clipboard",text:e.currentRouteName,title:"Copy link to this dataset "}})],1):e._e(),e._v(" "),e.table_items?t("b-table",{staticClass:"dataset_table mt-2",attrs:{fields:e.fields,items:e.table_items,"thead-class":"d-none",striped:"",small:"","data-test-id":"dataset-table"},scopedSlots:e._u([{key:"cell(name)",fn:function(n){return[t("strong",[e._v(e._s(n.item.name))])]}},{key:"cell(value)",fn:function(n){return[e.isEditMode?t("div",[n.item.name===e.fieldTitles.name?t("b-form-input",{attrs:{value:n.item.value},model:{value:e.modifiedDataset.name,callback:function(t){e.$set(e.modifiedDataset,"name",t)},expression:"modifiedDataset.name"}}):n.item.name===e.fieldTitles.file_ext?t("DatatypesProvider",{scopedSlots:e._u([{key:"default",fn:function({item:n,loading:i}){return[t("SingleItemSelector",{attrs:{"collection-name":"Data Types",loading:i,items:n,"current-item-id":e.dataset.file_ext},on:{"update:selected-item":e.onSelectedDatatype}})]}}],null,!0)}):n.item.name===e.fieldTitles.genome_build?t("DbKeyProvider",{scopedSlots:e._u([{key:"default",fn:function({item:n,loading:i}){return[t("SingleItemSelector",{attrs:{"collection-name":"Database/Builds",loading:i,items:n,"current-item-id":e.dataset.genome_build},on:{"update:selected-item":e.onSelectedDbKey}})]}}],null,!0)}):n.item.name===e.fieldTitles.message?t("b-form-input",{attrs:{value:n.item.value},model:{value:e.modifiedDataset.message,callback:function(t){e.$set(e.modifiedDataset,"message",t)},expression:"modifiedDataset.message"}}):n.item.name===e.fieldTitles.misc_info?t("b-form-input",{attrs:{value:n.item.value},model:{value:e.modifiedDataset.misc_info,callback:function(t){e.$set(e.modifiedDataset,"misc_info",t)},expression:"modifiedDataset.misc_info"}}):t("div",[e._v(e._s(n.item.value))])],1):t("div",[t("div",[e._v(e._s(n.item.value))])])]}}],null,!1,3351774288)}):e._e(),e._v(" "),e.isEditMode?t("div",[t("b-button",{staticClass:"mr-1 mb-2",on:{click:function(t){e.isEditMode=!1}}},[t("FontAwesomeIcon",{attrs:{icon:["fas","times"]}}),e._v("\n            Cancel\n        ")],1),e._v(" "),t("b-button",{staticClass:"mr-1 mb-2",on:{click:e.updateDataset}},[t("FontAwesomeIcon",{attrs:{icon:["far","save"]}}),e._v("\n            Save\n        ")],1)],1):e._e(),e._v(" "),e.dataset.peek?t("div",{attrs:{"data-test-id":"peek-view"},domProps:{innerHTML:e._s(e.dataset.peek)}}):e._e()],1):e._e()}),[],!1,null,null,null);const $M=BM.exports;const zM={props:{is_admin:{type:Boolean,required:!0}}};const WM={components:{LibraryPermissionsWarning:(0,m.Z)(zM,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"text-center"},[e.is_admin?t("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("\n            You are logged in as an "),t("strong",[e._v("administrator")]),e._v(" therefore you can manage any folder on this\n            Galaxy instance.\n        ")]):t("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("\n            You can assign any number of roles to any of the following permission types.\n        ")])],1)])}),[],!1,null,null,null).exports},props:{name:{type:String,required:!0}},data:()=>({is_admin:(0,l.Bz)().user.attributes.is_admin})};const UM=(0,m.Z)(WM,(function(){var e=this,t=e._self._c;return t("div",[e.name?t("div",[t("div",[t("div",{staticClass:"header text-center"},[e._v(e._s(e.name))])])]):e._e(),e._v(" "),t("LibraryPermissionsWarning",{attrs:{is_admin:e.is_admin}}),e._v(" "),t("hr",{staticClass:"my-4"})],1)}),[],!1,null,"3c8b1ad7",null).exports;class VM{constructor(e={}){this.root=e.root||(0,g.getAppRoot)()}async getLibraryPermissions(e){const t=`${this.root}api/libraries/${e}/permissions?scope=current`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}}async getLibrary(e){const t=`${this.root}api/libraries/${e}`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}}async getFolderPermissions(e){const t=`${this.root}api/folders/${e}/permissions?scope=current`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}}async getDatasetPermissions(e){const t=`${this.root}api/libraries/datasets/${e}/permissions?scope=current`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}}async getDataset(e){const t=`${this.root}api/libraries/datasets/${e}`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}}async getFolder(e){const t=`${this.root}api/folders/${e}`;try{return(await v.Z.get(t)).data}catch(e){(0,y.t)(e)}}async getSelectOptions(e,t,n,i,o,a){const s=`${e}/${t}/permissions?scope=available&is_library_access=${n}&page_limit=${o}&page=${i}${a=a?`&q=${a}`:""}`;try{return(await v.Z.get(s)).data}catch(e){(0,y.t)(e)}}async setPermissions(e,t,n,i,o){const a={action:"set_permissions"};n.forEach((e=>{Object.keys(e).map((function(t){const n=e[t].map((e=>e.id));a[t]=n}))})),v.Z.post(`${e}/${t}/permissions`,a).then((function(e){i(e)})).catch((e=>{o(e)}))}async toggleDatasetPrivacy(e,t,n,i){await v.Z.post(`${(0,g.getAppRoot)()}api/libraries/datasets/${e}/permissions?action=${t?"make_private":"remove_restrictions"}`).then((e=>{n(e.data)})).catch((e=>{i(e)}))}}var qM=n(74347);a.default.use(qM.ZP);const ZM={components:{Multiselect:j()},props:{id:{type:String,required:!0},title:{type:String,required:!0},permission_type:{type:String,required:!0},initial_value:{type:Array,required:!0},apiRootUrl:{type:String,required:!0},alert:{type:String,required:!0}},data:()=>({permissions:void 0,folder:void 0,is_admin:void 0,options:void 0,value:void 0,page:1,page_limit:10,searchValue:"",fetched_options:[]}),computed:{hasMorePages(){return this.page*this.page_limit<this.options.total}},created(){this.services=new VM({root:this.root}),this.assignValue(this.initial_value),this.getSelectOptions()},methods:{getSelectOptions(e=!1){this.services.getSelectOptions(this.apiRootUrl,this.id,!0,this.page,this.page_limit,this.searchValue).then((t=>{this.options=t,this.fetched_options=e?this.options.roles:this.fetched_options.concat(this.options.roles)}))},reachedEndOfList(e){e&&(this.page++,this.getSelectOptions())},valueChanged(){this.$emit("input",this.value,this.permission_type)},searchChanged(e){this.page=1,this.searchValue=e,this.getSelectOptions(!0)},assignValue(e){this.value=e}}};const GM=(0,m.Z)(ZM,(function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"h-sm"},[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),t("b-row",[t("b-col",[e.options&&e.value?t("div",{class:e.permission_type},[t("Multiselect",{attrs:{options:e.fetched_options,"clear-on-select":!0,"preserve-search":!0,multiple:!0,label:"name","track-by":"id","internal-search":!1},on:{input:e.valueChanged,"search-change":e.searchChanged},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("template",{slot:"afterList"},[e.hasMorePages?t("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.reachedEndOfList,expression:"reachedEndOfList"}]},[t("span",{staticClass:"spinner fa fa-spinner fa-spin fa-1x"})]):e._e()])],2)],1):e._e()]),e._v(" "),t("b-col",[t("b-alert",{attrs:{show:"",variant:"info"}},[t("div",{domProps:{innerHTML:e._s(e.alert)}})])],1)],1)],1)}),[],!1,null,"e1e85b8c",null).exports;a.default.use(qM.ZP),a.default.use(d.ZPm),jS();const JM={components:{PermissionsInputField:GM,FontAwesomeIcon:p.GN,LibraryBreadcrumb:iM,PermissionsHeader:UM},props:{folder_id:{type:String,required:!0},dataset_id:{type:String,required:!0}},data:()=>({permissions:void 0,dataset:void 0,is_admin:void 0,access_dataset_roles:void 0,modify_item_roles:void 0,access_dataset_roles_type:"access_dataset_roles",modify_item_roles_type:"modify_item_roles",apiRootUrl:`${(0,g.getAppRoot)()}api/libraries/datasets`}),computed:{is_unrestricted(){return!!this.access_dataset_roles&&0===this.access_dataset_roles.length}},created(){const e=(0,l.Bz)();this.root=(0,g.getAppRoot)(),this.services=new VM({root:this.root}),this.is_admin=e.user.attributes.is_admin,this.services.getDatasetPermissions(this.dataset_id).then((e=>this.assignFetchedPermissions(e))),this.services.getDataset(this.dataset_id).then((e=>{this.dataset=e}))},methods:{assignFetchedPermissions(e){this.access_dataset_roles=NS(e.access_dataset_roles),this.modify_item_roles=NS(e.modify_item_roles),console.log(this.access_dataset_roles)},toggleDatasetPrivacy(e){this.services.toggleDatasetPrivacy(this.dataset_id,e,(t=>{oo.FN.success(""+(e?"The dataset is now private to you.":"Access to this dataset is now unrestricted.")),this.assignFetchedPermissions(t),this.$refs.access_field.assignValue(this.access_dataset_roles)}),(e=>{oo.FN.error("An error occurred while attempting to set folder permissions."),console.error(e)}))},setUserPermissionsPreferences(e,t){this[t]=e},postPermissions(){this.services.setPermissions(this.apiRootUrl,this.dataset_id,[{"access_ids[]":this.access_dataset_roles},{"modify_ids[]":this.modify_item_roles}],(e=>{oo.FN.success("Permissions saved."),this.assignFetchedPermissions(e)}),(e=>{oo.FN.error("An error occurred while attempting to set folder permissions."),console.error(e)}))}}};const KM=(0,m.Z)(JM,(function(){var e=this,t=e._self._c;return t("div",[t("b-container",{attrs:{fluid:""}},[e.dataset?t("div",[t("LibraryBreadcrumb",{attrs:{"current-id":e.dataset_id,full_path:e.dataset.full_path}}),e._v(" "),t("b-button",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Go to Dataset Details",variant:"secondary",type:"button",href:`${e.root}libraries/folders/${e.folder_id}/dataset/${e.dataset_id}`}},[t("FontAwesomeIcon",{attrs:{icon:["far","file"]}}),e._v("\n                 Dataset Details\n            ")],1),e._v(" "),t("PermissionsHeader",{attrs:{name:e.dataset.name}})],1):e._e(),e._v(" "),t("h2",{staticClass:"text-center"},[e._v("Library-related permissions")]),e._v(" "),e.modify_item_roles?t("PermissionsInputField",{attrs:{id:e.dataset_id,permission_type:e.modify_item_roles_type,initial_value:e.modify_item_roles,title:"Roles that can modify the library item","api-root-url":e.apiRootUrl,alert:"User with <strong>any</strong> of these roles can modify name, metadata, and other information about this library item."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),t("hr",{staticClass:"my-4"}),e._v(" "),t("h2",{staticClass:"text-center"},[e._v("Dataset-related permissions")]),e._v(" "),t("div",{staticClass:"alert alert-warning text-center"},[e._v("\n            Changes made below will affect "),t("strong",[e._v("every")]),e._v(" library item that was created from this dataset\n            and also every history this dataset is part of.\n        ")]),e._v(" "),e.is_unrestricted?t("p",{staticClass:"text-center"},[e._v("\n            You can\n            "),t("strong",{staticClass:"make-private",on:{click:function(t){return e.toggleDatasetPrivacy(!0)}}},[t("a",{attrs:{id:"make-private",href:"javascript:void(0)"}},[e._v("make this dataset private")])]),e._v("\n            to you.\n        ")]):t("p",{staticClass:"text-center"},[e._v("\n            You can\n            "),t("strong",{staticClass:"remove-restrictions",on:{click:function(t){return e.toggleDatasetPrivacy(!1)}}},[t("a",{attrs:{href:"javascript:void(0)"}},[e._v("remove all access restrictions")])]),e._v("\n            on this dataset.\n        ")]),e._v(" "),e.access_dataset_roles?t("PermissionsInputField",{ref:"access_field",attrs:{id:e.dataset_id,permission_type:e.access_dataset_roles_type,initial_value:e.access_dataset_roles,"api-root-url":e.apiRootUrl,title:"Roles that can access the dataset",alert:"User has to have <strong>all these roles</strong> in order to access this dataset.\n                    Users without access permission <strong>cannot</strong> have other permissions on this dataset.\n                    If there are no access roles set on the dataset it is considered <strong>unrestricted</strong>."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),t("b-button",{staticClass:"toolbtn_save_permissions",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Save modifications",variant:"secondary"},on:{click:e.postPermissions}},[t("FontAwesomeIcon",{attrs:{icon:["far","save"]}}),e._v("\n             Save\n        ")],1)],1)],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm),jS();const XM={components:{PermissionsInputField:GM,PermissionsHeader:UM,FontAwesomeIcon:p.GN},props:{folder_id:{type:String,required:!0}},data:()=>({permissions:void 0,folder:void 0,add_library_item_role_list:void 0,modify_folder_role_list:void 0,add_type:"add_library_item_role_list",modify_type:"modify_folder_role_list",apiRootUrl:`${(0,g.getAppRoot)()}api/folders`}),created(){this.root=(0,g.getAppRoot)(),this.services=new VM({root:this.root}),this.services.getFolderPermissions(this.folder_id).then((e=>{this.add_library_item_role_list=NS(e.add_library_item_role_list),this.modify_folder_role_list=NS(e.modify_folder_role_list)})),this.services.getFolder(this.folder_id).then((e=>{this.folder=e}))},methods:{setUserPermissionsPreferences(e,t){this[t]=e},postPermissions(){this.services.setPermissions(this.apiRootUrl,this.folder_id,[{"add_ids[]":this.add_library_item_role_list},{"modify_ids[]":this.modify_folder_role_list}],(e=>{oo.FN.success("Permissions saved."),this.permissions=e}),(e=>{oo.FN.error("An error occurred while attempting to set folder permissions."),console.error(e)}))},onGoBack(){this.$router.go(-1)}}};const QM=(0,m.Z)(XM,(function(){var e=this,t=e._self._c;return t("div",[t("b-button",{attrs:{variant:"link"},on:{click:e.onGoBack}},[e._v("Go back")]),e._v(" "),e.folder?t("PermissionsHeader",{attrs:{name:e.folder.name}}):e._e(),e._v(" "),t("b-container",{attrs:{fluid:""}},[t("div",{staticClass:"dataset_table"},[t("h2",{staticClass:"text-center"},[e._v("Folder permissions")]),e._v(" "),e.add_library_item_role_list?t("PermissionsInputField",{attrs:{id:e.folder_id,permission_type:e.add_type,initial_value:e.add_library_item_role_list,"api-root-url":e.apiRootUrl,title:"Roles that can add items to this folder",alert:"User with <strong>any</strong> of these roles can add items to this folder (folders and\n                            datasets)."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.modify_folder_role_list?t("PermissionsInputField",{attrs:{id:e.folder_id,permission_type:e.modify_type,initial_value:e.modify_folder_role_list,"api-root-url":e.apiRootUrl,title:"Roles that can modify this folder",alert:"User with <strong>any</strong> of these roles can modify this folder (name, etc.)."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),t("button",{staticClass:"btn btn-secondary toolbtn_save_permissions primary-button",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Save modifications",type:"button"},on:{click:e.postPermissions}},[t("FontAwesomeIcon",{attrs:{icon:["far","save"]}}),e._v("\n                 Save\n            ")],1)],1)])],1)}),[],!1,null,null,null).exports;a.default.use(d.ZPm),jS();const eT={components:{PermissionsHeader:UM,PermissionsInputField:GM,FontAwesomeIcon:p.GN},props:{library_id:{type:String,required:!0}},data:()=>({permissions:void 0,library:void 0,add_library_item_role_list:void 0,modify_library_role_list:void 0,access_library_role_list:void 0,apiRootUrl:`${(0,g.getAppRoot)()}api/libraries`,add_type:"add_library_item_role_list",modify_type:"modify_library_role_list",access_type:"access_library_role_list"}),created(){this.root=(0,g.getAppRoot)(),this.services=new VM({root:this.root}),this.services.getLibraryPermissions(this.library_id).then((e=>{console.log("fetched_permissions",e),this.add_library_item_role_list=NS(e.add_library_item_role_list),this.modify_library_role_list=NS(e.modify_library_role_list),this.access_library_role_list=NS(e.access_library_role_list)})),this.services.getLibrary(this.library_id).then((e=>{this.library=e}))},methods:{setUserPermissionsPreferences(e,t){this[t]=e},postPermissions(){this.services.setPermissions(this.apiRootUrl,this.library_id,[{"add_ids[]":this.add_library_item_role_list},{"modify_ids[]":this.modify_library_role_list},{"access_ids[]":this.access_library_role_list}],(e=>{oo.FN.success("Library permissions saved."),this.permissions=e}),(e=>{oo.FN.error("An error occurred while attempting to set folder permissions."),console.error(e)}))},onGoBack(){this.$router.go(-1)}}};const tT=(0,m.Z)(eT,(function(){var e=this,t=e._self._c;return t("div",[t("b-button",{attrs:{variant:"link"},on:{click:e.onGoBack}},[e._v("Go back to Libraries")]),e._v(" "),e.library?t("PermissionsHeader",{attrs:{name:e.library.name}}):e._e(),e._v(" "),t("h1",{staticClass:"text-center h-lg"},[e._v("Library permissions")]),e._v(" "),e.access_library_role_list?t("PermissionsInputField",{attrs:{id:e.library_id,permission_type:e.access_type,initial_value:e.access_library_role_list,"api-root-url":e.apiRootUrl,alert:"User with <strong>any</strong> of these roles can access this library. If there are no access roles set on the library it is considered <strong>unrestricted</strong>.",title:"Roles that can access the library"},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.add_library_item_role_list?t("PermissionsInputField",{staticClass:"add_perm",attrs:{id:e.library_id,permission_type:e.add_type,initial_value:e.add_library_item_role_list,"api-root-url":e.apiRootUrl,alert:"User with <strong>any</strong> of these roles can add items to this library (folders and datasets).",title:"Roles that can add items to this library"},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.modify_library_role_list?t("PermissionsInputField",{attrs:{id:e.library_id,permission_type:e.modify_type,initial_value:e.modify_library_role_list,"api-root-url":e.apiRootUrl,alert:"User with  <strong>any</strong> of these roles can modify this library (name, synopsis, etc.).",title:"Roles that can modify this library"},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),t("button",{staticClass:"toolbtn_save_permissions",attrs:{title:"Save modifications"},on:{click:e.postPermissions}},[t("FontAwesomeIcon",{attrs:{icon:["far","save"]}}),e._v("\n        Save\n    ")],1)],1)}),[],!1,null,null,null).exports;const nT=(0,m.Z)({},(function(){return(0,this._self._c)("router-view",{key:this.$route.fullPath,staticClass:"m-2"})}),[],!1,null,null,null).exports,iT=[{path:"/libraries",component:nT,children:[{path:"",component:JS},{path:":library_id/permissions",name:"LibraryPermissions",component:tT,props:!0},{path:"folders/:folder_id",redirect:"folders/:folder_id/page/1"},{path:"folders/:folder_id/page/:page",name:"LibraryFolder",component:YM,props(e){const t={...e.params};return t.page&&(t.page=+t.page),t}},{path:"folders/:folder_id/dataset/:dataset_id",name:"LibraryDataset",component:$M,props:!0},{path:"folders/:folder_id/permissions",name:"LibraryFolderPermissions",component:QM,props:!0},{path:"folders/:folder_id/dataset/:dataset_id/permissions",name:"LibraryFolderDatasetPermissions",component:KM,props:!0}]}];class oT{constructor(e){Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._data=e}get totalSize(){return this._data.total_size}get niceTotalSize(){return(0,fe.d3)(this.totalSize,!0,void 0)}get totalItems(){return this._data.total_items}}class aT{constructor(e){Object.defineProperty(this,"limit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"offset",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sortBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sortDesc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.limit=null==e?void 0:e.limit,this.offset=null==e?void 0:e.offset,this.sortBy=null==e?void 0:e.sortBy,this.sortDesc=null==e?void 0:e.sortDesc}get order(){return this.sortBy?`${this.sortBy}${this.sortDesc?"-dsc":"-asc"}`:void 0}}class sT{constructor(e,t,n){Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_item_id_map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_errorMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._data=null!=e?e:{total_item_count:0,success_item_count:0,total_free_bytes:0,errors:[]},t=null!=t?t:[],this._item_id_map=new Map,t.forEach((e=>{this._item_id_map.set(e.id,e)})),this._errorMessage=n}get totalItemCount(){return this._data.total_item_count}get totalFreeBytes(){return this._data.total_free_bytes}get errors(){return this._data.errors.map((e=>{var t,n;return{name:null!==(n=null===(t=this._item_id_map.get(e.item_id))||void 0===t?void 0:t.name)&&void 0!==n?n:"Unknown",reason:e.error}}))}get errorMessage(){return this._errorMessage}get hasSomeErrors(){return this._data.errors.length>0}get hasFailed(){return Boolean(this._errorMessage)}get success(){return!this.hasSomeErrors&&!this.hasFailed}get totalCleaned(){return this._data.success_item_count}get isPartialSuccess(){return this.hasSomeErrors&&this._data.success_item_count>0}get hasUpdatedResults(){return this.totalFreeBytes>0||this.totalCleaned>0}get niceTotalFreeBytes(){return(0,fe.d3)(this._data.total_free_bytes,!0,void 0)}}var rT=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const lT=X._.path("/api/storage/datasets/discarded/summary").method("get").create();function dT(){return rT(this,void 0,void 0,(function*(){try{const{data:e}=yield lT({});return new oT(e)}catch(e){(0,y.t)(e)}}))}const cT=X._.path("/api/storage/datasets/discarded").method("get").create();function uT(e){return rT(this,void 0,void 0,(function*(){try{e=null!=e?e:new aT;const{data:t}=yield cT({offset:e.offset,limit:e.limit,order:e.order});return t}catch(e){(0,y.t)(e)}}))}const hT=X._.path("/api/storage/datasets").method("delete").create();function pT(e){return rT(this,void 0,void 0,(function*(){try{const t=e.map((e=>e.id)),{data:n}=yield hT({item_ids:t});return new sT(n,e)}catch(t){return new sT(void 0,e,t)}}))}const fT=X._.path("/api/storage/histories/discarded/summary").method("get").create();function mT(){return rT(this,void 0,void 0,(function*(){try{const{data:e}=yield fT({});return new oT(e)}catch(e){(0,y.t)(e)}}))}const _T=X._.path("/api/storage/histories/discarded").method("get").create();function vT(e){return rT(this,void 0,void 0,(function*(){try{e=null!=e?e:new aT;const{data:t}=yield _T({offset:e.offset,limit:e.limit,order:e.order});return t}catch(e){(0,y.t)(e)}}))}const gT=X._.path("/api/storage/histories").method("delete").create();function yT(e){return rT(this,void 0,void 0,(function*(){try{const t=e.map((e=>e.id)),{data:n}=yield gT({item_ids:t});return new sT(n,e)}catch(t){return new sT(void 0,e,t)}}))}const bT=X._.path("/api/storage/histories/archived/summary").method("get").create();function wT(){return rT(this,void 0,void 0,(function*(){const{data:e}=yield bT({});return new oT(e)}))}const kT=X._.path("/api/storage/histories/archived").method("get").create();function CT(e){return rT(this,void 0,void 0,(function*(){e=null!=e?e:new aT;const{data:t}=yield kT({offset:e.offset,limit:e.limit,order:e.order});return t}))}var xT=n(64206),ST=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const MT=(0,a.defineComponent)({__name:"CleanupOperationSummary",props:{operation:null,refreshOperationId:{default:void 0},refreshDelay:{default:500}},emits:["onReviewItems"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(),o=(0,a.ref)(!0),s=(0,a.ref)(),r=(0,a.computed)((()=>{var e,t;return(null!==(t=null===(e=i.value)||void 0===e?void 0:e.totalItems)&&void 0!==t?t:0)>0}));function l(){return ST(this,void 0,void 0,(function*(){o.value=!0;try{const e=Date.now();i.value=yield n.operation.fetchSummary();const t=Date.now()-e;yield(0,fe.Dc)(n.refreshDelay-t)}catch(e){d(String(e))}finally{o.value=!1}}))}function d(e){s.value=e}return(0,a.onMounted)((()=>ST(this,void 0,void 0,(function*(){yield l()})))),(0,a.watchEffect)((()=>ST(this,void 0,void 0,(function*(){n.operation.id===n.refreshOperationId&&(yield l())})))),{__sfc:!0,props:n,summary:i,loading:o,errorMessage:s,canClearItems:r,emit:t,refresh:l,onError:d,onReviewItems:function(){var e,o;t("onReviewItems",n.operation,null!==(o=null===(e=i.value)||void 0===e?void 0:e.totalItems)&&void 0!==o?o:0)},BAlert:Rn.F,BCard:vi._,BCardText:xT.j,BLink:Yn.we,localize:Ee.ZP,LoadingSpan:z.Z}}}),TT=MT;const LT=(0,m.Z)(TT,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BCard,{staticClass:"operation-card mx-2",attrs:{title:n.props.operation.name,"footer-bg-variant":"white","footer-border-variant":"white"},scopedSlots:e._u([{key:"footer",fn:function(){return[n.loading?e._e():t("div",[n.errorMessage?t(n.BAlert,{attrs:{variant:"danger",show:"","data-test-id":"error-alert"}},[t("h2",{staticClass:"alert-heading h-sm"},[e._v("Failed to retrieve details.")]),e._v("\n                "+e._s(n.errorMessage)+"\n            ")]):n.summary&&n.canClearItems?t(n.BLink,{staticClass:"card-link",attrs:{href:"#","data-test-id":"review-link"},on:{click:n.onReviewItems}},[t("b",[e._v(e._s(n.localize("Review and clear"))+" "+e._s(n.summary.niceTotalSize))])]):t("b",{staticClass:"text-secondary",attrs:{"data-test-id":"no-items-indicator"}},[e._v("\n                "+e._s(n.localize("No items to clear"))+"\n            ")])],1)]},proxy:!0}])},[n.loading?t(n.LoadingSpan):e._e(),e._v(" "),n.loading?e._e():t(n.BCardText,[e._v("\n        "+e._s(e.operation.description)+"\n    ")])],1)}),[],!1,null,"6e2a1616",null).exports;const DT=(0,a.defineComponent)({__name:"CleanupResultDialog",props:{result:{default:void 0}},setup(e,{expose:t}){const n=e,i=(0,a.ref)(!1),o=(0,a.computed)((()=>void 0===n.result)),s=(0,a.computed)((()=>{let e=(0,Ee.ZP)("Something went wrong...");return o.value?e=(0,Ee.ZP)("Freeing up some space..."):n.result.isPartialSuccess?e=(0,Ee.ZP)("Sorry, some items couldn't be cleared"):n.result.success&&(e=(0,Ee.ZP)("Congratulations!")),e})),r=[{key:"name",label:(0,Ee.ZP)("Name")},{key:"reason",label:(0,Ee.ZP)("Reason")}];function l(){i.value=!0}return t({openModal:l}),{__sfc:!0,props:n,showModal:i,isLoading:o,title:s,errorFields:r,openModal:l,Alert:M}}});const ET=(0,m.Z)(DT,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-modal",{attrs:{id:"cleanup-result-modal",title:n.title,"title-tag":"h2","hide-footer":"",static:""},model:{value:n.showModal,callback:function(e){n.showModal=e},expression:"showModal"}},[t("div",{staticClass:"text-center"},[t(n.Alert,{attrs:{variant:"info",message:"After the operation, the storage space that will be freed up will only be for the unique items. This means that some items may not free up any storage space because they are duplicates of other items."}}),e._v(" "),n.isLoading?t("b-spinner",{staticClass:"mx-auto",attrs:{"data-test-id":"loading-spinner"}}):t("div",[e.result.hasFailed?t("b-alert",{attrs:{show:"",variant:"danger","data-test-id":"error-alert"}},[e._v("\n                "+e._s(e.result.errorMessage)+"\n            ")]):e.result.success?t("h3",{attrs:{"data-test-id":"success-info"}},[e._v("\n                You've cleared "),t("b",[e._v(e._s(e.result.niceTotalFreeBytes))])]):e.result.isPartialSuccess?t("div",{attrs:{"data-test-id":"partial-success-info"}},[t("h3",[e._v("\n                    You've successfully cleared "),t("b",[e._v(e._s(e.result.totalCleaned))]),e._v(" items for a total of\n                    "),t("b",[e._v(e._s(e.result.niceTotalFreeBytes))]),e._v(" but...\n                ")]),e._v(" "),e.result.hasSomeErrors?t("b-alert",{attrs:{show:"",variant:"warning"}},[t("h3",{staticClass:"mb-0"},[t("b",[e._v(e._s(e.result.errors.length))]),e._v(" items couldn't be cleared\n                    ")])]):e._e()],1):e._e(),e._v(" "),e.result.hasSomeErrors?t("b-table-lite",{attrs:{fields:n.errorFields,items:e.result.errors,small:"","data-test-id":"errors-table"}}):e._e()],1)],1)])}),[],!1,null,null,null).exports;var OT=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const AT=(0,a.defineComponent)({__name:"ReviewCleanupDialog",props:{operation:{default:void 0},totalItems:{default:0},modalStatic:{type:Boolean}},emits:["onConfirmCleanupSelectedItems"],setup(e,{expose:t,emit:n}){const i=e,o=(0,Ee.ZP)("Permanently delete"),s=(0,Ee.ZP)("To free up account space, review and select items to be permanently deleted here."),r=(0,Ee.ZP)("I understand that once I delete the items, they cannot be recovered."),l=[{key:"selected",label:"",sortable:!1},{key:"name",sortable:!0},{key:"size",sortable:!0,formatter:L},{label:"Updated",key:"update_time",sortable:!0}],d=(0,a.ref)("size"),c=(0,a.ref)(!0),u=(0,a.ref)(1),h=(0,a.ref)(1),p=(0,a.ref)(!1),f=(0,a.ref)(!1),m=(0,a.ref)(!1),_=(0,a.ref)([]),v=(0,a.ref)([]),g=(0,a.ref)(!1),y=(0,a.ref)(!1),b=(0,a.computed)((()=>v.value.length)),w=(0,a.computed)((()=>b.value>0)),k=(0,a.computed)((()=>h.value>25)),C=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=i.operation)||void 0===e?void 0:e.name)&&void 0!==t?t:""})),x=(0,a.computed)((()=>`Permanently delete ${b.value} items?`)),S=(0,a.computed)((()=>w.value?"danger":"")),M=(0,a.computed)((()=>w.value?`${b.value} items`:"")),T=(0,a.computed)((()=>g.value?"danger":""));function L(e){return(0,fe.d3)(e,!0,void 0)}function D(){m.value=!0}function E(){m.value=!1}function O(){I()}function A(){return OT(this,void 0,void 0,(function*(){y.value=!0;const e=yield i.operation.fetchItems(new aT({offset:0,limit:h.value,sortBy:d.value,sortDesc:c.value}));_.value=e,v.value=e,y.value=!1}))}function I(){v.value=[]}return(0,a.watch)(i,(e=>{u.value=1,h.value=e.totalItems})),(0,a.watch)(v,(e=>{0===e.length?(f.value=!1,p.value=!1):e.length===h.value?(f.value=!1,p.value=!0):(f.value=!0,p.value=!1)})),t({openModal:D,selectedItems:v}),{__sfc:!0,props:i,emit:n,permanentlyDeleteText:o,captionText:s,agreementText:r,fields:l,MAXIMUM_ITEMS_PER_PAGE:25,sortBy:d,sortDesc:c,currentPage:u,totalRows:h,allSelected:p,indeterminate:f,showDialog:m,items:_,selectedItems:v,confirmChecked:g,isBusy:y,selectedItemCount:b,hasItemsSelected:w,hasPages:k,title:C,confirmationTitle:x,deleteButtonVariant:S,deleteItemsText:M,confirmButtonVariant:T,toNiceSize:L,toggleSelectAll:function(e){return OT(this,void 0,void 0,(function*(){e?yield A():I()}))},openModal:D,hideModal:E,onShowModal:function(){O()},resetModal:O,resetConfirmationModal:function(){g.value=!1},onConfirmCleanupSelectedItems:function(){n("onConfirmCleanupSelectedItems",v.value),E()},onSort:function(e){d.value=e.sortBy,c.value=e.sortDesc},itemsProvider:function(e){return OT(this,void 0,void 0,(function*(){try{const t=(e.currentPage>0?e.currentPage-1:0)*e.perPage,n=new aT({offset:t,limit:e.perPage,sortBy:d.value,sortDesc:c.value});return yield i.operation.fetchItems(n)}catch(e){return[]}}))},selectAllItems:A,unselectAllItems:I,BButton:jn.T,BFormCheckbox:Zi.l,BModal:Nr.N,BPagination:Hn.c,BTable:go.h,UtcDate:J.Z}}}),IT=AT;var PT=(0,m.Z)(IT,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BModal,{attrs:{"title-tag":"h2",static:e.modalStatic,centered:""},on:{show:n.onShowModal},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n        "+e._s(n.title)+"\n        "),t("span",{staticClass:"text-primary h3"},[e._v(e._s(n.totalRows)+" items")])]},proxy:!0},{key:"modal-footer",fn:function(){return[n.hasPages?t(n.BPagination,{attrs:{"total-rows":n.totalRows,"per-page":n.MAXIMUM_ITEMS_PER_PAGE},model:{value:n.currentPage,callback:function(e){n.currentPage=e},expression:"currentPage"}}):e._e(),e._v(" "),t(n.BButton,{directives:[{name:"b-modal",rawName:"v-b-modal.confirmation-modal",modifiers:{"confirmation-modal":!0}}],staticClass:"mx-2",attrs:{disabled:!n.hasItemsSelected,variant:n.deleteButtonVariant,"data-test-id":"delete-button"}},[e._v("\n            "+e._s(n.permanentlyDeleteText)+" "+e._s(n.deleteItemsText)+"\n        ")])]},proxy:!0}]),model:{value:n.showDialog,callback:function(e){n.showDialog=e},expression:"showDialog"}},[e._v(" "),t("div",[e._v("\n        "+e._s(n.captionText)+"\n    ")]),e._v(" "),e.operation?t(n.BTable,{attrs:{fields:n.fields,items:n.itemsProvider,"per-page":n.MAXIMUM_ITEMS_PER_PAGE,"current-page":n.currentPage,busy:n.isBusy,hover:"","no-sort-reset":"","no-local-sorting":"","no-provider-filtering":"","sticky-header":"50vh","data-test-id":"review-table"},on:{"sort-changed":n.onSort},scopedSlots:e._u([{key:"head(selected)",fn:function(){return[t(n.BFormCheckbox,{attrs:{indeterminate:n.indeterminate,"data-test-id":"select-all-checkbox"},on:{change:n.toggleSelectAll},model:{value:n.allSelected,callback:function(e){n.allSelected=e},expression:"allSelected"}})]},proxy:!0},{key:"cell(selected)",fn:function(e){return[t(n.BFormCheckbox,{key:e.index,attrs:{checked:n.allSelected,value:e.item},model:{value:n.selectedItems,callback:function(e){n.selectedItems=e},expression:"selectedItems"}})]}},{key:"cell(update_time)",fn:function(e){return[t(n.UtcDate,{attrs:{date:e.value,mode:"elapsed"}})]}}],null,!1,2297866832),model:{value:n.items,callback:function(e){n.items=e},expression:"items"}}):e._e(),e._v(" "),e._v(" "),t(n.BModal,{attrs:{id:"confirmation-modal",title:n.confirmationTitle,"title-tag":"h2","ok-title":n.permanentlyDeleteText,"ok-variant":n.confirmButtonVariant,"ok-disabled":!n.confirmChecked,static:"",centered:""},on:{show:n.resetConfirmationModal,ok:n.onConfirmCleanupSelectedItems}},[t(n.BFormCheckbox,{attrs:{id:"confirm-delete-checkbox","data-test-id":"agreement-checkbox"},model:{value:n.confirmChecked,callback:function(e){n.confirmChecked=e},expression:"confirmChecked"}},[e._v("\n            "+e._s(n.agreementText)+"\n        ")])],1)],1)}),[],!1,null,null,null);const RT=PT.exports;var jT=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const YT=(0,a.defineComponent)({__name:"StorageManager",setup(e){const{config:t}=(0,c.Z)(),{cleanupCategories:n}={cleanupCategories:(0,a.ref)([{id:"discarded_items",name:(0,Ee.ZP)("Discarded Items"),operations:[{id:"deleted_datasets",name:(0,Ee.ZP)("Deleted datasets"),description:(0,Ee.ZP)("When you delete a dataset it's not immediately removed from the disk (so you can recover it later). But this means it's still taking space until you permanently delete it. Here you can quickly find and remove those datasets to free up some space"),fetchSummary:dT,fetchItems:uT,cleanupItems:pT},{id:"deleted_histories",name:(0,Ee.ZP)("Deleted histories"),description:(0,Ee.ZP)("When you delete a history it's not immediately removed from the disk (so you can recover it later). But this means it's still taking space until you permanently delete it. Here you can quickly find and remove those histories to free up some space"),fetchSummary:mT,fetchItems:vT,cleanupItems:yT}]},{id:"archived_items",name:(0,Ee.ZP)("Archived Items"),operations:[{id:"archived_histories",name:(0,Ee.ZP)("Archived histories"),description:(0,Ee.ZP)("Archived histories are a good way to keep some of your important but not frequently used histories out of the way. But they can still take up space on the disk. Here you can quickly find and permanently remove those histories to free up some space"),fetchSummary:wT,fetchItems:CT,cleanupItems:yT}]}])},i=(0,a.ref)(),o=(0,a.ref)(0),s=(0,a.ref)(),r=(0,a.ref)(),l=(0,a.ref)(null),d=(0,a.ref)(null);return{__sfc:!0,config:t,cleanupCategories:n,currentOperation:i,currentTotalItems:o,cleanupResult:s,refreshOperationId:r,reviewModal:l,resultModal:d,issuesUrl:"https://github.com/galaxyproject/galaxy/issues",onReviewItems:function(e,t){var n;i.value=e,o.value=t,r.value=void 0,null===(n=l.value)||void 0===n||n.openModal()},onConfirmCleanupSelected:function(e){var t;return jT(this,void 0,void 0,(function*(){s.value=void 0,null===(t=d.value)||void 0===t||t.openModal(),yield(0,fe.Dc)(1e3),i.value&&(s.value=yield i.value.cleanupItems(e),s.value.hasUpdatedResults&&(r.value=i.value.id.toString()))}))},localize:Ee.ZP,CleanupOperationSummary:LT,CleanupResultDialog:ET,ReviewCleanupDialog:RT}}}),HT=YT;const NT=(0,m.Z)(HT,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-container",{attrs:{fluid:""}},[t("b-link",{attrs:{to:"StorageDashboard"}},[e._v(e._s(n.localize("Back to Dashboard")))]),e._v(" "),t("h2",{staticClass:"text-center my-3"},[t("b",[e._v(e._s(n.localize("Manage your account storage")))]),e._v(" "),t("sup",{staticClass:"text-beta"},[e._v("(Beta)")])]),e._v(" "),t("b-row",{staticClass:"justify-content-md-center"},[t("b-alert",{attrs:{show:"",dismissible:"",variant:"warning"}},[e._v("\n            "+e._s(n.localize("This feature is currently in Beta, if you find any issues please report them"))+"\n            "),t("b-link",{attrs:{href:n.issuesUrl,target:"_blank"}},[e._v("here")]),e._v(".\n        ")],1)],1),e._v(" "),t("b-row",{staticClass:"justify-content-md-center mb-5"},[n.config.enable_quotas?t("b-alert",{attrs:{show:""}},[e._v("\n            "+e._s(n.localize("The storage manager only shows elements that count towards your disk quota."))+"\n            "),t("b-link",{attrs:{href:n.config.quota_url,target:"_blank"}},[e._v(e._s(n.localize("Learn more")))])],1):e._e()],1),e._v(" "),t("div",{attrs:{id:"categories-panel"}},e._l(n.cleanupCategories,(function(i){return t("b-container",{key:i.id},[t("b-row",{staticClass:"justify-content-md-center mb-2"},[t("h3",[t("b",[e._v(e._s(i.name))])])]),e._v(" "),t("b-row",{staticClass:"justify-content-md-center mb-5"},[t("b-card-group",{attrs:{deck:""}},e._l(i.operations,(function(e){return t(n.CleanupOperationSummary,{key:e.id,attrs:{operation:e,"refresh-operation-id":n.refreshOperationId},on:{onReviewItems:n.onReviewItems}})})),1)],1)],1)})),1),e._v(" "),t(n.ReviewCleanupDialog,{ref:"reviewModal",attrs:{operation:n.currentOperation,"total-items":n.currentTotalItems},on:{onConfirmCleanupSelectedItems:n.onConfirmCleanupSelected}}),e._v(" "),t(n.CleanupResultDialog,{ref:"resultModal",attrs:{result:n.cleanupResult}})],1)}),[],!1,null,"c031c4ba",null).exports;const FT=(0,a.defineComponent)({__name:"QuotaUsageSummary",props:{quotaUsages:null},setup(e,{expose:t}){const n=e,i=(0,a.computed)((()=>n.quotaUsages.reduce(((e,t)=>{var n;return e+(null!==(n=t.quotaInBytes)&&void 0!==n?n:0)}),0))),o=(0,a.computed)((()=>(0,fe.d3)(i.value,!0,void 0))),s=(0,a.computed)((()=>n.quotaUsages.every((e=>e.isUnlimited))));return t({totalQuotaInBytes:i}),{__sfc:!0,props:n,totalQuotaInBytes:i,niceTotalQuota:o,allSourcesUnlimited:s,QuotaUsageBar:Ae}}});const BT=(0,m.Z)(FT,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"quota-summary"},[t("div",{staticClass:"text-center my-5"},[n.allSourcesUnlimited?t("div",[e._m(0),e._v(" "),t("h3",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"h-sm"},[e._v("All your storage sources have unlimited disk space. Enjoy!")])]):t("div",[t("h2",[e._v("\n                You've got "),t("b",[e._v(" "+e._s(n.niceTotalQuota)+" ")]),e._v(" of total disk quota\n            ")]),e._v(" "),t("h3",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"h-sm"},[e._v("\n                This is the maximum disk space that you can use across all your storage sources. Unlimited storage\n                sources are not taken into account\n            ")])])]),e._v(" "),e._l(n.props.quotaUsages,(function(e){return t("div",{key:e.sourceLabel},[t(n.QuotaUsageBar,{staticClass:"quota-usage-bar",attrs:{"quota-usage":e}})],1)}))],2)}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("h2",[e._v("You've got "),t("b",[e._v("unlimited")]),e._v(" disk quota")])}],!1,null,null,null).exports;var $T=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const zT=(0,a.defineComponent)({__name:"DiskUsageSummary",setup(e){const{config:t,isConfigLoaded:n}=(0,c.Z)(!0),i=(0,Xe.L)(),{currentUser:s}=(0,o.Jk)(i),{isRunning:r,waitForTask:l}=(0,Pi.n)(),d=(0,a.ref)(),u=(0,a.ref)(),h=(0,a.ref)(!1),p=(0,a.computed)((()=>!s.value||s.value.isAnonymous?"Unknown":(0,fe.d3)(s.value.total_disk_usage,!0))),f=(0,a.computed)((()=>r.value||h.value));function m(e){return $T(this,void 0,void 0,(function*(){return new Promise((t=>{h.value=!0,setTimeout((()=>{h.value=!1,t()}),1e3*e)}))}))}function _(){return $T(this,void 0,void 0,(function*(){try{const{data:e}=yield kx({user_id:"current"});d.value=e.map((e=>new _e(e)))}catch(e){u.value=(0,y.a)(e)}}))}return(0,a.watch)((()=>f.value),((e,t)=>{if(t&&!e){const e=!1;i.loadUser(e),_()}})),(0,a.onMounted)((()=>$T(this,void 0,void 0,(function*(){yield _()})))),{__sfc:!0,config:t,isConfigLoaded:n,userStore:i,currentUser:s,isRecalculateTaskRunning:r,waitForTask:l,quotaUsages:d,errorMessage:u,isRecalculating:h,niceTotalDiskUsage:p,isRefreshing:f,displayRecalculationForSeconds:m,onRefresh:function(){return $T(this,void 0,void 0,(function*(){try{const e=yield wx({});200==e.status?l(e.data.id):204==e.status&&(yield m(30))}catch(e){u.value=(0,y.a)(e)}}))},loadQuotaUsages:_,QuotaUsageSummary:BT}}}),WT=zT;const UT=(0,m.Z)(WT,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.errorMessage?t("b-alert",{attrs:{variant:"danger",show:""}},[t("h2",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"alert-heading h-sm"},[e._v("Failed to access disk usage details.")]),e._v("\n        "+e._s(n.errorMessage)+"\n    ")]):e._e(),e._v(" "),n.currentUser?t("b-container",[n.isConfigLoaded&&n.config.enable_quotas?t("b-row",{staticClass:"justify-content-md-center"},[n.quotaUsages?t(n.QuotaUsageSummary,{attrs:{"quota-usages":n.quotaUsages}}):e._e()],1):t("h2",{staticClass:"text-center my-3",attrs:{id:"basic-disk-usage-summary"}},[e._v("\n            You're using "),t("b",[e._v(e._s(n.niceTotalDiskUsage))]),e._v(" of disk space.\n        ")])],1):e._e(),e._v(" "),t("b-container",{staticClass:"text-center mb-5 w-75"},[t("button",{attrs:{id:"refresh-disk-usage",title:"Recalculate disk usage",disabled:n.isRefreshing,variant:"outline-secondary",size:"sm",pill:""},on:{click:n.onRefresh}},[n.isRefreshing?t("b-spinner",{attrs:{small:""}}):t("span",[e._v("Refresh")])],1),e._v(" "),n.isRefreshing?t("b-alert",{staticClass:"refreshing-alert mt-2",attrs:{variant:"info",show:"",dismissible:"",fade:""}},[e._v("\n            Recalculating disk usage... this may take some time, please check back later.\n        ")]):e._e()],1)],1)}),[],!1,null,null,null).exports;const VT={props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,required:!0},buttonText:{type:String,required:!0}},methods:{onButtonClick(){this.$emit("onButtonClick")}}};const qT=(0,m.Z)(VT,(function(){var e=this,t=e._self._c;return t("b-card",{staticClass:"mx-4 icon-card",attrs:{title:e.title}},[t("b-container",{staticClass:"p-0"},[t("b-row",[t("b-col",[e._v(e._s(e.description))]),e._v(" "),t("b-col",{attrs:{cols:"auto"}},[t("i",{class:e.icon})])],1)],1),e._v(" "),t("b-button",{attrs:{variant:"primary"},on:{click:e.onButtonClick}},[e._v(e._s(e.buttonText))])],1)}),[],!1,null,"35f1538b",null).exports,ZT=(0,a.defineComponent)({__name:"StorageDashboard",setup(e){const t=(0,Nn.tv)(),n=(0,a.reactive)({title:(0,Ee.ZP)("Storage Dashboard"),subtitle:(0,Ee.ZP)("Here you can see an overview of your disk usage status."),freeSpace:{title:(0,Ee.ZP)("Is your usage more than expected?"),description:(0,Ee.ZP)("Find out what is eating up your space and learn how to easily and safely free up some of it."),icon:"fas fa-broom fa-6x",buttonText:(0,Ee.ZP)("Free up disk usage")},explore:{title:(0,Ee.ZP)("Visually explore your disk usage"),description:(0,Ee.ZP)("Want to know what histories or datasets take up the most space in your account? Here you can explore your disk usage in a visual way."),icon:"fas fa-chart-pie fa-6x",buttonText:(0,Ee.ZP)("Explore now")}});return{__sfc:!0,router:t,texts:n,goToStorageManager:function(){t.push({name:"StorageManager"})},goToHistoriesOverview:function(){t.push({name:"HistoriesOverview"})},DiskUsageSummary:UT,IconCard:qT}}});const GT=(0,m.Z)(ZT,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("header",{staticClass:"main-header"},[t("h1",{staticClass:"text-center my-3"},[t("b",[e._v(e._s(n.texts.title))])]),e._v(" "),t("h2",{staticClass:"text-center my-3 h-sm"},[e._v(e._s(n.texts.subtitle))])]),e._v(" "),t(n.DiskUsageSummary,{staticClass:"m-3"}),e._v(" "),t(n.IconCard,{staticClass:"mx-auto mb-3",attrs:{"data-description":"free space card",title:n.texts.freeSpace.title,description:n.texts.freeSpace.description,icon:n.texts.freeSpace.icon,"button-text":n.texts.freeSpace.buttonText},on:{onButtonClick:n.goToStorageManager}}),e._v(" "),t(n.IconCard,{staticClass:"mx-auto mb-3",attrs:{"data-description":"explore usage card",title:n.texts.explore.title,description:n.texts.explore.description,icon:n.texts.explore.icon,"button-text":n.texts.explore.buttonText},on:{onButtonClick:n.goToHistoriesOverview}})],1)}),[],!1,null,null,null).exports;function JT(e){return e?`${e.label}: ${(0,fe.d3)(e.value)}`:"No data"}function KT(e){return(0,fe.d3)(e)}const XT=X._.path("/api/histories").method("get").create(),QT=X._.path("/api/histories/archived").method("get").create(),eL=X._.path("/api/histories/deleted/{history_id}/undelete").method("post").create(),tL=X._.path("/api/histories/{history_id}").method("delete").create();var nL=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const iL="id,name,size,deleted,archived";const oL=(0,a.defineComponent)({__name:"BarChart",props:{data:null,title:{default:"Bar Chart"},description:{default:void 0},width:{default:720},height:{default:400},enableTooltips:{type:Boolean,default:!0},enableSelection:{type:Boolean,default:!1},labelFormatter:{type:Function,default:e=>e?`${e.label}: ${e.value}`:"No data"},valueFormatter:{type:Function,default:e=>`${e}`}},emits:["show-tooltip","hide-tooltip","selection-changed"],setup(e,{emit:t}){const n=e,i=(0,a.ref)(null),o=(0,a.ref)(null),s=(0,a.ref)(null),r=(0,a.ref)(null),l=(0,a.ref)(void 0),d=(0,a.ref)(null),c=(0,a.ref)(null),u=(0,a.computed)((()=>n.enableTooltips&&null!==r.value)),h=(0,a.computed)((()=>n.data.length>0&&n.data.reduce(((e,t)=>e+t.value),0)>0));function p(){d.value=_(),c.value=v(),g()}function f(){bt.Ys(i.value).selectAll("*").remove(),bt.Ys(o.value).selectAll("*").remove()}(0,a.onMounted)((()=>{p()})),(0,a.watch)((()=>[n.data,n.width,n.height,n.enableTooltips,n.enableSelection,n.labelFormatter,n.valueFormatter]),(()=>{f(),p()}));const m=bt.PKp(bt.Cn1);function _(){const e=n.data,t=n.width-70,o=n.height,a=bt.Ys(i.value).append("svg").attr("width",n.width).attr("height",n.height).append("g").attr("transform","translate(70, 0)"),s=bt.tiA().range([0,t-70]).domain(e.map((function(e){return e.id}))).padding(.1),r=bt.LLu(s).tickSize(0).tickFormat((()=>"")),l=bt.BYU().range([o-5,0]).domain([0,bt.Fp7(e,(e=>e.value))||0]),d=bt.y4O(l).scale(l).tickFormat((function(e){return n.valueFormatter(e)})).ticks(5).tickSizeInner(5).tickSizeOuter(0);a.append("g").attr("class","axis").attr("transform","translate(0,"+(o-5)+")").call(r),a.append("g").attr("class","axis").call(d),a.selectAll(".tick text").style("font-size","14px");return a.selectAll(".bar").data(e).enter().append("rect").classed("bar",!0).attr("x",(e=>s(e.id)||0)).attr("y",(e=>l(e.value)-5)).attr("width",s.bandwidth()).attr("height",(e=>o-l(e.value))).attr("fill",(e=>C(e)))}function v(){var e;const t=n.data,i=10+18*t.length,a=bt.Ys(o.value).append("svg").attr("height",i).append("g").attr("transform","translate(0,10)"),s=a.selectAll("g").data(t).join("g").classed("legend-item",!0).attr("transform",((e,t)=>`translate(0,${10+18*t})`));s.append("circle").attr("cx",5).attr("r",5).attr("fill",(e=>C(e))),s.append("text").attr("x",14).attr("y",4).attr("fill","black").text((e=>n.labelFormatter(e)));let r=0;for(const e of s.nodes()){const t=e.getBoundingClientRect().width;r=Math.max(r,t)}const l=null===(e=a.node())||void 0===e?void 0:e.closest("svg");return l&&l.setAttribute("width",`${r}`),s}function g(){n.enableTooltips&&y(),n.enableSelection&&b()}function y(){var e;null===(e=d.value)||void 0===e||e.on("mouseenter",((e,n)=>{r.value=n,t("show-tooltip",n,e.pageX,e.pageY)})).on("mousemove",(e=>{x(e.pageX-window.scrollX,e.pageY-window.scrollY)})).on("mouseleave",(()=>{r.value=null,t("hide-tooltip")}))}function b(){var e,t,n,i;null===(e=d.value)||void 0===e||e.classed("clickable",!0),null===(t=d.value)||void 0===t||t.on("click",((e,t)=>{e.stopPropagation(),w(t)})),null===(n=c.value)||void 0===n||n.classed("clickable",!0),null===(i=c.value)||void 0===i||i.on("click",((e,t)=>{e.stopPropagation(),w(t)})),bt.Ys("body").on("click",(()=>{l.value&&w(l.value)}))}function w(e){l.value===e?l.value=void 0:l.value=e,k(),t("selection-changed",l.value)}function k(){var e;d.value&&(d.value.transition().duration(200).attr("opacity",(e=>void 0===l.value||e===l.value?1:.5)),null===(e=c.value)||void 0===e||e.selectAll("*").transition().duration(200).attr("opacity",(e=>void 0===l.value||e===l.value?1:.5)))}function C(e){return m(`${e.id}`)}function x(e,t){const n=s.value;if(n){let i=e,o=t;const a=n.offsetWidth,s=n.offsetHeight;i+a+40>window.innerWidth&&(i=window.innerWidth-a-40),o+s+40>window.innerHeight&&(o=window.innerHeight-s-40),n.style.left=`${i}px`,n.style.top=`${o}px`}}return{__sfc:!0,props:n,emit:t,barChart:i,legend:o,chartTooltip:s,tooltipDataPoint:r,selectedDataPoint:l,chartBars:d,legendEntries:c,showTooltip:u,hasData:h,renderBarChart:p,clearChart:f,color:m,drawChart:_,createLegend:v,setupEvents:g,setupTooltipEvents:y,setupSelectionEvents:b,toggleSelection:w,highlightSelected:k,entryColor:C,tooltipMargin:40,setTooltipPosition:x,BCard:vi._}}}),aL=oL;const sL=(0,m.Z)(aL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BCard,{staticClass:"mb-3",scopedSlots:e._u([{key:"header",fn:function(){return[t("h3",{staticClass:"text-center my-1"},[e._t("title",(function(){return[t("b",[e._v(e._s(e.title))])]}))],2)]},proxy:!0}],null,!0)},[e._v(" "),n.hasData?t("div",[t("p",{staticClass:"chart-description"},[e._v(e._s(e.description))]),e._v(" "),t("div",{staticClass:"chart-area"},[t("div",{ref:"barChart",staticClass:"bar-chart"}),e._v(" "),t("div",{ref:"legend",staticClass:"legend"}),e._v(" "),n.selectedDataPoint?t("div",{staticClass:"selection-info"},[e._t("selection",(function(){return[e._v("\n                    Selected: "),t("b",[e._v(e._s(n.selectedDataPoint.label))])]}),{data:n.selectedDataPoint})],2):e._e()])]):t("div",{staticClass:"text-center"},[t("p",{staticClass:"text-muted"},[e._v("No data to display. Populate some data and come back.")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:n.showTooltip,expression:"showTooltip"}],ref:"chartTooltip",staticClass:"chart-tooltip"},[e._t("tooltip",(function(){return[t("div",[e._v(e._s(e.labelFormatter(n.tooltipDataPoint)))])]}),{data:n.tooltipDataPoint})],2)])}),[],!1,null,"386875a2",null).exports;const rL=(0,a.defineComponent)({__name:"RecoverableItemSizeTooltip",props:{data:null,isRecoverable:{type:Boolean},isArchived:{type:Boolean,default:!1}},setup(e){const t=e;u.vI.add(h.N2j);const n=(0,a.computed)((()=>{var e,n;return null!==(n=null===(e=t.data)||void 0===e?void 0:e.label)&&void 0!==n?n:"No data"})),i=(0,a.computed)((()=>{var e,n;return(0,fe.d3)(null!==(n=null===(e=t.data)||void 0===e?void 0:e.value)&&void 0!==n?n:0)}));return{__sfc:!0,props:t,label:n,prettySize:i,FontAwesomeIcon:p.GN}}});const lL=(0,m.Z)(rL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("div",{staticClass:"h-md mx-2"},[e._v(e._s(n.label))]),e._v(" "),t("b",{staticClass:"h-md m-2"},[e._v(e._s(n.prettySize))]),e._v(" "),e.isArchived?t("div",{staticClass:"text-muted mx-2"},[t(n.FontAwesomeIcon,{attrs:{icon:"archive"}}),e._v(" This item is archived")],1):e._e(),e._v(" "),e.isRecoverable?t("div",{staticClass:"text-muted mx-2"},[e._v("Recoverable storage space")]):e._e()])}),[],!1,null,null,null).exports;const dL=(0,a.defineComponent)({__name:"SelectedItemActions",props:{data:null,isRecoverable:{type:Boolean},itemType:null,isArchived:{type:Boolean,default:!1}},emits:["set-current-history","view-item","undelete-item","permanently-delete-item"],setup(e,{emit:t}){const n=e,{currentHistoryId:i}=(0,I.z)();u.vI.add(h.N2j,h.koM,h.sqG,h.$40,h.$aW,h.X7o);const o=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=n.data)||void 0===e?void 0:e.label)&&void 0!==t?t:"No data"})),s=(0,a.computed)((()=>{var e,t;return(0,fe.d3)(null!==(t=null===(e=n.data)||void 0===e?void 0:e.value)&&void 0!==t?t:0)})),r=(0,a.computed)((()=>"history"===n.itemType?"chart-bar":"info-circle")),l=(0,a.computed)((()=>"history"===n.itemType&&!n.isArchived&&n.data.id!==i));return{__sfc:!0,currentHistoryId:i,props:n,label:o,prettySize:s,viewDetailsIcon:r,canSetAsCurrent:l,emit:t,onUndeleteItem:function(){t("undelete-item",n.data.id)},onSetCurrentHistory:function(){t("set-current-history",n.data.id)},onViewItem:function(){t("view-item",n.data.id)},onPermanentlyDeleteItem:function(){t("permanently-delete-item",n.data.id)},FontAwesomeIcon:p.GN,BButton:jn.T,localize:Ee.ZP}}}),cL=dL;const uL=(0,m.Z)(cL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"selected-item-info"},[t("div",{staticClass:"h-md mx-2"},[t("b",[e._v(e._s(n.label))])]),e._v(" "),t("div",{staticClass:"text-muted mx-2"},[e.isArchived?t("span",[t(n.FontAwesomeIcon,{attrs:{icon:"archive"}}),e._v(" This "+e._s(e.itemType)+" is archived.")],1):e._e(),t("br"),e._v("\n        Total storage space taken: "),t("b",[e._v(e._s(n.prettySize))]),e._v(".\n        "),e.isRecoverable?t("span",[e._v("\n            This "+e._s(e.itemType)+" was deleted. You can "),t("b",[e._v("undelete")]),e._v(" it or "),t("b",[e._v("permanently delete")]),e._v(" it to free up\n            its storage space.\n        ")]):e._e()]),e._v(" "),t("div",{staticClass:"my-2"},[n.canSetAsCurrent?t(n.BButton,{staticClass:"mx-2",attrs:{variant:"outline-primary",size:"sm",title:n.localize("Set this history as current")},on:{click:n.onSetCurrentHistory}},[t(n.FontAwesomeIcon,{attrs:{icon:"location-arrow"}})],1):e._e(),e._v(" "),t(n.BButton,{staticClass:"mx-2",attrs:{variant:"outline-primary",size:"sm",title:n.localize(`Go to the details of this ${e.itemType}`)},on:{click:n.onViewItem}},[t(n.FontAwesomeIcon,{attrs:{icon:n.viewDetailsIcon}})],1),e._v(" "),e.isRecoverable?t(n.BButton,{staticClass:"mx-2",attrs:{variant:"outline-primary",size:"sm",title:n.localize(`Undelete this ${e.itemType}`)},on:{click:n.onUndeleteItem}},[t(n.FontAwesomeIcon,{attrs:{icon:"undo"}})],1):e._e(),e._v(" "),t(n.BButton,{staticClass:"mx-2",attrs:{variant:"outline-danger",size:"sm",title:n.localize(`Permanently delete this ${e.itemType}`)},on:{click:n.onPermanentlyDeleteItem}},[t(n.FontAwesomeIcon,{attrs:{icon:"trash"}})],1)],1)])}),[],!1,null,null,null).exports;var hL=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const pL=(0,a.defineComponent)({__name:"HistoriesStorageOverview",setup(e){const t=(0,I.z)(),n=(0,Nn.tv)(),{success:i,error:o}=(0,oo.pm)(),{confirm:s}=Ci(),r=new Map,l=(0,a.ref)(null),d=(0,a.ref)(null),c=(0,a.ref)(!0),u=[10,20,50],h=(0,a.ref)(u[0]);function p(){const e=Array.from(r.values());l.value=f(e),d.value=m(e)}function f(e){return e.sort(((e,t)=>t.size-e.size)).slice(0,h.value).map((e=>({id:e.id,label:e.name,value:e.size})))}function m(e){return[{id:"active",label:"Active",value:e.filter((e=>!e.deleted&&!e.archived)).reduce(((e,t)=>e+t.size),0)},{id:"archived",label:"Archived",value:e.filter((e=>e.archived)).reduce(((e,t)=>e+t.size),0)},{id:"deleted",label:"Deleted",value:e.filter((e=>e.deleted)).reduce(((e,t)=>e+t.size),0)}]}return(0,a.onMounted)((()=>hL(this,void 0,void 0,(function*(){c.value=!0;(yield function(){return nL(this,void 0,void 0,(function*(){const e=yield XT({keys:iL,q:["deleted","purged"],qv:["None","false"]}),t=yield QT({keys:iL,q:["purged"],qv:["false"]});return[...e.data,...t.data]}))}()).forEach((e=>r.set(e.id,e))),p(),c.value=!1})))),{__sfc:!0,historyStore:t,router:n,successToast:i,errorToast:o,confirm:s,historiesSizeSummaryMap:r,topTenHistoriesBySizeData:l,activeVsArchivedVsDeletedTotalSizeData:d,isLoading:c,numberOfHistoriesToDisplayOptions:u,numberOfHistoriesToDisplay:h,buildGraphsData:p,buildTopHistoriesBySizeData:f,buildActiveVsArchivedVsDeletedTotalSizeData:m,isRecoverableDataPoint:function(e){if(e){const t=r.get(e.id||"");return(null==t?void 0:t.deleted)||"deleted"===e.id}return!1},isArchivedDataPoint:function(e){if(e){const t=r.get(e.id);return(null==t?void 0:t.archived)||!1}return!1},onSetCurrentHistory:function(e){return hL(this,void 0,void 0,(function*(){yield t.setCurrentHistory(e),n.push({path:"/"})}))},onViewHistory:function(e){n.push({name:"HistoryOverview",params:{historyId:e}})},onUndeleteHistory:function(e){return hL(this,void 0,void 0,(function*(){try{const t=yield function(e){return nL(this,void 0,void 0,(function*(){return(yield eL({history_id:e})).data}))}(e),n=r.get(e);n&&!t.deleted&&(n.deleted=t.deleted,r.set(e,n),i((0,Ee.ZP)("History undeleted successfully.")),p())}catch(e){o(`${e}`,(0,Ee.ZP)("An error occurred while undeleting the history."))}}))},onPermanentlyDeleteHistory:function(e){return hL(this,void 0,void 0,(function*(){if(yield s((0,Ee.ZP)("Are you sure you want to permanently delete this history? This action cannot be undone."),{title:(0,Ee.ZP)("Permanently delete history?"),okVariant:"danger",okTitle:(0,Ee.ZP)("Permanently delete"),cancelTitle:(0,Ee.ZP)("Cancel")}))try{const t=yield function(e){return nL(this,void 0,void 0,(function*(){return(yield tL({history_id:e,purge:!0})).data}))}(e);r.get(e)&&t.purged&&(r.delete(e),i((0,Ee.ZP)("History permanently deleted successfully.")),p())}catch(e){o(`${e}`,(0,Ee.ZP)("An error occurred while permanently deleting the history."))}}))},localize:Ee.ZP,bytesLabelFormatter:JT,bytesValueFormatter:KT,BarChart:sL,RecoverableItemSizeTooltip:lL,SelectedItemActions:uL,Heading:Dt,LoadingSpan:z.Z}}});var fL=(0,m.Z)(pL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"mx-3"},[t("router-link",{attrs:{to:{name:"StorageDashboard"}}},[e._v(e._s(n.localize("Back to Dashboard")))]),e._v(" "),t(n.Heading,{staticClass:"my-3",attrs:{h1:"",bold:""}},[e._v(" Histories Storage Overview ")]),e._v(" "),e._m(0),e._v(" "),t("p",{staticClass:"text-justify"},[e._v("\n        Note: these graphs include "),t("b",[e._v("deleted histories")]),e._v(". Remember that, even if you delete histories, they still\n        take up storage space. However, you can free up the storage space by permanently deleting them from the\n        "),t("i",[e._v("Discarded Items")]),e._v(" section of the\n        "),t("router-link",{attrs:{to:{name:"StorageManager"}}},[t("b",[e._v("Storage Manager")])]),e._v(" page or by selecting them\n        individually in the graph and clicking the "),t("b",[e._v("Permanently Delete")]),e._v(" button.\n    ")],1),e._v(" "),n.isLoading?t("div",{staticClass:"text-center"},[t(n.LoadingSpan,{staticClass:"mt-5",attrs:{message:n.localize("Loading your storage data. This may take a while...")}})],1):t("div",[n.topTenHistoriesBySizeData?t(n.BarChart,{attrs:{description:n.localize(`These are the ${n.numberOfHistoriesToDisplay} histories that take the most space on your storage. Click on a bar to see more information about the history.`),data:n.topTenHistoriesBySizeData,"enable-selection":!0,"label-formatter":n.bytesLabelFormatter,"value-formatter":n.bytesValueFormatter},scopedSlots:e._u([{key:"title",fn:function(){return[t("b",[e._v(e._s(n.localize(`Top ${n.numberOfHistoriesToDisplay} Histories by Size`)))]),e._v(" "),t("b-form-select",{staticClass:"float-right w-auto",attrs:{options:n.numberOfHistoriesToDisplayOptions,disabled:n.isLoading,title:"Number of histories to show",size:"sm"},on:{change:function(e){return n.buildGraphsData()}},model:{value:n.numberOfHistoriesToDisplay,callback:function(e){n.numberOfHistoriesToDisplay=e},expression:"numberOfHistoriesToDisplay"}})]},proxy:!0},{key:"tooltip",fn:function({data:i}){return[i?t(n.RecoverableItemSizeTooltip,{attrs:{data:i,"is-recoverable":n.isRecoverableDataPoint(i),"is-archived":n.isArchivedDataPoint(i)}}):e._e()]}},{key:"selection",fn:function({data:e}){return[t(n.SelectedItemActions,{attrs:{data:e,"item-type":"history","is-recoverable":n.isRecoverableDataPoint(e),"is-archived":n.isArchivedDataPoint(e)},on:{"set-current-history":n.onSetCurrentHistory,"view-item":n.onViewHistory,"undelete-item":n.onUndeleteHistory,"permanently-delete-item":n.onPermanentlyDeleteHistory}})]}}],null,!1,737587239)}):e._e(),e._v(" "),n.activeVsArchivedVsDeletedTotalSizeData?t(n.BarChart,{attrs:{title:n.localize("Active vs Archived vs Deleted Total Size"),description:n.localize("This graph shows the total size taken by your histories, split between active, archived and deleted histories."),data:n.activeVsArchivedVsDeletedTotalSizeData,"label-formatter":n.bytesLabelFormatter,"value-formatter":n.bytesValueFormatter},scopedSlots:e._u([{key:"tooltip",fn:function({data:i}){return[i?t(n.RecoverableItemSizeTooltip,{attrs:{data:i,"is-recoverable":n.isRecoverableDataPoint(i)}}):e._e()]}}],null,!1,2236584359)}):e._e()],1)],1)}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"text-justify"},[e._v("\n        Here you can find various graphs displaying the storage size taken by "),t("b",[e._v("all your histories")]),e._v(".\n    ")])}],!1,null,null,null);const mL=fL.exports;var _L=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const vL=(0,a.defineComponent)({__name:"HistoryStorageOverview",props:{historyId:{type:String,required:!0}},setup(e){const t=e,n=(0,Nn.tv)(),{success:i,error:o}=(0,oo.pm)(),{confirm:s}=Ci(),{getHistoryNameById:r}=(0,I.z)(),l=new Map,d=(0,a.ref)(null),c=(0,a.ref)(null),u=(0,a.ref)(!0),h=[10,20,50],p=(0,a.ref)(h[0]);function f(){const e=Array.from(l.values());d.value=m(e),c.value=_(e)}function m(e){return e.sort(((e,t)=>t.size-e.size)).slice(0,p.value).map((e=>({id:e.id,label:e.name,value:e.size})))}function _(e){return[{id:"active",label:"Active",value:e.filter((e=>!e.deleted)).reduce(((e,t)=>e+t.size),0)},{id:"deleted",label:"Deleted",value:e.filter((e=>e.deleted)).reduce(((e,t)=>e+t.size),0)}]}return(0,a.onMounted)((()=>_L(this,void 0,void 0,(function*(){u.value=!0;const e=Math.max(...h),n=yield function(e,t=5e3){return nL(this,void 0,void 0,(function*(){return(yield(0,K.Ob)({history_id:e,keys:iL,limit:t,order:"size-dsc",q:["purged","history_content_type"],qv:["false","dataset"]})).data}))}(t.historyId,e);n.forEach((e=>l.set(e.id,e))),f(),u.value=!1})))),{__sfc:!0,router:n,successToast:i,errorToast:o,confirm:s,getHistoryNameById:r,props:t,datasetsSizeSummaryMap:l,topTenDatasetsBySizeData:d,activeVsDeletedTotalSizeData:c,isLoading:u,numberOfDatasetsToDisplayOptions:h,numberOfDatasetsToDisplay:p,buildGraphsData:f,buildTopTenDatasetsBySizeData:m,buildActiveVsDeletedTotalSizeData:_,isRecoverableDataPoint:function(e){if(e){const t=l.get(e.id||"");return(null==t?void 0:t.deleted)||"deleted"===e.id}return!1},onViewDataset:function(e){return _L(this,void 0,void 0,(function*(){n.push({name:"DatasetDetails",params:{historyId:t.historyId,datasetId:e}})}))},onUndeleteDataset:function(e){return _L(this,void 0,void 0,(function*(){try{const n=yield function(e,t){return nL(this,void 0,void 0,(function*(){return yield(0,K.o1)(e,t)}))}(t.historyId,e),o=l.get(e);o&&!n.deleted&&(o.deleted=n.deleted,l.set(e,o),i((0,Ee.ZP)("Dataset undeleted successfully.")),f())}catch(e){o(`${e}`,(0,Ee.ZP)("An error occurred while undeleting the dataset."))}}))},onPermanentlyDeleteDataset:function(e){return _L(this,void 0,void 0,(function*(){if(yield s((0,Ee.ZP)("Are you sure you want to permanently delete this dataset? This action cannot be undone."),{title:(0,Ee.ZP)("Permanently delete dataset?"),okVariant:"danger",okTitle:(0,Ee.ZP)("Permanently delete"),cancelTitle:(0,Ee.ZP)("Cancel")}))try{const n=yield function(e,t){return nL(this,void 0,void 0,(function*(){return yield(0,K.so)(e,t)}))}(t.historyId,e);l.get(e)&&n&&(l.delete(e),i((0,Ee.ZP)("Dataset permanently deleted successfully.")),f())}catch(e){o(`${e}`,(0,Ee.ZP)("An error occurred while permanently deleting the dataset."))}}))},localize:Ee.ZP,bytesLabelFormatter:JT,bytesValueFormatter:KT,BarChart:sL,RecoverableItemSizeTooltip:lL,SelectedItemActions:uL,Heading:Dt,LoadingSpan:z.Z}}});var gL=(0,m.Z)(vL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"mx-3 history-storage-overview"},[t("router-link",{attrs:{to:{name:"StorageDashboard"}}},[e._v(e._s(n.localize("Back to Dashboard")))]),e._v(" "),t(n.Heading,{staticClass:"my-3",attrs:{h1:"",bold:""}},[e._v(" History Storage Overview ")]),e._v(" "),t("p",{staticClass:"text-justify"},[e._v("\n        Here you will find some Graphs displaying the storage taken by datasets in your history:\n        "),t("b",[e._v(e._s(n.getHistoryNameById(n.props.historyId)))]),e._v(". You can use these graphs to identify the datasets that take the most space in your history. You can also\n        go to the\n        "),t("router-link",{attrs:{to:{name:"HistoriesOverview"}}},[t("b",[e._v("Histories Storage Overview")])]),e._v(" page to see\n        the storage taken by "),t("b",[e._v("all your histories")]),e._v(".\n    ")],1),e._v(" "),t("p",{staticClass:"text-justify"},[e._v("\n        Note: these graphs include "),t("b",[e._v("deleted datasets")]),e._v(". Remember that, even if you delete datasets, they still\n        take up storage space. However, you can free up the storage space by permanently deleting them from the\n        "),t("i",[e._v("Discarded Items")]),e._v(" section of the\n        "),t("router-link",{attrs:{to:{name:"StorageManager"}}},[t("b",[e._v("Storage Manager")])]),e._v(" page or by selecting them\n        individually in the graph and clicking the "),t("b",[e._v("Permanently Delete")]),e._v(" button.\n    ")],1),e._v(" "),n.isLoading?t("div",{staticClass:"text-center"},[t(n.LoadingSpan,{staticClass:"mt-5",attrs:{message:n.localize("Loading your storage data. This may take a while...")}})],1):t("div",[n.topTenDatasetsBySizeData?t(n.BarChart,{attrs:{description:n.localize("These are the 10 datasets that take the most space in this history. Click on a bar to see more information about the dataset."),"enable-selection":!0,data:n.topTenDatasetsBySizeData,"label-formatter":n.bytesLabelFormatter,"value-formatter":n.bytesValueFormatter},scopedSlots:e._u([{key:"title",fn:function(){return[t("b",[e._v(e._s(n.localize(`Top ${n.numberOfDatasetsToDisplay} Datasets by Size`)))]),e._v(" "),t("b-form-select",{staticClass:"float-right w-auto",attrs:{options:n.numberOfDatasetsToDisplayOptions,disabled:n.isLoading,title:"Number of histories to show",size:"sm"},on:{change:function(e){return n.buildGraphsData()}},model:{value:n.numberOfDatasetsToDisplay,callback:function(e){n.numberOfDatasetsToDisplay=e},expression:"numberOfDatasetsToDisplay"}})]},proxy:!0},{key:"tooltip",fn:function({data:i}){return[i?t(n.RecoverableItemSizeTooltip,{attrs:{data:i,"is-recoverable":n.isRecoverableDataPoint(i)}}):e._e()]}},{key:"selection",fn:function({data:e}){return[t(n.SelectedItemActions,{attrs:{data:e,"item-type":"dataset","is-recoverable":n.isRecoverableDataPoint(e)},on:{"view-item":n.onViewDataset,"undelete-item":n.onUndeleteDataset,"permanently-delete-item":n.onPermanentlyDeleteDataset}})]}}],null,!1,931950128)}):e._e(),e._v(" "),n.activeVsDeletedTotalSizeData?t(n.BarChart,{attrs:{title:n.localize("Active vs Deleted Total Size"),description:n.localize("This graph shows the total size of your datasets in this history, split between active and deleted datasets."),data:n.activeVsDeletedTotalSizeData,"label-formatter":n.bytesLabelFormatter,"value-formatter":n.bytesValueFormatter},scopedSlots:e._u([{key:"tooltip",fn:function({data:i}){return[i?t(n.RecoverableItemSizeTooltip,{attrs:{data:i,"is-recoverable":n.isRecoverableDataPoint(i)}}):e._e()]}}],null,!1,2236584359)}):e._e()],1)],1)}),[],!1,null,null,null);const yL=gL.exports,bL=[{path:"/storage",component:nT,meta:{requiresRegisteredUser:!0},children:[{path:"",name:"StorageDashboard",component:GT},{path:"management",name:"StorageManager",component:NT,props:!0},{path:"histories",name:"HistoriesOverview",component:mL},{path:"history/:historyId",name:"HistoryOverview",component:yL,props:!0},{path:"*",redirect:{name:"StorageDashboard"}}]}];var wL=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const kL=(0,a.defineComponent)({__name:"AvailableDatatypes",setup(e){const t=(0,a.ref)(""),i=["extension"],{datatypes:o}=function(){const e=(0,a.ref)(!0),t=(0,a.ref)([]);return function(){wL(this,void 0,void 0,(function*(){try{const e=(0,mh.kI)({extension_only:!1}),n=(0,mh.qF)({}),i=(0,mh.ZR)({}),[o,a,s]=yield Promise.all([e,n,i]);t.value=o.data.map((e=>{var t,n;const i=null!==(t=a.data[e.extension])&&void 0!==t?t:null,o=null!==(n=s.data[e.extension])&&void 0!==n?n:null;return{extension:e.extension,description:e.description,descriptionUrl:e.description_url,edamFormat:null==i?void 0:i.prefix_IRI,edamFormatLabel:null==i?void 0:i.label,edamFormatDefinition:null==i?void 0:i.definition,edamData:null==o?void 0:o.prefix_IRI,edamDataLabel:null==o?void 0:o.label,edamDataDefinition:null==o?void 0:o.definition}}))}catch(e){console.error("unable to fetch available datatypes\n",e)}finally{e.value=!1}}))}(),{datatypes:t,datatypesLoading:e}}(),s=function(e,t,i,o=!1){const s=new Worker(new URL(n.p+n.u(985),n.b)),r=(0,a.ref)([]);r.value=(0,Pn.Tn)(e);const l=e=>{s.postMessage(e)};return(0,a.watch)((()=>(0,Pn.Tn)(e)),(e=>{l({type:"setArray",array:e})}),{immediate:!0}),(0,a.watch)((()=>(0,Pn.Tn)(t)),(e=>{l({type:"setFilter",filter:e})}),{immediate:!0}),(0,a.watch)((()=>(0,Pn.Tn)(i)),(e=>{l({type:"setFields",fields:e})}),{immediate:!0}),s.onmessage=e=>{const t=e.data;"result"===t.type&&(r.value=t.filtered)},(0,a.onScopeDispose)((()=>{s.terminate()})),r}(o,t,i);return{__sfc:!0,filter:t,filterFields:i,datatypes:o,filteredDatatypes:s,fields:[{key:"extension",sortable:!0},{key:"edamFormatLabel",label:"EDAM Format",sortable:!0},{key:"edamDataLabel",label:"EDAM Data",sortable:!0}],edamLink:e=>`https://edamontology.github.io/edam-browser/#${e}`,DelayedInput:Z}}}),CL=kL;var xL=(0,m.Z)(CL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("h1",[e._v("Datatypes")]),e._v(" "),t("p",[e._v('\n        All Datatypes supported by this Galaxy instance. Hover over an item for more information. These extensions\n        can be filtered by in the History, by expanding "search datasets".\n    ')]),e._v(" "),t(n.DelayedInput,{staticClass:"mb-3",attrs:{placeholder:"filter extensions",delay:200},on:{change:e=>n.filter=e}}),e._v(" "),t("b-table",{attrs:{striped:"",small:"","sort-icon-left":"","sort-by":"extension",items:n.filteredDatatypes,fields:n.fields},scopedSlots:e._u([{key:"cell(extension)",fn:function(n){return[n.item.descriptionUrl?t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{target:"_blank",title:n.item.description,href:n.item.descriptionUrl}},[e._v("\n                "+e._s(n.item.extension)+"\n            ")]):t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:n.item.description}},[e._v("\n                "+e._s(n.item.extension)+"\n            ")])]}},{key:"cell(edamFormatLabel)",fn:function(i){return[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{target:"_blank",href:n.edamLink(i.item.edamFormat),title:i.item.edamFormatDefinition}},[e._v("\n                "+e._s(i.item.edamFormatLabel)+"\n            ")])]}},{key:"cell(edamDataLabel)",fn:function(i){return[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{target:"_blank",href:n.edamLink(i.item.edamData),title:i.item.edamDataDefinition}},[e._v("\n                "+e._s(i.item.edamDataLabel)+"\n            ")])]}}])})],1)}),[],!1,null,"92c92f76",null);const SL=xL.exports;const ML=(0,a.defineComponent)({__name:"AboutGalaxy",setup(e){const{config:t,isConfigLoaded:n}=(0,c.Z)(),i=`${(0,g.getAppRoot)()}api/docs`,o=(0,a.computed)((()=>{const e=t.value;return"dev"===t.value.version_minor.slice(0,3)?"https://docs.galaxyproject.org/en/latest/releases/index.html":`${e.release_doc_base_url}${e.version_major}/releases/${e.version_major}_announce_user.html`}));return{__sfc:!0,config:t,isConfigLoaded:n,clientBuildDate:"2024-02-14T22:27:39.913Z",apiDocsLink:i,galaxyLicense:"MIT",versionUserDocumentationUrl:o,Heading:Dt,ExternalLink:ao.Z,License:ku,UtcDate:J.Z}}}),TL=ML;const LL=(0,m.Z)(TL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.isConfigLoaded?t("div",{staticClass:"about-galaxy"},[t(n.Heading,{attrs:{h1:"",icon:["gxd","galaxyLogo"],size:"xl"}},[e._v("About This Galaxy")]),e._v(" "),t("div",[t(n.Heading,{attrs:{h2:"",separator:"",size:"md"}},[e._v("Galaxy Version Information")]),e._v(" "),t("p",[e._v("\n            The Galaxy Server is running version\n            "),t(n.ExternalLink,{attrs:{href:n.versionUserDocumentationUrl}},[t("strong",[e._v(" "+e._s(n.config.version_major)+"."+e._s(n.config.version_minor))])]),e._v(", and the web client was built on "),t(n.UtcDate,{attrs:{date:n.clientBuildDate,mode:"pretty"}}),e._v(".\n        ")],1),e._v(" "),n.config.version_extra?[t("p",[e._v("The server also provides the following extra version information")]),e._v(" "),t("ul",e._l(n.config.version_extra,(function(n,i,o){return t("li",{key:o},[t("strong",[e._v(e._s(i))]),e._v("\n                    : "+e._s(n)+"\n                ")])})),0)]:e._e()],2),e._v(" "),t("div",[t(n.Heading,{attrs:{h2:"",separator:"",size:"md"}},[e._v("Galaxy API Documentation")]),e._v(" "),t("p",[e._v("\n            The Galaxy API is available, and explorable, at\n            "),t(n.ExternalLink,{attrs:{href:n.apiDocsLink}},[e._v("\n                "+e._s(n.apiDocsLink)+"\n            ")])],1)],1),e._v(" "),t("div",[t(n.Heading,{attrs:{h2:"",separator:"",size:"md"}},[e._v("License Information")]),e._v(" "),t("p",[e._v("The Galaxy Software is licensed under "),t(n.License,{attrs:{"license-id":n.galaxyLicense}})],1)],1),e._v(" "),n.config.terms_url?t("div",[t(n.Heading,{attrs:{h2:"",separator:"",size:"md"}},[e._v("Terms and Conditions")]),e._v(" "),t("p",[e._v("\n            This Galaxy Server has specified Terms and Conditions that apply to use of the service.\n            "),t(n.ExternalLink,{attrs:{href:n.config.terms_url}},[e._v("Review them here.")])],1)],1):e._e()],1):e._e()}),[],!1,null,"1ab5a328",null).exports;var DL=n(53063),EL=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const OL=(0,a.defineComponent)({__name:"HistoryArchive",setup(e){const t=(0,Nn.tv)(),n=(0,I.z)(),i=(0,oo.pm)(),{confirm:o}=Ci(),s=(0,a.ref)([]),r=(0,a.ref)(!0),l=(0,a.ref)(10),d=(0,a.ref)(1),c=(0,a.ref)(0),f=(0,a.ref)("update_time"),m=(0,a.ref)(!0),_=(0,a.ref)(""),v=(0,a.computed)((()=>0===c.value)),g=(0,a.computed)((()=>""!==_.value)),y=(0,a.computed)((()=>g.value&&v.value)),b=(0,a.computed)((()=>c.value>l.value&&!r.value&&!v.value));function w(){return EL(this,void 0,void 0,(function*(){r.value=!0;const e=yield(0,DL.OJ)({query:_.value,currentPage:d.value,pageSize:l.value,sortBy:f.value,sortDesc:m.value});c.value=e.totalMatches,s.value=e.histories,r.value=!1}))}return u.vI.add(h.X7o,h.kZ_,h.Mdf),(0,a.onMounted)((()=>EL(this,void 0,void 0,(function*(){w()})))),(0,a.watch)([_,d,l,f,m],(()=>{w()})),{__sfc:!0,router:t,historyStore:n,toast:i,confirm:o,archivedHistories:s,isLoading:r,perPage:l,currentPage:d,totalRows:c,sortBy:f,sortDesc:m,searchText:_,noResults:v,hasFilters:g,noHistoriesMatchingFilter:y,showPagination:b,updateSearchQuery:function(e){return EL(this,void 0,void 0,(function*(){_.value=e}))},loadArchivedHistories:w,canImportCopy:function(e){var t;return void 0!==(null===(t=e.export_record_data)||void 0===t?void 0:t.target_uri)},onViewHistoryInCenterPanel:function(e){t.push(`/histories/view?id=${e.id}`)},onRestoreHistory:function(e){return EL(this,void 0,void 0,(function*(){const t=(0,Ee.ZP)(`Unarchive '${e.name}'?`),a=e.purged&&e.export_record_data?(0,Ee.ZP)("Are you sure you want to restore this (purged) history? Please note that this will not restore the datasets associated with this history. If you want to fully recover it, you can import a copy from the export record instead."):(0,Ee.ZP)("Are you sure you want to restore this history? This will move the history back to your active histories.");if(yield o(a,{title:t}))try{const t=!0;return yield n.unarchiveHistoryById(e.id,t),i.success((0,Ee.ZP)(`History '${e.name}' has been restored.`),(0,Ee.ZP)("History Restored")),w()}catch(t){i.error((0,Ee.ZP)(`Failed to restore history '${e.name}' with reason: ${t}`),(0,Ee.ZP)("History Restore Failed"))}}))},onImportCopy:function(e){return EL(this,void 0,void 0,(function*(){if(yield o((0,Ee.ZP)("Are you sure you want to import a new copy of this history? This will create a new history with the same datasets contained in the associated export snapshot."),{title:(0,Ee.ZP)(`Import Copy of '${e.name}'?`)}))try{yield(0,DL.MW)(e),i.success((0,Ee.ZP)(`The History '${e.name}' it's being imported. This process may take a while. Check your histories list after a few minutes.`),(0,Ee.ZP)("Importing History in background..."))}catch(t){i.error((0,Ee.ZP)(`Failed to import history '${e.name}' with reason: ${t}`),(0,Ee.ZP)("History Import Failed"))}}))},FontAwesomeIcon:p.GN,BAlert:Rn.F,BBadge:Kl.k,BButton:jn.T,BButtonGroup:_o.a,BListGroup:Xl.N,BListGroupItem:Ql.f,BPagination:Hn.c,localize:Ee.ZP,DelayedInput:Z,Heading:Dt,LoadingSpan:z.Z,StatelessTags:G.Z,UtcDate:J.Z}}});const AL=(0,m.Z)(OL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("section",{staticClass:"d-flex flex-column",attrs:{id:"archived-histories"}},[t("h1",[e._v("Archived Histories")]),e._v(" "),t("div",[t(n.DelayedInput,{staticClass:"m-1 mb-3",attrs:{query:n.searchText,placeholder:"Search by name"},on:{change:n.updateSearchQuery}}),e._v(" "),n.isLoading?t(n.BAlert,{attrs:{variant:"info",show:""}},[n.isLoading?t(n.LoadingSpan,{attrs:{message:"Loading archived histories"}}):e._e()],1):n.noHistoriesMatchingFilter?t(n.BAlert,{attrs:{variant:"info",show:""}},[e._v("\n            There are no archived histories matching your current filter: "),t("b",[e._v(e._s(n.searchText))])]):n.noResults?t(n.BAlert,{attrs:{variant:"info",show:""}},[e._v("\n            You do not have any archived histories. You can select the 'Archive History' option from the history\n            menu to archive a history.\n        ")]):t(n.BListGroup,e._l(n.archivedHistories,(function(i){return t(n.BListGroupItem,{key:i.id,attrs:{"data-pk":i.id}},[t("div",{staticClass:"d-flex justify-content-between align-items-center"},[t(n.Heading,{attrs:{h3:"",inline:"",bold:"",size:"sm"}},[e._v("\n                        "+e._s(i.name)+"\n                    ")]),e._v(" "),t("div",{staticClass:"d-flex align-items-center flex-gapx-1 badges"},[i.published?t(n.BBadge,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{pill:"",title:n.localize("This history is public.")}},[e._v("\n                            "+e._s(n.localize("Published"))+"\n                        ")]):e._e(),e._v(" "),i.purged?e._e():t(n.BBadge,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{pill:"",title:n.localize("Amount of items in history")}},[e._v("\n                            "+e._s(i.count)+" "+e._s(n.localize("items"))+"\n                        ")]),e._v(" "),i.export_record_data?t(n.BBadge,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{pill:"",title:n.localize("This history has an associated export record containing a snapshot of the history that can be used to import a copy of the history.")}},[e._v("\n                            "+e._s(n.localize("Snapshot available"))+"\n                        ")]):e._e(),e._v(" "),t(n.BBadge,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{pill:"",title:n.localize("Last edited/archived")}},[t(n.UtcDate,{attrs:{date:i.update_time,mode:"elapsed"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"d-flex justify-content-start align-items-center mt-1"},[t(n.BButtonGroup,{staticClass:"actions"},[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"p-0 px-1",attrs:{title:n.localize("View this history"),variant:"link"},on:{click:function(e){return e.stopPropagation(),(()=>n.onViewHistoryInCenterPanel(i)).apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-eye",size:"lg"}}),e._v("\n                            View\n                        ")],1),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"p-0 px-1",attrs:{title:n.localize("Unarchive this history and move it back to your active histories"),variant:"link"},on:{click:function(e){return e.stopPropagation(),(()=>n.onRestoreHistory(i)).apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-undo",size:"lg"}}),e._v("\n                            Unarchive\n                        ")],1),e._v(" "),n.canImportCopy(i)?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"p-0 px-1",attrs:{title:n.localize("Import a new copy of this history from the associated export record"),variant:"link"},on:{click:function(e){return e.stopPropagation(),(()=>n.onImportCopy(i)).apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-copy",size:"lg"}}),e._v("\n                            Import Copy\n                        ")],1):e._e()],1)],1),e._v(" "),i.annotation?t("p",{staticClass:"my-1"},[e._v(e._s(i.annotation))]):e._e(),e._v(" "),t(n.StatelessTags,{staticClass:"my-1",attrs:{value:i.tags,disabled:!0,"max-visible-tags":10}})],1)})),1),e._v(" "),n.showPagination?t(n.BPagination,{staticClass:"mt-3",attrs:{"total-rows":n.totalRows,"per-page":n.perPage},model:{value:n.currentPage,callback:function(e){n.currentPage=e},expression:"currentPage"}}):e._e()],1)])}),[],!1,null,"99560384",null).exports;const IL=(0,a.defineComponent)({__name:"IncludedBadge",props:{itemName:null,included:{type:Boolean}},setup(e){const t=e;u.vI.add(h.LEp,h.NBC);const n=(0,a.computed)((()=>t.included?"primary":"secondary"));return{__sfc:!0,props:t,variant:n,FontAwesomeIcon:p.GN,BBadge:Kl.k}}});const PL=(0,m.Z)(IL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BBadge,{attrs:{variant:n.variant}},[n.props.included?t(n.FontAwesomeIcon,{attrs:{icon:"check"}}):t(n.FontAwesomeIcon,{attrs:{icon:"times"}}),e._v("\n    "+e._s(n.props.itemName)+"\n")],1)}),[],!1,null,null,null).exports,RL=(0,a.defineComponent)({__name:"ExportRecordCard",props:{exportRecord:null},setup:e=>({__sfc:!0,props:e,BCard:vi._,BCardText:xT.j,IncludedBadge:PL})});const jL=(0,m.Z)(RL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BCard,{attrs:{id:"export-record-ready"}},[t(n.BCardText,[t("b",[e._v("Exported "+e._s(n.props.exportRecord.elapsedTime))]),e._v(" on "+e._s(n.props.exportRecord.date)+"\n    ")]),e._v(" "),n.props.exportRecord.exportParams?t(n.BCardText,[t("b",[e._v("Contains datasets:")]),e._v(" "),t(n.IncludedBadge,{attrs:{"item-name":"active",included:n.props.exportRecord.exportParams.includeFiles}}),e._v(" "),t(n.IncludedBadge,{attrs:{"item-name":"hidden",included:n.props.exportRecord.exportParams.includeHidden}}),e._v(" "),t(n.IncludedBadge,{attrs:{"item-name":"deleted",included:n.props.exportRecord.exportParams.includeDeleted}})],1):e._e(),e._v(" "),t(n.BCardText,[t("b",[e._v("Stored in:")]),e._v(" "+e._s(n.props.exportRecord.importUri)+" ")])],1)}),[],!1,null,null,null).exports;var YL=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const HL=(0,a.defineComponent)({__name:"HistoryArchiveExportSelector",props:{history:null},emits:["onArchive"],setup(e,{emit:t}){const n=e,{isRunning:i,waitForTask:o,requestHasFailed:s,hasFailed:r}=(0,Pi.n)(),l=(0,a.ref)([]),d=(0,a.ref)(!0),c=(0,a.ref)(!1),u=(0,a.ref)(!1),h=(0,a.ref)(!1),p=(0,a.ref)(null),f=(0,a.computed)((()=>n.history.name)),m=(0,a.computed)((()=>l.value.find((e=>e.isPermanent&&(e.isUpToDate||e.isPreparing))))),_=(0,a.computed)((()=>!d.value&&!i.value&&!m.value)),v=(0,a.computed)((()=>!d.value&&!i.value&&m.value&&h.value)),g=(0,a.computed)((()=>m.value&&m.value.isReady&&m.value.canReimport));function y(){var e;return YL(this,void 0,void 0,(function*(){p.value=null;try{if(l.value=yield Ui(n.history.id),m.value){(null===(e=m.value)||void 0===e?void 0:e.isPreparing)&&!i.value&&!s.value&&!r.value&&o(m.value.taskUUID),s.value&&(p.value="The request to get the export progress failed. Please check back later."),r.value&&(p.value="The history export request failed. Please try again later.")}}catch(e){p.value="The request to get your history exports records failed. Please check back later."}}))}function b(e,t){return YL(this,void 0,void 0,(function*(){c.value=!0,u.value=!1;try{yield Vi(n.history.id,e,t,Li)}catch(e){p.value="The history export request failed. Please try again later."}y()}))}return(0,a.onMounted)((()=>YL(this,void 0,void 0,(function*(){d.value=!0,yield y(),d.value=!1})))),(0,a.watch)(i,((e,t)=>{c.value=e;t&&!e&&y()})),{__sfc:!0,isExportTaskRunning:i,waitForTask:o,taskMonitorRequestFailed:s,taskHasFailed:r,props:n,emit:t,existingExports:l,isLoading:d,isExportingRecord:c,isExportDialogOpen:u,isDeleteContentsConfirmed:h,exportErrorMessage:p,historyName:f,mostUpToDateExport:m,canCreateExportRecord:_,canArchiveHistory:v,mostUpToDateExportIsReady:g,updateExports:y,onCreateExportRecord:function(){return YL(this,void 0,void 0,(function*(){u.value=!0}))},doExportToFileSourceWithPrefix:function(e,t){return YL(this,void 0,void 0,(function*(){const i=n.history.update_time.replace(/:/g,"-");b(e,`${i}_${t}`)}))},doExportToFileSource:b,onArchiveHistoryWithExport:function(){m.value&&t("onArchive",m.value.id)},BAlert:Rn.F,BButton:jn.T,BFormCheckbox:Zi.l,BModal:Nr.N,RouterLink:Ri.rH,ExportRecordCard:jL,ExportToFileSourceForm:eo.Z,ExportToRDMRepositoryForm:uo,ExternalLink:ao.Z,LoadingSpan:z.Z}}}),NL=HL;const FL=(0,m.Z)(NL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[e._m(0),e._v(" "),t("p",[e._v("\n        To be able to recreate your archived history later, you need to export it first to a permanent remote\n        location. Then you will be able to import it back to Galaxy from the remote source, as a new copy.\n    ")]),e._v(" "),n.isLoading?t(n.BAlert,{attrs:{show:"",variant:"info"}},[t(n.LoadingSpan,{attrs:{message:"Retrieving export records..."}})],1):n.exportErrorMessage?t(n.BAlert,{attrs:{show:"",variant:"danger"}},[t("p",[t("b",[e._v("Something went wrong")])]),e._v(" "),t("p",[e._v(e._s(n.exportErrorMessage))])]):n.mostUpToDateExport&&n.mostUpToDateExportIsReady?t("div",[t(n.BAlert,{attrs:{show:"",variant:"success"}},[t("p",[t("b",[e._v("There is an up-to-date export record of this history ready.")])]),e._v(" "),t("p",[e._v("\n                This export record will be associated with your archived history so you can recreate it later by\n                importing it.\n            ")]),e._v(" "),t(n.ExportRecordCard,{staticClass:"mt-3",attrs:{id:"export-record-ready","export-record":n.mostUpToDateExport}})],1)],1):t("div",[n.isExportingRecord?t(n.BAlert,{attrs:{id:"generating-export-record-alert",show:"",variant:"info"}},[t(n.LoadingSpan,{attrs:{message:"Generating export record. This may take a while..."}})],1):t(n.BAlert,{attrs:{show:"",variant:"info"}},[t("p",[t("b",[e._v("\n                    There is no up-to-date export record of this history. You need to create a new export record to\n                    be able to recreate the history later.\n                ")])]),e._v(" "),t("p",[e._v("Use the button below to create a new export record before archiving the history.")]),e._v(" "),t(n.BButton,{attrs:{id:"create-export-record-btn",disabled:!n.canCreateExportRecord,variant:"primary"},on:{click:n.onCreateExportRecord}},[e._v("\n                Create export record\n            ")])],1)],1),e._v(" "),n.isDeleteContentsConfirmed?e._e():t("p",{staticClass:"mt-3 mb-0"},[e._v("\n        To continue, you need to confirm that you want to delete the contents of the original history before you can\n        archive it using the checkbox below. If you created an export record above, you will be able to recreate the\n        history later by importing it from the export record.\n    ")]),e._v(" "),t(n.BFormCheckbox,{staticClass:"my-3",attrs:{id:"confirm-delete-checkbox"},model:{value:n.isDeleteContentsConfirmed,callback:function(e){n.isDeleteContentsConfirmed=e},expression:"isDeleteContentsConfirmed"}},[t("b",[e._v("I am aware that the contents of the original history will be permanently deleted.")])]),e._v(" "),t(n.BAlert,{attrs:{show:"",variant:"warning"}},[e._v("\n        Remember that you cannot undo this action. Once you archive and delete the history, you can only recover it\n        by importing it as a new copy from the export record.\n    ")]),e._v(" "),t(n.BButton,{staticClass:"mt-3",attrs:{id:"archive-history-btn",disabled:!n.canArchiveHistory,variant:"primary"},on:{click:n.onArchiveHistoryWithExport}},[e._v("\n        Archive (and purge) history\n    ")]),e._v(" "),t(n.BModal,{attrs:{title:"Export history to permanent storage",size:"lg","hide-footer":""},model:{value:n.isExportDialogOpen,callback:function(e){n.isExportDialogOpen=e},expression:"isExportDialogOpen"}},[t("BTabs",{staticClass:"export-option-tabs",attrs:{card:"",vertical:"",lazy:""}},[t("BTab",{attrs:{id:"to-remote-file-tab",title:"To Remote File Source",active:""}},[t("p",[t("b",[e._v("Exporting to a remote file source")]),e._v(" will create a compressed archive of the history\n                    contents, copy it to a remote location (e.g. an FTP server) and create an export record with\n                    this information that will be associated with the archived history. You will be able to recreate\n                    the history later by importing it from the export record.\n                ")]),e._v(" "),t(n.ExportToFileSourceForm,{attrs:{what:"history"},on:{export:n.doExportToFileSourceWithPrefix}})],1),e._v(" "),t("BTab",{attrs:{id:"to-rdm-repository-tab",title:"To RDM Repository"}},[t("p",[t("b",[e._v("Exporting to a RDM repository")]),e._v(" (e.g. any\n                    "),t(n.ExternalLink,{attrs:{href:"https://inveniosoftware.org/products/rdm/"}},[e._v(" Invenio RDM ")]),e._v("\n                    compatible repository) will require to create or select an existing record in the repository\n                    where the history archive will be uploaded. The export record will be associated with the\n                    archived history and you will be able to recreate the history later by importing it from the\n                    export record.\n                ")],1),e._v(" "),t("p",[e._v("\n                    You may need to setup your credentials for the selected repository in your\n                    "),t(n.RouterLink,{attrs:{to:"/user/information",target:"_blank"}},[e._v("settings page")]),e._v(" to be able to\n                    export.\n                ")],1),e._v(" "),t(n.ExportToRDMRepositoryForm,{attrs:{what:"history","default-filename":n.historyName+" (Galaxy History)","default-record-name":n.historyName},on:{export:n.doExportToFileSource}})],1)],1)],1)],1)}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("\n        If you are not planning to use this history in the near future, you can\n        "),t("b",[e._v("archive and delete its contents to free up disk space")]),e._v(".\n    ")])}],!1,null,null,null).exports;const BL=(0,a.defineComponent)({__name:"HistoryArchiveSimple",emits:["onArchive"],setup:(e,{emit:t})=>({__sfc:!0,emit:t,onArchiveHistory:function(){t("onArchive")},BButton:jn.T})}),$L=BL;const zL=(0,m.Z)($L,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),t(n.BButton,{staticClass:"archive-history-btn mt-3",attrs:{variant:"primary"},on:{click:n.onArchiveHistory}},[e._v("\n        Archive history\n    ")])],1)}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("\n        If you want to remove the history from your "),t("i",[e._v("active")]),e._v(" histories but keep it around for reference, you\n        can move it to the "),t("b",[e._v("Archived Histories")]),e._v(" section, by clicking the button below.\n    ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("\n        This is particularly useful if you have a lot of histories and want to keep the list of\n        "),t("i",[e._v("active")]),e._v(" histories short or if you publish a history and want to avoid accidental changes to it.\n    ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("\n        You can undo this action at any time, and the history will be moved back to your\n        "),t("i",[e._v("active")]),e._v(" histories.\n    ")])}],!1,null,null,null).exports;var WL=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const UL=(0,a.defineComponent)({__name:"HistoryArchiveWizard",props:{historyId:null},setup(e){const t=e;u.vI.add(h.N2j);const n=(0,I.z)(),{config:i}=(0,c.Z)(!0),o=(0,oo.pm)(),{hasWritable:s}=Mi(),r=(0,a.ref)(!1),l=(0,a.computed)((()=>{const e=n.getHistoryById(t.historyId);return null===e?(n.loadHistoryById(t.historyId),n.getHistoryById(t.historyId)):e})),d=(0,a.computed)((()=>{var e;return null===(e=l.value)||void 0===e?void 0:e.archived})),f=(0,a.computed)((()=>s.value&&i.value.enable_celery_tasks));return{__sfc:!0,historyStore:n,config:i,toast:o,hasWritableFileSources:s,props:t,isArchiving:r,history:l,isHistoryAlreadyArchived:d,canFreeStorage:f,archivedHistoriesRoute:"/histories/archived",onArchiveHistory:function(e){return WL(this,void 0,void 0,(function*(){r.value=!0;try{const i=void 0!==e;yield n.archiveHistoryById(t.historyId,e,i),o.success("History archived successfully.")}catch(e){o.error(`The history archive request failed. Please try again later. Reason: ${e}`)}finally{r.value=!1}}))},FontAwesomeIcon:p.GN,BAlert:Rn.F,BCard:vi._,BTab:gi.L,BTabs:yi.M,RouterLink:Ri.rH,HistoryArchiveExportSelector:FL,HistoryArchiveSimple:zL,LoadingSpan:z.Z}}}),VL=UL;const qL=(0,m.Z)(VL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"history-archive-wizard"},[t(n.FontAwesomeIcon,{staticClass:"text-primary float-left mr-2",attrs:{icon:"archive",size:"2x"}}),e._v(" "),t("h1",{staticClass:"h-lg"},[e._v("\n        Archive\n        "),n.history?t("b",[e._v(e._s(n.history.name))]):t(n.LoadingSpan,{attrs:{"spinner-only":""}})],1),e._v(" "),n.isHistoryAlreadyArchived?t(n.BAlert,{attrs:{id:"history-archived-alert",show:"",variant:"success"}},[e._v("\n        This history has been archived. You can access it from the\n        "),t(n.RouterLink,{attrs:{to:n.archivedHistoriesRoute}},[e._v("Archived Histories")]),e._v(" section.\n    ")],1):n.history?t("div",[t(n.BAlert,{attrs:{show:"",variant:"info"}},[e._v("\n            Archiving a history will remove it from your "),t("i",[e._v("active histories")]),e._v(". You can still access it from the\n            "),t(n.RouterLink,{attrs:{to:n.archivedHistoriesRoute}},[e._v("Archived Histories")]),e._v(" section.\n        ")],1),e._v(" "),n.canFreeStorage?t("div",[t("h2",{staticClass:"h-md"},[e._v("How do you want to archive this history?")]),e._v(" "),t(n.BCard,{staticClass:"mt-3",attrs:{"no-body":""}},[t(n.BTabs,{staticClass:"archival-option-tabs",attrs:{pills:"",card:"",vertical:"",lazy:""}},[t(n.BTab,{attrs:{id:"keep-storage-tab",title:"Keep storage space",active:""}},[t(n.HistoryArchiveSimple,{attrs:{history:n.history},on:{onArchive:n.onArchiveHistory}})],1),e._v(" "),t(n.BTab,{attrs:{id:"free-storage-tab",title:"Free storage space"}},[t(n.HistoryArchiveExportSelector,{attrs:{history:n.history},on:{onArchive:n.onArchiveHistory}})],1)],1)],1)],1):t(n.HistoryArchiveSimple,{attrs:{history:n.history},on:{onArchive:n.onArchiveHistory}})],1):e._e()],1)}),[],!1,null,null,null).exports;const ZL=(0,a.defineComponent)({__name:"SharedItemNotification",props:{notification:null},setup(e){const t=e;u.vI.add(h.Xjp,h.x5v);const n=ha();function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}const o=(0,a.computed)((()=>t.notification.content)),s=(0,a.computed)((()=>o.value.item_type?i(o.value.item_type):"Item")),r=(0,a.computed)((()=>"urgent"===t.notification.variant?"danger":t.notification.variant)),l=(0,a.computed)((()=>(0,D.y3)(o.value.slug)));return{__sfc:!0,props:t,notificationsStore:n,capitalizeFirstLetter:i,content:o,sharedItemType:s,notificationVariant:r,sharedItemUrl:l,markNotificationAsSeen:function(){n.updateNotification(t.notification,{seen:!0})},FontAwesomeIcon:p.GN,BCol:Nd.l,BLink:Yn.we,BRow:Hd.T,Heading:Dt,NotificationActions:Mx}}});const GL=(0,m.Z)(ZL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BCol,[t(n.BRow,{attrs:{"align-v":"center"}},[t(n.Heading,{staticClass:"mb-0",attrs:{size:"md",bold:!e.notification.seen_time}},[t(n.FontAwesomeIcon,{class:`text-${n.notificationVariant}`,attrs:{icon:"retweet"}}),e._v("\n            "+e._s(n.sharedItemType)+" shared with you by "),t("em",[e._v(e._s(n.content.owner_name))])],1),e._v(" "),t(n.NotificationActions,{attrs:{notification:e.notification}})],1),e._v(" "),t(n.BRow,[t("p",{staticClass:"m-0",attrs:{id:"notification-message"}},[t("span",[e._v("The user")]),e._v(" "),t("b",[e._v(e._s(n.content.owner_name))]),e._v(" "),t("span",[e._v("shared ")]),e._v(" "),t(n.BLink,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"text-primary",attrs:{title:`View ${n.content.item_type} in new tab`,href:n.sharedItemUrl,target:"_blank"},on:{click:function(e){return n.markNotificationAsSeen()}}},[e._v("\n                "+e._s(n.content.item_name)+"\n                "),t(n.FontAwesomeIcon,{attrs:{icon:"external-link-alt"}})],1),e._v(" "),t("em",[e._v(e._s(n.content.item_type))]),e._v(" "),t("span",[e._v(" with you.")])],1)])],1)}),[],!1,null,null,null).exports,JL=(0,a.defineComponent)({__name:"NotificationItem",props:{notification:null},setup:e=>({__sfc:!0,props:e,MessageNotification:Lx,SharedItemNotification:GL})});const KL=(0,m.Z)(JL,(function(){var e=this._self._c,t=this._self._setupProxy;return"new_shared_item"===t.props.notification.category?e(t.SharedItemNotification,{attrs:{notification:t.props.notification}}):e(t.MessageNotification,{attrs:{options:{notification:t.props.notification}}})}),[],!1,null,null,null).exports;var XL=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const QL=(0,a.defineComponent)({__name:"NotificationsList",setup(e){u.vI.add(h.diR,h.B2l,h.x5v);const t=ha(),{notifications:n,loadingNotifications:i}=(0,o.Jk)(t),s=(0,a.ref)(!1),r=(0,a.ref)(!1),l=(0,a.ref)(!1),d=(0,a.ref)([]),c=(0,a.computed)((()=>d.value.length>0)),f=(0,a.computed)((()=>n.value.filter(_))),m=(0,a.computed)((()=>c.value&&d.value.length===n.value.length));function _(e){return s.value&&r.value?!e.seen_time&&"new_shared_item"===e.category:s.value?!e.seen_time:!r.value||"new_shared_item"===e.category}return{__sfc:!0,notificationsStore:t,notifications:n,loadingNotifications:i,showUnread:s,showShared:r,preferencesOpen:l,selectedNotificationIds:d,haveSelected:c,filteredNotifications:f,allSelected:m,filterNotifications:_,updateNotifications:function(e){return XL(this,void 0,void 0,(function*(){yield t.updateBatchNotification({notification_ids:d.value,changes:e}),d.value=[]}))},selectOrDeselectNotification:function(e){const t=e.map((e=>e.id)),n=d.value,i=n.filter((e=>!t.includes(e)));i.length===n.length?d.value=[...n,...t]:d.value=i},togglePreferences:function(){l.value=!l.value},FontAwesomeIcon:p.GN,BAlert:Rn.F,BButton:jn.T,BButtonGroup:_o.a,BCard:vi._,BCol:Nd.l,BCollapse:qi.k,BFormCheckbox:Zi.l,BRow:Hd.T,LoadingSpan:z.Z,NotificationItem:KL,NotificationsPreferences:Yf}}});const eD=(0,m.Z)(QL,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{attrs:{"aria-labelledby":"notifications-list"}},[t("div",{staticClass:"d-flex justify-content-between"},[t("h1",{staticClass:"h-lg",attrs:{id:"notifications-title"}},[e._v("Notifications")]),e._v(" "),t(n.BButton,{staticClass:"mb-2",attrs:{variant:"outline-primary",pressed:n.preferencesOpen},on:{click:n.togglePreferences}},[t(n.FontAwesomeIcon,{attrs:{icon:"cog"}}),e._v("\n            Notifications preferences\n        ")],1)],1),e._v(" "),t(n.BCollapse,{model:{value:n.preferencesOpen,callback:function(e){n.preferencesOpen=e},expression:"preferencesOpen"}},[t(n.BCard,{staticClass:"m-2"},[n.preferencesOpen?t(n.NotificationsPreferences,{attrs:{"header-size":"h-md"}}):e._e()],1)],1),e._v(" "),n.loadingNotifications?t(n.BAlert,{attrs:{show:""}},[t(n.LoadingSpan,{attrs:{message:"Loading notifications"}})],1):0===n.notifications.length?t(n.BAlert,{attrs:{id:"no-notifications",show:"",variant:"info"}},[e._v("\n        No notifications to show.\n    ")]):t("div",{staticClass:"mx-1"},[t(n.BCard,{staticClass:"mb-2"},[t(n.BRow,{staticClass:"align-items-center",attrs:{"no-gutters":""}},[t(n.BCol,{attrs:{cols:"1"}},[t(n.BFormCheckbox,{attrs:{checked:n.allSelected,indeterminate:n.selectedNotificationIds.length>0&&n.selectedNotificationIds.length<n.notifications.length},on:{change:function(e){return n.selectOrDeselectNotification(n.notifications)}}},[e._v("\n                        "+e._s(n.haveSelected?`${n.selectedNotificationIds.length} selected`:"Select all")+"\n                    ")])],1),e._v(" "),n.haveSelected?t(n.BCol,[t(n.BButton,{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){return n.updateNotifications({seen:!0})}}},[t(n.FontAwesomeIcon,{attrs:{icon:"check"}}),e._v("\n                        Mark as read\n                    ")],1),e._v(" "),t(n.BButton,{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){return n.updateNotifications({deleted:!0})}}},[t(n.FontAwesomeIcon,{attrs:{icon:"trash"}}),e._v("\n                        Delete\n                    ")],1)],1):e._e(),e._v(" "),t(n.BCol,[t(n.BRow,{attrs:{"align-h":"end","align-v":"center"}},[t("span",{staticClass:"mx-2"},[e._v(" Filters: ")]),e._v(" "),t(n.BButtonGroup,[t(n.BButton,{attrs:{id:"show-unread-filter",size:"sm",pressed:n.showUnread,variant:"outline-primary"},on:{click:function(e){n.showUnread=!n.showUnread}}},[t(n.FontAwesomeIcon,{attrs:{icon:"check"}}),e._v("\n                                Unread\n                            ")],1),e._v(" "),t(n.BButton,{attrs:{id:"show-shared-filter",size:"sm",pressed:n.showShared,variant:"outline-primary"},on:{click:function(e){n.showShared=!n.showShared}}},[t(n.FontAwesomeIcon,{attrs:{icon:"retweet"}}),e._v("\n                                Shared\n                            ")],1)],1)],1)],1)],1)],1),e._v(" "),t(n.BAlert,{directives:[{name:"show",rawName:"v-show",value:0===n.filteredNotifications.length,expression:"filteredNotifications.length === 0"}],attrs:{show:"",variant:"info"}},[e._v("\n            No matching notifications with current filters.\n        ")]),e._v(" "),t("TransitionGroup",{attrs:{name:"notifications-list",tag:"div"}},e._l(n.filteredNotifications,(function(i){return t(n.BCard,{directives:[{name:"show",rawName:"v-show",value:n.filteredNotifications.length>0,expression:"filteredNotifications.length > 0"}],key:i.id,staticClass:"my-2 notification-card",class:i.seen_time?"":"border-dark"},[t(n.BRow,{attrs:{"align-h":"start","align-v":"center"}},[t(n.BCol,{attrs:{cols:"auto"}},[t(n.BButtonGroup,[i.seen_time?e._e():t(n.FontAwesomeIcon,{staticClass:"unread-status position-absolute align-self-center mr-1",attrs:{size:"sm",icon:"circle"}}),e._v(" "),t(n.BFormCheckbox,{attrs:{checked:n.selectedNotificationIds.includes(i.id)},on:{change:function(e){return n.selectOrDeselectNotification([i])}}})],1)],1),e._v(" "),t(n.NotificationItem,{attrs:{notification:i}})],1)],1)})),1)],1)],1)}),[],!1,null,"6e1a3eb3",null).exports;const tD=(0,a.defineComponent)({__name:"SlugInput",props:{slug:null},emits:["change"],setup(e,{emit:t}){const n=e,i=n.slug;return{__sfc:!0,props:n,emit:t,initialSlug:i,onChange:function(e){const n=e.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase();t("change",n)},onCancel:function(){t("change",i)},BFormInput:to.e}}}),nD=tD;const iD=(0,m.Z)(nD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BFormInput,{staticClass:"d-inline w-auto h-auto px-1 py-0",attrs:{value:n.props.slug,type:"text"},on:{change:n.onChange,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:n.onCancel.apply(null,arguments)}}})}),[],!1,null,null,null).exports;var oD=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const aD=(0,a.defineComponent)({__name:"EditableUrl",props:{prefix:null,slug:null},emits:["change","submit"],setup(e,{emit:t}){const n=e;u.vI.add(h.kZ_,h.Xcf,h.LEp);const i=(0,a.ref)(!1),o=(0,a.ref)(),s=(0,a.computed)((()=>n.prefix+n.slug));const r=(0,a.ref)(!1),l=(0,a.computed)((()=>r.value?"Copied!":"Copy URL"));return{__sfc:!0,props:n,emit:t,editing:i,slugInput:o,url:s,onEdit:function(){var e;return oD(this,void 0,void 0,(function*(){i.value=!0,yield(0,a.nextTick)(),(null===(e=o.value)||void 0===e?void 0:e.$el).focus()}))},onChange:function(e){t("change",e)},onSubmit:function(){i.value=!1,t("submit",n.slug)},copied:r,clipboardTitle:l,onCopy:function(){(0,Be.J)(s.value),r.value=!0},onCopyOut:function(){r.value=!1},FontAwesomeIcon:p.GN,BButton:jn.T,SlugInput:iD}}}),sD=aD;const rD=(0,m.Z)(sD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"editable-url"},[e._v("\n    url:\n    "),n.editing?t("span",{attrs:{id:"item-url-text"}},[e._v("\n        "+e._s(e.prefix)+"\n        "),t(n.SlugInput,{ref:"slugInput",staticClass:"ml-1",attrs:{slug:n.props.slug},on:{change:n.onChange,cancel:n.onChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.onSubmit.apply(null,arguments)}}})],1):t("a",{attrs:{id:"item-url",href:n.url,target:"_top"}},[e._v(e._s(n.url))]),e._v(" "),n.editing?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"inline-icon-button",attrs:{title:"Done",size:"md"},on:{click:n.onSubmit}},[t(n.FontAwesomeIcon,{attrs:{icon:"check","fixed-width":""}})],1):t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"inline-icon-button",attrs:{title:"Edit URL",size:"md"},on:{click:n.onEdit}},[t(n.FontAwesomeIcon,{attrs:{icon:"edit","fixed-width":""}})],1),e._v(" "),t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"inline-icon-button",attrs:{id:"tooltip-clipboard",size:"md",title:n.clipboardTitle},on:{click:n.onCopy,mouseout:n.onCopyOut,blur:n.onCopyOut}},[t(n.FontAwesomeIcon,{attrs:{icon:["far","copy"],"fixed-width":""}})],1)],1)}),[],!1,null,"108d249a",null).exports;const lD=(0,a.defineComponent)({__name:"WorkflowInformation",props:{workflowInfo:null,embedded:{type:Boolean}},setup(e){const t=e;u.vI.add(h.P88,h.ILF);const n=(0,a.computed)((()=>{var e;return`https://secure.gravatar.com/avatar/${null===(e=t.workflowInfo)||void 0===e?void 0:e.email_hash}?d=identicon`})),i=(0,a.computed)((()=>{var e;return`/workflows/list_published?f-username=${null===(e=t.workflowInfo)||void 0===e?void 0:e.owner}`}));return{__sfc:!0,props:t,gravatarSource:n,publishedByUser:i,FontAwesomeIcon:p.GN,Heading:Dt,License:ku,StatelessTags:G.Z,UtcDate:J.Z}}});const dD=(0,m.Z)(lD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("aside",{staticClass:"workflow-information"},[t("hgroup",[t(n.Heading,{staticClass:"mb-0",attrs:{h2:"",size:"xl"}},[e._v("About This Workflow")]),e._v(" "),t("span",{staticClass:"ml-2"},[t("span",{attrs:{"data-description":"workflow name"}},[e._v(" "+e._s(e.workflowInfo.name)+" ")]),e._v(" - Version\n            "+e._s(e.workflowInfo.version)+"\n        ")])],1),e._v(" "),t("div",{staticClass:"workflow-info-box"},[t("hgroup",{staticClass:"mb-2"},[t(n.Heading,{staticClass:"mb-0",attrs:{h3:"",size:"md"}},[e._v("Author")]),e._v(" "),t("span",{staticClass:"ml-2"},[e._v(e._s(e.workflowInfo.owner))])],1),e._v(" "),t("img",{staticClass:"mb-2",attrs:{alt:"User Avatar",src:n.gravatarSource}}),e._v(" "),t("router-link",{attrs:{to:n.publishedByUser,target:n.props.embedded?"_blank":""}},[e._v("\n            All published Workflows by "+e._s(e.workflowInfo.owner)+"\n        ")])],1),e._v(" "),e.workflowInfo?.creator?t("div",{staticClass:"workflow-info-box"},[t(n.Heading,{staticClass:"mb-0",attrs:{h3:"",size:"md"}},[e._v("Creators")]),e._v(" "),t("ul",{staticClass:"list-unstyled mb-0"},e._l(e.workflowInfo.creator,(function(i,o){return t("li",{key:o},["Person"===i.class?t(n.FontAwesomeIcon,{attrs:{icon:"fa-user"}}):e._e(),e._v(" "),"Organization"===i.class?t(n.FontAwesomeIcon,{attrs:{icon:"fa-building"}}):e._e(),e._v("\n                "+e._s(i.name)+"\n            ")],1)})),0)],1):e._e(),e._v(" "),t("div",{staticClass:"workflow-info-box"},[t(n.Heading,{staticClass:"mb-0",attrs:{h3:"",size:"md"}},[e._v("Description")]),e._v(" "),e.workflowInfo.annotation?t("p",{staticClass:"mb-0"},[e._v("\n            "+e._s(e.workflowInfo.annotation)+"\n        ")]):t("p",{staticClass:"mb-0"},[e._v("This Workflow has no description.")])],1),e._v(" "),e.workflowInfo?.tags?t("div",{staticClass:"workflow-info-box"},[t(n.Heading,{staticClass:"mb-0",attrs:{h3:"",size:"md"}},[e._v("Tags")]),e._v(" "),t(n.StatelessTags,{staticClass:"tags mt-2",attrs:{value:e.workflowInfo.tags,disabled:""}})],1):e._e(),e._v(" "),t("div",{staticClass:"workflow-info-box"},[t(n.Heading,{staticClass:"mb-0",attrs:{h3:"",size:"md"}},[e._v("License")]),e._v(" "),e.workflowInfo.license?t(n.License,{attrs:{"license-id":e.workflowInfo.license}}):t("span",[e._v("No License specified")])],1),e._v(" "),t("div",{staticClass:"workflow-info-box"},[t(n.Heading,{staticClass:"mb-0",attrs:{h3:"",size:"md"}},[e._v("Last Updated")]),e._v(" "),t(n.UtcDate,{attrs:{date:e.workflowInfo.update_time,mode:"pretty"}})],1)])}),[],!1,null,"6eee21cb",null).exports;var cD=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const uD=(0,a.defineComponent)({__name:"WorkflowPublished",props:{id:{type:String,required:!0},zoom:{type:Number,default:.75},embed:{type:Boolean,default:!1},showButtons:{type:Boolean,default:!0},showAbout:{type:Boolean,default:!0},showHeading:{type:Boolean,default:!0},showMinimap:{type:Boolean,default:!0},showZoomControls:{type:Boolean,default:!0},initialX:{type:Number,default:-20},initialY:{type:Number,default:-20}},setup(e){const t=e;u.vI.add(h.LM3,h.ILF,h.P88,h.zc,h.Xcf,h.q7m);const n=(0,a.ref)(),i=(0,a.ref)(null),o=(0,a.ref)(!0),s=(0,a.ref)(!1),r=(0,a.ref)(""),{datatypesMapper:l}=Wg(),{stateStore:d}=qg(t.id);(0,a.watch)((()=>t.zoom),(()=>d.setScale(t.zoom)),{immediate:!0}),(0,a.watch)((()=>t.id),(e=>cD(this,void 0,void 0,(function*(){var a;n.value=void 0,o.value=!0,s.value=!1,r.value="";try{const[{data:o},{data:a}]=yield Promise.all([v.Z.get((0,D.dq)(`/api/workflows/${e}`)),v.Z.get((0,D.dq)(`/workflow/load_workflow?_=true&id=${e}`))]);(0,Sh.Nh)(o.name),n.value=o,i.value=a,Oh(t.id,a)}catch(e){const t=e;(null===(a=t.response)||void 0===a?void 0:a.data.err_msg)&&(r.value=t.response.data.err_msg),s.value=!0}finally{o.value=!1}}))),{immediate:!0});const{showActivityBar:c,showToolbox:f}=So(),m=(0,a.computed)((()=>(0,D.dq)(`/api/workflows/${t.id}/download?format=json-download`))),_=(0,a.computed)((()=>(0,D.dq)(`/workflow/imp?id=${t.id}`))),g=(0,a.computed)((()=>(0,D.dq)(`/workflows/run?id=${t.id}`))),y=(0,Xe.L)();const b=(0,a.computed)((()=>({x:-t.initialX*t.zoom,y:-t.initialY*t.zoom}))),w=(0,a.computed)((()=>(0,D.dq)(`/published/workflow?id=${t.id}`)));return{__sfc:!0,props:t,workflowInfo:n,workflow:i,loading:o,errored:s,errorMessage:r,datatypesMapper:l,stateStore:d,showActivityBar:c,showToolbox:f,downloadUrl:m,importUrl:_,runUrl:g,userStore:y,logInTitle:function(e){return y.isAnonymous?`Log in to ${e}`:e},initialPosition:b,viewUrl:w,FontAwesomeIcon:p.GN,WorkflowInformation:dD,ActivityBar:fs,Heading:Dt,FlexPanel:La,ToolPanel:os,WorkflowGraph:Hw}}});const hD=(0,m.Z)(uD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"d-flex",attrs:{id:"columns"}},[!n.props.embed&&n.showActivityBar?t(n.ActivityBar):e._e(),e._v(" "),!n.props.embed&&n.showToolbox?t(n.FlexPanel,{attrs:{side:"left"}},[t(n.ToolPanel)],1):e._e(),e._v(" "),t("div",{staticClass:"container-root m-3 w-100 overflow-auto d-flex flex-column",attrs:{id:"center"}},[n.loading?t("div",[t(n.Heading,{attrs:{h1:"",separator:"",size:"xl"}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-spinner",spin:""}}),e._v("\n                Loading Workflow\n            ")],1)],1):n.errored?t("div",[t(n.Heading,{attrs:{h1:"",separator:"",size:"xl"}},[e._v(" Failed to load published Workflow ")]),e._v(" "),n.errorMessage?t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n                "+e._s(n.errorMessage)+"\n            ")]):t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" Unknown Error ")])],1):n.workflowInfo?t("div",{staticClass:"published-workflow"},[t("div",{staticClass:"workflow-preview d-flex flex-column"},[n.props.showHeading||n.props.showButtons?t("span",{staticClass:"d-flex w-100 flex-gapx-1 flex-wrap justify-content-end align-items-center mb-2"},[n.props.showHeading?t(n.Heading,{staticClass:"flex-grow-1 mb-0",attrs:{h1:"",separator:"",inline:"",size:"xl"}},[n.props.showAbout?t("span",[e._v(" Workflow Preview ")]):t("span",[e._v(" "+e._s(n.workflowInfo.name)+" ")])]):e._e(),e._v(" "),n.props.showButtons?t("span",[t("b-button",{attrs:{to:n.downloadUrl,title:"Download Workflow",variant:"secondary",size:"md"}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-download"}}),e._v("\n                            Download\n                        ")],1),e._v(" "),n.props.embed?e._e():t("b-button",{attrs:{href:n.importUrl,disabled:n.userStore.isAnonymous,title:n.logInTitle("Import Workflow"),"data-description":"workflow import",target:"_blank",variant:"secondary",size:"md"}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-edit"}}),e._v("\n                            Import\n                        ")],1),e._v(" "),n.props.embed?e._e():t("b-button",{attrs:{to:n.runUrl,disabled:n.userStore.isAnonymous,title:n.logInTitle("Run Workflow"),variant:"primary",size:"md"}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-play"}}),e._v("\n                            Run\n                        ")],1),e._v(" "),n.props.embed?t("b-button",{staticClass:"view-button font-weight-bold",attrs:{href:n.viewUrl,target:"blank",variant:"primary",size:"md"}},[t(n.FontAwesomeIcon,{attrs:{icon:["gxd","galaxyLogo"]}}),e._v("\n                            View In Galaxy\n                        ")],1):e._e()],1):e._e()],1):e._e(),e._v(" "),t("b-card",{staticClass:"workflow-card"},[n.workflow&&n.datatypesMapper?t(n.WorkflowGraph,{attrs:{steps:n.workflow.steps,"datatypes-mapper":n.datatypesMapper,"initial-position":n.initialPosition,"show-minimap":n.props.showMinimap,"show-zoom-controls":n.props.showZoomControls,readonly:""}}):e._e()],1)],1),e._v(" "),n.props.showAbout&&n.workflowInfo?t(n.WorkflowInformation,{attrs:{"workflow-info":n.workflowInfo,embedded:n.props.embed}}):e._e()],1):e._e()])],1)}),[],!1,null,"03da3bc4",null).exports,pD=(0,a.defineComponent)({__name:"WorkflowEmbed",props:{id:null},setup(e){const t=e;u.vI.add(h.kZ_);const n=(0,a.reactive)({buttons:!0,about:!1,heading:!1,minimap:!0,zoomControls:!0,initialX:-20,initialY:-20,zoom:1});const i=(0,a.computed)((()=>{const e=window.location.port?`:${window.location.port}`:"";return`${window.location.protocol}//${window.location.hostname}${e}${(0,g.getAppRoot)()}`})),o=(0,a.computed)((()=>{let e=`${i.value}published/workflow?id=${t.id}&embed=true`;return e+=`&buttons=${n.buttons}`,e+=`&about=${n.about}`,e+=`&heading=${n.heading}`,e+=`&minimap=${n.minimap}`,e+=`&zoom_controls=${n.zoomControls}`,e+=`&initialX=${n.initialX}&initialY=${n.initialY}`,e+=`&zoom=${n.zoom}`,e})),s=(0,a.computed)((()=>`<iframe title="Galaxy Workflow Embed" src="${o.value}" />`)),r=(0,a.computed)((()=>`zoom: ${n.zoom}, x: ${n.initialX}, y: ${n.initialY}`)),l=(0,Pn.Nr)(r,500),d=(0,a.ref)(!1),c=(0,Pn.Nr)(d,100),f=(0,a.ref)(!1);const m=(0,a.computed)((()=>f.value?"Copied!":"Copy URL"));return{__sfc:!0,props:t,settings:n,onChangePosition:function(e,t){const i=parseInt(e.target.value);"x"===t?n.initialX=i:n.initialY=i},root:i,embedUrl:o,embed:s,embedKey:r,debouncedEmbedKey:l,showEmbed:d,showEmbedDebounced:c,copied:f,onCopy:function(){(0,Be.J)(s.value),f.value=!0},onCopyOut:function(){f.value=!1},clipboardTitle:m,FontAwesomeIcon:p.GN,BButton:jn.T,BFormCheckbox:Zi.l,BFormInput:to.e,BInputGroup:BC.w,BInputGroupAppend:$C.B,ZoomControl:Rw,WorkflowPublished:hD}}});const fD=(0,m.Z)(pD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"workflow-embed"},[t("div",{staticClass:"settings"},[t(n.BFormCheckbox,{model:{value:n.settings.heading,callback:function(t){e.$set(n.settings,"heading",t)},expression:"settings.heading"}},[e._v(" Show heading ")]),e._v(" "),t(n.BFormCheckbox,{model:{value:n.settings.about,callback:function(t){e.$set(n.settings,"about",t)},expression:"settings.about"}},[e._v(" Show about ")]),e._v(" "),t(n.BFormCheckbox,{model:{value:n.settings.buttons,callback:function(t){e.$set(n.settings,"buttons",t)},expression:"settings.buttons"}},[e._v(" Show buttons ")]),e._v(" "),t(n.BFormCheckbox,{model:{value:n.settings.minimap,callback:function(t){e.$set(n.settings,"minimap",t)},expression:"settings.minimap"}},[e._v(" Show minimap ")]),e._v(" "),t(n.BFormCheckbox,{model:{value:n.settings.zoomControls,callback:function(t){e.$set(n.settings,"zoomControls",t)},expression:"settings.zoomControls"}},[e._v(" Show zoom controls ")]),e._v(" "),t("label",{staticClass:"control-label",attrs:{for:"embed-position-control"}},[e._v("\n            Initial position\n            "),t("div",{staticClass:"position-control",attrs:{id:"embed-position-control"}},[t("label",[e._v("\n                    x:\n                    "),t("input",{attrs:{type:"number"},domProps:{value:n.settings.initialX},on:{change:e=>n.onChangePosition(e,"x")}})]),e._v(" "),t("label",[e._v("\n                    y:\n                    "),t("input",{attrs:{type:"number"},domProps:{value:n.settings.initialY},on:{change:e=>n.onChangePosition(e,"y")}})])])]),e._v(" "),t("label",{staticClass:"control-label",attrs:{for:"embed-zoom-control"}},[e._v("\n            Initial zoom\n            "),t(n.ZoomControl,{staticClass:"zoom-control",attrs:{id:"embed-zoom-control","zoom-level":n.settings.zoom},on:{onZoom:e=>n.settings.zoom=e}})],1)],1),e._v(" "),t("div",{staticClass:"preview"},[t("label",{staticClass:"w-100",attrs:{for:"embed-code"}},[e._v("\n            Embed code\n            "),t(n.BInputGroup,{attrs:{id:"embed-code"}},[t(n.BFormInput,{staticClass:"embed-code-input",attrs:{value:n.embed,readonly:""}}),e._v(" "),t(n.BInputGroupAppend,[t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:n.clipboardTitle,variant:"primary"},on:{click:n.onCopy,blur:n.onCopyOut}},[t(n.FontAwesomeIcon,{attrs:{icon:"copy"}})],1)],1)],1)],1),e._v(" "),t(n.BFormCheckbox,{attrs:{switch:""},model:{value:n.showEmbed,callback:function(e){n.showEmbed=e},expression:"showEmbed"}},[e._v("Show embed Preview")]),e._v(" "),n.showEmbedDebounced?t(n.WorkflowPublished,{key:n.debouncedEmbedKey,staticClass:"published-preview",attrs:{id:n.props.id,zoom:n.settings.zoom,embed:"","show-about":n.settings.about,"show-buttons":n.settings.buttons,"show-heading":n.settings.heading,"show-minimap":n.settings.minimap,"show-zoom-controls":n.settings.zoomControls,"initial-x":n.settings.initialX,"initial-y":n.settings.initialY}}):e._e()],1)])}),[],!1,null,"3e1e3620",null).exports;const mD=(0,a.defineComponent)({__name:"ErrorMessages",props:{messages:null},emits:["dismissed"],setup:(e,{emit:t})=>({__sfc:!0,props:e,emit:t,loginLink:(0,a.computed)((()=>`${(0,s.Bg)()}login?redirect=${encodeURIComponent(window.location.toString())}`)),hasLogin:function(e){return e.includes("logged in")},splitLoginString:function(e){return e.split(/(logged in)/g)},BAlert:Rn.F})}),_D=mD;const vD=(0,m.Z)(_D,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",e._l(n.props.messages,(function(i,o){return t(n.BAlert,{key:i,attrs:{show:"",variant:"danger",dismissible:""},on:{dismissed:()=>n.emit("dismissed",o)}},[n.hasLogin(i)?t("span",e._l(n.splitLoginString(i),(function(i,o){return t("span",{key:o},[n.hasLogin(i)?t("a",{staticClass:"require-login-link",attrs:{href:n.loginLink}},[e._v("\n                    "+e._s(i)+"\n                ")]):t("span",[e._v(" "+e._s(i)+" ")])])})),0):t("span",[e._v(" "+e._s(i)+" ")])])})),1)}),[],!1,null,null,null).exports;var gD=n(78959),yD=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const bD=(0,a.defineComponent)({__name:"UserSharing",props:{item:null,modelClass:null},emits:["share","error","cancel"],setup(e,{expose:t,emit:n}){var i;const r=e,{currentUser:l}=(0,o.Jk)((0,Xe.L)()),{config:d,isConfigLoaded:u}=(0,c.Z)(!1),h=(0,a.computed)((()=>!!r.item.extra&&(r.item.extra.can_change.length>0||r.item.extra.cannot_change.length>0))),p=(0,a.computed)((()=>l.value&&"is_admin"in l.value&&l.value.is_admin)),f=(0,a.computed)((()=>d.value.expose_user_email||p.value)),m=(0,a.ref)([...null!==(i=r.item.users_shared_with)&&void 0!==i?i:[]]),_=(0,a.computed)((()=>m.value.map((({email:e})=>e))));function g(){var e;m.value=[...null!==(e=r.item.users_shared_with)&&void 0!==e?e:[]]}const y=(0,a.ref)([]),b=(0,a.ref)("");const w=(0,a.computed)((()=>{var e;const t=[..._.value],n=[...(null!==(e=r.item.users_shared_with)&&void 0!==e?e:[]).map((({email:e})=>e))],i=t.filter((e=>!n.includes(e))),o=n.filter((e=>!t.includes(e)));return!(0!==i.length||0!==o.length)})),k=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=r.item.extra)||void 0===e?void 0:e.can_change.length)&&void 0!==t?t:0})),C=(0,a.computed)((()=>{var e,t;return null!==(t=null===(e=r.item.extra)||void 0===e?void 0:e.cannot_change.length)&&void 0!==t?t:0})),x=(0,a.ref)("make_public");return t({reset:g}),{__sfc:!0,props:r,emit:n,currentUser:l,config:d,isConfigLoaded:u,permissionsChangeRequired:h,userIsAdmin:p,exposeEmails:f,sharingCandidates:m,sharingCandidatesAsEmails:_,reset:g,userOptions:y,currentSearch:b,onSearchChanged:function(e){return yD(this,void 0,void 0,(function*(){if(b.value=e,f.value)if(e.length<3)y.value=[];else try{const t=(yield v.Z.get(`${(0,s.Bg)()}api/users?f_email=${e}`)).data;(0,Sh.Wr)(t),y.value=t.filter((e=>e&&"object"==typeof e&&"email"in e&&"string"==typeof e.email&&!_.value.includes(e.email)))}catch(e){n("error",e)}else y.value=[{email:e}]}))},onBlur:function(){const e=m.value.some((({email:e})=>e===b.value));!b.value||f.value||e||m.value.push({email:b.value})},onRemove:function(e){const t=m.value.indexOf(e);t>=0&&m.value.splice(t,1)},charactersThresholdWarning:"Enter at least 3 characters to see suggestions",elementsNotFoundWarning:"No elements found. Consider changing the search query",onCancel:function(){var e;m.value=[...null!==(e=r.item.users_shared_with)&&void 0!==e?e:[]],n("cancel")},onSubmit:function(){n("share",_.value)},noChanges:w,canChangeCount:k,cannotChangeCount:C,selectedSharingOption:x,onUpdatePermissions:function(){n("share",_.value,x.value)},BAlert:Rn.F,BButton:jn.T,BCard:vi._,BCardGroup:Rd.o,BFormSelect:Ji.K,BFormSelectOption:gD.c,BListGroup:Xl.N,BListGroupItem:Ql.f,BModal:Nr.N,Multiselect:j(),Heading:Dt}}}),wD=bD;const kD=(0,m.Z)(wD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"user-sharing"},[n.currentUser&&n.isConfigLoaded?t("div",[0===n.props.item.users_shared_with?.length?t("p",[e._v("\n            You have not shared this "+e._s(n.props.modelClass)+" with any users.\n        ")]):t("p",[e._v("\n            The following users will see this "+e._s(e.modelClass)+" in their "+e._s(e.modelClass)+" list and will be able to\n            view, import and run it.\n        ")]),e._v(" "),t("div",{staticClass:"share_with_view"},[t(n.Multiselect,{attrs:{options:n.userOptions,"clear-on-select":!0,multiple:!0,"internal-search":!1,"max-height":n.exposeEmails?300:0,label:"email","tack-by":"email",placeholder:"Please specify user email"},on:{remove:n.onRemove,"search-change":n.onSearchChanged,close:n.onBlur},scopedSlots:e._u([{key:"tag",fn:function({option:n,remove:i}){return[t("span",{staticClass:"multiselect__tag remove_sharing_with",attrs:{"data-email":n.email}},[t("span",[e._v(e._s(n.email))]),e._v(" "),t("i",{staticClass:"multiselect__tag-icon",attrs:{"aria-hidden":"true",tabindex:"0"},on:{click:function(e){return i(n)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:i(n)}}})])]}}],null,!1,2359330830),model:{value:n.sharingCandidates,callback:function(e){n.sharingCandidates=e},expression:"sharingCandidates"}},[n.sharingCandidates?e._e():t("template",{slot:"caret"},[t("div")]),e._v(" "),e._v(" "),n.sharingCandidates?t("template",{slot:"noResult"},[n.currentSearch.length<3?t("div",[e._v("\n                        "+e._s(n.charactersThresholdWarning)+"\n                    ")]):t("div",[e._v("\n                        "+e._s(n.elementsNotFoundWarning)+"\n                    ")])]):e._e(),e._v(" "),t("template",{slot:"noOptions"},[n.currentSearch.length<3?t("div",[e._v("\n                        "+e._s(n.charactersThresholdWarning)+"\n                    ")]):t("div",[e._v("\n                        "+e._s(n.elementsNotFoundWarning)+"\n                    ")])])],2),e._v(" "),t("div",{staticClass:"share-with-card-buttons mt-2 w-100 d-flex justify-content-end flex-gapx-1"},[t(n.BButton,{staticClass:"cancel-sharing-with",attrs:{disabled:n.noChanges},on:{click:n.onCancel}},[e._v(" Cancel ")]),e._v(" "),t(n.BButton,{staticClass:"submit-sharing-with",attrs:{variant:"primary",disabled:n.noChanges},on:{click:n.onSubmit}},[e._v("\n                    "+e._s(n.currentSearch?"Add":"Save")+"\n                ")])],1)],1)]):e._e(),e._v(" "),t(n.BModal,{attrs:{visible:n.permissionsChangeRequired,size:"xl","no-close-on-backdrop":"",scrollable:"","dialog-class":"user-sharing-modal"},on:{ok:n.onUpdatePermissions,cancel:n.onCancel,close:n.onCancel},scopedSlots:e._u([{key:"modal-title",fn:function(){return[t(n.Heading,{attrs:{inline:"",h2:"",size:"md"}},[e._v(" Permissions Change Required ")])]},proxy:!0}])},[e._v(" "),t(n.BAlert,{attrs:{variant:"warning",dismissible:"",show:n.permissionsChangeRequired&&n.canChangeCount>0}},[e._v("\n            This "+e._s(e.modelClass)+" contains "+e._s(n.canChangeCount)+"\n            "+e._s(1===n.canChangeCount?"dataset which is":"datasets which are")+" exclusively private to you. You\n            need to update "+e._s(1===n.canChangeCount?"its":"their")+" permissions, in order to share\n            "+e._s(1===n.canChangeCount?"it":"them")+".\n        ")]),e._v(" "),t(n.BAlert,{attrs:{variant:"danger",dismissible:"",show:n.permissionsChangeRequired&&n.cannotChangeCount>0}},[e._v("\n            This "+e._s(e.modelClass)+" contains "+e._s(n.cannotChangeCount)+"\n            "+e._s(1===n.cannotChangeCount?"dataset":"datasets")+" which you are not authorized to share.\n        ")]),e._v(" "),t(n.BCard,{staticClass:"mb-4",attrs:{"border-variant":"primary",header:"How would you like to proceed?","header-bg-variant":"primary","header-text-variant":"white"}},[t(n.BFormSelect,{model:{value:n.selectedSharingOption,callback:function(e){n.selectedSharingOption=e},expression:"selectedSharingOption"}},[t(n.BFormSelectOption,{attrs:{value:"make_public"}},[e._v(" Make datasets public ")]),e._v(" "),t(n.BFormSelectOption,{attrs:{value:"make_accessible_and_shared"}},[e._v("\n                    Make datasets private to me and users this "+e._s(e.modelClass)+" is shared with\n                ")]),e._v(" "),t(n.BFormSelectOption,{attrs:{value:"no_changes"}},[e._v(" Share "+e._s(e.modelClass)+" anyways ")])],1)],1),e._v(" "),t(n.BCardGroup,{attrs:{deck:""}},[n.canChangeCount>0?t(n.BCard,{attrs:{header:"The following datasets can be shared by updating their permissions"}},[t(n.BListGroup,e._l(n.props.item.extra?.can_change??[],(function(i){return t(n.BListGroupItem,{key:i.id},[e._v("\n                        "+e._s(i.name)+"\n                    ")])})),1)],1):e._e(),e._v(" "),n.cannotChangeCount>0?t(n.BCard,{attrs:{header:"The following datasets cannot be shared, you are not authorized to change their permissions"}},[t(n.BListGroup,e._l(n.props.item.extra?.cannot_change??[],(function(i){return t(n.BListGroupItem,{key:i.id},[e._v("\n                        "+e._s(i.name)+"\n                    ")])})),1)],1):e._e()],1)],1)],1)}),[],!1,null,null,null).exports;var CD=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const xD=(0,a.defineComponent)({__name:"SharingPage",props:{id:null,pluralName:null,modelClass:null},setup(e){const t=e;u.vI.add(h.kZ_,h.Xcf,h.FKd,h.wOQ,h.eW2,h.l1h);const n=(0,a.ref)([]);function i(e){n.value=Array.from(new Set(n.value).add(e))}const o=()=>({can_change:[],cannot_change:[]}),s=(0,a.ref)({title:"title",username_and_slug:"username/slug",importable:!1,published:!1,users_shared_with:[],extra:{can_change:[],cannot_change:[]}}),r=(0,a.computed)((()=>{const e=window.location.port?`:${window.location.port}`:"";return`${window.location.protocol}//${window.location.hostname}${e}${(0,g.getAppRoot)()}`})),d=(0,a.reactive)({prefix:"",slug:""});(0,a.watch)((()=>s.value.username_and_slug),(e=>{if(e){const t=e.lastIndexOf("/");d.prefix=r.value+e.substring(0,t+1),d.slug=e.substring(t+1)}}),{immediate:!0});const c=(0,a.computed)((()=>`${(0,g.getAppRoot)()}api/${t.pluralName.toLowerCase()}/${t.id}/slug`));const p=(0,a.computed)((()=>s.value.published?"accessible via link and published":"accessible via link")),f=(0,a.computed)((()=>`${(0,g.getAppRoot)()}${t.pluralName.toLocaleLowerCase()}/list_published`));function m(e){i((0,y.a)(e))}const _=(0,a.ref)(!1);function b(){return CD(this,void 0,void 0,(function*(){_.value=!1;try{M((yield v.Z.get(`${(0,g.getAppRoot)()}api/${t.pluralName.toLocaleLowerCase()}/${t.id}/sharing`)).data,!0)}catch(e){m(e)}}))}function w(e){return!!e.extra&&(e.extra.can_change.length>0||e.extra.cannot_change.length>0)}b();const k={enableLinkAccess:"enable_link_access",disableLinkAccess:"disable_link_access",publish:"publish",unpublish:"unpublish",share_with:"share_with_users"},{success:C}=(0,oo.pm)();function x(e,i,o){return CD(this,void 0,void 0,(function*(){let a;a=Array.isArray(i)?i:i?i.replace(/ /g,"").split(","):void 0;const s={user_ids:a,share_option:o||void 0};try{const i=yield v.Z.put(`${(0,g.getAppRoot)()}api/${t.pluralName.toLocaleLowerCase()}/${t.id}/${e}`,s);n.value=[];const o=a&&!w(i.data)&&0===i.data.errors.length;M(i.data,null!=o&&o),w(i.data)||C("Sharing preferences saved")}catch(e){m(e)}}))}const S=(0,a.ref)();function M(e,t){var i,o,r;return CD(this,void 0,void 0,(function*(){e.errors&&(n.value=e.errors),s.value=e,null!==(o=!s.value.extra||(null===(i=e.errors)||void 0===i?void 0:i.length))&&void 0!==o&&o&&(s.value.extra={can_change:[],cannot_change:[]}),t&&(yield(0,a.nextTick)(),null===(r=S.value)||void 0===r||r.reset()),_.value=!0}))}const T=(0,a.ref)(Boolean((0,l.Bz)().user.get("username"))),L=(0,a.ref)("");const D=(0,a.computed)((()=>s.value.importable&&"workflow"===t.modelClass.toLocaleLowerCase()));return{__sfc:!0,props:t,errors:n,addError:i,onErrorDismissed:function(e){n.value.splice(e,1)},defaultExtra:o,item:s,itemRoot:r,itemUrl:d,slugUrl:c,onChangeSlug:function(e){d.slug=e},onSubmitSlug:function(e){return CD(this,void 0,void 0,(function*(){d.slug=e;try{yield v.Z.put(c.value,{new_slug:e})}catch(e){m(e)}}))},itemStatus:p,publishedUrl:f,onError:m,ready:_,getSharing:b,permissionsChangeRequired:w,actions:k,success:C,setSharing:x,userSharing:S,assignItem:M,onImportable:function(e){e?x(k.enableLinkAccess):(s.value.published=!1,x(k.disableLinkAccess))},onPublish:function(e){e?(s.value.importable=!0,x(k.publish)):x(k.unpublish)},hasUsername:T,newUsername:L,setUsername:function(){return CD(this,void 0,void 0,(function*(){v.Z.put(`${(0,g.getAppRoot)()}api/users/${(0,l.Bz)().user.id}/information/inputs`,{username:L.value||""}).then((e=>{T.value=!0,b()})).catch(m)}))},embedable:D,BFormCheckbox:Zi.l,EditableUrl:rD,WorkflowEmbed:fD,ErrorMessages:vD,UserSharing:kD,Heading:Dt}}}),SD=xD;const MD=(0,m.Z)(SD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"sharing-page"},[t(n.Heading,{attrs:{h1:"",size:"lg",separator:""}},[t("span",[e._v("\n            Share or Publish "+e._s(e.modelClass)+" "),n.ready?t("span",[e._v('"'+e._s(n.item.title)+'"')]):e._e()])]),e._v(" "),t(n.ErrorMessages,{attrs:{messages:n.errors},on:{dismissed:n.onErrorDismissed}}),e._v(" "),n.hasUsername?n.ready?t("div",[t("div",{staticClass:"mb-3"},[t(n.BFormCheckbox,{staticClass:"make-accessible",attrs:{switch:""},on:{change:n.onImportable},model:{value:n.item.importable,callback:function(t){e.$set(n.item,"importable",t)},expression:"item.importable"}},[e._v("\n                Make "+e._s(e.modelClass)+" accessible\n            ")]),e._v(" "),n.item.importable?t(n.BFormCheckbox,{staticClass:"make-publishable",attrs:{switch:""},on:{change:n.onPublish},model:{value:n.item.published,callback:function(t){e.$set(n.item,"published",t)},expression:"item.published"}},[e._v("\n                Make "+e._s(e.modelClass)+" publicly available in\n                "),t("a",{attrs:{href:n.publishedUrl,target:"_top"}},[e._v("Published "+e._s(e.pluralName))])]):e._e()],1),e._v(" "),n.item.importable?t("div",{staticClass:"mb-4"},[t("div",[e._v("This "+e._s(e.modelClass)+" is currently "+e._s(n.itemStatus)+".")]),e._v(" "),t("p",[e._v("Anyone can view and import this "+e._s(e.modelClass)+" by visiting the following URL:")]),e._v(" "),t(n.EditableUrl,{attrs:{prefix:n.itemUrl.prefix,slug:n.itemUrl.slug},on:{change:n.onChangeSlug,submit:n.onSubmitSlug}})],1):t("div",{staticClass:"mb-4"},[e._v("\n            Access to this "+e._s(e.modelClass)+" is currently restricted so that only you and the users listed below can\n            access it. Note that sharing a History will also allow access to all of its datasets.\n        ")]),e._v(" "),n.embedable?t("div",{staticClass:"mb-4"},[t(n.Heading,{attrs:{h2:"",size:"md"}},[e._v(" Embed "+e._s(e.modelClass)+" ")]),e._v(" "),"workflow"===n.props.modelClass.toLowerCase()?t(n.WorkflowEmbed,{attrs:{id:e.id}}):e._e()],1):e._e(),e._v(" "),t(n.Heading,{attrs:{h2:"",size:"md"}},[e._v(" Share "+e._s(e.modelClass)+" with Individual Users ")]),e._v(" "),t(n.UserSharing,{ref:"userSharing",attrs:{item:n.item,"model-class":e.modelClass},on:{share:(e,t)=>n.setSharing(n.actions.share_with,e,t),error:n.onError,cancel:n.getSharing}})],1):e._e():t("form",{staticClass:"d-flex flex-column flex-gapy-1",on:{submit:function(e){return e.preventDefault(),n.setUsername()}}},[t("label",[e._v("\n            To make a "+e._s(e.modelClass)+" accessible via link or publish it, you must create a public username:\n            "),t("input",{directives:[{name:"model",rawName:"v-model",value:n.newUsername,expression:"newUsername"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:n.newUsername},on:{input:function(e){e.target.composing||(n.newUsername=e.target.value)}}})]),e._v(" "),t("b-button",{staticClass:"align-self-start",attrs:{type:"submit",variant:"primary"}},[e._v("Set Username")])],1)],1)}),[],!1,null,"4e0597ac",null).exports;function TD(){const e=(0,l.Bz)();if(!e.user||!e.user.id)return"/"}function LD(){if((0,l.Bz)().user.id)return"/"}function DD(e,t){if(e)return t}function ED(e){const t=new Ri.ZP({base:(0,g.getAppRoot)(),mode:"history",routes:[...OS,...iT,...bL,{path:"/login/start",component:Rg,redirect:LD()},{path:"/pages/editor",component:hh,props:e=>({pageId:e.query.id})},{path:"/workflows/edit",component:rk},{path:"/published/history",component:Al,props:e=>({id:e.query.id})},{path:"/published/page",component:Hu,props:e=>({pageId:e.query.id})},{path:"/published/visualization",component:um,props:e=>({id:e.query.id})},{path:"/published/workflow",component:hD,props:e=>({id:e.query.id,zoom:e.query.zoom?parseFloat(e.query.zoom):void 0,embed:e.query.embed?(0,fe.Nx)(e.query.embed):void 0,showButtons:e.query.buttons?(0,fe.Nx)(e.query.buttons):void 0,showAbout:e.query.about?(0,fe.Nx)(e.query.about):void 0,showHeading:e.query.heading?(0,fe.Nx)(e.query.heading):void 0,showMinimap:e.query.minimap?(0,fe.Nx)(e.query.minimap):void 0,showZoomControls:e.query.zoom_controls?(0,fe.Nx)(e.query.zoom_controls):void 0,initialX:e.query.initialX?parseInt(e.query.initialX):void 0,initialY:e.query.initialY?parseInt(e.query.initialY):void 0})},{name:"error",path:"/client-error/",component:L,props:!0},{path:"/",component:H_,children:[{path:"",alias:"root",component:Cg,props:t=>({config:e.config,query:t.query})},{path:"about",component:LL},{path:"carbon_emissions_calculations",component:Pd},{path:"custom_builds",component:hf,redirect:TD()},{path:"collection/:collectionId/edit",component:V,props:!0},{path:"datasets/:datasetId/edit",component:he,props:!0},{path:"datasets/list",component:re},{path:"datasets/:datasetId/details",name:"DatasetDetails",component:Wt,props:!0},{path:"datasets/:datasetId/preview",component:Sp,props:e=>({src:`/datasets/${e.params.datasetId}/display/?preview=True`})},{path:"datasets/:datasetId/show_params",component:Wt,props:!0},{path:"datasets/:datasetId/error",component:Kt,props:!0},{path:"datatypes",component:SL},{path:"histories/import",component:xd},{path:"histories/citations",component:x,props:e=>({id:e.query.id,source:"histories"})},{path:"histories/rename",component:sn,props:e=>({url:`/history/rename?id=${e.query.id}`,redirect:"/histories/list"})},{path:"histories/sharing",component:MD,props:e=>({id:e.query.id,pluralName:"Histories",modelClass:"History"})},{path:"histories/permissions",component:sn,props:e=>({url:`/history/permissions?id=${e.query.id}`,redirect:"/histories/list"})},{path:"histories/view",component:Dl,props:e=>({id:e.query.id})},{path:"histories/view_multiple",component:dd,props:!0},{path:"histories/list_published",component:zl,props:e=>({...e.query})},{path:"histories/archived",component:AL},{path:"histories/:actionId",component:In,props:!0,redirect:TD()},{path:"histories/:historyId/export",get component(){return e.config.enable_celery_tasks?xo:kd},props:!0},{path:"histories/:historyId/archive",component:qL,props:!0},{path:"histories/:historyId/invocations",component:km,props:!0},{path:"interactivetool_entry_points/list",component:Ld},{path:"jobs/submission/success",component:ep,props:!0},{path:"jobs/:jobId/view",component:Ed,props:!0},{path:"pages/create",component:sn,props:e=>{let t="/page/create";const n=e.query.invocation_id;return n&&(t+=`?invocation_id=${n}`),{url:t,redirect:"/pages/list",active_tab:"user"}}},{path:"pages/edit",component:sn,props:e=>({url:`/page/edit?id=${e.query.id}`,redirect:"/pages/list",active_tab:"user"})},{path:"pages/sharing",component:MD,props:e=>({id:e.query.id,pluralName:"Pages",modelClass:"Page"})},{path:"pages/:actionId",component:xc,props:e=>({published:"list_published"==e.params.actionId})},{path:"storage/history/:historyId",name:"HistoryOverviewInAnalysis",component:yL,props:!0},{path:"tours",component:Cp},{path:"tours/:tourId",component:Lp,props:!0},{path:"tools/list",component:gp,props:e=>({...e.query})},{path:"tools/json",component:wp},{path:"user",component:tm,props:{enableQuotas:e.config.enable_quotas,userId:e.user.id},redirect:TD()},{path:"user/api_key",component:jp,redirect:TD()},{path:"user/cloud_auth",component:lf,redirect:TD()},{path:"user/external_ids",component:kf,redirect:DD(e.config.fixed_delegated_auth,"/")||TD()},{path:"user/notifications",component:eD,redirect:DD(!e.config.enable_notification_system,"/")||TD()},{path:"user/notifications/preferences",component:Yf,redirect:TD()},{path:"user/:formId",component:im,props:!0,redirect:TD()},{path:"visualizations",component:lm,props:e=>({datasetId:e.query.dataset_id})},{path:"visualizations/edit",component:sn,props:e=>({url:`/visualization/edit?id=${e.query.id}`,redirect:"/visualizations/list",active_tab:"visualization"})},{path:"visualizations/sharing",component:MD,props:e=>({id:e.query.id,pluralName:"Visualizations",modelClass:"Visualization"})},{path:"visualizations/list",component:_i,props:{config:vn}},{path:"visualizations/list_published",component:_i,props:{config:kn}},{path:"welcome/new",component:Kd},{path:"workflows/create",component:sn,props:{url:"/workflow/create",redirect:"/workflows/edit",active_tab:"workflow",submitTitle:"Create",submitIcon:"fa-check",cancelRedirect:"/workflows/list"}},{path:"workflows/export",component:e_,props:e=>({id:e.query.id})},{path:"workflows/import",component:a_},{path:"workflows/invocations",component:Xm},{path:"workflows/invocations/report",component:Vm,props:e=>({invocationId:e.query.id})},{path:"workflows/list_published",component:D_,props:e=>({published:!0})},{path:"workflows/list",component:D_,redirect:TD(),props:e=>({importMessage:e.query.message,importStatus:e.query.status,query:e.query.query})},{path:"workflows/run",component:Cg,props:t=>({config:e.config,query:{workflow_id:t.query.id}})},{path:"workflows/sharing",component:MD,props:e=>({id:e.query.id,pluralName:"Workflows",modelClass:"Workflow"})},{path:"workflows/trs_import",component:Hm,props:e=>({queryTrsServer:e.query.trs_server,queryTrsId:e.query.trs_id,queryTrsVersionId:e.query.trs_version,queryTrsUrl:e.query.trs_url,isRun:"true"==e.query.run_form})},{path:"workflows/trs_search",component:zm},{path:"workflows/:storedWorkflowId/invocations",component:Jm,props:!0}]}]});return t.beforeEach((async(e,t,n)=>{const i=function(e){if(e.matched.some((e=>!0===e.meta.requiresAdmin))){const e=(0,l.Bz)()?.user?.isAdmin();return!e}return!1}(e);if(i){const t=new Error(`Admin access required for '${e.path}'.`);t.name="AdminRequired",n(t)}const o=function(e){if(e.matched.some((e=>!0===e.meta.requiresRegisteredUser))){const e=(0,l.Bz)()?.user?.isAnonymous();return e}return!1}(e);if(o){const t=new Error(`Registered user access required for '${e.path}'.`);t.name="RegisteredUserRequired",n(t)}n()})),t.onError((e=>{t.push({name:"error",params:{error:e}})})),t}a.default.use(Ri.ZP),function(e){const t=e.prototype.push;e.prototype.push=function(e,n={}){const{title:i,force:o}=n;if(o&&(e=(0,en.c)(e,{__vkey__:Date.now()})),this.confirmation){if(!confirm("There are unsaved changes which will be lost."))return;this.confirmation=void 0}const a=(0,l.Bz)();if(!(i&&a.frame&&a.frame.active))return this.app.$emit("router-push"),t.call(this,e).catch((e=>{if("NavigationDuplicated"!==e.name)throw e}));a.frame.add({title:i,url:e})}}(Ri.ZP);const OD={methods:{async confirm(e,t={}){return this.$bvModal.msgBoxConfirm(e,{title:"Please Confirm",titleClass:"h-md",hideHeaderClose:!1,...t})}},render:()=>({})};class AD{constructor(){this.historyStore=(0,I.z)();const e=this.model=new(xn().Model)({}),t=(0,Us.v)();this.collection={each(n,i=""){t.getHistoryItems(e.id,i).forEach((e=>{n(new(xn().Model)(e))}))}},(0,Ws.UU)()}syncCurrentHistoryModel(e){this.model.id=e.id,this.model.set("name",e.name)}refreshContents(){}loadCurrentHistory(){this.historyStore.loadCurrentHistory()}switchToHistory(e){this.model.id=e,this.historyStore.setCurrentHistory(e)}async buildCollection(e,t,n=null,i=!1){let o=null;n=n||this.model.id,i?o=t:(o=new Map,t.models.forEach((e=>{o.set(e.id,e)})));const a=await pl(e,o,n,i);a&&(console.debug("Submitting collection build request.",a),await(0,bs.S5)({id:n},a))}}const ID={methods:{showToast(e,t,n,i){this.$bvToast.toast(e,{variant:n,title:t,href:i,toaster:"b-toaster-bottom-right",appendToast:!0,solid:!0})}},render:()=>({})};var PD=n(52480);class RD{constructor(e){e=e||{},this.counter=0,this.active=!1}getTab(){return{id:"enable-window-manager",icon:"fa-th",tooltip:(0,Ee.ZP)("Enable/Disable Window Manager"),visible:!0,onclick:()=>{this.active=!this.active}}}add(e){const t=(0,D.dq)(e.url);this.counter++;const n=this._build_url(t,{hide_panels:!0,hide_masthead:!0});PD.Z.new({title:e.title||"Window",url:n,index:850,onclose:()=>{this.counter--}})}beforeUnload(){return this.counter>0}_build_url(e,t){if(e)return e+=-1==e.indexOf("?")?"?":"&",Object.entries(t).forEach((([t,n])=>{e+=`${t}=${n}&`})),e}}const jD={__name:"DragGhost",setup(e){u.vI.add(h.XCy);const t=(0,Oo.b)(),n=(0,a.computed)((()=>{const e=t.getDragData();return e?.name??"Draggable"}));return{__sfc:!0,eventStore:t,name:n,FontAwesomeIcon:p.GN,TextShort:Io}}};const YD=(0,m.Z)(jD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{staticClass:"py-2 px-3 rounded",attrs:{id:"drag-ghost"}},[t(n.FontAwesomeIcon,{staticClass:"mr-1",attrs:{icon:"paper-plane"}}),e._v(" "),t(n.TextShort,{staticClass:"font-weight-bold",attrs:{text:n.name}})],1)}),[],!1,null,"33527f52",null).exports;const HD=(0,a.defineComponent)({__name:"BroadcastsOverlay",setup(e){const{activeBroadcasts:t}=(0,o.Jk)(ca());return{__sfc:!0,activeBroadcasts:t,BroadcastContainer:cx}}});const ND=(0,m.Z)(HD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.activeBroadcasts.length>0?t("div",[t(n.BroadcastContainer,{attrs:{options:{broadcasts:n.activeBroadcasts}}})],1):e._e()}),[],!1,null,null,null).exports;var FD=n(71603),BD=n(19189),$D=n(29852);var zD=n(30042),WD=n(9153),UD=n(32450),VD=n(26221);const qD={__name:"MastheadItem",props:{tab:{type:Object,default:null},toggle:{type:Boolean,default:!1},activeTab:{type:String,default:null}},emits:["click","open-url"],setup(e,{emit:t}){const n=e;a.default.use(zD.T),a.default.use(WD.D);const i=(0,a.getCurrentInstance)().proxy,o=(0,a.ref)(null),s=(0,a.computed)((()=>n.tab.menu)),r=(0,a.computed)((()=>`Please <a href="${(0,D.dq)("/login")}">log in or register</a> to use this feature.`)),l=(0,a.computed)((()=>{const e=n.tab.id==n.activeTab;return Object.fromEntries([["active",e],[n.tab.cls,!!n.tab.cls]])})),d=(0,a.computed)((()=>({"nav-icon":n.tab.icon,toggle:n.toggle}))),c=(0,a.computed)((()=>Object.fromEntries([["fa fa-fw",!0],[n.tab.icon,!!n.tab.icon]])));return{__sfc:!0,instance:i,emit:t,dropdown:o,props:n,menu:s,popoverNote:r,classes:l,linkClasses:d,iconClasses:c,open:function(e,n){e.onclick?(n.preventDefault(),e.onclick(),t("click")):e.disabled?(n.preventDefault(),i.$root.$emit("bv::hide::tooltip"),i.$root.$emit("bv::show::popover",e.id),setTimeout((()=>{i.$root.$emit("bv::hide::popover",e.id)}),3e3)):e.menu||(n.preventDefault(),t("open-url",{...e}))},BDropdownItem:qy.E,BNavItem:UD.r,BNavItemDropdown:VD.u,withPrefix:D.dq}}},ZD=qD;const GD=(0,m.Z)(ZD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.menu?t(n.BNavItemDropdown,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}},{name:"b-popover",rawName:"v-b-popover.manual.bottom",value:{id:e.tab.id,content:n.popoverNote,html:!0},expression:"{ id: tab.id, content: popoverNote, html: true }",modifiers:{manual:!0,bottom:!0}}],ref:"dropdown",class:n.classes,attrs:{id:e.tab.id,text:e.tab.title,href:"#",title:e.tab.tooltip},on:{show:function(t){return n.open(e.tab,t)}},scopedSlots:e._u([e.tab.icon?{key:"button-content",fn:function(){return[t("span",{staticClass:"sr-only"},[e._v(e._s(e.tab.tooltip||e.tab.id))]),e._v(" "),t("span",{class:n.iconClasses})]},proxy:!0}:null],null,!0)},[e._v(" "),e._l(e.tab.menu,(function(i,o){return[i.divider?t("div",{key:`divider-${o}`,staticClass:"dropdown-divider"}):!0!==i.hidden?t(n.BDropdownItem,{key:`item-${o}`,attrs:{href:n.withPrefix(i.url),target:i.target||"_parent",role:"menuitem",title:"",active:i.disabled,disabled:i.disabled},on:{click:function(e){return n.open(i,e)}}},[e._v("\n            "+e._s(i.title)+"\n        ")]):e._e()]}))],2):t(n.BNavItem,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}},{name:"b-popover",rawName:"v-b-popover.manual.bottom",value:{id:e.tab.id,content:n.popoverNote,html:!0},expression:"{ id: tab.id, content: popoverNote, html: true }",modifiers:{manual:!0,bottom:!0}}],class:n.classes,attrs:{id:e.tab.id,href:n.withPrefix(e.tab.url),target:e.tab.target||"_parent","link-classes":n.linkClasses,title:e.tab.tooltip},on:{click:function(t){return n.open(e.tab,t)}}},[e.tab.icon?[t("span",{staticClass:"sr-only"},[e._v(e._s(e.tab.tooltip||e.tab.id))]),e._v(" "),t("span",{class:n.iconClasses}),e._v(" "),e.toggle?t("span",{staticClass:"nav-note fa fa-check"}):e._e()]:[e._v("\n        "+e._s(e.tab.title)+"\n    ")]],2)}),[],!1,null,null,null).exports;const JD={name:"QuotaMeter",data(){return{usingString:this.l("Using")}},computed:{...(0,o.rn)(B_.F,["config"]),...(0,o.rn)(Xe.L,["currentUser","isAnonymous"]),hasQuota(){const e=this.config?.enable_quotas??!1,t="unlimited"!==this.currentUser?.quota??!1;return e&&t},usage(){return this.hasQuota?this.currentUser?.quota_percent??0:this.currentUser?.total_disk_usage??0},totalUsageString(){const e=this.currentUser?.total_disk_usage??0;return(0,fe.d3)(e,!0)},title(){let e="";return e=this.isAnonymous?this.l("Log in for details."):this.l("Click for details."),this.hasQuota?this.usingString+" "+this.totalUsageString+". "+e:e},variant(){return!this.hasQuota||this.usage<80?"success":this.usage<95?"warning":"danger"}}};const KD=(0,m.Z)(JD,(function(){var e=this,t=e._self._c;return t("div",[e.hasQuota?t("div",{staticClass:"quota-meter d-flex align-items-center"},[t("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"quota-progress",attrs:{disabled:e.isAnonymous,to:"/storage",title:e.title,"data-description":"storage dashboard link"}},[t("b-progress",{attrs:{max:100}},[t("b-progress-bar",{attrs:{"aria-label":"Quota usage",value:e.usage,variant:e.variant}})],1),e._v(" "),t("span",[e._v(e._s(e.usingString+" "+e.usage.toFixed(0))+"%")])],1)],1):t("div",{staticClass:"quota-text d-flex align-items-center"},[t("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"ml-auto",attrs:{to:"/storage",disabled:e.isAnonymous,title:e.title,"data-description":"storage dashboard link"}},[e._v("\n            "+e._s(e.usingString+" "+e.totalUsageString)+"\n        ")])],1)])}),[],!1,null,"961919fe",null).exports;const XD=(0,a.defineComponent)({__name:"NotificationsBell",props:{tooltipPlacement:{type:String,default:"right"}},setup(e){u.vI.add(h.qmU);const t=(0,Nn.tv)(),{totalUnreadCount:n}=(0,o.Jk)(ha());return{__sfc:!0,router:t,totalUnreadCount:n,onClick:function(){t.push("/user/notifications")},faBell:h.qmU,FontAwesomeIcon:p.GN,BNavItem:UD.r,Popper:No}}});const QD=(0,m.Z)(XD,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.Popper,{attrs:{placement:e.tooltipPlacement},scopedSlots:e._u([{key:"reference",fn:function(){return[t(n.BNavItem,{attrs:{id:"activity-notifications"},on:{click:n.onClick}},[t("span",{staticClass:"position-relative"},[n.totalUnreadCount?t("span",{staticClass:"indicator"}):e._e(),e._v(" "),t(n.FontAwesomeIcon,{staticClass:"nav-icon",attrs:{icon:n.faBell}})],1)])]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"px-2 py-1"},[e._v("\n        "+e._s(n.totalUnreadCount?`You have ${n.totalUnreadCount} unread notifications`:"You have no unread notifications")+"\n    ")])])}),[],!1,null,"62ec1e8f",null).exports,eE={__name:"Masthead",props:{tabs:{type:Array,default:()=>[]},brand:{type:String,default:null},initialActiveTab:{type:String,default:"analysis"},logoUrl:{type:String,default:null},logoSrc:{type:String,default:null},logoSrcSecondary:{type:String,default:null},windowTab:{type:Object,default:null}},emits:["open-url"],setup(e,{emit:t}){const n=e,{isAnonymous:i,showActivityBar:s}=(0,o.Jk)((0,Xe.L)()),r=(0,Nn.yj)(),{config:l,isConfigLoaded:d}=(0,c.Z)(),u=(0,a.ref)(n.initialActiveTab),h=(0,a.ref)([]),p=(0,a.ref)(!1);let f;const m=(0,a.reactive)({id:"interactive",url:"/interactivetool_entry_points/list",tooltip:"See Running Interactive Tools",icon:"fa-cogs",hidden:!0});function _(){const e=r.path;u.value=function(e,t){let n=null;for(const i of t){const t=i.id;if(e==i.url){n=t;break}if(i.menu)for(const o of i.menu)if(e==o.url){n=t;break}}return n}(e,n.tabs)||u.value}function v(e){m.hidden=!e}return(0,a.watch)((()=>r.path),(()=>{_()})),(0,a.onBeforeMount)((()=>{f=(0,Vo.B)(),f.ensurePollingEntryPoints(),f.$subscribe(((e,t)=>{v(t.entryPoints.length>0)}))})),(0,a.onMounted)((()=>{var e;e=h.value,qh.Z.load({type:"masthead",callback:function(t){t.forEach((t=>{if(t.activate){const n={id:t.id,icon:t.config.icon,url:t.config.url,tooltip:t.config.tooltip,onclick:t.config.function&&new Function(t.config.function),target:"_parent"};e.push(n),fe.ZP.appendScriptStyle(t)}}))}}),_()})),{__sfc:!0,isAnonymous:i,showActivityBar:s,route:r,config:l,isConfigLoaded:d,emit:t,props:n,activeTab:u,extensionTabs:h,windowToggle:p,entryPointStore:f,itsMenu:m,setActiveTab:_,onWindowToggle:function(){p.value=!p.value},updateVisibility:v,BNavbar:FD.E,BNavbarBrand:BD.D,BNavbarNav:$D.o,withPrefix:D.dq,MastheadItem:GD,QuotaMeter:KD,NotificationsBell:QD}}},tE=eE;var nE=(0,m.Z)(tE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BNavbar,{staticClass:"justify-content-between",attrs:{id:"masthead",type:"dark",role:"navigation","aria-label":"Main"}},[t(n.BNavbarNav,[t(n.BNavbarBrand,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2 mr-2",attrs:{title:"Home","aria-label":"homepage",href:n.withPrefix(e.logoUrl)}},[t("img",{attrs:{alt:"logo",src:n.withPrefix(e.logoSrc)}}),e._v(" "),e.logoSrcSecondary?t("img",{attrs:{alt:"logo",src:n.withPrefix(e.logoSrcSecondary)}}):e._e()]),e._v(" "),e.brand?t("span",{staticClass:"navbar-text px-2"},[e._v("\n            "+e._s(e.brand)+"\n        ")]):e._e()],1),e._v(" "),t(n.BNavbarNav,[e._l(n.props.tabs,(function(e,i){return t(n.MastheadItem,{directives:[{name:"show",rawName:"v-show",value:!0!==e.hidden,expression:"tab.hidden !== true"}],key:`tab-${i}`,attrs:{tab:e,"active-tab":n.activeTab},on:{"open-url":function(e){return n.emit("open-url",e)}}})})),e._v(" "),t(n.MastheadItem,{directives:[{name:"show",rawName:"v-show",value:!0!==n.itsMenu.hidden,expression:"itsMenu.hidden !== true"}],key:"its-tab",attrs:{tab:n.itsMenu,"active-tab":n.activeTab},on:{"open-url":function(e){return n.emit("open-url",e)}}}),e._v(" "),e._l(n.extensionTabs,(function(e,i){return t(n.MastheadItem,{directives:[{name:"show",rawName:"v-show",value:!0!==e.hidden,expression:"tab.hidden !== true"}],key:`extension-tab-${i}`,attrs:{tab:e,"active-tab":n.activeTab},on:{"open-url":function(e){return n.emit("open-url",e)}}})})),e._v(" "),e.windowTab?t(n.MastheadItem,{attrs:{tab:e.windowTab,toggle:n.windowToggle},on:{click:n.onWindowToggle}}):e._e(),e._v(" "),!n.isAnonymous&&n.isConfigLoaded&&n.config.enable_notification_system&&!n.showActivityBar?t("BNavItem",{attrs:{id:"notifications-bell"}},[t(n.NotificationsBell,{attrs:{"tooltip-placement":"bottom"}})],1):e._e()],2),e._v(" "),t(n.QuotaMeter)],1)}),[],!1,null,"0e0e1bf4",null);const iE=nE.exports;var oE=n(23460),aE=n(27521);const sE={dbKey:"?",deferred:!1,enabled:!0,extension:"auto",fileContent:"",fileData:null,fileMode:"",fileName:"",filePath:"",fileSize:0,fileUri:null,info:null,optional:!1,outputs:null,percentage:0,spaceToTab:!1,status:"init",toPosixLines:!0};const rE={__name:"UploadOption",props:{title:{type:String,required:!0},value:{type:Boolean,required:!0}},emits:"click",setup:(e,{emit:t})=>(u.vI.add(h.a3n,zo.e3),{__sfc:!0,emit:t,FontAwesomeIcon:p.GN})},lE=rE;const dE=(0,m.Z)(lE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("tr",{on:{click:function(e){return n.emit("click")}}},[t("td",[e.value?t(n.FontAwesomeIcon,{staticClass:"px-2",attrs:{icon:"fas fa-check-square","fa-fw":""}}):t(n.FontAwesomeIcon,{staticClass:"px-2",attrs:{icon:"far fa-square","fa-fw":""}})],1),e._v(" "),t("td",{staticClass:"text-left"},[t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"pr-2"},[e._v(e._s(e.title))])])])}),[],!1,null,null,null).exports,cE={__name:"UploadSettings",props:{deferred:{type:Boolean,default:null},disabled:{type:Boolean,default:!1},spaceToTab:{type:Boolean,default:null},toPosixLines:{type:Boolean,default:null}},emits:["input"],setup:(e,{emit:t})=>(u.vI.add(h.b7W),{__sfc:!0,emit:t,FontAwesomeIcon:p.GN,UploadOption:dE,Popper:No})},uE=cE;const hE=(0,m.Z)(uE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.Popper,{attrs:{placement:"bottom",title:"Upload Configuration",mode:"primary-title",trigger:"click-to-open"},scopedSlots:e._u([{key:"reference",fn:function(){return[t(n.FontAwesomeIcon,{staticClass:"cursor-pointer",attrs:{icon:"fa-cog"}})]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"upload-settings-content px-2 py-2 no-highlight"},[t("table",{staticClass:"upload-settings-table grid"},[t("tbody",[t(n.UploadOption,{staticClass:"upload-space-to-tab",attrs:{title:"Convert spaces to tabs",value:e.spaceToTab},on:{click:function(e){return n.emit("input","spaceToTab")}}}),e._v(" "),t(n.UploadOption,{staticClass:"upload-to-posix-lines",attrs:{title:"Use POSIX standard",value:e.toPosixLines},on:{click:function(e){return n.emit("input","toPosixLines")}}}),e._v(" "),null!==e.deferred?t(n.UploadOption,{staticClass:"upload-deferred",attrs:{title:"Defer dataset resolution",value:e.deferred},on:{click:function(e){return n.emit("input","deferred")}}}):e._e()],1)]),e._v(" "),e.disabled?t("div",{staticClass:"upload-settings-cover"}):e._e()])])}),[],!1,null,null,null).exports,pE={__name:"CompositeRow",props:{fileContent:{type:String,required:!0},fileDescription:{type:String,default:null},fileMode:{type:String,required:!0},fileName:{type:String,required:!0},fileSize:{type:Number,required:!0},index:{type:String,required:!0},info:{type:String,default:null},hasRemoteFiles:{type:Boolean,default:!1},optional:{type:Boolean,required:!0},percentage:{type:Number,required:!0},spaceToTab:{type:Boolean,required:!0},status:{type:String,required:!0},toPosixLines:{type:Boolean,required:!0}},emits:["input"],setup(e,{emit:t}){const n=e;u.vI.add(h.LEp,h.Xcf,h.WV2,h.cC_,h.aNY);const i=(0,a.computed)((()=>"running"===n.status)),o=(0,a.ref)(!1),s=(0,a.ref)(null);return{__sfc:!0,props:n,emit:t,isDisabled:i,isDragging:o,uploadFile:s,inputFileContent:function(e){t("input",n.index,{fileContent:e,fileSize:e.length})},inputDialog:function(e){e&&e.length>0&&t("input",n.index,{fileData:e[0],fileMode:"local",fileName:e[0].name,filePath:null,fileSize:e[0].size})},inputPaste:function(){t("input",n.index,{fileData:null,fileMode:"new",fileName:I_.LN,filePath:null,fileSize:0})},inputRemoteFiles:function(){(0,qu.hy)((e=>{t("input",n.index,{fileData:null,fileMode:"url",fileName:e.label,filePath:e.url,fileSize:e.size})}),{multiple:!1})},inputSettings:function(e){const i={};i[e]=!n[e],t("input",n.index,i)},onDrop:function(e){o.value=!1;const i=e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files[0];i&&t("input",n.index,{fileData:i,fileMode:"local",fileName:i.name,filePath:null,fileSize:i.size})},FontAwesomeIcon:p.GN,BDropdown:Vy.R,BDropdownItem:qy.E,bytesToString:fe.d3,UploadSettings:hE}}},fE=pE;const mE=(0,m.Z)(fE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"upload-row rounded my-1 p-2",class:[`upload-${e.status}`,n.isDragging&&"bg-warning"],attrs:{id:`upload-row-${e.index}`},on:{dragover:function(e){e.preventDefault(),n.isDragging=!0},dragleave:function(e){e.preventDefault(),n.isDragging=!1},drop:function(e){return e.preventDefault(),n.onDrop.apply(null,arguments)}}},[t("div",{staticClass:"d-flex justify-content-around"},[t("div",[t(n.BDropdown,{staticClass:"upload-source",attrs:{id:`upload-type-${e.index}`,disabled:n.isDisabled,text:"Select",variant:e.fileSize>0?"secondary":"primary"}},[t(n.BDropdownItem,{on:{click:function(e){return n.uploadFile.click()}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-laptop"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Choose local file")])],1),e._v(" "),e.hasRemoteFiles?t(n.BDropdownItem,{on:{click:n.inputRemoteFiles}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-folder-open"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Choose remote file")])],1):e._e(),e._v(" "),t(n.BDropdownItem,{on:{click:n.inputPaste}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-edit"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Paste/Fetch data")])],1)],1)],1),e._v(" "),t("div",{staticClass:"upload-title"},[e._v("\n            "+e._s(e.fileDescription)+"\n        ")]),e._v(" "),t("div",{staticClass:"upload-title"},[e._v("\n            "+e._s(e.fileName||"-")+"\n        ")]),e._v(" "),t("div",{staticClass:"upload-size"},[e._v("\n            "+e._s(n.bytesToString(e.fileSize))+"\n        ")]),e._v(" "),t(n.UploadSettings,{attrs:{disabled:n.isDisabled,"to-posix-lines":e.toPosixLines,"space-to-tab":e.spaceToTab},on:{input:n.inputSettings}}),e._v(" "),t("div",{staticClass:"upload-progress"},[t("div",{staticClass:"progress"},[t("div",{staticClass:"upload-progress-bar progress-bar progress-bar-success",style:{width:`${e.percentage}%`}}),e._v(" "),t("div",{staticClass:"upload-percentage"},[e._v(e._s(e.percentage)+"%")])])]),e._v(" "),t("div",[["running","queued"].includes(e.status)?t(n.FontAwesomeIcon,{attrs:{icon:"fa-spinner",spin:"","fixed-width":""}}):"error"===e.status?t(n.FontAwesomeIcon,{attrs:{icon:"fa-exclamation-triangle","fixed-width":""}}):e.fileSize>0?t(n.FontAwesomeIcon,{attrs:{icon:"fa-check","fixed-width":""}}):e.optional?t(n.FontAwesomeIcon,{staticClass:"text-info",attrs:{icon:"fa-check","fixed-width":""}}):t(n.FontAwesomeIcon,{attrs:{icon:"fa-exclamation","fixed-width":""}})],1)],1),e._v(" "),e.info?t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"upload-text-message font-weight-bold"},[e._v("\n        "+e._s(e.info)+"\n    ")]):e._e(),e._v(" "),"new"==e.fileMode?t("div",[t("div",{staticClass:"upload-text-message"},[e._v("\n            Download data from the web by entering URLs (one per line) or directly paste content.\n        ")]),e._v(" "),t("b-textarea",{staticClass:"upload-text-content form-control",attrs:{value:e.fileContent,disabled:n.isDisabled},on:{input:n.inputFileContent}})],1):e._e(),e._v(" "),t("input",{ref:"uploadFile",attrs:{type:"file"},on:{change:function(e){return n.inputDialog(e.target.files)}}})])}),[],!1,null,null,null).exports;const _E={__name:"UploadSelect",props:{id:{type:String,default:`upload-settings-select-${(0,fe.hQ)()}`},disabled:{type:Boolean,default:!1},options:{type:Array,required:!0},placeholder:{type:String,default:""},value:{type:String,default:null},what:{type:String,default:null},searchable:{type:Boolean,default:!0},warn:{type:Boolean,default:!1}},emits:["input"],setup(e,{emit:t}){const n=e,i=(0,a.computed)({get:()=>n.options.find((e=>e.id===n.value)),set(e){t("input",e.id)}});return{__sfc:!0,props:n,emit:t,currentValue:i,Multiselect:j()}}},vE=_E;const gE=(0,m.Z)(vE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.Multiselect,{staticClass:"upload-settings-select rounded",attrs:{id:e.id,"deselect-label":"",disabled:e.disabled,searchable:e.searchable,label:"text",options:e.options,placeholder:e.placeholder,"select-label":"","selected-label":"","track-by":"id"},scopedSlots:e._u([{key:"singleLabel",fn:function({option:n}){return t("span",{class:{"selection-warning":e.warn}},[e._v("\n        "+e._s(n.text)+"\n    ")])}}]),model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{slot:"noResult"},slot:"noResult"},[e._v("No matching "+e._s(e.what)+"s found.")])])}),[],!1,null,null,null).exports,yE={__name:"CompositeBox",props:{defaultDbKey:{type:String,required:!0},effectiveExtensions:{type:Array,required:!0},fileSourcesConfigured:{type:Boolean,required:!0},ftpUploadSite:{type:String,default:null},hasCallback:{type:Boolean,default:!1},historyId:{type:String,default:null},listDbKeys:{type:Array,required:!0}},setup(e,{expose:t}){const n=e,i=(0,a.ref)(null),o=(0,a.ref)(n.defaultDbKey),s=(0,a.ref)({}),r=(0,a.computed)((()=>{const e=h.value.find((e=>"init"===e.status&&!e.optional&&0===e.fileSize));return!d.value&&h.value.length>0&&!e})),l=(0,a.computed)((()=>n.fileSourcesConfigured||!!n.ftpUploadSite)),d=(0,a.computed)((()=>{const e=p.value[0];return e&&"running"===e.status})),c=(0,a.computed)((()=>{const e=n.effectiveExtensions.filter((e=>e.composite_files));return e.unshift({id:null,text:"Select"}),e})),u=(0,a.computed)((()=>0===p.value.length)),h=(0,a.computed)((()=>Object.values(s.value))),p=(0,a.computed)((()=>Object.keys(s.value)));function f(e){h.value.forEach((t=>{t.info=e,t.status="error"}))}function m(e){h.value.forEach((t=>{t.percentage=e}))}function _(){h.value.forEach((e=>{e.percentage=100,e.status="success"}))}function v(){h.value.forEach((e=>{e.percentage=0,e.status="init"}))}return t({enableStart:r,listExtensions:c,showHelper:u}),{__sfc:!0,props:n,extension:i,dbKey:o,uploadItems:s,enableStart:r,hasRemoteFiles:l,isRunning:d,listExtensions:c,showHelper:u,uploadValues:h,uploadKeys:p,eventError:f,eventInput:function(e,t){const n=s.value[e];Object.entries(t).forEach((([e,t])=>{n[e]=t})),v()},eventProgress:m,eventReset:function(){h.value.find((e=>"running"===e.status))||(s.value={},o.value=n.defaultDbKey)},eventStart:function(){h.value.forEach((e=>{e.dbKey=o.value,e.extension=i.value}));try{(0,aE.N)({data:(0,oE.Dh)(h.value,n.historyId,!0),error:f,progress:m,success:_,isComposite:!0})}catch(e){f(String(e))}},eventSuccess:_,inputDbkey:function(e){o.value=e,v()},inputExtension:function(e){i.value=e,s.value={};let t=0;const n=c.value.find((t=>t.id===e));n&&n.composite_files&&n.composite_files.forEach((e=>{const n=String(t++),i={...sE,description:e.description||e.name,optional:e.optional};a.default.set(s.value,n,i)})),v()},restoreStatus:v,BButton:jn.T,CompositeRow:mE,UploadSelect:gE}}};const bE=(0,m.Z)(yE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"upload-wrapper"},[t("div",{staticClass:"upload-header"},[e._v(" ")]),e._v(" "),t("div",{staticClass:"upload-box"},[t("div",{directives:[{name:"show",rawName:"v-show",value:n.showHelper,expression:"showHelper"}],staticClass:"upload-helper"},[e._v("Select a composite type")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!n.showHelper,expression:"!showHelper"}]},e._l(n.uploadItems,(function(e,i){return t(n.CompositeRow,{key:i,attrs:{index:i,"file-description":e.description,"file-content":e.fileContent,"file-mode":e.fileMode,"file-name":e.fileName,"file-size":e.fileSize,info:e.info,"has-remote-files":n.hasRemoteFiles,optional:e.optional,percentage:e.percentage,"space-to-tab":e.spaceToTab,status:e.status,"to-posix-lines":e.toPosixLines},on:{input:n.eventInput}})})),1)]),e._v(" "),t("div",{staticClass:"upload-footer"},[t("span",{staticClass:"upload-footer-title"},[e._v("Composite Type:")]),e._v(" "),t(n.UploadSelect,{staticClass:"upload-footer-extension",attrs:{value:null,options:n.listExtensions,disabled:n.isRunning,what:"file type"},on:{input:n.inputExtension}}),e._v(" "),t("span",{staticClass:"upload-footer-title"},[e._v("Reference:")]),e._v(" "),t(n.UploadSelect,{attrs:{what:"reference",value:n.dbKey,options:e.listDbKeys,disabled:n.isRunning},on:{input:n.inputDbkey}})],1),e._v(" "),t("div",{staticClass:"upload-buttons d-flex justify-content-end"},[t(n.BButton,{attrs:{id:"btn-start",disabled:!n.enableStart,title:"Start",variant:n.enableStart?"primary":null},on:{click:n.eventStart}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Start")])]),e._v(" "),t(n.BButton,{attrs:{id:"btn-reset",title:"Reset"},on:{click:n.eventReset}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Reset")])]),e._v(" "),t(n.BButton,{attrs:{id:"btn-close",title:"Close"},on:{click:function(t){return e.$emit("dismiss")}}},[e.hasCallback?t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Close")]):t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Cancel")])])],1)])}),[],!1,null,null,null).exports;class wE{constructor(e){this.opts={announce:e=>{},get:e=>{},progress:(e,t)=>{},success:(e,t)=>{},warning:(e,t)=>{},error:(e,t)=>{console.error(t)},complete:()=>{},multiple:!0,...e},this.queue=new Map,this.nextIndex=0,this.fileSet=new Set,this.isRunning=!1,this.isPaused=!1}add(e){e&&e.length&&!this.isRunning&&Array.from(e).forEach((e=>{const t=e.name+e.size;if("new"===e.mode||!this.fileSet.has(t)){this.fileSet.add(t);const n=String(this.nextIndex++);this.queue.set(n,e),this.opts.announce(n,e)}}))}configure(e){return this.opts=Object.assign(this.opts,e),this.opts}remove(e){const t=this.queue.get(e),n=t.name+t.size;this.queue.delete(e)&&this.fileSet.delete(n)}reset(){this.queue.clear(),this.fileSet.clear()}get size(){return this.queue.size}start(){this.isRunning||(this.isRunning=!0,this._processUrls(),this._process())}stop(){this.isPaused=!0}_process(){if(0===this.size||this.isPaused)return this.isRunning=!1,this.isPaused=!1,void this.opts.complete();this.isRunning=!0;const e=this._processIndex();try{this.remove(e);const t=(0,oE.Dh)([this.opts.get(e)],this.opts.historyId);this._processSubmit(e,t)}catch(t){this.opts.error(e,String(t)),this._process()}}_processUrls(){const e=[];for(const t of this.queue.keys()){const n=this.opts.get(t);"queued"===n.status&&"url"===n.fileMode&&(e.push({index:t,...n}),this.remove(t))}if(e.length>0)try{const t=(0,oE.Dh)(e,this.opts.historyId);(0,aE.y)(t,{success:t=>{e.forEach((e=>{this.opts.success(e.index,t)}))},error:t=>{e.forEach((e=>{this.opts.error(e.index,t)}))}})}catch(t){e.forEach((e=>{this.opts.error(e.index,String(t))}))}}_processIndex(){return this.queue.keys().next().value}_processSubmit(e,t){(0,aE.N)({data:t,success:t=>{this.opts.success(e,t),this._process()},warning:t=>{this.opts.warning(e,t)},error:t=>{this.opts.error(e,t),this._process()},progress:t=>{this.opts.progress(e,t)}})}}const kE={__name:"UploadExtension",props:{extension:{type:String,default:null},listExtensions:{type:Array,default:null}},setup(e){const t=e;u.vI.add(h.wn1);const n=(0,a.computed)((()=>(0,I_.xc)(t.listExtensions,t.extension)));return{__sfc:!0,props:t,details:n,FontAwesomeIcon:p.GN,Popper:No}}};const CE=(0,m.Z)(kE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.Popper,{attrs:{placement:"bottom",mode:"light"},scopedSlots:e._u([{key:"reference",fn:function(){return[t(n.FontAwesomeIcon,{attrs:{icon:"fa-search"}})]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"p-2"},[n.details&&n.details.description?t("div",[e._v("\n            "+e._s(n.details.description)+"\n            "),n.details.descriptionUrl?t("div",[e._v("\n                 ("),t("a",{attrs:{href:n.details.descriptionUrl,target:"_blank"}},[e._v("read more")]),e._v(")\n            ")]):e._e()]):t("div",[e._v("There is no description available for this file extension.")])])])}),[],!1,null,null,null).exports,xE={__name:"DefaultRow",props:{deferred:{type:Boolean,default:null},extension:{type:String,required:!0},fileContent:{type:String,required:!0},fileMode:{type:String,required:!0},fileName:{type:String,required:!0},fileSize:{type:Number,required:!0},dbKey:{type:String,required:!0},index:{type:String,required:!0},info:{type:String,default:null},listDbKeys:{type:Array,default:null},listExtensions:{type:Array,default:null},percentage:{type:Number,required:!0},spaceToTab:{type:Boolean,required:!0},status:{type:String,required:!0},toPosixLines:{type:Boolean,required:!0}},emits:["input","remove"],setup(e,{emit:t}){const n=e;u.vI.add(h.Xcf,h.aNY,h.cC_);const i=(0,a.computed)((()=>"init"!==n.status));return{__sfc:!0,props:n,emit:t,isDisabled:i,inputExtension:function(e){t("input",n.index,{extension:e})},inputFileContent:function(e){t("input",n.index,{fileContent:e,fileSize:e.length})},inputFileName:function(e){t("input",n.index,{fileName:e})},inputDbKey:function(e){t("input",n.index,{dbKey:e})},inputSettings:function(e){const i={};i[e]=!n[e],t("input",n.index,i)},removeUpload:function(){-1!==["init","success","error"].indexOf(n.status)&&t("remove",n.index)},FontAwesomeIcon:p.GN,bytesToString:fe.d3,UploadExtension:CE,UploadSelect:gE,UploadSettings:hE}}},SE=xE;const ME=(0,m.Z)(SE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"upload-row rounded my-1 p-2",class:`upload-${e.status}`,attrs:{id:`upload-row-${e.index}`}},[t("div",{staticClass:"d-flex justify-content-around"},[t("div",["new"==e.fileMode?t(n.FontAwesomeIcon,{attrs:{icon:"fa-edit","fixed-width":""}}):e._e(),e._v(" "),"local"==e.fileMode?t(n.FontAwesomeIcon,{attrs:{icon:"fa-laptop","fixed-width":""}}):e._e(),e._v(" "),"url"==e.fileMode?t(n.FontAwesomeIcon,{attrs:{icon:"fa-folder-open","fixed-width":""}}):e._e()],1),e._v(" "),t("b-input",{staticClass:"upload-title p-1 border rounded",attrs:{value:e.fileName,disabled:n.isDisabled},on:{input:n.inputFileName}}),e._v(" "),t("div",{staticClass:"upload-size"},[e._v("\n            "+e._s(n.bytesToString(e.fileSize))+"\n        ")]),e._v(" "),null!==e.listExtensions?t(n.UploadSelect,{staticClass:"upload-extension",attrs:{value:e.extension,disabled:n.isDisabled,options:e.listExtensions,placeholder:"Select Type",what:"file type"},on:{input:n.inputExtension}}):e._e(),e._v(" "),null!==e.listExtensions?t(n.UploadExtension,{attrs:{extension:e.extension,"list-extensions":e.listExtensions}}):e._e(),e._v(" "),null!==e.listDbKeys?t(n.UploadSelect,{staticClass:"upload-genome",attrs:{value:e.dbKey,disabled:n.isDisabled,options:e.listDbKeys,placeholder:"Select Reference",what:"reference"},on:{input:n.inputDbKey}}):e._e(),e._v(" "),t(n.UploadSettings,{staticClass:"upload-settings",attrs:{deferred:e.deferred,disabled:n.isDisabled,"to-posix-lines":e.toPosixLines,"space-to-tab":e.spaceToTab},on:{input:n.inputSettings}}),e._v(" "),t("div",{staticClass:"upload-progress"},[t("div",{staticClass:"progress"},[t("div",{staticClass:"upload-progress-bar progress-bar progress-bar-success",style:{width:`${e.percentage}%`}}),e._v(" "),t("div",{staticClass:"upload-percentage"},[e._v(e._s(e.percentage)+"%")])])]),e._v(" "),t("div",[["running","queued"].includes(e.status)?t(n.FontAwesomeIcon,{attrs:{icon:"fa-spinner",spin:""}}):"error"===e.status?t(n.FontAwesomeIcon,{staticClass:"cursor-pointer",attrs:{icon:"fa-exclamation-triangle","fixed-width":""},on:{click:n.removeUpload}}):"init"===e.status?t(n.FontAwesomeIcon,{staticClass:"cursor-pointer",attrs:{icon:"fa-trash","fixed-width":""},on:{click:n.removeUpload}}):"success"===e.status?t(n.FontAwesomeIcon,{staticClass:"cursor-pointer",attrs:{icon:"fa-check","fixed-width":""},on:{click:n.removeUpload}}):t(n.FontAwesomeIcon,{attrs:{icon:"fa-exclamation"}})],1)],1),e._v(" "),e.info?t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"upload-text-message font-weight-bold"},[e._v("\n        "+e._s(e.info)+"\n    ")]):e._e(),e._v(" "),"new"==e.fileMode?t("div",[t("div",{staticClass:"upload-text-message"},[e._v("\n            Download data from the web by entering URLs (one per line) or directly paste content.\n        ")]),e._v(" "),t("b-textarea",{staticClass:"upload-text-content form-control",attrs:{value:e.fileContent,disabled:n.isDisabled},on:{input:n.inputFileContent}})],1):e._e()])}),[],!1,null,null,null).exports;const TE={__name:"UploadBox",emits:["add"],setup(e,{emit:t}){const n=(0,a.ref)(!1);return{__sfc:!0,isDragging:n,emit:t,onDrop:function(e){n.value=!1,e.dataTransfer&&t("add",e.dataTransfer.files)}}}},LE=TE;const DE=(0,m.Z)(LE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"upload-box",class:{highlight:n.isDragging},on:{dragover:function(e){e.preventDefault(),n.isDragging=!0},dragleave:function(e){e.preventDefault(),n.isDragging=!1},drop:function(e){return e.preventDefault(),n.onDrop.apply(null,arguments)}}},[e._t("default")],2)}),[],!1,null,"268b5252",null).exports;const EE={__name:"UploadSelectExtension",props:{disabled:{type:Boolean,default:!1},listExtensions:{type:Array,required:!0},value:{type:String,default:null}},emits:["input"],setup(e,{emit:t}){const n=e;u.vI.add(h.RLE);const i=(0,a.computed)((()=>(0,I_.xc)(n.listExtensions,n.value))),o=(0,a.computed)((()=>i.value.upload_warning));return{__sfc:!0,props:n,emit:t,details:i,warnText:o,FontAwesomeIcon:p.GN,UploadExtension:CE,UploadSelect:gE,Popper:No}}},OE=EE;const AE=(0,m.Z)(OE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{attrs:{title:""}},[t(n.UploadSelect,{attrs:{value:e.value,disabled:e.disabled,options:e.listExtensions,what:"file type",placeholder:"Select Type",warn:!!n.warnText},on:{input:e=>n.emit("input",e)}}),e._v(" "),n.warnText?t(n.Popper,{attrs:{placement:"bottom",mode:"light"},scopedSlots:e._u([{key:"reference",fn:function(){return[t(n.FontAwesomeIcon,{staticClass:"selection-warning",attrs:{icon:"fa-exclamation-circle"}})]},proxy:!0}],null,!1,1288797898)},[e._v(" "),t("div",{staticClass:"p-2"},[e._v("\n            "+e._s(n.warnText)+"\n        ")])]):e._e(),e._v(" "),t(n.UploadExtension,{attrs:{extension:e.value,"list-extensions":e.listExtensions}})],1)}),[],!1,null,"7aa3fa0a",null).exports,IE={__name:"DefaultBox",props:{chunkUploadSize:{type:Number,required:!0},defaultDbKey:{type:String,required:!0},defaultExtension:{type:String,required:!0},effectiveExtensions:{type:Array,required:!0},fileSourcesConfigured:{type:Boolean,required:!0},ftpUploadSite:{type:String,default:null},historyId:{type:String,required:!0},multiple:{type:Boolean,default:!0},hasCallback:{type:Boolean,default:!1},lazyLoad:{type:Number,default:50},listDbKeys:{type:Array,required:!0},isCollection:{type:Boolean,default:!1}},emits:["dismiss","progress"],setup(e,{expose:t,emit:n}){const i=e;u.vI.add(h.kZ_,h.Xcf,h.cC_,h.aNY);const o=(0,a.ref)("list"),s=(0,a.ref)(0),r=(0,a.ref)(0),d=(0,a.ref)(0),c=(0,a.ref)(0),f=(0,a.ref)(i.defaultExtension),m=(0,a.ref)(i.defaultDbKey),_=(0,a.ref)(!1),v=(0,a.ref)(0),g=(0,a.ref)(null),y=(0,a.ref)({}),b=(0,a.ref)(0),w=(0,a.computed)((()=>s.value+c.value+r.value)),k=(0,a.computed)((()=>!M.value&&0==s.value&&c.value>0&&0==r.value)),C=(0,a.computed)((()=>!M.value&&w.value>0)),x=(0,a.computed)((()=>!M.value&&s.value>0)),S=(0,a.computed)((()=>!M.value&&(i.multiple||0==w.value))),M=(0,a.computed)((()=>d.value>0)),T=(0,a.computed)((()=>i.fileSourcesConfigured||!!i.ftpUploadSite)),L=(0,a.computed)((()=>i.historyId)),D=(0,a.computed)((()=>i.effectiveExtensions.filter((e=>!e.composite_files)))),E=(0,a.computed)((()=>0===Object.keys(y.value).length)),O=(0,a.computed)((()=>Object.values(y.value))),A=(0,a.computed)((()=>I()));function I(){return new wE({announce:R,chunkSize:i.chunkUploadSize,complete:j,error:Y,get:e=>y.value[e],historyId:L.value,multiple:i.multiple,progress:H,success:F,warning:B})}function P(e,t=!1){M.value||(!t&&i.multiple||N(),i.multiple?A.value.add(e):e.length>0&&A.value.add([e[0]]))}function R(e,t){s.value++;const n={...sE,id:e,dbKey:m.value,extension:f.value,fileData:t,fileMode:t.mode||"local",fileName:t.name,filePath:t.path,fileSize:t.size,fileUri:t.uri};a.default.set(y.value,e,n)}function j(){O.value.forEach((e=>{"queued"===e.status&&(e.status="init")})),d.value=0,_.value=!1}function Y(e,t){const i=y.value[e];i.percentage=100,i.status="error",i.info=t,v.value+=100*i.fileSize,s.value--,r.value++,n("progress",$(100,i.fileSize),"danger")}function H(e,t){const i=y.value[e];i.percentage=t,n("progress",$(t,i.fileSize))}function N(){M.value||(s.value=0,c.value=0,r.value=0,A.value.reset(),y.value={},f.value=i.defaultExtension,m.value=i.defaultDbKey,n("progress",0))}function F(e,t){var i=y.value[e];i.percentage=100,i.status="success",i.outputs=t.outputs||t.data.outputs||{},n("progress",$(100,i.fileSize)),v.value+=100*i.fileSize,s.value--,c.value++}function B(e,t){const n=y.value[e];n.status="warning",n.info=t}function $(e,t){return(v.value+e*t)/b.value}return t({addFiles:P,counterAnnounce:s,listExtensions:D,showHelper:E}),{__sfc:!0,props:i,emit:n,collectionType:o,counterAnnounce:s,counterError:r,counterRunning:d,counterSuccess:c,extension:f,dbKey:m,queueStopping:_,uploadCompleted:v,uploadFile:g,uploadItems:y,uploadSize:b,counterNonRunning:w,enableBuild:k,enableReset:C,enableStart:x,enableSources:S,isRunning:M,hasRemoteFiles:T,historyId:L,listExtensions:D,showHelper:E,uploadValues:O,queue:A,createUploadQueue:I,addFiles:P,eventAnnounce:R,eventBuild:function(){!function(e,t,n){const i=(0,l.Bz)(),o={};n.forEach((e=>{const t=e.outputs;t?Object.entries(t).forEach((e=>{const t=e[1];o[t.id]=t})):console.debug("Warning, upload response does not contain outputs.",e)}));const a={models:Object.values(o),historyId:e};i.currHistoryPanel.buildCollection(t,a)}(L,o.value,O.value),d.value=0,N(),n("dismiss")},eventComplete:j,eventCreate:function(){A.value.add([{name:I_.LN,size:0,mode:"new"}])},eventError:Y,eventInput:function(e,t){const n=y.value[e];Object.entries(t).forEach((([e,t])=>{n[e]=t}))},eventProgress:H,eventRemove:function(e){var t=y.value[e].status;"success"==t?c.value--:"error"==t?r.value--:s.value--,a.default.delete(y.value,e),A.value.remove(e)},eventRemoteFiles:function(){(0,qu.hy)((e=>{A.value.add(e.map((e=>({mode:"url",name:e.label,size:e.size,path:e.url}))))}),{multiple:!0})},eventReset:N,eventSuccess:F,eventStart:function(){!M.value&&s.value>0&&(b.value=0,v.value=0,O.value.forEach((e=>{"init"===e.status&&(e.status="queued",b.value+=e.fileSize)})),n("progress",0,"success"),d.value=s.value,A.value.start())},eventStop:function(){M.value&&(n("progress",null,"info"),_.value=!0,A.value.stop())},eventWarning:B,updateCollectionType:function(e){o.value=e},updateExtension:function(e){f.value=e,O.value.forEach((t=>{"init"===t.status&&t.extension===i.defaultExtension&&(t.extension=e)}))},updateDbKey:function(e){m.value=e,O.value.forEach((t=>{"init"===t.status&&t.dbKey===i.defaultDbKey&&(t.dbKey=e)}))},uploadPercentage:$,FontAwesomeIcon:p.GN,BButton:jn.T,COLLECTION_TYPES:I_.F0,hasBrowserSupport:I_.Sb,DefaultRow:ME,UploadBox:DE,UploadSelect:gE,UploadSelectExtension:AE}}},PE=IE;const RE=(0,m.Z)(PE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"upload-wrapper"},[t("div",{staticClass:"upload-header"},[n.queueStopping?t("div",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Queue will pause after completing the current file...")]):0===n.counterAnnounce?t("div",[n.hasBrowserSupport?t("div",[e._v(" ")]):t("div",[e._v("\n                Browser does not support Drag & Drop. Try Firefox 4+, Chrome 7+, IE 10+, Opera 12+ or Safari 6+.\n            ")])]):t("div",[n.isRunning?t("div",[e._v("Please wait..."+e._s(n.counterAnnounce)+" out of "+e._s(n.counterRunning)+" remaining...")]):t("div",[e._v("\n                You added "+e._s(n.counterAnnounce)+" file(s) to the queue. Add more files or click 'Start' to proceed.\n            ")])])]),e._v(" "),t(n.UploadBox,{on:{add:n.addFiles}},[t("div",{directives:[{name:"show",rawName:"v-show",value:n.showHelper,expression:"showHelper"}],staticClass:"upload-helper"},[t(n.FontAwesomeIcon,{staticClass:"mr-1",attrs:{icon:"fa-copy"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Drop files here")])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!n.showHelper,expression:"!showHelper"}]},[e._l(Object.entries(n.uploadItems).slice(0,e.lazyLoad),(function([i,o]){return t(n.DefaultRow,{key:i,attrs:{index:i,"db-key":o.dbKey,deferred:o.deferred,extension:o.extension,"file-content":o.fileContent,"file-mode":o.fileMode,"file-name":o.fileName,"file-size":o.fileSize,info:o.info,"list-extensions":e.isCollection?null:n.listExtensions,"list-db-keys":e.isCollection?null:e.listDbKeys,percentage:o.percentage,"space-to-tab":o.spaceToTab,status:o.status,"to-posix-lines":o.toPosixLines},on:{remove:n.eventRemove,input:n.eventInput}})})),e._v(" "),n.uploadValues.length>e.lazyLoad?t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"upload-text-message",attrs:{"data-description":"lazyload message"}},[e._v("\n                Only showing first "+e._s(e.lazyLoad)+" of "+e._s(n.uploadValues.length)+" entries.\n            ")]):e._e()],2),e._v(" "),t("input",{ref:"uploadFile",attrs:{type:"file",multiple:e.multiple},on:{change:function(e){return n.addFiles(e.target.files)}}})]),e._v(" "),t("div",{staticClass:"upload-footer text-center"},[e.isCollection?t("span",{staticClass:"upload-footer-title"},[e._v("Collection:")]):e._e(),e._v(" "),e.isCollection?t(n.UploadSelect,{staticClass:"upload-footer-collection-type",attrs:{value:n.collectionType,disabled:n.isRunning,options:n.COLLECTION_TYPES,searchable:!1,placeholder:"Select Type"},on:{input:n.updateCollectionType}}):e._e(),e._v(" "),t("span",{staticClass:"upload-footer-title"},[e._v("Type (set all):")]),e._v(" "),t(n.UploadSelectExtension,{staticClass:"upload-footer-extension",attrs:{value:n.extension,disabled:n.isRunning,"list-extensions":n.listExtensions},on:{input:n.updateExtension}}),e._v(" "),t("span",{staticClass:"upload-footer-title"},[e._v("Reference (set all):")]),e._v(" "),t(n.UploadSelect,{staticClass:"upload-footer-genome",attrs:{value:n.dbKey,disabled:n.isRunning,options:e.listDbKeys,what:"reference",placeholder:"Select Reference"},on:{input:n.updateDbKey}})],1),e._v(" "),t("div",{staticClass:"upload-buttons d-flex justify-content-end"},[t(n.BButton,{attrs:{id:"btn-local",disabled:!n.enableSources},on:{click:function(e){return n.uploadFile.click()}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-laptop"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Choose local file")])],1),e._v(" "),n.hasRemoteFiles?t(n.BButton,{attrs:{id:"btn-remote-files",disabled:!n.enableSources},on:{click:n.eventRemoteFiles}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-folder-open"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Choose remote files")])],1):e._e(),e._v(" "),t(n.BButton,{attrs:{id:"btn-new",title:"Paste/Fetch data",disabled:!n.enableSources},on:{click:n.eventCreate}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-edit"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Paste/Fetch data")])],1),e._v(" "),t(n.BButton,{attrs:{id:"btn-start",disabled:!n.enableStart,title:"Start",variant:n.enableStart?"primary":null},on:{click:n.eventStart}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Start")])]),e._v(" "),e.isCollection?t(n.BButton,{attrs:{id:"btn-build",disabled:!n.enableBuild,title:"Build",variant:n.enableBuild?"primary":null},on:{click:n.eventBuild}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Build")])]):e._e(),e._v(" "),t(n.BButton,{attrs:{id:"btn-stop",title:"Pause",disabled:!n.isRunning},on:{click:n.eventStop}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Pause")])]),e._v(" "),t(n.BButton,{attrs:{id:"btn-reset",title:"Reset",disabled:!n.enableReset},on:{click:n.eventReset}},[t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Reset")])]),e._v(" "),t(n.BButton,{attrs:{id:"btn-close",title:"Close"},on:{click:function(t){return e.$emit("dismiss")}}},[e.hasCallback?t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Cancel")]):t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Close")])])],1)],1)}),[],!1,null,null,null).exports;const jE={__name:"RulesInput",props:{hasCallback:{type:Boolean,default:!1},fileSourcesConfigured:{type:Boolean,required:!0},ftpUploadSite:{type:String,default:null},historyId:{type:String,required:!0}},emits:["dismiss"],setup(e,{emit:t}){const n=e;u.vI.add(h.Xcf,h.gMD,h.cC_,h.byT);const i=(0,a.ref)("datasets"),o=(0,a.ref)(null),s=(0,a.ref)([]),r=(0,a.ref)(null),d=(0,a.ref)("raw"),c=(0,a.ref)(null),f=(0,a.ref)([]),m=(0,a.computed)((()=>"raw"!==d.value));return{__sfc:!0,props:n,emit:t,dataType:i,errorMessage:o,ftpFiles:s,selectedDatasetId:r,selectionType:d,sourceContent:c,uris:f,isDisabled:m,eventBuild:function(){const e=(0,l.Bz)(),o={dataType:i.value,selectionType:d.value};"ftp"==o.selectionType?(o.elements=s.value,o.ftpUploadSite=n.ftpUploadSite):"raw"===o.selectionType?o.content=c.value:"remote_files"==o.selectionType&&(o.elements=f.value),e.currHistoryPanel.buildCollection("rules",o,null,!0),t("dismiss")},eventReset:function(){r.value=null,d.value="raw",c.value=null},inputDialog:function(){(0,l.Bz)().data.dialog((e=>{r.value=e.id,(0,en.e)({url:`/api/histories/${n.historyId}/contents/${r.value}/display`}).then((e=>{d.value="raw",c.value=e})).catch((e=>{o.value=e}))}),{multiple:!1,library:!1,format:null,allowUpload:!1})},inputFtp:function(){(0,I_.gf)((e=>{d.value="ftp",c.value=e.map((e=>e.path)).join("\n"),s.value=e}))},inputPaste:function(){d.value="raw",r.value=null,c.value=null},inputRemote:function(){(0,qu.hy)((function(e){(0,I_.oe)(e.url).then((e=>{e=e.filter((e=>"File"==e.class)),d.value="remote_files",c.value=e.map((e=>e.uri)).join("\n"),f.value=e}))}),{mode:"directory"})},FontAwesomeIcon:p.GN,BAlert:Rn.F,BButton:jn.T,RULES_TYPES:I_.sQ,UploadSelect:gE}}},YE=jE;const HE=(0,m.Z)(YE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"upload-wrapper d-flex flex-column"},[n.errorMessage?t(n.BAlert,{attrs:{variant:"danger",show:""}},[e._v(e._s(n.errorMessage))]):e._e(),e._v(" "),t("div",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"upload-header"},[e._v("Insert tabular source data to extract collection files and metadata.")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.sourceContent,expression:"sourceContent"}],staticClass:"upload-box upload-rule-source-content",attrs:{placeholder:"Insert tabular source data here.",disabled:n.isDisabled},domProps:{value:n.sourceContent},on:{input:function(e){e.target.composing||(n.sourceContent=e.target.value)}}}),e._v(" "),n.isDisabled?t(n.FontAwesomeIcon,{staticClass:"upload-text-lock",attrs:{icon:"fa-lock"}}):e._e(),e._v(" "),t("div",{staticClass:"upload-footer text-center"},[t("span",{staticClass:"upload-footer-title"},[e._v("Upload type:")]),e._v(" "),t(n.UploadSelect,{staticClass:"rule-data-type",attrs:{options:n.RULES_TYPES,searchable:!1},model:{value:n.dataType,callback:function(e){n.dataType=e},expression:"dataType"}})],1),e._v(" "),t("div",{staticClass:"upload-buttons d-flex justify-content-end"},[t(n.BButton,{on:{click:n.inputPaste}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-edit"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Paste data")])],1),e._v(" "),t(n.BButton,{attrs:{"data-description":"rules dataset dialog"},on:{click:n.inputDialog}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-file"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Choose dataset")])],1),e._v(" "),e.ftpUploadSite?t(n.BButton,{on:{click:n.inputFtp}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-folder-open"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Import FTP files")])],1):e._e(),e._v(" "),t(n.BButton,{on:{click:n.inputRemote}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-folder-open"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Choose remote file")])],1),e._v(" "),t(n.BButton,{attrs:{id:"btn-build",disabled:!n.sourceContent,title:"Build",variant:n.sourceContent?"primary":""},on:{click:n.eventBuild}},[t("span",[e._v("Build")])]),e._v(" "),t(n.BButton,{attrs:{id:"btn-reset",title:"Reset",disabled:!n.sourceContent},on:{click:n.eventReset}},[t("span",[e._v("Reset")])]),e._v(" "),t(n.BButton,{attrs:{id:"btn-close",title:"Close"},on:{click:function(t){return e.$emit("dismiss")}}},[t("span",[e._v("Close")])])],1)],1)}),[],!1,null,"ae433730",null).exports,NE={__name:"UploadContainer",props:{auto:{type:Object,default:()=>I_.uE},chunkUploadSize:{type:Number,default:1024},currentHistoryId:{type:String,required:!0},currentUserId:{type:String,default:""},datatypesDisableAuto:{type:Boolean,default:!1},defaultDbKey:{type:String,default:I_.F4},defaultExtension:{type:String,default:I_.sW},fileSourcesConfigured:{type:Boolean,default:!1},ftpUploadSite:{type:String,default:""},formats:{type:Array,default:null},hasCallback:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=e,i=(0,a.ref)(!1),s=(0,a.ref)(null),r=(0,a.ref)(!1),l=(0,a.ref)(!1),d=(0,a.ref)([]),c=(0,a.ref)([]),u=(0,a.ref)(null),{percentage:h,status:p}=(0,o.Jk)(va()),f=(0,a.computed)((()=>{if(null!==n.formats&&r.value){const e=[];return d.value.forEach((t=>{(t&&"auto"==t.id||s.value.isSubTypeOfAny(t.id,n.formats))&&e.push(t)})),e}return d.value})),m=(0,a.computed)((()=>f.value.some((e=>!!e.composite_files)))),_=(0,a.computed)((()=>f.value.some((e=>!e.composite_files)))),v=(0,a.computed)((()=>Boolean(n.currentHistoryId))),g=(0,a.computed)((()=>l.value&&i.value&&v.value&&r.value)),y=(0,a.computed)((()=>!n.formats&&n.multiple)),b=(0,a.computed)((()=>!n.formats||m)),w=(0,a.computed)((()=>!n.formats||_)),k=(0,a.computed)((()=>!n.formats||n.multiple));function C(e){u.value?.addFiles(e,!0)}function x(e,t,n=!1){return(0,oE.Dh)(e,t,n)}async function S(){d.value=await(0,I_.Of)(n.datatypesDisableAuto,n.auto),i.value=!0}async function M(){c.value=await(0,I_.AA)(n.defaultDbKey),l.value=!0}async function T(){null!==n.formats&&(s.value=await vh()),r.value=!0}return(0,a.onMounted)((()=>{S(),M(),T()})),t({immediateUpload:C,listDbKeys:c,listExtensions:d,toData:x}),{__sfc:!0,props:n,extensionsSet:i,datatypesMapper:s,datatypesMapperReady:r,dbKeysSet:l,listExtensions:d,listDbKeys:c,regular:u,percentage:h,status:p,effectiveExtensions:f,hasCompositeExtension:m,hasRegularExtension:_,historyAvailable:v,ready:g,showCollection:y,showComposite:b,showRegular:w,showRules:k,immediateUpload:C,toData:x,loadExtensions:S,loadDbKeys:M,loadMappers:T,progress:function(e,t=null){null!==e&&(h.value=e),null!==t&&(p.value=t)},BTab:gi.L,BTabs:yi.M,LoadingSpan:z.Z,CompositeBox:bE,DefaultBox:RE,RulesInput:HE}}};const FE=(0,m.Z)(NE,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.ready?t(n.BTabs,[n.showRegular?t(n.BTab,{attrs:{id:"regular",title:"Regular","button-id":"tab-title-link-regular"}},[t(n.DefaultBox,e._g({ref:"regular",attrs:{"chunk-upload-size":e.chunkUploadSize,"default-db-key":e.defaultDbKey,"default-extension":e.defaultExtension,"effective-extensions":n.effectiveExtensions,"file-sources-configured":e.fileSourcesConfigured,"ftp-upload-site":e.currentUserId&&e.ftpUploadSite,"has-callback":e.hasCallback,"history-id":e.currentHistoryId,"list-db-keys":n.listDbKeys,multiple:e.multiple},on:{progress:n.progress}},e.$listeners))],1):e._e(),e._v(" "),n.showComposite?t(n.BTab,{attrs:{id:"composite",title:"Composite","button-id":"tab-title-link-composite"}},[t(n.CompositeBox,e._g({attrs:{"effective-extensions":n.effectiveExtensions,"default-db-key":e.defaultDbKey,"file-sources-configured":e.fileSourcesConfigured,"ftp-upload-site":e.currentUserId&&e.ftpUploadSite,"has-callback":e.hasCallback,"history-id":e.currentHistoryId,"list-db-keys":n.listDbKeys}},e.$listeners))],1):e._e(),e._v(" "),n.showCollection?t(n.BTab,{attrs:{id:"collection",title:"Collection","button-id":"tab-title-link-collection"}},[t(n.DefaultBox,e._g({attrs:{"chunk-upload-size":e.chunkUploadSize,"default-db-key":e.defaultDbKey,"default-extension":e.defaultExtension,"effective-extensions":n.effectiveExtensions,"file-sources-configured":e.fileSourcesConfigured,"ftp-upload-site":e.currentUserId&&e.ftpUploadSite,"has-callback":e.hasCallback,"history-id":e.currentHistoryId,"is-collection":!0,"list-db-keys":n.listDbKeys}},e.$listeners))],1):e._e(),e._v(" "),n.showRules?t(n.BTab,{attrs:{id:"rule-based",title:"Rule-based","button-id":"tab-title-link-rule-based"}},[t(n.RulesInput,e._g({attrs:{"file-sources-configured":e.fileSourcesConfigured,"ftp-upload-site":e.currentUserId&&e.ftpUploadSite,"has-callback":e.hasCallback,"history-id":e.currentHistoryId}},e.$listeners))],1):e._e()],1):t("div",[t(n.LoadingSpan,{attrs:{message:"Loading required information from Galaxy server."}})],1)}),[],!1,null,null,null).exports,BE={__name:"UploadModal",setup(e,{expose:t}){const{currentUser:n}=(0,o.Jk)((0,Xe.L)()),{currentHistoryId:i}=function(e){const t=(0,I.z)();return(0,a.watch)((()=>(0,a.unref)(e)),(async(e,n)=>{e?.id!==n?.id&&await t.loadHistories()}),{immediate:!0}),{currentHistoryId:(0,a.computed)((()=>t.currentHistoryId))}}(n),{config:s,isConfigLoaded:r}=(0,c.Z)();function l(){return{title:"Upload from Disk or Web",modalStatic:!0,callback:null,immediateUpload:!1,immediateFiles:null,...r.value?{chunkUploadSize:s.value.chunk_upload_size,fileSourcesConfigured:s.value.file_sources_configured,ftpUploadSite:s.value.ftp_upload_site,defaultDbKey:s.value.default_genome,defaultExtension:s.value.default_extension}:{}}}const d=(0,a.ref)(l()),u=(0,a.ref)(!1),h=(0,a.ref)(null);async function p(e){const t=e??{};d.value={...l(),...t},d.value.callback&&(d.value.hasCallback=!0),u.value=!0,await(0,fe.Dc)(100),d.value.immediateUpload&&h.value.immediateUpload(d.value.immediateFiles)}return(0,a.watch)((()=>u.value),(e=>(0,I_.C6)(["galaxy_main"],e))),t({open:p}),{__sfc:!0,currentUser:n,currentHistoryId:i,config:s,isConfigLoaded:r,getDefaultOptions:l,options:d,showModal:u,content:h,dismiss:function(e){e&&d.value.callback&&d.value.callback(e),u.value=!1},open:p,UploadContainer:FE}}},$E=BE;const zE=(0,m.Z)($E,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-modal",{attrs:{static:n.options.modalStatic,"header-class":"no-separator","modal-class":"ui-modal","dialog-class":"upload-dialog","body-class":"upload-dialog-body","no-enforce-focus":"","hide-footer":""},scopedSlots:e._u([{key:"modal-header",fn:function(){return[t("h2",{staticClass:"title h-sm",attrs:{tabindex:"0"}},[e._v(e._s(n.options.title))])]},proxy:!0}]),model:{value:n.showModal,callback:function(e){n.showModal=e},expression:"showModal"}},[e._v(" "),n.currentHistoryId?t(n.UploadContainer,e._b({ref:"content",attrs:{"current-user-id":n.currentUser?.id,"current-history-id":n.currentHistoryId},on:{dismiss:n.dismiss}},"UploadContainer",n.options,!1)):e._e()],1)}),[],!1,null,null,null).exports,WE={components:{Alert:M,DragGhost:YD,Masthead:iE,Toast:ID,ConfirmDialog:OD,UploadModal:zE,BroadcastsOverlay:ND},setup(){const e=(0,Xe.L)(),{currentTheme:t}=(0,o.Jk)(e),{currentHistory:n}=(0,o.Jk)((0,I.z)()),i=(0,a.ref)(null);(0,oo.Vh)(i);const s=(0,a.ref)(null);wi(s);const r=(0,a.ref)(null);(0,_a.f)(r);const l=function(e,t=!1){const n=(0,Nn.yj)();return(0,a.computed)((()=>{const i=(0,Pn.Tn)(e);return i in n.query?"true"===n.query[i]:(0,Pn.Tn)(t)}))}("embed");return(0,a.watch)((()=>l.value),(()=>{l.value?e.$reset():e.loadUser()}),{immediate:!0}),{toastRef:i,confirmDialogRef:s,uploadModal:r,currentTheme:t,currentHistory:n,embedded:l}},data:()=>({config:(0,l.Bz)().config,confirmation:null,resendUrl:`${(0,s.Bg)()}user/resend_verification`,windowManager:null}),computed:{tabs(){return function(e={}){const t=(0,l.Bz)(),n=[];n.push({id:"analysis",url:"/",tooltip:(0,Ee.ZP)("Tools and Current History"),icon:"fa-home",target:"_top"}),n.push({id:"workflow",title:(0,Ee.ZP)("Workflow"),tooltip:(0,Ee.ZP)("Chain tools into workflows"),disabled:!t.user.id,url:"/workflows/list"}),t.config.visualizations_visible&&n.push({id:"visualization",title:(0,Ee.ZP)("Visualize"),tooltip:(0,Ee.ZP)("Visualize datasets"),disabled:!t.user.id,url:"/visualizations"}),t.config.single_user?n.push({title:(0,Ee.ZP)("Data Libraries"),url:"/libraries",id:"libraries"}):n.push({id:"shared",title:(0,Ee.ZP)("Shared Data"),url:"javascript:void(0)",tooltip:(0,Ee.ZP)("Access published resources"),menu:[{title:(0,Ee.ZP)("Data Libraries"),url:"/libraries",target:"_top"},{title:(0,Ee.ZP)("Histories"),url:"/histories/list_published"},{title:(0,Ee.ZP)("Workflows"),url:"/workflows/list_published"},{title:(0,Ee.ZP)("Visualizations"),url:"/visualizations/list_published"},{title:(0,Ee.ZP)("Pages"),url:"/pages/list_published"}]}),t.user.get("is_admin")&&n.push({id:"admin",title:(0,Ee.ZP)("Admin"),url:"/admin",tooltip:(0,Ee.ZP)("Administer this Galaxy"),cls:"admin-only",target:"_top"});const i={id:"help",title:(0,Ee.ZP)("Help"),url:"javascript:void(0)",tooltip:(0,Ee.ZP)("Support, contact, and community"),menu:[{title:(0,Ee.ZP)("Galaxy Help"),url:e.helpsite_url,target:"_blank",hidden:!e.helpsite_url},{title:(0,Ee.ZP)("Support"),url:e.support_url,target:"_blank",hidden:!e.support_url},{title:(0,Ee.ZP)("Videos"),url:e.screencasts_url,target:"_blank",hidden:!e.screencasts_url},{title:(0,Ee.ZP)("Community Hub"),url:e.wiki_url,target:"_blank",hidden:!e.wiki_url},{title:(0,Ee.ZP)("How to Cite Galaxy"),url:e.citation_url,target:"_blank"},{title:(0,Ee.ZP)("Interactive Tours"),url:"/tours"},{title:(0,Ee.ZP)("Introduction to Galaxy"),url:"/welcome/new"},{title:(0,Ee.ZP)("About"),url:"/about"},{title:(0,Ee.ZP)("Terms and Conditions"),url:e.terms_url,target:"_blank",hidden:!e.terms_url}]};n.push(i);let o={};return t.user.id?(o={id:"user",title:(0,Ee.ZP)("User"),cls:"loggedin-only",url:"javascript:void(0)",tooltip:(0,Ee.ZP)("Account and saved data"),menu:[{title:`${(0,Ee.ZP)("Signed in as")} ${t.user.get("username")?t.user.get("username"):t.user.get("email")}`,disabled:!0},{divider:!0},{title:(0,Ee.ZP)("Preferences"),url:"/user"},{divider:!0},{title:(0,Ee.ZP)("Datasets"),url:"/datasets/list"},{title:(0,Ee.ZP)("Histories"),url:"/histories/list"},{title:(0,Ee.ZP)("Histories shared with me"),url:"/histories/list_shared",hidden:t.config.single_user},{title:(0,Ee.ZP)("Archived Histories"),url:"/histories/archived"},{title:(0,Ee.ZP)("Pages"),url:"/pages/list"},{title:(0,Ee.ZP)("Workflow Invocations"),url:"/workflows/invocations"}]},t.config.visualizations_visible&&o.menu.push({title:(0,Ee.ZP)("Visualizations"),url:"/visualizations/list"}),t.config.interactivetools_enable&&o.menu.push({title:(0,Ee.ZP)("Active InteractiveTools"),url:"/interactivetool_entry_points/list"}),t.config.enable_notification_system&&o.menu.push({title:(0,Ee.ZP)("Notifications"),url:"/user/notifications"}),o.menu.push({divider:!0}),o.menu.push({title:(0,Ee.ZP)("Sign Out"),onclick:ff,hidden:t.config.single_user})):o=e.allow_user_creation?{id:"user",title:(0,Ee.ZP)("Log in or Register"),cls:"loggedout-only",url:"/login",tooltip:(0,Ee.ZP)("Log in or register a new account"),target:"_top"}:{id:"user",title:(0,Ee.ZP)("Login"),cls:"loggedout-only",tooltip:(0,Ee.ZP)("Login"),url:"/login",target:"_top"},n.push(o),n}(this.config)},showMasthead(){const e=this.$route.query.hide_masthead;return void 0===e||"true"!=e.toLowerCase()},theme(){if(this.embedded)return null;const e=Object.keys(this.config.themes);if(e.length>0){const t=e.includes(this.currentTheme)?this.currentTheme:e[0];return this.config.themes[t]}return null},windowTab(){return this.windowManager.getTab()}},watch:{confirmation(){console.debug("App - Confirmation before route change: ",this.confirmation),this.$router.confirmation=this.confirmation},currentHistory(){this.Galaxy.currHistoryPanel.syncCurrentHistoryModel(this.currentHistory)}},mounted(){this.embedded||(this.Galaxy=(0,l.Bz)(),this.Galaxy.currHistoryPanel=new AD,this.Galaxy.modal=new Vr.Z.View,this.Galaxy.frame=this.windowManager,this.Galaxy.config.enable_notification_system&&this.startNotificationsPolling())},created(){this.embedded||(this.windowManager=new RD,window.onbeforeunload=()=>{if(this.confirmation||this.windowManager.beforeUnload())return"Are you sure you want to leave the page?"})},methods:{startNotificationsPolling(){ha().startPollingNotifications()},openUrl(e){if(e.target){const t=(0,D.dq)(e.url);"_blank"==e.target?window.open(t):window.location=t}else this.$router.push(e.url)}}},UE=WE;const VE=(0,m.Z)(UE,(function(){var e=this,t=e._self._c;return t("div",{style:e.theme,attrs:{id:"app"}},[t("div",{attrs:{id:"everything"}},[t("div",{attrs:{id:"background"}}),e._v(" "),e.embedded?e._e():[e.showMasthead?t("Masthead",{attrs:{id:"masthead",brand:e.config.brand,"logo-url":e.config.logo_url,"logo-src":e.theme?.["--masthead-logo-img"]??e.config.logo_src,"logo-src-secondary":e.theme?.["--masthead-logo-img-secondary"]??e.config.logo_src_secondary,tabs:e.tabs,"window-tab":e.windowTab},on:{"open-url":e.openUrl}}):e._e(),e._v(" "),e.config.message_box_visible&&e.config.message_box_content?t("Alert",{staticClass:"rounded-0 m-0 p-2",attrs:{id:"messagebox",variant:e.config.message_box_class||"info"}},[t("span",{staticClass:"fa fa-fw mr-1 fa-exclamation"}),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.config.message_box_content)}})]):e._e(),e._v(" "),e.config.show_inactivity_warning&&e.config.inactivity_box_content?t("Alert",{staticClass:"rounded-0 m-0 p-2",attrs:{id:"inactivebox",variant:"warning"}},[t("span",{staticClass:"fa fa-fw mr-1 fa-exclamation-triangle"}),e._v(" "),t("span",[e._v(e._s(e.config.inactivity_box_content))]),e._v(" "),t("span",[t("a",{staticClass:"ml-1",attrs:{href:e.resendUrl}},[e._v("Resend Verification")])])]):e._e()],e._v(" "),t("router-view",{on:{"update:confirmation":function(t){e.confirmation=t}}})],2),e._v(" "),e.embedded?e._e():[t("div",{attrs:{id:"dd-helper"}}),e._v(" "),t("Toast",{ref:"toastRef"}),e._v(" "),t("ConfirmDialog",{ref:"confirmDialogRef"}),e._v(" "),t("UploadModal",{ref:"uploadModal"}),e._v(" "),t("BroadcastsOverlay"),e._v(" "),t("DragGhost")]],2)}),[],!1,null,null,null).exports;a.default.use(o.og);const qE=(0,o.WB)();(0,s.GL)((e=>{console.log("App setup");const t=ED(e);e.router=t,new a.default({el:"#app",setup(){(0,a.provide)("store",r.Z)},render:e=>e(VE),router:t,store:r.Z,pinia:qE})})),window.addEventListener("load",(()=>(0,s.HE)("app")))},88998:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var i=n(31207);function o(e="/"){const t=document.getElementsByTagName("link"),n=Array.from(t).find((e=>"index"==e.rel));return n&&n.href?(0,i.H)(n.href):e}},2746:(e,t,n)=>{"use strict";n.d(t,{P:()=>l});var i=n(28732),o=n(70538),a=n(75118),s=n(49871),r=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const l=(0,i.Q_)("collectionElementsStore",(()=>{const e=(0,o.ref)({}),t=(0,o.ref)({}),n=(0,o.ref)({});function i(e){return(0,a.K)(e)?e.collection_id:e.id}const l=(0,o.computed)((()=>(e,a=0,l=50)=>{var d;const c=null!==(d=n.value[i(e)])&&void 0!==d?d:function(e){var t;const n=null!==(t=e.element_count)&&void 0!==t?t:0,i=new Array(n);for(let e=0;e<n;e++)i[e]={element_index:e};return i}(e);return function(e){r(this,void 0,void 0,(function*(){const a=i(e.collection);try{const i=e.storedElements.slice(e.offset,e.offset+e.limit).findIndex((e=>u(e)&&!e.fetching));if(-1===i)return;e.offset+=i,(0,o.set)(t.value,a,!0),e.storedElements.slice(e.offset,e.offset+e.limit).forEach((e=>u(e)&&(e.fetching=!0)));const r=yield(0,s.fR)({entry:e.collection,offset:e.offset,limit:e.limit});e.storedElements.splice(e.offset,r.length,...r),(0,o.set)(n.value,a,e.storedElements)}finally{(0,o.del)(t.value,a)}}))}({collection:e,storedElements:c,offset:a,limit:l}),c})),d=(0,o.computed)((()=>e=>{var n;return null!==(n=t.value[i(e)])&&void 0!==n&&n}));function c(n){return r(this,void 0,void 0,(function*(){(0,o.set)(t.value,n.id,!0);try{const t=yield(0,s.m0)({id:n.id});return(0,o.set)(e.value,t.id,t),t}finally{(0,o.del)(t.value,n.id)}}))}function u(e){return"id"in e==!1}return{storedCollections:e,storedCollectionElements:n,getCollectionElements:l,isLoadingCollectionElements:d,getCollection:function(t){return r(this,void 0,void 0,(function*(){const n=e.value[t];return n||(yield c({id:t}))}))},fetchCollection:c,loadCollectionElements:function(e){return r(this,void 0,void 0,(function*(){const t=yield(0,s.fR)({entry:e});(0,o.set)(n.value,i(e),t)}))},saveCollections:function(t){const n=t.filter((e=>"dataset_collection"===e.history_content_type));for(const t of n)(0,o.set)(e.value,t.id,t)},getCollectionKey:i}}))},48391:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var i=n(28732),o=n(70538),a=n(71314),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const r=a._.path("/api/configuration").method("get").create(),l=(0,i.Q_)("configurationStore",(()=>{const e=(0,o.ref)(null),t=(0,o.ref)(!1),n=(0,o.computed)((()=>!!e.value));function i(){return s(this,void 0,void 0,(function*(){if(!n.value&&!t.value){t.value=!0;try{const{data:t}=yield r({});e.value=t,console.debug("Galaxy configuration loaded",e.value)}catch(e){console.error("Error loading Galaxy configuration",e)}finally{t.value=!1}}}))}return i(),{config:e,isLoaded:n,loadConfig:i,setConfiguration:function(t){e.value=t}}}))},6987:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(28732),o=n(70538),a=n(8766),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const r=(0,i.Q_)("datasetStore",(()=>{const e=(0,o.ref)({}),t=(0,o.ref)({}),n=(0,o.computed)((()=>t=>{const n=e.value[t];return function(e){if(!e)return!0;const t=!("peek"in e);return t}(n)&&r({id:t}),null!=n?n:null})),i=(0,o.computed)((()=>e=>{var n;return null!==(n=t.value[e])&&void 0!==n&&n}));function r(n){return s(this,void 0,void 0,(function*(){o.default.set(t.value,n.id,!0);try{const t=yield(0,a.nG)(n);return o.default.set(e.value,t.id,t),t}finally{o.default.delete(t.value,n.id)}}))}return{storedDatasets:e,getDataset:n,isLoadingDataset:i,fetchDataset:r,saveDatasets:function(t){const n=t.filter((e=>"dataset"===e.history_content_type));for(const t of n)o.default.set(e.value,t.id,t)}}}))},58625:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var i=n(28732),o=n(70538);const a=(0,i.Q_)("eventStore",(()=>{const e=(0,o.ref)(null);return{clearDragData:function(){e.value=null},getDragData:function(){return e.value},setDragData:function(t){e.value=t}}}))},96364:(e,t,n)=>{"use strict";n.d(t,{v:()=>u});var i=n(96486),o=n(28732),a=n(70538),s=n(58494);var r=n(6628),l=n(12439),d=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const c=new r.h,u=(0,o.Q_)("historyItemsStore",(()=>{const e=(0,a.ref)({}),t=(0,a.ref)("hid"),n=(0,a.ref)(void 0),o=(0,a.ref)(new Date),r=(0,a.ref)(new Date),u=(0,a.ref)({}),h=(0,a.ref)(!1),p=(0,a.computed)((()=>(t,n)=>{const o=e.value[t]||[],a=s.G.getFiltersForText(n).filter((e=>!e[0].includes("related"))),r=s.G.getFilterValue(n,"related"),l=o.filter((e=>{if(!e)return!1;if(!s.G.testFilters(a,e))return!1;const n=`${t}-${r}-${e.hid}`;return!(r&&!u.value[n])}));return(0,i.reverse)(l)}));function f(n,i,o=null){!function(e,t,n,i){n[e]||a.default.set(n,e,[]);const o=n[e];for(const e of t){const t=e[i];if(o[t]){const n=o[t];n.id==e.id&&Object.keys(n).forEach((t=>{n[t]=e[t]}))}else a.default.set(o,t,e)}}(n,i,e.value,t.value),o&&i.forEach((e=>{const t=`${n}-${o}-${e.hid}`;a.default.set(u.value,t,!0)}))}return{totalMatchesCount:n,lastCheckedTime:o,lastUpdateTime:r,isWatching:h,getHistoryItems:p,fetchHistoryItems:function(e,t,i){return d(this,void 0,void 0,(function*(){const o=s.G.getQueryString(t),a=`/api/histories/${e}/contents?${`v=dev&order=hid&offset=${i}&limit=100`}&${o}`;return yield c.enqueue(l.e,{url:a,headers:{accept:"application/vnd.galaxy.history.contents.stats+json"},errorSimplify:!1},e).then((i=>{const o=i.stats;n.value=o.total_matches;const a=i.contents,r=s.G.getFilterValue(t,"related");f(e,a,r)}))}))},saveHistoryItems:f,setLastUpdateTime:function(e=new Date){r.value=e}}}))},92865:(e,t,n)=>{"use strict";n.d(t,{z:()=>p});var i=n(28732),o=n(70538),a=n(53063),s=n(58494),r=n(26600),l=n(69387);const d=(...e)=>t=>e.reduce(((e,t)=>{if(void 0!==e)return t in e?e[t]:void 0}),t);var c=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))},u=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const h=new Set,p=(0,i.Q_)("historyStore",(()=>{const e=(0,o.ref)(!1),t=(0,o.ref)(0),n=(0,o.ref)(0),i=(0,r.p)("history-store-pinned-histories",[]),p=(0,o.ref)(null),f=(0,o.ref)({}),m=(0,o.ref)({}),_=(0,o.computed)((()=>Object.values(m.value).filter((e=>!e.archived)).sort(((...e)=>{const t=d(...e);return(e,n)=>{const i=t(e).toLowerCase();return t(n).toLowerCase()-i}})("name")))),v=(0,o.computed)((()=>{var e,t;return null!==(t=null===(e=_.value[0])||void 0===e?void 0:e.id)&&void 0!==t?t:null})),g=(0,o.computed)((()=>null!==p.value?w.value(p.value):null)),y=(0,o.computed)((()=>null!==p.value&&p.value in m.value?p.value:v.value)),b=(0,o.computed)((()=>y.value?f.value[y.value]:"")),w=(0,o.computed)((()=>e=>{var t;return m.value[e]||P(e),null!==(t=m.value[e])&&void 0!==t?t:null})),k=(0,o.computed)((()=>e=>{const t=w.value(e);return t?t.name:"..."}));function C(e){return c(this,void 0,void 0,(function*(){D(yield(0,l.xC)(e)),S(e,"")}))}function x(e){p.value=e}function S(e,t){o.default.set(f.value,e,t)}function M(e){o.default.set(m.value,e.id,e)}function T(e){const t=e.map((e=>{const t=m.value[e.id]||{};return Object.assign({},t,e)})).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});Object.values(m.value).forEach((e=>{const n=e.id;t[n]||(t[n]=e)})),m.value=t}function L(t){e.value=t}function D(e){M(e),x(e.id)}function E(){return c(this,void 0,void 0,(function*(){const e=yield(0,l.PH)();return yield A(1),D(e)}))}function O(e){return Object.keys(m.value).filter((t=>!e.includes(t)))[0]}function A(e=0,n=!1){return c(this,void 0,void 0,(function*(){t.value+=n?-e:e,yield I()}))}function I(){return c(this,void 0,void 0,(function*(){yield(0,l.nM)().then((e=>n.value=e))}))}function P(e){return c(this,void 0,void 0,(function*(){h.has(e)||(h.add(e),yield(0,l.u2)(e).then((e=>M(e))).catch((e=>console.warn(e))).finally((()=>{h.delete(e)})))}))}return{histories:_,currentHistory:g,currentHistoryId:y,currentFilterText:b,pinnedHistories:i,getHistoryById:w,getHistoryNameById:k,setCurrentHistory:C,setCurrentHistoryId:x,setFilterText:S,setHistory:M,setHistories:T,pinHistory:function(e){-1==i.value.findIndex((t=>t.id==e))&&i.value.push({id:e})},unpinHistory:function(e){i.value=i.value.filter((t=>t.id!==e))},selectHistory:D,applyFilters:function(e,t){return c(this,void 0,void 0,(function*(){y.value!==e&&(yield C(e));const n=s.G.getFilterText(t);S(e,n)}))},copyHistory:function(e,t,n){return c(this,void 0,void 0,(function*(){const i=yield(0,l.bz)(e,t,n);return yield A(1),C(i.id)}))},createNewHistory:E,deleteHistory:function(e,t){return c(this,void 0,void 0,(function*(){const n=yield(0,l.VS)(e,t),i=O([n.id]);i?yield C(i):yield E(),o.default.delete(m.value,n.id),yield A(1,!0)}))},loadCurrentHistory:function(){return c(this,void 0,void 0,(function*(){D(yield(0,l.oZ)())}))},loadHistories:function(i=!0,o){return c(this,void 0,void 0,(function*(){if(!e.value){L(!0);let e=null;if(!o||""==o)if(i){if(yield I(),t.value>=n.value)return void L(!1);e=10}else t.value=0;const a=o?0:t.value;yield(0,l.Sk)(a,e,o).then((e=>c(this,void 0,void 0,(function*(){T(e),i&&!o&&t.value==a&&(yield A(e.length))})))).catch((e=>console.warn(e))).finally((()=>L(!1)))}}))},loadHistoryById:P,secureHistory:function(e){return c(this,void 0,void 0,(function*(){M(yield(0,l.XH)(e))}))},updateHistory:function(e){var{id:t}=e,n=u(e,["id"]);return c(this,void 0,void 0,(function*(){M(yield(0,l.m)(t,n))}))},archiveHistoryById:function(e,t,n=!1){return c(this,void 0,void 0,(function*(){const i=yield(0,a.M_)(e,t,n);if(M(i),!i.archived)return;const o=O([e]);return o?C(o):E()}))},unarchiveHistoryById:function(e,t){return c(this,void 0,void 0,(function*(){const n=yield(0,a.TG)(e,t);return M(n),n}))},historiesLoading:e,historiesOffset:t,totalHistoryCount:n}}))},47425:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var i=n(28732),o=n(70538);const a=(0,i.Q_)("scopePointerStore",(()=>{const e=(0,o.ref)({});const t=(0,o.computed)((()=>t=>{var n;return null!==(n=e.value[t])&&void 0!==n?n:t}));return{addScopePointer:function(n,i){e.value[n]=t.value(i)},removeScopePointer:function(t){e.value[t]=void 0},scope:t}}))},29705:(e,t,n)=>{"use strict";n.d(t,{n:()=>u});var i=n(51120),o=n(28732),a=n(70538),s=n(44689),r=n(26600),l=n(40961),d=n(50452),c=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const u=(0,o.Q_)("toolStore",(()=>{const e=(0,r.p)("tool-store-view",""),t=(0,a.ref)(""),n=(0,a.ref)({}),o=(0,a.ref)({}),u=(0,a.ref)({}),h=(0,a.ref)({}),p=(0,a.ref)(!1),f=(0,a.computed)((()=>e=>n.value[e])),m=(0,a.computed)((()=>e=>{const t=n.value[e];return t&&t.name?t.name:"..."})),_=(0,a.computed)((()=>e=>{if(0===Object.keys(e).length)return n.value;{const t=(0,s._m)(e);return(0,s.FW)(n.value,o.value[t]||[])}})),v=(0,a.computed)((()=>{const t=e.value;return u.value[t]||{}})),g=(0,a.computed)((()=>y.value&&Object.keys(v.value).length>0)),y=(0,a.computed)((()=>Object.keys(n.value).length>0)),b=(0,a.computed)((()=>e=>Object.values(u.value[e]||{}).filter((e=>{const t=e;return t.tools&&t.tools.length>0&&"uncategorized"!==t.id&&"builtin_converters"!==t.id&&void 0!==t.name})))),w=(0,a.computed)((()=>e=>b.value(e).map((e=>({value:e.id,text:e.name})))));function k(t){var n;return c(this,void 0,void 0,(function*(){if(!p.value){if(u.value[t])return void(e.value=t);p.value=!0;try{const{data:n}=yield i.Z.get(`${(0,l.getAppRoot)()}api/tool_panels/${t}`);e.value=t,M(t,n),p.value=!1}catch(e){const t=e;console.error("Could not change panel view",null!==(n=t.response.data.err_msg)&&void 0!==n?n:t.response),p.value=!1}}}))}function C(e,t){a.default.set(n.value,e,t)}function x(e,t){a.default.set(o.value,e,t)}function S(e){n.value=e.reduce(((e,t)=>(e[t.id]=t,e)),{})}function M(e,t){a.default.set(u.value,e,t)}return{toolsById:n,panel:u,panelViews:h,currentPanelView:e,defaultPanelView:t,loading:p,getToolForId:f,getToolNameById:m,getToolsById:_,currentPanel:v,isPanelPopulated:g,sectionDatalist:w,fetchToolForId:function(e){return c(this,void 0,void 0,(function*(){console.log("fetching tool");const{data:t}=yield i.Z.get(`${(0,l.getAppRoot)()}api/tools/${e}`);C(e,t)}))},fetchTools:function(e){return c(this,void 0,void 0,(function*(){if(e&&0!==Object.keys(e).length){const t=(0,s._m)(e);if(o.value[t])return;const{data:n}=yield i.Z.get(`${(0,l.getAppRoot)()}api/tools`,{params:{q:t}});x(t,n)}p.value||y.value||(p.value=!0,yield i.Z.get(`${(0,l.getAppRoot)()}api/tools?in_panel=False`).then((({data:e})=>{S(e),p.value=!1})).catch((e=>{console.error(e),p.value=!1})))}))},fetchPanelViews:function(){return c(this,void 0,void 0,(function*(){if(!(p.value||t.value&&Object.keys(h.value).length>0)){p.value=!0;try{const{data:e}=yield i.Z.get(`${(0,l.getAppRoot)()}api/tool_panels`),{default_panel_view:n,views:o}=e;t.value=n,h.value=o}catch(e){(0,d.t)(e)}finally{p.value=!1}}}))},initCurrentPanelView:function(t){return c(this,void 0,void 0,(function*(){if(!p.value&&!g.value){p.value=!0;const n=e.value||t;""==e.value&&(e.value=n),yield i.Z.get(`${(0,l.getAppRoot)()}api/tool_panels/${n}`).then((({data:e})=>{p.value=!1,M(n,e)})).catch((e=>c(this,void 0,void 0,(function*(){p.value=!1,e.response&&400==e.response.status&&(yield k(t))}))))}}))},setCurrentPanelView:k,fetchPanel:function(e){return c(this,void 0,void 0,(function*(){const{data:t}=yield i.Z.get(`${(0,l.getAppRoot)()}api/tool_panels/${e}`);M(e,t)}))},saveToolForId:C,saveToolResults:x,saveAllTools:S,savePanelView:M}}))},48900:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});var i=n(28732),o=n(26600);const a=(0,i.Q_)("userFlagsStore",(()=>{const e=(0,o.p)("user-flags-store-show-break-warning",!0),t=(0,o.p)("user-flags-store-preferred-form-select","none");return{showSelectionQueryBreakWarning:e,ignoreSelectionQueryBreakWarning:function(){e.value=!1},preferredFormSelectElement:t}}))},24382:(e,t,n)=>{"use strict";n.d(t,{L:()=>h});var i=n(28732),o=n(70538),a=n(26600),s=n(92865),r=n(51120),l=n(74448),d=n(50452),c=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};var u=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const h=(0,i.Q_)("userStore",(()=>{const e=(0,o.ref)(null),t=(0,o.ref)(null),n=(0,a.p)("user-store-toggled-side-bar","tools",e),i=(0,a.p)("user-store-show-activity-bar",!1,e);let h=null;const p=(0,o.computed)((()=>!("email"in(e.value||[])))),f=(0,o.computed)((()=>{var e,n;return null!==(n=null===(e=t.value)||void 0===e?void 0:e.theme)&&void 0!==n?n:null})),m=(0,o.computed)((()=>{var e;return(null===(e=t.value)||void 0===e?void 0:e.favorites)?t.value.favorites:{tools:[]}}));function _(e){t.value&&(t.value.favorites.tools=null!=e?e:{tools:[]})}return{currentUser:e,currentPreferences:t,isAnonymous:p,currentTheme:f,currentFavorites:m,showActivityBar:i,toggledSideBar:n,loadUser:function(n=!0){h||(h=function(){return c(this,void 0,void 0,(function*(){const e=(0,l.Vd)("/api/users/current"),t=yield r.Z.get(e);if(200!=t.status)throw new Error("Failed to get current user");return t.data}))}().then((i=>u(this,void 0,void 0,(function*(){var o,a,r,l;if(e.value=Object.assign(Object.assign({},i),{isAnonymous:!i.email}),t.value=null!==(o=null==i?void 0:i.preferences)&&void 0!==o?o:null,(null===(a=t.value)||void 0===a?void 0:a.favorites)&&(t.value.favorites=JSON.parse(null!==(l=null===(r=null==i?void 0:i.preferences)||void 0===r?void 0:r.favorites)&&void 0!==l?l:{tools:[]})),n){const e=(0,s.z)();yield e.loadCurrentHistory(),yield e.loadHistories()}})))).catch((e=>{console.error("Failed to load user",e)})).finally((()=>{h=null})))},setCurrentUser:function(t){e.value=t},setCurrentTheme:function(n){return u(this,void 0,void 0,(function*(){if(!e.value||e.value.isAnonymous)return;const i=yield function(e,t){return c(this,void 0,void 0,(function*(){const n=(0,l.Vd)(`/api/users/${e}/theme/${t}`);try{const{data:e}=yield r.Z.put(n,{theme:t});return e}catch(e){(0,d.t)(e)}}))}(e.value.id,n);t.value&&(t.value.theme=i)}))},addFavoriteTool:function(t){return u(this,void 0,void 0,(function*(){if(!e.value||e.value.isAnonymous)return;const n=yield function(e,t){return c(this,void 0,void 0,(function*(){const n=(0,l.Vd)(`/api/users/${e}/favorites/tools`);try{const{data:e}=yield r.Z.put(n,{object_id:t});return e.tools}catch(e){(0,d.t)(e)}}))}(e.value.id,t);_(n)}))},removeFavoriteTool:function(t){return u(this,void 0,void 0,(function*(){if(!e.value||e.value.isAnonymous)return;const n=yield function(e,t){return c(this,void 0,void 0,(function*(){const n=(0,l.Vd)(`/api/users/${e}/favorites/tools/${encodeURIComponent(t)}`);try{const{data:e}=yield r.Z.delete(n);return e.tools}catch(e){(0,d.t)(e)}}))}(e.value.id,t);_(n)}))},toggleActivityBar:function(){i.value=!i.value},toggleSideBar:function(e=""){n.value=n.value===e?"":e},$reset:function(){e.value=null,t.value=null,h=null}}}))},78477:(e,t,n)=>{"use strict";n.d(t,{en:()=>f,PB:()=>l});var i=n(28732),o=n(70538),a=n(69613);function s(e,t,n){t in e?e[t].push(n):e[t]=[n]}var r=n(47425);const l=e=>{const{scope:t}=(0,r.T)();return(0,i.Q_)(`workflowConnectionStore${t(e)}`,{state:()=>({connections:[],invalidConnections:{},inputTerminalToOutputTerminals:{},terminalToConnection:{},stepToConnections:{}}),getters:{getOutputTerminalsForInputTerminal:e=>t=>e.inputTerminalToOutputTerminals[t]||[],getConnectionsForTerminal:e=>t=>e.terminalToConnection[t]||[],getConnectionsForStep:e=>t=>e.stepToConnections[t]||[]},actions:{addConnection(t){const n=Object.freeze(t);this.connections.push(n);(0,a.R)(e).addConnection(n),this.terminalToConnection=c(this.connections),this.inputTerminalToOutputTerminals=d(this.connections),this.stepToConnections=u(this.connections)},markInvalidConnection(e,t){o.default.set(this.invalidConnections,e,t)},dropFromInvalidConnections(e){o.default.delete(this.invalidConnections,e)},removeConnection(t){const n=(0,a.R)(e);this.connections=this.connections.filter((e=>{const i=f(e);return"string"==typeof t?i!==t||(n.removeConnection(e),o.default.delete(this.invalidConnections,i),!1):"input"===t.connectorType?e.input.stepId!=t.stepId||e.input.name!=t.name||(n.removeConnection(e),o.default.delete(this.invalidConnections,i),!1):e.output.stepId!=t.stepId||e.output.name!=t.name||(n.removeConnection(e),o.default.delete(this.invalidConnections,i),!1)})),this.terminalToConnection=c(this.connections),this.inputTerminalToOutputTerminals=d(this.connections),this.stepToConnections=u(this.connections)}}})()};function d(e){const t={};return e.forEach((e=>{const n=p(e),i=h(n.input);s(t,i,n.output)})),t}function c(e){const t={};return e.forEach((e=>{const n=p(e),i=h(n.output);s(t,i,e);const o=h(n.input);s(t,o,e)})),t}function u(e){const t={};return e.forEach((e=>{s(t,e.input.stepId,e),s(t,e.output.stepId,e)})),t}function h(e){return`node-${e.stepId}-${e.connectorType}-${e.name}`}function p(e){return{input:{stepId:e.input.stepId,name:e.input.name,connectorType:"input"},output:{stepId:e.output.stepId,name:e.output.name,connectorType:"output"}}}function f(e){return`${e.input.stepId}-${e.input.name}-${e.output.stepId}-${e.output.name}`}},69678:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var i=n(28732),o=n(70538),a=n(47425);const s=e=>{const{scope:t}=(0,a.T)();return(0,i.Q_)(`workflowStateStore${t(e)}`,{state:()=>({inputTerminals:{},outputTerminals:{},draggingPosition:null,draggingTerminal:null,activeNodeId:null,scale:1,stepPosition:{},stepLoadingState:{}}),getters:{getInputTerminalPosition:e=>(t,n)=>{var i;return null===(i=e.inputTerminals[t])||void 0===i?void 0:i[n]},getOutputTerminalPosition:e=>(t,n)=>{var i;return null===(i=e.outputTerminals[t])||void 0===i?void 0:i[n]},getStepLoadingState:e=>t=>e.stepLoadingState[t]},actions:{setInputTerminalPosition(e,t,n){this.inputTerminals[e]||o.default.set(this.inputTerminals,e,{}),o.default.set(this.inputTerminals[e],t,n)},setOutputTerminalPosition(e,t,n){this.outputTerminals[e]||o.default.set(this.outputTerminals,e,(0,o.reactive)({})),o.default.set(this.outputTerminals[e],t,n)},deleteInputTerminalPosition(e,t){var n;null===(n=this.inputTerminals[e])||void 0===n||delete n[t]},deleteOutputTerminalPosition(e,t){var n;null===(n=this.outputTerminals[e])||void 0===n||delete n[t]},setActiveNode(e){this.activeNodeId=e},setScale(e){this.scale=e},setStepPosition(e,t){o.default.set(this.stepPosition,e,t)},deleteStepPosition(e){delete this.stepPosition[e]},setLoadingState(e,t,n){o.default.set(this.stepLoadingState,e,{loading:t,error:n})}}})()}},69613:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var i=n(28732),o=n(70538),a=n(78477),s=n(85489),r=n(47425);const l=e=>{const{scope:t}=(0,r.T)();return(0,i.Q_)(`workflowStepStore${t(e)}`,{state:()=>({steps:{},stepMapOver:{},stepInputMapOver:{},stepIndex:-1,stepExtraInputs:{}}),getters:{getStep:e=>t=>e.steps[t.toString()],getStepExtraInputs:e=>t=>e.stepExtraInputs[t]||[],getStepIndex:e=>Math.max(...Object.values(e.steps).map((e=>e.id)),e.stepIndex),hasActiveOutputs:e=>Boolean(Object.values(e.steps).find((e=>{var t;return null===(t=e.workflow_outputs)||void 0===t?void 0:t.length}))),workflowOutputs(e){const t={};return Object.values(e.steps).forEach((e=>{var n;(null===(n=e.workflow_outputs)||void 0===n?void 0:n.length)&&e.workflow_outputs.forEach((n=>{n.label&&(t[n.label]={outputName:n.output_name,stepId:e.id})}))})),t},duplicateLabels(e){const t=new Set,n=new Set;return Object.values(e.steps).forEach((e=>{var i;(null===(i=e.workflow_outputs)||void 0===i?void 0:i.length)&&e.workflow_outputs.forEach((e=>{e.label&&(n.has(e.label)&&t.add(e.label),n.add(e.label))}))})),t}},actions:{addStep(t){const n=t.id?t.id:this.getStepIndex+1,i=Object.freeze(Object.assign(Object.assign({},t),{id:n}));o.default.set(this.steps,n.toString(),i);const s=(0,a.PB)(e);return function(e){const t=[];e.input_connections&&Object.entries(null==e?void 0:e.input_connections).forEach((([n,i])=>{void 0!==i&&(Array.isArray(i)||(i=[i]),i.forEach((i=>{const o={input:{stepId:e.id,name:n,connectorType:"input"},output:{stepId:i.id,name:i.output_name,connectorType:"output"}},a=e.inputs.find((e=>e.name==n));a&&"input_subworkflow_step_id"in a&&(o.input.input_subworkflow_step_id=a.input_subworkflow_step_id),t.push(o)})))}));return t}(i).map((e=>s.addConnection(e))),this.stepExtraInputs[i.id]=d(i),i},insertNewStep(e,t,n,i){const o={name:t,content_id:e,input_connections:{},type:n,inputs:[],outputs:[],position:i,post_job_actions:{},tool_state:{}};return this.addStep(o)},updateStep(e){var t;const n=null===(t=e.workflow_outputs)||void 0===t?void 0:t.filter((t=>e.outputs.find((e=>t.output_name==e.name))));this.steps[e.id.toString()]=Object.freeze(Object.assign(Object.assign({},e),{workflow_outputs:n})),this.stepExtraInputs[e.id]=d(e)},changeStepMapOver(e,t){o.default.set(this.stepMapOver,e,t)},resetStepInputMapOver(e){o.default.set(this.stepInputMapOver,e,{})},changeStepInputMapOver(e,t,n){this.stepInputMapOver[e]?o.default.set(this.stepInputMapOver[e],t,n):o.default.set(this.stepInputMapOver,e,{[t]:n})},addConnection(e){const t=this.getStep(e.input.stepId);(0,s.Nh)(t,`Failed to add connection, because step with id ${e.input.stepId} is undefined`);const n=t.inputs.find((t=>t.name===e.input.name)),i={output_name:e.output.name,id:e.output.stepId};n&&"input_subworkflow_step_id"in n&&void 0!==n.input_subworkflow_step_id&&(i.input_subworkflow_step_id=n.input_subworkflow_step_id);let o=[i],a=t.input_connections[e.input.name];a&&(Array.isArray(a)||(a=[a]),a=a.filter((e=>!(e.id===i.id&&e.output_name===i.output_name))),o=[...o,...a]);const r=Object.assign(Object.assign({},t),{input_connections:Object.assign(Object.assign({},t.input_connections),{[e.input.name]:o.sort(((e,t)=>e.id===t.id?e.output_name.localeCompare(t.output_name):e.id-t.id))})});this.updateStep(r)},removeConnection(e){const t=this.getStep(e.input.stepId);(0,s.Nh)(t,`Failed to remove connection, because step with id ${e.input.stepId} is undefined`);const n=t.input_connections[e.input.name];this.getStepExtraInputs(t.id).find((t=>e.input.name===t.name))?t.input_connections[e.input.name]=void 0:Array.isArray(n)?t.input_connections[e.input.name]=n.filter((t=>(t.id,e.output.stepId,!(t.output_name===e.output.name)))):o.default.delete(t.input_connections,e.input.name),this.updateStep(t)},removeStep(t){const n=(0,a.PB)(e);n.getConnectionsForStep(t).forEach((e=>n.removeConnection((0,a.en)(e)))),o.default.delete(this.steps,t.toString()),o.default.delete(this.stepExtraInputs,t)}}})()};function d(e){const t=[];return void 0!==e.when&&Object.keys(e.input_connections).forEach((n=>{var i;if(!e.inputs.find((e=>e.name===n))&&(null===(i=e.when)||void 0===i?void 0:i.includes(n))){const e={name:n,optional:!1,input_type:"parameter",type:"boolean",multiple:!1,label:n,extensions:[]};t.push(e)}})),t}},65534:(e,t,n)=>{"use strict";n.d(t,{I:()=>l});var i=n(51120),o=n(28732),a=n(70538),s=n(40961),r=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const l=(0,o.Q_)("workflowStore",(()=>{const e=(0,a.ref)({}),t=(0,a.computed)((()=>t=>e.value[t])),n=(0,a.computed)((()=>t=>{const n=e.value[t];return null==n?void 0:n.id})),o=(0,a.computed)((()=>(t,n="...")=>{const i=e.value[t];return i&&i.name?i.name:n})),l=new Map;function d(t){return r(this,void 0,void 0,(function*(){const n=l.get(t);if(n)console.debug("Workflow details fetching already requested for",t),yield n;else{console.debug("Fetching workflow details for",t);const n={instance:"true"},o=i.Z.get(`${(0,s.getAppRoot)()}api/workflows/${t}`,{params:n});l.set(t,o);const{data:r}=yield o;(0,a.set)(e.value,t,r)}l.delete(t)}))}return{workflowsByInstanceId:e,getStoredWorkflowByInstanceId:t,getStoredWorkflowIdByInstanceId:n,getStoredWorkflowNameByInstanceId:o,fetchWorkflowForInstanceId:d,fetchWorkflowForInstanceIdCached:function(t){return r(this,void 0,void 0,(function*(){Object.keys(e.value).includes(t)||(yield d(t))}))}}}))},85489:(e,t,n)=>{"use strict";function i(e,t){if(null==e){const e=null!=t?t:TypeError("Value is undefined or null");throw e instanceof Error?e:TypeError(e)}}function o(e,t){return i(e,t),e}function a(e,t){if("object"!=typeof e||!Array.isArray(e)){const e=null!=t?t:TypeError("Value is not an Array");throw e instanceof Error?e:TypeError(e)}}n.d(t,{IS:()=>o,Nh:()=>i,Wr:()=>a})},1460:(e,t,n)=>{"use strict";n.d(t,{AM:()=>l,F3:()=>u,ZP:()=>m,ZU:()=>s,_U:()=>c,fS:()=>h,qu:()=>f,r3:()=>p});var i=n(96486);const o=[[">","_gt"],["<","_lt"]],a={lt:"<",le:"<=",ge:">=",gt:">",eq:":"};function s(e){return Date.parse(String(e))/1e3}function r(e){return String(e).toLowerCase()}function l(e){return null!==e?"true"===r(e):void 0}function d(e){return r(e).replace(/('|")/g,"")}function c(e){return e&&"string"==typeof e&&(e=(e.startsWith("'#")||e.startsWith('"#'))&&(e.endsWith('"')||e.endsWith("'"))?e.replace(/^['"]#/g,"'name:"):e.replace(/^#/,"name:")),r(e)}function u(e){return a[e]}function h(e,t,n){return{attribute:e,converter:n,query:t||`${e}-eq`,handler:(e,t)=>(n&&(e=n(e),t=n(t)),r(e)===r(t))}}function p(e,t,n){return{attribute:e,converter:n,query:t||`${e}-contains`,handler:(e,t)=>(n&&(e=n(e),t=n(t)),r(e).includes(r(t)))}}function f(e,t,n){return{attribute:e,converter:n,query:`${e}-${t}`,handler:(e,i)=>{switch(n&&(e=n(e),i=n(i)),t){case"lt":return e<i;case"le":return e<=i;case"ge":return e>=i;case"gt":return e>i;default:return!1}}}}class m{constructor(e,t,n=!0,i=!0){Object.defineProperty(this,"validFilters",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validAliases",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultFilters",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"quoteStrings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nameMatching",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.validFilters=e,this.validAliases=t||o,this.quoteStrings=n,this.nameMatching=i,this.nameMatching&&void 0===this.validFilters.name&&(this.validFilters.name={handler:p("name"),menuItem:!1}),this.defaultFilters=this.createDefaultFiltersIfPresent(),this.addRangedFiltersIfNotPresent()}addRangedFiltersIfNotPresent(){Object.entries(this.validFilters).forEach((([e,t])=>{if(t.isRangeInput){const{converter:n}=t.handler;void 0===this.validFilters[`${e}_gt`]&&(this.validFilters[`${e}_gt`]=Object.assign(Object.assign({},t),{handler:f(e,"gt",n),menuItem:!1})),void 0===this.validFilters[`${e}_lt`]&&(this.validFilters[`${e}_lt`]=Object.assign(Object.assign({},t),{handler:f(e,"lt",n),menuItem:!1}))}}))}createDefaultFiltersIfPresent(){const e={};return Object.entries(this.validFilters).forEach((([t,n])=>{void 0!==n.default&&(e[t]=n.default)})),e}containsDefaults(e){if(void 0===this.defaultFilters)return!1;let t=!0;for(const n in this.defaultFilters){if(String(e[n]).toLowerCase()!==String(this.defaultFilters[n]).toLowerCase()){t=!1;break}}return t}hasAllDefaultKeys(e){return void 0!==this.defaultFilters&&Object.keys(this.defaultFilters).every((t=>Object.keys(e).includes(t)))}getFilterText(e,t=!1){e=this.getValidFilters(e,t);const n=this.containsDefaults(e);let i="";return Object.entries(e).forEach((([e,o])=>{var a,s,r;!t&&n&&void 0!==this.defaultFilters[e]||(i&&(i+=" "),(null===(a=this.validFilters[e])||void 0===a?void 0:a.type)===Boolean&&"is"===(null===(s=this.validFilters[e])||void 0===s?void 0:s.boolType)?!0===o&&(i+=`is:${e}`):"MultiTags"==(null===(r=this.validFilters[e])||void 0===r?void 0:r.type)&&Array.isArray(o)&&o.length>0?i+=`${o.map((t=>`${this.toAliasKey(e)}${t}`)).join(" ")}`:this.quoteStrings&&String(o).includes(" ")?i+=`${this.toAliasKey(e)}'${o}'`:i+=`${this.toAliasKey(e)}${o}`)})),n||void 0===this.defaultFilters||Object.entries(this.defaultFilters).forEach((([t,n])=>{var o;null==e[t]&&"boolean"==typeof n&&"is"!==(null===(o=this.validFilters[t])||void 0===o?void 0:o.boolType)&&(i&&(i+=" "),i+=`${this.toAliasKey(t)}any`)})),i}getFiltersForText(e,t=!0){const n=this.quoteStrings?/[^\s'"]+(?:['"][^'"]*['"][^\s'"]*)*|(?:['"][^'"]*['"][^\s'"]*)+/g:/(\S+):(.*?)(?=\s+\S+:|$)/g,i=e.match(n);let o={},a=!1;if(i&&i.forEach((e=>{var t,n,i;const s=/(\S+)([:><])(.+)/g.exec(e);if(s){let e=s[1];const r=s[2],l=s[3];for(const[t,n]of this.validAliases)if(r===t){e=`${e}${n}`;break}const c=null==e?void 0:e.split("-").join("_");if(c&&this.validFilters[c]&&"is"!==(null===(t=this.validFilters[c])||void 0===t?void 0:t.boolType)){const e=this.quoteStrings?d(l):l;"MultiTags"===(null===(n=this.validFilters[c])||void 0===n?void 0:n.type)?void 0===o[c]?o[c]=[e]:o[c].push(e):o[c]=e,a=!0}else l&&"is"===e&&":"===r&&"is"===(null===(i=this.validFilters[l])||void 0===i?void 0:i.boolType)&&(o[l]=!0,a=!0)}})),this.nameMatching&&!a&&e.length>0&&(o.name=e),void 0!==this.defaultFilters){let e=!1;Object.keys(this.defaultFilters).forEach((n=>{const i=o[n];void 0!==i&&("any"==i&&t&&delete o[n],e=!0)})),e||(o=Object.assign(Object.assign({},o),this.defaultFilters))}return Object.entries(o)}applyFiltersToText(e,t,n=!1){let o=this.getValidFilters(e);const a=Object.fromEntries(this.getFiltersForText(t,!1));return o=n?(0,i.omit)(a,Object.keys(o)):Object.assign(a,o),this.getFilterText(o)}getValidFilters(e,t=!1){const n={};return Object.entries(e).forEach((([e,i])=>{var o;if("MultiTags"===(null===(o=this.validFilters[e])||void 0===o?void 0:o.type)&&Array.isArray(i)){const o=i.map((n=>this.getConvertedValue(e,n,t))).filter((e=>void 0!==e));o.length>0&&(n[e]=o)}else{const o=this.getConvertedValue(e,i,t);void 0!==o&&(n[e]=o)}})),n}toAliasKey(e){for(const[t,n]of this.validAliases)if(e.endsWith(n)){return`${e.slice(0,-n.length)}${t}`}return`${e}:`}getQueryDict(e){var t,n;const i={},o=this.getFiltersForText(e);for(const[e,a]of o){const o=null===(t=this.validFilters[e])||void 0===t?void 0:t.handler.query,s=null===(n=this.validFilters[e])||void 0===n?void 0:n.handler.converter;o&&(i[o]=s?s(a):a)}return i}getQueryString(e){const t=this.getQueryDict(e);return Object.entries(t).map((([e,t])=>`q=${e}&qv=${t}`)).join("&")}getConvertedValue(e,t,n=!1){var i;if(this.validFilters[e]&&!Array.isArray(t)&&null!=t&&""!==t){const{converter:o}=null===(i=this.validFilters[e])||void 0===i?void 0:i.handler;return o?o==l&&"any"==t||!n&&/^(['"]).*\1$/.test(t)?t:!n&&[c,s].includes(o)?r(t):o(t):t}}checkFilter(e,t,n){return d(this.getFilterValue(e,t))===d(n)}getFilterValue(e,t,n=!1){const i=Object.fromEntries(this.getFiltersForText(e));let o=i[t];const a=this.defaultFilters[t];return Array.isArray(o)?(o=o.map((e=>this.getConvertedValue(t,e,n))).filter((e=>void 0!==e)),o):void 0!==o?(o=this.getConvertedValue(t,o,n),o):void 0!==a&&"boolean"==typeof a?(o=this.getConvertedValue(t,"any",n),o):this.hasAllDefaultKeys(i)?a:i[t]}setFilterValue(e,t,n){var o;let a="";const s=this.getFilterValue(e,t);let r=this.getConvertedValue(t,n);if(null==r&&!Array.isArray(n))return e;if("MultiTags"===(null===(o=this.validFilters[t])||void 0===o?void 0:o.type)||Array.isArray(s)){let e=Array.isArray(n)?n.map((e=>this.getConvertedValue(t,e))).filter((e=>void 0!==e)):[r];if(Array.isArray(s)){const t=[...s];e.forEach((e=>{s.includes(e)?t.splice(t.indexOf(e),1):t.push(e)})),e=0!==t.length?t:s}r=e}const l={[t]:r};return a=(0,i.isEqual)(s,r)||s==r?this.applyFiltersToText(l,e,!0):this.applyFiltersToText(l,e),a}testFilters(e,t){for(const[n,i]of e)if(n in this.validFilters){const e=this.validFilters[n];if(e){const n=e.handler.attribute,o=e.handler.handler,a=t[n];if(void 0===a||!o(a,i))return!1}}else console.error(`Invalid filter ${n}`);return!0}}},74448:(e,t,n)=>{"use strict";n.d(t,{Vd:()=>s,dq:()=>l,nL:()=>o,y3:()=>r});var i=n(40961);function o(e){window.location.assign(e)}const a=/(\/)+/g;function s(e){return`${(0,i.getAppRoot)()}/${e}`.replace(a,"/")}function r(e){const t=`/${function(e){return e.startsWith((0,i.getAppRoot)())}(e)?e:s(e)}`.replace(a,"/");return`${window.location.origin}${t}`}function l(e){return e&&e.startsWith("/")?s(e):e}},31207:(e,t,n)=>{"use strict";function i(e=window.location.href){return new URL(e).pathname}n.d(t,{H:()=>i})},50452:(e,t,n)=>{"use strict";function i(e,t="Request failed."){let n=t;return e&&e.response&&e.response.data&&e.response.data.err_msg?n=e.response.data.err_msg:e&&e.data&&e.data.err_msg?n=e.data.err_msg:e&&e.response?n=`${e.response.statusText} (${e.response.status})`:e instanceof Error?n=e.message:"string"==typeof e&&(n=e),n}function o(e){throw console.debug(e),Error(i(e))}n.d(t,{a:()=>i,t:()=>o})},42773:(e,t,n)=>{"use strict";n.d(t,{BZ:()=>k,Dc:()=>g,EQ:()=>w,NY:()=>y,Nx:()=>b,ZP:()=>C,d3:()=>f,hQ:()=>_,nF:()=>v,xb:()=>d});var i=n(51120),o=n(81924),a=n(40961),s=n(11411),r=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const l=["__null__","__undefined__",null,void 0];function d(e){if(Array.isArray(e)){if(0===e.length)return!0;for(let t=0;t<e.length;t++)if(l.includes(e[t]))return!0;return!1}return l.includes(e)}const c=1024,u=c*c,h=u*c,p=h*c;function f(e,t=!0,n=1){let i="";if(e>=p)e/=p,i="TB";else if(e>=h)e/=h,i="GB";else if(e>=u)e/=u,i="MB";else if(e>=c)e/=c,i="KB";else{if(!(e>0))return t?"0 b":"<strong>-</strong>";i="b"}const o="b"==i?e:function(e,t){return parseFloat(e.toFixed(t))}(e,n);return t?`${o} ${i}`:`<strong>${o}</strong> ${i}`}let m=0;function _(){return m+=1,`uid-${m}`}function v(e){let t=2166136261;for(let n=0,i=e.length;n<i;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function g(e){return new Promise((t=>{setTimeout((()=>t()),e)}))}function y(e,t,n=null,i="desc"){const o=e.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});t.forEach((e=>{o[e.id]=e}));const a=Object.values(o);return n&&a.sort(((e,t)=>(e[n]<t[n]?-1:1)*("asc"===i?1:-1))),a}function b(e){return"true"===e.toLowerCase()}function w(e,t){return t[e]()}function k(e,t){if("object"==typeof e&&null!==e){let n=!0;return t.forEach((t=>n=n&&t in e)),n}return!1}const C={cssLoadFile:function(e){const t=(0,a.getAppRoot)()+e,n=document.head.getElementsByTagName("link");if(Array.from(n).find((e=>e.href===t)))return;const i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,document.head.appendChild(i)},get:function(e){i.Z.get(e.url,{params:e.data}).then((t=>{e.success&&e.success(t.data)})).catch((t=>{e.error&&e.error(t)}))},merge:function(e,t){const n=null!=e?e:{};return Object.entries(t).forEach((([e,t])=>{n[e]||(n[e]=t)})),n},bytesToString:f,uid:_,time:function(){const e=new Date,t=(e.getHours()<10?"0":"")+e.getHours(),n=(e.getMinutes()<10?"0":"")+e.getMinutes();return`${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}, ${t}:${n}`},textify:function(e){let t=e.toString().replace(/,/g,", ");const n=t.lastIndexOf(", ");return-1!==n&&(t=`${t.substring(0,n)} or ${t.substring(n+2)}`),t},isEmpty:d,deepEach:function e(t,n){Object.values(t).forEach((t=>{Boolean(t)&&"object"==typeof t&&(n(t),e(t,n))}))},isJSON:function(e){return/^[\],:{}\s]*$/.test(e.replace(/\\["\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},clone:function(e){return JSON.parse(JSON.stringify(e))},linkify:function(e){let t=e;return t=t.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gim,'<a href="$1" target="_blank">$1</a>'),t=t.replace(/(^|[^/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>'),t=t.replace(/(([a-zA-Z0-9\-_.])+@[a-zA-Z_]+?(\.[a-zA-Z]{2,6})+)/gim,'<a href="mailto:$1">$1</a>'),t},appendScriptStyle:function(e){if(e.script&&""!==e.script){const t=document.createElement("script");t.type="text/javascript",t.textContent=e.script,document.head.appendChild(t)}if(e.styles&&""!==e.styles){const t=document.createElement("style");t.textContent=e.styles,document.head.appendChild(t)}},setWindowTitle:function(e){const t=(0,o.Bz)();window.document.title=e?`Galaxy ${t.config.brand?` | ${t.config.brand}`:""} | ${(0,s.ZP)(e)}`:"Galaxy "+(t.config.brand?` | ${t.config.brand}`:"")},waitForElementToBePresent:function(e){return r(this,void 0,void 0,(function*(){for(;null===document.querySelector(e);)yield new Promise((e=>requestAnimationFrame(e)));return document.querySelector(e)}))},wait:g,mergeObjectListsById:y}},73794:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const i={props:{value:{required:!0,type:String},title:{required:!1,type:String}},data:function(){return{editable:!1,localValue:this.value}},watch:{localValue(e){this.$emit("input",e)},value(e){this.localValue=e}}};const o=(0,n(51900).Z)(i,(function(){var e=this,t=e._self._c;return e.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],staticClass:"click-to-edit-input",attrs:{contenteditable:""},domProps:{value:e.localValue},on:{blur:function(t){e.editable=!1},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editable=!1},input:function(t){t.target.composing||(e.localValue=t.target.value)}}}):t("label",{on:{click:function(t){e.editable=!0}}},[e._v("\n    "+e._s(e.localValue)+"\n")])}),[],!1,null,null,null).exports},88103:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(70538),o=n(15193),a=n(50725),s=n(46709),r=n(22183),l=n(26253),d=n(11411),c=n(47627);const u=(0,i.defineComponent)({__name:"ExportForm",props:{what:{default:"archive"},clearInputAfterExport:{type:Boolean,default:!1}},emits:["export"],setup(e,{emit:t}){const n=e,u=(0,i.ref)(""),h=(0,i.ref)(""),p=(0,i.computed)((()=>h.value.length>0&&u.value.length>0)),f=(0,i.computed)((()=>(0,d.ZP)(`Select a 'remote files' directory to export ${n.what} to.`))),m=(0,i.computed)((()=>(0,d.ZP)("Give the exported file a name."))),_=(0,i.computed)((()=>(0,d.ZP)("Name")));return{__sfc:!0,props:n,emit:t,defaultExportFilterOptions:{exclude:["rdm"]},directory:u,name:h,canExport:p,directoryDescription:f,nameDescription:m,namePlaceholder:_,doExport:()=>{t("export",u.value,h.value),n.clearInputAfterExport&&(u.value="",h.value="")},BButton:o.T,BCol:a.l,BFormGroup:s.x,BFormInput:r.e,BRow:l.T,FilesInput:c.Z}}});const h=(0,n(51900).Z)(u,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"export-to-remote-file"},[t(n.BFormGroup,{staticClass:"mt-3",attrs:{id:"fieldset-directory","label-for":"directory",description:n.directoryDescription}},[t(n.FilesInput,{attrs:{id:"directory",mode:"directory","require-writable":!0,"filter-options":n.defaultExportFilterOptions},model:{value:n.directory,callback:function(e){n.directory=e},expression:"directory"}})],1),e._v(" "),t(n.BFormGroup,{staticClass:"mt-3",attrs:{id:"fieldset-name","label-for":"name",description:n.nameDescription}},[t(n.BFormInput,{attrs:{id:"name",placeholder:n.namePlaceholder,required:""},model:{value:n.name,callback:function(e){n.name=e},expression:"name"}})],1),e._v(" "),t(n.BRow,{attrs:{"align-h":"end"}},[t(n.BCol,[t(n.BButton,{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"export-button",attrs:{variant:"primary",disabled:!n.canExport},on:{click:function(e){return e.preventDefault(),n.doExport.apply(null,arguments)}}},[e._v("\n                Export\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports},79167:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(9382),o=n(56024),a=n(57810),s=n(43954);i.vI.add(o.kZ);const r={components:{FontAwesomeIcon:a.GN},props:{text:{type:String,required:!0},message:{type:String,required:!0},title:{type:String,default:"copy to clipboard",required:!1}},methods:{copy(e,t){(0,s.J)(e,t)}}};const l=(0,n(51900).Z)(r,(function(){var e=this;return(0,e._self._c)("FontAwesomeIcon",{staticClass:"cursor-pointer",attrs:{title:e.title,icon:["far","copy"]},on:{click:function(t){return e.copy(e.text,e.message)}}})}),[],!1,null,null,null).exports},99454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(75357),o=n(1500),a=n(3410),s=n(40961),r=n(70538),l=n(50452);class d{constructor(e={}){this.values={},this.multiple=e.multiple||!1,this.format=e.format||null}add(e){this.multiple||(this.values={});const t=e&&e.id;if(!t)throw Error("Invalid record with no <id>.");this.values[t]?delete this.values[t]:this.values[t]=e}count(){return Object.keys(this.values).length}exists(e){return!!this.values[e]}finalize(){let e=[];return Object.values(this.values).forEach((t=>{let n=null;n=this.format?t[this.format]:t,e.push(n)})),e.length>0&&!this.multiple&&(e=e[0]),e}}var c=n(51120);class u{get(e){return new Promise(((t,n)=>{c.Z.get(e).then((e=>{const n=this.getItems(e.data);t(n)})).catch((e=>{let t="Request failed.";e.response&&(t=e.response.data.err_msg||`${e.response.statusText} (${e.response.status})`),n(t)}))}))}getItems(e){const t=[],n=[e];for(;n.length>0;){const e=n.pop();if(Array.isArray(e))e.forEach((e=>{n.push(e)}));else if(e.elements)n.push(e.elements);else if(e.object)n.push(e.object);else{const n=this.getRecord(e);n&&t.push(n)}}return t}getRecord(e){const t=`${window.location.protocol}//${window.location.hostname}:${window.location.port}`;return e.details=e.extension||e.description,e.time=e.update_time||e.create_time,e.isLeaf=this.isDataset(e),e.time&&(e.time=e.time.substring(0,16).replace("T"," ")),"Library"==e.model_class?(e.label=e.name,e.url=`${(0,s.getAppRoot)()}api/libraries/${e.id}/contents`,e):e.hid?(e.label=`${e.hid}: ${e.name}`,e.download=`${t}${(0,s.getAppRoot)()}api/histories/${e.history_id}/contents/${e.id}/display`,e):"file"==e.type?(e.src="ldda",e.label=e.name,e.download=`${t}${(0,s.getAppRoot)()}api/libraries/datasets/download/uncompressed?ld_ids=${e.id}`,e):void 0}isDataset(e){return"dataset"==e.history_content_type||"file"==e.type}}var h=n(8199);r.default.use(i.ZPm);const p={mixins:[o.Z],props:{multiple:{type:Boolean,default:!1},format:{type:String,default:"download"},library:{type:Boolean,default:!0},history:{type:String,required:!0},modalStatic:{type:Boolean,default:!1},allowUpload:{type:Boolean,default:!0}},setup(){const{openGlobalUploadModal:e}=(0,a.N)();return{openGlobalUploadModal:e}},data:()=>({errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,undoShow:!1,hasValue:!1,urlTracker:null}),watch:{history:async function(){this.urlTracker=new h.B(this.getHistoryUrl()),this.load()}},created:function(){this.services=new u,this.model=new d({multiple:this.multiple,format:this.format}),this.history&&(this.urlTracker=new h.B(this.getHistoryUrl()),this.load())},methods:{getHistoryUrl(){return`${(0,s.getAppRoot)()}api/histories/${this.history}/contents?deleted=false`},formatRows(){for(const e of this.items){let t="active";e.isLeaf&&(t=this.model.exists(e.id)?"success":"default"),r.default.set(e,"_rowVariant",t)}},onClick(e){e.isLeaf?(this.model.add(e),this.hasValue=this.model.count()>0,this.multiple?this.formatRows():this.onOk()):this.load(e.url)},onUpload(){const e={multiple:this.multiple,format:this.format,callback:this.callback,modalShow:!0,selectable:!0};this.openGlobalUploadModal(e),this.modalShow=!1,this.$emit("onUpload")},onOk(){const e=this.model.finalize();this.modalShow=!1,this.callback(e),this.$emit("onOk",e)},onCancel(){this.modalShow=!1,this.$emit("onCancel")},onLoad(e){this.load(e.url)},load(e){e=this.urlTracker.getUrl(e),this.filter=null,this.optionsShow=!1,this.undoShow=!this.urlTracker.atRoot(),this.services.get(e).then((e=>{this.library&&this.urlTracker.atRoot()&&e.unshift({label:"Data Libraries",url:`${(0,s.getAppRoot)()}api/libraries`}),this.items=e,this.formatRows(),this.optionsShow=!0})).catch((e=>{this.errorMessage=(0,l.a)(e)}))}}};const f=(0,n(51900).Z)(p,(function(){var e=this,t=e._self._c;return t("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":e.onCancel},scopedSlots:e._u([{key:"search",fn:function(){return[t("data-dialog-search",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?t("data-dialog-table",{attrs:{items:e.items,multiple:e.multiple,filter:e.filter},on:{clicked:e.onClick,open:e.onLoad}}):e._e()]},proxy:!0},{key:"buttons",fn:function(){return[e.undoShow?t("b-btn",{staticClass:"float-left",attrs:{size:"sm"},on:{click:function(t){return e.load()}}},[t("div",{staticClass:"fa fa-caret-left mr-1"}),e._v("\n            Back\n        ")]):e._e(),e._v(" "),e.allowUpload?t("b-btn",{staticClass:"float-left mr-1",attrs:{size:"sm"},on:{click:e.onUpload}},[t("div",{staticClass:"fa fa-upload ml-1"}),e._v("\n            Upload\n        ")]):e._e(),e._v(" "),e.multiple?t("b-btn",{staticClass:"float-right ml-1",attrs:{size:"sm",variant:"primary",disabled:!e.hasValue},on:{click:e.onOk}},[e._v("\n            Ok\n        ")]):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports},74897:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(81924),o=n(51120),a=n(40961),s=n(50452);const r={props:{id:{type:String,required:!0}},data:()=>({decoded_id:null}),computed:{isAdmin(){const e=(0,i.Bz)()||window.parent.Galaxy;return e?.user?.isAdmin()||!1}},created:function(){this.decodeId(this.id)},methods:{decodeId:async function(e){if(this.isAdmin){const t=`${(0,a.getAppRoot)()}api/configuration/decode/${e}`;try{const e=await o.Z.get(t);this.decoded_id=e.data.decoded_id}catch(e){(0,s.t)(e)}}}}};const l=(0,n(51900).Z)(r,(function(){var e=this,t=e._self._c;return e.decoded_id?t("span",[e._v("("+e._s(e.decoded_id)+")")]):e._e()}),[],!1,null,null,null).exports},17471:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9382),o=n(51436),a=n(57810);const s={__name:"ExternalLink",props:{href:{type:String,required:!0}},setup(e){const t=e;return i.vI.add(o.Xjp),{__sfc:!0,props:t,FontAwesomeIcon:a.GN}}};const r=(0,n(51900).Z)(s,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("a",{attrs:{target:"_blank",href:n.props.href}},[e._t("default"),e._v(" "),t(n.FontAwesomeIcon,{attrs:{icon:"external-link-alt"}})],2)}),[],!1,null,null,null).exports},47627:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(70538),o=n(22183),a=n(38944);const s=(0,i.defineComponent)({__name:"FilesInput",props:{value:null,mode:{default:"file"},requireWritable:{type:Boolean,default:!1},filterOptions:{default:void 0}},emits:["input"],setup(e,{emit:t}){const n=e,s=(0,i.computed)({get:()=>n.value,set(e){t("input",e)}}),r=`Click to select ${n.mode}`;return{__sfc:!0,props:n,emit:t,currentValue:s,selectFile:()=>{const e={mode:n.mode,requireWritable:n.requireWritable,filterOptions:n.filterOptions};(0,a.hy)((e=>{s.value=null==e?void 0:e.url}),e)},placeholder:r,BFormInput:o.e}}});const r=(0,n(51900).Z)(s,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.BFormInput,{staticClass:"directory-form-input",attrs:{placeholder:t.placeholder},on:{click:t.selectFile},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}})}),[],!1,null,null,null).exports},55914:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9382),o=n(51436),a=n(57810);i.vI.add(o.mTx),i.vI.add(o.ptq);const s={components:{FontAwesomeIcon:a.GN},props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null},collapsible:{type:Boolean,default:!1},expanded:{type:Boolean,default:!0}},data:()=>({}),computed:{portletHeaderClasses(){return{"portlet-header":!0,"cursor-pointer":this.collapsible}}},methods:{onKeyDown(e){"Enter"!==e.key&&" "!==e.key||this.onCollapse()},onCollapse(){this.collapsible&&this.$emit("update:expanded",!this.expanded)}}};const r=(0,n(51900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"ui-portlet-section"},[t("div",{class:e.portletHeaderClasses,attrs:{tabindex:e.collapsible?0:-1},on:{keydown:e.onKeyDown,click:e.onCollapse}},[t("div",{staticClass:"portlet-operations"},[e._t("operations"),e._v(" "),e.collapsible?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"float-right",attrs:{title:"Collapse/Expand",variant:"link",size:"sm"}},[e.expanded?t("FontAwesomeIcon",{staticClass:"fa-fw",attrs:{icon:"chevron-up"}}):t("FontAwesomeIcon",{staticClass:"fa-fw",attrs:{icon:"chevron-down"}})],1):e._e()],2),e._v(" "),t("span",{staticClass:"portlet-title"},[e.icon?t("span",{class:["portlet-title-icon fa mr-1",e.icon]}):e._e(),e._v(" "),t("b",{staticClass:"portlet-title-text",attrs:{itemprop:"name"}},[e._v(e._s(e.title))]),e._v(" "),t("span",{staticClass:"portlet-title-description",attrs:{itemprop:"description"}},[e._v(e._s(e.description))])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"expanded"}],staticClass:"portlet-content"},[e._t("body")],2)])}),[],!1,null,null,null).exports},88642:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(70538),o=n(18435),a=n(74664);const s={components:{FormInputs:o.default},props:{id:{type:String,default:null},inputs:{type:Array,required:!0},errors:{type:Object,default:null},loading:{type:Boolean,default:!1},prefix:{type:String,default:""},sustainRepeats:{type:Boolean,default:!1},sustainConditionals:{type:Boolean,default:!1},collapsedEnableText:{type:String,default:"Enable"},collapsedDisableText:{type:String,default:"Disable"},collapsedEnableIcon:{type:String,default:"far fa-caret-square-down"},collapsedDisableIcon:{type:String,default:"far fa-caret-square-up"},validationScrollTo:{type:Array,default:null},replaceParams:{type:Object,default:null},warnings:{type:Object,default:null},workflowBuildingMode:{type:Boolean,default:!1},allowEmptyValueOnRequiredInput:{type:Boolean,default:!1}},data:()=>({formData:{},formIndex:{},formInputs:[]}),computed:{validation(){return(0,a.G$)(this.formIndex,this.formData,this.allowEmptyValueOnRequiredInput)}},watch:{id(){this.onCloneInputs()},inputs(){const e={};(0,a.UO)(this.inputs,((t,n)=>{e[n]=t})),(0,a.UO)(this.formInputs,((t,n)=>{const o=e[n];null!=o&&i.default.set(t,"attributes",o)})),this.onChangeForm()},validationScrollTo(){this.onHighlight(this.validationScrollTo)},validation(){this.onHighlight(this.validation,!0),this.$emit("onValidation",this.validation)},errors(){this.onErrors()},replaceParams(){this.onReplaceParams()},warnings(){this.onWarnings()}},created(){this.onCloneInputs(),this.formData=this.buildFormData(),this.$emit("onChange",this.formData),this.onWarnings(),this.onErrors()},methods:{buildFormData(){const e={};return Object.entries(this.formIndex).forEach((([t,n])=>{e[t]=n.value})),e},onReplaceParams(){let e=!1;Object.entries(this.replaceParams).forEach((([t,n])=>{const i=this.formIndex[t];i&&(i.value=n,e=e||i.refresh_on_change)})),this.onChange(e)},onCreateIndex(){this.formIndex={},(0,a.UO)(this.formInputs,((e,t)=>{this.formIndex[t]=e}))},onChangeForm(){this.onChange(!0)},onCloneInputs(){this.formInputs=JSON.parse(JSON.stringify(this.inputs)),(0,a.UO)(this.formInputs,(e=>{i.default.set(e,"error",null)})),this.onCreateIndex()},onChange(e){this.onCreateIndex();const t=this.buildFormData();JSON.stringify(t)!=JSON.stringify(this.formData)&&(this.formData=t,this.resetErrors(),this.$emit("onChange",t,e))},onErrors(){if(this.resetErrors(),this.errors){const e=(0,a.X5)(this.formIndex,this.errors);for(const t in e)this.setError(t,e[t])}},onWarnings(){if(this.warnings){const e=(0,a.X5)(this.formIndex,this.warnings);for(const t in e)this.setWarning(t,e[t])}},getOffsetTop(e,t=200){let n=0;for(;e;)n+=e.offsetTop,e=e.offsetParent;return n-t},onHighlight(e,t=!1){if(e&&2==e.length){const n=e[0],i=e[1];if(this.setError(n,i),!t&&n){const e=this.$el.querySelector(`[id='form-element-${n}']`);if(e){const t=document.querySelector("#center");t&&t.scrollTo(0,this.getOffsetTop(e))}}}},setError(e,t){const n=this.formIndex[e];n&&(n.error=t)},setWarning(e,t){const n=this.formIndex[e];n&&(n.warning=t)},resetErrors(){Object.values(this.formIndex).forEach((e=>{e.error=null}))}}};const r=(0,n(51900).Z)(s,(function(){var e=this;return(0,e._self._c)("FormInputs",{key:e.id,attrs:{inputs:e.formInputs,loading:e.loading,prefix:e.prefix,"sustain-repeats":e.sustainRepeats,"sustain-conditionals":e.sustainConditionals,"collapsed-enable-text":e.collapsedEnableText,"collapsed-enable-icon":e.collapsedEnableIcon,"collapsed-disable-text":e.collapsedDisableText,"collapsed-disable-icon":e.collapsedDisableIcon,"on-change":e.onChange,"on-change-form":e.onChangeForm,"workflow-building-mode":e.workflowBuildingMode}})}),[],!1,null,null,null).exports},85436:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ve});var i=n(70538),o=n(9382),a=n(56024),s=n(51436),r=n(57810);const l=(0,i.defineComponent)({__name:"FormBoolean",props:{value:{type:[Boolean,String]}},emits:["input"],setup(e,{emit:t}){const n=e,o=(0,i.computed)({get:()=>"true"===String(n.value).toLowerCase(),set(e){t("input",e)}}),a=(0,i.computed)((()=>o.value?"Yes":"No"));return{__sfc:!0,props:n,emit:t,currentValue:o,label:a}}});var d=n(51900);const c=(0,d.Z)(l,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-form-checkbox",{staticClass:"no-highlight",attrs:{switch:""},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}},[e._v("\n    "+e._s(n.label)+"\n")])}),[],!1,null,null,null).exports;const u=(0,i.defineComponent)({__name:"FormColor",props:{value:{default:""},id:null},emits:["input"],setup(e,{emit:t}){const n=e,o=(0,i.computed)({get:()=>n.value,set(e){t("input",e)}});return{__sfc:!0,props:n,emit:t,currentValue:o}}});const h=(0,d.Z)(u,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-row",[t("b-col",{staticClass:"form-color-input"},[t("b-form-input",{staticClass:"cursor-pointer",attrs:{id:e.id,type:"color",size:"sm"},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}})],1),e._v(" "),t("b-col",{staticClass:"pl-0"},[t("label",{staticClass:"pt-1 cursor-pointer",attrs:{for:e.id}},[e._v("Select a color")])])],1)}),[],!1,null,"6495951f",null).exports;var p=n(15193),f=n(45969),m=n(2707),_=n(81924),v=n(58625);const g={DISABLED:"disabled",ENABLED:"enabled",LINKED:"linked"},y="hda",b="hdca",w="dce",k="ldda",C={data:[{src:y,icon:"fa-file",tooltip:"Single dataset",library:!0,multiple:!1,batch:g.DISABLED},{src:y,icon:"fa-copy",tooltip:"Multiple datasets",multiple:!0,batch:g.LINKED},{src:b,icon:"fa-folder",tooltip:"Dataset collection",multiple:!1,batch:g.LINKED}],data_multiple:[{src:y,icon:"fa-copy",tooltip:"Multiple datasets",library:!0,multiple:!0,batch:g.DISABLED},{src:b,icon:"fa-folder",tooltip:"Dataset collection",multiple:!0,batch:g.DISABLED}],data_collection:[{src:b,icon:"fa-folder",tooltip:"Dataset collection",multiple:!1,batch:g.DISABLED}],workflow_data:[{src:y,icon:"fa-file",tooltip:"Single dataset",multiple:!1,batch:g.DISABLED}],workflow_data_multiple:[{src:y,icon:"fa-copy",tooltip:"Multiple datasets",multiple:!0,batch:g.DISABLED}],workflow_data_collection:[{src:b,icon:"fa-folder",tooltip:"Dataset collection",multiple:!1,batch:g.DISABLED}],module_data:[{src:y,icon:"fa-file",tooltip:"Single dataset",multiple:!1,batch:g.DISABLED},{src:y,icon:"fa-copy",tooltip:"Multiple datasets",multiple:!0,batch:g.ENABLED}],module_data_collection:[{src:b,icon:"fa-folder",tooltip:"Dataset collection",multiple:!1,batch:g.DISABLED},{src:b,icon:"fa-folder",tooltip:"Multiple collections",multiple:!0,batch:g.ENABLED}]};var x=n(47907),S=n.n(x),M=n(19744),T=n(42773);const L=(0,i.defineComponent)({__name:"FormSelect",props:{id:{type:String,default:`form-select-${(0,T.hQ)()}`},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},optional:{type:Boolean,default:!1},options:{type:Array,required:!0},placeholder:{type:String,default:"Select Value"},value:{type:String,default:null}},emits:["input"],setup(e,{emit:t}){const n=e,{ariaExpanded:o,onOpen:a,onClose:s}=(0,M.F)(),r=(0,i.computed)((()=>{if(n.options.length<=8)return n.options;{const e=[],t=[];return n.options.forEach((n=>{h.value.includes(n.value)?e.push(n):t.push(n)})),[...t,...e]}})),l=(0,i.computed)((()=>n.multiple?"Click to remove":"")),d=(0,i.computed)((()=>n.options.length>0)),c=(0,i.computed)((()=>{if(null===n.value&&!n.optional&&d.value){const e=n.options[0];if(e)return e.value}return null})),u=(0,i.computed)((()=>n.multiple?"Selected":"")),h=(0,i.computed)((()=>Array.isArray(n.value)?n.value:[n.value])),p=(0,i.computed)({get:()=>n.options.filter((e=>h.value.includes(e.value))),set:e=>{if(Array.isArray(e))if(e.length>0){const n=e.map((e=>e.value));t("input",n)}else t("input",null);else t("input",e?e.value:null)}});function f(){c.value&&t("input",c.value)}return(0,i.watch)((()=>n.options),(()=>f())),(0,i.onMounted)((()=>{f()})),{__sfc:!0,ariaExpanded:o,onOpen:a,onClose:s,props:n,emit:t,optionReorderThreshold:8,reorderedOptions:r,deselectLabel:l,hasOptions:d,initialValue:c,selectedLabel:u,selectedValues:h,currentValue:p,setInitialValue:f,Multiselect:S()}}});const D=(0,d.Z)(L,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.hasOptions?t(n.Multiselect,{attrs:{id:e.id,"allow-empty":e.optional,"aria-expanded":n.ariaExpanded,"close-on-select":!e.multiple,disabled:e.disabled,"deselect-label":n.deselectLabel,label:"label",multiple:e.multiple,options:n.reorderedOptions,placeholder:e.placeholder,"selected-label":n.selectedLabel,"select-label":"Click to select","track-by":"value"},on:{open:n.onOpen,close:n.onClose},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):t("b-alert",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"w-100",attrs:{variant:"warning",show:""}},[e._v(" No options available. ")])}),[],!1,null,null,null).exports,E=(0,i.defineComponent)({__name:"FormData",props:{loading:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},optional:{type:Boolean,default:!1},options:null,value:{default:null},extensions:{default:()=>[]},type:{default:"data"},flavor:{default:null},tag:{default:null}},emits:["input"],setup(e,{emit:t}){const n=e;o.vI.add(a.kZ,s.WV2,a.gM,a.Pk,s.nNP,s.AE2);const l=(0,v.b)(),d=(0,i.ref)(!0),c=(0,i.ref)(0),u=(0,i.ref)(null),h=(0,i.ref)(null),x=(0,i.ref)(null),S={},M=(0,i.computed)((()=>I.value&&!!I.value.find((e=>e.src===y)))),T=(0,i.computed)((()=>E.value?E.value.src:null)),L=(0,i.computed)({get:()=>{var e;const t=[];if(n.value){for(const i of n.value.values){const n=O.value.find((e=>e.value&&e.value.id===i.id&&e.value.src===i.src));if(n&&n.value&&(t.push(n.value),!(null===(e=E.value)||void 0===e?void 0:e.multiple)))break}if(t.length>0)return t}if(!n.optional&&O.value.length>0){const e=O.value&&O.value[0];if(e&&e.value)return t.push(e.value),t}return null},set:e=>{e&&Array.isArray(e)&&e.length>0&&e.sort(((e,t)=>{const n=e.hid,i=t.hid;return n&&i?n-i:0})),t("input",R(e))}}),E=(0,i.computed)((()=>I.value&&c.value<I.value.length?I.value[c.value]:null)),O=(0,i.computed)((()=>{var e;if(T.value&&T.value in n.options){const t=n.options[T.value]||[],i=[];t.forEach((e=>{var t;const o={label:`${e.hid}: ${e.name}`,value:e||null};if(e.keep){const t=`${e.id}_${e.src}`;S[t]=o}else{(!n.tag||(null===(t=e.tags)||void 0===t?void 0:t.includes(n.tag)))&&i.push(o)}}));const o=[w,k];for(const e of o){const t=n.options[e];Array.isArray(t)&&t.forEach((e=>{const t=`${e.id}_${e.src}`,n=j(Y(e)),i={label:`${e.name} (as ${n})`,value:e||null};S[t]=i}))}return Object.entries(S).forEach((([e,t])=>{t.value&&Y(t.value)===T.value&&i.unshift(t)})),i.sort(((e,t)=>{const n=e.value&&e.value.hid,i=t.value&&t.value.hid;return n&&i?i-n:0})),!(null===(e=E.value)||void 0===e?void 0:e.multiple)&&n.optional&&i.unshift({label:"Nothing selected",value:null}),i}return[]})),A=(0,i.computed)((()=>j(T.value))),I=(0,i.computed)((()=>{const e=n.flavor?`${n.flavor}_`:"",t=n.multiple?"_multiple":"",i=`${e}${n.type}${t}`;return C[i]}));function P(e=1e3){setTimeout((()=>{u.value=null}),e)}function R(e){if(!e)return null;{const t=Array.isArray(e)?e:[e];if(I.value&&t.length>0&&t[0]){const e=t.find((e=>!!e.map_over_type)),n=t.length>1,i=Y(t[0]),o=I.value.findIndex((e=>(!n||e.multiple===n)&&e.src===i));let a=g.DISABLED;if(o>=0){const e=I.value[o];e&&(n||E.value&&E.value.src!==i?(c.value=o,a=e.batch):a=E.value&&E.value.batch||g.DISABLED)}return{batch:a!==g.DISABLED||!!e,product:a===g.ENABLED&&!d.value,values:t.map((e=>({id:e.id,src:e.src,map_over_type:e.map_over_type||null})))}}}}function j(e){return e===y?"dataset":"dataset collection"}function Y(e){return e.src===w?e.is_dataset?y:b:e.src===k?y:e.src}function H(e,t=!0){if(e){const i=Array.isArray(e)?e:[e];if(i.length>0){const e=[];if(i.forEach((t=>{const i=t.hid,o=t.id,a=t.name?t.name:o,s=t.src||("dataset_collection"===t.history_content_type?b:y),r={id:o,src:s,hid:i,name:a,keep:!0,tags:[]},l=`${o}_${s}`,d=n.options&&n.options[s];d&&d.find((e=>e.id===o))||l in S||(S[l]={label:`${i||"Selected"}: ${a}`,value:r}),e.push(r)})),e.length>0&&e[0]){const n=E.value,i=e[0];if(n&&n.src==i.src&&t)if(n.multiple){const t=L.value?L.value.slice():[];e.forEach((e=>{t.push(e)})),L.value=t}else L.value=[i];else L.value=e}}}}const N=(0,i.computed)((()=>{const e=[];return n.value&&n.value.values.length>0&&n.value.values.forEach((t=>{if("src"in t&&t.src){const i=(n.options[t.src]||[]).find((e=>e.id===t.id&&e.src===t.src));i&&e.push(Object.assign(Object.assign({},i),{name:i.name||t.id}))}})),e}));return(0,i.onMounted)((()=>{n.value?t("input",R(N.value)):t("input",R(L.value))})),(0,i.watch)((()=>[n.options,d.value,E.value]),(()=>{t("input",R(L.value))})),{__sfc:!0,props:n,eventStore:l,$emit:t,currentLinked:d,currentField:c,currentHighlighting:u,dragData:h,dragTarget:x,keepOptions:S,canBrowse:M,currentSource:T,currentValue:L,currentVariant:E,formattedOptions:O,placeholder:A,variant:I,clearHighlighting:P,createValue:R,getSourceLabel:j,getSourceType:Y,handleIncoming:H,onBrowse:function(){if(E.value){const e=!!E.value.library,t=!!E.value.multiple;(0,_.Bz)().data.dialog((e=>{H(e,!1)}),{allowUpload:!0,format:null,library:e,multiple:t})}},onDragEnter:function(e){const t=l.getDragData();t&&(x.value=e.target,h.value=t)},onDragLeave:function(e){x.value===e.target&&(u.value=null)},onDragOver:function(){null!==h.value&&(u.value="warning")},onDrop:function(){h.value&&(H(h.value),u.value="success",h.value=null,P())},matchedValues:N,FontAwesomeIcon:r.GN,BButton:p.T,BButtonGroup:f.a,BFormCheckbox:m.l,BATCH:g,FormSelect:D}}});const O=(0,d.Z)(E,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{class:n.currentHighlighting&&`ui-dragover-${n.currentHighlighting}`,on:{dragenter:function(e){return e.preventDefault(),n.onDragEnter.apply(null,arguments)},dragleave:function(e){return e.preventDefault(),n.onDragLeave.apply(null,arguments)},dragover:function(e){return e.preventDefault(),n.onDragOver.apply(null,arguments)},drop:function(e){return e.preventDefault(),n.onDrop.apply(null,arguments)}}},[t("div",[t("div",{staticClass:"d-flex"},[n.variant.length>1?t(n.BButtonGroup,{staticClass:"align-self-start mr-2",attrs:{buttons:""}},[e._l(n.variant,(function(e,i){return t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],key:i,attrs:{pressed:n.currentField===i,title:e.tooltip},on:{click:function(e){n.currentField=i}}},[t(n.FontAwesomeIcon,{attrs:{icon:["far",e.icon]}})],1)})),e._v(" "),n.canBrowse?t(n.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{title:"Browse or Upload Datasets"},on:{click:n.onBrowse}},[e.loading?t(n.FontAwesomeIcon,{attrs:{icon:"fa-spinner",spin:""}}):t("span",{staticClass:"font-weight-bold"},[e._v("...")])],1):e._e()],2):e._e(),e._v(" "),n.currentVariant?t(n.FormSelect,{attrs:{multiple:n.currentVariant.multiple,optional:e.optional,options:n.formattedOptions,placeholder:`Select a ${n.placeholder}`},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):e._e()],1),e._v(" "),n.currentVariant.batch!==n.BATCH.DISABLED?t("div",[n.currentVariant.batch===n.BATCH.ENABLED?t(n.BFormCheckbox,{staticClass:"no-highlight my-2",attrs:{switch:""},model:{value:n.currentLinked,callback:function(e){n.currentLinked=e},expression:"currentLinked"}},[n.currentLinked?t("span",[t(n.FontAwesomeIcon,{attrs:{icon:"fa-link"}}),e._v(" "),t("b",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mr-1"},[e._v("Linked:")]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Datasets will be run in matched order with other datasets.")])],1):t("span",[t(n.FontAwesomeIcon,{attrs:{icon:"fa-unlink"}}),e._v(" "),t("b",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mr-1"},[e._v("Unlinked:")]),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Dataset will be run against *all* other datasets.")])],1)]):e._e(),e._v(" "),t("div",{staticClass:"text-info my-2"},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-exclamation"}}),e._v(" "),t("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"ml-1"},[e._v("\n                    This is a batch mode input field. Individual jobs will be triggered for each dataset.\n                ")])],1)],1):e._e()])])}),[],!1,null,null,null).exports;var A=n(38944),I=n(99454),P=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const R=(0,i.defineComponent)({__name:"FormDataDialog",props:{id:null,multiple:{type:Boolean,default:!1},value:{default:""}},emits:["input"],setup(e,{emit:t}){const n=e;o.vI.add(s.cC_);const a=(0,i.ref)(""),l=(0,i.ref)(!1);return(0,i.watch)((()=>l.value),(()=>P(this,void 0,void 0,(function*(){a.value="",a.value=yield(0,A.of)()})))),{__sfc:!0,props:n,title:"Browse Datasets",localHistoryId:a,dataDialogOpen:l,emit:t,onData:function(e){l.value=!1,t("input",e)},FontAwesomeIcon:r.GN,DataDialog:I.Z}}});const j=(0,d.Z)(R,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"d-flex"},[t("b-input-group",[t("button",{on:{click:function(e){n.dataDialogOpen=!0}}},[t(n.FontAwesomeIcon,{attrs:{icon:"folder-open",title:n.title}})],1),e._v(" "),t("input",{staticClass:"float-left",attrs:{readonly:""},domProps:{value:n.props.value}})]),e._v(" "),n.dataDialogOpen?t(n.DataDialog,{attrs:{history:n.localHistoryId,multiple:e.multiple},on:{onCancel:function(e){n.dataDialogOpen=!1},onUpload:function(e){n.dataDialogOpen=!1},onOk:n.onData}}):e._e()],1)}),[],!1,null,null,null).exports;var Y=n(73463),H=n(11411);o.vI.add(s.Pk,s.cC_);const N={components:{FontAwesomeIcon:r.GN,FilesDialog:Y.c},data:()=>({isModalShown:!1,url:"",pathChunks:"",currentDirectoryName:"",modalKey:0,selectText:(0,H.ZP)("Select")}),computed:{isValidName(){if(!this.currentDirectoryName)return null;return new RegExp("^(\\w+\\.?)*\\w+$","g").test(this.currentDirectoryName)}},methods:{removePath(e){this.pathChunks=this.pathChunks.slice(0,e)},reset(){const e={isModalShown:!1,url:"",pathChunks:"",currentDirectoryName:""};Object.keys(e).forEach((t=>this[t]=e[t])),this.redrawModal(),this.updateURL(!0)},redrawModal(){this.modalKey+=1},removeLastPath(e){""===this.currentDirectoryName&&this.pathChunks.length>0&&this.pathChunks.at(-1).editable&&(e.preventDefault(),this.currentDirectoryName=this.pathChunks.pop().pathChunk)},setUrl({url:e}){this.url=new URL(e),this.pathChunks=this.url.href.split(/[/\\]/).splice(2).map((e=>({pathChunk:e,editable:!1}))),e&&this.updateURL()},addPath({key:e}){if(("Enter"===e||"/"===e)&&this.isValidName){const e=this.currentDirectoryName;this.pathChunks.push({pathChunk:e,editable:!0}),this.currentDirectoryName="",this.updateURL()}},updateURL(e=!1){let t;e||(t=encodeURI(`${this.url.protocol}//${this.pathChunks.map((({pathChunk:e})=>e)).join("/")}`)),this.$emit("input",t)}}},F=N;const B=(0,d.Z)(F,(function(){var e=this,t=e._self._c;return t("div",[e.url?e._e():t("div",[t("b-button",{attrs:{id:"select-btn"},on:{click:e.reset}},[t("FontAwesomeIcon",{attrs:{icon:"folder-open"}}),e._v(" "+e._s(e.selectText)+"\n        ")],1),e._v(" "),t("FilesDialog",{key:e.modalKey,attrs:{mode:"directory",callback:e.setUrl,"require-writable":!0}})],1),e._v(" "),e.url?t("b-breadcrumb",[t("b-breadcrumb-item",{staticClass:"align-items-center",attrs:{title:"Select another folder"},on:{click:e.reset}},[t("b-button",{staticClass:"pathname",attrs:{variant:"primary"}},[t("FontAwesomeIcon",{attrs:{icon:"folder-open"}}),e._v(" "+e._s(e.url.protocol))],1)],1),e._v(" "),e._l(e.pathChunks,(function({pathChunk:n,editable:i},o){return t("b-breadcrumb-item",{key:o,staticClass:"existent-url-path align-items-center"},[t("b-button",{staticClass:"regular-path-chunk",attrs:{disabled:!i,variant:"dark"},on:{click:function(t){return e.removePath(o)}}},[e._v("\n                "+e._s(n))])],1)})),e._v(" "),t("b-breadcrumb-item",{staticClass:"directory-input-field align-items-center"},[t("b-input",{attrs:{id:"path-input-breadcrumb","aria-describedby":"input-live-help input-live-feedback",state:e.isValidName,placeholder:"enter directory name",trim:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPath.apply(null,arguments)},"!keydown":[function(t){return t.type.indexOf("key")||191===t.keyCode?(t.preventDefault(),t.stopPropagation(),e.addPath.apply(null,arguments)):null},function(t){return t.type.indexOf("key")||8===t.keyCode?e.removeLastPath.apply(null,arguments):null}]},model:{value:e.currentDirectoryName,callback:function(t){e.currentDirectoryName=t},expression:"currentDirectoryName"}})],1)],2):e._e()],1)}),[],!1,null,"602c72d2",null).exports;function $(e){let t=null;const n=[],i=[e];for(;t=i.pop();)t.forEach((e=>{e.value&&n.push(e.value),e.options.length>0&&i.push(e.options)}));return n}var z=n(76398);const W=(0,i.defineComponent)({__name:"FormDrilldownOption",props:{currentValue:null,option:null,handleClick:null,multiple:{type:Boolean}},setup(e){const t=e,n=(0,i.ref)(!1),o=(0,i.computed)((()=>t.option.options.length>0)),a=(0,i.computed)((()=>{const e=t.option.value;return t.currentValue.includes(e)})),s=(0,i.computed)((()=>t.multiple?m.l:z.g));function r(){const e=$(t.option.options);for(const i of e)if(t.currentValue.includes(i)){n.value=!0;break}}return(0,i.onMounted)((()=>{r()})),{__sfc:!0,props:t,showChildren:n,hasOptions:o,isChecked:a,isComponent:s,toggleChildren:function(){n.value=!n.value},toggleInitialization:r,FormDrilldownList:q}}});const U=(0,d.Z)(W,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.hasOptions?t("b-button",{staticClass:"btn p-0",attrs:{variant:"link"},on:{click:n.toggleChildren}},[n.showChildren?t("i",{staticClass:"fa fa-minus-square"}):t("i",{staticClass:"fa fa-plus-square"})]):e._e(),e._v(" "),t(n.isComponent,{tag:"component",staticClass:"drilldown-option d-inline",attrs:{value:"true",checked:n.isChecked},on:{change:function(t){return e.handleClick(e.option.value)}}},[e._v("\n        "+e._s(e.option.name)+"\n    ")]),e._v(" "),n.hasOptions?t(n.FormDrilldownList,{directives:[{name:"show",rawName:"v-show",value:n.showChildren,expression:"showChildren"}],staticClass:"pl-5",attrs:{"current-value":e.currentValue,multiple:e.multiple,options:e.option.options,"handle-click":e.handleClick}}):e._e()],1)}),[],!1,null,null,null).exports,V=(0,i.defineComponent)({__name:"FormDrilldownList",props:{currentValue:null,handleClick:null,multiple:{type:Boolean},options:null},setup:e=>({__sfc:!0,FormDrilldownOption:U})});const q=(0,d.Z)(V,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",e._l(e.options,(function(i){return t("div",{key:i.name,staticClass:"ui-drilldown"},[t(n.FormDrilldownOption,{attrs:{"current-value":e.currentValue,"handle-click":e.handleClick,multiple:e.multiple,option:i}})],1)})),0)}),[],!1,null,null,null).exports,Z=(0,i.defineComponent)({__name:"FormDrilldown",props:{id:null,value:{default:null},options:null,multiple:{type:Boolean,default:!0}},emits:["input"],setup(e,{emit:t}){const n=e,o=(0,i.computed)((()=>n.options.length>0)),a=(0,i.computed)((()=>$(n.options))),s=(0,i.computed)((()=>null===n.value||""===n.value?[]:Array.isArray(n.value)?n.value:[n.value])),r=(0,i.computed)((()=>a.value.length===s.value.length)),l=(0,i.computed)((()=>![0,a.value.length].includes(s.value.length)));return{__sfc:!0,props:n,emit:t,hasOptions:o,allValues:a,currentValue:s,selectAllChecked:r,selectAllIndeterminate:l,handleClick:function(e){if(n.multiple){const n=s.value.slice(),i=n.indexOf(e);-1!==i?n.splice(i,1):n.push(e),0===n.length?t("input",null):t("input",n)}else t("input",e)},onSelectAll:function(e){t("input",e?a.value:null)},FormDrilldownList:q}}});const G=(0,d.Z)(Z,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.hasOptions?t("div",[e.multiple?t("b-form-checkbox",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"d-inline select-all-checkbox",attrs:{checked:n.selectAllChecked,indeterminate:n.selectAllIndeterminate},on:{change:n.onSelectAll}},[e._v("\n        Select / Deselect All\n    ")]):e._e(),e._v(" "),t(n.FormDrilldownList,{attrs:{multiple:e.multiple,"current-value":n.currentValue,options:e.options,"handle-click":n.handleClick}})],1):e._e()}),[],!1,null,null,null).exports;const J={props:{value:{required:!0},info:{type:String,default:null}}};const K=(0,d.Z)(J,(function(){var e=this;return(0,e._self._c)("div",[e._v("\n    "+e._s(e.info)+"\n")])}),[],!1,null,null,null).exports;const X={props:{id:{type:String,required:!0},value:{type:String,default:""},area:{type:Boolean,default:!1}},computed:{currentValue:{get(){return this.value},set(e){this.$emit("input",e)}}}};const Q=(0,d.Z)(X,(function(){var e=this,t=e._self._c;return e.area?t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"ui-textarea",attrs:{id:e.id},domProps:{value:e.currentValue},on:{input:function(t){t.target.composing||(e.currentValue=t.target.value)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"ui-input",attrs:{id:e.id},domProps:{value:e.currentValue},on:{input:function(t){t.target.composing||(e.currentValue=t.target.value)}}})}),[],!1,null,null,null).exports;const ee={props:{value:{required:!0},type:{type:String,required:!0,validator:e=>["integer","float"].includes(e.toLowerCase())},min:{type:[Number,String],required:!1,default:void 0},max:{type:[Number,String],required:!1,default:void 0},workflowBuildingMode:{type:Boolean,default:!1}},data(){return{defaultInputSizeWithSlider:4,dismissSecs:5,dismissCountDown:0,errorMessage:"",fractionWarning:"This output doesn't allow fractions!",decimalPlaces:"integer"===this.type.toLowerCase()?0:this.getNumberOfDecimals(this.value)}},computed:{currentValue:{get(){return this.value},set(e,t){e!==t&&this.$emit("input",e)}},fieldType(){return this.workflowBuildingMode?"text":"number"},isRangeValid(){return!isNaN(this.min)&&!isNaN(this.max)&&this.max>this.min},isInteger(){return"integer"===this.type.toLowerCase()},isFloat(){return!this.isInteger},step(){if(this.isInteger)return 1;const e=this.decimalPlaces;return e<2?.1:e<3?.01:.001}},methods:{onFloatInput(e){this.isInteger&&(e.preventDefault(),this.showAlert(this.fractionWarning))},onInputChange(e){this.resetAlert(),this.isOutOfRange(e)&&(this.showOutOfRangeWarning(e),this.currentValue=e>this.max?this.max:this.min),this.isFloat&&(this.decimalPlaces=this.getNumberOfDecimals(this.currentValue))},showAlert(e){e&&(this.errorMessage=e,this.dismissCountDown=this.dismissSecs)},isOutOfRange(e){return this.isRangeValid&&(e>this.max||e<this.min)},showOutOfRangeWarning(e){const t=`${e} is out of ${this.min} - ${this.max} range!`;this.showAlert(t)},resetAlert(){this.dismissCountDown=0},getNumberOfDecimals(e){if(null==e)return 0;var t=e.toString().match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}}};const te=(0,d.Z)(ee,(function(){var e=this,t=e._self._c;return t("div",[e.errorMessage?t("b-alert",{staticClass:"mt-2",attrs:{show:e.dismissCountDown,variant:"info"},on:{dismissed:e.resetAlert}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e(),e._v(" "),t("b-row",{attrs:{"align-v":"center"}},[t("b-col",{attrs:{sm:!!e.isRangeValid&&e.defaultInputSizeWithSlider}},[t("b-form-input",{staticClass:"ui-input",attrs:{"no-wheel":!0,step:e.step,type:e.fieldType},on:{change:e.onInputChange,"!keydown":[function(t){return t.type.indexOf("key")||190===t.keyCode?e.onFloatInput.apply(null,arguments):null},function(t){return t.type.indexOf("key")||110===t.keyCode?e.onFloatInput.apply(null,arguments):null}]},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})],1),e._v(" "),e.isRangeValid?t("b-col",{staticClass:"pl-0"},[t("b-form-input",{staticClass:"ui-input",attrs:{min:e.min,max:e.max,step:e.step,type:"range"},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})],1):e._e()],1)],1)}),[],!1,null,null,null).exports;const ne={props:{value:{default:""},id:{type:String,default:""},type:{type:String,default:"text"},area:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:""},color:{type:String,default:null},cls:{type:String,default:null},datalist:{type:Array,default:null}},computed:{acceptedTypes(){return["text","password"].includes(this.type)?this.type:"text"},currentValue:{get(){const e=this.value??"";return Array.isArray(e)?0===e.length?"":this.multiple?this.value.reduce(((e,t)=>e+String(t)+"\n"),""):String(this.value[0]):String(e)},set(e,t){e!==t&&this.$emit("input",e)}},inputArea(){return this.area||this.multiple},style(){return this.color?{color:this.color,"border-color":this.color}:null}}};var ie=(0,d.Z)(ne,(function(){var e=this,t=e._self._c;return t("b-row",{attrs:{"align-v":"center"}},[t("b-col",[e.inputArea?t("b-form-textarea",{class:["ui-text-area",e.cls],style:e.style,attrs:{id:e.id,readonly:e.readonly,placeholder:e.placeholder},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}}):t("b-form-input",{class:["ui-input",e.cls],style:e.style,attrs:{id:e.id,readonly:e.readonly,placeholder:e.placeholder,type:e.acceptedTypes,list:`${e.id}-datalist`},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}}),e._v(" "),e.datalist&&!e.inputArea?t("datalist",{attrs:{id:`${e.id}-datalist`}},e._l(e.datalist,(function(e){return t("option",{key:e.value,attrs:{label:e.label},domProps:{value:e.value}})})),0):e._e()],1)],1)}),[],!1,null,"36bc1b14",null);const oe=ie.exports,ae={components:{FormText:oe},props:{value:{default:""},id:{type:String,default:null},type:{type:String,default:"text"},area:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null},datalist:{type:Array,default:null}},data:()=>({status:!1}),computed:{currentValue:{get(){return this.value},set(e){this.$emit("input",e)}},currentStatus:{get(){return this.status||null!==this.value},set(e){this.status=Boolean(e),this.status?this.currentValue="":this.currentValue=null}}}};const se=(0,d.Z)(ae,(function(){var e=this,t=e._self._c;return t("div",[t("b-form-checkbox",{staticClass:"ui-switch",attrs:{switch:""},model:{value:e.currentStatus,callback:function(t){e.currentStatus=t},expression:"currentStatus"}},[e._v("\n        Set value for this optional select field?\n    ")]),e._v(" "),e.currentStatus?t("FormText",{attrs:{id:e.id,readonly:e.readonly,value:e.value,area:e.area,placeholder:e.placeholder,multiple:e.multiple,datalist:e.datalist,type:e.type},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}}):e._e()],1)}),[],!1,null,null,null).exports;var re=n(34003),le=n(66811);const de={props:{type:{type:String,required:!0},columns:{required:!0},colHeaders:{type:Array,required:!0}},computed:{typeDisplay(){return le.ZP.MAPPING_TARGETS[this.type].label},help(){return le.ZP.MAPPING_TARGETS[this.type].help||""},columnsLabel(){return le.ZP.columnDisplay(this.columns,this.colHeaders)}}};const ce=(0,d.Z)(de,(function(){var e=this;return(0,e._self._c)("li",{staticClass:"rule",attrs:{title:e.help}},[e._v("Set "+e._s(e.columnsLabel)+" as "+e._s(e.typeDisplay))])}),[],!1,null,null,null).exports;const ue={props:{rule:{required:!0,type:Object},colHeaders:{type:Array,required:!1}},computed:{title(){const e=this.rule.type;return le.ZP.RULES[e].display(this.rule,this.colHeaders)}},methods:{}};const he={components:{RuleDisplayPreview:(0,d.Z)(ue,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"rule"},[t("span",{staticClass:"rule-display"},[e._v(e._s(e.title)+" ")]),e._v(" "),e.rule.warn?t("span",{staticClass:"rule-warning"},[e._v("\n        "+e._s(e.rule.warn)+"\n    ")]):e._e(),e._v(" "),e.rule.error?t("span",{staticClass:"rule-error"},[t("span",{staticClass:"alert-message"},[e._v(e._s(e.rule.error))])]):e._e()])}),[],!1,null,null,null).exports,IdentifierDisplayPreview:ce},props:{inputRules:{required:!1,type:Object}},data:function(){return{}},computed:{mapping:function(){return this.inputRules?this.inputRules.mapping:[]},rules:function(){return this.inputRules?this.inputRules.rules:[]},columnData:function(){const e=le.ZP.applyRules([],[],[],this.rules);return{colHeadersPerRule:e.colHeadersPerRule,columns:e.columns}},colHeaders:function(){const e=this.columnData.columns;return le.ZP.colHeadersFor([],e)}}};const pe=(0,d.Z)(he,(function(){var e=this,t=e._self._c;return t("div",[t("ol",{staticClass:"rules"},[e._l(e.rules,(function(n,i){return t("RuleDisplayPreview",{key:i,attrs:{rule:n,index:i,"col-headers":e.columnData.colHeadersPerRule[i]}})})),e._v(" "),e._l(e.mapping,(function(n,i){return t("IdentifierDisplayPreview",e._b({key:n.type,attrs:{index:i,"col-headers":e.colHeaders}},"IdentifierDisplayPreview",n,!1))}))],2)])}),[],!1,null,null,null).exports;var fe=n(49871);const me={__name:"FormRulesEdit",props:{value:{type:Object},target:{type:Object,default:null}},emits:["input"],setup(e,{emit:t}){const n=e;o.vI.add(s.Xcf);const a=(0,i.ref)(null),l=(0,i.ref)(null),d={rules:[],mapping:[]},c=(0,i.computed)((()=>n.value??d));return{__sfc:!0,props:n,modal:a,elements:l,initialRules:d,displayRules:c,onEdit:async function(){if(n.target)try{const e=await(0,fe.m0)({id:n.target.id});l.value=e,a.value.show()}catch(e){console.error(e),console.log("problem fetching collection")}else a.value.show()},emit:t,onSaveRules:function(e){a.value.hide(),t("input",e)},onCancel:function(){a.value.hide()},FontAwesomeIcon:r.GN,RuleCollectionBuilder:re.default,RulesDisplay:pe}}};const _e=(0,d.Z)(me,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"form-rules-edit"},[t(n.RulesDisplay,{attrs:{"input-rules":n.displayRules}}),e._v(" "),t("b-button",{attrs:{title:"Edit Rules"},on:{click:n.onEdit}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-edit"}}),e._v(" "),t("span",[e._v("Edit")])],1),e._v(" "),t("b-modal",{ref:"modal",attrs:{"modal-class":"ui-form-rules-edit-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[t("h2",{staticClass:"mb-0"},[e._v("Build Rules for Applying to Existing Collection")])]},proxy:!0}])},[e._v(" "),t(n.RuleCollectionBuilder,{attrs:{"elements-type":"collection_contents","import-type":"collections","initial-elements":n.elements,"initial-rules":n.props.value,"save-rules-fn":n.onSaveRules,oncancel:n.onCancel,oncreate:()=>{}}})],1)],1)}),[],!1,null,null,null).exports;var ve=n(31642),ge=n(2332),ye=n(28732),be=n(48900);const we=(0,i.defineComponent)({__name:"FormCheck",props:{value:null,options:null},emits:["input"],setup(e,{emit:t}){const n=e,o=(0,i.computed)({get:()=>{var e;const t=null!==(e=n.value)&&void 0!==e?e:[];return Array.isArray(t)?t:[t]},set:e=>{e.length>0?t("input",e):t("input",null)}}),a=(0,i.computed)((()=>n.options.length>0)),s=(0,i.computed)((()=>![0,n.options.length].includes(o.value.length))),r=(0,i.computed)((()=>o.value.length===n.options.length));return{__sfc:!0,props:n,emit:t,currentValue:o,hasOptions:a,indeterminate:s,selectAll:r,onSelectAll:function(e){if(e){const e=n.options.map((e=>e.value));t("input",e)}else t("input",null)}}}});const ke=(0,d.Z)(we,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.hasOptions?t("div",[t("b-form-checkbox",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"mb-1",attrs:{checked:n.selectAll,indeterminate:n.indeterminate},on:{change:n.onSelectAll}},[e._v("\n        Select / Deselect all\n    ")]),e._v(" "),t("b-form-checkbox-group",{staticClass:"pl-3",attrs:{stacked:""},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}},e._l(e.options,(function(n,i){return t("b-form-checkbox",{key:i,attrs:{value:n.value}},[e._v("\n            "+e._s(n.label)+"\n        ")])})),1)],1):t("b-alert",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{variant:"warning",show:""}},[e._v(" No options available. ")])}),[],!1,null,null,null).exports;const Ce={__name:"FormRadio",props:{value:{default:null},options:{type:Array,required:!0}},emits:["input"],setup(e,{emit:t}){const n=e,o=(0,i.computed)({get:()=>n.value,set:e=>{t("input",e)}}),a=(0,i.computed)((()=>n.options.length>0));return{__sfc:!0,emit:t,props:n,currentValue:o,hasOptions:a}}};const xe=(0,d.Z)(Ce,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.hasOptions?t("b-form-radio-group",{attrs:{stacked:""},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}},e._l(e.options,(function(n,i){return t("b-form-radio",{key:i,attrs:{value:n.value}},[e._v("\n        "+e._s(n.label)+"\n    ")])})),1):t("b-alert",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{variant:"warning",show:""}},[e._v(" No options available. ")])}),[],!1,null,null,null).exports;var Se=n(771),Me=n(22183),Te=n(38046),Le=n(85489);function De(e){const t=(0,i.ref)([]),n=(0,i.ref)([]),o=()=>{t.value=[],n.value=[],l()};(0,i.watch)((()=>e.value),(()=>o()));let a=-1;const s=e=>{const i=n.value.indexOf(e);-1!==i&&(n.value.splice(i,1),t.value.splice(i,1))},r=i=>{if(-1===n.value.indexOf(i)){n.value.push(i);const o=e.value[i];(0,Le.Nh)(o),t.value.push(o)}},l=()=>{a=-1};return{highlightedOptions:t,highlightedIndexes:n,reset:o,rangeHighlight:e=>{if(-1===a)return a=e,void r(e);const t=Math.min(a,e),n=Math.max(a,e);for(let e=t;e<=n;e++)r(e);a=-1},rangeRemoveHighlight:e=>{if(-1===a)return a=e,void s(e);const t=Math.min(a,e),n=Math.max(a,e);for(let e=t;e<=n;e++)s(e);a=-1},toggleHighlight:i=>{const o=n.value.indexOf(i);if(-1===o){n.value.push(i);const o=e.value[i];(0,Le.Nh)(o),t.value.push(o)}else n.value.splice(o,1),t.value.splice(o,1)},abortHighlight:l,addHighlight:r,removeHighlight:s}}function Ee(e,t,n){let i;if(t instanceof RegExp)i=e.filter((e=>Boolean(e.label.match(t))));else if(n)i=e.filter((e=>e.label.includes(t)));else{const n=t.toLowerCase();i=e.filter((e=>e.label.toLowerCase().includes(n)))}return i}let Oe,Ae=0,Ie=0;var Pe=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Re=(0,i.defineComponent)({__name:"FormSelectMany",props:{id:{type:String,default:()=>(0,Te.Z)("form-select-many-").value},disabled:{type:Boolean,default:!1},options:{type:Array,required:!0},placeholder:{type:String,default:"Search for options"},value:{type:Array,default:null}},emits:["input"],setup(e,{emit:t}){const a=e;o.vI.add(s.wzR,s.AGO,s.NBC);const l=(0,i.ref)(""),d=(0,i.ref)(!1),c=(0,i.ref)(!1),u=(0,i.computed)((()=>{if(!d.value)return null;try{return new RegExp(l.value,c.value?void 0:"i")}catch(e){return null}})),h=(0,i.computed)({get:()=>Array.isArray(a.value)?a.value:[a.value],set(e){t("input",e)}}),f=(0,i.computed)((()=>d.value&&null===u.value)),m=(0,i.ref)(1e3),_=(0,i.ref)(1e3),v=(0,i.computed)((()=>{var e;return null!==(e=u.value)&&void 0!==e?e:l.value})),{unselectedOptionsFiltered:g,selectedOptionsFiltered:y,running:b,moreUnselected:w,moreSelected:k}=function({optionsArray:e,filter:t,selected:o,unselectedDisplayCount:a,selectedDisplayCount:s,caseSensitive:r}){Oe||(Oe=new Worker(new URL(n.p+n.u(383),n.b))),Ie+=1;const l=Ae++,d=(0,i.ref)([]),c=(0,i.ref)([]),u=(0,i.ref)(!1),h=(0,i.ref)(!1),p=(0,i.ref)(!1),f=e=>{Oe.postMessage({id:l,...e}),p.value=!0};(0,i.onScopeDispose)((()=>{Ie-=1,0===Ie?(Oe.terminate(),Oe=null):(f({type:"clear"}),Oe.removeEventListener("message",m))})),(0,i.watchEffect)((()=>{f({type:"setArray",array:e.value})})),(0,i.watchEffect)((()=>{f({type:"setFilter",filter:t.value})})),(0,i.watchEffect)((()=>{f({type:"setSelected",selected:o.value})})),(0,i.watchEffect)((()=>{f({type:"setSettings",unselectedDisplayCount:a.value,selectedDisplayCount:s.value,caseSensitive:r.value})}));const m=e=>{const t=e.data;t.id===l&&"result"===t.type&&(d.value=t.unselectedOptionsFiltered,c.value=t.selectedOptionsFiltered,u.value=t.moreSelected,h.value=t.moreUnselected,p.value=!1)};return Oe.addEventListener("message",m),{unselectedOptionsFiltered:d,selectedOptionsFiltered:c,moreSelected:u,moreUnselected:h,running:p}}({optionsArray:(0,i.computed)((()=>a.options)),filter:v,selected:h,selectedDisplayCount:m,unselectedDisplayCount:_,caseSensitive:c}),C=(0,Se.Dp)(b,400);function x(e,t,n){e.shiftKey&&e.ctrlKey?n.rangeRemoveHighlight(t):e.shiftKey?n.rangeHighlight(t):e.ctrlKey&&n.toggleHighlight(t)}function S(e,t){var n;const i=document.getElementById(`${a.id}-${e}-${t}`);i?i.focus():null===(n=document.getElementById(`${a.id}-${e}-${t-1}`))||void 0===n||n.focus()}const M=(0,i.reactive)(De(g)),T=(0,i.reactive)(De(y)),L=(0,i.computed)((()=>M.highlightedIndexes.length>0?"Select highlighted":""===l.value?"Select all":"Select filtered")),D=(0,i.computed)((()=>T.highlightedIndexes.length>0?"Deselect highlighted":""===l.value?"Deselect all":"Deselect filtered")),E=(0,i.computed)((()=>{if(""===l.value)return""+(a.options.length-h.value.length);{let e=`${g.value.length}`;return w.value&&(e+="+"),e}})),O=(0,i.computed)((()=>{if(""===l.value)return`${h.value.length}`;{let e=`${y.value.length}`;return k.value&&(e+="+"),e}}));return{__sfc:!0,props:a,emit:t,searchValue:l,useRegex:d,caseSensitive:c,searchRegex:u,selected:h,regexInvalid:f,selectedDisplayCount:m,unselectedDisplayCount:_,filter:v,unselectedOptionsFiltered:g,selectedOptionsFiltered:y,running:b,moreUnselected:w,moreSelected:k,workerRunning:C,handleHighlight:x,focusOptionAtIndex:S,selectOption:function(e,t){return Pe(this,void 0,void 0,(function*(){if(e.shiftKey||e.ctrlKey)x(e,t,M);else{const[e]=g.value.splice(t,1);e&&(h.value=[...h.value,e.value]),yield(0,i.nextTick)(),S("unselected",t)}}))},deselectOption:function(e,t){return Pe(this,void 0,void 0,(function*(){if(e.shiftKey||e.ctrlKey)x(e,t,T);else{const[e]=y.value.splice(t,1);if(e){const t=h.value.indexOf(e.value);h.value=h.value.flatMap(((e,n)=>n===t?[]:[e]))}yield(0,i.nextTick)(),S("selected",t)}}))},selectAll:function(){if(M.highlightedIndexes.length>0){const e=M.highlightedOptions.map((e=>e.value)),t=new Set([...h.value,...e]);h.value=Array.from(t),g.value.filter((t=>e.includes(t.value)))}else if(""===l.value)h.value=a.options.map((e=>e.value)),g.value=[];else{const e=Ee(a.options,v.value,c.value).map((e=>e.value)),t=new Set([...h.value,...e]);h.value=Array.from(t),g.value=[]}},deselectAll:function(){if(T.highlightedIndexes.length>0){const e=new Set(h.value),t=T.highlightedOptions.map((e=>e.value));t.forEach((t=>e.delete(t))),h.value=Array.from(e),y.value.filter((e=>t.includes(e.value)))}else if(""===l.value)h.value=[],y.value=[];else{const e=new Set(h.value);Ee(a.options,v.value,c.value).map((e=>e.value)).forEach((t=>e.delete(t))),h.value=Array.from(e),y.value=[]}},optionOnKey:function(e,t,n){var i;if([" ","Enter"].includes(t.key)&&(t.shiftKey||t.ctrlKey)){return x(t,n,"selected"===e?T:M),void t.preventDefault()}if(!["ArrowUp","ArrowDown"].includes(t.key))return;t.preventDefault();const o="ArrowUp"===t.key?n-1:n+1;null===(i=document.getElementById(`${a.id}-${e}-${o}`))||void 0===i||i.focus()},highlightUnselected:M,highlightSelected:T,selectText:L,deselectText:D,unselectedCount:E,selectedCount:O,FontAwesomeIcon:r.GN,BButton:p.T,BFormInput:Me.e}}});const je=(0,d.Z)(Re,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"form-select-many",attrs:{id:n.props.id}},[t("fieldset",{staticClass:"search-bar"},[t("fieldset",{staticClass:"search-input"},[t(n.BFormInput,{attrs:{type:"search",state:!n.regexInvalid&&void 0,debounce:300,placeholder:n.props.placeholder},model:{value:n.searchValue,callback:function(e){n.searchValue=e},expression:"searchValue"}}),e._v(" "),t("button",{staticClass:"inline-icon-button",class:{hidden:""===n.searchValue},attrs:{title:"Clear search"},on:{click:function(e){n.searchValue=""}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-times"}})],1)],1),e._v(" "),t(n.BButton,{staticClass:"toggle-button case-sensitivity",attrs:{variant:n.caseSensitive?"primary":"outline-primary",role:"switch","aria-checked":`${n.caseSensitive}`,title:"case sensitive"},on:{click:function(e){n.caseSensitive=!n.caseSensitive}}},[e._v("\n            Aa\n        ")]),e._v(" "),t(n.BButton,{staticClass:"toggle-button use-regex",attrs:{variant:n.useRegex?"primary":"outline-primary",role:"switch","aria-checked":`${n.useRegex}`,title:"use regex"},on:{click:function(e){n.useRegex=!n.useRegex}}},[e._v("\n            .*\n        ")])],1),e._v(" "),t("div",{staticClass:"options-box border rounded mt-2"},[t("div",{staticClass:"selection-heading border-right px-2"},[t("span",[e._v("\n                Unselected\n                "),t("span",{staticClass:"font-weight-normal unselected-count"},[e._v(" ("+e._s(n.unselectedCount)+") ")])]),e._v(" "),t(n.BButton,{staticClass:"selection-button select",attrs:{title:n.selectText,variant:"primary"},on:{click:n.selectAll}},[e._v("\n                "+e._s(n.selectText)+"\n                "),t(n.FontAwesomeIcon,{attrs:{icon:"fa-long-arrow-alt-right"}})],1)],1),e._v(" "),t("div",{staticClass:"options-list unselected border-right",attrs:{tabindex:"-1"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault()},blur:n.highlightUnselected.abortHighlight}},[e._l(n.unselectedOptionsFiltered,(function(i,o){return t("button",{key:i.label,class:{highlighted:n.highlightUnselected.highlightedIndexes.includes(o)},attrs:{id:`${n.props.id}-unselected-${o}`,tabindex:0===o?0:-1},on:{click:e=>n.selectOption(e,o),keydown:e=>n.optionOnKey("unselected",e,o)}},[e._v("\n                "+e._s(i.label)+"\n            ")])})),e._v(" "),n.moreUnselected?t("span",{staticClass:"show-more-indicator"},[e._v("\n                Limited to "+e._s(n.unselectedDisplayCount)+" options.\n                "),t("button",{staticClass:"show-more-button",on:{click:function(e){n.unselectedDisplayCount+=500}}},[e._v("Show more")])]):e._e()],2),e._v(" "),t("div",{staticClass:"selection-heading px-2"},[t("span",[e._v("\n                Selected\n                "),t("span",{staticClass:"font-weight-normal selected-count"},[e._v(" ("+e._s(n.selectedCount)+") ")])]),e._v(" "),t(n.BButton,{staticClass:"selection-button deselect",attrs:{title:n.deselectText,variant:"primary"},on:{click:n.deselectAll}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-long-arrow-alt-left"}}),e._v("\n                "+e._s(n.deselectText)+"\n            ")],1)],1),e._v(" "),t("div",{staticClass:"options-list selected",attrs:{tabindex:"-1"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault()},blur:n.highlightSelected.abortHighlight}},[e._l(n.selectedOptionsFiltered,(function(i,o){return t("button",{key:i.label,class:{highlighted:n.highlightSelected.highlightedIndexes.includes(o)},attrs:{id:`${n.props.id}-selected-${o}`,tabindex:0===o?0:-1},on:{click:e=>n.deselectOption(e,o),keydown:e=>n.optionOnKey("selected",e,o)}},[e._v("\n                "+e._s(i.label)+"\n            ")])})),e._v(" "),n.moreSelected?t("span",{staticClass:"show-more-indicator"},[e._v("\n                Limited to "+e._s(n.selectedDisplayCount)+" options.\n                "),t("button",{staticClass:"show-more-button",on:{click:function(e){n.selectedDisplayCount+=500}}},[e._v("Show more")])]):e._e()],2)]),e._v(" "),t("div",{staticClass:"bottom-row-info"},[t("span",[e._v(" Shift to highlight range. Ctrl to highlight multiple ")]),e._v(" "),n.workerRunning?t("span",{staticClass:"working-indicator"},[e._v(" Processing... ")]):e._e()])])}),[],!1,null,"1366e323",null).exports,Ye={__name:"FormSelection",props:{value:{default:null},data:{type:Array,default:null},display:{type:String,default:null},optional:{type:Boolean,default:!1},options:{type:Array,default:null},multiple:{type:Boolean,default:!1}},emits:["input"],setup(e,{emit:t}){const n=e;o.vI.add(s.eW2);const a=(0,i.computed)({get:()=>n.value,set:e=>{t("input",e)}}),l=(0,i.computed)((()=>{let e=[];const t=n.data,i=n.options;return i&&i.length>0?e=i.map((e=>({label:e[0],value:e[1]}))):t&&t.length>0&&(e=t),n.display||n.multiple||!n.optional||e.unshift({label:"Nothing selected",value:null}),e})),d=(0,i.ref)(!1),{preferredFormSelectElement:c}=(0,ye.Jk)((0,be.k)());(0,i.watch)((()=>c.value),((e,t)=>{void 0===t&&("none"===e?Array.isArray(n.value)&&n.value.length>=15||n.options.length>=500?d.value=!0:d.value=!1:d.value="many"===e)}),{immediate:!0});const u=(0,i.computed)((()=>n.multiple&&"checkboxes"!==n.display&&"radio"!==n.display)),h=(0,i.computed)((()=>u.value&&d.value)),p=(0,i.computed)((()=>u.value&&!d.value)),f=(0,i.computed)((()=>h.value));return{__sfc:!0,emit:t,props:n,currentValue:a,currentOptions:l,useMany:d,preferredFormSelectElement:c,showSelectPreference:u,displayMany:h,showManyButton:p,showMultiButton:f,FontAwesomeIcon:r.GN,BDropdown:ve.R,BDropdownItemButton:ge.t,FormCheck:ke,FormRadio:xe,FormSelect:D,FormSelectMany:je}}},He=Ye;const Ne=(0,d.Z)(He,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",["checkboxes"===e.display?t(n.FormCheck,{attrs:{options:n.currentOptions},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"radio"===e.display?t(n.FormRadio,{attrs:{options:n.currentOptions},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):n.displayMany?t(n.FormSelectMany,{attrs:{options:n.currentOptions},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):t(n.FormSelect,{attrs:{multiple:e.multiple,optional:e.optional,options:n.currentOptions},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}),e._v(" "),n.showSelectPreference?t("div",{staticClass:"d-flex"},[n.showManyButton?t("button",{staticClass:"ui-link ml-1",on:{click:function(e){n.useMany=!0}}},[e._v("switch to column select")]):n.showMultiButton?t("button",{staticClass:"ui-link ml-1",on:{click:function(e){n.useMany=!1}}},[e._v("\n            switch to simple select\n        ")]):e._e(),e._v(" "),t(n.BDropdown,{attrs:{"toggle-class":"inline-icon-button d-block px-1",variant:"link","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[t(n.FontAwesomeIcon,{attrs:{icon:"fa-caret-down"}}),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("select element preferences")])]},proxy:!0}],null,!1,2118690317)},[e._v(" "),t(n.BDropdownItemButton,{attrs:{active:"none"===n.preferredFormSelectElement},on:{click:function(e){n.preferredFormSelectElement="none"}}},[e._v("\n                No preference\n            ")]),e._v(" "),t(n.BDropdownItemButton,{attrs:{active:"multi"===n.preferredFormSelectElement},on:{click:function(e){n.preferredFormSelectElement="multi"}}},[e._v("\n                Default to simple select\n            ")]),e._v(" "),t(n.BDropdownItemButton,{attrs:{active:"many"===n.preferredFormSelectElement},on:{click:function(e){n.preferredFormSelectElement="many"}}},[e._v("\n                Default to column select\n            ")])],1)],1):e._e()],1)}),[],!1,null,null,null).exports;var Fe=n(80527);const Be=(0,i.defineComponent)({__name:"FormTags",props:{value:null,placeholder:null},emits:["input"],setup(e,{emit:t}){const n=e,o=(0,i.computed)((()=>{var e,t;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.split(",").map((e=>e.trim())))&&void 0!==t?t:[]}));return{__sfc:!0,props:n,emit:t,valueArray:o,onInput:function(e){t("input",e.join(","))},StatelessTags:Fe.Z}}});const $e=(0,d.Z)(Be,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.StatelessTags,{attrs:{value:t.valueArray,placeholder:t.props.placeholder},on:{input:t.onInput}})}),[],!1,null,null,null).exports;const ze={__name:"FormUpload",props:{value:{required:!0}},emits:["input"],setup(e,{emit:t}){const n=e,o=(0,i.ref)(null),a=(0,i.ref)(!1),s=(0,i.computed)({get:()=>n.value,set(e){t("input",e)}});return{__sfc:!0,props:n,file:o,waiting:a,emit:t,currentValue:s,readFile:function(){var e=new FileReader;o.value&&(a.value=!0,e.onload=()=>{s.value=e.result,a.value=!1},e.readAsText(o.value))},FontAwesomeIcon:r.GN}}};const We=(0,d.Z)(ze,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("b-form-file",{staticClass:"mb-1",on:{input:n.readFile},model:{value:n.file,callback:function(e){n.file=e},expression:"file"}}),e._v(" "),n.waiting?t("div",[t(n.FontAwesomeIcon,{attrs:{icon:"spinner",spin:""}}),e._v("\n        Uploading File...\n    ")],1):e._e(),e._v(" "),t("textarea",{directives:[{name:"show",rawName:"v-show",value:n.currentValue,expression:"currentValue"},{name:"model",rawName:"v-model",value:n.currentValue,expression:"currentValue"}],staticClass:"ui-textarea",attrs:{disabled:""},domProps:{value:n.currentValue},on:{input:function(e){e.target.composing||(n.currentValue=e.target.value)}}})],1)}),[],!1,null,null,null).exports,Ue=(0,i.defineComponent)({__name:"FormElement",props:{id:{default:"identifier"},type:null,value:null,title:null,refreshOnChange:{type:Boolean,default:!1},help:null,error:null,warning:null,disabled:{type:Boolean,default:!1},loading:{type:Boolean},attributes:null,collapsedEnableText:{default:"Enable"},collapsedDisableText:{default:"Disable"},collapsedEnableIcon:{default:"far fa-caret-square-down"},collapsedDisableIcon:{default:"far fa-caret-square-up"},connectedEnableText:{default:"Remove connection from module."},connectedDisableText:{default:"Add connection to module."},connectedEnableIcon:{default:"fa fa-times"},connectedDisableIcon:{default:"fa fa-arrows-alt-h"},workflowBuildingMode:{type:Boolean,default:!1}},emits:["input","change"],setup(e,{emit:t}){const n=e;o.vI.add(s.WV2,s.NBC,s.jev,a.Oz,a.el);const l=(0,i.computed)((()=>n.attributes||(0,i.useAttrs)())),d=(0,i.computed)((()=>l.value.collapsible_value)),u=(0,i.computed)((()=>l.value.default_value)),p={__class__:"ConnectedValue"},f=(0,i.ref)(!1),m=(0,i.ref)(!1),_=(0,i.computed)((()=>!n.disabled&&void 0!==d.value)),v=(0,i.computed)((()=>_.value&&Boolean(l.value.connectable)));{const e=JSON.stringify(n.value);f.value=e===JSON.stringify(p),m.value=f.value||void 0!==d.value&&e===JSON.stringify(d.value)}function g(e){t("input",e,n.id),t("change",n.refreshOnChange)}const y=(0,i.computed)((()=>l.value.hidden)),b=(0,i.computed)((()=>`form-element-${n.id}`)),w=(0,i.computed)((()=>Boolean(n.error||n.warning))),k=(0,i.computed)((()=>m.value&&l.value.collapsible_preview||n.disabled)),C=(0,i.computed)((()=>!m.value&&!n.disabled)),x=(0,i.computed)((()=>l.value.text_value)),S=(0,i.computed)((()=>{var e;const t=l.value.argument;return t&&!(null===(e=n.help)||void 0===e?void 0:e.includes(`(${t})`))?`${n.help} (${t})`:n.help})),M=(0,i.computed)({get:()=>n.value,set(e){g(e)}}),T=(0,i.computed)((()=>{var e;return["hidden","hidden_data","baseurl"].includes(null!==(e=n.type)&&void 0!==e?e:"")||n.attributes&&n.attributes.titleonly})),L=(0,i.computed)((()=>m.value?n.collapsedEnableText:n.collapsedDisableText)),D=(0,i.computed)((()=>f.value?n.connectedEnableText:n.connectedDisableText)),E=(0,i.computed)((()=>{var e;return null===M.value||void 0===M.value||!(!["text","integer","float","password"].includes(null!==(e=n.type)&&void 0!==e?e:"")||""!==M.value)})),A=(0,i.computed)((()=>!1===l.value.optional)),I=(0,i.computed)((()=>"boolean"!==n.type)),P=(0,i.computed)((()=>!A.value&&void 0!==l.value.optional));return{__sfc:!0,props:n,emit:t,attrs:l,collapsibleValue:d,defaultValue:u,connectedValue:p,connected:f,collapsed:m,collapsible:_,connectable:v,setValue:g,onCollapse:function(){m.value=!m.value,f.value=!1,m.value?g(d.value):g(u.value)},onConnect:function(){f.value=!f.value,m.value=f.value,f.value?g(p):g(u.value)},isHidden:y,elementId:b,hasAlert:w,showPreview:k,showField:C,previewText:x,helpText:S,currentValue:M,isHiddenType:T,collapseText:L,connectText:D,isEmpty:E,isRequired:A,isRequiredType:I,isOptional:P,FontAwesomeIcon:r.GN,FormBoolean:c,FormColor:h,FormData:O,FormDataDialog:j,FormDirectory:B,FormDrilldown:G,FormHidden:K,FormInput:Q,FormNumber:te,FormOptionalText:se,FormRulesEdit:_e,FormSelection:Ne,FormTags:$e,FormText:oe,FormUpload:We}}});const Ve=(0,d.Z)(Ue,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{directives:[{name:"show",rawName:"v-show",value:!n.isHidden,expression:"!isHidden"}],staticClass:"ui-form-element section-row",class:{alert:n.hasAlert,"alert-info":n.hasAlert},attrs:{id:n.elementId}},[n.hasAlert?t("div",{staticClass:"ui-form-error"},[t(n.FontAwesomeIcon,{staticClass:"mr-1",attrs:{icon:"fa-exclamation"}}),e._v(" "),t("span",{staticClass:"ui-form-error-text",domProps:{innerHTML:e._s(n.props.error||n.props.warning)}})],1):e._e(),e._v(" "),t("div",{staticClass:"ui-form-title"},[n.collapsible||n.connectable?t("span",[n.collapsible&&!n.connected?t("b-button",{staticClass:"ui-form-collapsible-icon",attrs:{title:n.collapseText},on:{click:n.onCollapse}},[n.collapsed?t(n.FontAwesomeIcon,{attrs:{icon:n.props.collapsedEnableIcon}}):t(n.FontAwesomeIcon,{attrs:{icon:n.props.collapsedDisableIcon}})],1):e._e(),e._v(" "),n.connectable?t("b-button",{staticClass:"ui-form-connected-icon",attrs:{title:n.connectText},on:{click:n.onConnect}},[n.connected?t(n.FontAwesomeIcon,{attrs:{icon:n.props.connectedEnableIcon}}):t(n.FontAwesomeIcon,{attrs:{icon:n.props.connectedDisableIcon}})],1):e._e(),e._v(" "),n.props.title?t("span",{staticClass:"ui-form-title-text ml-1"},[t("label",{attrs:{for:n.props.id}},[e._v(e._s(n.props.title))])]):e._e()],1):n.props.title?t("span",{staticClass:"ui-form-title-text"},[t("label",{attrs:{for:n.props.id}},[e._v(e._s(n.props.title))])]):e._e(),e._v(" "),n.isRequired&&n.isRequiredType&&n.props.title?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ui-form-title-star",class:{warning:n.isEmpty},attrs:{title:"required"}},[e._v("\n            *\n            "),n.isEmpty?t("span",{staticClass:"ui-form-title-message warning"},[e._v(" required ")]):e._e()]):n.isOptional&&n.isRequiredType&&n.props.title?t("span",{staticClass:"ui-form-title-message"},[e._v("\n            - optional\n        ")]):e._e()]),e._v(" "),n.showField?t("div",{staticClass:"ui-form-field",attrs:{"data-label":n.props.title}},["boolean"===n.props.type?t(n.FormBoolean,{attrs:{id:n.props.id},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):n.isHiddenType?t(n.FormHidden,{attrs:{id:n.props.id,info:n.attrs.info},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"integer"===n.props.type||"float"===n.props.type?t(n.FormNumber,{attrs:{id:n.props.id,max:n.attrs.max,min:n.attrs.min,type:n.props.type??"float","workflow-building-mode":e.workflowBuildingMode},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"select"===n.props.type&&n.attrs.is_workflow&&n.attrs.optional?t(n.FormOptionalText,{attrs:{id:e.id,readonly:n.attrs.readonly,value:n.attrs.value,area:n.attrs.area,placeholder:n.attrs.placeholder,multiple:n.attrs.multiple,datalist:n.attrs.datalist,type:n.props.type},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):["text","password"].includes(n.props.type)||n.attrs.is_workflow&&["data_column","drill_down","genomebuild","group_tag","select"].includes(n.props.type)?t(n.FormText,{attrs:{id:e.id,readonly:n.attrs.readonly,value:n.attrs.value,area:n.attrs.area,placeholder:n.attrs.placeholder,color:n.attrs.color,multiple:n.attrs.multiple,cls:n.attrs.cls,datalist:n.attrs.datalist,type:n.props.type},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):void 0===n.props.type&&n.attrs.options||["data_column","genomebuild","group_tag","select"].includes(n.props.type)?t(n.FormSelection,{attrs:{id:e.id,data:n.attrs.data,display:n.attrs.display,options:n.attrs.options,optional:n.attrs.optional,multiple:n.attrs.multiple},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):["data","data_collection"].includes(n.props.type)?t(n.FormData,{attrs:{id:e.id,loading:e.loading,extension:n.attrs.extension,flavor:n.attrs.flavor,multiple:n.attrs.multiple,optional:n.attrs.optional,options:n.attrs.options,tag:n.attrs.tag,type:n.props.type},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"drill_down"===n.props.type?t(n.FormDrilldown,{attrs:{id:e.id,options:n.attrs.options,multiple:n.attrs.multiple},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"data_dialog"===n.props.type?t(n.FormDataDialog,{attrs:{id:e.id,multiple:"true"===n.attrs.multiple},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"color"===n.props.type?t(n.FormColor,{attrs:{id:n.props.id},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"directory_uri"===n.props.type?t(n.FormDirectory,{model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"upload"===n.props.type?t(n.FormUpload,{model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"rules"==n.props.type?t(n.FormRulesEdit,{attrs:{target:n.attrs.target},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):"tags"===n.props.type?t(n.FormTags,{attrs:{placeholder:n.props.attributes?.placeholder},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}}):t(n.FormInput,{attrs:{id:n.props.id,area:n.attrs.area},model:{value:n.currentValue,callback:function(e){n.currentValue=e},expression:"currentValue"}})],1):e._e(),e._v(" "),n.showPreview?t("div",{staticClass:"ui-form-preview pt-1 pl-2 mt-1"},[e._v(e._s(n.previewText))]):e._e(),e._v(" "),Boolean(n.helpText)?t("span",{staticClass:"ui-form-info form-text text-muted",domProps:{innerHTML:e._s(n.helpText)}}):e._e()])}),[],!1,null,"6aa98958",null).exports},18435:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var i=n(70538),o=n(74664),a=n(55914),s=n(9382),r=n(51436),l=n(57810),d=n(38046);var c=n(11411),u=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const h=(0,i.defineComponent)({__name:"FormRepeat",props:{input:{type:Object,required:!0},sustainRepeats:{type:Boolean,default:!1},passthroughProps:{type:Object,required:!0},prefix:{type:String,default:null}},emits:["insert","delete","swap"],setup(e,{emit:t}){const o=e,h=(0,i.defineAsyncComponent)((()=>Promise.resolve().then(n.bind(n,18435)))),p=(0,i.computed)((()=>{var e;return"number"==typeof o.input.max&&(null===(e=o.input.cache)||void 0===e?void 0:e.length)>=o.input.max})),f=(0,i.computed)((()=>{var e;return"number"!=typeof o.input.min||(null===(e=o.input.cache)||void 0===e?void 0:e.length)>o.input.min})),m=(0,i.computed)((()=>p.value?(0,c.ZP)(`Maximum number of ${o.input.title||"Repeat"} fields reached`):(0,c.ZP)(`Click to add ${o.input.title||"Repeat"} fields`))),_=(0,i.computed)((()=>f.value?(0,c.ZP)(`Click to delete ${o.input.title||"Repeat"} fields`):(0,c.ZP)(`Minimum number of ${o.input.title||"Repeat"} fields reached`)));function v(e){const t=`${o.input.name}_${e}`;return o.prefix?`${o.prefix}|${t}`:t}function g(e,t){return`${v(e)}_${t}`}s.vI.add(r.r8p,r.I7k,r.l1h,r.eW2);const{keyObject:y}=function(){const e=new WeakMap;return{keyObject:function(t){const n=e.get(t);if(n)return n;{const n=(0,i.unref)((0,d.Z)("object-"));return e.set(t,n),n}}}}();return{__sfc:!0,FormNode:h,maxRepeats:p,minRepeats:f,buttonTooltip:m,deleteTooltip:_,props:o,emit:t,onInsert:function(){t("insert")},onDelete:function(e){t("delete",e)},getPrefix:v,getTitle:function(e){return`${e+1}: ${o.input.title}`},swap:function(e,n,a){var s,r;return u(this,void 0,void 0,(function*(){if(n>=0&&n<(null===(s=o.input.cache)||void 0===s?void 0:s.length)){t("swap",e,n),yield(0,i.nextTick)();const o=g(n,a);null===(r=document.getElementById(o))||void 0===r||r.focus()}}))},getButtonId:g,keyObject:y,FontAwesomeIcon:l.GN,FormCard:a.Z}}});var p=n(51900);const f=(0,p.Z)(h,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[!n.props.sustainRepeats||n.props.input.cache?.length>0?t("div",[t("div",{staticClass:"font-weight-bold mb-2"},[e._v(e._s(n.props.input.title))]),e._v(" "),n.props.input.help?t("div",{staticClass:"mb-2",attrs:{"data-description":"repeat help"}},[e._v(e._s(n.props.input.help))]):e._e()]):e._e(),e._v(" "),e._l(n.props.input.cache,(function(i,o){return t(n.FormCard,{key:n.keyObject(i),staticClass:"card",attrs:{"data-description":"repeat block",title:n.getTitle(o)},scopedSlots:e._u([{key:"operations",fn:function(){return[n.props.sustainRepeats?e._e():t("span",{staticClass:"float-right"},[t("b-button-group",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"ml-0",attrs:{id:n.getButtonId(o,"up"),title:"move up",role:"button",variant:"link",size:"sm"},on:{click:()=>n.swap(o,o-1,"up")}},[t(n.FontAwesomeIcon,{attrs:{icon:"caret-up"}})],1),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"ml-0",attrs:{id:n.getButtonId(o,"down"),title:"move down",role:"button",variant:"link",size:"sm"},on:{click:()=>n.swap(o,o+1,"down")}},[t(n.FontAwesomeIcon,{attrs:{icon:"caret-down"}})],1)],1),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{title:n.deleteTooltip}},[t("b-button",{staticClass:"ml-0",attrs:{disabled:!n.minRepeats,title:"delete",role:"button",variant:"link",size:"sm"},on:{click:()=>n.onDelete(o)}},[t(n.FontAwesomeIcon,{attrs:{icon:"trash-alt"}})],1)],1)],1)]},proxy:!0},{key:"body",fn:function(){return[t(n.FormNode,e._b({attrs:{inputs:i,prefix:n.getPrefix(o)}},"FormNode",n.props.passthroughProps,!1))]},proxy:!0}],null,!0)})})),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:n.buttonTooltip}},[n.props.sustainRepeats?e._e():t("b-button",{attrs:{disabled:n.maxRepeats},on:{click:n.onInsert}},[t(n.FontAwesomeIcon,{staticClass:"mr-1",attrs:{icon:"plus"}}),e._v(" "),t("span",{attrs:{"data-description":"repeat insert"}},[e._v("Insert "+e._s(n.props.input.title||"Repeat"))])],1)],1)],2)}),[],!1,null,null,null).exports;var m=n(85436);const _={name:"FormNode",components:{FormCard:a.Z,FormElement:m.Z,FormRepeat:f},props:{inputs:{type:Array,default:null},loading:{type:Boolean,default:!1},prefix:{type:String,default:""},sustainRepeats:{type:Boolean,default:!1},sustainConditionals:{type:Boolean,default:!1},collapsedEnableText:{type:String,default:null},collapsedDisableText:{type:String,default:null},collapsedEnableIcon:{type:String,default:null},collapsedDisableIcon:{type:String,default:null},onChange:{type:Function,required:!0},onChangeForm:{type:Function,required:!0},workflowBuildingMode:{type:Boolean,default:!1}},methods:{getPrefix(e,t){return this.prefix?`${this.prefix}|${e}`:e},conditionalPrefix(e,t){return this.getPrefix(`${e.name}|${t}`)},conditionalMatch:(e,t)=>(0,o.BX)(e,e.test_param.value)==t,repeatInsert(e){const t=structuredClone(e.inputs);(0,i.set)(e,"cache",e.cache??[]),e.cache.push(t),this.onChangeForm()},repeatDelete(e,t){e.cache.splice(t,1),this.onChangeForm()},repeatSwap(e,t,n){const i=e.cache[t],o=e.cache[n];e.cache.splice(t,1,o),e.cache.splice(n,1,i),this.onChangeForm()}}};const v=(0,p.Z)(_,(function(){var e=this,t=e._self._c;return t("div",e._l(e.inputs,(function(n,i){return t("div",{key:i},["conditional"==n.type?t("div",{staticClass:"ui-portlet-section mt-3"},[t("div",{staticClass:"portlet-header"},[t("b",[e._v(e._s(n.test_param.label||n.test_param.name))])]),e._v(" "),t("div",{staticClass:"portlet-content"},[t("FormElement",{attrs:{id:e.conditionalPrefix(n,n.test_param.name),type:n.test_param.type,help:n.test_param.help,"refresh-on-change":!1,disabled:e.sustainConditionals,attributes:n.test_param},on:{change:e.onChange},model:{value:n.test_param.value,callback:function(t){e.$set(n.test_param,"value",t)},expression:"input.test_param.value"}}),e._v(" "),e._l(n.cases,(function(i,o){return t("div",{key:o},[e.conditionalMatch(n,o)?t("FormNode",e._b({attrs:{inputs:i.inputs,prefix:e.getPrefix(n.name)}},"FormNode",e.$props,!1)):e._e()],1)}))],2)]):"repeat"==n.type?t("div",[t("FormRepeat",{attrs:{input:n,"sustain-repeats":e.sustainRepeats,"passthrough-props":e.$props,prefix:e.prefix},on:{insert:()=>e.repeatInsert(n),delete:t=>e.repeatDelete(n,t),swap:(t,i)=>e.repeatSwap(n,t,i)}})],1):"section"==n.type?t("div",[t("FormCard",{attrs:{title:n.title||n.name,expanded:n.expanded,collapsible:!0},on:{"update:expanded":function(t){return e.$set(n,"expanded",t)}},scopedSlots:e._u([{key:"body",fn:function(){return[n.help?t("div",{staticClass:"my-2",attrs:{"data-description":"section help"}},[e._v(e._s(n.help))]):e._e(),e._v(" "),t("FormNode",e._b({attrs:{inputs:n.inputs,prefix:e.getPrefix(n.name)}},"FormNode",e.$props,!1))]},proxy:!0}],null,!0)})],1):t("FormElement",{attrs:{id:e.getPrefix(n.name),title:n.label||n.name,type:n.type,error:n.error,warning:n.warning,help:n.help,"refresh-on-change":n.refresh_on_change,attributes:n.attributes||n,"collapsed-enable-text":e.collapsedEnableText,"collapsed-enable-icon":e.collapsedEnableIcon,"collapsed-disable-text":e.collapsedDisableText,"collapsed-disable-icon":e.collapsedDisableIcon,loading:e.loading,"workflow-building-mode":e.workflowBuildingMode},on:{change:e.onChange},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"input.value"}})],1)})),0)}),[],!1,null,null,null).exports},34728:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(60268);const o={props:{summary:{type:i.G,required:!0}}};var a=n(51900);const s={components:{CollectionProgress:(0,a.Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"collection-progress"},[e.summary.isTerminal?e._e():t("b-progress",{attrs:{max:e.summary.jobCount}},[e.summary.errorCount?t("b-progress-bar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.summary.errorCountText,expression:"summary.errorCountText",modifiers:{hover:!0}}],attrs:{value:e.summary.errorCount,variant:"danger"}}):e._e(),e._v(" "),e.summary.okCount?t("b-progress-bar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.summary.okCountText,expression:"summary.okCountText",modifiers:{hover:!0}}],attrs:{value:e.summary.okCount,variant:"success"}}):e._e(),e._v(" "),e.summary.runningCount?t("b-progress-bar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.summary.runningCountText,expression:"summary.runningCountText",modifiers:{hover:!0}}],attrs:{value:e.summary.runningCount,variant:"warning"}}):e._e(),e._v(" "),e.summary.waitingCount?t("b-progress-bar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.summary.waitingCountText,expression:"summary.waitingCountText",modifiers:{hover:!0}}],attrs:{value:e.summary.waitingCount,variant:"secondary"}}):e._e()],1)],1)}),[],!1,null,null,null).exports},props:{jobStateSummary:{type:i.G,required:!0},collectionType:{type:String,required:!0},elementCount:{type:Number,required:!1,default:void 0},elementsDatatypes:{type:Array,required:!1,default:()=>[]}},data:()=>({labels:{list:"list","list:paired":"list","list:list":"list",paired:"pair"}}),computed:{collectionLabel(){return this.labels[this.collectionType]||"nested list"},hasSingleElement(){return 1===this.elementCount},isHomogeneous(){return 1===this.elementsDatatypes.length},homogeneousDatatype(){return this.isHomogeneous?` ${this.elementsDatatypes[0]}`:""},pluralizedItem(){return"list:list"===this.collectionType?this.pluralize("list"):"list:paired"===this.collectionType?this.pluralize("pair"):Object.keys(this.labels).includes(this.collectionType)?this.pluralize("dataset"):this.pluralize("dataset collection")}},methods:{pluralize(e){return this.hasSingleElement?e:`${e}s`}}};const r=(0,a.Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("span",{staticClass:"description mt-1 mb-1"},[e._v("\n        a "+e._s(e.collectionLabel)+" with "+e._s(e.elementCount)),t("b",[e._v(e._s(e.homogeneousDatatype))]),e._v(" "+e._s(e.pluralizedItem)+"\n    ")]),e._v(" "),0!=e.jobStateSummary.size?t("CollectionProgress",{attrs:{summary:e.jobStateSummary}}):e._e()],1)}),[],!1,null,"c904da2c",null).exports},14143:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var i=n(9382),o=n(51436),a=n(57810),s=n(87441),r=n(80527),l=n(37485),d=n(36594),c=n(34728),u=n(60268),h=n(70538),p=n(31642),f=n(74448);const m=(0,h.defineComponent)({__name:"ContentOptions",props:{writable:{type:Boolean,default:!0},isDataset:{type:Boolean,required:!0},isDeleted:{type:Boolean,default:!1},isHistoryItem:{type:Boolean,required:!0},isVisible:{type:Boolean,default:!0},state:{type:String,default:""},itemUrls:{type:Object,required:!0},keyboardSelectable:{type:Boolean,default:!0}},emits:["display","showCollectionInfo","edit","delete","undelete","unhide"],setup(e,{emit:t}){const n=e,i=(0,h.ref)(null),o=(0,h.computed)((()=>a.value?"This dataset is not yet viewable.":"Display")),a=(0,h.computed)((()=>["discarded","new","upload","queued"].includes(n.state))),s=(0,h.computed)((()=>r.value?"This dataset is not yet editable.":"Edit attributes")),r=(0,h.computed)((()=>["discarded","new","upload","queued","running","waiting"].includes(n.state))),l=(0,h.computed)((()=>(0,f.Vd)(n.itemUrls.display))),d=(0,h.computed)((()=>(0,f.Vd)(n.itemUrls.edit))),c=(0,h.computed)((()=>!n.isDataset)),u=(0,h.computed)((()=>n.itemUrls.showDetails)),m=(0,h.computed)((()=>(0,f.Vd)(n.itemUrls.showDetails))),_=(0,h.computed)((()=>n.keyboardSelectable?"0":"-1"));function v(){t("delete")}return{__sfc:!0,props:n,emit:t,deleteCollectionMenu:i,displayButtonTitle:o,displayDisabled:a,editButtonTitle:s,editDisabled:r,displayUrl:l,editUrl:d,isCollection:c,canShowCollectionDetails:u,showCollectionDetailsUrl:m,tabindex:_,onDelete:function(e){var t;c.value?null===(t=i.value)||void 0===t||t.show():v()},onDeleteItem:v,onDeleteItemRecursively:function(){t("delete",!0)},onDisplay:function(e){e.ctrlKey||e.metaKey?window.open(l.value,"_blank"):t("display")},BDropdown:p.R}}});var _=n(51900);const v=(0,_.Z)(m,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{staticClass:"align-self-start btn-group align-items-baseline"},[n.isCollection&&n.canShowCollectionDetails?t("b-button",{staticClass:"collection-job-details-btn px-1",attrs:{title:"Show Details",size:"sm",variant:"link",href:n.showCollectionDetailsUrl},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.emit("showCollectionInfo")}}},[t("icon",{attrs:{icon:"info-circle"}})],1):e._e(),e._v(" "),e.isDataset?t("b-button",{staticClass:"display-btn px-1",attrs:{disabled:n.displayDisabled,title:n.displayButtonTitle,tabindex:n.tabindex,size:"sm",variant:"link",href:n.displayUrl},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onDisplay(e)}}},[t("icon",{attrs:{icon:"eye"}})],1):e._e(),e._v(" "),e.writable&&e.isHistoryItem?t("b-button",{staticClass:"edit-btn px-1",attrs:{disabled:n.editDisabled,title:n.editButtonTitle,tabindex:n.tabindex,size:"sm",variant:"link",href:n.editUrl},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.emit("edit")}}},[t("icon",{attrs:{icon:"pen"}})],1):e._e(),e._v(" "),e.writable&&e.isHistoryItem&&!e.isDeleted?t("b-button",{staticClass:"delete-btn px-1",attrs:{tabindex:n.tabindex,title:"Delete",size:"sm",variant:"link"},on:{click:function(e){return e.stopPropagation(),n.onDelete(e)}}},[e.isDataset?t("icon",{attrs:{icon:"trash"}}):t(n.BDropdown,{ref:"deleteCollectionMenu",attrs:{size:"sm",variant:"link","no-caret":"","toggle-class":"p-0 m-0"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("icon",{attrs:{icon:"trash"}})]},proxy:!0}],null,!1,363826602)},[e._v(" "),t("b-dropdown-item",{attrs:{title:"Delete collection only"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onDeleteItem.apply(null,arguments)}}},[t("icon",{attrs:{icon:"file"}}),e._v("\n                Collection only\n            ")],1),e._v(" "),t("b-dropdown-item",{attrs:{title:"Delete collection and elements"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onDeleteItemRecursively.apply(null,arguments)}}},[t("icon",{attrs:{icon:"copy"}}),e._v("\n                Collection and elements\n            ")],1)],1)],1):e._e(),e._v(" "),e.writable&&e.isHistoryItem&&e.isDeleted?t("b-button",{staticClass:"undelete-btn px-1",attrs:{tabindex:n.tabindex,title:"Undelete",size:"sm",variant:"link"},on:{click:function(e){return e.stopPropagation(),n.emit("undelete")}}},[t("icon",{attrs:{icon:"trash-restore"}})],1):e._e(),e._v(" "),e.writable&&e.isHistoryItem&&!e.isVisible?t("b-button",{staticClass:"unhide-btn px-1",attrs:{tabindex:n.tabindex,title:"Unhide",size:"sm",variant:"link"},on:{click:function(e){return e.stopPropagation(),n.emit("unhide")}}},[t("icon",{attrs:{icon:"eye-slash"}})],1):e._e()],1)}),[],!1,null,null,null).exports;var g=n(67347),y=n(47011),b=n(6987),w=n(43954);const k={computed:{downloadUrl(){return(0,f.Vd)(`api/datasets/${this.item.id}/display?to_ext=${this.item.extension}`)}}},C={mixins:[k],props:{item:{type:Object,required:!0}},computed:{hasMetaFiles(){return this.metaFiles&&this.metaFiles.length>0},metaDownloadUrl(){return(0,f.Vd)(`api/datasets/${this.item.id}/metadata_file?metadata_file=`)},metaFiles(){return this.item.meta_files}},methods:{onDownload(e,t=""){this.$emit("on-download",`${e}${t}`)}}};const x={components:{DatasetDownload:(0,_.Z)(C,(function(){var e=this,t=e._self._c;return e.hasMetaFiles?t("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top.hover",modifiers:{top:!0,hover:!0}}],staticClass:"download-btn",attrs:{dropup:"","no-caret":"","no-flip":"",size:"sm",variant:"link","toggle-class":"text-decoration-none",title:"Download","data-description":"dataset download"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("span",{staticClass:"fa fa-save"})]},proxy:!0}],null,!1,302097916)},[e._v(" "),t("b-dropdown-item",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{href:e.downloadUrl},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onDownload(e.downloadUrl)}}},[e._v("\n        Download Dataset\n    ")]),e._v(" "),e._l(e.metaFiles,(function(n,i){return t("b-dropdown-item",{key:i,attrs:{"data-description":`download ${n.file_type}`,href:e.metaDownloadUrl+n.file_type},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onDownload(e.metaDownloadUrl,n.file_type)}}},[e._v("\n        Download "+e._s(n.file_type)+"\n    ")])}))],2):t("b-button",{staticClass:"download-btn px-1",attrs:{title:"Download",size:"sm",variant:"link",href:e.downloadUrl},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onDownload(e.downloadUrl)}}},[t("span",{staticClass:"fa fa-save"})])}),[],!1,null,null,null).exports},mixins:[k],props:{item:{type:Object,required:!0},writable:{type:Boolean,default:!0},showHighlight:{type:Boolean,default:!1},itemUrls:{type:Object,required:!0}},computed:{showDownloads(){return!this.item.purged&&["ok","failed_metadata","error"].includes(this.item.state)},showError(){return"error"==this.item.state||"failed_metadata"==this.item.state},showInfo(){return"noPermission"!=this.item.state},showRerun(){return this.item.rerunnable&&this.item.creating_job&&"upload"!=this.item.state&&"noPermission"!=this.item.state},showVisualizations(){return!this.item.purged&&["ok","failed_metadata","error"].includes(this.item.state)},reportErrorUrl(){return(0,f.Vd)(this.itemUrls.reportError)},showDetailsUrl(){return(0,f.Vd)(this.itemUrls.showDetails)},rerunUrl(){return(0,f.Vd)(this.itemUrls.rerun)},visualizeUrl(){return(0,f.Vd)(this.itemUrls.visualize)}},methods:{onCopyLink(){const e=this.localize("Link copied to your clipboard");(0,w.J)((0,f.y3)(this.downloadUrl),e)},onDownload(e){window.location.href=e},onError(){this.$router.push(this.itemUrls.reportError)},onInfo(){this.$router.push(this.itemUrls.showDetails)},onRerun(){this.$router.push(`/root?job_id=${this.item.creating_job}`,{force:!0})},onVisualize(){const e=`Visualization of ${this.item.name||""}`;this.$router.push(this.itemUrls.visualize,{title:e})},onHighlight(){this.$emit("toggleHighlights")}}};const S=(0,_.Z)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"dataset-actions mb-1"},[t("div",{staticClass:"clearfix"},[t("div",{staticClass:"btn-group float-left"},[e.showError?t("b-button",{staticClass:"px-1",attrs:{title:"Error",size:"sm",variant:"link",href:e.reportErrorUrl},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onError.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-bug"})]):e._e(),e._v(" "),e.showDownloads?t("DatasetDownload",{attrs:{item:e.item},on:{"on-download":e.onDownload}}):e._e(),e._v(" "),e.showDownloads?t("b-button",{staticClass:"px-1",attrs:{title:"Copy Link",size:"sm",variant:"link"},on:{click:function(t){return t.stopPropagation(),e.onCopyLink.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-link"})]):e._e(),e._v(" "),e.showInfo?t("b-button",{staticClass:"params-btn px-1",attrs:{title:"Dataset Details",size:"sm",variant:"link",href:e.showDetailsUrl},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onInfo.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-info-circle"})]):e._e(),e._v(" "),e.writable&&e.showRerun?t("b-button",{staticClass:"rerun-btn px-1",attrs:{title:"Run Job Again",size:"sm",variant:"link",href:e.rerunUrl},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onRerun.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-redo"})]):e._e(),e._v(" "),e.showVisualizations?t("b-button",{staticClass:"visualize-btn px-1",attrs:{title:"Visualize",size:"sm",variant:"link",href:e.visualizeUrl},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onVisualize.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-bar-chart-o"})]):e._e(),e._v(" "),e.showHighlight?t("b-button",{staticClass:"highlight-btn px-1",attrs:{title:"Show Related Items",size:"sm",variant:"link"},on:{click:function(t){return t.stopPropagation(),e.onHighlight.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-sitemap"})]):e._e(),e._v(" "),e.showRerun?t("b-button",{staticClass:"px-1",attrs:{title:"Help",size:"sm",variant:"link"},on:{click:function(t){return t.stopPropagation(),e.onRerun.apply(null,arguments)}}},[t("span",{staticClass:"fa fa-question"})]):e._e()],1)])])}),[],!1,null,null,null).exports,M=(0,h.defineComponent)({__name:"DatasetDetails",props:{id:null,writable:{type:Boolean,default:!0},showHighlight:{type:Boolean,default:!1},itemUrls:null},emits:["toggleHighlights"],setup(e,{emit:t}){const n=e,i=(0,b.A)(),o=(0,h.computed)((()=>i.getDataset(n.id))),a=(0,h.computed)((()=>i.isLoadingDataset(n.id))),s=(0,h.computed)((()=>o.value&&y.P[o.value.state]&&y.P[o.value.state].text));return{__sfc:!0,datasetStore:i,props:n,emit:t,result:o,isLoading:a,stateText:s,toggleHighlights:function(){t("toggleHighlights")},BLink:g.we,DatasetActions:S}}});const T=(0,_.Z)(M,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[n.result&&!n.isLoading?t("div",{staticClass:"dataset"},[t("div",{staticClass:"p-2 details not-loading"},[t("div",{staticClass:"summary"},[n.stateText?t("div",{staticClass:"mb-1"},[e._v(e._s(n.stateText))]):n.result.misc_blurb?t("div",{staticClass:"blurb"},[t("span",{staticClass:"value"},[e._v(e._s(n.result.misc_blurb))])]):e._e(),e._v(" "),n.result.file_ext?t("span",{staticClass:"datatype"},[t("label",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"prompt"},[e._v("format")]),e._v(" "),t("span",{staticClass:"value"},[e._v(e._s(n.result.file_ext))])]):e._e(),e._v(" "),n.result.genome_build?t("span",{staticClass:"dbkey"},[t("label",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"prompt"},[e._v("database")]),e._v(" "),t(n.BLink,{staticClass:"value",attrs:{"data-label":"Database/Build"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit")}}},[e._v(e._s(n.result.genome_build))])],1):e._e(),e._v(" "),n.result.misc_info?t("div",{staticClass:"info"},[t("span",{staticClass:"value"},[e._v(e._s(n.result.misc_info))])]):e._e()]),e._v(" "),t(n.DatasetActions,{attrs:{item:n.result,writable:e.writable,"show-highlight":e.showHighlight,"item-urls":e.itemUrls},on:{toggleHighlights:n.toggleHighlights}}),e._v(" "),n.result.peek?t("pre",{staticClass:"dataset-peek p-1",domProps:{innerHTML:e._s(n.result.peek)}}):e._e()],1)]):t("div",{staticClass:"dataset"},[t("div",{staticClass:"p-2 details loading"},[t("div",{staticClass:"summary"},[e._m(0),e._v(" "),t("span",{staticClass:"datatype"},[t("label",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"prompt"},[e._v("format")]),e._v(" "),t("span",{staticClass:"value"},[e._v("...")])]),e._v(" "),t("span",{staticClass:"dbkey"},[t("label",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"prompt"},[e._v("database")]),e._v(" "),t("span",{staticClass:"value"},[e._v("?")])]),e._v(" "),e._m(1)]),e._v(" "),e._m(2),e._v(" "),e._m(3)])])])}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"blurb"},[t("span",{staticClass:"value"},[e._v("? lines")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"info"},[t("span",{staticClass:"value"},[e._v("Loading")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"dataset-actions mb-1"},[t("div",{staticClass:"clearfix"},[t("div",{staticClass:"btn-group float-left"},[t("button",{staticClass:"btn px-1 btn-link btn-sm",attrs:{disabled:""}},[t("span",{staticClass:"fa fa-save"})]),e._v(" "),t("button",{staticClass:"btn px-1 btn-link btn-sm",attrs:{disabled:""}},[t("span",{staticClass:"fa fa-link"})]),e._v(" "),t("button",{staticClass:"btn px-1 btn-link btn-sm",attrs:{disabled:""}},[t("span",{staticClass:"fa fa-info-circle"})]),e._v(" "),t("button",{staticClass:"btn px-1 btn-link btn-sm",attrs:{disabled:""}},[t("span",{staticClass:"fa fa-bar-chart-o"})]),e._v(" "),t("button",{staticClass:"btn px-1 btn-link btn-sm",attrs:{disabled:""}},[t("span",{staticClass:"fa fa-sitemap"})])])])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("pre",{staticClass:"dataset-peek p-1"},[t("table",{attrs:{cellspacing:"0",cellpadding:"3"}},[t("tbody",[t("tr",[t("td",[e._v("Dataset peek loading...")])])])])])}],!1,null,"0a73f676",null).exports;i.vI.add(o.M3_,o.DY,o.f8k,o.LM3);const L={components:{CollectionDescription:c.Z,ContentOptions:v,DatasetDetails:T,StatelessTags:r.Z,FontAwesomeIcon:a.GN},props:{id:{type:Number,required:!0},item:{type:Object,required:!0},name:{type:String,required:!0},expandDataset:{type:Boolean,default:!1},writable:{type:Boolean,default:!0},addHighlightBtn:{type:Boolean,default:!1},highlight:{type:String,default:null},isDataset:{type:Boolean,default:!0},isHistoryItem:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},isPlaceholder:{type:Boolean,default:!1}},computed:{jobState(){return new u.G(this.item)},contentId(){return`dataset-${this.item.id}`},contentCls(){const e=this.contentState&&this.contentState.status;return this.selected?"alert-info":e?`alert-${e}`:"alert-success"},contentState(){return y.P[this.state]&&y.P[this.state]},hasTags(){return this.tags&&this.tags.length>0},hasStateIcon(){return this.contentState&&this.contentState.icon},state(){if(this.isPlaceholder)return"placeholder";if(this.item.job_state_summary){for(const e of y.D)if(this.item.job_state_summary[e]>0)return e}else if(this.item.state)return this.item.state;return"ok"},tags(){return this.item.tags},tagsDisabled(){return!this.writable||!this.expandDataset||!this.isHistoryItem},isCollection(){return"collection_type"in this.item},itemUrls(){const e=this.item.id;return this.isCollection?{edit:`/collection/${e}/edit`,showDetails:this.item.job_source_id&&"Job"===this.item.job_source_type?`/jobs/${this.item.job_source_id}/view`:null}:{display:`/datasets/${e}/preview`,edit:`/datasets/${e}/edit`,showDetails:`/datasets/${e}/details`,reportError:`/datasets/${e}/error`,rerun:`/tool_runner/rerun?id=${e}`,visualize:`/visualizations?dataset_id=${e}`}},isBeingUsed(){return Object.values(this.itemUrls).includes(this.$route.path)?"being-used":""}},methods:{onKeyDown(e){e.target.classList.contains("content-item")&&("Enter"!==e.key&&" "!==e.key||this.onClick())},onClick(){this.isPlaceholder||(this.isDataset?this.$emit("update:expand-dataset",!this.expandDataset):this.$emit("view-collection",this.item,this.name))},onDisplay(){const e=(0,l.B)().entryPointsForHda(this.item.id);if(e&&e.length>0){const t=e[0].target;window.open(t,"_blank")}else this.$router.currentRoute.path===this.itemUrls.display?this.$router.push(this.itemUrls.display,{title:this.name,force:!0}):this.$router.push(this.itemUrls.display,{title:this.name})},onDelete(e=!1){this.$emit("delete",this.item,e)},onDragStart(e){(0,d.f)(e,this.item)},onDragEnd:function(){(0,d.s)()},onEdit(){this.$router.push(this.itemUrls.edit)},onShowCollectionInfo(){this.$router.push(this.itemUrls.showDetails)},onTags(e){this.$emit("tag-change",this.item,e),(0,s.NC)(this.item,{tags:e})},onTagClick(e){this.filterable&&this.$emit("tag-click",e)},toggleHighlights(){this.$emit("toggleHighlights",this.item)}}};const D=(0,_.Z)(L,(function(){var e=this,t=e._self._c;return t("div",{class:["content-item m-1 p-0 rounded btn-transparent-background",e.contentCls,e.isBeingUsed],attrs:{id:e.contentId,"data-hid":e.id,"data-state":e.state,tabindex:"0",role:"button"},on:{keydown:e.onKeyDown}},[t("div",{staticClass:"p-1 cursor-pointer",attrs:{draggable:""},on:{dragstart:e.onDragStart,dragend:e.onDragEnd,click:function(t){return t.stopPropagation(),e.onClick.apply(null,arguments)}}},[t("div",{staticClass:"d-flex justify-content-between"},[t("span",{staticClass:"p-1",attrs:{"data-description":"content item header info"}},[e.selectable?t("b-button",{staticClass:"selector p-0",on:{click:function(t){return t.stopPropagation(),e.$emit("update:selected",!e.selected)}}},[e.selected?t("icon",{attrs:{"fixed-width":"",size:"lg",icon:["far","check-square"]}}):t("icon",{attrs:{"fixed-width":"",size:"lg",icon:["far","square"]}})],1):e._e(),e._v(" "),"input"==e.highlight?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"p-0",attrs:{variant:"link",title:"Input"},on:{click:function(t){return t.stopPropagation(),e.toggleHighlights.apply(null,arguments)}}},[t("FontAwesomeIcon",{staticClass:"text-info",attrs:{icon:"arrow-circle-up"}})],1):"active"==e.highlight?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"p-0",attrs:{variant:"link",title:"Inputs/Outputs highlighted for this item"},on:{click:function(t){return t.stopPropagation(),e.toggleHighlights.apply(null,arguments)},keypress:e.toggleHighlights}},[t("FontAwesomeIcon",{attrs:{icon:"check-circle"}})],1):"output"==e.highlight?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"p-0",attrs:{variant:"link",title:"Output"},on:{click:function(t){return t.stopPropagation(),e.toggleHighlights.apply(null,arguments)}}},[t("FontAwesomeIcon",{staticClass:"text-info",attrs:{icon:"arrow-circle-down"}})],1):e._e(),e._v(" "),e.hasStateIcon?t("span",{staticClass:"state-icon"},[t("icon",{attrs:{"fixed-width":"",icon:e.contentState.icon,spin:e.contentState.spin}})],1):e._e(),e._v(" "),t("span",{staticClass:"id hid"},[e._v(e._s(e.id)+":")]),e._v(" "),t("span",{staticClass:"content-title name font-weight-bold"},[e._v(e._s(e.name))])],1),e._v(" "),e.item.purged?t("span",{staticClass:"align-self-start btn-group p-1"},[t("b-badge",{attrs:{variant:"secondary",title:"This dataset has been permanently deleted"}},[t("icon",{attrs:{icon:"burn"}}),e._v(" Purged\n                ")],1)],1):e._e(),e._v(" "),e.isPlaceholder||e.item.purged?e._e():t("ContentOptions",{attrs:{writable:e.writable,"is-dataset":e.isDataset,"is-deleted":e.item.deleted,"is-history-item":e.isHistoryItem,"is-visible":e.item.visible,state:e.state,"item-urls":e.itemUrls,"keyboard-selectable":e.expandDataset},on:{delete:e.onDelete,display:e.onDisplay,showCollectionInfo:e.onShowCollectionInfo,edit:e.onEdit,undelete:function(t){return e.$emit("undelete")},unhide:function(t){return e.$emit("unhide")}}})],1)]),e._v(" "),e.isDataset?e._e():t("CollectionDescription",{staticClass:"px-2 pb-2",attrs:{"job-state-summary":e.jobState,"collection-type":e.item.collection_type,"element-count":e.item.element_count,"elements-datatypes":e.item.elements_datatypes}}),e._v(" "),!e.tagsDisabled||e.hasTags?t("StatelessTags",{attrs:{value:e.tags,disabled:e.tagsDisabled,clickable:e.filterable,"use-toggle-link":!1},on:{input:e.onTags,"tag-click":e.onTagClick}}):e._e(),e._v(" "),t("b-collapse",{attrs:{visible:e.expandDataset}},[e.expandDataset&&e.item.id?t("DatasetDetails",{attrs:{id:e.item.id,writable:e.writable,"show-highlight":e.isHistoryItem&&e.filterable||e.addHighlightBtn,"item-urls":e.itemUrls},on:{edit:e.onEdit,toggleHighlights:e.toggleHighlights}}):e._e()],1)],1)}),[],!1,null,"d0aebe5a",null).exports},75515:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(45264),o=n(28732),a=n(87441),s=n(2461),r=n(66680),l=n(92865),d=n(14143),c=n(70538);const u=(0,c.defineComponent)({__name:"GenericElement",props:{dsc:{type:Object,required:!0}},setup:e=>({__sfc:!0,expandCollections:(0,c.ref)({}),expandDatasets:(0,c.ref)({}),toggle:function(e,t){c.default.set(e,t,!e[t])},ContentItem:d.Z})});var h=n(51900);const p=(0,h.Z)(u,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",e._l(e.dsc.elements,(function(i,o){return t("div",{key:o},[t(n.ContentItem,{staticClass:"mx-3",attrs:{id:i.element_index+1,item:i.object,name:i.element_identifier,"is-dataset":"hda"==i.element_type,"expand-dataset":!!n.expandDatasets[i.id]},on:{"update:expand-dataset":function(e){return n.toggle(n.expandDatasets,i.id)},"view-collection":function(e){return n.toggle(n.expandCollections,i.id)}}}),e._v(" "),n.expandCollections[i.id]?t("div",{staticClass:"mx-3"},[t("GenericElement",{attrs:{dsc:i.object}})],1):e._e()],1)})),0)}),[],!1,null,null,null).exports,f={components:{DatasetCollectionElementProvider:r.ZS,ContentItem:d.Z,GenericElement:p,DatasetProvider:s.zx,DatasetCollectionProvider:s.S9,LoadingSpan:i.Z},props:{itemId:{type:String,required:!0},itemSrc:{type:String,required:!0}},data:()=>({viewCollection:!1,expandDataset:!1}),computed:{providerComponent(){switch(this.itemSrc){case"hda":return"DatasetProvider";case"hdca":return"DatasetCollectionProvider";case"dce":return"DatasetCollectionElementProvider";default:throw Error(`Unknown element src ${this.itemSrc}`)}}},methods:{...(0,o.nv)(l.z,["applyFilters"]),onDelete(e,t=!1){(0,a.yd)(e,{recursive:t})},onUndelete(e){(0,a.NC)(e,{deleted:!1})},onHide(e){(0,a.NC)(e,{visible:!1})},onUnhide(e){(0,a.NC)(e,{visible:!0})},async onHighlight(e){const{history_id:t}=e,n={deleted:e.deleted,visible:e.visible,related:e.hid};try{await this.applyFilters(t,n)}catch(e){this.onError(e)}}}};const m=(0,h.Z)(f,(function(){var e=this,t=e._self._c;return t(e.providerComponent,{tag:"component",attrs:{id:e.itemId,"auto-refresh":""},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i}){return[i?t("LoadingSpan",{attrs:{message:"Loading dataset"}}):t("div",[t("ContentItem",{attrs:{id:n.hid??n.element_index+1,"add-highlight-btn":"","is-history-item":"",item:n?.object||n,name:n.name||n.element_identifier,"expand-dataset":e.expandDataset,"is-dataset":"dataset"==n.history_content_type||"hda"==n.element_type},on:{"update:expand-dataset":function(t){e.expandDataset=t},"view-collection":function(t){e.viewCollection=!e.viewCollection},delete:e.onDelete,toggleHighlights:function(t){return e.onHighlight(n)},undelete:function(t){return e.onUndelete(n)},unhide:function(t){return e.onUnhide(n)}}}),e._v(" "),e.viewCollection?t("div",[t("GenericElement",{attrs:{dsc:n?.object||n}})],1):e._e()],1)]}}])})}),[],!1,null,null,null).exports},25541:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9382),o=n(51436),a=n(57810);i.vI.add(o.V9$,o.TTL);const s={components:{FontAwesomeIcon:a.GN},props:{codeLabel:String,codeItem:String},data:()=>({mouseIsDown:!1,mouseMoved:!1,expanded:!1}),computed:{action(){return this.expanded?"collapse":"expand"},codeClass(){return this.expanded?"code":"code preview"},iconClass(){return this.expanded?["fas","compress-alt"]:["fas","expand-alt"]}},methods:{toggleExpanded(){this.mouseIsDown=!1,this.codeItem&&!this.mouseMoved&&(this.expanded=!this.expanded)}}};const r=(0,n(51900).Z)(s,(function(){var e=this,t=e._self._c;return t("tr",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:`click to ${e.action}`},on:{mousedown:function(t){e.mouseIsDown=!0},mousemove:function(t){e.mouseIsDown?e.mouseMoved=!0:e.mouseMoved=!1},mouseup:function(t){return e.toggleExpanded()}}},[t("td",[e._v("\n        "+e._s(e.codeLabel)+"\n    ")]),e._v(" "),e.codeItem?t("td",[t("b-row",{attrs:{"align-v":"center"}},[t("b-col",{attrs:{cols:"11"}},[t("pre",{class:e.codeClass},[e._v(e._s(e.codeItem))])]),e._v(" "),t("b-col",{staticClass:"nopadding pointer"},[t("FontAwesomeIcon",{attrs:{icon:e.iconClass}})],1)],1)],1):t("td",[t("i",[e._v("empty")])])])}),[],!1,null,"86fc474a",null).exports},68954:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(79167),o=n(57498),a=n(19046),s=n(784),r=n(33926),l=n(40961),d=n(86290),c=n(74897);const u={components:{CodeRow:n(25541).Z,DecodedId:c.Z,JobDetailsProvider:o.Cd,UtcDate:a.Z,CopyToClipboard:i.Z},props:{job_id:{type:String,required:!0},includeTimes:{type:Boolean,default:!1}},data:()=>({job:null}),computed:{runTime:function(){return(0,s.Z)((0,r.Z)({start:new Date(this.job.create_time),end:new Date(this.job.update_time)}))},jobIsTerminal(){return this.job&&!d.Z.NON_TERMINAL_STATES.includes(this.job.state)}},methods:{getAppRoot:()=>(0,l.getAppRoot)(),updateJob(e){this.job=e}}};const h=(0,n(51900).Z)(u,(function(){var e=this,t=e._self._c;return t("div",[t("JobDetailsProvider",{attrs:{"auto-refresh":"","job-id":e.job_id},on:{"update:result":e.updateJob}}),e._v(" "),t("h2",{staticClass:"h-md"},[e._v("Job Information")]),e._v(" "),t("table",{staticClass:"tabletip info_data_table",attrs:{id:"job-information"}},[t("tbody",[e.job&&e.job.tool_id?t("tr",[t("td",[e._v("Galaxy Tool ID")]),e._v(" "),t("td",{attrs:{id:"galaxy-tool-id"}},[e._v("\n                    "+e._s(e.job.tool_id)+"\n                    "),t("CopyToClipboard",{attrs:{message:"Tool ID was copied to your clipboard",text:e.job.tool_id,title:"Copy Tool ID"}})],1)]):e._e(),e._v(" "),e.job&&e.job.state?t("tr",[t("td",[e._v("Job State")]),e._v(" "),t("td",{attrs:{"data-description":"galaxy-job-state"}},[e._v(e._s(e.job.state))])]):e._e(),e._v(" "),e.job&&e.job.tool_version?t("tr",[t("td",[e._v("Galaxy Tool Version")]),e._v(" "),t("td",{attrs:{id:"galaxy-tool-version"}},[e._v(e._s(e.job.tool_version))])]):e._e(),e._v(" "),e.job&&e.includeTimes?t("tr",[t("td",[e._v("Created")]),e._v(" "),e.job.create_time?t("td",{attrs:{id:"created"}},[t("UtcDate",{attrs:{date:e.job.create_time,mode:"pretty"}})],1):e._e()]):e._e(),e._v(" "),e.job&&e.includeTimes?t("tr",[t("td",[e._v("Updated")]),e._v(" "),e.job.update_time?t("td",{attrs:{id:"updated"}},[t("UtcDate",{attrs:{date:e.job.update_time,mode:"pretty"}})],1):e._e()]):e._e(),e._v(" "),e.job&&e.includeTimes&&e.jobIsTerminal?t("tr",[t("td",[e._v("Time To Finish")]),e._v(" "),t("td",{attrs:{id:"runtime"}},[e._v("\n                    "+e._s(e.runTime)+"\n                ")])]):e._e(),e._v(" "),e.job?t("CodeRow",{attrs:{id:"command-line","code-label":"Command Line","code-item":e.job.command_line}}):e._e(),e._v(" "),e.job?t("CodeRow",{attrs:{id:"stdout","code-label":"Tool Standard Output","code-item":e.job.tool_stdout}}):e._e(),e._v(" "),e.job?t("CodeRow",{attrs:{id:"stderr","code-label":"Tool Standard Error","code-item":e.job.tool_stderr}}):e._e(),e._v(" "),e.job&&e.job.traceback?t("CodeRow",{attrs:{id:"traceback","code-label":"Unexpected Job Errors","code-item":e.job.traceback}}):e._e(),e._v(" "),e.job?t("tr",[t("td",[e._v("Tool Exit Code")]),e._v(" "),t("td",{attrs:{id:"exit-code"}},[e._v(e._s(e.job.exit_code))])]):e._e(),e._v(" "),e.job&&e.job.job_messages&&e.job.job_messages.length>0?t("tr",{attrs:{id:"job-messages"}},[t("td",[e._v("Job Messages")]),e._v(" "),t("td",[t("ul",{staticStyle:{"padding-left":"15px","margin-bottom":"0px"}},e._l(e.job.job_messages,(function(n,i){return t("li",{key:i},[e._v(e._s(n))])})),0)])]):e._e(),e._v(" "),e._t("default"),e._v(" "),e.job&&e.job.id?t("tr",[t("td",[e._v("Job API ID")]),e._v(" "),t("td",{attrs:{id:"encoded-job-id"}},[e._v(e._s(e.job.id)+" "),t("DecodedId",{attrs:{id:e.job.id}})],1)]):e._e(),e._v(" "),e.job&&e.job.copied_from_job_id?t("tr",[t("td",[e._v("Copied from Job API ID")]),e._v(" "),t("td",{attrs:{id:"encoded-copied-from-job-id"}},[e._v("\n                    "+e._s(e.job.copied_from_job_id)+" "),t("DecodedId",{attrs:{id:e.job.copied_from_job_id}})],1)]):e._e()],2)])],1)}),[],!1,null,null,null).exports},76542:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(51120),o=n(75357),a=n(40961),s=n(70538),r=n(75515);const l={components:{GenericHistoryItem:r.Z},props:{jobOutputs:Object,title:{type:String,required:!1},paginate:{type:Boolean,default:!1}},data:()=>({firstN:10}),computed:{entries(){return Object.entries(this.jobOutputs).filter((([e,t])=>!e.startsWith("__")))},nonHiddenOutputs(){return this.paginate?Object.fromEntries(this.entries.slice(0,this.firstN)):Object.fromEntries(this.entries)},totalLength(){return this.entries.length}}};var d=n(51900);const c=(0,d.Z)(l,(function(){var e=this,t=e._self._c;return t("div",[e.title?t("h2",{staticClass:"h-md"},[e._v("\n        "+e._s(e.title)+"\n        "),e.paginate&&e.totalLength>e.firstN?t("span",[e._v(" (showing "+e._s(e.firstN)+" of "+e._s(e.totalLength)+") ")]):e._e()]):e._e(),e._v(" "),t("table",{staticClass:"tabletip info_data_table",attrs:{id:"job-outputs"}},[e._m(0),e._v(" "),e.jobOutputs?t("tbody",[e._l(e.nonHiddenOutputs,(function(n,i){return t("tr",{key:i},[t("td",[e._v("\n                    "+e._s(n[0].label||i)+"\n                ")]),e._v(" "),t("td",e._l(n,(function(e,n){return t("GenericHistoryItem",{key:n,attrs:{"item-id":e.value.id,"item-src":e.value.src}})})),1)])})),e._v(" "),e.paginate&&e.totalLength>e.firstN?t("tr",[t("td",{attrs:{colspan:"2"}},[t("b-button",{attrs:{id:"paginate-btn",block:"",variant:"secondary"},on:{click:function(t){e.firstN+=10}}},[e._v("\n                        Show "+e._s(e.totalLength-e.firstN>=10?10:e.totalLength-e.firstN)+" more outputs\n                    ")])],1)]):e._e()],2):e._e()])])}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Tool Outputs")]),e._v(" "),t("th",[e._v("Dataset")])])])}],!1,null,null,null).exports;const u={components:{GenericHistoryItem:r.Z},props:{parameter_value:{type:Array}}};const h=(0,d.Z)(u,(function(){var e=this,t=e._self._c;return t("div",e._l(e.parameter_value,(function(n,i){return t("div",{key:i},[["hda","hdca","dce"].includes(n.src)?t("GenericHistoryItem",{attrs:{"item-id":n.id,"item-src":n.src}}):t("span",[e._v(" "+e._s(n.hid)+": "+e._s(n.name)+" ")])],1)})),0)}),[],!1,null,null,null).exports;s.default.use(o.ZPm);const p={components:{JobOutputs:c,JobParametersArrayValue:h},props:{jobId:{type:String,default:null},datasetId:{type:String,default:null},datasetType:{type:String,default:"hda"},param:{type:String,default:void 0},includeTitle:{type:Boolean,default:!0}},data:()=>({parameters:[],outputs:{},hasParameterErrors:!1,isSingleParam:!1}),computed:{anyNotes:function(){let e=!1;return this.parameters.forEach((t=>{e=e||t.notes})),e},singleParam:function(){if(!this.isSingleParam)return;const e=this.parameters.find((e=>e.text===this.param));return e?e.value:`Parameter "${this.param}" is not found!`}},created:function(){let e;e=this.jobId?`${(0,a.getAppRoot)()}api/jobs/${this.jobId}/parameters_display`:`${(0,a.getAppRoot)()}api/datasets/${this.datasetId}/parameters_display?hda_ldda=${this.datasetType}`,this.ajaxCall(e),this.isSingleParam=void 0!==this.param&&"undefined"!==this.param},methods:{appRoot:function(){return(0,a.getAppRoot)()},ajaxCall:function(e){i.Z.get(e).then((e=>e.data)).then((e=>{this.hasParameterErrors=e.has_parameter_errors,this.parameters=e.parameters,this.outputs=e.outputs||{}})).catch((e=>{console.error(e)}))}}};const f=(0,d.Z)(p,(function(){var e=this,t=e._self._c;return t("div",[e.isSingleParam?e._e():t("div",{staticClass:"tool-parameters"},[e.includeTitle?t("h2",{staticClass:"h-md"},[e._v("Tool Parameters")]):e._e(),e._v(" "),t("table",{staticClass:"tabletip info_data_table",attrs:{id:"tool-parameters"}},[t("thead",[t("tr",[t("th",[e._v("Input Parameter")]),e._v(" "),t("th",[e._v("Value")]),e._v(" "),e.anyNotes?t("th",[e._v("Note for rerun")]):e._e()])]),e._v(" "),t("tbody",e._l(e.parameters,(function(n,i){return t("tr",{key:i},[t("td",{style:{"padding-left":10*(n.depth-1)+"px"}},[e._v("\n                        "+e._s(n.text)+"\n                    ")]),e._v(" "),Array.isArray(n.value)?t("td",[t("JobParametersArrayValue",{attrs:{parameter_value:n.value}})],1):t("td",{staticClass:"tool-parameter-value"},[e._v("\n                        "+e._s(n.value)+"\n                    ")]),e._v(" "),e.anyNotes?t("td",[n.notes?t("em",[e._v(e._s(n.notes))]):e._e()]):e._e()])})),0)]),e._v(" "),t("b-alert",{attrs:{show:e.hasParameterErrors,variant:"danger"}},[e._v("\n            One or more of your original parameters may no longer be valid or displayed properly.\n        ")])],1),e._v(" "),e.isSingleParam?t("div",{attrs:{id:"single-param"}},[Array.isArray(e.singleParam)?t("div",[t("JobParametersArrayValue",{attrs:{parameter_value:e.singleParam}})],1):t("td",[e._v("\n            "+e._s(e.singleParam)+"\n        ")])]):e._e(),e._v(" "),t("br"),e._v(" "),t("JobOutputs",{attrs:{"job-outputs":e.outputs,paginate:"",title:"Job Outputs"}})],1)}),[],!1,null,"1467bbe8",null).exports},45264:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const i={props:{classes:{type:String,required:!1,default:null},message:{type:String,default:"Loading"},spinnerOnly:{type:Boolean,required:!1,default:!1}},computed:{spinnerClasses(){return["loading-icon","fa","fa-spinner","fa-spin"].concat(this.classes?this.classes.split(" "):[])}}};const o=(0,n(51900).Z)(i,(function(){var e=this,t=e._self._c;return t("span",[t("span",{class:e.spinnerClasses,attrs:{title:"loading"}}),e._v(" "),e.spinnerOnly?e._e():t("span",{staticClass:"loading-message"},[e._v(e._s(e.message)+"."),t("span",{staticClass:"blinking"},[e._v("..")])])])}),[],!1,null,null,null).exports},34003:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var i=n(47050),o=n.n(i),a=n(81924),s=n(51120),r=n(75357),l=n(55806),d=n.n(l);const c={props:["options","value","placeholder","containerClass","enabled"],watch:{value:function(e){d()(this.$el).val(e)},options:function(e){d()(this.$el).empty().select2({data:e})},enabled:function(e){d()(this.$el).select2("enable",e)}},mounted:function(){const e=this;let t=this.enabled;void 0===t&&(t=!0);const n={data:this.options,placeholder:this.placeholder,allowClear:!!this.placeholder,enable:t,dropdownAutoWidth:!0};this.containerClass&&(n.containerCssClass=this.containerClass),d()(this.$el).select2(n).val(this.value).trigger("change").on("change",(function(t){e.$emit("input",t.val)}))},destroyed:function(){d()(this.$el).off().select2("destroy")}};var u=n(51900);const h=(0,u.Z)(c,(function(){return(0,this._self._c)("select",[this._t("default")],2)}),[],!1,null,null,null).exports;var p=n(11411),f=n(70538);const m={components:{Select2:h},props:{target:{required:!0},label:{required:!1,type:String,default:(0,p.ZP)("From Column")},help:{required:!1},colHeaders:{type:Array,required:!0},multiple:{type:Boolean,required:!1,default:!1},ordered:{type:Boolean,required:!1,default:!1},valueAsList:{type:Boolean,required:!1,default:!1},orderedEdit:{type:Boolean,required:!1,default:!1}},computed:{remainingHeaders(){const e=this.colHeaders;if(!this.multiple)return e;const t={};for(const n in e)-1===this.target.indexOf(parseInt(n))&&(t[n]=e[n]);return t},title:()=>(0,p.ZP)("Select a column")},methods:{handleInput(e){if(this.multiple){const t=e.map((e=>parseInt(e)));this.$emit("update:target",t)}else{let t=parseInt(e);this.valueAsList&&(t=[t]),this.$emit("update:target",t)}},handleAdd(e){this.target.push(parseInt(e)),this.$emit("update:orderedEdit",!1)},handleRemove(e){this.target.splice(e,1)},moveUp(e){const t=this.target[e-1];f.default.set(this.target,e-1,this.target[e]),f.default.set(this.target,e,t)}}};const _=(0,u.Z)(m,(function(){var e=this,t=e._self._c;return e.multiple&&e.ordered?t("div",{staticClass:"rule-column-selector"},[t("span",[e._v(e._s(e.label))]),e._v(" "),e._t("default"),e._v(" "),t("ol",[e._l(e.target,(function(n,i){return t("li",{key:n,staticClass:"rule-column-selector-target",attrs:{index:i}},[e._v("\n            "+e._s(e.colHeaders[n])+"\n            "),t("span",{staticClass:"fa fa-times rule-column-selector-target-remove",on:{click:function(t){return e.handleRemove(i)}}}),e._v(" "),0!==i?t("span",{staticClass:"fa fa-arrow-up rule-column-selector-up",on:{click:function(t){return e.moveUp(i)}}}):e._e(),e._v(" "),i<e.target.length-1?t("span",{staticClass:"fa fa-arrow-down rule-column-selector-down",on:{click:function(t){return e.moveUp(i+1)}}}):e._e()])})),e._v(" "),e.target.length<e.colHeaders.length?t("li",[e.orderedEdit?t("span",{staticClass:"rule-column-selector-target-select"},[t("Select2",{attrs:{placeholder:"Select a column"},on:{input:e.handleAdd}},[t("option"),e._v(" "),e._l(e.remainingHeaders,(function(n,i){return t("option",{key:n,domProps:{value:i}},[e._v(e._s(n))])}))],2)],1):t("span",{staticClass:"rule-column-selector-target-add"},[t("i",{on:{click:function(t){return e.$emit("update:orderedEdit",!0)}}},[e._v("... "+e._s(e.l("Assign Another Column")))])])]):e._e()],2)],2):t("div",{staticClass:"rule-column-selector"},[t("label",{staticClass:"d-flex justify-content-end align-items-center"},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-auto",attrs:{title:e.help}},[e._v(e._s(e.label))]),e._v(" "),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{title:e.title}},[t("Select2",{attrs:{value:e.target,multiple:e.multiple},on:{input:e.handleInput}},e._l(e.colHeaders,(function(n,i){return t("option",{key:n,domProps:{value:i}},[e._v(e._s(n))])})),0)],1),e._v(" "),e._t("default")],2)])}),[],!1,null,null,null).exports;var v=n(66811);const g=v.ZP.MAPPING_TARGETS,y={props:{type:{type:String,required:!0},columns:{required:!0},colHeaders:{type:Array,required:!0}},computed:{typeDisplay(){return g[this.type].label},help(){return g[this.type].help||""},titleEdit:()=>(0,p.ZP)("Edit column definition"),titleRemove:()=>(0,p.ZP)("Remove this column definition"),columnsLabel(){return v.ZP.columnDisplay(this.columns,this.colHeaders)}},methods:{remove(){this.$emit("remove")},edit(){this.$emit("edit")}}};const b=(0,u.Z)(y,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"rule"},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.help}},[e._v("Set "+e._s(e.columnsLabel)+" as "+e._s(e.typeDisplay))]),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-edit",attrs:{title:e.titleEdit},on:{click:e.edit}}),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times",attrs:{title:e.titleRemove},on:{click:e.remove}})])}),[],!1,null,null,null).exports;const w={props:{target:{required:!0}},computed:{label:()=>(0,p.ZP)("Regular Expression"),title:()=>(0,p.ZP)("Enter a regular expression."),popoverTitle:()=>(0,p.ZP)("Regular Expressions"),popoverContent:()=>(0,p.ZP)('Regular expressions are patterns used to match character combinations in strings. This input accepts Python-style regular expressions, find more information about these in <a href="https://pythonforbiologists.com/tutorial/regex.html">this Python for Biologists tutorial</a>.')}};const k=(0,u.Z)(w,(function(){var e=this,t=e._self._c;return t("div",[t("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{for:"regular_expression",title:e.title}},[e._v(e._s(e.label))]),e._v(" "),t("span",{directives:[{name:"b-popover",rawName:"v-b-popover.html",value:e.popoverContent,expression:"popoverContent",modifiers:{html:!0}}],staticClass:"fa fa-question",attrs:{title:e.popoverTitle}}),e._v(" "),t("input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"rule-regular-expression",attrs:{title:e.title,name:"regular_expression",type:"text"},domProps:{value:e.target},on:{input:function(t){return e.$emit("update:target",t.target.value)}}})])}),[],!1,null,null,null).exports;const C={props:{ruleType:{type:String,required:!0},displayRuleType:{required:!0}},data:function(){return{applyLabel:(0,p.ZP)("Apply"),cancelLabel:(0,p.ZP)("Cancel")}},computed:{typeToClass(){return"rule-edit-"+this.ruleType.replace(/_/g,"-")}},methods:{cancel(){this.$emit("update:displayRuleType",null)},okay(){this.$emit("saveRule",this.ruleType),this.cancel()}}};const x=(0,u.Z)(C,(function(){var e=this,t=e._self._c;return e.ruleType==e.displayRuleType?t("div",{staticClass:"rule-editor",class:e.typeToClass},[e._t("default"),e._v(" "),t("div",{staticClass:"buttons rule-edit-buttons d-flex justify-content-end"},[t("button",{staticClass:"btn rule-editor-cancel mr-1",attrs:{type:"button"},on:{click:e.cancel}},[e._v(e._s(e.cancelLabel))]),e._v(" "),t("button",{staticClass:"btn btn-primary rule-editor-ok",attrs:{type:"button"},on:{click:e.okay}},[e._v(e._s(e.applyLabel))])])],2):e._e()}),[],!1,null,null,null).exports;const S=v.ZP.RULES,M={props:{rule:{required:!0,type:Object},colHeaders:{type:Array,required:!0}},computed:{title(){const e=this.rule.type;return S[e].display(this.rule,this.colHeaders)},editTitle:()=>(0,p.ZP)("Edit this rule."),removeTitle:()=>(0,p.ZP)("Remove this rule.")},methods:{edit(){this.$emit("edit")},remove(){this.$emit("remove")}}};const T=(0,u.Z)(M,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"rule"},[t("span",{staticClass:"rule-display"},[t("span",{staticClass:"mr-1"},[e._v(e._s(e.title))]),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-edit mr-1",attrs:{title:e.editTitle},on:{click:e.edit}}),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times map",attrs:{title:e.removeTitle},on:{click:e.remove}})]),e._v(" "),e.rule.warn?t("span",{staticClass:"rule-warning"},[e._v("\n        "+e._s(e.rule.warn)+"\n    ")]):e._e(),e._v(" "),e.rule.error?t("span",{staticClass:"rule-error"},[t("span",{staticClass:"alert-message"},[e._v(e._s(e.rule.error))])]):e._e()])}),[],!1,null,null,null).exports;const L=(0,u.Z)({},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"rule-footer footer flex-row no-flex"},[e._t("inputs"),e._v(" "),t("div",{staticClass:"actions clear vertically-spaced"},[t("div",{staticClass:"main-options float-right"},[e._t("default")],2)])],2)}),[],!1,null,null,null).exports;const D=(0,u.Z)({},(function(){return(0,this._self._c)("div",{staticClass:"header flex-row no-flex"},[this._t("default")],2)}),[],!1,null,null,null).exports;const E=(0,u.Z)({},(function(){return(0,this._self._c)("div",{staticClass:"middle flex-row flex-row-container"},[this._t("default")],2)}),[],!1,null,null,null).exports;const O=v.ZP.RULES,A={props:{ruleType:{type:String,required:!0}},computed:{linkClassName(){return"rule-link-"+this.ruleType.replace(/_/g,"-")},title(){return O[this.ruleType].title}}};const I=(0,u.Z)(A,(function(){var e=this;return(0,e._self._c)("a",{staticClass:"rule-link dropdown-item",class:e.linkClassName,attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$emit("addNewRule",e.ruleType)}}},[e._v(e._s(e.title))])}),[],!1,null,null,null).exports;var P=n(19046);f.default.use(r.ZPm);const R={components:{UtcDate:P.Z},props:{savedRules:{type:Array,required:!0}},data:function(){return{savedRulesMenu:(0,p.ZP)("Recently used rules"),hotHeaders:[...new Array(61).keys()].map((e=>String.fromCharCode(e+65)))}},computed:{numOfSavedRules:function(){return this.savedRules.length},sortSavedRules:function(){return[...this.savedRules].sort(this.onSessionDateTime)}},methods:{formatPreview(e){let t="",n="",i=0;const o=JSON.parse(e);return o.rules.forEach((e=>{if(5==i)return t;t+=n+v.VC[e.type].display(e,this.hotHeaders),t=t.trim(),n=", ",i++})),o.mapping.forEach((e=>{if(5==i)return t;t+=n+"Set "+v.tz[e.type].label,n=", ",i++})),t},onSessionDateTime(e,t){var n=new Date(e.dateTime).getTime();return new Date(t.dateTime).getTime()-n}}};const j=(0,u.Z)(R,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"btn-group dropdown"},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"fas fa-history rule-builder-view-source",class:{disabled:0==e.numOfSavedRules},attrs:{id:"savedRulesButton",title:e.savedRulesMenu,"data-toggle":"dropdown"}}),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},e._l(e.sortSavedRules,(function(n,i){return t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],key:i,staticClass:"rule-link dropdown-item saved-rule-item",attrs:{title:e.formatPreview(n.rule)},on:{click:function(t){return e.$emit("update-rules",n.rule)}}},[e._v("Saved rule from\n            "),t("UtcDate",{attrs:{date:n.dateTime,mode:"elapsed"}})],1)})),0)])}),[],!1,null,null,null).exports,Y=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d/,H={props:{prefix:{type:String,default:"galaxy_rules_"}},data:function(){return{savedRules:[]}},created(){let e=0;for(let t=0;t<localStorage.length;t++)if(localStorage.key(t).startsWith(this.prefix)){const n=localStorage.getItem(localStorage.key(t));if(n){const i=localStorage.key(t),o=i.match(Y);if(o){const t=i.slice(o.index);this.savedRules.push({dateTime:t,rule:n}),e++}}if(10==e)break}},methods:{saveSession(e){const t=(new Date).toISOString(),n=this.prefix+t;localStorage.setItem(n,e),this.savedRules.push({dateTime:t,rule:e})}}};const N=(0,u.Z)(H,undefined,undefined,!1,null,null,null).exports;const F=(0,u.Z)({},(function(){return(0,this._self._c)("div",{staticClass:"rule-collection-creator collection-creator flex-row-container"},[this._t("default")],2)}),[],!1,null,null,null).exports;var B=n(21904),$=n(40961),z=n(18181),W=n(38944),U=n(86290);const V={props:{title:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1}}};const q=(0,u.Z)(V,(function(){var e=this;return(0,e._self._c)("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{disabled:e.disabled,title:e.title}},[e._t("default")],2)}),[],!1,null,null,null).exports;f.default.use(r.ZPm);const Z=v.ZP.RULES,G=v.ZP.MAPPING_TARGETS,J=e=>new Promise(((t,n)=>{e.done(((e,n)=>t(n))),e.fail((e=>n(e)))})),K={components:{TooltipOnHover:q,HotTable:o(),RuleComponent:x,RuleTargetComponent:I,SavedRulesSelector:j,RuleDisplay:T,IdentifierDisplay:b,ColumnSelector:_,RegularExpressionInput:k,StateDiv:F,RuleModalHeader:D,RuleModalMiddle:E,RuleModalFooter:L,Select2:h},mixins:[N],props:{initialElements:{required:!0},importType:{type:String,required:!1,default:"collections"},elementsType:{type:String,required:!1,default:"datasets"},creationFn:{required:!1,type:Function},saveRulesFn:{required:!1,type:Function},initialRules:{required:!1,type:Object},defaultHideSourceItems:{type:Boolean,required:!1,default:!0},oncancel:{required:!0,type:Function},oncreate:{required:!0,type:Function},ftpUploadSite:{type:String,required:!1,default:null}},data:function(){let e,t,n="vertical";if(this.initialRules)e=this.initialRules.mapping.slice(),t=this.initialRules.rules.slice();else if(e="ftp"==this.elementsType?[{type:"ftp_path",columns:[0]}]:"remote_files"==this.elementsType?[{type:"url",columns:[0]}]:"datasets"==this.elementsType?[{type:"list_identifiers",columns:[1]}]:[],t=[],"collection_contents"==this.elementsType)if(null!==this.initialElements){const e=this.initialElements.collection_type.split(":");for(const n in e)t.push({type:"add_column_metadata",value:"identifier"+n})}else n="horizontal",t.push({type:"add_column_metadata",value:"identifier0"});else"datasets"==this.elementsType?t.push({type:"add_column_metadata",value:"hid"},{type:"add_column_metadata",value:"name"}):"library_datasets"==this.elementsType?t.push({type:"add_column_metadata",value:"name"}):"ftp"==this.elementsType?t.push({type:"add_column_metadata",value:"path"}):"remote_files"==this.elementsType&&t.push({type:"add_column_metadata",value:"uri"});return{rules:t,mapping:e,state:"build",ruleView:"normal",ruleSource:"",ruleSourceJson:null,ruleSourceError:null,errorMessage:"",jaggedData:!1,waitingJobState:"new",titleReset:(0,p.ZP)("Undo all reordering and discards"),titleNumericSort:(0,p.ZP)("By default columns will be sorted lexicographically, check this option if the columns are numeric values and should be sorted as numbers"),titleInvertFilterRegex:(0,p.ZP)("Remove rows not matching the specified regular expression at specified column"),titleInvertFilterEmpty:(0,p.ZP)("Remove rows that have non-empty values at specified column"),titleInvertFilterMatches:(0,p.ZP)("Remove rows matching supplied value"),titleViewSource:(0,p.ZP)("Advanced Option: View and or edit the JSON representation of the rules to apply to this tabular data"),titleSourceCancel:(0,p.ZP)("Stop editing rules and dismiss changes"),titleSourceReset:(0,p.ZP)("Reset text area to current set of rules"),titleSourceApply:(0,p.ZP)("Apply changes to rule source and return to rule preview"),titleRulesMenu:(0,p.ZP)("General rules to apply"),titleFilterMenu:(0,p.ZP)("Rules that filter rows from the data"),titleColumMenu:(0,p.ZP)("Rules that generate new columns"),titleRemoveMapping:(0,p.ZP)("Remove column definition assignment"),titleApplyColumnDefinitions:(0,p.ZP)("Apply these column definitions and return to rules preview"),titleErrorOkay:(0,p.ZP)("Dismiss this error and return to the rule builder to try again with new rules"),namePlaceholder:(0,p.ZP)("Enter a name for your new collection"),activeRuleIndex:null,addColumnRegexTarget:0,addColumnBasenameTarget:0,addColumnRegexExpression:"",addColumnRegexReplacement:null,addColumnRegexGroupCount:null,addColumnRegexType:"global",addColumnMetadataValue:0,addColumnGroupTagValueValue:"",addColumnGroupTagValueDefault:"",addColumnConcatenateTarget0:0,addColumnConcatenateTarget1:0,addColumnRownumStart:1,addColumnSubstrTarget:0,addColumnSubstrType:"keep_prefix",addColumnSubstrLength:1,addColumnValue:"",removeColumnTargets:[],addFilterRegexTarget:0,addFilterRegexExpression:"",addFilterRegexInvert:!1,addFilterMatchesTarget:0,addFilterMatchesValue:"",addFilterMatchesInvert:!1,addFilterEmptyTarget:0,addFilterEmptyInvert:!1,addFilterCompareTarget:0,addFilterCompareValue:0,addFilterCompareType:"less_than",addFilterCountN:1,addFilterCountInvert:!1,addFilterCountWhich:"first",addSortingTarget:0,addSortingNumeric:!1,splitColumnsTargets0:[],splitColumnsTargets1:[],swapColumnsTarget0:0,swapColumnsTarget1:0,collectionName:"",displayRuleType:null,extensions:[],extension:null,genomes:[],genome:null,hideSourceItems:this.defaultHideSourceItems,addNameTag:!1,orientation:n,validityErrorHeader:(0,p.ZP)("These issues must be resolved to proceed:")}},computed:{returnValidityErrorMessages:function(){return this.validityErrorMessages},exisistingDatasets(){const e=this.elementsType;return"datasets"===e||"collection_contents"===e||"library_datasets"===e},showFileTypeSelector(){return!this.exisistingDatasets&&!this.mappingAsDict.file_type},showGenomeSelector(){return!this.exisistingDatasets&&!this.mappingAsDict.dbkey},showCollectionNameInput(){return"collections"==this.importType&&"collection_contents"!=this.elementsType&&!this.mappingAsDict.collection_name},showAddNameTag(){return"collections"==this.importType&&"collection_contents"!=this.elementsType},titleFinish(){return 0!=this.validityErrorMessages.length?(0,p.ZP)("Button is disabled due to validation errors. Please see alerts above."):"datasets"==this.elementsType||"library_datasets"==this.elementsType?(0,p.ZP)("Create new collection from specified rules and datasets"):"collection_contents"==this.elementsType?(0,p.ZP)("Save rules and return to tool form"):(0,p.ZP)("Upload collection using specified rules")},titleCancel(){return"datasets"==this.importType?(0,p.ZP)("Close this modal and do not upload any datasets"):(0,p.ZP)("Close this modal and do not create any collections")},finishButtonTitle(){return"datasets"==this.elementsType||"library_datasets"==this.elementsType?(0,p.ZP)("Create"):"collection_contents"==this.elementsType?(0,p.ZP)("Save"):(0,p.ZP)("Upload")},hasActiveMappingEdit(){return z.default.any(z.default.values(this.mapping),(e=>e.editing))},activeRule(){return null!==this.activeRuleIndex&&this.rules[this.activeRuleIndex]},activeRuleColHeaders(){return null!==this.activeRuleIndex&&this.colHeadersPerRule[this.activeRuleIndex]||this.colHeaders},horizontal(){return"horizontal"==this.orientation},vertical(){return"vertical"==this.orientation},mappedTargets(){const e=[];for(const t of this.mapping)e.push(t.type);return e},unmappedTargets(){const e=[],t=this.mappedTargets;for(const n in G){const i=G[n].modes;if(i&&i.indexOf(this.elementsType)<0)continue;const o=G[n],a=o.importType;a&&this.importType!=a||(!this.ftpUploadSite&&o.requiresFtp||t.indexOf(n)<0&&e.push(n))}return e},colHeaders(){const{data:e,columns:t}=this.hotData;return v.ZP.colHeadersFor(e,t)},colHeadersDisplay(){const e=[];for(const t in this.colHeaders){const n=this.colHeaders[t];e[t]=`<b>${z.default.escape(n)}</b>`;const i=[];for(const e of this.mapping)if(-1!==e.columns.indexOf(parseInt(t))){const t=G[e.type];i.push(`<i>${z.default.escape(t.columnHeader||t.label)}</i>`)}1==i.length?e[t]+=` (${i[0]})`:i.length>1&&(e[t]+=` (${[i.slice(0,-1).join(", "),i.slice(-1)[0]].join(" & ")})`)}return e},mappingAsDict(){const e={};for(const t of this.mapping)e[t.type]=t;return e},metadataOptions(){let e={};if("collection_contents"==this.elementsType){let t;t=this.initialElements?this.initialElements.collection_type:"list:list:list:paired";const n=t.split(":");for(const t in n){const i=n[t];e["identifier"+t]="list"==i?(0,p.ZP)("List Identifier ")+(parseInt(t)+1):(0,p.ZP)("Paired Identifier")}e.tags=(0,p.ZP)("Tags")}else"ftp"==this.elementsType?e.path=(0,p.ZP)("Path"):"remote_files"==this.elementsType?(e.url=(0,p.ZP)("URL"),e.url_deferred=(0,p.ZP)("URL (deferred)")):"library_datasets"==this.elementsType?e.name=(0,p.ZP)("Name"):"datasets"==this.elementsType?(e.hid=(0,p.ZP)("History ID (hid)"),e.name=(0,p.ZP)("Name")):e=null;return e},hasTagsMetadata(){return"collection_contents"==this.elementsType},collectionType(){let e=[];this.mappingAsDict.list_identifiers&&(e=this.mappingAsDict.list_identifiers.columns);let t=e.map((e=>"list")).join(":");return this.mappingAsDict.paired_identifier&&(t?t+=":paired":t="paired"),t},validName(){let e=!0;const t="collections"==this.importType,n=this.mappingAsDict;return t&&"collection_contents"!=this.elementsType&&!n.collection_name&&(e=this.collectionName.length>0),e},validRules(){let e=!0;for(const t of this.rules)t.error&&(e=!1);return e},validOnlyOnePath(){let e=!0;const t=this.mappingAsDict;let n=0;return t.ftp_path&&(n+=1),t.url&&(n+=1),t.url_deferred&&(n+=1),n>1&&(e=!1),e},validSourceColumn(){let e=!0;const t=this.mappingAsDict;return!("ftp"==this.elementsType||"raw"==this.elementsType||"remote_files"==this.elementsType)||t.ftp_path||t.url||t.url_deferred||(e=!1),e},validIdentifierColumns(){let e=!0;const t=this.identifierColumns();return"collections"==this.importType&&0==t.length&&(e=!1),e},validInput(){return this.validName&&this.validRules&&this.validOnlyOnePath&&this.validSourceColumn&&this.validIdentifierColumns},validityErrorMessages(){const e=[];return this.validName||e.push("Name the collection."),this.validRules||e.push("There is an error with one of your rules."),this.validOnlyOnePath||e.push("Only specify either an FTP Path or a URL."),this.validSourceColumn||e.push("Specify a source column (either FTP Path or URL)."),this.validIdentifierColumns||e.push("Specify a column as a list identifier."),e},hotData(){let e,t,n;if("datasets"==this.elementsType||"library_datasets"==this.elementsType||"ftp"==this.elementsType||"remote_files"==this.elementsType)t=this.initialElements.slice(),e=t.map((e=>[])),n=[];else if("collection_contents"==this.elementsType){const i=this.initialElements;if(i){const o=this.populateElementsFromCollectionDescription(i.elements,i.collection_type);e=o.data,t=o.sources,n=[]}else e=[],t=[],n=[]}else e=this.initialElements.slice(),t=e.map((e=>null)),n=[],this.initialElements&&this.initialElements[0].forEach((()=>n.push("new")));return v.ZP.applyRules(e,t,n,this.rules)},colHeadersPerRule(){return this.hotData.colHeadersPerRule}},watch:{addColumnRegexType:function(e){"groups"==e&&(this.addColumnRegexGroupCount=1),"replacement"==e&&(this.addColumnRegexReplacement=null)},addColumnRegexGroupCount:function(e,t){e!=t&&t<1&&(this.addColumnRegexGroupCount=1)}},created(){if("collection_contents"!==this.elementsType){let e=null;if("datasets"==this.elementsType)for(const e of this.initialElements)"dataset_collection"==e.history_content_type&&(this.errorMessage="This component can only be used with datasets, you have specified one or more collections.",this.state="error");else for(const t of this.initialElements)if(null==e)e=t.length;else if(e!=t.length){this.jaggedData=!0;break}B.ZP.getUploadDatatypes(!1,B.ZP.AUTO_EXTENSION).then((e=>{this.extensions=e,this.extension=B.ZP.DEFAULT_EXTENSION})).catch((e=>{console.log("Error in RuleCollectionBuilder, unable to load datatypes",e)})),B.ZP.getUploadDbKeys(B.ZP.DEFAULT_DBKEY).then((e=>{this.genomes=e,this.genome=B.ZP.DEFAULT_DBKEY})).catch((e=>{console.log("Error in RuleCollectionBuilder, unable to load genomes",e)}))}},mounted(){setTimeout((()=>{this.$refs.hotTable.$el.click()}),200)},methods:{restoreRules(e){const t=JSON.parse(e);this.rules=t.rules,this.mapping=t.mapping},l:e=>(0,p.ZP)(e),cancel(){this.oncancel()},mappingTargets:()=>G,resetRules(){this.rules.splice(0,this.rules.length),this.mapping.splice(0,this.mapping.length)},resetRulesAndState(){this.resetRules(),this.state="build",this.errorMessage="",this.collectionName=""},addNewRule(e){Z[e].init(this),this.displayRuleType=e,this.activeRuleIndex=null},handleRuleSave(e){const t=this.activeRule;if(t)Z[e].save(this,t);else{const t={type:e};Z[e].save(this,t),this.rules.push(t)}},viewSource(){this.resetSource(),this.ruleView="source"},resetSource(){const e={rules:this.rules,mapping:this.mapping};this.exisistingDatasets||(this.extension!==B.ZP.DEFAULT_EXTENSION&&(e.extension=this.extension),this.genome!==B.ZP.DEFAULT_DBKEY&&(e.genome=this.genome)),this.ruleSourceJson=e,this.ruleSource=JSON.stringify(e,(function(e,t){if("error"!=e&&"warn"!=e)return t}),"  "),this.ruleSourceError=null},attemptRulePreview(){let e;this.ruleSourceError=null;try{e=JSON.parse(this.ruleSource)}catch(e){return void(this.ruleSourceError="Problem parsing your rules.")}this.updateFromSource(e),this.ruleView="normal"},cancelSourceEdit(){this.ruleSourceError=null,this.ruleView="normal"},updateFromSource(e){this.resetRules(),e.extension&&(this.extension=e.extension),e.genome&&(this.genome=e.genome),e.rules&&(this.rules=e.rules),e.mapping&&(this.mapping=e.mapping)},addIdentifier(e){const t=this.mappingTargets()[e].multiple,n=t?[]:[0];this.mapping.push({type:e,columns:n,editing:t})},editRule(e,t){const n=e.type;this.activeRuleIndex=t,Z[n].init(this,e),this.displayRuleType=n},removeRule(e){this.rules.splice(e,1)},removeMapping(e){this.mapping.splice(e,1)},refreshAndWait(e){(0,W.B8)(),this.waitOnJob(e)},waitOnJob(e){const t=e.data.jobs[0].id,n=e=>{const n=e.data.state;this.waitingJobState=n,-1!==U.Z.NON_TERMINAL_STATES.indexOf(n)?setTimeout(i,1e3):-1!==U.Z.ERROR_STATES.indexOf(n)?(this.state="error",this.errorMessage="Unknown error encountered while running your upload job, this could be a server issue or a problem with the upload definition.",this.doFullJobCheck(t)):((0,W.B8)(),this.oncreate())},i=()=>{s.Z.get(`${(0,$.getAppRoot)()}api/jobs/${t}`).then(n).catch(this.renderFetchError)};setTimeout(i,1e3)},doFullJobCheck(e){s.Z.get(`${(0,$.getAppRoot)()}api/jobs/${e}?full=True`).then((e=>{const t=e.data.stderr;if(t){let e="An error was encountered while running your upload job. ";t.indexOf("binary file contains inappropriate content")>-1&&(e+="The problem may be that the batch uploader will not automatically decompress your files the way the normal uploader does, please specify a correct extension or upload decompressed data."),e+="Upload job completed with standard error: "+t,this.errorMessage=e}})).catch(this.renderFetchError)},renderFetchError(e){this.state="error",e.response?(console.log(e.response),this.errorMessage=e.response.data.err_msg):(console.log(e),this.errorMessage="Unknown error encountered: "+e)},swapOrientation(){this.orientation="horizontal"==this.orientation?"vertical":"horizontal";const e=this.$refs.hotTable.table;"horizontal"==this.orientation?this.$nextTick((function(){const t=d()(".rule-builder-body").width();e.updateSettings({width:t})})):this.$nextTick((function(){const t=d()(".rule-builder-body").width();e.updateSettings({width:t-270})}))},createCollection(){const e={rules:this.rules,mapping:this.mapping};if(this.mapping.flatMap((e=>e.columns)).some((e=>e>=this.colHeaders.length)))return this.errorMessage="You have undefined columns in your rules.",void(this.state="error");this.saveSession(JSON.stringify(e)),this.state="wait";const{collectionName:t,collectionType:n,hideSourceItems:i}=this;if("datasets"==this.elementsType||"library_datasets"==this.elementsType){const e=this.creationElementsFromDatasets();if("error"!==this.state){const t=Object.entries(e).map((([e,t])=>this.creationFn(t,n,e,i).then(this.oncreate))),o=t.map(J);return Promise.all(o).catch((e=>this.renderFetchError(e)))}}else if("collection_contents"==this.elementsType)this.resetSource(),"error"!==this.state&&(this.saveRulesFn(this.ruleSourceJson),this.oncreate());else{const e=(0,a.Bz)().currHistoryPanel.model.id;let i,o;if(n){o=[];const e=this.creationElementsForFetch();for(const t in e){const i={destination:{type:"hdca"},elements:e[t],collection_type:n,name:t};this.addNameTag&&(i.tags=["name:"+t]),o.push(i)}}else i=this.creationDatasetsForFetch(),o=[{destination:{type:"hdas"},elements:i,name:t}];"error"!==this.state&&s.Z.post(`${(0,$.getAppRoot)()}api/tools/fetch`,{history_id:e,targets:o,auto_decompress:!0}).then(this.refreshAndWait).catch(this.renderFetchError)}},identifierColumns(){const e=this.mappingAsDict;let t=[];return e.list_identifiers&&(t=e.list_identifiers.columns.slice()),this.mappingAsDict.paired_identifier&&t.push(this.mappingAsDict.paired_identifier.columns[0]),t},buildRequestElements(e,t,n){const i=this.hotData.data,o=this.identifierColumns();if(o.length<1)return void console.log("Error but this shouldn't have happened, create button should have been disabled.");const a=o.length,s=this.collectionType,r={},l={},d=this.mappingAsDict.collection_name;if(d){const e=d.columns[0];for(const t in i){const n=i[t],o=n[e];l[o]||(l[o]={}),l[o][t]=n}}else l[this.collectionName]=i;for(const d in l){const c=[],u=[];for(const r in l[d]){const l=i[r];let d=s,h=c,p=u;for(let i=0;i<a;i++){let s=String(l[o[i]]);if(i+1==a){if("paired"===d)if(["f","1","r1","forward"].indexOf(s.toLowerCase())>-1)s="forward";else{if(!(["r","2","r2","reverse"].indexOf(s.toLowerCase())>-1))return this.state="error",void(this.errorMessage="Unknown indicator of paired status encountered - only values of F, R, 1, 2, R1, R2, forward, or reverse are allowed.");s="reverse"}const t=e(r,s);if(h.push(t),p.indexOf(s)>=0)return this.state="error",void(this.errorMessage="Duplicate identifiers detected, collection identifiers must be unique.");p.push(s)}else{d=d.split(":").slice(1).join(":");let e=!1;for(const t of h)if(t.name==s){h=t[n],p=p[s],e=!0;break}if(!e){const e=t(s);h.push(e),p[s]=[];const i=[];e[n]=i,e.collection_type=d,h=i,p=p[s]}}}}r[d]=c}return r},creationElementsFromDatasets(){const{sources:e,data:t}=this.hotData,n=this.mappingAsDict;return this.buildRequestElements(((i,o)=>{const a=e[i],s=this._datasetFor(i,t,n),r="datasets"==this.elementsType?"hda":"ldda";return{id:a.id,name:o,src:r,tags:s.tags}}),(e=>({name:e,src:"new_collection"})),"element_identifiers")},creationElementsForFetch(){const e=this.hotData.data,t=this.mappingAsDict;return this.buildRequestElements(((n,i)=>{const o=this._datasetFor(n,e,t);return o.name=i,o}),(e=>({name:e})),"elements")},creationDatasetsForFetch(){const e=this.hotData.data,t=this.mappingAsDict,n=[];for(const i in e){const o=this._datasetFor(i,e,t);n.push(o)}return n},populateElementsFromCollectionDescription(e,t,n){const i=n||[];let o=[],a=[];for(const n of e){const e=n.object,s=i.concat([n.element_identifier]),r=t.indexOf(":");if(-1===r){o.push([]);const t={identifiers:s,dataset:e,tags:e.tags};a.push(t)}else{const n=t.slice(r+1),i=this.populateElementsFromCollectionDescription(e.elements,n,s),l=i.data,d=i.sources;o=o.concat(l),a=a.concat(d)}}return{data:o,sources:a}},highlightColumn(e){d()(`.htCore > thead > tr > th:nth-child(${e+1})`).addClass("ht__highlight");d()(`.htCore > tbody > tr > td:nth-child(${e+1})`).addClass("rule-highlight")},unhighlightColumn(e){d()(`.htCore > thead > tr > th:nth-child(${e+1})`).removeClass("ht__highlight");d()(`.htCore > tbody > tr > td:nth-child(${e+1})`).removeClass("rule-highlight")},_datasetFor(e,t,n){const i={};if(n.url||n.url_deferred){let o;o=n.url?n.url.columns[0]:n.url_deferred.columns[0];let a=t[e][o];a=a.trim(),-1==a.indexOf("://")&&(a=-1!==a.indexOf("ftp.sra.")?"ftp://"+a:"http://"+a),i.url=a,i.src="url",n.url_deferred&&(i.deferred=!0)}else if(n.ftp_path){const o=n.ftp_path.columns[0],a=t[e][o];i.ftp_path=a,i.src="ftp_import"}if(n.dbkey){const o=n.dbkey.columns[0],a=t[e][o];i.dbkey=a}else this.genome&&(i.dbkey=this.genome);if(n.file_type){const o=n.file_type.columns[0],a=t[e][o];i.ext=a}else this.extension&&(i.ext=this.extension);if(n.name){const o=n.name.columns[0],a=t[e][o];i.name=a}if(n.info){const o=n.info.columns[0],a=t[e][o];i.info=a}const o=[];if(n.tags){const i=n.tags.columns;for(const n of i){const i=t[e][n];o.push(i)}}if(n.group_tags){const i=n.group_tags.columns;for(const n of i){const i=t[e][n];o.push("group:"+i)}}if(n.name_tag){const i=n.name_tag.columns[0],a=t[e][i];o.push("name:"+a)}return o.length>0&&(i.tags=o),i}}},X=K;const Q=(0,u.Z)(X,(function(){var e=this,t=e._self._c;return"build"==e.state?t("StateDiv",{staticClass:"rule-collection-builder"},["source"==e.ruleView?t("RuleModalHeader",[e._v("Below is a raw JSON description of the rules to apply to the tabular data. This is an advanced\n        setting.")]):"datasets"==e.elementsType||"library_datasets"==e.elementsType?t("RuleModalHeader",[e._v("\n        Use this form to describe rules for building collection(s) from the specified datasets.\n        "),t("b",[e._v("Be sure to specify at least one column as a list identifier")]),e._v(' - specify more to created nested list\n        structures. Specify a column to serve as "collection name" to group datasets into multiple collections.\n    ')]):"datasets"==e.importType?t("RuleModalHeader",[e._v("\n        Use this form to describe rules for import datasets. At least one column should be defined to a source to\n        fetch data from (URLs, FTP files, etc...).\n    ")]):t("RuleModalHeader",[e._v("\n        Use this form to describe rules for import datasets. At least one column should be defined to a source to\n        fetch data from (URLs, FTP files, etc...).\n        "),t("b",[e._v("Be sure to specify at least one column as a list identifier")]),e._v(' - specify more to created nested list\n        structures. Specify a column to serve as "collection name" to group datasets into multiple collections.\n    ')]),e._v(" "),0!=e.validityErrorMessages.length?t("b-alert",{staticClass:"alert-area",attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n        "+e._s(e.validityErrorHeader)+"\n        "),t("ul",e._l(e.validityErrorMessages,(function(n){return t("li",{key:n},[e._v("\n                "+e._s(n)+"\n            ")])})),0)]):e._e(),e._v(" "),"source"==e.ruleView?t("RuleModalMiddle",[e.ruleSourceError?t("p",{staticClass:"errormessagelarge"},[e._v(e._s(e.ruleSourceError))]):e._e(),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ruleSource,expression:"ruleSource"}],staticClass:"rule-source",domProps:{value:e.ruleSource},on:{input:function(t){t.target.composing||(e.ruleSource=t.target.value)}}})]):t("RuleModalMiddle",["normal"==e.ruleView?t("div",{staticClass:"rule-builder-body vertically-spaced",class:{"flex-column-container":e.vertical}},[t("div",{staticClass:"rule-column",class:e.orientation},[t("div",{staticClass:"rules-container",class:{"rules-container-vertical":e.initialElements&&e.vertical,"rules-container-horizontal":e.initialElements&&e.horizontal,"rules-container-full":null==e.initialElements}},[t("RuleComponent",{attrs:{"rule-type":"sort","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addSortingTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addSortingTarget=t}}}),e._v(" "),t("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleNumericSort}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addSortingNumeric,expression:"addSortingNumeric"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addSortingNumeric)?e._i(e.addSortingNumeric,null)>-1:e.addSortingNumeric},on:{change:function(t){var n=e.addSortingNumeric,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.addSortingNumeric=n.concat([null])):a>-1&&(e.addSortingNumeric=n.slice(0,a).concat(n.slice(a+1)))}else e.addSortingNumeric=o}}}),e._v("\n                            "+e._s(e.l("Numeric sorting."))+"\n                        ")])],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_column_basename","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addColumnBasenameTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnBasenameTarget=t}}})],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_column_rownum","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("label",[e._v("\n                            "+e._s(e.l("Starting from"))+"\n                            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRownumStart,expression:"addColumnRownumStart"}],attrs:{type:"number",min:"0"},domProps:{value:e.addColumnRownumStart},on:{input:function(t){t.target.composing||(e.addColumnRownumStart=t.target.value)}}})])]),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_column_metadata","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("label",[e._v("\n                            "+e._s(e.l("For"))+"\n                            "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.addColumnMetadataValue,expression:"addColumnMetadataValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.addColumnMetadataValue=t.target.multiple?n:n[0]}}},e._l(e.metadataOptions,(function(n,i){return t("option",{domProps:{value:i}},[e._v(e._s(n))])})),0)])]),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_column_group_tag_value","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("label",[e._v("\n                            "+e._s(e.l("Value"))+"\n                            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnGroupTagValueValue,expression:"addColumnGroupTagValueValue"}],attrs:{type:"text"},domProps:{value:e.addColumnGroupTagValueValue},on:{input:function(t){t.target.composing||(e.addColumnGroupTagValueValue=t.target.value)}}})]),e._v(" "),t("label",[e._v("\n                            "+e._s(e.l("Default"))+"\n                            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnGroupTagValueDefault,expression:"addColumnGroupTagValueDefault"}],attrs:{type:"text"},domProps:{value:e.addColumnGroupTagValueDefault},on:{input:function(t){t.target.composing||(e.addColumnGroupTagValueDefault=t.target.value)}}})])]),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_column_regex","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addColumnRegexTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnRegexTarget=t}}}),e._v(" "),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexType,expression:"addColumnRegexType"}],attrs:{type:"radio",value:"global"},domProps:{checked:e._q(e.addColumnRegexType,"global")},on:{change:function(t){e.addColumnRegexType="global"}}}),e._v("Create column matching\n                            expression.\n                        ")]),e._v(" "),t("br"),e._v(" "),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexType,expression:"addColumnRegexType"}],attrs:{type:"radio",value:"groups"},domProps:{checked:e._q(e.addColumnRegexType,"groups")},on:{change:function(t){e.addColumnRegexType="groups"}}}),e._v("Create columns\n                            matching expression groups.\n                        ")]),e._v(" "),t("br"),e._v(" "),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexType,expression:"addColumnRegexType"}],attrs:{type:"radio",value:"replacement"},domProps:{checked:e._q(e.addColumnRegexType,"replacement")},on:{change:function(t){e.addColumnRegexType="replacement"}}}),e._v("Create column\n                            from expression replacement.\n                        ")]),e._v(" "),t("br"),e._v(" "),t("RegularExpressionInput",{attrs:{target:e.addColumnRegexExpression},on:{"update:target":function(t){e.addColumnRegexExpression=t}}}),e._v(" "),"groups"==e.addColumnRegexType?t("label",[e._v("\n                            "+e._s(e.l("Number of Groups"))+"\n                            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexGroupCount,expression:"addColumnRegexGroupCount"}],attrs:{type:"number",min:"1"},domProps:{value:e.addColumnRegexGroupCount},on:{input:function(t){t.target.composing||(e.addColumnRegexGroupCount=t.target.value)}}})]):e._e(),e._v(" "),"replacement"==e.addColumnRegexType?t("label",[e._v("\n                            "+e._s(e.l("Replacement Expression"))+"\n                            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexReplacement,expression:"addColumnRegexReplacement"}],staticClass:"rule-replacement",attrs:{type:"text"},domProps:{value:e.addColumnRegexReplacement},on:{input:function(t){t.target.composing||(e.addColumnRegexReplacement=t.target.value)}}})]):e._e()],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_column_concatenate","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addColumnConcatenateTarget0,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnConcatenateTarget0=t}}}),e._v(" "),t("ColumnSelector",{attrs:{target:e.addColumnConcatenateTarget1,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnConcatenateTarget1=t}}})],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_column_substr","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addColumnSubstrTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnSubstrTarget=t}}}),e._v(" "),t("label",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.addColumnSubstrType,expression:"addColumnSubstrType"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.addColumnSubstrType=t.target.multiple?n:n[0]}}},[t("option",{attrs:{value:"keep_prefix"}},[e._v("Keep only prefix specified.")]),e._v(" "),t("option",{attrs:{value:"drop_prefix"}},[e._v("Strip off prefix specified.")]),e._v(" "),t("option",{attrs:{value:"keep_suffix"}},[e._v("Keep only suffix specified.")]),e._v(" "),t("option",{attrs:{value:"drop_suffix"}},[e._v("Strip off suffix specified.")])])]),e._v(" "),t("label",[e._v("\n                            "+e._s(e.l("Prefix or suffix length"))+"\n                            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnSubstrLength,expression:"addColumnSubstrLength"}],attrs:{type:"number",min:"0"},domProps:{value:e.addColumnSubstrLength},on:{input:function(t){t.target.composing||(e.addColumnSubstrLength=t.target.value)}}})])],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_column_value","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("label",[e._v("\n                            "+e._s(e.l("Value"))+"\n                            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnValue,expression:"addColumnValue"}],attrs:{type:"text"},domProps:{value:e.addColumnValue},on:{input:function(t){t.target.composing||(e.addColumnValue=t.target.value)}}})])]),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"remove_columns","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.removeColumnTargets,"col-headers":e.activeRuleColHeaders,multiple:!0},on:{"update:target":function(t){e.removeColumnTargets=t}}})],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"split_columns","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.splitColumnsTargets0,label:"Odd Row Column(s)","col-headers":e.activeRuleColHeaders,multiple:!0},on:{"update:target":function(t){e.splitColumnsTargets0=t}}}),e._v(" "),t("ColumnSelector",{attrs:{target:e.splitColumnsTargets1,label:"Even Row Column(s)","col-headers":e.activeRuleColHeaders,multiple:!0},on:{"update:target":function(t){e.splitColumnsTargets1=t}}})],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"swap_columns","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.swapColumnsTarget0,label:"Swap Column","col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.swapColumnsTarget0=t}}}),e._v(" "),t("ColumnSelector",{attrs:{target:e.swapColumnsTarget1,label:"With Column","col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.swapColumnsTarget1=t}}})],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_filter_regex","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addFilterRegexTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addFilterRegexTarget=t}}}),e._v(" "),t("RegularExpressionInput",{attrs:{target:e.addFilterRegexExpression},on:{"update:target":function(t){e.addFilterRegexExpression=t}}}),e._v(" "),t("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleInvertFilterRegex}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterRegexInvert,expression:"addFilterRegexInvert"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addFilterRegexInvert)?e._i(e.addFilterRegexInvert,null)>-1:e.addFilterRegexInvert},on:{change:function(t){var n=e.addFilterRegexInvert,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.addFilterRegexInvert=n.concat([null])):a>-1&&(e.addFilterRegexInvert=n.slice(0,a).concat(n.slice(a+1)))}else e.addFilterRegexInvert=o}}}),e._v("\n                            "+e._s(e.l("Invert filter."))+"\n                        ")])],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_filter_matches","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addFilterMatchesTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addFilterMatchesTarget=t}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterMatchesValue,expression:"addFilterMatchesValue"}],attrs:{type:"text"},domProps:{value:e.addFilterMatchesValue},on:{input:function(t){t.target.composing||(e.addFilterMatchesValue=t.target.value)}}}),e._v(" "),t("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleInvertFilterMatches}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterMatchesInvert,expression:"addFilterMatchesInvert"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addFilterMatchesInvert)?e._i(e.addFilterMatchesInvert,null)>-1:e.addFilterMatchesInvert},on:{change:function(t){var n=e.addFilterMatchesInvert,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.addFilterMatchesInvert=n.concat([null])):a>-1&&(e.addFilterMatchesInvert=n.slice(0,a).concat(n.slice(a+1)))}else e.addFilterMatchesInvert=o}}}),e._v("\n                            "+e._s(e.l("Invert filter."))+"\n                        ")])],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_filter_compare","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addFilterCompareTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addFilterCompareTarget=t}}}),e._v(" "),t("label",[e._v("\n                            Filter out rows\n                            "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCompareType,expression:"addFilterCompareType"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.addFilterCompareType=t.target.multiple?n:n[0]}}},[t("option",{attrs:{value:"less_than"}},[e._v(e._s(e.l("less than")))]),e._v(" "),t("option",{attrs:{value:"less_than_equal"}},[e._v(e._s(e.l("less than or equal to")))]),e._v(" "),t("option",{attrs:{value:"greater_than"}},[e._v(e._s(e.l("greater than")))]),e._v(" "),t("option",{attrs:{value:"greater_than_equal"}},[e._v(e._s(e.l("greater than or equal to")))])])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCompareValue,expression:"addFilterCompareValue"}],attrs:{type:"text"},domProps:{value:e.addFilterCompareValue},on:{input:function(t){t.target.composing||(e.addFilterCompareValue=t.target.value)}}})],1),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_filter_count","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("label",[e._v("\n                            Filter which rows?\n                            "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCountWhich,expression:"addFilterCountWhich"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.addFilterCountWhich=t.target.multiple?n:n[0]}}},[t("option",{attrs:{value:"first"}},[e._v("first")]),e._v(" "),t("option",{attrs:{value:"last"}},[e._v("last")])])]),e._v(" "),t("label",[e._v("\n                            Filter how many rows?\n                            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCountN,expression:"addFilterCountN"}],attrs:{type:"number"},domProps:{value:e.addFilterCountN},on:{input:function(t){t.target.composing||(e.addFilterCountN=t.target.value)}}})]),e._v(" "),t("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleInvertFilterMatches}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCountInvert,expression:"addFilterCountInvert"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addFilterCountInvert)?e._i(e.addFilterCountInvert,null)>-1:e.addFilterCountInvert},on:{change:function(t){var n=e.addFilterCountInvert,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.addFilterCountInvert=n.concat([null])):a>-1&&(e.addFilterCountInvert=n.slice(0,a).concat(n.slice(a+1)))}else e.addFilterCountInvert=o}}}),e._v("\n                            "+e._s(e.l("Invert filter."))+"\n                        ")])]),e._v(" "),t("RuleComponent",{attrs:{"rule-type":"add_filter_empty","display-rule-type":e.displayRuleType},on:{"update:displayRuleType":function(t){e.displayRuleType=t},"update:display-rule-type":function(t){e.displayRuleType=t},saveRule:e.handleRuleSave}},[t("ColumnSelector",{attrs:{target:e.addFilterEmptyTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addFilterEmptyTarget=t}}}),e._v(" "),t("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleInvertFilterEmpty}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterEmptyInvert,expression:"addFilterEmptyInvert"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addFilterEmptyInvert)?e._i(e.addFilterEmptyInvert,null)>-1:e.addFilterEmptyInvert},on:{change:function(t){var n=e.addFilterEmptyInvert,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.addFilterEmptyInvert=n.concat([null])):a>-1&&(e.addFilterEmptyInvert=n.slice(0,a).concat(n.slice(a+1)))}else e.addFilterEmptyInvert=o}}}),e._v("\n                            "+e._s(e.l("Invert filter."))+"\n                        ")])],1),e._v(" "),"mapping"==e.displayRuleType?t("div",[e._l(e.mapping,(function(n,i){return t("div",{key:n.type,staticClass:"map",attrs:{index:i}},[t("ColumnSelector",{class:"rule-map-"+n.type.replace(/_/g,"-"),attrs:{label:e.mappingTargets()[n.type].label,help:e.mappingTargets()[n.type].help,target:n.columns,"ordered-edit":n.editing,"col-headers":e.colHeaders,multiple:e.mappingTargets()[n.type].multiple,ordered:!0,"value-as-list":!0},on:{"update:target":function(t){return e.$set(n,"columns",t)},"update:orderedEdit":function(t){return e.$set(n,"editing",t)},"update:ordered-edit":function(t){return e.$set(n,"editing",t)}}},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times",attrs:{title:e.titleRemoveMapping},on:{click:function(t){return e.removeMapping(i)}}})])],1)})),e._v(" "),t("div",{staticClass:"buttons rule-edit-buttons d-flex justify-content-end"},[e.unmappedTargets.length>0?t("button",{staticClass:"dropdown-toggle btn btn-primary mr-1",attrs:{type:"button","data-toggle":"dropdown"}},[t("span",{staticClass:"fa fa-plus rule-add-mapping"}),e._v("\n                                "+e._s("Add Definition")+"\n                                "),t("span",{staticClass:"caret"})]):e._e(),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},e._l(e.unmappedTargets,(function(n){return t("a",{key:n,staticClass:"dropdown-item",class:"rule-add-mapping-"+n.replace(/_/g,"-"),attrs:{index:n,href:"javascript:void(0)"},on:{click:function(t){return e.addIdentifier(n)}}},[e._v(e._s(e.mappingTargets()[n].label))])})),0),e._v(" "),e.hasActiveMappingEdit?e._e():t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"rule-mapping-ok",attrs:{title:e.titleApplyColumnDefinitions},on:{click:function(t){e.displayRuleType=null}}},[e._v(e._s(e.l("Apply")))])],1)],2):e._e(),e._v(" "),null==e.displayRuleType?t("div",{staticClass:"rule-summary"},[t("span",{staticClass:"title"},[e._v("\n                            "+e._s(e.l("Rules"))+"\n                            "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-wrench rule-builder-view-source",attrs:{title:e.titleViewSource},on:{click:e.viewSource}}),e._v(" "),t("SavedRulesSelector",{ref:"savedRulesSelector",attrs:{"saved-rules":e.savedRules},on:{"update-rules":e.restoreRules}})],1),e._v(" "),e.jaggedData?t("div",{staticClass:"rule-warning"},[e._v("\n                            Rows contain differing numbers of columns, there was likely a problem parsing your data.\n                        ")]):e._e(),e._v(" "),t("ol",{staticClass:"rules"},[e._l(e.rules,(function(n,i){return t("RuleDisplay",{key:i,attrs:{rule:n,index:i,"col-headers":e.colHeadersPerRule[i]},on:{edit:function(t){return e.editRule(n,i)},remove:function(t){return e.removeRule(i)}}})})),e._v(" "),e._l(e.mapping,(function(n,i){return t("IdentifierDisplay",e._b({key:n.type,attrs:{index:i,"col-headers":e.colHeaders},on:{remove:function(t){return e.removeMapping(i)},edit:function(t){e.displayRuleType="mapping"}},nativeOn:{mouseover:function(t){n.columns.forEach((t=>e.highlightColumn(t)))},mouseout:function(t){n.columns.forEach((t=>e.unhighlightColumn(t)))}}},"IdentifierDisplay",n,!1))})),e._v(" "),0==e.mapping.length?t("div",[e._v("\n                                One or more column definitions must be specified. These are required to specify how\n                                to build collections and datasets from rows and columns of the table.\n                                "),t("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.displayRuleType="mapping"}}},[e._v("Click here")]),e._v(" to\n                                manage column definitions.\n                            ")]):e._e()],2),e._v(" "),t("div",{staticClass:"rules-buttons btn-group"},[t("div",{staticClass:"dropup"},[t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"rule-menu-rules-button primary-button dropdown-toggle",attrs:{type:"button",title:e.titleRulesMenu,"data-toggle":"dropdown"}},[t("span",{staticClass:"fa fa-plus"}),e._v("\n                                    "+e._s(e.l("Rules"))+"\n                                    "),t("span",{staticClass:"caret"})]),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[t("RuleTargetComponent",{attrs:{"rule-type":"sort"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"remove_columns"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"split_columns"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"swap_columns"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("a",{staticClass:"dropdown-item rule-link rule-link-mapping",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.displayRuleType="mapping"}}},[e._v("Add / Modify Column Definitions")])],1)]),e._v(" "),t("div",{staticClass:"dropup"},[t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"rule-menu-filter-button primary-button dropdown-toggle",attrs:{type:"button",title:e.titleFilterMenu,"data-toggle":"dropdown"}},[t("span",{staticClass:"fa fa-plus"}),e._v("\n                                    "+e._s(e.l("Filter"))+"\n                                    "),t("span",{staticClass:"caret"})]),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[t("RuleTargetComponent",{attrs:{"rule-type":"add_filter_regex"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_filter_matches"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_filter_compare"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_filter_empty"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_filter_count"},on:{addNewRule:e.addNewRule}})],1)]),e._v(" "),t("div",{staticClass:"dropup"},[t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"rule-menu-column-button primary-button dropdown-toggle",attrs:{type:"button",title:e.titleColumMenu,"data-toggle":"dropdown"}},[t("span",{staticClass:"fa fa-plus"}),e._v("\n                                    "+e._s(e.l("Column"))+"\n                                    "),t("span",{staticClass:"caret"})]),e._v(" "),t("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[t("RuleTargetComponent",{attrs:{"rule-type":"add_column_basename"},on:{addNewRule:e.addNewRule}}),e._v(" "),e.metadataOptions?t("RuleTargetComponent",{attrs:{"rule-type":"add_column_metadata"},on:{addNewRule:e.addNewRule}}):e._e(),e._v(" "),e.hasTagsMetadata?t("RuleTargetComponent",{attrs:{"rule-type":"add_column_group_tag_value"},on:{addNewRule:e.addNewRule}}):e._e(),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_column_regex"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_column_concatenate"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_column_rownum"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_column_value"},on:{addNewRule:e.addNewRule}}),e._v(" "),t("RuleTargetComponent",{attrs:{"rule-type":"add_column_substr"},on:{addNewRule:e.addNewRule}})],1)])])]):e._e()],1)]),e._v(" "),null!==e.initialElements?t("div",{staticClass:"table-column",class:e.orientation,staticStyle:{width:"100%"}},[t("HotTable",{ref:"hotTable",attrs:{id:"hot-table",data:e.hotData.data,"col-headers":e.colHeadersDisplay,"read-only":!0,"stretch-h":"all"}})],1):e._e()]):e._e()]),e._v(" "),"source"==e.ruleView?t("RuleModalFooter",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rule-btn-cancel",attrs:{title:e.titleSourceCancel},on:{click:e.cancelSourceEdit}},[e._v(e._s(e.l("Cancel")))]),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"creator-reset-btn rule-btn-reset",attrs:{title:e.titleSourceReset}},[e._v(e._s(e.l("Reset")))]),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rule-btn-okay",attrs:{title:e.titleSourceApply},on:{click:e.attemptRulePreview}},[e._v(e._s(e.l("Apply")))])],1):"normal"==e.ruleView?t("RuleModalFooter",{scopedSlots:e._u([{key:"inputs",fn:function(){return[t("div",{staticClass:"rule-footer-inputs"},["datasets"==e.elementsType?t("label",[e._v(e._s(e.l("Hide original elements"))+":")]):e._e(),e._v(" "),"datasets"==e.elementsType?t("input",{directives:[{name:"model",rawName:"v-model",value:e.hideSourceItems,expression:"hideSourceItems"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hideSourceItems)?e._i(e.hideSourceItems,null)>-1:e.hideSourceItems},on:{change:function(t){var n=e.hideSourceItems,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.hideSourceItems=n.concat([null])):a>-1&&(e.hideSourceItems=n.slice(0,a).concat(n.slice(a+1)))}else e.hideSourceItems=o}}}):e._e(),e._v(" "),e.extension&&e.showFileTypeSelector?t("div",{staticClass:"rule-footer-extension-group"},[t("label",[e._v(e._s(e.l("Type"))+":")]),e._v(" "),t("Select2",{staticClass:"extension-select",attrs:{name:"extension"},model:{value:e.extension,callback:function(t){e.extension=t},expression:"extension"}},e._l(e.extensions,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v("\n                            "+e._s(n.text)+"\n                        ")])})),0)],1):e._e(),e._v(" "),e.genome&&e.showGenomeSelector?t("div",{staticClass:"rule-footer-genome-group"},[t("label",[e._v(e._s(e.l("Genome"))+":")]),e._v(" "),t("Select2",{staticClass:"genome-select",model:{value:e.genome,callback:function(t){e.genome=t},expression:"genome"}},e._l(e.genomes,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v(e._s(n.text))])})),0)],1):e._e(),e._v(" "),e.showAddNameTag?t("label",[e._v(e._s(e.l("Add nametag for name"))+":")]):e._e(),e._v(" "),e.showAddNameTag?t("input",{directives:[{name:"model",rawName:"v-model",value:e.addNameTag,expression:"addNameTag"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addNameTag)?e._i(e.addNameTag,null)>-1:e.addNameTag},on:{change:function(t){var n=e.addNameTag,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.addNameTag=n.concat([null])):a>-1&&(e.addNameTag=n.slice(0,a).concat(n.slice(a+1)))}else e.addNameTag=o}}}):e._e(),e._v(" "),e.showCollectionNameInput?t("div",{staticClass:"rule-footer-name-group"},[t("b-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"collection-name",attrs:{placeholder:e.namePlaceholder,title:e.namePlaceholder},model:{value:e.collectionName,callback:function(t){e.collectionName=t},expression:"collectionName"}}),e._v(" "),t("label",[e._v(e._s(e.l("Name"))+":")])],1):e._e()])]},proxy:!0}],null,!1,4030509081)},[e._v(" "),t("b-row",{staticClass:"mx-auto"},[t("b-button",{staticClass:"creator-cancel-btn rule-btn-cancel",attrs:{help:e.titleCancel,tabindex:"-1"},on:{click:e.cancel}},[e._v(e._s(e.l("Cancel")))]),e._v(" "),t("TooltipOnHover",{staticClass:"menu-option",attrs:{title:e.titleReset}},[t("b-button",{staticClass:"creator-reset-btn rule-btn-reset",on:{click:e.resetRulesAndState}},[e._v(e._s(e.l("Reset")))])],1),e._v(" "),t("TooltipOnHover",{staticClass:"menu-option",attrs:{disabled:!e.validInput,title:e.titleFinish}},[t("b-button",{staticClass:"create-collection rule-btn-okay",attrs:{variant:"primary",disabled:!e.validInput},on:{click:e.createCollection}},[e._v(e._s(e.finishButtonTitle))])],1)],1)],1):e._e()],1):"wait"==e.state?t("StateDiv",{staticClass:"rule-collection-builder"},["datasets"==e.importType?t("RuleModalHeader",[e._v("\n        "+e._s(e.l("Datasets submitted to Galaxy for creation, this dialog will close when dataset creation is complete. You may close this dialog at any time, but you will not be informed of errors with dataset creation and you may have to refresh your history manually to view new datasets once complete."))+"\n    ")]):"collections"==e.importType?t("RuleModalHeader",[e._v("\n        "+e._s(e.l("Galaxy is waiting for collection creation, this dialog will close when this is complete. You may close this dialog at any time, but you will not be informed of errors with collection creation and you may have to refresh your history manually to view new collections once complete."))+"\n    ")]):e._e(),e._v(" "),t("RuleModalFooter",[t("b-button",{staticClass:"creator-cancel-btn",attrs:{tabindex:"-1"},on:{click:e.cancel}},[e._v(e._s(e.l("Close")))])],1)],1):"error"==e.state?t("StateDiv",{staticClass:"rule-collection-builder"},[t("RuleModalHeader",[e._v("A problem was encountered.")]),e._v(" "),t("RuleModalMiddle",[t("p",{staticClass:"errormessagelarge"},[e._v(e._s(e.errorMessage))])]),e._v(" "),t("RuleModalFooter",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"creator-cancel-btn",attrs:{title:e.titleCancel,tabindex:"-1"},on:{click:e.cancel}},[e._v(e._s(e.l("Close")))]),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleErrorOkay,tabindex:"-1"},on:{click:function(t){e.state="build"}}},[e._v(e._s(e.l("Okay")))])],1)],1):e._e()}),[],!1,null,null,null).exports},35655:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(75357);n(70538).default.use(i.ZPm);const o={props:{value:{type:String,default:null},title:{type:String,default:""}},computed:{placeholder(){return`Type to Search ${this.title}`},filter:{get(){return this.value},set(e){this.$emit("input",e)}}}};const a=(0,n(51900).Z)(o,(function(){var e=this,t=e._self._c;return t("b-input-group",[t("b-input",{attrs:{placeholder:e.placeholder},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),t("b-input-group-append",[t("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[t("i",{staticClass:"fa fa-times"})])],1)],1)}),[],!1,null,null,null).exports},33204:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(9382),o=n(56024),a=n(51436),s=n(57810),r=n(75357),l=n(66747);n(70538).default.use(r.ZPm),i.vI.add(o.a3,o.e3,a.Pk,o.El);const d={key:"label",sortable:!0},c={key:"details",sortable:!0},u={key:"time",sortable:!0},h={key:"select_icon",label:"",sortable:!1},p={components:{FontAwesomeIcon:s.GN},props:{items:{type:Array,required:!0},filter:{type:String,default:null},multiple:{type:Boolean,default:!1},selectAllIcon:{type:String,default:l.L.unselected},leafIcon:{type:String,default:"fa fa-file-o"},showDetails:{type:Boolean,default:!0},showTime:{type:Boolean,default:!0},showSelectIcon:{type:Boolean,default:!1},isEncoded:{type:Boolean,default:!1},isBusy:{type:Boolean,default:!1}},data:()=>({currentPage:1,nItems:0,perPage:100}),computed:{fields:function(){const e=[];return this.showSelectIcon&&e.push(h),e.push(d),this.showDetails&&e.push(c),this.showTime&&e.push(u),e}},watch:{items:{immediate:!0,handler(e){this.filtered(e)}}},methods:{selectionIcon(e){switch(e){case l.L.selected:return["far","check-square"];case l.L.mixed:return["fas","minus-square"];default:return["far","square"]}},filtered:function(e){this.nItems=e.length,this.currentPage=1},clicked:function(e){this.$emit("clicked",e)},open:function(e){this.$emit("open",e)}}};const f=(0,n(51900).Z)(p,(function(){var e=this,t=e._self._c;return t("div",[t("b-table",{attrs:{small:"",hover:"",items:e.items,fields:e.fields,filter:e.filter,"per-page":e.perPage,"current-page":e.currentPage,busy:e.isBusy,"primary-key":"id"},on:{"update:busy":function(t){e.isBusy=t},"row-clicked":e.clicked,filtered:e.filtered},scopedSlots:e._u([{key:"head(select_icon)",fn:function(){return[t("FontAwesomeIcon",{staticClass:"select-checkbox cursor-pointer",attrs:{title:"Check to select all datasets",icon:e.selectionIcon(e.selectAllIcon)},on:{click:function(t){return e.$emit("toggleSelectAll")}}})]},proxy:!0},{key:"cell(select_icon)",fn:function(n){return[t("FontAwesomeIcon",{attrs:{icon:e.selectionIcon(n.item._rowVariant)}})]}},{key:"cell(label)",fn:function(n){return[t("div",{staticStyle:{cursor:"pointer"}},[e.isEncoded?t("pre",{attrs:{title:`label-${n.item.labelTitle}`}},[t("code",[e._v(e._s(n.value?n.value:"-"))])]):t("span",[n.item.isLeaf?t("div",[t("i",{class:e.leafIcon}),e._v(" "),t("span",{attrs:{title:`label-${n.item.labelTitle}`}},[e._v(e._s(n.value?n.value:"-"))])]):t("div",{on:{click:function(t){return t.stopPropagation(),e.open(n.item)}}},[t("FontAwesomeIcon",{attrs:{icon:"folder"}}),e._v(" "),t("b-link",{attrs:{title:`label-${n.item.labelTitle}`}},[e._v(e._s(n.value?n.value:"-"))])],1)])])]}},{key:"cell(details)",fn:function(n){return[t("span",{attrs:{title:`details-${n.item.labelTitle}`}},[e._v(e._s(n.value?n.value:"-"))])]}},{key:"cell(time)",fn:function(t){return[e._v("\n            "+e._s(t.value?t.value:"-")+"\n        ")]}}])}),e._v(" "),e.isBusy?t("div",{staticClass:"text-center"},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" "),t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" "),t("b-spinner",{attrs:{small:"",type:"grow"}})],1):e._e(),e._v(" "),0===e.nItems?t("div",[e.filter?t("div",[e._v("\n            No search results found for: "),t("b",[e._v(e._s(e.filter))]),e._v(".\n        ")]):t("div",[e._v("No entries.")])]):e._e(),e._v(" "),e.nItems>e.perPage?t("b-pagination",{staticClass:"justify-content-md-center",attrs:{"per-page":e.perPage,"total-rows":e.nItems},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)}),[],!1,null,null,null).exports},95651:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(81924),o=n(51120),a=n(50452);const s={mixins:[n(1500).Z],props:{history:{type:String,required:!0}},data:()=>({errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,hasValue:!1}),created:function(){this.load()},methods:{formatRows(){},clicked:function(e){this.modalShow=!1,this.callback(e),this.$emit("onOk",e)},onCancel(){this.modalShow=!1,this.$emit("onCancel")},load:function(){this.filter=null,this.optionsShow=!1;const e=`${(0,i.Bz)().root}api/histories/${this.history}/contents?type=dataset_collection`;o.Z.get(e).then((e=>{this.items=e.data.map((e=>({id:e.id,label:e.name,time:e.created_time,isLeaf:!0}))),this.formatRows(),this.optionsShow=!0})).catch((e=>{this.errorMessage=(0,a.a)(e)}))}}};const r=(0,n(51900).Z)(s,(function(){var e=this,t=e._self._c;return t("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":e.onCancel},scopedSlots:e._u([{key:"search",fn:function(){return[t("data-dialog-search",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?t("data-dialog-table",{attrs:{items:e.items,multiple:!1,filter:e.filter,"leaf-icon":"fa fa-folder"},on:{clicked:e.clicked,load:e.load}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports},35409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(57810),o=n(75357);n(70538).default.use(o.ZPm);const a={components:{FontAwesomeIcon:i.GN},props:{multiple:{type:Boolean,default:!1},modalStatic:{type:Boolean,default:!1},errorMessage:{type:String,default:null},optionsShow:{type:Boolean,default:!1},modalShow:{type:Boolean,default:!0},hideModal:{type:Function,required:!0},backFunc:{type:Function,required:!1,default:()=>{}},undoShow:{type:Boolean,required:!1}}};const s=(0,n(51900).Z)(a,(function(){var e=this,t=e._self._c;return e.modalShow?t("b-modal",{attrs:{"modal-class":"selection-dialog-modal",visible:"",static:e.modalStatic},on:{hide:e.hideModal},scopedSlots:e._u([{key:"modal-header",fn:function(){return[e._t("search")]},proxy:!0},{key:"modal-footer",fn:function(){return[t("div",{staticClass:"w-100"},[e.errorMessage?t("div",[e.undoShow?t("b-btn",{staticClass:"float-left",attrs:{id:"back-btn",size:"sm"},on:{click:e.backFunc}},[t("FontAwesomeIcon",{attrs:{icon:["fas","caret-left"]}}),e._v("\n                    Back\n                ")],1):e._e(),e._v(" "),t("b-btn",{staticClass:"float-right",attrs:{id:"close-btn",size:"sm",variant:"primary"},on:{click:e.hideModal}},[e._v("\n                    Close\n                ")])],1):t("div",[e._t("buttons"),e._v(" "),t("b-btn",{staticClass:"float-right selection-dialog-modal-cancel",attrs:{size:"sm"},on:{click:e.hideModal}},[e._v("\n                    Cancel\n                ")])],2)])]},proxy:!0}],null,!0)},[e._v(" "),e._t("helper"),e._v(" "),e.errorMessage?t("b-alert",{attrs:{variant:"danger",show:""}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):t("div",[e.optionsShow?e._t("options"):t("div",[t("span",{staticClass:"fa fa-spinner fa-spin"}),e._v(" "),t("span",[e._v("Please wait...")])])],2)],2):e._e()}),[],!1,null,null,null).exports},96277:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(9382),o=n(51436),a=n(57810),s=n(51120),r=n(15193),l=n(9944),d=n(40961),c=n(74448),u=n(7767);i.vI.add(o.q7m,o.LM3);const h={components:{FontAwesomeIcon:a.GN,BButton:r.T},props:{title:{type:String,required:!0},downloadEndpoint:{type:String,required:!0},postParameters:{type:Object,default:()=>({})},fallbackUrl:{type:String,default:null},variant:{type:String,default:null},size:{type:String,default:"md"}},setup(){const{config:e,isConfigLoaded:t}=(0,u.Z)(!0);return{config:e,isConfigLoaded:t}},data:()=>({waiting:!1,delay:200}),destroyed(){this.clearTimeout()},methods:{canDownload(e){return!!e.enable_celery_tasks||null!=this.fallbackUrl},onDownload(e){e.enable_celery_tasks?(this.waiting=!0,s.Z.post(this.downloadEndpoint,this.postParameters).then(this.handleInitialize).catch(this.handleError)):window.open((0,c.dq)(this.fallbackUrl))},handleInitialize(e){const t=e.data.storage_request_id;this.pollStorageRequestId(t)},pollStorageRequestId(e){const t=`${(0,d.getAppRoot)()}api/short_term_storage/${e}/ready`;s.Z.get(t).then((t=>{this.handlePollResponse(t,e)})).catch(this.handleError)},handlePollResponse(e,t){if(e.data){const e=`${(0,d.getAppRoot)()}api/short_term_storage/${t}`;window.location.assign(e),this.waiting=!1}else this.pollAfterDelay(t)},handleError(e){l.FN.error(`Failed to generate download: ${e}`),this.waiting=!1},clearTimeout(){this.timeout&&clearTimeout(this.timeout)},pollAfterDelay(e){this.clearTimeout(),this.timeout=setTimeout((()=>{this.pollStorageRequestId(e)}),this.delay)}}};const p=(0,n(51900).Z)(h,(function(){var e=this,t=e._self._c;return e.isConfigLoaded&&e.canDownload(e.config)?t("BButton",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{title:e.title,variant:e.variant,size:e.size,role:"button"},on:{click:function(t){return e.onDownload(e.config)}}},[e._v("\n    Generate\n    "),e.waiting?t("FontAwesomeIcon",{attrs:{icon:"spinner",spin:""}}):t("FontAwesomeIcon",{attrs:{icon:"download"}})],1):e._e()}),[],!1,null,null,null).exports},80527:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(70538),o=n(9382),a=n(51436),s=n(57810),r=n(47907),l=n.n(r),d=n(9944),c=n(19744),u=n(38046),h=n(28732),p=n(24382);const f=(0,h.Q_)("userTagsStore",(()=>{const e=(0,i.ref)([]),{currentUser:t}=(0,h.Jk)((0,p.L)());return{userTags:(0,i.computed)((()=>{var n;let i;i=t.value&&!t.value.isAnonymous?[...null!==(n=t.value.tags_used)&&void 0!==n?n:[],...e.value]:e.value;const o=new Set(i);return Array.from(o).map((e=>e.replace(/^name:/,"#")))})),addLocalTag:t=>{e.value.push(t)}}}));var m=n(39327);const _=(0,i.defineComponent)({__name:"Tag",props:{option:null,search:null,editable:{type:Boolean},clickable:{type:Boolean}},emits:["click","deleted"],setup(e,{emit:t}){const n=e;o.vI.add(a.NBC);const r=(0,i.computed)((()=>(0,m.D)(n.option)));const l=(0,i.computed)((()=>{var e;return null===(e=n.option)||void 0===e?void 0:e.startsWith("#")})),d=(0,i.computed)((()=>{var e,t;return(null===(e=n.option)||void 0===e?void 0:e.toLowerCase())===(null===(t=n.search)||void 0===t?void 0:t.toLowerCase())}));return{__sfc:!0,props:n,emit:t,color:r,onClick:function(){t("click",n.option)},onDelete:function(){t("deleted",n.option)},named:l,searched:d,FontAwesomeIcon:s.GN}}});var v=n(51900);const g=(0,v.Z)(_,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"tag btn-transparent-background",class:{editable:e.editable,clickable:e.clickable,searched:n.searched},style:`--color-primary: ${n.color.primary}; --color-darker: ${n.color.darker}; --color-dimmed: ${n.color.dimmed}`,attrs:{"data-option":n.props.option},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onClick.apply(null,arguments)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}},[t("span",{class:{"font-weight-bold":n.named}},[e._v("\n        "+e._s(n.props.option)+"\n    ")]),e._v(" "),e.editable?t("b-button",{staticClass:"px-1 py-0 tag-delete-button",attrs:{size:"sm",variant:"link",tabindex:"-1"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.onDelete.apply(null,arguments)}}},[t(n.FontAwesomeIcon,{attrs:{icon:"fa-times"}})],1):e._e()],1)}),[],!1,null,"aa92f652",null).exports,y=(0,i.defineComponent)({__name:"StatelessTags",props:{value:{default:()=>[]},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},useToggleLink:{type:Boolean,default:!0},maxVisibleTags:{default:5},placeholder:{default:"Add Tags"},noPadding:{type:Boolean}},emits:["input","tag-click"],setup(e,{emit:t}){const n=e;o.vI.add(a.tho,a.LEp,a.NBC,a.r8p);const{userTags:r,addLocalTag:h}=f(),{warning:p}=(0,d.pm)();const{editing:m,ariaExpanded:_,onOpen:v,onClose:y}=(0,c.F)(),b=(0,i.ref)(null);const w=(0,i.computed)((()=>n.value.map((e=>e.replace(/^name:/,"#"))))),k=(0,i.ref)(!1),C=(0,u.Z)("toggle-link-"),x=(0,i.computed)((()=>!n.useToggleLink||k.value?w.value:w.value.slice(0,n.maxVisibleTags))),S=(0,i.computed)((()=>n.useToggleLink?w.value.slice(n.maxVisibleTags):[])),M=/([.:\s][.:\s])|(^[.:])|([.:]$)|(^[\s]*$)/;function T(e){return"string"==typeof e?!e.match(M):!e.label.match(M)}return{__sfc:!0,props:n,emit:t,userTags:r,addLocalTag:h,warning:p,onAddTag:function(e){const i=e.trim();T(i)?(h(i),t("input",[...n.value,i])):p(`"${i}" is not a valid tag.`,"Invalid Tag")},onInput:function(e){t("input",e)},onDelete:function(e){const n=[...w.value],i=w.value.indexOf(e);n.splice(i,1),t("input",n)},editing:m,ariaExpanded:_,onOpen:v,onClose:y,multiselectElement:b,openMultiselect:function(){var e;null===(e=b.value)||void 0===e||e.activate()},tags:w,toggledOpen:k,toggleButtonId:C,trimmedTags:x,slicedTags:S,invalidTagRegex:M,isValid:T,onTagClicked:function(e){t("tag-click",e)},FontAwesomeIcon:s.GN,Multiselect:l(),Tag:g}}});const b=(0,v.Z)(y,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"stateless-tags",class:{"px-1":!n.props.noPadding}},[e.disabled?t("div",{class:{"pl-1":!n.props.noPadding,"pb-2":!n.props.noPadding}},[t("div",{staticClass:"d-inline"},[e._l(n.trimmedTags,(function(e){return t(n.Tag,{key:e,attrs:{option:e,editable:!1,clickable:n.props.clickable},on:{click:n.onTagClicked}})})),e._v(" "),n.slicedTags.length>0&&!n.toggledOpen?t("b-button",{staticClass:"toggle-link",attrs:{id:n.toggleButtonId,variant:"link"},on:{click:()=>n.toggledOpen=!0}},[e._v("\n                "+e._s(n.slicedTags.length)+" more...\n            ")]):e._e(),e._v(" "),n.slicedTags.length>0&&!n.toggledOpen?t("b-tooltip",{attrs:{target:n.toggleButtonId,"custom-class":"stateless-tags--tag-preview-tooltip",placement:"bottom"}},e._l(n.slicedTags,(function(e){return t(n.Tag,{key:e,attrs:{option:e,editable:!1,clickable:n.props.clickable},on:{click:n.onTagClicked}})})),1):e._e()],2)]):t(n.Multiselect,{ref:"multiselectElement",attrs:{"open-direction":"bottom",placeholder:n.props.placeholder,value:n.tags,options:n.userTags,multiple:!0,taggable:!0,"close-on-select":!1,"aria-expanded":n.ariaExpanded},on:{tag:n.onAddTag,input:n.onInput,open:n.onOpen,close:n.onClose},scopedSlots:e._u([{key:"tag",fn:function({option:e,search:i}){return[t(n.Tag,{attrs:{option:e,search:i,editable:!0,clickable:n.props.clickable},on:{deleted:n.onDelete,click:n.onTagClicked}})]}},{key:"noOptions",fn:function(){return[t("span",{staticClass:"multiselect-option"},[e._v("Type to add new tag")])]},proxy:!0},{key:"caret",fn:function(){return[n.editing?e._e():t("b-button",{staticClass:"toggle-button",attrs:{variant:"link",tabindex:"-1"},on:{click:n.openMultiselect}},[e._v("\n                "+e._s(n.props.placeholder)+"\n                "),t(n.FontAwesomeIcon,{attrs:{icon:"fa-tags"}})],1)]},proxy:!0},{key:"option",fn:function({option:i}){return[t("span",{staticClass:"multiselect-option",class:{invalid:!n.isValid(i)}},[t("span",[e._v(e._s(i.label??i))]),e._v(" "),n.tags.includes(i)?t("span",{staticClass:"float-right"},[t("span",{staticClass:"info"},[t(n.FontAwesomeIcon,{staticClass:"check-icon",attrs:{icon:"fa-check","fixed-width":""}})],1),e._v(" "),t("span",{staticClass:"info highlighted"},[t(n.FontAwesomeIcon,{staticClass:"times-icon",attrs:{icon:"fa-times","fixed-width":""}}),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("remove tag")])],1)]):t("span",{staticClass:"float-right"},[t("span",{staticClass:"info highlighted"},[t(n.FontAwesomeIcon,{staticClass:"plus-icon",attrs:{icon:"fa-plus","fixed-width":""}}),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("add tag")])],1)])])]}}],null,!1,2217819972)})],1)}),[],!1,null,"1431d614",null).exports},19046:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(70538),o=n(23855),a=n(62030),s=n(32449);const r=(0,i.defineComponent)({__name:"UtcDate",props:{date:null,mode:{default:"date"}},setup(e){const t=e,n=(0,i.computed)((()=>(0,o.Z)(`${t.date}Z`))),r=(0,i.computed)((()=>(0,a.Z)(n.value,{addSuffix:!0}))),l=(0,i.computed)((()=>n.value.toISOString())),d=(0,i.computed)((()=>(0,s.Z)(n.value,"eeee MMM do H:mm:ss yyyy zz")));return{__sfc:!0,props:t,parsedDate:n,elapsedTime:r,fullISO:l,pretty:d}}});const l=(0,n(51900).Z)(r,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return"date"==e.mode?t("span",{staticClass:"utc-time",attrs:{title:n.elapsedTime}},[e._v("\n    "+e._s(n.fullISO)+"\n")]):"elapsed"===e.mode?t("span",{staticClass:"utc-time utc-time-elapsed",attrs:{title:n.fullISO}},[e._v("\n    "+e._s(n.elapsedTime)+"\n")]):t("span",{staticClass:"utc-time",attrs:{title:n.elapsedTime}},[e._v("\n    "+e._s(n.pretty)+"\n")])}),[],!1,null,null,null).exports},15737:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>xe});const i={computed:{isNew(){return!this.jobStatesSummary||this.jobStatesSummary.new()},isErrored(){return this.jobStatesSummary&&this.jobStatesSummary.errored()},isPopulationFailed(){return this.jobStatesSummary&&this.jobStatesSummary.populationFailed()},isTerminal(){return this.jobStatesSummary&&this.jobStatesSummary.terminal()},jobCount(){return this.jobStatesSummary?this.jobStatesSummary.jobCount():null},jobsStr(){const e=this.jobCount;return e&&e>1?`${e} jobs`:"a job"},runningCount(){return this.countStates(["running"])},okCount(){return this.countStates(["ok","skipped"])},errorCount(){return this.countStates(["error","deleted"])},newCount(){return this.jobCount-this.okCount-this.runningCount-this.errorCount}},methods:{countStates(e){let t=0;if(this.jobStatesSummary&&this.jobStatesSummary.hasDetails())for(const n of e)t+=this.jobStatesSummary.states()[n]||0;return t}}};var o=n(45264),a=n(86290),s=n(20629),r=n(51120),l=n(97061);const d=e=>(0,l.j4)()+e;var c=n(70538),u=n(65534),h=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};function p(e){const t=(0,u.I)(),n=(0,c.computed)((()=>t.getStoredWorkflowByInstanceId(e))),i=(0,c.ref)(!1);return function(){h(this,void 0,void 0,(function*(){if(!n.value){i.value=!0;try{yield t.fetchWorkflowForInstanceId(e)}catch(e){console.error("unable to fetch workflow \n",e)}finally{i.value=!1}}}))}(),{workflow:n,loading:i}}var f=n(75357);c.default.use(f.ZPm);const m={props:{parameters:{type:Array,required:!0}}};var _=n(51900);const v=(0,_.Z)(m,(function(){return(0,this._self._c)("b-table",{attrs:{small:"","caption-top":"",fields:["label","parameter_value"],items:this.parameters}})}),[],!1,null,null,null).exports;var g=n(9382),y=n(51436),b=n(57810),w=n(75515),k=n(2461),C=n(37185),x=n(28732),S=n(29705),M=n(68954),T=n(76542),L=n(19046);c.default.use(f.ZPm);const D={components:{UtcDate:L.Z,JobProvider:k.JV,JobParameters:T.Z,JobInformation:M.Z},props:{jobs:{type:Array,required:!0}},data:()=>({fields:[{key:"state",sortable:!0},{key:"update_time",label:"Updated",sortable:!0},{key:"create_time",label:"Created",sortable:!0}],toggledItems:{}}),methods:{jobsProvider(e,t){return this.$watch("jobs",(function(){const e=this.jobs.map((e=>({...e,_showDetails:!!this.toggledItems[e.id]})));t(e)}),{immediate:!0}),null},toggleDetails(e){e._showDetails=!e._showDetails,this.toggledItems[e.id]=e._showDetails}}};const E=(0,_.Z)(D,(function(){var e=this,t=e._self._c;return e.jobs?t("b-card",[t("b-table",{attrs:{small:"","caption-top":"",items:e.jobsProvider,fields:e.fields,"primary-key":"id"},on:{"row-clicked":e.toggleDetails},scopedSlots:e._u([{key:"row-details",fn:function(n){return[t("JobProvider",{attrs:{id:n.item.id},scopedSlots:e._u([{key:"default",fn:function({item:n,loading:i}){return[t("div",i?[t("b-spinner",{attrs:{label:"Loading Job..."}})]:[n?t("JobInformation",{attrs:{job_id:n.id}}):e._e(),e._v(" "),t("p"),e._v(" "),n?t("JobParameters",{attrs:{"job-id":n.id,"include-title":!1}}):e._e()],1)]}}],null,!0)})]}},{key:"cell(create_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"cell(update_time)",fn:function(e){return[t("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}}],null,!1,3273301393)})],1):e._e()}),[],!1,null,null,null).exports;g.vI.add(y.mTx,y.ptq);const O={components:{LoadingSpan:o.Z,FontAwesomeIcon:b.GN,JobStep:E,ParameterStep:v,InvocationStepProvider:k.Pr,GenericHistoryItem:w.Z,WorkflowInvocationState:()=>Promise.resolve().then(n.bind(n,15737))},props:{invocation:Object,workflowStep:Object,workflow:Object},data:()=>({expanded:!1,polling:null}),computed:{...(0,x.rn)(u.I,["getStoredWorkflowByInstanceId"]),...(0,x.rn)(S.n,["getToolForId","getToolNameById"]),...(0,s.Se)(["getInvocationStepById"]),isReady(){return this.invocation.steps.length>0},invocationStepId(){return this.step?.id},workflowStepType(){return this.workflowStep.type},step(){return this.invocation.steps[this.workflowStep.id]},isDataStep(){return["data_input","data_collection_input"].includes(this.workflowStepType)},stepIcon(){return C.Z[this.workflowStepType]},stepLabel(){return this.labelForWorkflowStep(this.workflowStep.id)}},created(){this.fetchTool(),this.fetchSubworkflow()},methods:{...(0,x.nv)(u.I,["fetchWorkflowForInstanceId"]),...(0,x.nv)(S.n,["fetchToolForId"]),...(0,s.nv)(["fetchInvocationStepById"]),fetchTool(){this.workflowStep.tool_id&&!this.getToolForId(this.workflowStep.tool_id)&&this.fetchToolForId(this.workflowStep.tool_id)},fetchSubworkflow(){this.workflowStep.workflow_id&&this.fetchWorkflowForInstanceId(this.workflowStep.workflow_id)},toggleStep(){this.expanded=!this.expanded},labelForWorkflowStep(e){const t=this.invocation.steps[e],n=this.workflow.steps[e],i=e+1;if(t&&t.workflow_step_label)return`Step ${i}: ${t.workflow_step_label}`;const o=n.type;switch(o){case"tool":return`Step ${i}: ${this.getToolNameById(n.tool_id)}`;case"subworkflow":{const e=this.getStoredWorkflowByInstanceId(n.workflow_id);return`Step ${i}: ${e?e.name:"Subworkflow"}`}case"parameter_input":return`Step ${i}: Parameter input`;case"data_input":return`Step ${i}: Data input`;case"data_collection_input":return`Step ${i}: Data collection input`;default:return`Step ${i}: Unknown step type '${o}'`}}}};const A=(0,_.Z)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex",attrs:{"data-step":e.workflowStep.id}},[t("div",{staticClass:"ui-portlet-section",staticStyle:{width:"100%"}},[t("div",{staticClass:"portlet-header portlet-title portlet-operations cursor-pointer",on:{click:e.toggleStep}},[t("i",{class:"portlet-title-icon fa mr-1 "+e.stepIcon}),e._v(" "),t("span",{staticClass:"portlet-title-text"},[t("u",{staticClass:"step-title"},[e._v(e._s(e.stepLabel))])]),e._v(" "),t("FontAwesomeIcon",{staticClass:"float-right",attrs:{icon:e.expanded?"fa-chevron-up":"fa-chevron-down"}})],1),e._v(" "),e.expanded?t("div",{staticClass:"portlet-content"},[e.isReady&&void 0!==e.invocationStepId?t("InvocationStepProvider",{attrs:{id:e.invocationStepId,"auto-refresh":""},scopedSlots:e._u([{key:"default",fn:function({result:n,loading:i}){return[t("div",{staticStyle:{"min-width":"1"}},[i?t("LoadingSpan",{attrs:{message:"Loading invocation step details"}}):t("div",[Object.values(n.outputs).length>0?t("details",{staticClass:"invocation-step-output-details"},[t("summary",[t("b",[e._v("Output Datasets")])]),e._v(" "),e._l(n.outputs,(function(n,i){return t("div",{key:n.id},[t("b",[e._v(e._s(i))]),e._v(" "),t("GenericHistoryItem",{attrs:{"item-id":n.id,"item-src":n.src}})],1)}))],2):e._e(),e._v(" "),Object.values(n.output_collections).length>0?t("details",{staticClass:"invocation-step-output-collection-details"},[t("summary",[t("b",[e._v("Output Dataset Collections")])]),e._v(" "),e._l(n.output_collections,(function(n,i){return t("div",{key:n.id},[t("b",[e._v(e._s(i))]),e._v(" "),t("GenericHistoryItem",{attrs:{"item-id":n.id,"item-src":n.src}})],1)}))],2):e._e(),e._v(" "),t("div",{staticClass:"portlet-body",staticStyle:{width:"100%","overflow-x":"auto"}},["tool"==e.workflowStepType?t("details",{staticClass:"invocation-step-job-details"},[t("summary",[t("b",[e._v("Jobs")])]),e._v(" "),t("JobStep",{attrs:{jobs:n.jobs}})],1):"parameter_input"==e.workflowStepType?t("ParameterStep",{attrs:{parameters:[e.invocation.input_step_parameters[n.workflow_step_label]]}}):e.isDataStep&&e.invocation&&e.invocation.inputs&&e.invocation.inputs[e.workflowStep.id]?t("GenericHistoryItem",{attrs:{"item-id":e.invocation.inputs[e.workflowStep.id].id,"item-src":e.invocation.inputs[e.workflowStep.id].src}}):"subworkflow"==e.workflowStepType?t("div",[n.subworkflow_invocation_id?t("WorkflowInvocationState",{attrs:{"invocation-id":n.subworkflow_invocation_id}}):t("div",[e._v("\n                                    Workflow invocation for this step is not yet scheduled.\n                                    "),t("br"),e._v("\n                                    This step consumes outputs from these steps:\n                                    "),e.workflowStep?t("ul",e._l(Object.values(e.workflowStep.input_steps),(function(n){return t("li",{key:n.source_step},[e._v("\n                                            "+e._s(e.labelForWorkflowStep(n.source_step))+"\n                                        ")])})),0):e._e()])],1):e._e()],1)])],1)]}}],null,!1,3093879887)}):t("LoadingSpan",{attrs:{message:"This invocation has not been scheduled yet, step information is unavailable"}})],1):e._e()])])}),[],!1,null,null,null).exports,I=(0,c.defineComponent)({__name:"WorkflowInvocationDetails",props:{invocation:{type:Object,required:!0}},setup(e){const t=e,{workflow:n}=p(t.invocation.workflow_id);return{__sfc:!0,props:t,workflow:n,dataInputStepLabel:function(e,n){const i=t.invocation.steps[e];let o=i&&i.workflow_step_label;return o||("hda"===n.src||"ldda"===n.src?o="Input dataset":"hdca"===n.src&&(o="Input dataset collection")),o},ParameterStep:v,WorkflowInvocationStep:A,GenericHistoryItem:w.Z}}});const P=(0,_.Z)(I,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return e.invocation?t("div",[t("b-tabs",{attrs:{lazy:""}},[Object.keys(e.invocation.input_step_parameters).length?t("b-tab",{attrs:{title:"Parameters"}},[t(n.ParameterStep,{attrs:{parameters:Object.values(e.invocation.input_step_parameters)}})],1):e._e(),e._v(" "),Object.keys(e.invocation.inputs).length?t("b-tab",{attrs:{title:"Inputs"}},e._l(e.invocation.inputs,(function(i,o){return t("div",{key:i.id,attrs:{"data-label":n.dataInputStepLabel(o,i)}},[t("b",[e._v(e._s(n.dataInputStepLabel(o,i)))]),e._v(" "),t(n.GenericHistoryItem,{attrs:{"item-id":i.id,"item-src":i.src}})],1)})),0):e._e(),e._v(" "),Object.keys(e.invocation.outputs).length?t("b-tab",{attrs:{title:"Outputs"}},e._l(e.invocation.outputs,(function(i,o){return t("div",{key:i.id},[t("b",[e._v(e._s(o)+":")]),e._v(" "),t(n.GenericHistoryItem,{attrs:{"item-id":i.id,"item-src":i.src}})],1)})),0):e._e(),e._v(" "),Object.keys(e.invocation.output_collections).length?t("b-tab",{attrs:{title:"Output Collections"}},e._l(e.invocation.output_collections,(function(i,o){return t("div",{key:i.id},[t("b",[e._v(e._s(o)+":")]),e._v(" "),t(n.GenericHistoryItem,{attrs:{"item-id":i.id,"item-src":i.src}})],1)})),0):e._e(),e._v(" "),n.workflow?t("b-tab",{attrs:{title:"Steps"}},e._l(Object.values(n.workflow.steps),(function(i){return t(n.WorkflowInvocationStep,{key:i.id,attrs:{invocation:e.invocation,workflow:n.workflow,"workflow-step":i}})})),1):e._e()],1)],1):e._e()}),[],!1,null,null,null).exports;var R=n(86855);class j{constructor(e={}){this.id=e.id??"undefined-plugin",this.title=e.title??"Unknown Plugin",this.markdownDescription=e.markdownDescription??"No description provided",this.exportParams=e.exportParams??null,this.additionalActions=e.additionalActions??[]}}class Y{constructor(e={}){this.id=e.id??"undefined-action",this.title=e.title??"Untitled action",this.icon=e.icon??null,this.run=e.run??(()=>{alert("Undefined 'run' function in InvocationExportPluginAction")}),this.modal=e.modal??null}}var H=n(81165),N=n(17471),F=n(9944),B=n(74448),$=n(42773);const z={__name:"SendForm",setup(e,{expose:t}){const n=(0,c.ref)(null),i=(0,c.ref)(!1),o=(0,c.reactive)({fetch:"https://biocomputeobject.org",authorization:"",table:"BCO",owner_group:""}),a=(0,c.inject)("invocationId");function s(){d(),n.value.show()}function l(){n.value.hide()}function d(){o.fetch="",o.authorization="",o.table="GALXY",o.owner_group=""}function u(e){F.FN.error(`Failed to send BCO. ${e}`)}async function h(){try{i.value=!0;const e={model_store_format:"bco.json",include_files:!1,include_deleted:!1,include_hidden:!1},t=(await r.Z.post((0,B.dq)(`/api/invocations/${a}/prepare_store_download`),e)).data.storage_request_id,n=(0,B.dq)(`/api/short_term_storage/${t}/ready`),o=(0,B.dq)(`/api/short_term_storage/${t}`);let s=await r.Z.get(n),l=120;for(;!s.data&&l;)await(0,$.Dc)(2e3),s=await r.Z.get(n),l-=1;if(s.data){return(await r.Z.get(o)).data}throw Error("Timeout waiting for BioCompute Object export result!")}catch(e){u(e)}finally{i.value=!1}}async function p(e){const t={POST_api_objects_draft_create:[{contents:e,owner_group:o.owner_group,schema:"IEEE",prefix:o.table}]},n={Authorization:"Token "+o.authorization,"Content-type":"application/json; charset=UTF-8"};try{await r.Z.post(`${o.fetch}/api/objects/drafts/create/`,t,{headers:n}),F.FN.success(`Invocation successfully sent to: ${o.fetch}`)}catch(e){u(e)}}return t({showModal:s}),{__sfc:!0,sendBCOModal:n,generatingBCO:i,form:o,invocationId:a,showModal:s,hideModal:l,resetForm:d,handleError:u,generateBcoContent:h,sendBco:p,submitForm:async function(){const e=await h();l(),await p(e),d()},FontAwesomeIcon:b.GN,BModal:H.N,ExternalLink:N.Z}}};const W=(0,_.Z)(z,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BModal,{ref:"sendBCOModal",attrs:{title:"Submit To BCODB","title-tag":"h2",centered:"","hide-footer":""}},[t("div",[t("p",[e._v("\n            To submit to a BCODB you need to already have an authenticated account. Instructions on submitting a BCO\n            from Galaxy are available\n            "),t(n.ExternalLink,{attrs:{href:"https://w3id.org/biocompute/tutorials/galaxy_quick_start/",target:"_blank"}},[e._v("here")]),e._v(".\n        ")],1),e._v(" "),t("form",{on:{submit:function(e){return e.preventDefault(),n.submitForm.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"fetch"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.form.fetch,expression:"form.fetch"}],staticClass:"form-control",attrs:{id:"fetch",type:"text",placeholder:"https://biocomputeobject.org",autocomplete:"off",required:""},domProps:{value:n.form.fetch},on:{input:function(t){t.target.composing||e.$set(n.form,"fetch",t.target.value)}}}),e._v("\n                    BCO DB URL (example: https://biocomputeobject.org)\n                ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"authorization"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.form.authorization,expression:"form.authorization"}],staticClass:"form-control",attrs:{id:"authorization",type:"password",autocomplete:"off",required:""},domProps:{value:n.form.authorization},on:{input:function(t){t.target.composing||e.$set(n.form,"authorization",t.target.value)}}}),e._v("\n                    User API Key\n                ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"table"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.form.table,expression:"form.table"}],staticClass:"form-control",attrs:{id:"table",type:"text",placeholder:"GALXY",required:""},domProps:{value:n.form.table},on:{input:function(t){t.target.composing||e.$set(n.form,"table",t.target.value)}}}),e._v("\n                    Prefix\n                ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"owner_group"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.form.owner_group,expression:"form.owner_group"}],staticClass:"form-control",attrs:{id:"owner_group",type:"text",autocomplete:"off",required:""},domProps:{value:n.form.owner_group},on:{input:function(t){t.target.composing||e.$set(n.form,"owner_group",t.target.value)}}}),e._v("\n                    User Name\n                ")])]),e._v(" "),t("div",{staticClass:"form-group"},[n.generatingBCO?t("div",[t(n.FontAwesomeIcon,{attrs:{icon:"spinner",spin:""}}),e._v("\n                    Generating BCO please wait...\n                ")],1):t("button",{staticClass:"btn btn-primary"},[e._v(e._s(e._f("localize")("Submit")))])])])])])}),[],!1,null,null,null).exports;g.vI.add(y.t5N);const U=new j({title:"BioCompute Object",markdownDescription:"\nA BioCompute Object (BCO) is the unofficial name for a JSON object that adheres to the [IEEE-2791-2020 standard](https://standards.ieee.org/ieee/2791/7337/).\nA BCO is designed to communicate High-throughput Sequencing (HTS) analysis results, data set creation, data curation, and bioinformatics verification protocols.\n\nLearn more about [BioCompute Objects](https://biocomputeobject.org/).\n\nInstructions for [creating a BCO using Galaxy](https://w3id.org/biocompute/tutorials/galaxy_quick_start).",exportParams:{modelStoreFormat:"bco.json",includeFiles:!1,includeDeleted:!1,includeHidden:!1},additionalActions:[new Y({id:"send-to-bco-db",title:"Send to BCODB",icon:y.t5N,run:e=>{e.showModal()},modal:W})]}),V=new j({title:"File",markdownDescription:"Export the invocation to a compressed File containing the invocation data in Galaxy native format.",exportParams:{modelStoreFormat:"tgz",includeFiles:!1,includeDeleted:!1,includeHidden:!1},additionalActions:[]}),q=[new j({title:"Research Object Crate (RO-Crate)",markdownDescription:"\nRO-Crate is a community effort to establish a lightweight approach to packaging research data with their metadata. It is based on schema.org annotations in JSON-LD, and aims to make best-practice in formal metadata description accessible and practical for use in a wider variety of situations, from an individual researcher working with a folder of data, to large data-intensive computational research environments.\n\nLearn more about [RO Crate](https://www.researchobject.org/ro-crate/).",exportParams:{modelStoreFormat:"rocrate.zip",includeFiles:!0,includeDeleted:!1,includeHidden:!1}}),U,V];var Z=n(7767),G=n(45969),J=n(41984),K=n(49379),X=n(93514);const Q={__name:"ActionButton",props:{action:{type:Y,required:!0}},setup(e){const t=e;return{__sfc:!0,modal:(0,c.ref)(null),props:t,FontAwesomeIcon:b.GN}}};const ee=(0,_.Z)(Q,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{title:n.props.action.title},on:{click:function(e){return n.props.action.run(n.modal)}}},[n.props.action.icon?t(n.FontAwesomeIcon,{attrs:{icon:n.props.action.icon}}):t("div",[e._v("\n        "+e._s(n.props.action.title)+"\n    ")]),e._v(" "),n.props.action.modal?t(n.props.action.modal,{ref:"modal",tag:"component"}):e._e()],1)}),[],!1,null,null,null).exports;var te=n(96277),ne=n(15193),ie=n(47277);const oe={__name:"ExportToRemoteButton",props:{title:{type:String,required:!0},taskId:{type:String,default:null}},emits:["onClick","onSuccess","onFailure"],setup(e,{emit:t}){const n=e;g.vI.add(y.r6c,y.LM3,y.f8k,y.RLE);const{isRunning:i,isCompleted:o,hasFailed:a,requestHasFailed:s,waitForTask:r}=(0,ie.n)();return(0,c.watch)((()=>n.taskId),((e,t)=>{e!==t&&r(e)})),(0,c.watch)([o,a,s],(([e,n,i])=>{e&&t("onSuccess"),(n||i)&&t("onFailure")})),{__sfc:!0,isRunning:i,isCompleted:o,hasFailed:a,requestHasFailed:s,waitForTask:r,props:n,emit:t,FontAwesomeIcon:b.GN,BButton:ne.T}}};const ae=(0,_.Z)(oe,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.BButton,{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{title:t.props.title},on:{click:()=>t.emit("onClick")}},[t.isRunning?e(t.FontAwesomeIcon,{attrs:{icon:"spinner",spin:""}}):t.hasFailed||t.requestHasFailed?e(t.FontAwesomeIcon,{attrs:{icon:"exclamation-circle"}}):t.isCompleted?e(t.FontAwesomeIcon,{attrs:{icon:"check-circle"}}):e(t.FontAwesomeIcon,{attrs:{icon:"cloud-upload-alt"}})],1)}),[],!1,null,null,null).exports;var se=n(88103);const re={__name:"ExportToRemoteModal",props:{exportPlugin:{type:j,required:!0},invocationId:{type:String,required:!0}},emits:["onExportToFileSource"],setup(e,{expose:t,emit:n}){const i=e,o=(0,c.ref)(null),a=(0,c.computed)((()=>`Export ${i.exportPlugin.title} to remote file source`));function s(){o.value.show()}function r(){o.value.hide()}return t({showModal:s,hideModal:r}),{__sfc:!0,modal:o,props:i,emit:n,title:a,showModal:s,hideModal:r,doExport:function(e,t){n("onExportToFileSource",e,t)},BModal:H.N,ExportForm:se.Z}}};const le=(0,_.Z)(re,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.BModal,{ref:"modal",attrs:{title:t.title,"title-tag":"h2",centered:"","hide-footer":""}},[e(t.ExportForm,{attrs:{what:"workflow invocation"},on:{export:t.doExport}})],1)}),[],!1,null,null,null).exports,de={__name:"InvocationExportPluginCard",props:{exportPlugin:{type:j,required:!0},invocationId:{type:String,required:!0}},setup(e){const t=e,{renderMarkdown:n}=(0,X.A)({openLinksInNewPage:!0}),i=(0,c.ref)(null),o=(0,c.ref)(null);(0,c.provide)("invocationId",t.invocationId);const a=(0,c.computed)((()=>n(t.exportPlugin.markdownDescription))),s=(0,c.computed)((()=>`/api/invocations/${t.invocationId}/prepare_store_download`)),l=(0,c.computed)((()=>{const e=t.exportPlugin.exportParams;return{model_store_format:e.modelStoreFormat,include_files:e.includeFiles,include_deleted:e.includeDeleted,include_hidden:e.includeHidden}}));return{__sfc:!0,renderMarkdown:n,exportRemoteModal:i,exportToRemoteTaskId:o,props:t,descriptionRendered:a,invocationDownloadUrl:s,downloadParams:l,openRemoteExportDialog:function(){i.value.showModal()},exportToFileSource:function(e,n){const a={target_uri:`${e}/${n}.${t.exportPlugin.exportParams.modelStoreFormat}`,...l.value};r.Z.post(`/api/invocations/${t.invocationId}/write_store`,a).then((e=>{o.value=e.data.id})).catch((e=>{F.FN.error(`Failed to export to remote source. ${e}`)})),i.value.hideModal()},onExportToFileSourceSuccess:function(){F.FN.success("Invocation successfully exported to remote source")},onExportToFileSourceFailure:function(){F.FN.error("Failed to export to remote source")},BButtonGroup:G.a,BButtonToolbar:J.r,BCard:R._,BCardTitle:K._,ActionButton:ee,StsDownloadButton:te.Z,ExportToRemoteButton:ae,ExportToRemoteModal:le}}};const ce=(0,_.Z)(de,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t(n.BCard,{staticClass:"export-plugin-card mb-1"},[t(n.BCardTitle,{staticClass:"export-plugin-title align-items-center d-flex justify-content-between"},[e._v("\n            "+e._s(e.exportPlugin.title)+"\n            "),t(n.BButtonToolbar,{attrs:{"aria-label":"Export Options"}},[t(n.BButtonGroup,[t(n.StsDownloadButton,{staticClass:"download-button",attrs:{title:"Download Invocation as "+e.exportPlugin.title,"download-endpoint":n.invocationDownloadUrl,"post-parameters":n.downloadParams}}),e._v(" "),t(n.ExportToRemoteButton,{staticClass:"remote-export-button",attrs:{title:"Export Invocation as "+e.exportPlugin.title+" and upload to remote source","task-id":n.exportToRemoteTaskId},on:{onClick:n.openRemoteExportDialog,onSuccess:n.onExportToFileSourceSuccess,onFailure:n.onExportToFileSourceFailure}}),e._v(" "),e._l(e.exportPlugin.additionalActions,(function(e){return t(n.ActionButton,{key:e.id,staticClass:"action-button",attrs:{action:e}})}))],2)],1)],1),e._v(" "),t("div",{staticClass:"markdown-description",domProps:{innerHTML:e._s(n.descriptionRendered)}})],1),e._v(" "),t(n.ExportToRemoteModal,{ref:"exportRemoteModal",attrs:{"invocation-id":n.props.invocationId,"export-plugin":n.props.exportPlugin},on:{onExportToFileSource:n.exportToFileSource}})],1)}),[],!1,null,null,null).exports;var ue=n(40961);const he={props:{invocationId:{type:String,required:!0}},data:()=>({form:{fetch:"",authorization:"",table:"",owner_group:""}}),computed:{bcoDownloadLink:function(){return`${(0,ue.getAppRoot)()}api/invocations/${this.invocationId}/biocompute/download`}},methods:{async submitForm(){var e;const t={POST_api_objects_draft_create:[{contents:await r.Z.get((e=`./api/invocations/${this.invocationId}/biocompute/`,(0,l.j4)()+e)).then((e=>(this.bco=e.data,this.bco))).catch((e=>{this.errors.push(e)})),owner_group:this.form.owner_group,schema:"IEEE",prefix:this.form.table}]},n={Authorization:"Token "+this.form.authorization,"Content-type":"application/json; charset=UTF-8"},i=this.form.fetch;r.Z.post(`${i}/api/objects/drafts/create/`,t,{headers:n}).then((e=>{200===e.status&&(console.log("response:",e),alert(e.data[0].message)),207===e.status&&(console.log("response:",e),alert(e.data[0].message))})).catch((function(e){console.log("Error",{...e}),401==e.response.status?(alert(e.response.data.detail),console.log("Error response: ",e)):(console.log("Error",e),alert("Error",e))})),this.form.owner_group="",this.form.authorization="",this.form.owner_group="",this.form.fetch=""}}};const pe=(0,_.Z)(he,(function(){var e=this,t=e._self._c;return t("div",[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),t("b-tabs",{attrs:{lazy:""}},[t("b-tab",{attrs:{title:"Download"}},[t("a",{staticClass:"bco-json",staticStyle:{"padding-left":"1em"},attrs:{href:e.bcoDownloadLink}},[t("b",[e._v("Download BCO")])])]),e._v(" "),t("b-tab",{attrs:{title:"Submit To BCODB"}},[t("div",[t("p",[e._v("\n                    To submit to a BCODB you need to already have an authenticated account. Instructions on\n                    submitting a BCO from Galaxy are available\n                    "),t("a",{attrs:{href:"https://w3id.org/biocompute/tutorials/galaxy_quick_start/",target:"_blank"}},[e._v("here")]),e._v(".\n                ")]),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"fetch"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fetch,expression:"form.fetch"}],staticClass:"form-control",attrs:{id:"fetch",type:"text",placeholder:"https://biocomputeobject.org",autocomplete:"off",required:""},domProps:{value:e.form.fetch},on:{input:function(t){t.target.composing||e.$set(e.form,"fetch",t.target.value)}}}),e._v("\n                            BCO DB URL (example: https://biocomputeobject.org)\n                        ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"authorization"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.authorization,expression:"form.authorization"}],staticClass:"form-control",attrs:{id:"authorization",type:"password",autocomplete:"off",required:""},domProps:{value:e.form.authorization},on:{input:function(t){t.target.composing||e.$set(e.form,"authorization",t.target.value)}}}),e._v("\n                            User API Key\n                        ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"table"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.table,expression:"form.table"}],staticClass:"form-control",attrs:{id:"table",type:"text",placeholder:"GALXY",required:""},domProps:{value:e.form.table},on:{input:function(t){t.target.composing||e.$set(e.form,"table",t.target.value)}}}),e._v("\n                            Prefix\n                        ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"owner_group"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.owner_group,expression:"form.owner_group"}],staticClass:"form-control",attrs:{id:"owner_group",type:"text",autocomplete:"off",required:""},domProps:{value:e.form.owner_group},on:{input:function(t){t.target.composing||e.$set(e.form,"owner_group",t.target.value)}}}),e._v("\n                            User Name\n                        ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-primary"},[e._v(e._s(e._f("localize")("Submit")))])])])])])],1)],1)}),[function(){var e=this,t=e._self._c;return t("p",[e._v("\n        A BioCompute Object (BCO) is the unofficial name for a JSON object that adheres to the\n        "),t("a",{attrs:{href:"https://standards.ieee.org/ieee/2791/7337/"}},[e._v("IEEE-2791-2020 standard")]),e._v(". A BCO is designed to\n        communicate High-throughput Sequencing (HTS) analysis results, data set creation, data curation, and\n        bioinformatics verification protocols.\n    ")])},function(){var e=this,t=e._self._c;return t("p",[e._v("Learn more about "),t("a",{attrs:{href:"https://biocomputeobject.org/",target:"_blank"}},[e._v("BioCompute Objects")]),e._v(".")])},function(){var e=this,t=e._self._c;return t("p",[e._v("\n        Instructions for\n        "),t("a",{attrs:{href:"https://w3id.org/biocompute/tutorials/galaxy_quick_start",target:"_blank"}},[e._v("creating a BCO using Galaxy")]),e._v(".\n    ")])}],!1,null,null,null).exports,fe={__name:"WorkflowInvocationExportOptions",props:{invocationId:{type:String,required:!0}},setup(e){const t=q,{config:n}=(0,Z.Z)(!0);return{__sfc:!0,exportPlugins:t,config:n,BCard:R._,InvocationExportPluginCard:ce,BioComputeObjectExportCard:pe}}};const me=(0,_.Z)(fe,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.config.enable_celery_tasks?t("div",e._l(n.exportPlugins,(function(i,o){return t("div",{key:o,staticClass:"mb-2"},[t(n.InvocationExportPluginCard,{attrs:{"export-plugin":i,"invocation-id":e.invocationId}})],1)})),0):t("div",[t(n.BCard,{staticClass:"export-plugin-card",attrs:{title:"BioCompute Object Export"}},[t(n.BioComputeObjectExportCard,{attrs:{"invocation-id":e.invocationId}})],1)],1)}),[],!1,null,null,null).exports;const _e={props:{total:{type:Number,default:1},note:{type:String,default:null},loading:{type:Boolean,default:!1},okCount:{type:Number,default:0},runningCount:{type:Number,default:0},newCount:{type:Number,default:0},errorCount:{type:Number,default:0}}};const ve=(0,_.Z)(_e,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-1 progressContainer"},[e.note?t("small",{staticClass:"progressNote"},[e._v("\n        "+e._s(e.note)),e.loading?t("span",[e._v("."),t("span",{staticClass:"blinking"},[e._v("..")])]):e._e()]):e._e(),e._v(" "),t("b-progress",{attrs:{max:e.total}},[t("b-progress-bar",{attrs:{variant:"success",value:e.okCount}}),e._v(" "),t("b-progress-bar",{attrs:{variant:"danger",value:e.errorCount}}),e._v(" "),t("b-progress-bar",{attrs:{variant:"warning",value:e.runningCount}}),e._v(" "),t("b-progress-bar",{attrs:{variant:"warning",value:e.newCount}})],1)],1)}),[],!1,null,"0f277a9c",null).exports;const ge=(0,c.defineComponent)({__name:"InvocationMessage",props:{invocationMessage:null,invocation:null},setup(e){const t=e,n={history_deleted:"cancel",user_request:"cancel",cancelled_on_review:"cancel",dataset_failed:"error",collection_failed:"error",job_failed:"error",output_not_found:"error",expression_evaluation_failed:"error",when_not_boolean:"error",unexpected_failure:"error",workflow_output_not_found:"warning"},i={warning:"warningmessage",cancel:"infomessage",error:"errormessage"},o=(0,c.computed)((()=>i[n[t.invocationMessage.reason]])),a=(0,c.computed)((()=>{if("workflow_step_id"in t.invocationMessage){const{workflow:e}=p(t.invocation.workflow_id);return e.value}})),s=(0,c.computed)((()=>{if("workflow_step_id"in t.invocationMessage&&void 0!==t.invocationMessage.workflow_step_id&&null!==t.invocationMessage.workflow_step_id&&a.value)return a.value.steps[t.invocationMessage.workflow_step_id]})),r=(0,c.computed)((()=>{if("dependent_workflow_step_id"in t.invocationMessage&&a.value){const e=t.invocationMessage.dependent_workflow_step_id;if(void 0!==e)return a.value.steps[e]}})),l=(0,c.computed)((()=>"job_id"in t.invocationMessage&&t.invocationMessage.job_id)),d=(0,c.computed)((()=>"hda_id"in t.invocationMessage&&t.invocationMessage.hda_id)),u=(0,c.computed)((()=>"hdca_id"in t.invocationMessage&&t.invocationMessage.hdca_id)),h="Invocation scheduling cancelled because",f="Invocation scheduling failed because ",m=(0,c.computed)((()=>{const e=n[t.invocationMessage.reason];if("warning"===e)return"This step caused a warning";if("cancel"===e)return"This step canceled the invocation";if("error"===e)return"This step failed the invocation";throw Error("Unknown message level")})),_=(0,c.computed)((()=>{const e=t.invocationMessage,n=e.reason;if("user_request"===n)return`${h} user requested cancellation.`;if("history_deleted"===n)return`${h} the history of the invocation was deleted.`;if("cancelled_on_review"===n)return`${h} the invocation was paused at step ${e.workflow_step_id+1} and not approved.`;if("collection_failed"===n)return`${f} step ${e.workflow_step_id+1} requires a dataset collection created by step ${e.dependent_workflow_step_id+1}, but dataset collection entered a failed state.`;if("dataset_failed"===n)return null!==e.dependent_workflow_step_id&&void 0!==e.dependent_workflow_step_id?`${f} step ${e.workflow_step_id+1} requires a dataset created by step ${e.dependent_workflow_step_id+1}, but dataset entered a failed state.`:`${f} step ${e.workflow_step_id+1} requires a dataset, but dataset entered a failed state.`;if("job_failed"===n)return`${f} step ${e.workflow_step_id+1} depends on job(s) created in step ${e.dependent_workflow_step_id+1}, but a job for that step failed.`;if("output_not_found"===n)return`${f} step ${e.workflow_step_id+1} depends on output '${e.output_name}' of step ${e.dependent_workflow_step_id+1}, but this step did not produce an output of that name.`;if("expression_evaluation_failed"===n)return`${f} step ${e.workflow_step_id+1} contains an expression that could not be evaluated.`;if("when_not_boolean"===n)return`${f} step ${e.workflow_step_id+1} is a conditional step and the result of the when expression is not a boolean type.`;if("unexpected_failure"===n){let t="";return null!==e.workflow_step_id&&void 0!==e.workflow_step_id&&(t=` at step ${e.workflow_step_id+1}`),e.details?`${f} an unexpected failure occurred${t}: '${e.details}'`:`${f} an unexpected failure occurred${t}.`}return"workflow_output_not_found"===n?`Defined workflow output '${e.output_name}' was not found in step ${e.workflow_step_id+1}.`:n}));return{__sfc:!0,level:n,levelClasses:i,props:t,levelClass:o,workflow:a,workflowStep:s,dependentWorkflowStep:r,jobId:l,HdaId:d,HdcaId:u,cancelFragment:h,failFragment:f,stepDescription:m,infoString:_,GenericHistoryItem:w.Z,JobInformation:M.Z,WorkflowInvocationStep:A}}});const ye=(0,_.Z)(ge,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("div",{class:n.levelClass,staticStyle:{"text-align":"center"}},[e._v("\n        "+e._s(n.infoString)+"\n    ")]),e._v(" "),n.dependentWorkflowStep?t("div",[e._v("\n        Problem occurred at this step:\n        "),t(n.WorkflowInvocationStep,{attrs:{invocation:e.invocation,workflow:n.workflow,"workflow-step":n.dependentWorkflowStep}})],1):e._e(),e._v(" "),n.workflowStep?t("div",[e._v("\n        "+e._s(n.stepDescription)+"\n        "),t(n.WorkflowInvocationStep,{attrs:{invocation:e.invocation,workflow:n.workflow,"workflow-step":n.workflowStep}})],1):e._e(),e._v(" "),n.HdaId?t("div",[e._v("\n        This dataset failed:\n        "),t(n.GenericHistoryItem,{attrs:{"item-id":n.HdaId,"item-src":"hda"}})],1):e._e(),e._v(" "),n.HdcaId?t("div",[e._v("\n        This dataset collection failed:\n        "),t(n.GenericHistoryItem,{attrs:{"item-id":n.HdcaId,"item-src":"hdca"}})],1):e._e(),e._v(" "),n.jobId?t("div",[e._v("\n        This job failed:\n        "),t(n.JobInformation,{attrs:{job_id:n.jobId}})],1):e._e()])}),[],!1,null,null,null).exports,be=e=>(0,l.j4)()+e,we={components:{InvocationMessage:ye,ProgressBar:ve,LoadingSpan:o.Z},mixins:[i],props:{invocation:{type:Object,required:!0},invocationAndJobTerminal:{type:Boolean,required:!0},invocationSchedulingTerminal:{type:Boolean,required:!0},jobStatesSummary:{type:Object,required:!1,default:null},index:{type:Number,required:!1,default:null}},data:()=>({stepStatesInterval:null,jobStatesInterval:null,reportTooltip:"View report for this workflow invocation",generatePdfTooltip:"Generate PDF report for this workflow invocation"}),computed:{...(0,s.Se)(["getInvocationById","getInvocationJobsSummaryById"]),invocationId(){return this.invocation?.id},indexStr(){return null==this.index?"":`${this.index+1}`},invocationState:function(){return this.invocation?.state||"new"},invocationStateSuccess:function(){return"scheduled"==this.invocationState&&0===this.runningCount&&this.invocationAndJobTerminal},disabledReportTooltip:function(){this.invocationState;const e=this.runningCount;return"scheduled"!=this.invocationState?". Once the workflow is fully scheduled and jobs have complete this option will become available.":0!=e?" running job(s). Once these jobs have completed this option will become available. ":"Steps for this workflow are still running. A report will be available once complete."},stepCount:function(){return this.invocation?.steps.length},stepStates:function(){const e={};if(!this.invocation)return{};for(const t of this.invocation.steps)e[t.state]?e[t.state]+=1:e[t.state]=1;return e},invocationLink:function(){return be(`workflows/invocations/report?id=${this.invocationId}`)},invocationPdfLink:function(){return be(`api/invocations/${this.invocationId}/report.pdf`)},stepStatesStr:function(){return`${this.stepStates.scheduled||0} of ${this.stepCount} steps successfully scheduled.`},jobStatesStr:function(){let e=`${this.jobStatesSummary?.numTerminal()||0} of ${this.jobCount} jobs complete`;return this.invocationSchedulingTerminal||(e+=" (total number of jobs will change until all steps fully scheduled)"),`${e}.`}},methods:{onCancel(){this.$emit("invocation-cancelled")}}};const ke=(0,_.Z)(we,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-3 workflow-invocation-state-component"},[e.invocationAndJobTerminal?t("div",[t("span",[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"invocation-report-link",attrs:{title:e.invocationStateSuccess?e.reportTooltip:e.disabledReportTooltip,disabled:!e.invocationStateSuccess,size:"sm",href:e.invocationLink}},[e._v("\n                View Report\n            ")]),e._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"invocation-pdf-link",attrs:{title:e.invocationStateSuccess?e.generatePdfTooltip:e.disabledReportTooltip,disabled:!e.invocationStateSuccess,size:"sm",href:e.invocationPdfLink,target:"_blank"}},[e._v("\n                Generate PDF\n            ")])],1)]):e.invocationAndJobTerminal?e._e():t("div",[t("b-alert",{attrs:{variant:"info",show:""}},[t("LoadingSpan",{attrs:{message:`Waiting to complete invocation ${e.indexStr}`}})],1),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times cancel-workflow-scheduling",attrs:{title:"Cancel scheduling of workflow invocation"},on:{click:e.onCancel}})],1),e._v(" "),e.stepCount?e._e():t("ProgressBar",{staticClass:"steps-progress",attrs:{note:"Loading step state summary...",loading:!0}}),e._v(" "),e.invocation.messages?.length?e._l(e.invocation.messages,(function(n){return t("InvocationMessage",{key:n.reason,staticClass:"steps-progress my-1",attrs:{"invocation-message":n,invocation:e.invocation}})})):"cancelled"==e.invocationState?t("ProgressBar",{staticClass:"steps-progress",attrs:{note:"Invocation scheduling cancelled - expected jobs and outputs may not be generated.","error-count":1}}):"failed"==e.invocationState?t("ProgressBar",{staticClass:"steps-progress",attrs:{note:"Invocation scheduling failed - Galaxy administrator may have additional details in logs.","error-count":1}}):t("ProgressBar",{staticClass:"steps-progress",attrs:{note:e.stepStatesStr,total:e.stepCount,"ok-count":e.stepStates.scheduled,loading:!e.invocationSchedulingTerminal}}),e._v(" "),t("ProgressBar",{staticClass:"jobs-progress",attrs:{note:e.jobStatesStr,total:e.jobCount,"ok-count":e.okCount,"running-count":e.runningCount,"new-count":e.newCount,"error-count":e.errorCount,loading:!e.invocationAndJobTerminal}})],2)}),[],!1,null,null,null).exports,Ce={components:{LoadingSpan:o.Z,WorkflowInvocationSummary:ke,WorkflowInvocationDetails:P,WorkflowInvocationExportOptions:me},mixins:[i],props:{invocationId:{type:String,required:!0},index:{type:Number,required:!1,default:null}},data:()=>({stepStatesInterval:null,jobStatesInterval:null}),computed:{...(0,s.Se)(["getInvocationById","getInvocationJobsSummaryById"]),invocation:function(){return this.getInvocationById(this.invocationId)},invocationState:function(){return this.invocation?.state||"new"},invocationAndJobTerminal:function(){return!(!this.invocationSchedulingTerminal||!this.jobStatesTerminal)},invocationSchedulingTerminal:function(){return"scheduled"==this.invocationState||"cancelled"==this.invocationState||"failed"==this.invocationState},jobStatesTerminal:function(){return!(!this.invocationSchedulingTerminal||0!==this.JobStatesSummary?.jobCount)||this.jobStatesSummary&&this.jobStatesSummary.terminal()},jobStatesSummary(){const e=this.getInvocationJobsSummaryById(this.invocationId);return e?new a.Z.JobStatesSummary(e):null}},created:function(){this.pollStepStatesUntilTerminal(),this.pollJobStatesUntilTerminal()},beforeDestroy:function(){clearTimeout(this.jobStatesInterval),clearTimeout(this.stepStatesInterval)},methods:{...(0,s.nv)(["fetchInvocationForId","fetchInvocationJobsSummaryForId"]),pollStepStatesUntilTerminal:function(){this.invocation&&this.invocationSchedulingTerminal||this.fetchInvocationForId(this.invocationId).then((e=>{this.stepStatesInterval=setTimeout(this.pollStepStatesUntilTerminal,3e3)}))},pollJobStatesUntilTerminal:function(){this.jobStatesTerminal||this.fetchInvocationJobsSummaryForId(this.invocationId).then((e=>{this.jobStatesInterval=setTimeout(this.pollJobStatesUntilTerminal,3e3)}))},onError:function(e){console.error(e)},onCancel(){this.$emit("invocation-cancelled")},cancelWorkflowScheduling:function(){(function(e){const t=d(`api/invocations/${e}`);return r.Z.delete(t)})(this.invocationId).then(this.onCancel).catch(this.onError)}}};const xe=(0,_.Z)(Ce,(function(){var e=this,t=e._self._c;return e.invocation?t("b-tabs",[t("b-tab",{attrs:{title:"Summary",active:""}},[t("WorkflowInvocationSummary",{attrs:{invocation:e.invocation,index:e.index,"invocation-and-job-terminal":e.invocationAndJobTerminal,"invocation-scheduling-terminal":e.invocationSchedulingTerminal,"job-states-summary":e.jobStatesSummary},on:{"invocation-cancelled":e.cancelWorkflowScheduling}})],1),e._v(" "),t("b-tab",{attrs:{title:"Details"}},[t("WorkflowInvocationDetails",{attrs:{invocation:e.invocation,"invocation-and-job-terminal":e.invocationAndJobTerminal}})],1),e._v(" "),t("b-tab",{attrs:{title:"Export"}},[e.invocationAndJobTerminal?t("div",[t("WorkflowInvocationExportOptions",{attrs:{"invocation-id":e.invocation.id}})],1):t("b-alert",{attrs:{variant:"info",show:""}},[t("LoadingSpan",{attrs:{message:"Waiting to complete invocation"}})],1)],1)],1):t("b-alert",{attrs:{variant:"info",show:""}},[t("LoadingSpan",{attrs:{message:"Loading invocation"}})],1)}),[],!1,null,null,null).exports},81924:(e,t,n)=>{"use strict";n.d(t,{Bz:()=>v,RV:()=>_});var i=n(23504),o=n(31207),a=n(72316),s=n.n(a),r=n(55806),l=n.n(r),d=n(18181),c=n(38944),u=n(11411),h=n(40961),p=s().Model.extend({urlRoot:function(){return`${(0,h.getAppRoot)()}api/users`},defaults:{id:null,username:`(${(0,u.ZP)("anonymous user")})`,email:"",total_disk_usage:0,nice_total_disk_usage:"",quota_percent:null,is_admin:!1,preferences:{}},initialize:function(e){this.on("loaded",(function(e,t){console.log(`${this} has loaded:`,e,t)})),this.on("change",(function(e,t){console.log(`${this} has changed:`,e,t.changes)}))},isAnonymous:function(){return!this.get("email")},isAdmin:function(){return this.get("is_admin")},updatePreferences:function(e,t){const n=this.get("preferences");n[e]=JSON.stringify(t),this.preferences=n},getFavorites:function(){const e=this.get("preferences");return e&&e.favorites?JSON.parse(e.favorites):{tools:[]}},updateFavorites:function(e,t){const n=this.getFavorites();n[e]=t[e],this.updatePreferences("favorites",n)},loadFromApi:function(e,t){e=e||p.CURRENT_ID_STR;var n=this,i=(t=t||{}).success;return t.success=(e,t)=>{n.trigger("loaded",e,t),i&&i(e,t)},e===p.CURRENT_ID_STR&&(t.url=`${this.urlRoot}/${p.CURRENT_ID_STR}`),s().Model.prototype.fetch.call(this,t)},clearSessionStorage:function(){for(var e in sessionStorage)(0===e.indexOf("history:")||"history-panel"===e)&&sessionStorage.removeItem(e)},toString:function(){var e=[this.get("username")];return this.get("id")&&(e.unshift(this.get("id")),e.push(this.get("email"))),`User(${e.join(":")})`}});p.CURRENT_ID_STR="current",p.getCurrentUserFromApi=e=>{var t=new p;return t.loadFromApi(p.CURRENT_ID_STR,e),t};const f={User:p};function m(e={},t={}){this._init(e,t)}m.prototype._init=function(e,t){d.default.extend(this,s().Events),this._processOptions(e),this._initConfig(e.config||{});const n=v();return n&&this._patchGalaxy(n),this.root=e.root||"/",this.params=e.params||{},this.session_csrf_token=e.session_csrf_token||null,this._initLocale(),this.config=e.config||{},this._initUser(e.user||{}),(0,u.Dx)(this.user,this.config),(0,u.JE)(),console.debug("currentLocale: ",sessionStorage.getItem("currentLocale")),this._setUpListeners(),this.trigger("ready",this),this.data={},this.data.create=c.Ue,this.data.dialog=c.WZ,this},m.prototype.defaultOptions={patchExisting:!0,root:"/",session_csrf_token:null},m.prototype._processOptions=function(e){const t=this.defaultOptions;this.options={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.options[n]=Object.prototype.hasOwnProperty.call(e,n)?e[n]:t[n]);return this},m.prototype._initConfig=function(e){return this.config=e,this},m.prototype._patchGalaxy=function(e){if(this.options.patchExisting&&e)for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this[t]=e[t])},m.prototype._initLocale=function(){return this.localize=u.NC,window._l=this.localize,this},m.prototype._initUserLocale=function(e){const t=!(!this.config.default_locale||"auto"==this.config.default_locale)&&this.config.default_locale.toLowerCase();let n={};this.user&&this.user.attributes.preferences&&"extra_user_preferences"in this.user.attributes.preferences&&(n=JSON.parse(this.user.attributes.preferences.extra_user_preferences));let i="localization|locale"in n&&n["localization|locale"].toLowerCase();"auto"==i&&(i=!1);const o="undefined"==typeof navigator?"__root":(navigator.language||navigator.userLanguage||"__root").toLowerCase(),a=i||o||t;sessionStorage.setItem("currentLocale",a)},m.prototype._initUser=function(e){return console.debug("_initUser:",e),this.user=new f.User(e),this},m.prototype._setUpListeners=function(){return this.lastAjax={},l()(document).bind("ajaxSend",((e,t,n)=>{let i=n.data;try{i=JSON.parse(i)}catch(e){}this.lastAjax={url:location.href.slice(0,-1)+n.url,data:i}})),this},m.prototype.toString=function(){return`GalaxyApp(${this.user?this.user.get("email")||"(anonymous)":"uninitialized"})`};function _(e){!0==!i.Z.testBuild&&console.warn("setGalaxyInstance",(0,o.H)());const t=g();let n=e(m);return n instanceof m||(n=new m(n)),t._galaxyInstance=n,t._galaxyInstance}function v(){return g()._galaxyInstance}function g(){return window}const y={root:(0,h.getAppRoot)(),config:{}};window.Galaxy?console.debug("Skipping, window.Galaxy already exists.",(0,o.H)()):Object.defineProperty(window,"Galaxy",{enumerable:!0,get:function(){return!0==!i.Z.testBuild&&console.warn("accessing (get) window.Galaxy",(0,o.H)()),v&&v()||y},set:function(e){console.warn("accessing (set) window.Galaxy",(0,o.H)()),_(e)}});window.Galaxy},56667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LegacyGridView:()=>yn,Modal:()=>Mn.u_,SweepsterVisualization:()=>Fn,SweepsterVisualizationView:()=>Un,Toast:()=>Sn,TracksterUI:()=>an,async_save_text:()=>qn,chart:()=>Qn,circster:()=>Xn,createTabularDatasetChunkedView:()=>oe,create_chart:()=>kn,create_histogram:()=>Cn,getGalaxyInstance:()=>a.Bz,hide_modal:()=>Mn.MA,make_popup_menus:()=>H.M,make_popupmenu:()=>H.J,mountMakoTags:()=>Zn.OB,phyloviz:()=>On,runTour:()=>rn.V,setGalaxyInstance:()=>a.RV,show_in_overlay:()=>Mn.OG,show_message:()=>Mn.Xt,show_modal:()=>Mn.LJ,store:()=>Jn(),trackster:()=>Kn});var i=n(55806),o=n.n(i),a=n(81924),s=n(72316),r=n.n(s),l=n(42773);const d={Button:r().View.extend({initialize:function(e){this.model=e&&e.model||new(r().Model)({id:l.ZP.uid(),title:"",icon:"",cls:"btn btn-secondary",wait:!1,wait_text:"Sending...",wait_cls:"btn btn-info",disabled:!1,percentage:-1,visible:!0}).set(e),this.setElement(o()("<button/>").attr("type","button").append(this.$icon=o()("<i/>")).append(this.$title=o()("<span/>")).append(this.$progress=o()("<div/>").append(this.$progress_bar=o()("<div/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this.model.attributes;this.$el.removeClass().addClass("ui-button-default").addClass(e.disabled&&"disabled").attr("id",e.id).attr("disabled",e.disabled).css("display",e.visible?"inline-block":"none").off("click").on("click",(()=>{o()(".tooltip").hide(),e.onclick&&!this.disabled&&e.onclick()})).tooltip({title:e.tooltip||"",placement:"bottom"}),this.$progress.addClass("progress").css("display",-1!==e.percentage?"block":"none"),this.$progress_bar.addClass("progress-bar").css({width:`${e.percentage}%`}),this.$icon.removeClass().addClass("icon fa"),this.$title.removeClass().addClass("title"),e.wait?(this.$el.addClass(e.wait_cls).prop("disabled",!0),this.$icon.addClass("fa-spinner fa-spin mr-1"),this.$title.html(e.wait_text)):(this.$el.addClass(e.cls),this.$icon.addClass(e.icon),e.title&&(this.$title.html(e.title),e.icon&&this.$icon.addClass("mr-1")))},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},setIcon:function(e){this.model.set("icon",e)}}),ButtonMenu:r().View.extend({$menu:null,initialize:function(e){this.model=e&&e.model||new(r().Model)({id:"",title:"",pull:"right",icon:null,onclick:null,cls:"btn btn-secondary float-right",tooltip:"",target:"",href:"",onunload:null,visible:!0,tag:""}).set(e),this.collection=new(r().Collection),this.setElement(o()("<div/>").append(this.$root=o()("<button/>").append(this.$icon=o()("<i/>")).append(this.$title=o()("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"change add remove reset",this.render,this),this.render()},render:function(){var e=this.model.attributes;this.$el.removeClass().addClass("dropdown").attr("id",e.id).css({display:e.visible&&this.collection.where({visible:!0}).length>0?"block":"none"}),this.$root.addClass(e.cls).attr("data-toggle","dropdown").tooltip({title:e.tooltip||"",placement:"bottom"}).off("click").on("click",(t=>{o()(".tooltip").hide(),t.preventDefault(),e.onclick&&e.onclick()})),this.$icon.removeClass().addClass("icon fa").addClass(e.icon),e.title&&this.$title.removeClass().addClass("title ml-1").html(e.title),this.$menu&&this.$menu.remove(),this.collection.length>0&&(this.$menu=o()("<div/>").addClass("menu dropdown-menu dropdown-menu-right").addClass(`pull-${this.model.get("pull")}`).attr("role","menu"),this.$el.append(this.$menu)),this.collection.each((e=>{var t=e.attributes;if(t.visible){var n=o()("<a/>").addClass("dropdown-item").attr({href:t.href,target:t.target}).append(o()("<i/>").addClass("fa mr-2").addClass(t.icon).css("display",t.icon?"inline-block":"none")).append(t.title).on("click",(e=>{t.onclick&&(e.preventDefault(),t.onclick())}));this.$menu.append(n),t.divider&&this.$menu.append(o()("<div/>").addClass("divider"))}}))},addMenu:function(e){this.collection.add(l.ZP.merge(e,{title:"",target:"",href:"",onclick:null,divider:!1,visible:!0,icon:null,cls:"button-menu btn-group"}))}})};var c=n(69210),u=n(18181),h=r().View.extend({initialize:function(e){this.model=e&&e.model||new(r().Model)({message:null,status:"info",cls:"",persistent:!1,fade:!0}).set(e),this.listenTo(this.model,"change",this.render,this),e&&e.active_tab&&(this.active_tab=e.active_tab),this.render()},update:function(e){this.model.set(e)},render:function(){var e=this.model.get("status");if(this.$el.removeClass().addClass(`alert alert-${e} mt-2`).addClass(this.model.get("cls")),this.model.get("message")){if(this.$el.html(this.messageForDisplay()),this.$el[this.model.get("fade")?"fadeIn":"show"](),this.timeout&&window.clearTimeout(this.timeout),!this.model.get("persistent")){var t=this;this.timeout=window.setTimeout((()=>{t.model.set("message","")}),3e3)}}else this.$el.hide();return this},messageForDisplay:function(){return u.default.escape(this.model.get("message"))}}),p=h.extend({messageForDisplay:function(){return this.model.get("message")}}),f=r().View.extend({initialize:function(e){this.model=e&&e.model||new(r().Model)({type:"text",placeholder:"",disabled:!1,readonly:!1,visible:!0,cls:"",area:!1,color:null,style:null}).set(e),this.tagName=this.model.get("area")?"textarea":"input",this.setElement(o()(`<${this.tagName}/>`)),this.listenTo(this.model,"change",this.render,this),this.render()},events:{input:"_onchange"},value:function(e){return void 0!==e&&this.model.set("value","string"==typeof e?e:""),this.model.get("value")},render:function(){var e=this;this.$el.removeClass().addClass(`ui-${this.tagName}`).addClass(this.model.get("cls")).addClass(this.model.get("style")).attr("id",this.model.id).attr("type",this.model.get("type")).attr("placeholder",this.model.get("placeholder")).css("color",this.model.get("color")||"").css("border-color",this.model.get("color")||"");var t=this.model.get("datalist");return Array.isArray(t)&&t.length>0&&this.$el.autocomplete({source:e.model.get("datalist"),change:function(){e._onchange()}}),this.model.get("value")!==this.$el.val()&&this.$el.val(this.model.get("value")),u.default.each(["readonly","disabled"],(t=>{e.model.get(t)?e.$el.attr(t,!0):e.$el.removeAttr(t)})),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$el.val()),this.model.get("onchange")&&this.model.get("onchange")(this.model.get("value"))}});const m={Button:d.Button,ButtonMenu:d.ButtonMenu,Input:f,Message:h,UnescapedMessage:p,Modal:c.Z};var _=n(40961),v=r().Model.extend({defaults:{config:{}},urlRoot:function(){return(0,_.getAppRoot)()+"api/visualizations"},initialize:function(e){u.default.isObject(e.config)&&u.default.isObject(this.defaults.config)&&u.default.defaults(e.config,this.defaults.config),this._setUpListeners()},_setUpListeners:function(){},set:function(e,t){if("config"===e){var n=this.get("config");u.default.isObject(n)&&(t=u.default.extend(u.default.clone(n),t))}return r().Model.prototype.set.call(this,e,t),this},toString:function(){var e=this.get("id")||"";return this.get("title")&&(e+=`:${this.get("title")}`),`Visualization(${e})`}});r().Collection.extend({model:v,url:function(){return`${(0,_.getAppRoot)()}api/visualizations`},initialize:function(e,t){t=t||{}},set:function(e,t){var n=this;e=u.default.map(e,(e=>{var t=n.get(e.id);if(!t)return e;var i=t.toJSON();return u.default.extend(i,e),i})),r().Collection.prototype.set.call(this,e,t)},toString:function(){return["VisualizationCollection(",[this.historyId,this.length].join(),")"].join("")}});const g=/^groups_([0-9]+)\|([\w]+)/,y=r().Model.extend({defaults:{title:"",type:"",date:null,state:"",state_info:"",modified:!0,dataset_id:"",dataset_id_job:null},initialize:function(e,t){this.groups=new(r().Collection),this.settings=new(r().Model),this.visualization_id=t.visualization_id,this.visualization_name=t.visualization_name,this.dataset_id=t.dataset_id,this.chart_dict=t.chart_dict,console.debug("model::initialize() - Initialized with configuration:",t)},reset:function(){this.clear().set({title:"New Chart",dataset_id:this.dataset_id}),this.settings.clear(),this.groups.reset();const e=window.location.search,t=new URLSearchParams(e),n={};for(const[e,i]of t.entries()){const t=e.match(g);if(t){const e=t[1],o=t[2];n[e]=n[e]||{},n[e][o]=i,n[e].id=e}else this.settings.set(e,i)}Object.keys(n).length>0?this.groups.set(Object.values(n)):this.groups.add({id:l.ZP.uid()})},state:function(e,t){this.set({state:e,state_info:t}),this.trigger("set:state"),console.debug("model::state() - "+t+" ("+e+")")},serialize:function(){var e={attributes:this.attributes,settings:this.settings.attributes,groups:[]};return this.groups.each((function(t){e.groups.push(t.attributes)})),e},save:function(e){var t=this;e=e||{},this.chart_dict=this.serialize(),new v({id:this.visualization_id||void 0,type:this.visualization_name,title:this.get("title")||"",config:{dataset_id:this.dataset_id,chart_dict:this.chart_dict}}).save().then((function(n){n&&n.id?(t.visualization_id=n.id,e.success&&e.success(),console.debug("model::save() - Received visualization id: "+n.id)):(e.error&&e.error(),console.debug("model::save() - Unrecognized response. Saving may have failed."))})).fail((function(){e.error&&e.error(),console.debug("model::save() - Saving failed.")})),console.debug("model::save() - Saving with configuration.")},load:function(){this.reset();var e=this.chart_dict;return e&&e.attributes?(console.debug("model::load() - Loading saved visualization.",e),this.set(e.attributes),this.state("ok","Loading saved visualization..."),this.settings.set(e.settings),this.groups.reset(),this.groups.add(e.groups),this.set("modified",!1),this.trigger("refresh"),console.debug("model::load() - Loading chart model."),!0):(this.set("modified",!0),this.trigger("refresh"),console.debug("model::load() - Visualization attributes unavailable."),!1)}});var b=r().View.extend({initialize:function(e){this.collection=new(r().Collection),this.model=e&&e.model||new(r().Model)({onchange:null,visible:!0}).set(e),this.setElement(o()(this._template())),this.$nav=this.$(".tab-navigation"),this.$content=this.$(".tab-content"),this.$el.on("click",(()=>{o()(".tooltip").hide()})),this.render(),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"add",this._add,this),this.listenTo(this.collection,"remove",this._remove,this),this.listenTo(this.collection,"change",this._change,this),this.listenTo(this.collection,"reset",this._reset,this),this.listenTo(this.collection,"add remove reset",this.render,this)},render:function(){var e=this.model.get("current");(e=this.$(`#${e}`).length>0?e:this.first())&&(this.$nav.find(".nav-link.active").removeClass("active"),this.$content.children().removeClass("active"),this.$(`#tab-${e} .nav-link`).addClass("active"),this.$(`#${e}`).addClass("active")),this.$el[this.model.get("visible")?"fadeIn":"fadeOut"]("fast"),this.$nav[this.size()>1?"show":"hide"]()},current:function(){return this.model.get("current")},show:function(e){e&&(this.model.set({current:e,visible:!0}),this.model.get("onchange")&&this.model.get("onchange")(e))},hide:function(){this.model.set("visible",!1)},first:function(){var e=this.collection.first();return e&&e.id},size:function(){return this.collection.length},add:function(e){this.collection.add(e)},del:function(e){this.collection.remove(e)},delAll:function(){this.collection.reset()},showTab:function(e){this.collection.get(e).set("hidden",!1)},hideTab:function(e){this.collection.get(e).set("hidden",!0)},_add:function(e){var t=this,n=e.attributes;this.$content.append(o()("<div/>").attr("id",n.id).addClass("tab-pane").append(n.$el)),this.$nav.append(o()(this._template_tab(n)).show().tooltip({title:n.tooltip||"",placement:"bottom",container:t.$el}).on("click",(e=>{e.preventDefault(),t.show(n.id)}))),1==this.size()&&this.show(n.id)},_remove:function(e){this.$(`#tab-${e.id}`).remove(),this.$(`#${e.id}`).remove()},_reset:function(){this.$nav.empty(),this.$content.empty()},_change:function(e){this.$(`#tab-${e.id}`)[e.get("hidden")?"hide":"show"]()},_template:function(){return o()("<div/>").addClass("tabbable tabs-left").append(o()("<ul/>").attr("style","display: flex").addClass("tab-navigation nav nav-tabs")).append(o()("<div/>").addClass("tab-content"))},_template_tab:function(e){var t=o()("<li/>").addClass("nav-item").attr("id",`tab-${e.id}`).append(o()("<a/>").addClass("nav-link").attr("id",`tab-title-link-${e.id}`).attr("href","javascript:void(0);")),n=t.find("a");return e.icon&&n.append(o()("<i/>").addClass("fa").addClass(e.icon)),e.title&&n.append(o()("<span/>").attr("id",`tab-title-text-${e.id}`).addClass("tab-title-text ml-1").append(e.title)),t}});const w={View:b},k=r().View.extend({initialize:function(e){this.plugin=e.chart.plugin,this.setElement(this._template()),this.$title=this.$(".charts-description-title"),this.$image=this.$(".charts-description-image"),this.$text=this.$(".charts-description-text"),this.render()},render:function(){this.plugin.logo?(this.$image.attr("src",(0,_.getAppRoot)()+this.plugin.logo),this.$title.html(this.plugin.html||"Unavailable"),this.$text.html(l.ZP.linkify(this.plugin.description||"")),this.$el.show()):this.$el.hide()},_template:function(){return'<div class="charts-description">\n                    <table>\n                    <tr>\n                        <td class="charts-description-image-td">\n                            <img alt="charts description" class="charts-description-image"/>\n                        </td>\n                        <td>\n                            <div class="charts-description-title"/>\n                        </td>\n                    </tr>\n                    </table>\n                    <div class="charts-description-text"/>\n                </div>'}});var C=n(88642),x=n(74664),S=n(32511),M=n(11411);const T={View:r().View.extend({visible:!1,initialize:function(e){var t=this;this.model=e&&e.model||new(r().Model)({id:l.ZP.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,operations:null,collapsible:!1,collapsible_button:!0,collapsed:!1,onchange_title:null}).set(e),this.setElement(this._template()),this.section=e.section,this.$body=this.$(".portlet-body"),this.$title=this.$(".portlet-title"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new m.Button({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){t[t.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var e=this,t=this.model.attributes;return this.$el.removeClass().addClass(t.cls).attr("id",t.id),this.$header[t.title?"show":"hide"](),this.$title_text.html(t.title),t.title_id&&this.$title.attr("id",t.title_id),t.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa mr-1").addClass(t.icon).show():this.$title_icon.hide(),this.$title_text[t.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),t.collapsible&&(this.$title_text.on("click",(()=>{e[e.collapsed?"expand":"collapse"]()})),t.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!t.onchange_title),t.onchange_title&&this.$title_text.make_text_editable({on_finish:function(e){t.onchange_title(e)}}),t.buttons?(this.$buttons.empty().show(),o().each(this.model.get("buttons"),((t,n)=>{n&&(n.$el.prop("id",t),e.$buttons.append(n.$el))}))):this.$buttons.hide(),this.$operations.empty,t.collapsible&&t.collapsible_button&&this.$operations.append(this.collapsible_button.$el),t.operations&&o().each(t.operations,((t,n)=>{n.$el.prop("id",t),e.$operations.append(n.$el)})),this},append:function(e){this.$body.append(e)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(e){this.$buttons.find(`#${e}`).prop("disabled",!1)},disableButton:function(e){this.$buttons.find(`#${e}`).prop("disabled",!0)},hideOperation:function(e){this.$operations.find(`#${e}`).hide()},showOperation:function(e){this.$operations.find(`#${e}`).show()},setOperation:function(e,t){this.$operations.find(`#${e}`).off("click").on("click",t)},title:function(e){return e&&this.$title_text.html(e),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.section&&this.section.renderOnce(),this.$content.show(),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return o()("<div/>").append(o()("<div/>").addClass("portlet-header").append(o()("<div/>").addClass("portlet-operations")).append(o()("<div/>").addClass("portlet-title").append(o()("<i/>").addClass("portlet-title-icon")).append(o()("<span/>").addClass("portlet-title-text")))).append(o()("<div/>").addClass("portlet-content").append(o()("<div/>").addClass("portlet-body")).append(o()("<div/>").addClass("portlet-buttons mt-3 mb-3"))).append(o()("<div/>").addClass("portlet-backdrop"))}})};const L={View:r().View.extend({initialize:function(e){this.list={},this.options=l.ZP.merge(e,{title:(0,M.ZP)("Repeat"),empty_text:"Not available.",max:null,min:null}),this.button_new=new m.Button({icon:"fa-plus",title:`Insert ${this.options.title}`,tooltip:`Add new ${this.options.title} block`,cls:"btn btn-secondary float-none form-repeat-add",onclick:function(){e.onnew&&e.onnew()}}),this.setElement(o()("<div/>").append(this.$list=o()("<div/>")).append(o()("<div/>").append(this.button_new.$el)))},size:function(){return u.default.size(this.list)},add:function(e){if(e.id&&!this.list[e.id]){var t=new m.Button({icon:"fa-trash-o",tooltip:(0,M.ZP)("Delete this repeat block"),cls:"ui-button-icon-plain form-repeat-delete",onclick:function(){e.ondel&&e.ondel()}}),n=new T.View({id:e.id,title:(0,M.ZP)("placeholder"),cls:e.cls||"ui-portlet-section",operations:{button_delete:t}});n.append(e.$el),n.$el.addClass("section-row").hide(),this.list[e.id]=n,this.$list.append(n.$el.fadeIn("fast")),this.options.max>0&&this.size()>=this.options.max&&this.button_new.disable(),this._refresh()}else console.debug("form-repeat::add()","Duplicate or invalid repeat block id.")},del:function(e){this.list[e]?(this.$list.find(`#${e}`).remove(),delete this.list[e],this.button_new.enable(),this._refresh()):console.debug("form-repeat::del()","Invalid repeat block id.")},delAll:function(){for(var e in this.list)this.del(e)},hideOptions:function(){this.button_new.$el.hide(),u.default.each(this.list,(e=>{e.hideOperation("button_delete")})),u.default.isEmpty(this.list)&&this.$el.append(o()("<div/>").addClass("form-text text-muted").html(this.options.empty_text))},_refresh:function(){var e=0;for(var t in this.list){var n=this.list[t];n.title(`${++e}: ${this.options.title}`),n[this.size()>this.options.min?"showOperation":"hideOperation"]("button_delete")}}})};var D=r().View.extend({initialize:function(e,t){var n=this;this.deferred=e.deferred,this.chart=e.chart,this.group=t.group,this.setElement(o()("<div/>")),this.listenTo(this.chart,"change:dataset_id",(function(){n.render()})),this.render()},render:function(){var e=this,t=l.ZP.clone(this.chart.plugin.groups)||[],n=this.chart.get("dataset_id");n&&(this.chart.state("wait","Loading metadata..."),this.deferred.execute((function(i){l.ZP.get({url:(0,_.getAppRoot)()+"api/datasets/"+n,cache:!0,success:function(n){var o={};(0,x.UO)(t,(function(t,i){if("data_column"==t.type){o[i]=l.ZP.clone(t);var a=[];t.is_auto&&a.push({label:"Column: Row Number",value:"auto"}),t.is_zero&&a.push({label:"Column: None",value:"zero"});var s=n.metadata_column_types;for(var r in s)(-1!=["int","float"].indexOf(s[r])&&t.is_numeric||t.is_label)&&a.push({label:"Column: "+(parseInt(r)+1),value:r});t.data=a,a.length>0&&(t.value=a[0].value)}var d=e.group.get(i);void 0===d||t.hidden||(t.value=d)})),t.push({name:"__data_columns",type:"hidden",hidden:!0,value:o}),e.chart.state("ok","Metadata initialized...");const a={};(0,x.UO)(t,((e,t)=>{a[t]=e.value})),e.redraw(a);(0,S.Z)(e.el,C.Z,{inputs:t}).$on("onChange",(t=>{e.redraw(t)})),i.resolve()}})})))},redraw(e){this.group.set(e),this.chart.set("modified",!0),this.chart.trigger("redraw")}});const E=r().View.extend({initialize:function(e){var t=this;this.app=e,this.chart=e.chart,this.repeat=new L.View({title:"Data series",title_new:"Data series",min:1,onnew:function(){t.chart.groups.add({id:l.ZP.uid()})}}),this.setElement(o()("<div/>").append(this.repeat.$el)),this.listenTo(this.chart.groups,"remove",(function(e){t.repeat.del(e.id),t.chart.trigger("redraw")})),this.listenTo(this.chart.groups,"reset",(function(){t.repeat.delAll()})),this.listenTo(this.chart.groups,"add",(function(e){t.repeat.add({id:e.id,$el:new D(t.app,{group:e}).$el,ondel:function(){t.chart.groups.remove(e)}})}))},render:function(){u.default.size(this.chart.plugin.groups)>0?this.repeat.$el.show():this.repeat.$el.hide()}}),O=r().View.extend({initialize:function(e){var t=this;this.chart=e.chart,this.setElement("<div/>"),this.listenTo(this.chart,"refresh",(function(){t.render()}))},render:function(){var e=this,t=l.ZP.clone(this.chart.plugin.settings)||[];if(this.$el.empty(),t.length>0){(0,x.UO)(t,(function(t,n){var i=e.chart.settings.get(n);void 0===i||t.hidden?e.chart.settings.set(n,t.value):t.value=i}));(0,S.Z)(this.el,C.Z,{inputs:t}).$on("onChange",(e=>{this.chart.settings.set(e),this.chart.trigger("redraw")}))}this.chart.trigger("redraw")}}),A=r().View.extend({initialize:function(e,t){this.app=e,this.chart=this.app.chart,this.description=new k(this.app),this.title=new m.Input({onchange:()=>{this.chart.set("title",this.title.value())}}),this.tabs=new w.View({}),this.tabs.add({id:"settings",icon:"fa fa-gear",tooltip:"Change settings.",$el:o()("<div/>").append("<label><b>Provide a title</b><label>").append(this.title.$el).append(o()("<div/>").addClass("form-text text-muted").html("This title will appear in the list of 'Saved Visualizations'.")).append(new O(this.app).$el)}),this.chart.plugin.groups&&this.tabs.add({id:"groups",icon:"fa-database",tooltip:"Select data.",$el:new E(this.app).$el}),this.setElement("<div class='charts-editor'/>"),this.$el.append(this.description.$el),this.$el.append(this.tabs.$el),this.listenTo(this.chart,"refresh",(()=>{this.title.value(this.chart.get("title"))}))}}),I=r().View.extend({initialize:function(e){this.app=e,this.model=new(r().Model)({visible:e.chart.requiresConfirmation}),this.execute_button=new m.Button({icon:"fa-check-square",tooltip:"Confirm",onclick:()=>{e.chart.trigger("redraw",!0)}}),this.export_button=new m.ButtonMenu({icon:"fa-camera",tooltip:"Export"}),this.export_button.addMenu({key:"png",title:"Save as PNG",icon:"fa-file",onclick:()=>{this._wait(e.chart,(()=>{this.downloadAs("png")}))}}),this.export_button.addMenu({key:"svg",title:"Save as SVG",icon:"fa-file-text-o",onclick:()=>{this._wait(e.chart,(()=>{this.downloadAs("svg")}))}}),this.export_button.addMenu({key:"pdf",title:"Save as PDF",icon:"fa-file-o",onclick:()=>{this._wait(e.chart,(()=>{this.downloadAs("pdf")}))}}),this.left_button=new m.Button({icon:"fa-angle-double-left",tooltip:"Show",onclick:()=>{this.model.set("visible",!0),window.dispatchEvent(new Event("resize"))}}),this.right_button=new m.Button({icon:"fa-angle-double-right",tooltip:"Hide",onclick:()=>{this.model.set("visible",!1),window.dispatchEvent(new Event("resize"))}}),this.save_button=new m.Button({icon:"fa-save",tooltip:"Save",onclick:()=>{e.chart.get("title")?(e.message.update({message:`Saving '${e.chart.get("title")}'. It will appear in the list of 'Saved Visualizations'.`,status:"success"}),e.chart.save({error:()=>{e.message.update({message:"Could not save visualization.",status:"danger"})}})):e.message.update({message:"Please provide a name.",status:"danger"})}}),this.buttons=[this.left_button,this.right_button,this.execute_button,this.export_button,this.save_button],this.setElement("<div/>");for(const e of this.buttons)this.$el.append(e.$el);this.listenTo(this.model,"change",(()=>this.render())),this.render()},downloadAs:function(e){Promise.all([n.e(977),n.e(819),n.e(266)]).then(n.bind(n,93364)).then((t=>{"png"===e?t.createPNG({$el:this.app.viewer.$el,title:this.app.chart.get("title"),error:e=>{this.app.message.update({message:e,status:"danger"})}}):"svg"===e?t.createSVG({$el:this.app.viewer.$el,title:this.app.chart.get("title"),error:e=>{this.app.message.update({message:e,status:"danger"})}}):"pdf"===e?t.createPDF({$el:this.app.viewer.$el,title:this.app.chart.get("title"),error:e=>{this.app.message.update({message:e,status:"danger"})}}):this.app.message.update({message:"Unknown artifact type.",status:"danger"})}))},render:function(){const e=this.model.get("visible");this.app.$el[e?"removeClass":"addClass"]("charts-fullscreen"),this.execute_button.model.set("visible",e&&!!this.app.chart.plugin.specs?.confirm),this.save_button.model.set("visible",e),this.export_button.model.set("visible",e),this.right_button.model.set("visible",e),this.left_button.model.set("visible",!e);const t=this.app.chart.plugin.specs?.exports??[];this.export_button.collection.each((e=>{e.set("visible",-1!==t.indexOf(e.get("key")))}))},_wait:function(e,t){this.app.deferred.ready()?t():this.app.message.update({message:"Your visualization is currently being processed. Please wait and try again."})}}),P=r().View.extend({initialize:function(e,t){var n=this;this.app=e,this.chart=this.app.chart,this.options=t,this.$container=o()("<div/>").css("height","100%").attr("id","charts-container"),this.setElement(o()("<div/>").addClass("charts-viewer").append(o()("<div/>").addClass("info").append(o()("<span/>").addClass("icon")).append(o()("<span/>").addClass("text"))).append(this.$container)),this.$info=this.$(".info"),this.$icon=this.$(".icon"),this.$text=this.$(".text"),this._fullscreen(this.$el,20),this.chart.on("redraw",(function(e){n.chart.get("modified")&&n.chart.requiresConfirmation&&!e?n.chart.state("info","Please review the chart settings in the menu to the right and select 'Confirm' to render the visualization."):n.app.deferred.execute((function(e){console.debug("viewer:redraw() - Redrawing..."),n._draw(e,n.chart)}))})),this.chart.on("set:state",(function(){var e=n.$(".charts-viewer-container"),t=n.$info,i=n.$icon,o=n.$text;switch(i.removeClass(),t.show(),o.html(n.chart.get("state_info")),n.chart.get("state")){case"ok":t.hide(),e.show();break;case"failed":i.addClass("icon fa fa-warning"),e.hide();break;case"info":i.addClass("icon fa fa-info"),e.hide();break;default:i.addClass("icon fa fa-spinner fa-spin"),e.show()}}))},_fullscreen:function(e,t){e.css("height",o()(window).height()-t),o()(window).resize((function(){e.css("height",o()(window).height()-t)}))},_draw:function(e,t){t.set("date",l.ZP.time()),t.state("wait","Please wait..."),this.$container.empty(),this.app.chart_load({process:e,chart:t,target:"charts-container",dataset:this.app.dataset,root:(0,_.getAppRoot)()})}}),R=r().Model.extend({initialize:function(){this.active={},this.last=null},execute:function(e){var t=this,n=l.ZP.uid(),i=e.length>0;this.active[n]=!0;var a=o().Deferred();a.promise().always((function(){delete t.active[n],i&&console.debug("deferred::execute()",`${this.state().charAt(0).toUpperCase()+this.state().slice(1)} ${n}`)})),o().when(this.last).always((()=>{t.active[n]?(i&&console.debug("deferred::execute()",`Running ${n}`),e(a),!i&&a.resolve()):a.reject()})),this.last=a.promise()},reset:function(){for(var e in console.debug("deferred::execute()","Reset"),this.active)this.active[e]=!1},ready:function(){return o().isEmptyObject(this.active)}});const j=r().View.extend({initialize:function(e){const t=(0,a.Bz)();var n;this.modal=t&&t.modal?t.modal:new c.Z.View,this.setElement(o()("<div/>").addClass("charts-client").append(o()("<div/>").addClass("charts-buttons")).append(o()("<div/>").addClass("charts-center")).append(o()("<div/>").addClass("charts-right"))),this.$center=this.$(".charts-center"),this.$right=this.$(".charts-right"),this.$buttons=this.$(".charts-buttons"),this.chart=new y({},e),this.chart.plugin=e.visualization_plugin,this.chart.requiresConfirmation=(n=this.chart.plugin.specs?.confirm,"true"==String(n).toLowerCase()),this.chart_load=e.chart_load,this.message=new m.Message,this.deferred=new R,this.viewer=new P(this),this.editor=new A(this),this.menu=new I(this),this.$center.append(this.viewer.$el),this.$right.append(this.message.$el).append(this.editor.$el),this.$buttons.append(this.menu.$el),o().ajax({url:`${(0,_.getAppRoot)()}api/datasets/${e.dataset_id}`}).done((e=>{this.dataset=e,this.chart.load()})).fail((e=>{const t=e.responseJSON&&e.responseJSON.err_msg;this.errormessage=t||"Import failed for unkown reason."}))}});n(49917);var Y=n(20820),H=n(38577),N=r().Model.extend({defaults:{title:"",icon_class:"",on_click:null,menu_options:null,is_menu_button:!0,id:null,href:null,target:null,enabled:!0,visible:!0,tooltip_config:{}}}),F=(r().View.extend({initialize:function(){this.model.attributes.tooltip_config={placement:"bottom"},this.model.bind("change",this.render,this)},render:function(){this.$el.tooltip("hide");var e=this.template(this.model.toJSON());return e.tooltip(this.model.get("tooltip_config")),this.$el.replaceWith(e),this.setElement(e),this},events:{click:"click"},click:function(e){return!u.default.isFunction(this.model.get("on_click"))||(this.model.get("on_click")(e),!1)},template:function(e){var t=`title="${e.title}" class="icon-button`;return e.is_menu_button&&(t+=" menu-button"),t+=` ${e.icon_class}`,e.enabled||(t+="_disabled"),t+='"',e.id&&(t+=` id="${e.id}"`),t+=` href="${e.href}"`,e.target&&(t+=` target="${e.target}"`),e.visible||(t+=' style="display: none;"'),t=e.enabled?`<a ${t}/>`:`<span ${t}/>`,o()(t)}}),r().Collection.extend({model:N})),B=r().View.extend({tagName:"div",initialize:function(){this.render()},render:function(){var e=this;return this.collection.each((t=>{var n=o()("<a/>").attr("href","javascript:void(0)").attr("title",t.attributes.title).addClass("icon-button menu-button").addClass(t.attributes.icon_class).appendTo(e.$el).click(t.attributes.on_click);t.attributes.tooltip_config&&n.tooltip(t.attributes.tooltip_config);var i=t.get("options");i&&(0,H.J)(n,i)})),this}});const $=(e,t)=>{t||(t={});var n=new F(u.default.map(e,(e=>new N(u.default.extend(e,t)))));return new B({collection:n})};var z=r().Model.extend({defaults:{ajax_settings:{},interval:1e3,success_fn:function(e){return!0}},go:function(){var e=o().Deferred(),t=this,n=t.get("ajax_settings"),i=t.get("success_fn"),a=t.get("interval"),s=()=>{o().ajax(n).success((t=>{i(t)?e.resolve(t):setTimeout(s,a)}))};return s(),e}});const W={commatize:function(e){e+="";for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e},is_deferred:e=>"promise"in e,ServerStateDeferred:z,get_random_color:e=>{e||(e="#ffffff"),"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)e[t]=parseInt(e[t].slice(1),16);var n,i,o,a,s,r,l,d,c,u,h,p,f,m,_,v,g,y=(e,t,n)=>(299*e+587*t+114*n)/1e3,b=!1,w=0;do{for(c=y(i=(16711680&(n=Math.round(16777215*Math.random())))>>16,o=(65280&n)>>8,a=255&n),b=!0,t=0;t<e.length;t++)if(u=y(r=(16711680&(s=e[t]))>>16,l=(65280&s)>>8,d=255&s),p=i,f=o,m=a,_=r,v=l,g=d,h=Math.max(p,_)-Math.min(p,_)+(Math.max(f,v)-Math.min(f,v))+(Math.max(m,g)-Math.min(m,g)),Math.abs(c-u)<40||h<200){b=!1;break}w++}while(!b&&w<=10);return`#${(16777216+n).toString(16).substr(1,6)}`}};var U=r().Model.extend({initialize:function(e){var t=this.get("key");this.set("id",t);var n=u.default.find([{key:"name",label:"Name",type:"text",default_value:""},{key:"color",label:"Color",type:"color",default_value:null},{key:"min_value",label:"Min Value",type:"float",default_value:null},{key:"max_value",label:"Max Value",type:"float",default_value:null},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:32,hidden:!0},{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"block_color",label:"Block color",type:"color",default_value:null},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"reverse_strand_color",label:"Antisense strand color",type:"color",default_value:null},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0}],(e=>e.key===t));n&&this.set(u.default.extend({},n,e)),void 0===this.get("value")&&void 0!==this.get("default_value")&&(this.set_value(this.get("default_value")),this.get("value")||"color"!==this.get("type")||this.set("value",W.get_random_color()))},set_value:function(e,t){var n=this.get("type");"float"===n?e=parseFloat(e):"int"===n&&(e=parseInt(e,10)),this.set({value:e},t)}}),V=r().Collection.extend({model:U,to_key_value_dict:function(){var e={};return this.each((t=>{e[t.get("key")]=t.get("value")})),e},get_value:function(e){var t=this.get(e);if(t)return t.get("value")},set_value:function(e,t,n){var i=this.get(e);if(i)return i.set_value(t,n)},set_default_value:function(e,t){var n=this.get(e);if(n)return n.set("default_value",t)}},{from_models_and_saved_values:function(e,t){return t&&(e=u.default.map(e,(e=>u.default.extend({},e,{value:t[e.key]})))),new V(e)}}),q=r().View.extend({className:"config-settings-view",render:function(){var e=this.$el;return this.collection.each(((t,n)=>{if(!t.get("hidden")){var i,a=`param_${n}`,s=t.get("type"),r=t.get("value"),l=o()("<div class='form-row' />").appendTo(e);if(l.append(o()("<label />").attr("for",a).text(`${t.get("label")}:`)),"bool"===s)l.append(o()('<input type="checkbox" />').attr("id",a).attr("name",a).attr("checked",r));else if("text"===s)l.append(o()('<input type="text"/>').attr("id",a).val(r).click((function(){o()(this).select()})));else if("select"===s){var d=o()("<select />").attr("id",a);u.default.each(t.get("options"),(e=>{o()("<option/>").text(e.label).attr("value",e.value).appendTo(d)})),d.val(r),l.append(d)}else if("color"===s){var c=o()("<div/>").appendTo(l),h=o()("<input />").attr("id",a).attr("name",a).val(r).css("float","left").appendTo(c).click((function(e){o()(".tooltip").removeClass("in");var t=o()(this).siblings(".tooltip").addClass("in");t.css({left:o()(this).position().left+o()(this).width()+5,top:o()(this).position().top-o()(t).height()/2+o()(this).height()/2}).show(),t.click((e=>{e.stopPropagation()})),o()(document).bind("click.color-picker",(()=>{t.hide(),o()(document).unbind("click.color-picker")})),e.stopPropagation()})),p=o()("<a href='javascript:void(0)'/>").addClass("icon-button arrow-circle").appendTo(c).attr("title","Set new random color").tooltip(),f=o()("<div class='tooltip right' style='position: absolute;' />").appendTo(c).hide(),m=o()("<div class='tooltip-inner' style='text-align: inherit'></div>").appendTo(f);o()("<div class='tooltip-arrow'></div>").appendTo(f);var _=o().farbtastic(m,{width:100,height:100,callback:h,color:r});c.append(o()("<div/>").css("clear","both")),i=_,p.click((()=>{i.setColor(W.get_random_color())}))}else l.append(o()("<input />").attr("id",a).attr("name",a).val(r));t.help&&l.append(o()("<div class='help'/>").text(t.help))}})),this},render_in_modal:function(e){var t=this;const n=(0,a.Bz)();var i=()=>{n.modal.hide(),o()(window).unbind("keypress.check_enter_esc")},s=()=>{n.modal.hide(),o()(window).unbind("keypress.check_enter_esc"),t.update_from_form()};o()(window).bind("keypress.check_enter_esc",(e=>{27===(e.keyCode||e.which)?i():13===(e.keyCode||e.which)&&s()})),0===this.$el.children().length&&this.render(),n.modal.show({title:e||"Configure",body:this.$el,buttons:{Cancel:i,OK:s}})},update_from_form:function(){var e=this;this.collection.each(((t,n)=>{if(!t.get("hidden")){var i=`param_${n}`,o=e.$el.find(`#${i}`).val();"bool"===t.get("type")&&(o=e.$el.find(`#${i}`).is(":checked")),t.set_value(o)}}))}});const Z={ConfigSetting:U,ConfigSettingCollection:V,ConfigSettingCollectionView:q};var G=n(70538),J=n(3967),K=n(51120),X=n(26509);const Q=(0,G.defineComponent)({__name:"TabularChunkedView",props:{options:null},setup(e){const t=e,n=(0,G.ref)(0),i=(0,G.ref)(!0),o=(0,G.ref)(!1),a=(0,G.reactive)({rows:[]}),s=(0,G.computed)((()=>{var e;const n=Array(t.options.dataset_config.metadata_columns);return(null===(e=t.options.dataset_config.metadata_column_names)||void 0===e?void 0:e.length)>0&&t.options.dataset_config.metadata_column_names.forEach(((e,t)=>{n[t]=e})),n})),r=(0,G.computed)((()=>{var e;const n=Array(t.options.dataset_config.metadata_columns);return(null===(e=t.options.dataset_config.metadata_column_types)||void 0===e?void 0:e.length)>0&&t.options.dataset_config.metadata_column_types.forEach(((e,t)=>{n[t]="str"===e||"list"===e?"string-align":"number-align"})),n})),l=(0,G.computed)((()=>"csv"===t.options.dataset_config.file_ext?",":"\t")),d=(0,G.computed)((()=>`${(0,_.getAppRoot)()}dataset/display?dataset_id=${t.options.dataset_config.id}`)),{y:c}=(0,J.baj)();function u(e){let t=[];try{t=(0,X.Q)(e.ck_data,{delimiter:l.value,relax_quotes:!0})}catch(n){t=e.ck_data.trim().split("\n"),t=t.map((e=>{try{return(0,X.Q)(e,{delimiter:l.value})[0]||[e]}catch(t){return[e]}}))}t.forEach(((t,n)=>{n>=(e.data_line_offset||0)&&a.rows.push(h(t))})),n.value=e.offset}function h(e){const t=s.value.length;if(e.length===t)return e;if(e.length>t)return e.slice(0,t-1).concat([e.slice(t-1).join("\t")]);if(1===e.length){let n=e[0].split(",");return n.length===t?n:(n=e[0].split("\t"),n.length===t?n:(n=e[0].split(" "),n.length===t?n:e))}return e.concat(Array(t-e.length).fill(""))}function p(){i.value=!0,K.Z.get(d.value,{params:{offset:n.value}}).then((e=>{""===e.data.ck_data?o.value=!0:u(e.data),i.value=!1}))}return(0,G.watch)(c,(e=>{!0!==o.value&&!1===i.value&&e>document.body.scrollHeight-window.innerHeight-100&&p()})),(0,G.onMounted)((()=>{t.options.dataset_config.first_data_chunk&&(u(t.options.dataset_config.first_data_chunk),i.value=!1)})),{__sfc:!0,props:t,offset:n,loading:i,atEOF:o,tabularData:a,columns:s,columnStyle:r,delimiter:l,chunkUrl:d,y:c,processChunk:u,processRow:h,nextChunk:p}}});const ee=(0,n(51900).Z)(Q,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("b-table-simple",{attrs:{hover:"",small:"",striped:""}},[t("b-thead",{attrs:{"head-variant":"dark"}},[t("b-tr",e._l(n.columns,(function(n,i){return t("b-th",{key:n},[e._v(e._s(n||`Column ${i+1}`))])})),1)],1),e._v(" "),t("b-tbody",e._l(n.tabularData.rows,(function(i,o){return t("b-tr",{key:o},[e._l(i.slice(0,-1),(function(i,o){return t("b-td",{key:o,class:n.columnStyle[o]},[e._v("\n                    "+e._s(i)+"\n                ")])})),e._v(" "),t("b-td",{class:n.columnStyle[i.length-1],attrs:{colspan:1+n.columns.length-i.length}},[e._v("\n                    "+e._s(i.slice(-1)[0])+"\n                ")])],2)})),1)],1)],1)}),[],!1,null,"4cb94f73",null).exports;var te=r().Model.extend({}),ne=r().Model.extend({defaults:{id:"",type:"",name:"",hda_ldda:"hda",metadata:null},initialize:function(){this.get("metadata")||this._set_metadata(),this.on("change",this._set_metadata,this)},_set_metadata:function(){var e=new te;u.default.each(u.default.keys(this.attributes),(function(t){if(0===t.indexOf("metadata_")){var n=t.split("metadata_")[1];e.set(n,this.attributes[t]),delete this.attributes[t]}}),this),this.set("metadata",e,{silent:!0})},get_metadata:function(e){return this.attributes.metadata.get(e)},urlRoot:`${(0,_.getAppRoot)()}api/datasets`}),ie=r().Collection.extend({model:ne});const oe=e=>(0,S.Z)(e.parent_elt,ee,{options:e});var ae=n(37183),se={toJSON:function(){var e=this,t={};return u.default.each(e.constructor.to_json_keys,(n=>{var i=e.get(n);n in e.constructor.to_json_mappers&&(i=e.constructor.to_json_mappers[n](i,e)),t[n]=i})),t}},re=function(e){this.default_font=void 0!==e?e:"9px Monaco, Lucida Console, monospace",this.dummy_canvas=this.new_canvas(),this.dummy_context=this.dummy_canvas.getContext("2d"),this.dummy_context.font=this.default_font,this.char_width_px=this.dummy_context.measureText("A").width,this.patterns={},this.load_pattern("right_strand","/visualization/strand_right.png"),this.load_pattern("left_strand","/visualization/strand_left.png"),this.load_pattern("right_strand_inv","/visualization/strand_right_inv.png"),this.load_pattern("left_strand_inv","/visualization/strand_left_inv.png")};u.default.extend(re.prototype,{load_pattern:function(e,t){var n=this.patterns,i=this.dummy_context,o=new Image;o.src=`${(0,_.getAppRoot)()}static/images${t}`,o.onload=()=>{n[e]=i.createPattern(o,"repeat")}},get_pattern:function(e){return this.patterns[e]},new_canvas:function(){var e=o()("<canvas/>")[0];return e.manager=this,e}});var le=r().Model.extend({defaults:{num_elements:20,obj_cache:null,key_ary:null},initialize:function(e){this.clear()},get_elt:function(e){var t=this.attributes.obj_cache,n=this.attributes.key_ary,i=e.toString(),o=u.default.indexOf(n,(e=>e.toString()===i));return-1!==o&&(t[i].stale?(n.splice(o,1),delete t[i]):this.move_key_to_end(e,o)),t[i]},set_elt:function(e,t){var n=this.attributes.obj_cache,i=this.attributes.key_ary,o=e.toString(),a=this.attributes.num_elements;if(!n[o]){if(i.length>=a)delete n[i.shift().toString()];i.push(e)}return n[o]=t,t},move_key_to_end:function(e,t){this.attributes.key_ary.splice(t,1),this.attributes.key_ary.push(e)},clear:function(){this.attributes.obj_cache={},this.attributes.key_ary=[]},size:function(){return this.attributes.key_ary.length},most_recently_added:function(){return 0===this.size()?null:this.attributes.key_ary[this.attributes.key_ary.length-1]}}),de=le.extend({defaults:u.default.extend({},le.prototype.defaults,{dataset:null,genome:null,init_data:null,min_region_size:200,filters_manager:null,data_type:"data",data_mode_compatible:function(e,t){return!0},can_subset:function(e){return!1}}),initialize:function(e){le.prototype.initialize.call(this);var t=this.get("init_data");t&&this.add_data(t)},add_data:function(e){this.get("num_elements")<e.length&&this.set("num_elements",e.length);var t=this;u.default.each(e,(e=>{t.set_data(e.region,e)}))},data_is_ready:function(){var e=this.get("dataset"),t=o().Deferred(),n="raw_data"===this.get("data_type")?"state":"data"===this.get("data_type")?"converted_datasets_state":"error",i=new W.ServerStateDeferred({ajax_settings:{url:this.get("dataset").url(),data:{hda_ldda:e.get("hda_ldda"),data_type:n},dataType:"json"},interval:5e3,success_fn:function(e){return"pending"!==e}});return o().when(i.go()).then((e=>{t.resolve("ok"===e||"data"===e)})),t},search_features:function(e){var t=this.get("dataset"),n={query:e,hda_ldda:t.get("hda_ldda"),data_type:"features"};return o().getJSON(t.url(),n)},load_data:function(e,t,n,i){var a=this.get("dataset"),s={data_type:this.get("data_type"),chrom:e.get("chrom"),low:e.get("start"),high:e.get("end"),mode:t,resolution:n,hda_ldda:a.get("hda_ldda")};o().extend(s,i);var r=this.get("filters_manager");if(r){for(var l=[],d=r.filters,c=0;c<d.length;c++)l.push(d[c].name);s.filter_cols=JSON.stringify(l)}var u=this,h=o().getJSON(a.url(),s,(t=>{t.region=e,u.set_data(e,t)}));return this.set_data(e,h),h},get_data:function(e,t,n,i){var o=this.get_elt(e);if(o&&(W.is_deferred(o)||this.get("data_mode_compatible")(o,t)))return o;for(var a,s,r=this.get("key_ary"),l=this.get("obj_cache"),d=0;d<r.length;d++)if((a=r[d]).contains(e)&&(s=!0,o=l[a.toString()],W.is_deferred(o)||this.get("data_mode_compatible")(o,t)&&this.get("can_subset")(o))){if(this.move_key_to_end(a,d),!W.is_deferred(o)){var c=this.subset_entry(o,e);this.set_data(e,c),o=c}return o}if(!s&&e.length()<this.attributes.min_region_size){e=e.copy();var u=this.most_recently_added();!u||e.get("start")>u.get("start")?e.set("end",e.get("start")+this.attributes.min_region_size):e.set("start",e.get("end")-this.attributes.min_region_size),e.set("genome",this.attributes.genome),e.trim()}return this.load_data(e,t,n,i)},set_data:function(e,t){this.set_elt(e,t)},DEEP_DATA_REQ:"deep",BROAD_DATA_REQ:"breadth",get_more_data:function(e,t,n,i,a){var s=this._mark_stale(e);if(s&&this.get("data_mode_compatible")(s,t)){var r=e.get("start");a===this.DEEP_DATA_REQ?o().extend(i,{start_val:s.data.length+1}):a===this.BROAD_DATA_REQ&&(r=(s.max_high?s.max_high:s.data[s.data.length-1][2])+1);var l=e.copy().set("start",r),d=this,c=this.load_data(l,t,n,i),u=o().Deferred();return this.set_data(e,u),o().when(c).then((t=>{t.data&&(t.data=s.data.concat(t.data),t.max_low&&(t.max_low=s.max_low),t.message&&(t.message=t.message.replace(/[0-9]+/,t.data.length))),d.set_data(e,t),u.resolve(t)})),u}console.log("ERROR: problem with getting more data: current data is not compatible")},can_get_more_detailed_data:function(e){var t=this.get_elt(e);return"bigwig"===t.dataset_type&&t.data.length<8e3},get_more_detailed_data:function(e,t,n,i,o){var a=this._mark_stale(e);if(a)return o||(o={}),"bigwig"===a.dataset_type&&(o.num_samples=1e3*i),this.load_data(e,t,n,o);console.log("ERROR getting more detailed data: no current data")},_mark_stale:function(e){var t=this.get_elt(e);return t||console.log("ERROR: no data to mark as stale: ",this.get("dataset"),e.toString()),t.stale=!0,t},get_genome_wide_data:function(e){var t=this,n=!0,i=u.default.map(e.get("chroms_info").chrom_info,(e=>{var i=t.get_elt(new he({chrom:e.chrom,start:0,end:e.len}));return i||(n=!1),i}));if(n)return i;var a=o().Deferred();return o().getJSON(this.get("dataset").url(),{data_type:"genome_data"},(e=>{t.add_data(e.data),a.resolve(e.data)})),a},subset_entry:function(e,t){var n={bigwig:function(e,t){return u.default.filter(e,(e=>e[0]>=t.get("start")&&e[0]<=t.get("end")))},refseq:function(t,n){var i=n.get("start")-e.region.get("start");return e.data.slice(i,i+n.length())}},i=e.data;return!e.region.same(t)&&e.dataset_type in n&&(i=n[e.dataset_type](e.data,t)),{region:t,data:i,dataset_type:e.dataset_type}}}),ce=de.extend({initialize:function(e){var t=new(r().Model);t.urlRoot=e.data_url,this.set("dataset",t)},load_data:function(e,t,n,i){return e.length()<=1e5?de.prototype.load_data.call(this,e,t,n,i):{data:null,region:e}}}),ue=r().Model.extend({defaults:{name:null,key:null,chroms_info:null},initialize:function(e){this.id=e.dbkey},get_chroms_info:function(){return this.attributes.chroms_info.chrom_info},get_chrom_region:function(e){var t=u.default.find(this.get_chroms_info(),(t=>t.chrom===e));return new he({chrom:t.chrom,end:t.len})},get_chrom_len:function(e){return u.default.find(this.get_chroms_info(),(t=>t.chrom===e)).len}}),he=r().Model.extend({defaults:{chrom:null,start:0,end:0,str_val:null,genome:null},same:function(e){return this.attributes.chrom===e.get("chrom")&&this.attributes.start===e.get("start")&&this.attributes.end===e.get("end")},initialize:function(e){if(e.from_str){var t=e.from_str.split(":"),n=t[0],i=t[1].split("-");this.set({chrom:n,start:parseInt(i[0],10),end:parseInt(i[1],10)})}this.attributes.str_val=`${this.get("chrom")}:${this.get("start")}-${this.get("end")}`,this.on("change",(function(){this.attributes.str_val=`${this.get("chrom")}:${this.get("start")}-${this.get("end")}`}),this)},copy:function(){return new he({chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")})},length:function(){return this.get("end")-this.get("start")},toString:function(){return this.attributes.str_val},toJSON:function(){return{chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")}},compute_overlap:function(e){var t=this.get("chrom"),n=e.get("chrom"),i=this.get("start"),o=e.get("start"),a=this.get("end"),s=e.get("end");return t&&n&&t!==n?he.overlap_results.DIF_CHROMS:i<o?a<o?he.overlap_results.BEFORE:a<s?he.overlap_results.OVERLAP_START:he.overlap_results.CONTAINS:i>o?i>s?he.overlap_results.AFTER:a<=s?he.overlap_results.CONTAINED_BY:he.overlap_results.OVERLAP_END:a>=s?he.overlap_results.CONTAINS:he.overlap_results.CONTAINED_BY},trim:function(e){if(this.attributes.start<0&&(this.attributes.start=0),this.attributes.genome){var t=this.attributes.genome.get_chrom_len(this.attributes.chrom);this.attributes.end>t&&(this.attributes.end=t-1)}return this},contains:function(e){return this.compute_overlap(e)===he.overlap_results.CONTAINS},overlaps:function(e){return 0===u.default.intersection([this.compute_overlap(e)],[he.overlap_results.DIF_CHROMS,he.overlap_results.BEFORE,he.overlap_results.AFTER]).length}},{overlap_results:{DIF_CHROMS:1e3,BEFORE:1001,CONTAINS:1002,OVERLAP_START:1003,OVERLAP_END:1004,CONTAINED_BY:1005,AFTER:1006}}),pe=r().Collection.extend({model:he}),fe=r().Model.extend({defaults:{region:null,note:""},initialize:function(e){this.set("region",new he(e.region))}}),me=r().Collection.extend({model:fe}),_e=r().Model.extend(se).extend({defaults:{mode:"Auto"},initialize:function(e){this.set("dataset",new ne(e.dataset));var t=[{key:"name",default_value:this.get("dataset").get("name")},{key:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:0},{key:"max_value",label:"Max Value",type:"float",default_value:1}];this.set("config",Z.ConfigSettingCollection.from_models_and_saved_values(t,e.prefs));var n=this.get("preloaded_data");n=n?n.data:[],this.set("data_manager",new de({dataset:this.get("dataset"),init_data:n}))}},{to_json_keys:["track_type","dataset","prefs","mode","filters","tool_state"],to_json_mappers:{prefs:function(e,t){return 0===u.default.size(e)&&(e={name:t.get("config").get("name").get("value"),color:t.get("config").get("color").get("value")}),e},dataset:function(e){return{id:e.id,hda_ldda:e.get("hda_ldda")}}}}),ve=r().Collection.extend({model:_e}),ge=r().Model.extend({defaults:{title:"",type:""},urlRoot:`${(0,_.getAppRoot)()}api/visualizations`,save:function(){return o().ajax({url:this.url(),type:"POST",dataType:"json",data:{vis_json:JSON.stringify(this)}})}}),ye=ge.extend(se).extend({defaults:u.default.extend({},ge.prototype.defaults,{dbkey:"",drawables:null,bookmarks:null,viewport:null}),initialize:function(e){this.set("drawables",new ve(e.tracks));this.set("config",Z.ConfigSettingCollection.from_models_and_saved_values([],e.prefs)),this.unset("tracks"),this.get("drawables").each((e=>{e.unset("preloaded_data")}))},add_tracks:function(e){this.get("drawables").add(e)}},{to_json_keys:["view","viewport","bookmarks"],to_json_mappers:{view:function(e,t){return{obj_type:"View",prefs:{name:t.get("title"),content_visible:!0},drawables:t.get("drawables")}}}}),be=r().Router.extend({initialize:function(e){this.view=e.view,this.route(/([\w]+)$/,"change_location"),this.route(/([\w+]+:[\d,]+-[\d,]+)$/,"change_location"),this.view.on("navigate",(e=>{this.navigate(e)}))},change_location:function(e){this.view.go_to(e)}});const we={BackboneTrack:_e,BrowserBookmark:fe,BrowserBookmarkCollection:me,Cache:le,CanvasManager:re,Genome:ue,GenomeDataManager:de,GenomeRegion:he,GenomeRegionCollection:pe,GenomeVisualization:ye,GenomeReferenceDataManager:ce,TrackBrowserRouter:be,Visualization:ge,select_datasets:(e,t)=>{var n=new ae.Z({url_base:`${(0,_.getAppRoot)()}visualization/list_history_datasets`,filters:e,embedded:!0}),i=new ae.Z({url_base:`${(0,_.getAppRoot)()}visualization/list_library_datasets`,embedded:!0}),s=new w.View;s.add({id:"histories",title:(0,M.ZP)("Histories"),$el:o()("<div/>").append(n.$el)}),s.add({id:"libraries",title:(0,M.ZP)("Libraries"),$el:o()("<div/>").append(i.$el)});const r=(0,a.Bz)();r.modal.show({title:(0,M.ZP)("Select datasets for new tracks"),body:s.$el,closing_events:!0,buttons:{Cancel:function(){r.modal.hide()},Add:function(){var e=[];s.$("input.grid-row-select-checkbox[name=id]:checked").each((function(){window.console.log(o()(this).val()),e[e.length]=o().ajax({url:`${(0,_.getAppRoot)()}api/datasets/${o()(this).val()}`,dataType:"json",data:{data_type:"track_config",hda_ldda:"histories"==s.current()?"hda":"ldda"}})})),o().when.apply(o(),e).then((function(){var e=arguments[0]instanceof Array?o().map(arguments,(e=>e[0])):[arguments[0]];t(e)})),r.modal.hide()}}})}};var ke=r().Model.extend({is_visible:function(e,t){var n=e.getBoundingClientRect(),i=o()("svg")[0].getBoundingClientRect();return!(n.right<0||n.left>i.right||n.bottom<0||n.top>i.bottom)}}),Ce={drawTicks:function(e,t,n,i,o){var a=e.append("g").selectAll("g").data(t).enter().append("g").selectAll("g").data(n).enter().append("g").attr("class","tick").attr("transform",(e=>`rotate(${180*e.angle/Math.PI-90})translate(${e.radius},0)`)),s=[],r=[],l=e=>e.angle>Math.PI?"end":null;return o?(s=[0,0,0,-4],r=[4,0,"",".35em"],l=null):(s=[1,0,4,0],r=[0,4,".35em",""]),a.append("line").attr("x1",s[0]).attr("y1",s[1]).attr("x2",s[2]).attr("y1",s[3]).style("stroke","#000"),a.append("text").attr("x",r[0]).attr("y",r[1]).attr("dx",r[2]).attr("dy",r[3]).attr("text-anchor",l).attr("transform",i).text((e=>e.label))},formatNum:function(e,t){if(void 0===t&&(t=2),null===e)return null;var n=null;if(Math.abs(e)<1)n=e.toPrecision(t);else{var i=Math.round(e.toPrecision(t));(e=Math.abs(e))<1e3?n=i:e<1e6?n=`${Math.round((i/1e3).toPrecision(3)).toFixed(0)}K`:e<1e9&&(n=`${Math.round((i/1e6).toPrecision(3)).toFixed(0)}M`)}return n}},xe=r().Model.extend({}),Se=r().View.extend({className:"circster",initialize:function(e){this.genome=e.genome,this.label_arc_height=50,this.scale=1,this.circular_views=null,this.chords_views=null,this.model.get("drawables").on("add",this.add_track,this),this.model.get("drawables").on("remove",this.remove_track,this);var t=this.model.get("config");t.get("arc_dataset_height").on("change:value",this.update_track_bounds,this),t.get("track_gap").on("change:value",this.update_track_bounds,this)},get_circular_tracks:function(){return this.model.get("drawables").filter((e=>"DiagonalHeatmapTrack"!==e.get("track_type")))},get_chord_tracks:function(){return this.model.get("drawables").filter((e=>"DiagonalHeatmapTrack"===e.get("track_type")))},get_tracks_bounds:function(){var e=this.get_circular_tracks(),t=this.model.get("config").get_value("arc_dataset_height"),n=this.model.get("config").get_value("track_gap"),i=Math.min(this.$el.width(),this.$el.height())-20,o=i/2-e.length*(t+n)+n-this.label_arc_height,a=Y.range(o,i/2,t+n);return u.default.map(a,(e=>[e,e+t]))},render:function(){var e=this,t=e.$el.width(),n=e.$el.height(),i=this.get_circular_tracks(),o=this.get_chord_tracks(),a=e.model.get("config").get_value("total_gap"),s=this.get_tracks_bounds(),r=Y.select(e.$el[0]).append("svg").attr("width",t).attr("height",n).attr("pointer-events","all").append("svg:g").call(Y.behavior.zoom().on("zoom",(()=>{var t=Y.event.scale;r.attr("transform",`translate(${Y.event.translate}) scale(${t})`),e.scale!==t&&(e.zoom_drag_timeout&&clearTimeout(e.zoom_drag_timeout),e.zoom_drag_timeout=setTimeout((()=>{}),400))}))).attr("transform",`translate(${t/2},${n/2})`).append("svg:g").attr("class","tracks");this.circular_views=i.map(((t,n)=>{var i=new De({el:r.append("g")[0],track:t,radius_bounds:s[n],genome:e.genome,total_gap:a});return i.render(),i})),this.chords_views=o.map((t=>{var n=new Ee({el:r.append("g")[0],track:t,radius_bounds:s[0],genome:e.genome,total_gap:a});return n.render(),n}));var l=this.circular_views[this.circular_views.length-1].radius_bounds[1],d=[l,l+this.label_arc_height];this.label_track_view=new Te({el:r.append("g")[0],track:new xe,radius_bounds:d,genome:e.genome,total_gap:a}),this.label_track_view.render()},add_track:function(e){var t=this.model.get("config").get_value("total_gap");if("DiagonalHeatmapTrack"===e.get("track_type")){var n=this.circular_views[0].radius_bounds,i=new Ee({el:Y.select("g.tracks").append("g")[0],track:e,radius_bounds:n,genome:this.genome,total_gap:t});i.render(),this.chords_views.push(i)}else{var o=this.get_tracks_bounds();u.default.each(this.circular_views,((e,t)=>{e.update_radius_bounds(o[t])})),u.default.each(this.chords_views,(e=>{e.update_radius_bounds(o[0])}));var a=this.circular_views.length,s=new De({el:Y.select("g.tracks").append("g")[0],track:e,radius_bounds:o[a],genome:this.genome,total_gap:t});s.render(),this.circular_views.push(s)}},remove_track:function(e,t,n){var i=this.circular_views[n.index];this.circular_views.splice(n.index,1),i.$el.remove();var o=this.get_tracks_bounds();u.default.each(this.circular_views,((e,t)=>{e.update_radius_bounds(o[t])}))},update_track_bounds:function(){var e=this.get_tracks_bounds();u.default.each(this.circular_views,((t,n)=>{t.update_radius_bounds(e[n])})),u.default.each(this.chords_views,(t=>{t.update_radius_bounds(e[0])}))}}),Me=r().View.extend({tagName:"g",initialize:function(e){this.bg_stroke="#ddd",this.loading_bg_fill="#ffc",this.bg_fill="#ddd",this.total_gap=e.total_gap,this.track=e.track,this.radius_bounds=e.radius_bounds,this.genome=e.genome,this.chroms_layout=this._chroms_layout(),this.data_bounds=[],this.scale=1,this.parent_elt=Y.select(this.$el[0])},get_fill_color:function(){var e=this.track.get("config").get_value("block_color");return e||(e=this.track.get("config").get_value("color")),e},render:function(){var e=this.parent_elt,t=this.chroms_layout,n=Y.svg.arc().innerRadius(this.radius_bounds[0]).outerRadius(this.radius_bounds[1]),i=e.selectAll("g").data(t).enter().append("svg:g").append("path").attr("d",n).attr("class","chrom-background").style("stroke",this.bg_stroke).style("fill",this.loading_bg_fill);i.append("title").text((e=>e.data.chrom));var a=this,s=a.track.get("data_manager"),r=!s||s.data_is_ready();o().when(r).then((()=>{o().when(a._render_data(e)).then((()=>{i.style("fill",a.bg_fill),a.render_labels()}))}))},render_labels:function(){},update_radius_bounds:function(e){this.radius_bounds=e;var t=Y.svg.arc().innerRadius(this.radius_bounds[0]).outerRadius(this.radius_bounds[1]);this.parent_elt.selectAll("g>path.chrom-background").transition().duration(1e3).attr("d",t),this._transition_chrom_data(),this._transition_labels()},update_scale:function(e){var t=this.scale;if(this.scale=e,!(e<=t)){var n=this,i=new ke;return this.parent_elt.selectAll("path.chrom-data").filter((function(e,t){return i.is_visible(this)})).each((function(t,i){var a,s=Y.select(this),r=s.attr("chrom"),l=n.genome.get_chrom_region(r);n.track.get("data_manager").can_get_more_detailed_data(l)&&(a=n.track.get("data_manager").get_more_detailed_data(l,"Coverage",0,e),o().when(a).then((e=>{s.remove(),n._update_data_bounds();var t=u.default.find(n.chroms_layout,(e=>e.data.chrom===r)),i=n.get_fill_color();n._render_chrom_data(n.parent_elt,t,e).style("stroke",i).style("fill",i)})))})),n}},_transition_chrom_data:function(){var e=this.track,t=this.chroms_layout,n=this.parent_elt.selectAll("g>path.chrom-data");if(n[0].length>0){var i=this;o().when(e.get("data_manager").get_genome_wide_data(this.genome)).then((o=>{var a=u.default.reject(u.default.map(o,((e,n)=>{var o=null,a=i._get_path_function(t[n],e);return a&&(o=a(e.data)),o})),(e=>null===e)),s=e.get("config").get_value("color");n.each((function(e,t){Y.select(this).transition().duration(1e3).style("stroke",s).style("fill",s).attr("d",a[t])}))}))}},_transition_labels:function(){},_update_data_bounds:function(e){this.data_bounds=e||this.get_data_bounds(this.track.get("data_manager").get_genome_wide_data(this.genome)),this._transition_chrom_data()},_render_data:function(e){var t=this,n=this.chroms_layout,i=this.track,a=o().Deferred();return o().when(i.get("data_manager").get_genome_wide_data(this.genome)).then((o=>{t.data_bounds=t.get_data_bounds(o),i.get("config").set_value("min_value",t.data_bounds[0],{silent:!0}),i.get("config").set_value("max_value",t.data_bounds[1],{silent:!0});var s=u.default.zip(n,o);u.default.each(s,(n=>{var i=n[0],o=n[1];return t._render_chrom_data(e,i,o)}));var r=t.get_fill_color();t.parent_elt.selectAll("path.chrom-data").style("stroke",r).style("fill",r),a.resolve(e)})),a},_render_chrom_data:function(e,t,n){},_get_path_function:function(e,t){},_chroms_layout:function(){var e=this.genome.get_chroms_info(),t=Y.layout.pie().value((e=>e.len)).sort(null)(e),n=2*Math.PI*this.total_gap/e.length;return u.default.map(t,((e,t)=>{var i=e.endAngle-n;return e.endAngle=i>e.startAngle?i:e.startAngle,e}))}}),Te=Me.extend({initialize:function(e){Me.prototype.initialize.call(this,e),this.innerRadius=this.radius_bounds[0],this.radius_bounds[0]=this.radius_bounds[1],this.bg_stroke="#fff",this.bg_fill="#fff",this.min_arc_len=.05},_render_data:function(e){var t=this,n=e.selectAll("g");n.selectAll("path").attr("id",(e=>`label-${e.data.chrom}`)),n.append("svg:text").filter((e=>e.endAngle-e.startAngle>t.min_arc_len)).attr("text-anchor","middle").append("svg:textPath").attr("class","chrom-label").attr("xlink:href",(e=>`#label-${e.data.chrom}`)).attr("startOffset","25%").text((e=>e.data.chrom));var i=u.default.filter(this.chroms_layout,(e=>e.endAngle-e.startAngle>t.min_arc_len));this.drawTicks(this.parent_elt,i,(e=>{var n=(e.endAngle-e.startAngle)/e.value,i=Y.range(0,e.value,25e6).map(((i,o)=>({radius:t.innerRadius,angle:i*n+e.startAngle,label:0===o?0:o%3?null:t.formatNum(i)})));return i.length<4&&(i[i.length-1].label=t.formatNum(Math.round((i[i.length-1].angle-e.startAngle)/n))),i}),(e=>e.angle>Math.PI?"rotate(180)translate(-16)":null))}});u.default.extend(Te.prototype,Ce);var Le=Me.extend({initialize:function(e){Me.prototype.initialize.call(this,e);var t=this.track.get("config");t.get("min_value").on("change:value",this._update_min_max,this),t.get("max_value").on("change:value",this._update_min_max,this),t.get("color").on("change:value",this._transition_chrom_data,this)},_update_min_max:function(){var e=this.track.get("config"),t=[e.get_value("min_value"),e.get_value("max_value")];this._update_data_bounds(t),this.parent_elt.selectAll(".min_max").text(((e,n)=>t[n]))},_quantile:function(e,t){return e.sort(Y.ascending),Y.quantile(e,t)},_render_chrom_data:function(e,t,n){var i=this._get_path_function(t,n);return i?e.datum(n.data).append("path").attr("class","chrom-data").attr("chrom",t.data.chrom).attr("d",i):null},_get_path_function:function(e,t){if("string"==typeof t||!t.data||0===t.data.length)return null;var n=Y.scale.linear().domain(this.data_bounds).range(this.radius_bounds).clamp(!0),i=Y.scale.linear().domain([0,t.data.length]).range([e.startAngle,e.endAngle]),o=Y.svg.line.radial().interpolate("linear").radius((e=>n(e[1]))).angle(((e,t)=>i(t)));return Y.svg.area.radial().interpolate(o.interpolate()).innerRadius(n(0)).outerRadius(o.radius()).angle(o.angle())},render_labels:function(){var e=this,t=this.drawTicks(this.parent_elt,[this.chroms_layout[0]],this._data_bounds_ticks_fn(),(()=>"rotate(90)"),!0).classed("min_max",!0);u.default.each(t,(t=>{o()(t).click((()=>{new Z.ConfigSettingCollectionView({collection:e.track.get("config")}).render_in_modal("Configure Track")}))}))},_transition_labels:function(){if(0!==this.data_bounds.length){var e=this,t=u.default.filter(this.chroms_layout,(e=>e.endAngle-e.startAngle>.08)),n=u.default.filter(t,((e,t)=>t%3==0)),i=u.default.flatten(u.default.map(n,(t=>e._data_bounds_ticks_fn()(t))));this.parent_elt.selectAll("g.tick").data(i).transition().attr("transform",(e=>`rotate(${180*e.angle/Math.PI-90})translate(${e.radius},0)`))}},_data_bounds_ticks_fn:function(){var e=this;return t=>[{radius:e.radius_bounds[0],angle:t.startAngle,label:e.formatNum(e.data_bounds[0])},{radius:e.radius_bounds[1],angle:t.startAngle,label:e.formatNum(e.data_bounds[1])}]},get_data_bounds:function(e){}});u.default.extend(Le.prototype,Ce);var De=Le.extend({get_data_bounds:function(e){var t=u.default.flatten(u.default.map(e,(e=>e?u.default.map(e.data,(e=>parseInt(e[1],10)||0)):0)));return[u.default.min(t),this._quantile(t,.98)||u.default.max(t)]}}),Ee=Me.extend({render:function(){var e=this;o().when(e.track.get("data_manager").data_is_ready()).then((()=>{o().when(e.track.get("data_manager").get_genome_wide_data(e.genome)).then((t=>{var n=[],i=e.genome.get_chroms_info();u.default.each(t,((t,o)=>{var a=i[o].chrom,s=u.default.map(t.data,(t=>{var n=e._get_region_angle(a,t[1]),i=e._get_region_angle(t[3],t[4]);return{source:{startAngle:n,endAngle:n+.01},target:{startAngle:i,endAngle:i+.01}}}));n=n.concat(s)})),e.parent_elt.append("g").attr("class","chord").selectAll("path").data(n).enter().append("path").style("fill",e.get_fill_color()).attr("d",Y.svg.chord().radius(e.radius_bounds[0])).style("opacity",1)}))}))},update_radius_bounds:function(e){this.radius_bounds=e,this.parent_elt.selectAll("path").transition().attr("d",Y.svg.chord().radius(this.radius_bounds[0]))},_get_region_angle:function(e,t){var n=u.default.find(this.chroms_layout,(t=>t.data.chrom===e));return n.endAngle-(n.endAngle-n.startAngle)*(n.data.len-t)/n.data.len}}),Oe=r().View.extend({initialize:function(){l.ZP.cssLoadFile("static/style/circster.css");var e=new we.Genome(window.galaxy_config.app.genome),t=new we.GenomeVisualization(window.galaxy_config.app.viz_config);t.get("config").add([{key:"arc_dataset_height",label:"Arc Dataset Height",type:"int",value:25,view:"circster"},{key:"track_gap",label:"Gap Between Tracks",type:"int",value:5,view:"circster"},{key:"total_gap",label:"Gap [0-1]",type:"float",value:.4,view:"circster",hidden:!0}]),new Se({el:o()("#center .unified-panel-body"),genome:e,model:t}).render(),o()("#center .unified-panel-header-inner").append(`${window.galaxy_config.app.viz_config.title} ${window.galaxy_config.app.viz_config.dbkey}`);var n=$([{icon_class:"plus-button",title:(0,M.ZP)("Add tracks"),on_click:function(){we.select_datasets({dbkey:t.get("dbkey")},(e=>{t.add_tracks(e)}))}},{icon_class:"gear",title:(0,M.ZP)("Settings"),on_click:function(){new Z.ConfigSettingCollectionView({collection:t.get("config")}).render_in_modal("Configure Visualization")}},{icon_class:"disk--arrow",title:(0,M.ZP)("Save"),on_click:function(){const e=(0,a.Bz)();e.modal.show({title:(0,M.ZP)("Saving..."),body:"progress"}),o().ajax({url:`${(0,_.getAppRoot)()}visualization/save`,type:"POST",dataType:"json",data:{id:t.get("vis_id"),title:t.get("title"),dbkey:t.get("dbkey"),type:"trackster",vis_json:JSON.stringify(t)}}).success((n=>{e.modal.hide(),t.set("vis_id",n.vis_id)})).error((()=>{e.modal.show({title:(0,M.ZP)("Could Not Save"),body:"Could not save visualization. Please try again later.",buttons:{Cancel:function(){e.modal.hide()}}})}))}},{icon_class:"cross-circle",title:(0,M.ZP)("Close"),on_click:function(){window.top.location=`${(0,_.getAppRoot)()}visualizations/list`}}],{tooltip_config:{placement:"bottom"}});n.$el.attr("style","float: right"),o()("#center .unified-panel-header-inner").append(n.$el),o()(".menu-button").tooltip({placement:"bottom"})}});const Ae={GalaxyApp:Oe};n(71143),n(93384),n(50450),n(45215),n(24717),n(89928),n(47160);var Ie=o();Ie.fn.make_text_editable=function(e){var t="num_cols"in e?e.num_cols:30,n="num_rows"in e?e.num_rows:4,i="use_textarea"in e&&e.use_textarea,o="on_finish"in e?e.on_finish:null,a="help_text"in e?e.help_text:null;const s="data_description"in e?e.data_description:null;var r=Ie(this);return r.addClass("editable-text").click((function(a){if(!(Ie(this).children(":input").length>0)){r.removeClass("editable-text");var l,d,c=e=>{r.find(":input").remove(),""!==e?r.text(e):r.html("<br>"),r.addClass("editable-text"),o&&o(e)},u="cur_text"in e?e.cur_text:r.text();i?(l=Ie("<textarea/>").attr({rows:n,cols:t}).text(Ie.trim(u)).keyup((e=>{27===e.keyCode&&c(u)})),d=Ie("<button/>").addClass("btn-sm float-right").text("Done").click((()=>(c(l.val()),!1)))):l=Ie("<input type='text'/>").attr({value:Ie.trim(u),size:t}).blur((e=>{const t=Ie(e.currentTarget).val();c(t)})).keyup((e=>{27===e.keyCode?c(u):13===e.keyCode&&Ie(e.currentTarget).trigger("blur"),e.stopPropagation()})),r.text(""),r.append(l),d&&r.append(d),null!=s&&l.attr("data-description",s),l.focus(),l.select(),a.stopPropagation()}})),a&&r.attr("title",a).tooltip(),r};var Pe=n(26069),Re=n(47047),je=we.GenomeDataManager.extend({load_data:function(e,t,n,i){var a=o().Deferred();this.set_data(e,a);var s=`${(0,_.getAppRoot)()}datasets/${this.get("dataset").id}/display`,r=this;return o().when(Re.makeBwg(s)).then(((t,n)=>{o().when(t.readWigData(e.get("chrom"),e.get("start"),e.get("end"))).then((t=>{var n=[],i={max:Number.MIN_VALUE};t.forEach((e=>{i.max!==e.min-1&&(n.push([i.max+1,0]),n.push([e.min-2,0])),n.push([e.min-1,e.score]),n.push([e.max,e.score]),i=e}));var o={data:n,region:e,dataset_type:"bigwig"};r.set_data(e,o),a.resolve(o)}))})),a}});const Ye={BBIDataManager:je};var He=r().Model.extend({defaults:{name:null,label:null,type:null,value:null,html:null,num_samples:5},initialize:function(e){this.attributes.html=unescape(this.attributes.html)},copy:function(){return new He(this.toJSON())},set_value:function(e){this.set("value",e||"")}}),Ne=r().Collection.extend({model:He}),Fe=He.extend({}),Be=He.extend({set_value:function(e){this.set("value",parseInt(e,10))},get_samples:function(){return Y.scale.linear().domain([this.get("min"),this.get("max")]).ticks(this.get("num_samples"))}}),$e=Be.extend({set_value:function(e){this.set("value",parseFloat(e))}}),ze=He.extend({get_samples:function(){return u.default.map(this.get("options"),(e=>e[0]))}});He.subModelTypes={integer:Be,float:$e,data:Fe,select:ze};var We=r().Model.extend({defaults:{id:null,name:null,description:null,target:null,inputs:[],outputs:[]},urlRoot:`${(0,_.getAppRoot)()}api/tools`,initialize:function(e){this.set("inputs",new Ne(u.default.map(e.inputs,(e=>new(He.subModelTypes[e.type]||He)(e)))))},toJSON:function(){var e=r().Model.prototype.toJSON.call(this);return e.inputs=this.get("inputs").map((e=>e.toJSON())),e},remove_inputs:function(e){var t=this.get("inputs").filter((t=>-1!==e.indexOf(t.get("type"))));this.get("inputs").remove(t)},copy:function(e){var t=new We(this.toJSON());if(e){var n=new(r().Collection);t.get("inputs").each((e=>{e.get_samples()&&n.push(e)})),t.set("inputs",n)}return t},apply_search_results:function(e){return-1!==u.default.indexOf(e,this.attributes.id)?this.show():this.hide(),this.is_visible()},set_input_value:function(e,t){this.get("inputs").find((t=>t.get("name")===e)).set("value",t)},set_input_values:function(e){var t=this;u.default.each(u.default.keys(e),(n=>{t.set_input_value(n,e[n])}))},run:function(){return this._run()},rerun:function(e,t){return this._run({action:"rerun",target_dataset_id:e.id,regions:t})},get_inputs_dict:function(){var e={};return this.get("inputs").each((t=>{e[t.get("name")]=t.get("value")})),e},_run:function(e){var t=u.default.extend({tool_id:this.id,inputs:this.get_inputs_dict()},e),n=o().Deferred(),i=new W.ServerStateDeferred({ajax_settings:{url:this.urlRoot,data:JSON.stringify(t),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(e){return"pending"!==e}});return o().when(i.go()).then((e=>{n.resolve(new ie(e))})),n}});u.default.extend(We.prototype,{hidden:!1,show:function(){this.set("hidden",!1)},hide:function(){this.set("hidden",!0)},toggle:function(){this.set("hidden",!this.get("hidden"))},is_visible:function(){return!this.attributes.hidden}});var Ue=r().View.extend({className:"toolForm",render:function(){this.$el.children().remove(),this.$el.append(Ve.tool_form(this.model.toJSON()))}}),Ve={tool_form:u.default.template(['<div class="toolFormTitle"><%- tool.name %> (version <%- tool.version %>)</div>','<div class="toolFormBody">',"<% _.each( tool.inputs, function( input ){ %>",'<div class="form-row">','<label for="<%- input.name %>"><%- input.label %>:</label>','<div class="form-row-input">',"<%= input.html %>","</div>",'<div class="toolParamHelp" style="clear: both;">',"<%- input.help %>","</div>",'<div style="clear: both;"></div>',"</div>","<% }); %>","</div>",'<div class="form-row form-actions">','<input type="submit" class="btn btn-primary" name="runtool_btn" value="Execute" />',"</div>",'<div class="toolHelp">','<div class="toolHelpBody"><% tool.help %></div>',"</div>"].join(""),{variable:"tool"})};const qe={ToolParameter:He,IntegerToolParameter:Be,SelectToolParameter:ze,Tool:We,ToolFormView:Ue};var Ze=function(e){this.manager=null,this.name=e.name,this.index=e.index,this.tool_id=e.tool_id,this.tool_exp_name=e.tool_exp_name};u.default.extend(Ze.prototype,{to_dict:function(){return{name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name}}});var Ge=(e,t,n)=>o()("<a/>").attr("href","javascript:void(0);").attr("title",e).addClass("icon-button").addClass(t).tooltip().click(n),Je=function(e){Ze.call(this,e),this.low="low"in e?e.low:-Number.MAX_VALUE,this.high="high"in e?e.high:Number.MAX_VALUE,this.min="min"in e?e.min:Number.MAX_VALUE,this.max="max"in e?e.max:-Number.MAX_VALUE,this.container=null,this.slider=null,this.slider_label=null;var t=this;t.parent_div=o()("<div/>").addClass("filter-row slider-row");var n=o()("<div/>").addClass("elt-label").appendTo(t.parent_div);o()("<span/>").addClass("slider-name").text(`${t.name}  `).appendTo(n);var i=o()("<span/>").text(`${this.low}-${this.high}`),a=o()("<span/>").addClass("slider-value").appendTo(n).append("[").append(i).append("]");t.values_span=i;var s,r,l,d=o()("<div/>").addClass("slider").appendTo(t.parent_div);t.control_element=o()("<div/>").attr("id",`${t.name}-filter-control`).appendTo(d),t.control_element.slider({range:!0,min:this.min,max:this.max,step:this.get_slider_step(this.min,this.max),values:[this.low,this.high],slide:function(e,n){t.slide(e,n)},change:function(e,n){t.control_element.slider("option","slide").call(t.control_element,e,n)}}),t.slider=t.control_element,t.slider_label=i,s=a,r=i,l=t.control_element,s.click((function(){var e=r.text(),t=parseFloat(l.slider("option","max")),n=t<=1?4:t<=1e6?t.toString().length:6,i=!1,a=o()(this).parents(".slider-row");a.addClass("input"),l.slider("option","values")&&(n=2*n+1,i=!0),r.text(""),o()("<input type='text'/>").attr("size",n).attr("maxlength",n).attr("value",e).appendTo(r).focus().select().click((e=>{e.stopPropagation()})).blur((function(){o()(this).remove(),r.text(e),a.removeClass("input")})).keyup((function(e){if(27===e.keyCode)o()(this).trigger("blur");else if(13===e.keyCode){var t=l.slider("option","min"),n=l.slider("option","max"),s=e=>isNaN(e)||e>n||e<t,r=o()(this).val();if(i){if(r=r.split("-"),s((r=[parseFloat(r[0]),parseFloat(r[1])])[0])||s(r[1]))return alert(`Parameter value must be in the range [${t}-${n}]`),o()(this)}else if(s(r=parseFloat(r)))return alert(`Parameter value must be in the range [${t}-${n}]`),o()(this);l.slider(i?"values":"value",r),a.removeClass("input")}}))}));var c=o()("<div/>").addClass("display-controls").appendTo(t.parent_div);this.transparency_icon=Ge("Use filter for data transparency","layer-transparent",(()=>{t.manager.alpha_filter!==t?(t.manager.alpha_filter=t,t.manager.parent_div.find(".layer-transparent").removeClass("active").hide(),t.transparency_icon.addClass("active").show()):(t.manager.alpha_filter=null,t.transparency_icon.removeClass("active")),t.manager.track.request_draw({force:!0,clear_after:!0})})).appendTo(c).hide(),this.height_icon=Ge("Use filter for data height","arrow-resize-090",(()=>{t.manager.height_filter!==t?(t.manager.height_filter=t,t.manager.parent_div.find(".arrow-resize-090").removeClass("active").hide(),t.height_icon.addClass("active").show()):(t.manager.height_filter=null,t.height_icon.removeClass("active")),t.manager.track.request_draw({force:!0,clear_after:!0})})).appendTo(c).hide(),t.parent_div.hover((()=>{t.transparency_icon.show(),t.height_icon.show()}),(()=>{t.manager.alpha_filter!==t&&t.transparency_icon.hide(),t.manager.height_filter!==t&&t.height_icon.hide()})),o()("<div style='clear: both;'/>").appendTo(t.parent_div)};u.default.extend(Je.prototype,{to_dict:function(){var e=Ze.prototype.to_dict.call(this);return u.default.extend(e,{type:"number",min:this.min,max:this.max,low:this.low,high:this.high})},copy:function(){return new Je({name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name})},get_slider_step:function(e,t){return t-e<=2?.01:1},slide:function(e,t){var n=t.values;this.values_span.text(`${n[0]}-${n[1]}`),this.low=n[0],this.high=n[1];var i=this;setTimeout((()=>{n[0]===i.low&&n[1]===i.high&&i.manager.track.request_draw({force:!0,clear_after:!0})}),25)},applies_to:function(e){return e.length>this.index},_keep_val:function(e){return isNaN(e)||e>=this.low&&e<=this.high},keep:function(e){if(!this.applies_to(e))return!0;var t=e[this.index];if(t instanceof Array){for(var n=!0,i=0;i<t.length;i++)if(!this._keep_val(t[i])){n=!1;break}return n}return this._keep_val(e[this.index])},update_attrs:function(e){var t=!1;if(!this.applies_to(e))return t;var n=e[this.index];n instanceof Array||(n=[n]);for(var i=0;i<n.length;i++){var o=n[i];o<this.min&&(this.min=Math.floor(o),t=!0),o>this.max&&(this.max=Math.ceil(o),t=!0)}return t},update_ui_elt:function(){this.min<this.max?this.parent_div.show():this.parent_div.hide();var e=this.slider.slider("option","min"),t=this.slider.slider("option","max");(this.min<e||this.max>t)&&(this.slider.slider("option","min",this.min),this.slider.slider("option","max",this.max),this.slider.slider("option","step",this.get_slider_step(this.min,this.max)),this.slider.slider("option","values",[this.min,this.max]))}});var Ke=function(e,t){if(this.track=e,this.alpha_filter=null,this.height_filter=null,this.filters=[],this.parent_div=o()("<div/>").addClass("filters").hide(),this.parent_div.bind("drag",(e=>{e.stopPropagation()})).click((e=>{e.stopPropagation()})).bind("dblclick",(e=>{e.stopPropagation()})).bind("keydown",(e=>{e.stopPropagation()})),t&&"filters"in t){for(var n,i=("alpha_filter"in t?t.alpha_filter:null),a=("height_filter"in t?t.height_filter:null),s=t.filters,r=0;r<s.length;r++)"number"===s[r].type?(n=new Je(s[r]),this.add_filter(n),n.name===i&&(this.alpha_filter=n,n.transparency_icon.addClass("active").show()),n.name===a&&(this.height_filter=n,n.height_icon.addClass("active").show())):console.log("ERROR: unsupported filter: ",s[r]);"visible"in t&&t.visible&&this.parent_div.show()}if(0!==this.filters.length){var l=o()("<div/>").addClass("param-row").appendTo(this.parent_div),d=o()("<input type='submit'/>").attr("value","Run on complete dataset").appendTo(l),c=this;d.click((()=>{c.run_on_dataset()}))}};u.default.extend(Ke.prototype,{show:function(){this.parent_div.show()},hide:function(){this.parent_div.hide()},toggle:function(){this.parent_div.toggle()},visible:function(){return this.parent_div.is(":visible")},to_dict:function(){for(var e,t={},n=[],i=0;i<this.filters.length;i++)e=this.filters[i],n.push(e.to_dict());return t.filters=n,t.alpha_filter=this.alpha_filter?this.alpha_filter.name:null,t.height_filter=this.height_filter?this.height_filter.name:null,t.visible=this.parent_div.is(":visible"),t},copy:function(e){for(var t=new Ke(e),n=0;n<this.filters.length;n++)t.add_filter(this.filters[n].copy());return t},add_filter:function(e){e.manager=this,this.parent_div.append(e.parent_div),this.filters.push(e)},remove_all:function(){this.filters=[],this.parent_div.children().remove()},init_filters:function(){for(var e=0;e<this.filters.length;e++){this.filters[e].update_ui_elt()}},clear_filters:function(){for(var e=0;e<this.filters.length;e++){var t=this.filters[e];t.slider.slider("option","values",[t.min,t.max])}this.alpha_filter=null,this.height_filter=null,this.parent_div.find(".icon-button").hide()},run_on_dataset:function(){for(var e,t,n=((e,t,n)=>(t in e||(e[t]=n),e[t])),i={},s=0;s<this.filters.length;s++)(e=this.filters[s]).tool_id&&(e.min!==e.low&&((t=n(i,e.tool_id,[]))[t.length]=`${e.tool_exp_name} >= ${e.low}`),e.max!==e.high&&((t=n(i,e.tool_id,[]))[t.length]=`${e.tool_exp_name} <= ${e.high}`));var r=[];for(var l in i)r[r.length]=[l,i[l]];!function e(t,n){var i=n[0],s=i[0],r={cond:`(${i[1].join(") and (")})`,input:t,target_dataset_id:t,tool_id:s};n=n.slice(1),o().getJSON(run_tool_url,r,(t=>{const i=(0,a.Bz)();t.error?i.modal.show({title:(0,M.ZP)("Filter Dataset"),body:`Error running tool ${s}`,buttons:{Close:i.modal.hide()}}):0===n.length?i.modal.show({title:(0,M.ZP)("Filtering Dataset"),body:"Filter(s) are running on the complete dataset. Outputs are in dataset's history.",buttons:{Close:i.modal.hide()}}):e(t.dataset_id,n)}))}(this.track.dataset_id,r)}});const Xe=Ke,Qe=Je,et=1001,tt=1002,nt=1003,it=1004,ot=1005,at=1006,st="#ccc";function rt(e,t){var n=e[0],i=e[1],o=t[0],a=t[1];return n<o?i<=o?et:i<=a?nt:tt:n>a?at:i<=a?ot:it}function lt(e,t){var n=rt(e,t);return n!==et&&n!==at}function dt(e,t,n,i){var o=t-i/2,a=t+i/2,s=n-Math.sqrt(3*i/2);e.beginPath(),e.moveTo(o,s),e.lineTo(a,s),e.lineTo(t,n),e.lineTo(o,s),e.strokeStyle=this.fillStyle,e.fill(),e.stroke(),e.closePath()}class ct{constructor(e){this.default_val=e||1}gen_val(e){return this.default_val}}class ut{constructor(e){this.incomplete_features=e.incomplete_features,this.feature_mapper=e.feature_mapper}}class ht{constructor(e,t,n,i,o){this.data=e,this.default_prefs={},this.view_start=t,this.view_end=n,this.prefs=u.default.extend({},this.default_prefs,i),this.mode=o}static get default_prefs(){return{}}draw(e,t,n,i){}get_start_draw_pos(e,t){return this._chrom_pos_to_draw_pos(e,t,-.5)}get_end_draw_pos(e,t){return this._chrom_pos_to_draw_pos(e,t,.5)}get_draw_pos(e,t){return this._chrom_pos_to_draw_pos(e,t,0)}_chrom_pos_to_draw_pos(e,t,n){return Math.floor(t*(Math.max(0,e-this.view_start)+n))}}class pt{constructor(e){this.feature_positions={},this.slot_height=e,this.translation=0,this.y_translation=0}map_feature_data(e,t,n,i){this.feature_positions[t]||(this.feature_positions[t]=[]),this.feature_positions[t].push({data:e,x_start:n,x_end:i})}get_feature_data(e,t){var n,i=Math.floor((t-this.y_translation)/this.slot_height);if(!this.feature_positions[i])return null;e+=this.translation;for(var o=0;o<this.feature_positions[i].length;o++)if(e>=(n=this.feature_positions[i][o]).x_start&&e<=n.x_end)return n.data}}class ft extends ht{constructor(e,t,n,i,o,a,s){super(e,t,n,i,o),this.alpha_scaler=a||new ct,this.height_scaler=s||new ct,this.max_label_length=200}static get default_prefs(){return{block_color:"#FFF",connector_color:"#FFF"}}get_required_height(e,t){var n=this.get_row_height(),i=n,o=this.mode;return"no_detail"!==o&&"Squish"!==o&&"Pack"!==o||(n=e*i),n+this.get_top_padding(t)}get_top_padding(e){return 0}draw(e,t,n,i,o){e.save(),e.fillStyle=this.prefs.block_color,e.textAlign="right";for(var a,s=this.get_row_height(),r=new pt(s),l=[],d=0,c=this.data.length;d<c;d++){var u=this.data[d],h=u[0],p=u[1],f=u[2],m=o&&void 0!==o[h]?o[h].slot:null;("Dense"===this.mode||null!==m)&&p<this.view_end&&f>this.view_start&&(a=this.draw_element(e,this.mode,u,m,this.view_start,this.view_end,i,s,t),r.map_feature_data(u,m,a[0],a[1]),(p<this.view_start||f>this.view_end)&&l.push(u))}return e.restore(),r.y_translation=this.get_top_padding(t),new ut({incomplete_features:l,feature_mapper:r})}draw_element(e,t,n,i,o,a,s,r,l){return[0,0]}}class mt extends ft{constructor(e,t,n,i,o,a,s){super(e,t,n,i,o,a,s),this.draw_background_connector=!0,this.draw_individual_connectors=!1}get_row_height(){var e=this.mode;return"Dense"===e?10:"no_detail"===e?3:"Squish"===e?5:10}draw_element(e,t,n,i,o,a,s,r,l){var d=n[1],c=n[2],u=n[3],h=n[4],p=Math.floor(Math.max(0,(d-o-.5)*s)),f=Math.ceil(Math.min(l,Math.max(0,(c-o-.5)*s))),m=p,_=f,v=("Dense"===t?0:0+i)*r+this.get_top_padding(l),g=null,y=null,b=h&&"+"!==h&&"."!==h?this.prefs.reverse_strand_color:this.prefs.block_color,w=this.prefs.label_color;if(e.globalAlpha=this.alpha_scaler.gen_val(n),"Dense"===t&&(i=1),"no_detail"===t)e.fillStyle=b,e.fillRect(p,v+5,f-p,1);else{var k,C,x=n[5],S=n[6],M=n[7],T=!0;if(x&&S&&(g=Math.floor(Math.max(0,(x-o)*s)),y=Math.ceil(Math.min(l,Math.max(0,(S-o)*s)))),"Squish"===t?(k=1,C=3,T=!1):(k=5,C=9),M){var L,D;"Squish"===t||"Dense"===t?(L=v+Math.floor(1.5)+1,D=1):h?(L=v,D=C):(L+=2.5,D=1),this.draw_background_connector&&("Squish"===t||"Dense"===t?e.fillStyle=st:h?"+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand")):e.fillStyle=st,e.fillRect(p,L,f-p,D));for(var E=0,O=M.length;E<O;E++){var A,I,P=M[E],R=Math.floor(Math.max(0,(P[0]-o-.5)*s)),j=Math.ceil(Math.min(l,Math.max((P[1]-o-.5)*s)));if(!(R>j)){if(e.fillStyle=b,e.fillRect(R,v+(C-k)/2+1,j-R,k),void 0!==g&&S>x&&!(R>y||j<g)){var Y=Math.max(R,g),H=Math.min(j,y);e.fillRect(Y,v+1,H-Y,C),1===M.length&&"Pack"===t&&("+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand_inv"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand_inv")),Y+14<H&&(Y+=2,H-=2),e.fillRect(Y,v+1,H-Y,C))}this.draw_individual_connectors&&A&&this.draw_connector(e,A,I,R,j,v),A=R,I=j}}if("Pack"===t){e.globalAlpha=1,e.fillStyle="white";var N=this.height_scaler.gen_val(n),F=Math.ceil(C*N),B=Math.round((C-F)/2);1!==N&&(e.fillRect(p,L+1,f-p,B),e.fillRect(p,L+C-B+1,f-p,B))}}else e.fillStyle=b,e.fillRect(p,v+1,f-p,C),h&&T&&("+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand_inv"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand_inv")),e.fillRect(p,v+1,f-p,C));e.globalAlpha=1,u&&"Pack"===t&&d>o&&(e.fillStyle=w,0===o&&p-e.measureText(u).width<0?(e.textAlign="left",e.fillText(u,f+2,v+8,this.max_label_length),_+=e.measureText(u).width+2):(e.textAlign="right",e.fillText(u,p-2,v+8,this.max_label_length),m-=e.measureText(u).width+2))}return e.globalAlpha=1,[m,_]}}class _t{constructor(e,t){Array.isArray(e)?this.rgb=e:6==e.length?this.rgb=e.match(/.{2}/g).map((e=>parseInt(e,16))):7==e.length?this.rgb=e.substring(1,7).match(/.{2}/g).map((e=>parseInt(e,16))):this.rgb=e.split("").map((e=>parseInt(e+e,16))),this.alpha="number"==typeof t?t:1}eval(){return this}toCSS(){return this.alpha<1?`rgba(${this.rgb.map((e=>Math.round(e))).concat(this.alpha).join(", ")})`:`#${this.rgb.map((e=>1===(e=((e=Math.round(e))>255?255:e<0?0:e).toString(16)).length?`0${e}`:e)).join("")}`}toHSL(){var e,t,n=this.rgb[0]/255,i=this.rgb[1]/255,o=this.rgb[2]/255,a=this.alpha,s=Math.max(n,i,o),r=Math.min(n,i,o),l=(s+r)/2,d=s-r;if(s===r)e=t=0;else{switch(t=l>.5?d/(2-s-r):d/(s+r),s){case n:e=(i-o)/d+(i<o?6:0);break;case i:e=(o-n)/d+2;break;case o:e=(n-i)/d+4}e/=6}return{h:360*e,s:t,l,a}}toARGB(){return`#${[Math.round(255*this.alpha)].concat(this.rgb).map((e=>1===(e=((e=Math.round(e))>255?255:e<0?0:e).toString(16)).length?`0${e}`:e)).join("")}`}mix(e,t){var n=this,i=t,o=2*i-1,a=n.toHSL().a-e.toHSL().a,s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,r=1-s,l=[n.rgb[0]*s+e.rgb[0]*r,n.rgb[1]*s+e.rgb[1]*r,n.rgb[2]*s+e.rgb[2]*r],d=n.alpha*i+e.alpha*(1-i);return new _t(l,d)}}class vt{constructor(e,t,n,i){this.start_color=new _t(e),this.end_color=new _t(t),this.start_value=n,this.end_value=i,this.value_range=i-n}map_value(e){return e=Math.max(e,this.start_value),e=((e=Math.min(e,this.end_value))-this.start_value)/this.value_range,this.start_color.mix(this.end_color,1-e).toCSS()}}class gt{constructor(e,t,n,i,o){this.positive_ramp=new vt(t,n,0,o),this.negative_ramp=new vt(t,e,0,-i),this.start_value=i,this.end_value=o}map_value(e){return e=Math.max(e,this.start_value),(e=Math.min(e,this.end_value))>=0?this.positive_ramp.map_value(e):this.negative_ramp.map_value(-e)}}class yt{constructor(e,t,n,i){this.ctx=e,this.row_height=t,this.px_per_base=n,this.draw_details=("Pack"===i||"Auto"===i)&&n>=e.canvas.manager.char_width_px,this.delete_details_thickness=.2}draw_deletion(e,t,n){this.ctx.fillStyle="black";var i=(this.draw_details?this.delete_details_thickness:1)*this.row_height;t+=.5*(this.row_height-i),this.ctx.fillRect(e,t,n*this.px_per_base,i)}}const bt={Scaler:ct,LinePainter:class extends ht{constructor(e,t,n,i,o){super(e,t,n,i,o)}static get default_prefs(){return{min_value:void 0,max_value:void 0,mode:"Histogram",color:"#000",overflow_color:"#F66"}}draw(e,t,n,i){var o=!1,a=this.prefs.min_value,s=this.prefs.max_value,r=s-a,l=n,d=this.view_start,c=this.mode,h=this.data;e.save();var p,f,m,_=Math.round(n+a/r*n);"Intensity"!==c&&(e.fillStyle="#aaa",e.fillRect(0,_,t,1)),e.beginPath(),m=h.length>1?u.default.map(h.slice(0,-1),((e,t)=>Math.ceil((h[t+1][0]-h[t][0])*i))):[10];for(var v,g=this.prefs.block_color||this.prefs.color,y=parseInt(g.slice(1),16),b=(16711680&y)>>16,w=(65280&y)>>8,k=255&y,C=!1,x=!1,S=0,M=h.length;S<M;S++)if(e.fillStyle=e.strokeStyle=g,C=x=!1,v=m[S],p=Math.floor((h[S][0]-d-.5)*i),null!==(f=h[S][1])){if(f<a?(x=!0,f=a):f>s&&(C=!0,f=s),"Histogram"===c)f=Math.round(f/r*l),e.fillRect(p,_,v,-f);else if("Intensity"===c){var T=(f-a)/r,L=Math.round(b+(255-b)*(1-T)),D=Math.round(w+(255-w)*(1-T)),E=Math.round(k+(255-k)*(1-T));e.fillStyle=`rgb(${L},${D},${E})`,e.fillRect(p,0,v,l)}else f=Math.round(l-(f-a)/r*l),o?e.lineTo(p,f):(o=!0,"Filled"===c?(e.moveTo(p,l),e.lineTo(p,f)):e.moveTo(p,f));var O;if(e.fillStyle=this.prefs.overflow_color,C||x)"Histogram"===c||"Intensity"===c?O=v:(p-=2,O=4),C&&e.fillRect(p,0,O,3),x&&e.fillRect(p,l-3,O,3);e.fillStyle=g}else o&&"Filled"===c&&e.lineTo(p,l),o=!1;"Filled"===c?(o&&(e.lineTo(p,_),e.lineTo(0,_)),e.fill()):e.stroke(),e.restore()}},LinkedFeaturePainter:mt,ReadPainter:class extends ft{constructor(e,t,n,i,o,a,s,r,l){super(e,t,n,i,o,a,s),this.ref_seq=r?r.data:null,this.base_color_fn=l}get_row_height(){var e,t=this.mode;return"Dense"===t?e=10:"Squish"===t?e=5:(e=10,this.prefs.show_insertions&&(e*=2)),e}_parse_cigar(e){var t=[[0,0]],n=t[0],i=0,o=u.default.map(e.match(/[0-9]+[MIDNSHP=X]/g),(e=>{var o=parseInt(e.slice(0,-1),10),a=e.slice(-1);return"N"===a?0!==n[1]&&(n=[i+o,i+o],t.push(n)):-1==="ISHP".indexOf(a)&&(n[1]+=o,i+=o),["MIDNSHP=X".indexOf(a),o]}));return{blocks:t,cigar:o}}draw_read(e,t,n,i,o,a,s,r,l,d){var c=(e,t,n)=>(-1!=="M=NXD".indexOf(t)&&(e+=n),e),u=(e,t,n)=>(-1!=="IX".indexOf(t)&&(e+=n),e),h=e=>Math.floor(Math.max(0,(e-o-.5)*n));e.textAlign="center";var p,f,m,_,v,g,y=[o,a],b=0,w=0,k=Math.round(n/2),C=e.canvas.manager.char_width_px,x="+"===l?this.prefs.detail_block_color:this.prefs.reverse_strand_color,S="Pack"===t,M=S?9:3,T=i+1,L=new yt(e,M,n,t),D=[],E=this._parse_cigar(r);r=E.cigar,p=E.blocks;for(var O=0;O<p.length;O++){var A=p[O];lt([s+A[0],s+A[1]],y)&&((f=h(s+A[0]))===(m=h(s+A[1]))&&(m+=1),e.fillStyle=x,e.fillRect(f,T,m-f,M))}for(var I=0,P=r.length;I<P;I++){var R=r[I],j="MIDNSHP=X"[R[0]],Y=R[1],H=s+b;if(f=h(H),m=h(H+Y),lt([H,H+Y],y))switch(f===m&&(m+=1),j){case"H":case"S":case"P":break;case"M":b+=Y;break;case"=":case"X":var N="";"X"===j?N=d.slice(w,w+Y):this.ref_seq&&(N=this.ref_seq.slice(Math.max(0,H-o),Math.min(H-o+Y,a-o)));var F=Math.max(H,o);for(let t=0;t<N.length;t++)if(N&&!this.prefs.show_differences||"X"===j){const a=Math.floor(Math.max(0,(F+t-o)*n));e.fillStyle=this.base_color_fn(N[t]),S&&n>C?e.fillText(N[t],a,i+9):n>.05&&e.fillRect(a-k,T,Math.max(1,Math.round(n)),M)}"X"===j&&(w+=Y),b+=Y;break;case"N":e.fillStyle=st,e.fillRect(f,T+(M-1)/2,m-f,1),b+=Y;break;case"D":L.draw_deletion(f,T,Y),b+=Y;break;case"I":var B=f-k;if(lt([H,H+Y],y)){var $=d.slice(w,w+Y);if(this.prefs.show_insertions){var z=f-(m-f)/2;if(("Pack"===t||"Auto"===this.mode)&&void 0!==d&&n>C){switch(e.fillStyle="yellow",e.fillRect(z-k,i-9,m-f,9),D[D.length]={type:"triangle",data:[B,i+4,5]},e.fillStyle=st,rt([H,H+Y],y)){case nt:$=$.slice(o-H);break;case it:$=$.slice(0,H-a);break;case ot:break;case tt:$=$.slice(o-H,H-a)}for(let t=0,a=$.length;t<a;t++){const a=Math.floor(Math.max(0,(H+t-o)*n));e.fillText($[t],a-(m-f)/2,i)}}else e.fillStyle="yellow",e.fillRect(z,i+("Dense"!==this.mode?2:5),m-f,"Dense"!==t?3:9)}else("Pack"===t||"Auto"===this.mode)&&void 0!==d&&n>C&&D.push({type:"text",data:[$.length,B,i+9]})}w+=Y}else b=c(b,j,Y),w=u(w,j,Y)}e.fillStyle="yellow";for(let t=0;t<D.length;t++)v=(_=D[t]).type,g=_.data,"text"===v?(e.save(),e.font=`bold ${e.font}`,e.fillText(g[0],g[1],g[2]),e.restore()):"triangle"===v&&dt(e,g[0],g[1],g[2])}draw_element(e,t,n,i,o,a,s,r,l){var d=n[1],c=n[2],u=n[3],h=Math.floor(Math.max(-.5*s,(d-o-.5)*s)),p=Math.ceil(Math.min(l,Math.max(0,(c-o-.5)*s))),f=("Dense"===t?0:0+i)*r,m="Pack"===t?9:3;if(n[5]instanceof Array){var _=!0;n[4][1]>=o&&n[4][0]<=a&&n[4][2]?this.draw_read(e,t,s,f,o,a,n[4][0],n[4][2],n[4][3],n[4][4]):_=!1,n[5][1]>=o&&n[5][0]<=a&&n[5][2]?this.draw_read(e,t,s,f,o,a,n[5][0],n[5][2],n[5][3],n[5][4]):_=!1;var v=Math.ceil(Math.min(l,Math.max(-.5*s,(n[4][1]-o-.5)*s))),g=Math.floor(Math.max(-.5*s,(n[5][0]-o-.5)*s));if(_&&g>v){e.fillStyle=st;var y=f+1+(m-1)/2;!function(e,t,n,i,o,a){void 0===a&&(a=4);var s,r=i-t,l=o-n,d=Math.floor(Math.sqrt(r*r+l*l)/a),c=r/d,u=l/d;for(s=0;s<d;s++,t+=c,n+=u)s%2==0&&e.fillRect(t,n,a,1)}(e,v,y,g,y)}}else this.draw_read(e,t,s,f,o,a,d,n[4],n[5],n[6]);return"Pack"===t&&d>=o&&"."!==u&&(e.fillStyle=this.prefs.label_color,0===o&&h-e.measureText(u).width<0?(e.textAlign="left",e.fillText(u,p+2,f+9,this.max_label_length)):(e.textAlign="right",e.fillText(u,h-2,f+9,this.max_label_length))),[0,0]}},ArcLinkedFeaturePainter:class extends mt{constructor(e,t,n,i,o,a,s){super(e,t,n,i,o,a,s),this.longest_feature_length=this.calculate_longest_feature_length(),this.draw_background_connector=!1,this.draw_individual_connectors=!0}calculate_longest_feature_length(){var e=0;for(let o=0,a=this.data.length;o<a;o++){var t=this.data[o],n=t[1],i=t[2];e=Math.max(e,i-n)}return e}get_top_padding(e){var t=e/(this.view_end-this.view_start);return Math.min(128,Math.ceil(this.longest_feature_length/2*t))}draw_connector(e,t,n,i,o,a){var s=(n+i)/2;i-s>0&&(e.beginPath(),e.arc(s,a,i-s,Math.PI,0),e.stroke())}},DiagonalHeatmapPainter:class extends ht{constructor(e,t,n,i,o){var a,s;if(super(e,t,n,i,o),void 0===this.prefs.min_value){var r=1/0;for(a=0,s=this.data.length;a<s;a++)r=Math.min(r,this.data[a][6]);this.prefs.min_value=r}if(void 0===this.prefs.max_value){var l=-1/0;for(a=0,s=this.data.length;a<s;a++)l=Math.max(l,this.data[a][6]);this.prefs.max_value=l}}static get default_prefs(){return{min_value:void 0,max_value:void 0,mode:"Heatmap",pos_color:"#FF8C00",neg_color:"#4169E1"}}draw(e,t,n,i){var o,a,s,r,l,d,c=this.prefs.min_value,u=this.prefs.max_value,h=this.view_start,p=1/Math.sqrt(2),f=new gt(this.prefs.neg_color,"#FFFFFF",this.prefs.pos_color,c,u),m=e=>(e-h)*i;e.save(),e.rotate(-45*Math.PI/180),e.scale(p,p);for(var _=0,v=this.data.length;_<v;_++)a=m((o=this.data[_])[1]),s=m(o[2]),r=m(o[4]),l=m(o[5]),d=o[6],e.fillStyle=f.map_value(d),e.fillRect(a,r,s-a,l-r);e.restore()}},VariantPainter:class extends ht{constructor(e,t,n,i,o,a){super(e,t,n,i,o),this.base_color_fn=a,this.divider_height=1}get_row_height(){var e=this.mode;return"Dense"===e?10:"Squish"===e?5:10}get_required_height(e){var t=this.prefs.summary_height;return e>1&&this.prefs.show_sample_data&&(t+=this.divider_height+e*this.get_row_height()),t}draw(e,t,n,i){e.save();var o,a,s,r,l,d,c,h,p,f,m,_=(e,t)=>{var n=e.length,i=t.length,o=0,a=1,s=null;return"-"===t?(s="deletion",a=e.length):0===e.indexOf(t)&&n>i?(s="deletion",a=n-i,o=i):0===t.indexOf(e)&&n<i&&(s="insertion",a=i-n,o=i),null!==s?{type:s,start:o,len:a}:{}},v=Math.max(1,Math.floor(i)),g=this.data.length?this.data[0][7].split(",").length:0,y="Squish"===this.mode?5:10,b=i<.1?y:"Squish"===this.mode?3:9,w=!0,k=new yt(e,y,i,this.mode);1===g&&(y=b=i<e.canvas.manager.char_width_px?this.prefs.summary_height:y,k.row_height=y,w=!1),this.prefs.show_sample_data&&w&&(e.fillStyle="#F3F3F3",e.globalAlpha=1,e.fillRect(0,this.prefs.summary_height-this.divider_height,t,this.divider_height)),e.textAlign="center";for(var C=0;C<this.data.length;C++)if(a=(o=this.data[C])[1],s=o[3],r=[o[4].split(",")],l=o[7].split(","),d=o.slice(8),r=u.default.map(u.default.flatten(r),(e=>{var t={type:"snp",value:e,start:0},n=_(s,e);return u.default.extend(t,n)})),!(a<this.view_start||a>this.view_end)){if(w)for(e.fillStyle="#999999",e.globalAlpha=1,m=0;m<r.length;m++)for(h=this.get_start_draw_pos(a+r[m].start,i),e.fillRect(h,0,v,this.prefs.summary_height),p=this.prefs.summary_height,m=0;m<r.length;m++){e.fillStyle="deletion"===r[m].type?"black":this.base_color_fn(r[m].value);var x=d/l.length,S=Math.ceil(this.prefs.summary_height*x);e.fillRect(h,p-S,v,S),p-=S}if(this.prefs.show_sample_data)for(p=w?this.prefs.summary_height+this.divider_height:0,m=0;m<l.length;m++,p+=y)if(c=null,(f=l[m]?l[m].split(/\/|\|/):["0","0"])[0]===f[1]?"."===f[0]||"0"!==f[0]&&(c=r[parseInt(f[0],10)-1],e.globalAlpha=1):(c="0"!==f[0]?f[0]:f[1],c=r[parseInt(c,10)-1],e.globalAlpha=.5),c)if(h=this.get_start_draw_pos(a+c.start,i),"snp"===c.type){var M=c.value;e.fillStyle=this.base_color_fn(M),k.draw_details?e.fillText(M,this.get_draw_pos(a,i),p+y):e.fillRect(h,p+1,v,b)}else"deletion"===c.type&&k.draw_deletion(h,p+1,c.len)}e.restore()}}};var wt=u.default.extend,kt=function(e,t){this.slot=e,this.feature=t},Ct=function(e,t,n,i){this.slots={},this.start_end_dct={},this.w_scale=e,this.mode=t,this.include_label="Pack"===t,this.max_rows=n,this.measureText=i};wt(Ct.prototype,{_get_draw_coords:function(e){var t=Math.floor(e[1]*this.w_scale),n=Math.ceil(e[2]*this.w_scale),i=e[3];if(void 0!==i&&this.include_label){var o=this.measureText(i).width+7;t-o>=0?t-=o:n+=o}return[t,n]},_find_slot:function(e){for(var t=e[0],n=e[1],i=0;i<=this.max_rows;i++){var o=!1,a=this.start_end_dct[i];if(void 0!==a)for(var s=0,r=a.length;s<r;s++){var l=a[s];if(n>l[0]&&t<l[1]){o=!0;break}}if(!o)return i}return-1},slot_features:function(e){var t,n,i=this.start_end_dct,o=[],a=0;for(let i=0,h=e.length;i<h;i++){n=(t=e[i])[0];var s=this.slots[n];if(s){if(t[1]<s.feature[1]||s.feature[2]<t[2])for(var r=this._get_draw_coords(s.feature),l=this._get_draw_coords(t),d=this.start_end_dct[s.slot],c=0;c<d.length;c++){var u=d[c];u[0]===r[0]&&u[1]===r[1]&&(d[c]=l)}a=Math.max(a,this.slots[n].slot)}else o.push(i)}for(let s=0,r=o.length;s<r;s++){n=(t=e[o[s]])[0];var h=this._get_draw_coords(t),p=this._find_slot(h);p>=0&&(void 0===i[p]&&(i[p]=[]),i[p].push(h),this.slots[n]=new kt(p,t),a=Math.max(a,p))}return a+1}});const xt=Ct;const St={TrackHeaderView:r().View.extend({className:"track-header",initialize:function(){this.model.config.get("name").on("change:value",this.update_name,this),this.render()},render:function(){this.$el.append(o()("<div/>").addClass(this.model.drag_handle_class)),this.$el.append(o()("<div/>").addClass("track-name").text(this.model.config.get_value("name"))),this.action_icons={},this.render_action_icons(),this.$el.dblclick((e=>{e.stopPropagation()})),this.$el.append(o()("<div style='clear: both'/>"))},update_name:function(){this.$el.find(".track-name").text(this.model.config.get_value("name"))},render_action_icons:function(){var e=this;this.icons_div=o()("<div/>").addClass("track-icons").hide().appendTo(this.$el),u.default.each(this.model.action_icons_def,(t=>{e.add_action_icon(t.name,t.title,t.css_class,t.on_click_fn,t.prepend,t.hide)})),this.set_display_modes(this.model.display_modes)},add_action_icon:function(e,t,n,i,a,s){var r=this;this.action_icons[e]=o()("<a/>").attr("title",t).addClass("icon-button").addClass(n).tooltip().click((()=>{i(r.model)})).appendTo(this.icons_div),s&&this.action_icons[e].hide()},set_display_modes:function(e,t){if(e){this.model.display_modes=e,this.model.mode=t||this.model.config.get_value("mode")||this.model.display_modes[0],this.action_icons.mode_icon.attr("title",`Set display mode (now: ${this.mode})`);for(var n=this.model,i={},o=0,a=n.display_modes.length;o<a;o++){var s=n.display_modes[o];i[s]=(e=>()=>{n.change_mode(e)})(s)}(0,H.J)(this.action_icons.mode_icon,i)}}})};var Mt=u.default.extend,Tt={};function Lt(e,t){Tt[e.attr("id")]=t}function Dt(e,t,n,i){n=".group",Tt[e.attr("id")]=i,e.bind("drag",{handle:`.${t}`,relative:!0},(function(e,t){var i,a,s,r,l,d=o()(this).parent(),c=d.children(".track,.group"),u=Tt[o()(this).attr("id")];if(0!==(a=o()(this).parents(n)).length){r=(s=a.position().top)+a.outerHeight();var h=Tt[a.attr("id")];if(t.offsetY<s)return o()(this).insertBefore(a),h.remove_drawable(u),void h.container.add_drawable_before(u,h);if(t.offsetY>r)return o()(this).insertAfter(a),h.remove_drawable(u),void h.container.add_drawable(u)}for(a=null,l=0;l<c.length;l++)if(r=(s=(i=o()(c.get(l))).position().top)+i.outerHeight(),i.is(n)&&this!==i.get(0)&&t.offsetY>=s&&t.offsetY<=r)return t.offsetY-s<r-t.offsetY?i.find(".content-div").prepend(this):i.find(".content-div").append(this),u.container&&u.container.remove_drawable(u),void Tt[i.attr("id")].add_drawable(u);for(l=0;l<c.length&&(i=o()(c.get(l)),!(t.offsetY<i.position().top)||i.hasClass("reference-track")||i.hasClass("intro"));l++);l===c.length?this!==c.get(l-1)&&(d.append(this),Tt[d.attr("id")].move_drawable(u,l)):this!==c.get(l)&&(o()(this).insertBefore(c.get(l)),Tt[d.attr("id")].move_drawable(u,t.deltaY>0?l-1:l))})).bind("dragstart",(function(){o()(this).addClass("dragging")})).bind("dragend",(function(){o()(this).removeClass("dragging")}))}const Et=100,Ot="A converter for this dataset is not installed. Please check your datatypes_conf.xml file.",At=["Histogram","Line","Filled","Intensity"];function It(e,t){t||(t=0);var n=Math.pow(10,t);return Math.round(e*n)/n}var Pt=function(e,t,n){if(Pt.id_counter||(Pt.id_counter=0),this.id=Pt.id_counter++,this.view=e,this.container=t,this.drag_handle_class=n.drag_handle_class,this.is_overview=!1,this.action_icons={},this.config=Z.ConfigSettingCollection.from_models_and_saved_values(this.build_config_params(),n.prefs),this.config.get_value("name")||this.config.set_value("name",n.name),this.config_onchange&&this.config.on("change",this.config_onchange,this),this.container_div=this.build_container_div(),this.header_div=null,!1!==n.header){var i=new St.TrackHeaderView({model:this,id:this.id});this.header_div=i.$el,this.container_div.append(this.header_div);var o=i.icons_div;this.action_icons=i.action_icons,this.container_div.hover((()=>{o.show()}),(()=>{o.hide()}))}};Pt.prototype.action_icons_def=[{name:"toggle_icon",title:"Hide/show content",css_class:"toggle",on_click_fn:function(e){e.config.get_value("content_visible")?(e.action_icons.toggle_icon.addClass("toggle-expand").removeClass("toggle"),e.hide_contents(),e.config.set_value("content_visible",!1)):(e.action_icons.toggle_icon.addClass("toggle").removeClass("toggle-expand"),e.config.set_value("content_visible",!0),e.show_contents())}},{name:"settings_icon",title:(0,M.ZP)("Edit settings"),css_class:"gear",on_click_fn:function(e){new Z.ConfigSettingCollectionView({collection:e.config}).render_in_modal("Configure Track")}},{name:"remove_icon",title:(0,M.ZP)("Remove"),css_class:"remove-icon",on_click_fn:function(e){o()(".tooltip").remove(),e.remove()}}],Mt(Pt.prototype,{config_params:[{key:"name",label:"Name",type:"text",default_value:""},{key:"content_visible",type:"bool",default_value:!0,hidden:!0}],build_config_params:function(){return this.config_params},config_onchange:function(){},init:function(){},changed:function(){this.view.changed()},can_draw:function(){return!(!this.enabled||!this.config.get_value("content_visible"))},request_draw:function(){},_draw:function(e){},to_dict:function(){},set_name:function(e){this.old_name=this.config.get_value("name"),this.config.set_value("name",e)},revert_name:function(){this.old_name&&this.config.set_value("name",this.old_name)},remove:function(){this.changed(),this.container.remove_drawable(this);var e=this.view;this.container_div.hide(0,(function(){o()(this).remove(),e.update_intro_div()}))},build_container_div:function(){},update_icons:function(){},hide_contents:function(){},show_contents:function(){},get_drawables:function(){}});var Rt=function(e,t,n){Pt.call(this,e,t,n),this.obj_type=n.obj_type,this.drawables=[]};Mt(Rt.prototype,Pt.prototype,{unpack_drawables:function(e){var t;this.drawables=[];for(var n=0;n<e.length;n++)t=nn(e[n],this.view,this),this.add_drawable(t)},init:function(){for(var e=0;e<this.drawables.length;e++)this.drawables[e].init()},_draw:function(e){for(var t=0;t<this.drawables.length;t++)this.drawables[t]._draw(e)},to_dict:function(){for(var e=[],t=0;t<this.drawables.length;t++)e.push(this.drawables[t].to_dict());return{prefs:this.config.to_key_value_dict(),obj_type:this.obj_type,drawables:e}},add_drawable:function(e){this.drawables.push(e),e.container=this,this.changed()},add_drawable_before:function(e,t){this.changed();var n=this.drawables.indexOf(t);return-1!==n&&(this.drawables.splice(n,0,e),!0)},replace_drawable:function(e,t,n){var i=this.drawables.indexOf(e);return-1!==i&&(this.drawables[i]=t,n&&e.container_div.replaceWith(t.container_div),this.changed()),i},remove_drawable:function(e){var t=this.drawables.indexOf(e);return-1!==t&&(this.drawables.splice(t,1),e.container=null,this.changed(),!0)},move_drawable:function(e,t){var n=this.drawables.indexOf(e);return-1!==n&&(this.drawables.splice(n,1),this.drawables.splice(t,0,e),this.changed(),!0)},get_drawables:function(){return this.drawables},get_tracks:function(e){for(var t,n=this.drawables.slice(0),i=[];0!==n.length;)(t=n.shift())instanceof e?i.push(t):t.drawables&&(n=n.concat(t.drawables));return i}});var jt=function(e,t,n){if(Mt(n,{obj_type:"DrawableGroup",drag_handle_class:"group-handle"}),Rt.call(this,e,t,n),this.content_div=o()("<div/>").addClass("content-div").attr("id",`group_${this.id}_content_div`).appendTo(this.container_div),Lt(this.container_div,this),Lt(this.content_div,this),Dt(this.container_div,this.drag_handle_class,".group",this),this.filters_manager=new Xe(this),this.header_div.after(this.filters_manager.parent_div),this.filters_manager.parent_div.after(o()("<div style='clear: both'/>")),this.saved_filters_managers=[],"drawables"in n&&this.unpack_drawables(n.drawables),"filters"in n){var i=this.filters_manager;this.filters_manager=new Xe(this,n.filters),i.parent_div.replaceWith(this.filters_manager.parent_div),n.filters.visible&&this.setup_multitrack_filtering()}};Mt(jt.prototype,Pt.prototype,Rt.prototype,{action_icons_def:[Pt.prototype.action_icons_def[0],Pt.prototype.action_icons_def[1],{name:"composite_icon",title:(0,M.ZP)("Show composite track"),css_class:"layers-stack",on_click_fn:function(e){o()(".tooltip").remove(),e.show_composite_track()}},{name:"filters_icon",title:(0,M.ZP)("Filters"),css_class:"ui-slider-050",on_click_fn:function(e){e.filters_manager.visible()?(e.filters_manager.clear_filters(),e._restore_filter_managers()):(e.setup_multitrack_filtering(),e.request_draw({clear_tile_cache:!0})),e.filters_manager.toggle()}},Pt.prototype.action_icons_def[2]],build_container_div:function(){var e=o()("<div/>").addClass("group").attr("id",`group_${this.id}`);return this.container&&this.container.content_div.append(e),e},hide_contents:function(){this.tiles_div.hide()},show_contents:function(){this.tiles_div.show(),this.request_draw()},update_icons:function(){var e=this.drawables.length;if(0===e)this.action_icons.composite_icon.hide(),this.action_icons.filters_icon.hide();else if(1===e)this.action_icons.composite_icon.toggle(this.drawables[0]instanceof Zt),this.action_icons.filters_icon.hide();else{var t,n,i,a=this.drawables[0].get_type(),s=0;for(t=0;t<e&&(i=this.drawables[t]).get_type()===a;t++)i instanceof Xt&&s++;if(this.drawables[0]instanceof Jt?this.action_icons.composite_icon.show():(this.action_icons.composite_icon.hide(),o()(".tooltip").remove()),s>1&&s===this.drawables.length){var r,l={};for(i=this.drawables[0],n=0;n<i.filters_manager.filters.length;n++)l[(r=i.filters_manager.filters[n]).name]=[r];for(t=1;t<this.drawables.length;t++)for(i=this.drawables[t],n=0;n<i.filters_manager.filters.length;n++)(r=i.filters_manager.filters[n]).name in l&&l[r.name].push(r);for(var d in this.filters_manager.remove_all(),l){const e=l[d];if(e.length===s){const t=new Qe({name:e[0].name,index:e[0].index});this.filters_manager.add_filter(t)}}this.action_icons.filters_icon.toggle(this.filters_manager.filters.length>0)}else this.action_icons.filters_icon.hide()}},_restore_filter_managers:function(){for(var e=0;e<this.drawables.length;e++)this.drawables[e].filters_manager=this.saved_filters_managers[e];this.saved_filters_managers=[]},setup_multitrack_filtering:function(){if(this.filters_manager.filters.length>0){this.saved_filters_managers=[];for(var e=0;e<this.drawables.length;e++){var t=this.drawables[e];this.saved_filters_managers.push(t.filters_manager),t.filters_manager=this.filters_manager}}this.filters_manager.init_filters()},show_composite_track:function(){var e=new Zt(this.view,this.view,{name:this.config.get_value("name"),drawables:this.drawables});this.container.replace_drawable(this,e,!0),e.request_draw()},add_drawable:function(e){Rt.prototype.add_drawable.call(this,e),this.update_icons()},remove_drawable:function(e){Rt.prototype.remove_drawable.call(this,e),this.update_icons()},to_dict:function(){this.filters_manager.visible()&&this._restore_filter_managers();var e=Mt(Rt.prototype.to_dict.call(this),{filters:this.filters_manager.to_dict()});return this.filters_manager.visible()&&this.setup_multitrack_filtering(),e},request_draw:function(e){u.default.each(this.drawables,(t=>{t.request_draw(e)}))}});var Yt=r().View.extend({initialize:function(e){Mt(e,{obj_type:"View"}),Rt.call(this,"View",e.container,e),this.chrom=null,this.vis_id=e.vis_id,this.dbkey=e.dbkey,this.stand_alone=void 0===e.stand_alone||e.stand_alone,this.label_tracks=[],this.tracks_to_be_redrawn=[],this.max_low=0,this.max_high=0,this.zoom_factor=3,this.min_separation=30,this.has_changes=!1,this.load_chroms_deferred=null,this.render(),this.canvas_manager=new we.CanvasManager(this.container.get(0).ownerDocument),this.reset(),this.config=Z.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"}],{name:e.name})},render:function(){this.requested_redraw=!1;var e=this.container,t=this;this.top_container=o()("<div/>").addClass("top-container").appendTo(e),this.browser_content_div=o()("<div/>").addClass("content").appendTo(e),this.bottom_container=o()("<div/>").addClass("bottom-container").appendTo(e),this.top_labeltrack=o()("<div/>").addClass("top-labeltrack").appendTo(this.top_container),this.viewport_container=o()("<div/>").addClass("viewport-container").attr("id","viewport-container").appendTo(this.browser_content_div),this.content_div=this.viewport_container,Lt(this.viewport_container,t),this.intro_div=o()("<div/>").addClass("intro").appendTo(this.viewport_container),o()("<div/>").text("Add Datasets to Visualization").addClass("action-button").appendTo(this.intro_div).click((()=>{we.select_datasets({dbkey:t.dbkey},(e=>{u.default.each(e,(e=>{t.add_drawable(nn(e,t,t))}))}))})),e.attr("style","overflow: visible !important"),this.nav_container=o()("<div/>").addClass("trackster-nav-container").prependTo(this.top_container),this.nav=o()("<div/>").addClass("trackster-nav").appendTo(this.nav_container),this.stand_alone&&(this.nav_container.addClass("stand-alone"),this.nav.addClass("stand-alone")),this.overview=o()("<div/>").addClass("overview").appendTo(this.bottom_container),this.overview_viewport=o()("<div/>").addClass("overview-viewport").appendTo(this.overview),this.overview_close=o()("<a/>").attr("title","Close overview").addClass("icon-button overview-close tooltip").hide().appendTo(this.overview_viewport),this.overview_highlight=o()("<div/>").addClass("overview-highlight").hide().appendTo(this.overview_viewport),this.overview_box_background=o()("<div/>").addClass("overview-boxback").appendTo(this.overview_viewport),this.overview_box=o()("<div/>").addClass("overview-box").appendTo(this.overview_viewport),this.default_overview_height=this.overview_box.height(),this.nav_controls=o()("<div/>").addClass("nav-controls").appendTo(this.nav),this.chrom_select=o()("<select/>").attr({name:"chrom"}).addClass("chrom-nav").append("<option value=''>Loading</option>").appendTo(this.nav_controls);this.nav_input=o()("<input/>").addClass("nav-input").hide().bind("keyup focusout",(function(e){"focusout"!==e.type&&13!==(e.keyCode||e.which)&&27!==(e.keyCode||e.which)||(27!==(e.keyCode||e.which)&&t.go_to(o()(this).val()),o()(this).hide(),o()(this).val(""),t.location_span.show(),t.chrom_select.show()),e.stopPropagation()})).appendTo(this.nav_controls),this.location_span=o()("<span/>").addClass("location").attr("title","Click to change location").tooltip({placement:"bottom"}).appendTo(this.nav_controls),this.location_span.click((()=>{t.location_span.hide(),t.chrom_select.hide(),t.nav_input.val(`${t.chrom}:${t.low}-${t.high}`),t.nav_input.css("display","inline-block"),t.nav_input.select(),t.nav_input.focus(),t.nav_input.autocomplete({source:function(e,n){var i=[],a=o().map(t.get_tracks(Xt),(t=>t.data_manager.search_features(e.term).success((e=>{i=i.concat(e)}))));o().when.apply(o(),a).done((()=>{n(o().map(i,(e=>({label:e[0],value:e[1]}))))}))},minLength:2})})),void 0!==this.vis_id&&(this.hidden_input=o()("<input/>").attr("type","hidden").val(this.vis_id).appendTo(this.nav_controls)),this.zo_link=o()("<a/>").attr("id","zoom-out").attr("title","Zoom out").tooltip({placement:"bottom"}).click((()=>{t.zoom_out()})).appendTo(this.nav_controls),this.zi_link=o()("<a/>").attr("id","zoom-in").attr("title","Zoom in").tooltip({placement:"bottom"}).click((()=>{t.zoom_in()})).appendTo(this.nav_controls),this.load_chroms_deferred=this.load_chroms({low:0}),this.chrom_select.bind("change",(()=>{t.change_chrom(t.chrom_select.val())})),this.browser_content_div.click((function(e){o()(this).find("input").trigger("blur")})),this.browser_content_div.bind("dblclick",(function(e){t.zoom_in(e.pageX,this.viewport_container)})),this.overview_box.bind("dragstart",(function(e,t){this.current_x=t.offsetX})).bind("drag",(function(e,n){var i=n.offsetX-this.current_x;this.current_x=n.offsetX;var o=Math.round(i/t.viewport_container.width()*(t.max_high-t.max_low));t.move_delta(-o)})),this.overview_close.click((()=>{t.reset_overview()})),this.viewport_container.bind("draginit",((e,n)=>{if(e.clientX>t.viewport_container.width()-16)return!1})).bind("dragstart",((e,n)=>{n.original_low=t.low,n.current_height=e.clientY,n.current_x=n.offsetX})).bind("drag",(function(e,n){var i=o()(this),a=n.offsetX-n.current_x,s=i.scrollTop()-(e.clientY-n.current_height);i.scrollTop(s),n.current_height=e.clientY,n.current_x=n.offsetX;var r=Math.round(a/t.viewport_container.width()*(t.high-t.low));t.move_delta(r)})),this.top_labeltrack.bind("dragstart",(function(e,n){return o()("<div/>").addClass("zoom-area").css("height",t.browser_content_div.height()+t.top_labeltrack.height()+1).appendTo(o()(this))})).bind("drag",((e,n)=>{o()(n.proxy).css({left:Math.min(e.pageX,n.startX)-t.container.offset().left,width:Math.abs(e.pageX-n.startX)});var i=Math.min(e.pageX,n.startX)-t.container.offset().left,a=Math.max(e.pageX,n.startX)-t.container.offset().left,s=t.high-t.low,r=t.viewport_container.width();t.update_location(Math.round(i/r*s)+t.low,Math.round(a/r*s)+t.low)})).bind("dragend",((e,n)=>{var i=Math.min(e.pageX,n.startX),a=Math.max(e.pageX,n.startX),s=t.high-t.low,r=t.viewport_container.width(),l=t.low;t.low=Math.round(i/r*s)+l,t.high=Math.round(a/r*s)+l,o()(n.proxy).remove(),t.request_redraw()})),this.add_label_track(new qt(this,{content_div:this.top_labeltrack})),o()(window).bind("resize",(function(){this.resize_timer&&window.clearTimeout(this.resize_timer),this.resize_timer=window.setTimeout((()=>{t.resize_window()}),500)})),o()(document).bind("redraw",(()=>{t.redraw()})),this.reset(),o()(window).trigger("resize")},get_base_color:function(e){return this.config.get_value(`${e.toLowerCase()}_color`)||this.config.get_value("n_color")}});Mt(Yt.prototype,Rt.prototype,{changed:function(){this.has_changes=!0},update_intro_div:function(){this.intro_div.toggle(0===this.drawables.length)},trigger_navigate:function(e,t,n,i){this.timer&&window.clearTimeout(this.timer),i?this.timer=window.setTimeout((()=>{this.trigger("navigate",`${e}:${t}-${n}`)}),500):this.trigger("navigate",`${e}:${t}-${n}`)},update_location:function(e,t){this.location_span.text(`${W.commatize(e)} - ${W.commatize(t)}`),this.nav_input.val(`${this.chrom}:${W.commatize(e)}-${W.commatize(t)}`);var n=this.chrom_select.val();""!==n&&this.trigger_navigate(n,this.low,this.high,!0)},load_chroms:function(e){e.num=Et;var t=o().Deferred();return o().ajax({url:`${(0,_.getAppRoot)()}api/genomes/${this.dbkey}`,data:e,dataType:"json",success:e=>{if(0!==e.chrom_info.length){if(e.reference){var n=new Gt(this);this.add_label_track(n),this.reference_track=n}this.chrom_data=e.chrom_info,this.chrom_select.html(""),this.chrom_select.append(o()('<option value="">Select Chrom/Contig</option>'));for(var i=0,a=this.chrom_data.length;i<a;i++){var s=this.chrom_data[i].chrom,r=o()("<option>");r.text(s),r.val(s),this.chrom_select.append(r)}e.prev_chroms&&this.chrom_select.append(o()('<option value="previous">Previous 100</option>')),e.next_chroms&&this.chrom_select.append(o()('<option value="next">Next 100</option>')),this.chrom_start_index=e.start_index,t.resolve(e.chrom_info)}},error:function(){alert(`Could not load chroms for this dbkey: ${this.dbkey}`)}}),t},change_chrom:function(e,t,n){var i=this;if(i.chrom_data){if(e&&"None"!==e)if("previous"!==e)if("next"!==e){var a=o().grep(i.chrom_data,((t,n)=>t.chrom===e))[0];if(void 0!==a){if(e!==i.chrom){i.chrom=e,i.chrom_select.val(i.chrom),i.max_high=a.len-1,i.reset();for(var s=0,r=i.drawables.length;s<r;s++){var l=i.drawables[s];l.init&&l.init()}i.reference_track&&i.reference_track.init()}void 0===t&&void 0===n?(i.low=0,i.high=i.max_high):(i.low=void 0!==t?Math.max(t,0):0,void 0===n?(i.low=Math.max(i.low-15,0),i.high=i.low+30):i.high=Math.min(n,i.max_high)),i.request_redraw()}else i.load_chroms({chrom:e},(()=>{i.change_chrom(e,t,n)}))}else i.load_chroms({low:this.chrom_start_index+Et});else i.load_chroms({low:this.chrom_start_index-Et})}else i.load_chroms_deferred.then((()=>{i.change_chrom(e,t,n)}))},go_to:function(e){var t=(e=(e=e.replace(/,/g,"")).replace(/:|-/g," ")).split(/\s+/),n=t[0],i=t[1]?parseInt(t[1],10):void 0,o=t[2]?parseInt(t[2],10):void 0;this.change_chrom(n,i,o)},move_fraction:function(e){var t=this.high-this.low;this.move_delta(e*t)},move_delta:function(e){var t=this,n=t.high-t.low;t.low-e<t.max_low?(t.low=t.max_low,t.high=t.max_low+n):t.high-e>t.max_high?(t.high=t.max_high,t.low=t.max_high-n):(t.high-=e,t.low-=e),t.request_redraw({data_fetch:!1}),this.redraw_on_move_fn&&window.clearTimeout(this.redraw_on_move_fn),this.redraw_on_move_fn=window.setTimeout((()=>{t.request_redraw()}),200);var i=t.chrom_select.val();this.trigger_navigate(i,t.low,t.high,!0)},add_drawable:function(e){Rt.prototype.add_drawable.call(this,e),e.init(),this.changed(),this.update_intro_div();var t=this;e.config.on("change",(()=>{t.changed()}))},add_label_track:function(e){e.view=this,e.init(),this.label_tracks.push(e)},remove_drawable:function(e,t){if(Rt.prototype.remove_drawable.call(this,e),t){var n=this;e.container_div.hide(0,(function(){o()(this).remove(),n.update_intro_div()}))}},reset:function(){this.low=this.max_low,this.high=this.max_high,this.viewport_container.find(".yaxislabel").remove()},request_redraw:function(e,t){var n=this,i=t?[t]:n.drawables;u.default.each(i,(t=>{var i=u.default.find(n.tracks_to_be_redrawn,(e=>e[0]===t));i?i[1]=e:n.tracks_to_be_redrawn.push([t,e])})),this.requested_redraw||(window.requestAnimationFrame((()=>{n._redraw()})),this.requested_redraw=!0)},_redraw:function(){this.requested_redraw=!1;var e=this.low,t=this.high;e<this.max_low&&(e=this.max_low),t>this.max_high&&(t=this.max_high);var n=this.high-this.low;0!==this.high&&n<this.min_separation&&(t=e+this.min_separation),this.low=Math.floor(e),this.high=Math.ceil(t),this.update_location(this.low,this.high),this.resolution_px_b=this.viewport_container.width()/(this.high-this.low);var i=this.low/(this.max_high-this.max_low)*this.overview_viewport.width()||0,o=(this.high-this.low)/(this.max_high-this.max_low)*this.overview_viewport.width()||0;this.overview_box.css({left:i,width:Math.max(13,o)}).show(),o<13&&this.overview_box.css("left",i-(13-o)/2),this.overview_highlight&&this.overview_highlight.css({left:i,width:o}),u.default.each(this.tracks_to_be_redrawn,(e=>{var t=e[0],n=e[1];t&&t._draw(n)})),this.tracks_to_be_redrawn=[],u.default.each(this.label_tracks,(e=>{e._draw()}))},zoom_in:function(e,t){if(!(0===this.max_high||this.high-this.low<=this.min_separation)){var n=this.high-this.low,i=n/2+this.low,o=n/this.zoom_factor/2;e&&(i=e/this.viewport_container.width()*(this.high-this.low)+this.low),this.low=Math.round(i-o),this.high=Math.round(i+o),this.changed(),this.request_redraw()}},zoom_out:function(){if(0!==this.max_high){var e=this.high-this.low,t=e/2+this.low,n=e*this.zoom_factor/2;this.low=Math.round(t-n),this.high=Math.round(t+n),this.changed(),this.request_redraw()}},resize_viewport:function(){this.viewport_container.height(this.container.height()-this.top_container.height()-this.bottom_container.height())},resize_window:function(){this.resize_viewport(),this.request_redraw()},set_overview:function(e){if(this.overview_drawable){if(this.overview_drawable.dataset.id===e.dataset.id)return;this.overview_viewport.find(".track").remove()}var t=e.copy({content_div:this.overview_viewport}),n=this;t.header_div.hide(),t.is_overview=!0,n.overview_drawable=t,this.overview_drawable.postdraw_actions=()=>{n.overview_highlight.show().height(n.overview_drawable.content_div.height()),n.overview_viewport.height(n.overview_drawable.content_div.height()+n.overview_box.outerHeight()),n.overview_close.show(),n.resize_window()},n.overview_drawable.request_draw(),this.changed()},reset_overview:function(){o()(".tooltip").remove(),this.overview_viewport.find(".track-tile").remove(),this.overview_viewport.height(this.default_overview_height),this.overview_box.height(this.default_overview_height),this.overview_close.hide(),this.overview_highlight.hide(),this.resize_window(),this.overview_drawable=null}});var Ht=qe.Tool.extend({defaults:{track:null},initialize:function(e){qe.Tool.prototype.initialize.call(this,e);var t=!0;void 0!==e.tool_state&&void 0!==e.tool_state.hidden&&(t=e.tool_state.hidden),this.set("hidden",t),this.remove_inputs(["data","hidden_data","conditional"])},state_dict:function(e){return u.default.extend(this.get_inputs_dict(),{hidden:!this.is_visible()})}}),Nt=r().View.extend({events:{"change :input":"update_value"},render:function(){var e=this.$el.addClass("param-row"),t=this.model;o()("<div>").addClass("param-label").text(t.get("label")).appendTo(e),o()("<div/>").addClass("param-input").html(t.get("html")).appendTo(e).find(":input").val(t.get("value")),o()("<div style='clear: both;'/>").appendTo(e)},update_value:function(e){this.model.set_value(o()(e.target).val())}}),Ft=r().View.extend({initialize:function(e){this.model.on("change:hidden",this.set_visible,this)},render:function(){var e=this,t=this.model,n=this.$el.addClass("dynamic-tool").hide();n.bind("drag",(e=>{e.stopPropagation()})).click((e=>{e.stopPropagation()})).bind("dblclick",(e=>{e.stopPropagation()})).keydown((e=>{e.stopPropagation()})),o()("<div class='tool-name'>").appendTo(n).text(t.get("name")),t.get("inputs").each((e=>{var t=new Nt({model:e});t.render(),n.append(t.$el)})),n.find("input").click((function(){o()(this).select()}));var i=o()("<div>").addClass("param-row").appendTo(n),a=o()("<input type='submit'>").attr("value","Run on complete dataset").appendTo(i);o()("<input type='submit'>").attr("value","Run on visible region").appendTo(i).click((()=>{e.run_on_region()})),a.click((()=>{e.run_on_dataset()})),t.is_visible()&&this.$el.show()},set_visible:function(){this.$el.toggle(this.model.is_visible())},update_params:function(){for(var e=0;e<this.params.length;e++)this.params[e].update_value()},run_on_dataset:function(){var e=this.model;const t=(0,a.Bz)();this.run({target_dataset_id:this.model.get("track").dataset.id,action:"rerun",tool_id:e.id},null,(n=>{t.modal.show({title:`${e.get("name")} is Running`,body:`${e.get("name")} is running on the complete dataset. Tool outputs are in dataset's history.`,buttons:{Close:function(){t.modal.hide()}}})}))},run_on_region:function(){var e,t=this.model.get("track"),n=this.model,i=new we.GenomeRegion({chrom:t.view.chrom,start:t.view.low,end:t.view.high}),o={target_dataset_id:t.dataset.id,action:"rerun",tool_id:n.id,regions:[i.toJSON()]},a=n.get("name")+t.tool_region_and_parameters_str(i);if(t.container===t.view){var s=new jt(t.view,t.view,{name:t.config.get_value("name")}),r=t.container.replace_drawable(t,s,!1);s.container_div.insertBefore(t.view.content_div.children()[r]),s.add_drawable(t),t.container_div.appendTo(s.content_div),e=s}else e=t.container;var l=new t.constructor(t.view,e,{name:a,hda_ldda:"hda"});l.init_for_tool_data(),l.change_mode(t.mode),l.set_filters_manager(t.filters_manager.copy(l)),l.update_icons(),e.add_drawable(l),l.tiles_div.text("Starting job."),this.run(o,l,(e=>{l.set_dataset(new ne(e)),l.tiles_div.text("Running job."),l.init()}))},run:function(e,t,n){e.inputs=this.model.get_inputs_dict();var i=new W.ServerStateDeferred({ajax_settings:{url:`${(0,_.getAppRoot)()}api/tools`,data:JSON.stringify(e),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(e){return"pending"!==e}});o().when(i.go()).then((e=>{"no converter"===e?(t.container_div.addClass("error"),t.content_div.text(Ot)):e.error?(t.container_div.addClass("error"),t.content_div.text("Tool cannot be rerun: "+e.message)):n(e)}))}}),Bt=function(e,t){bt.Scaler.call(this,t),this.filter=e};Bt.prototype.gen_val=function(e){return this.filter.high===Number.MAX_VALUE||this.filter.low===-Number.MAX_VALUE||this.filter.low===this.filter.high?this.default_val:(parseFloat(e[this.filter.index])-this.filter.low)/(this.filter.high-this.filter.low)};var $t=function(e,t,n,i,a){this.track=e,this.region=t,this.low=t.get("start"),this.high=t.get("end"),this.w_scale=n,this.canvas=i,this.html_elt=o()("<div class='track-tile'/>").append(i),this.data=a,this.stale=!1};$t.prototype.predisplay_actions=()=>{};var zt=function(e,t,n,i,o){$t.call(this,e,t,n,i,o)};zt.prototype.predisplay_actions=()=>{};var Wt=function(e,t,n,i,o,a,s,r,l,d,c){$t.call(this,e,t,n,i,o),this.mode=a,this.all_slotted=r,this.feature_mapper=l,this.has_icons=!1,this.incomplete_features=d,this.other_tiles_features_drawn={},this.seq_data=c};Mt(Wt.prototype,$t.prototype),Wt.prototype.predisplay_actions=()=>{};var Ut=function(e,t,n){Mt(n,{drag_handle_class:"draghandle"}),Pt.call(this,e,t,n),this.dataset=null,n.dataset&&(this.dataset=n.dataset instanceof r().Model?n.dataset:new ne(n.dataset)),this.dataset_check_type="converted_datasets_state",this.data_url_extra_params={},this.data_query_wait="data_query_wait"in n?n.data_query_wait:5e3,this.data_manager="data_manager"in n?n.data_manager:new we.GenomeDataManager({dataset:this.dataset,genome:new we.Genome({key:e.dbkey,chroms_info:{chrom_info:e.chrom_data}}),data_mode_compatible:this.data_and_mode_compatible,can_subset:this.can_subset}),this.min_height_px=16,this.max_height_px=800,this.visible_height_px=this.config.get_value("height"),this.content_div=o()("<div class='track-content'>").appendTo(this.container_div),this.container&&(this.container.content_div.append(this.container_div),"resize"in n&&!n.resize||this.add_resize_handle())};Mt(Ut.prototype,Pt.prototype,{action_icons_def:[{name:"mode_icon",title:(0,M.ZP)("Set display mode"),css_class:"chevron-expand",on_click_fn:function(){}},Pt.prototype.action_icons_def[0],{name:"overview_icon",title:(0,M.ZP)("Set as overview"),css_class:"application-dock-270",on_click_fn:function(e){e.view.set_overview(e)}},Pt.prototype.action_icons_def[1],{name:"filters_icon",title:(0,M.ZP)("Filters"),css_class:"ui-slider-050",on_click_fn:function(e){e.filters_manager.visible()?e.filters_manager.clear_filters():e.filters_manager.init_filters(),e.filters_manager.toggle()}},{name:"tools_icon",title:(0,M.ZP)("Tool"),css_class:"hammer",on_click_fn:function(e){e.tool.toggle(),e.tool.is_visible()?e.set_name(e.config.get_value("name")+e.tool_region_and_parameters_str()):e.revert_name(),o()(".tooltip").remove()}},{name:"param_space_viz_icon",title:(0,M.ZP)("Tool parameter space visualization"),css_class:"arrow-split",on_click_fn:e=>{const t=(0,a.Bz)();var n=`\n                    <strong>Tool</strong>:${e.tool.get("name")}<br/>\n                    <strong>Dataset</strong>:${e.config.get_value("name")}<br/>\n                    <strong>Region(s)</strong>:\n                        <select name="regions">\n                            <option value="cur">current viewing area</option>\n                            <option value="bookmarks">bookmarks</option>\n                            <option value="both">current viewing area and bookmarks</option>\n                        </select>\n                    `;t.modal.show({title:"Visualize tool parameter space and output from different parameter settings?",body:n,buttons:{No:()=>{t.modal.hide(),o()(window).unbind("keypress.check_enter_esc")},Yes:()=>{var n,i=o()('select[name="regions"] option:selected').val(),a=new we.GenomeRegion({chrom:(void 0).view.chrom,start:(void 0).view.low,end:(void 0).view.high}),s=u.default.map(o()(".bookmark"),(e=>new we.GenomeRegion({from_str:o()(e).children(".position").text()})));n="cur"===i?[a]:"bookmarks"===i?s:[a].concat(s),t.modal.hide(),window.top.location.href=`${(0,_.getAppRoot)()}visualization/sweepster?${o().param({dataset_id:e.dataset.id,hda_ldda:e.dataset.get("hda_ldda"),regions:JSON.stringify(new(r().Collection)(n).toJSON())})}`}}})}},Pt.prototype.action_icons_def[2]],can_draw:function(){return this.dataset&&Pt.prototype.can_draw.call(this)},build_container_div:function(){return o()("<div/>").addClass("track").attr("id",`track_${this.id}`)},set_dataset:function(e){this.dataset=e,this.data_manager.set("dataset",e)},on_resize:function(){this.request_draw({clear_tile_cache:!0})},add_resize_handle:function(){var e=this,t=!1,n=!1,i=o()("<div class='track-resize'>");o()(e.container_div).hover((()=>{e.config.get_value("content_visible")&&(t=!0,i.show())}),(()=>{t=!1,n||i.hide()})),i.hide().bind("dragstart",((t,i)=>{n=!0,i.original_height=o()(e.content_div).height()})).bind("drag",((t,n)=>{var i=Math.min(Math.max(n.original_height+n.deltaY,e.min_height_px),e.max_height_px);o()(e.tiles_div).css("height",i),e.visible_height_px=e.max_height_px===i?0:i,e.on_resize()})).bind("dragend",((o,a)=>{e.tile_cache.clear(),n=!1,t||i.hide(),e.config.set_value("height",e.visible_height_px),e.changed()})).appendTo(e.container_div)},hide_contents:function(){this.tiles_div.hide(),this.container_div.find(".yaxislabel, .track-resize").hide()},show_contents:function(){this.tiles_div.show(),this.container_div.find(".yaxislabel, .track-resize").show(),this.request_draw()},get_type:function(){return this instanceof qt?"LabelTrack":this instanceof Gt?"ReferenceTrack":this instanceof Jt?"LineTrack":this instanceof en?"ReadTrack":this instanceof Qt?"VariantTrack":this instanceof Zt?"CompositeTrack":this instanceof Xt?"FeatureTrack":""},show_message:function(e){return this.tiles_div.remove(),o()("<span/>").addClass("message").html(e).appendTo(this.content_div)},init:function(e){var t=this;if(t.enabled=!1,t.tile_cache.clear(),t.data_manager.clear(),t.content_div.children().remove(),t.container_div.removeClass("nodata error pending"),t.tiles_div=o()("<div/>").addClass("tiles").appendTo(t.content_div),t.dataset.id){var n=o().Deferred(),i={hda_ldda:t.dataset.get("hda_ldda"),data_type:this.dataset_check_type,chrom:t.view.chrom,retry:e};return o().getJSON(this.dataset.url(),i,(e=>{if(e&&"error"!==e&&"error"!==e.kind)"no converter"===e?(t.container_div.addClass("error"),t.show_message(Ot)):"no data"===e||void 0!==e.data&&(null===e.data||0===e.data.length)?(t.container_div.addClass("nodata"),t.show_message("No data for this chrom/contig.")):"pending"===e?(t.container_div.addClass("pending"),t.show_message("Preparing data. This can take a while for a large dataset. If the visualization is saved and closed, preparation will continue in the background."),window.setTimeout((()=>{t.init()}),t.data_query_wait)):"data"!==e&&"data"!==e.status||(e.valid_chroms&&(t.valid_chroms=e.valid_chroms,t.update_icons()),t.tiles_div.text("Ready for display"),t.view.chrom?(t.tiles_div.text(""),t.tiles_div.css("height",`${t.visible_height_px}px`),t.enabled=!0,o().when.apply(o(),t.predraw_init()).done((()=>{n.resolve(),t.container_div.removeClass("nodata error pending"),t.request_draw()}))):n.resolve());else{t.container_div.addClass("error");var i=t.show_message("Cannot display dataset due to an error. ");e.message&&(i.append(o()("<a href='javascript:void(0);'></a>").text("View error").click((()=>{const t=(0,a.Bz)();t.modal.show({title:(0,M.ZP)("Trackster Error"),body:`<pre>${e.message}</pre>`,buttons:{Close:function(){t.modal.hide()}}})}))),i.append(o()("<span/>").text(" ")),i.append(o()("<a href='javascript:void(0);'></a>").text("Try again").click((()=>{t.init(!0)}))))}})),this.update_icons(),n}},predraw_init:function(){var e=this;return o().getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},(t=>{var n=t.data;if(n&&void 0!==n.min&&void 0!==n.max){var i=n.min,o=n.max;i=Math.floor(Math.min(0,Math.max(i,n.mean-2*n.sd))),o=Math.ceil(Math.max(0,Math.min(o,n.mean+2*n.sd))),e.config.set_default_value("min_value",i),e.config.set_default_value("max_value",o),e.config.set_value("min_value",i),e.config.set_value("max_value",o)}}))},get_drawables:function(){return this}});var Vt=function(e,t,n){Ut.call(this,e,t,n);var i=this;if(Dt(i.container_div,i.drag_handle_class,".group",i),this.filters_manager=new Xe(this,"filters"in n?n.filters:null),this.data_manager.set("filters_manager",this.filters_manager),this.filters_available=!1,this.tool=n.tool?new Ht(u.default.extend(n.tool,{track:this,tool_state:n.tool_state})):null,this.tile_cache=new we.Cache(10),this.left_offset=0,this.header_div&&(this.set_filters_manager(this.filters_manager),this.tool)){var a=new Ft({model:this.tool});a.render(),this.dynamic_tool_div=a.$el,this.header_div.after(this.dynamic_tool_div)}this.tiles_div=o()("<div/>").addClass("tiles").appendTo(this.content_div),this.config.get_value("content_visible")||this.tiles_div.hide(),this.overlay_div=o()("<div/>").addClass("overlay").appendTo(this.content_div),n.mode&&this.change_mode(n.mode)};Mt(Vt.prototype,Pt.prototype,Ut.prototype,{action_icons_def:Ut.prototype.action_icons_def.concat([{name:"show_more_rows_icon",title:"To minimize track height, not all feature rows are displayed. Click to display more rows.",css_class:"exclamation",on_click_fn:function(e){o()(".tooltip").remove(),e.slotters[e.view.resolution_px_b].max_rows*=2,e.request_draw({clear_tile_cache:!0})},hide:!0}]),copy:function(e){var t=this.to_dict();Mt(t,{data_manager:this.data_manager});var n=new this.constructor(this.view,e,t);return n.change_mode(this.mode),n.enabled=this.enabled,n},set_filters_manager:function(e){this.filters_manager=e,this.header_div.after(this.filters_manager.parent_div)},to_dict:function(){return{track_type:this.get_type(),dataset:{id:this.dataset.id,hda_ldda:this.dataset.get("hda_ldda")},prefs:this.config.to_key_value_dict(),mode:this.mode,filters:this.filters_manager.to_dict(),tool_state:this.tool?this.tool.state_dict():{}}},set_min_max:function(){var e=this;return o().getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},(t=>{var n=t.data;if(isNaN(parseFloat(e.config.get_value("min_value")))||isNaN(parseFloat(e.config.get_value("max_value")))){var i=n.min,o=n.max;i=Math.floor(Math.min(0,Math.max(i,n.mean-2*n.sd))),o=Math.ceil(Math.max(0,Math.min(o,n.mean+2*n.sd))),e.config.set_value("min_value",i),e.config.set_value("max_value",o)}}))},change_mode:function(e){var t=this;return t.mode=e,t.config.set_value("mode",e),"Auto"===e&&this.data_manager.clear(),t.request_draw({clear_tile_cache:!0}),this.action_icons.mode_icon.attr("title",`Set display mode (now: ${t.mode})`),t},update_icons:function(){var e=this;e.action_icons.filters_icon.toggle(e.filters_available),e.action_icons.tools_icon.toggle(null!==e.tool),e.action_icons.param_space_viz_icon.toggle(null!==e.tool)},_gen_tile_cache_key:function(e,t){return`${e}_${t}`},request_draw:function(e){e&&e.clear_tile_cache&&this.tile_cache.clear(),this.view.request_redraw(e,this)},before_draw:function(){this.max_height_px=0},_draw:function(e){if(this.can_draw()){var t=e&&e.clear_after,n=this.view.low,i=this.view.high,a=this.view.container.width(),s=this.view.resolution_px_b,r=1/s;this.is_overview&&(n=this.view.max_low,i=this.view.max_high,r=1/(s=a/(this.view.max_high-this.view.max_low))),this.before_draw(),this.tiles_div.children().addClass("remove");for(var l,d,c=Math.floor(400*r),h=Math.floor(n/c),p=[],f=[];h*c<i;)l=new we.GenomeRegion({chrom:this.view.chrom,start:h*c,end:Math.min((h+1)*c,this.view.max_high)}),d=this.draw_helper(l,s,e),p.push(d),o().when(d).then((e=>{f.push(e)})),h+=1;t||this.tiles_div.children(".remove").removeClass("remove").remove(),o().when.apply(o(),p).then((()=>{this.tiles_div.children(".remove").remove(),0!==(f=u.default.filter(f,(e=>null!==e))).length&&this.postdraw_actions(f,a,s,t)}))}},_add_yaxis_label:function(e,t){var n="max"===e?"top":"bottom",i="max"===e?"max":"min",a="max"===e?"max_value":"min_value",s=this.container_div.find(`.yaxislabel.${n}`),r=It(this.config.get_value(a),1);t=t||(()=>{this.request_draw({clear_tile_cache:!0})}),0!==s.length?s.text(r):(s=o()("<div/>").text(r).make_text_editable({num_cols:12,on_finish:function(e){o()(".tooltip").remove(),this.config.set_value(a,It(e,1)),t()},help_text:`Set ${i} value`}).addClass(`yaxislabel ${n}`).css("color",this.config.get_value("label_color")),this.container_div.prepend(s))},postdraw_actions:function(e,t,n,i){u.default.filter(e,(e=>e instanceof zt)).length>0?(this.max_height_px=0,u.default.each(e,(e=>{e instanceof zt||(e.html_elt.remove(),this.draw_helper(e.region,n,{force:!0,mode:"Coverage"}))})),this._add_yaxis_label("max")):(this.container_div.find(".yaxislabel").remove(),u.default.find(e,(e=>e.has_icons))&&u.default.each(e,(e=>{e.has_icons||e.html_elt.css("padding-top",20)})))},get_mode:function(e){return this.mode},update_auto_mode:function(e){},_get_drawables:function(){return[this]},draw_helper:function(e,t,n){n||(n={});var i,a=n.force,s=n.mode||this.mode,r=1/t,l=this._get_drawables(),d=this._gen_tile_cache_key(t,e),c=a?void 0:this.tile_cache.get_elt(d);if(c)return(i=c)&&"track"in i&&this.show_tile(c,t),c;if(!1===n.data_fetch)return null;var h=()=>{var t=u.default.find(At,(e=>e===s))?"Coverage":s,n=u.default.map(l,(n=>n.data_manager.get_data(e,t,r,this.data_url_extra_params)));return this.view.reference_track&&n.push(this.view.reference_track.data_manager.get_data(e,s,r,this.view.reference_track.data_url_extra_params)),n},p=o().Deferred();return this.tile_cache.set_elt(d,p),o().when.apply(o(),h()).then((()=>{var i,a=h(),s=a;if(u.default.find(a,(e=>W.is_deferred(e))))return this.tile_cache.set_elt(d,void 0),void o().when(this.draw_helper(e,t,n)).then((e=>{p.resolve(e)}));this.view.reference_track&&(i=this.view.reference_track.data_manager.subset_entry(a.pop(),e));var r=[],c=[];u.default.each(l,((e,n)=>{var i=s[n];"Auto"===e.mode&&(e.mode=e.get_mode(i),e.update_auto_mode(e.mode)),r.push(e.mode),c.push(e.get_canvas_height(i,e.mode,t,g))}));var f,m=this.view.canvas_manager.new_canvas(),_=e.get("start"),v=e.get("end"),g=Math.ceil((v-_)*t)+this.left_offset,y=u.default.max(c);m.width=g,m.height=n.height||y;var b=m.getContext("2d");b.translate(this.left_offset,0),l.length>1&&(b.globalAlpha=.5,b.globalCompositeOperation="source-over"),u.default.each(l,((n,o)=>{f=n.draw_tile(s[o],b,r[o],e,t,i)})),void 0!==f&&(this.tile_cache.set_elt(d,f),this.show_tile(f,t)),p.resolve(f)})),p},get_canvas_height:function(e,t,n,i){return this.visible_height_px},_draw_line_track_tile:function(e,t,n,i,o){-1!==[void 0,null].indexOf(this.config.get_value("min_value"))&&this.config.set_value("min_value",0),-1!==[void 0,null,0].indexOf(this.config.get_value("max_value"))&&this.config.set_value("max_value",u.default.max(u.default.map(e.data,(e=>e[1])))||0);var a=t.canvas;return new bt.LinePainter(e.data,i.get("start"),i.get("end"),this.config.to_key_value_dict(),n).draw(t,a.width,a.height,o),new zt(this,i,o,a,e.data)},draw_tile:function(e,t,n,i,o,a){},show_tile:function(e,t){var n=e.html_elt;e.predisplay_actions();var i=Math.round((e.low-(this.is_overview?this.view.max_low:this.view.low))*t);this.left_offset&&(i-=this.left_offset),n.css("left",i),n.hasClass("remove")?n.removeClass("remove"):this.tiles_div.append(n),n.css("height","auto"),this.max_height_px=Math.max(this.max_height_px,n.height()-2),n.parent().children().css("height",`${this.max_height_px}px`);var o=this.max_height_px;0!==this.visible_height_px&&(o=Math.min(this.max_height_px,this.visible_height_px)),this.tiles_div.css("height",`${o}px`)},tool_region_and_parameters_str:function(e){return` - region=[${void 0!==e?e.toString():"all"}], parameters=[${u.default.values(this.tool.get_inputs_dict()).join(", ")}]`},data_and_mode_compatible:function(e,t){return"Auto"===t||("Coverage"===t?"bigwig"===e.dataset_type:"bigwig"!==e.dataset_type&&"no_detail"!==e.extra_info)},can_subset:function(e){return!e.message&&"no_detail"!==e.extra_info&&("bigwig"!==e.dataset_type||e.data[1][0]-e.data[0][0]==1)},init_for_tool_data:function(){this.data_manager.set("data_type","raw_data"),this.data_query_wait=1e3,this.dataset_check_type="state"}});var qt=function(e,t){Ut.call(this,e,t,{resize:!1,header:!1}),this.container_div.addClass("label-track")};Mt(qt.prototype,Ut.prototype,{init:function(){this.enabled=!0},predraw_init:function(){},_draw:function(e){for(var t=this.view,n=t.high-t.low,i=Math.floor(Math.pow(10,Math.floor(Math.log(n)/Math.log(10)))),a=Math.floor(t.low/i)*i,s=this.view.container.width(),r=o()("<div/>").addClass("label-container");a<t.high;){var l=Math.floor((a-t.low)/n*s);r.append(o()("<div/>").addClass("pos-label").text(W.commatize(a)).css({left:l})),a+=i}this.content_div.children(":first").remove(),this.content_div.append(r)}});var Zt=function(e,t,n){if(Vt.call(this,e,t,n),this.drawables=[],"drawables"in n){for(var i,o=0;o<n.drawables.length;o++)i=n.drawables[o],this.drawables[o]=nn(i,e,null),i.left_offset>this.left_offset&&(this.left_offset=i.left_offset);this.enabled=!0}u.default.each(this.drawables,(e=>{(e instanceof Xt||e instanceof en)&&e.change_mode("Coverage")})),this.update_icons(),this.obj_type="CompositeTrack"};Mt(Zt.prototype,Vt.prototype,{display_modes:At,build_config_params:function(){return u.default.union(Pt.prototype.config_params,[{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},action_icons_def:[{name:"composite_icon",title:(0,M.ZP)("Show individual tracks"),css_class:"layers-stack",on_click_fn:function(e){o()(".tooltip").remove(),e.show_group()}}].concat(Vt.prototype.action_icons_def),to_dict:Rt.prototype.to_dict,add_drawable:Rt.prototype.add_drawable,unpack_drawables:Rt.prototype.unpack_drawables,config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},on_resize:function(){var e=this.visible_height_px;u.default.each(this.drawables,(t=>{t.visible_height_px=e})),Ut.prototype.on_resize.call(this)},change_mode:function(e){Vt.prototype.change_mode.call(this,e);for(var t=0;t<this.drawables.length;t++)this.drawables[t].change_mode(e)},init:function(){for(var e=[],t=0;t<this.drawables.length;t++)e.push(this.drawables[t].init());var n=this;o().when.apply(o(),e).then((()=>{n.enabled=!0,n.request_draw()}))},update_icons:function(){this.action_icons.filters_icon.hide(),this.action_icons.tools_icon.hide(),this.action_icons.param_space_viz_icon.hide()},can_draw:Pt.prototype.can_draw,_get_drawables:function(){return this.drawables},show_group:function(){for(var e,t=new jt(this.view,this.container,{name:this.config.get_value("name")}),n=0;n<this.drawables.length;n++)(e=this.drawables[n]).update_icons(),t.add_drawable(e),e.container=t,t.content_div.append(e.container_div);this.container.replace_drawable(this,t,!0),t.request_draw({clear_tile_cache:!0})},before_draw:function(){var e=u.default.min(u.default.map(this.drawables,(e=>e.config.get_value("min_value")))),t=u.default.max(u.default.map(this.drawables,(e=>e.config.get_value("max_value"))));this.config.set_value("min_value",e),this.config.set_value("max_value",t),u.default.each(this.drawables,(n=>{n.config.set_value("min_value",e),n.config.set_value("max_value",t)}))},update_all_min_max:function(){var e=this.config.get_value("min_value"),t=this.config.get_value("max_value");u.default.each(this.drawables,(n=>{n.config.set_value("min_value",e),n.config.set_value("max_value",t)})),this.request_draw({clear_tile_cache:!0})},postdraw_actions:function(e,t,n,i){var o,a=-1;for(o=0;o<e.length;o++){var s=e[o].html_elt.find("canvas").height();s>a&&(a=s)}for(o=0;o<e.length;o++){var r=e[o];r.html_elt.find("canvas").height()!==a&&(this.draw_helper(r.region,n,{force:!0,height:a}),r.html_elt.remove())}var l=this,d=()=>{l.update_all_min_max()};this._add_yaxis_label("min",d),this._add_yaxis_label("max",d)}});var Gt=function(e){Vt.call(this,e,{content_div:e.top_labeltrack},{resize:!1,header:!1}),this.left_offset=e.canvas_manager.char_width_px,this.container_div.addClass("reference-track"),this.data_url=`${(0,_.getAppRoot)()}api/genomes/${this.view.dbkey}`,this.data_url_extra_params={reference:!0},this.data_manager=new we.GenomeReferenceDataManager({data_url:this.data_url,can_subset:this.can_subset}),this.hide_contents()};Mt(Gt.prototype,Pt.prototype,Vt.prototype,{build_config_params:function(){return u.default.union(Pt.prototype.config_params,[{key:"height",type:"int",default_value:13,hidden:!0}])},init:function(){this.data_manager.clear(),this.enabled=!0},predraw_init:function(){},can_draw:Pt.prototype.can_draw,draw_helper:function(e,t,n){var i,o=this.tiles_div.is(":visible"),a=null;return t>this.view.canvas_manager.char_width_px?(this.tiles_div.show(),i=!0,a=Vt.prototype.draw_helper.call(this,e,t,n)):(i=!1,this.tiles_div.hide()),o!==i&&this.view.resize_viewport(),a},can_subset:function(e){return!0},draw_tile:function(e,t,n,i,o){var a=this.data_manager.subset_entry(e,i),s=a.data,r=t.canvas;t.font=t.canvas.manager.default_font,t.textAlign="center";for(var l=0,d=s.length;l<d;l++)t.fillStyle=this.view.get_base_color(s[l]),t.fillText(s[l],Math.floor(l*o),10);return new $t(this,i,o,r,a)}});var Jt=function(e,t,n){this.mode="Histogram",Vt.call(this,e,t,n),this.left_offset=30;var i,a,s=this;o().when((i=`${(0,_.getAppRoot)()}datasets/${this.dataset.id}/display`,a=o().Deferred(),o().ajax({type:"HEAD",url:i,beforeSend:function(e){e.setRequestHeader("Range","bytes=0-10")},success:function(e,t,n){a.resolve(206===n.status)}}),a)).then((e=>{e&&(s.data_manager=new Ye.BBIDataManager({dataset:s.dataset}))}))};Mt(Jt.prototype,Pt.prototype,Vt.prototype,{display_modes:At,build_config_params:function(){return u.default.union(Pt.prototype.config_params,[{key:"color",label:"Color",type:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},before_draw:function(){},draw_tile:function(e,t,n,i,o){return this._draw_line_track_tile(e,t,n,i,o)},can_subset:function(e){return e.data[1][0]-e.data[0][0]==1},postdraw_actions:function(e,t,n,i){this._add_yaxis_label("max"),this._add_yaxis_label("min")}});var Kt=function(e,t,n){this.mode="Heatmap",Vt.call(this,e,t,n)};Mt(Kt.prototype,Pt.prototype,Vt.prototype,{display_modes:["Heatmap"],build_config_params:function(){return u.default.union(Pt.prototype.config_params,[{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"min_value",label:"Min Value",type:"int",default_value:void 0},{key:"max_value",label:"Max Value",type:"int",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:500,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},predraw_init:function(){var e=this;return o().getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},(e=>{}))},draw_tile:function(e,t,n,i,o){var a=t.canvas;return new bt.DiagonalHeatmapPainter(e.data,i.get("start"),i.get("end"),this.config.to_key_value_dict(),n).draw(t,a.width,a.height,o),new $t(this,i,o,a,e.data)}});var Xt=function(e,t,n){Vt.call(this,e,t,n),this.container_div.addClass("feature-track"),this.summary_draw_height=30,this.slotters={},this.start_end_dct={},this.left_offset=200,this.set_painter_from_config()};Mt(Xt.prototype,Pt.prototype,Vt.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return u.default.union(Pt.prototype.config_params,[{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0,help:"Show the number of items in each bin when drawing summary histogram"},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"connector_style",label:"Connector style",type:"select",default_value:"fishbones",options:[{label:"Line with arrows",value:"fishbone"},{label:"Arcs",value:"arcs"}]},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.set_painter_from_config(),this.request_draw({clear_tile_cache:!0})},set_painter_from_config:function(){"arcs"===this.config.get_value("connector_style")?this.painter=bt.ArcLinkedFeaturePainter:this.painter=bt.LinkedFeaturePainter},postdraw_actions:function(e,t,n,i){if(Vt.prototype.postdraw_actions.call(this,e,t,n,i),0===u.default.filter(e,(e=>e instanceof zt)).length){var a={};u.default.each(u.default.pluck(e,"incomplete_features"),(e=>{u.default.each(e,(e=>{a[e[0]]=e}))})),u.default.each(e,(e=>{var t=u.default.omit(a,u.default.map(e.incomplete_features,(e=>e[0])));if(t=u.default.omit(t,u.default.keys(e.other_tiles_features_drawn)),0!==u.default.size(t)){var n={data:u.default.values(t)},i=this.view.canvas_manager.new_canvas(),s=i.getContext("2d");i.height=Math.max(e.canvas.height,this.get_canvas_height(n,e.mode,e.w_scale,100)),i.width=e.canvas.width,s.drawImage(e.canvas,0,0),s.translate(this.left_offset,0);var r=this.draw_tile(n,s,e.mode,e.region,e.w_scale,e.seq_data);o()(e.canvas).replaceWith(o()(r.canvas)),e.canvas=i,u.default.extend(e.other_tiles_features_drawn,a)}}))}if(this.filters_manager){var s,r=this.filters_manager.filters;for(s=0;s<r.length;s++)r[s].update_ui_elt();var l,d,c=!1;for(let t=0;t<e.length;t++)if(e[t].data.length)for(l=e[t].data[0],s=0;s<r.length;s++)if((d=r[s]).applies_to(l)&&d.min!==d.max){c=!0;break}this.filters_available!==c&&(this.filters_available=c,this.filters_available||this.filters_manager.hide(),this.update_icons())}if(e[0]instanceof Wt){var h=!0;for(let t=0;t<e.length;t++)if(!e[t].all_slotted){h=!1;break}this.action_icons.show_more_rows_icon.toggle(!h)}else this.action_icons.show_more_rows_icon.hide()},update_auto_mode:function(e){"Auto"===this.mode&&("no_detail"===e&&(e="feature spans"),this.action_icons.mode_icon.attr("title",`Set display mode (now: Auto/${e})`))},incremental_slots:function(e,t,n){var i=this.view.canvas_manager.dummy_context,o=this.slotters[e];return o&&o.mode===n||(o=new xt(e,n,100,(e=>i.measureText(e))),this.slotters[e]=o),o.slot_features(t)},get_mode:function(e){return"no_detail"===e.extra_info||this.is_overview?"no_detail":this.view.high-this.view.low>12e3?"Squish":"Pack"},get_canvas_height:function(e,t,n,i){if("Coverage"===t||"bigwig"===e.dataset_type)return this.summary_draw_height;var o=this.incremental_slots(n,e.data,t),a=new this.painter(null,null,null,this.config.to_key_value_dict(),t);return Math.max(this.min_height_px,a.get_required_height(o,i))},draw_tile:function(e,t,n,i,o,a,s){var r=this,l=t.canvas,d=i.get("start"),c=i.get("end"),u=this.left_offset;if("bigwig"===e.dataset_type)return this._draw_line_track_tile(e,t,n,i,o);var h=[],p=this.slotters[o].slots,f=!0;if(e.data)for(var m=this.filters_manager.filters,_=0,v=e.data.length;_<v;_++){for(var g,y=e.data[_],b=!1,w=0,k=m.length;w<k;w++)if((g=m[w]).update_attrs(y),!g.keep(y)){b=!0;break}b||(h.push(y),y[0]in p||(f=!1))}var C=this.filters_manager.alpha_filter?new Bt(this.filters_manager.alpha_filter):null,x=this.filters_manager.height_filter?new Bt(this.filters_manager.height_filter):null,S=new this.painter(h,d,c,this.config.to_key_value_dict(),n,C,x,a,(e=>r.view.get_base_color(e))),M=null,T=null;if(t.fillStyle=this.config.get_value("block_color"),t.font=t.canvas.manager.default_font,t.textAlign="right",e.data){var L=S.draw(t,l.width,l.height,o,p);M=L.feature_mapper,T=L.incomplete_features,M.translation=-u}return s?void 0:new Wt(r,i,o,l,e.data,n,e.message,f,M,T,a)}});var Qt=function(e,t,n){Vt.call(this,e,t,n),this.painter=bt.VariantPainter,this.summary_draw_height=30,this.left_offset=30};Mt(Qt.prototype,Pt.prototype,Vt.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return u.default.union(Pt.prototype.config_params,[{key:"color",label:"Histogram color",type:"color"},{key:"show_sample_data",label:"Show sample data",type:"bool",default_value:!0},{key:"show_labels",label:"Show summary and sample labels",type:"bool",default_value:!0},{key:"summary_height",label:"Locus summary height",type:"float",default_value:20},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},draw_tile:function(e,t,n,i,o){if("bigwig"===e.dataset_type)return this._draw_line_track_tile(e,t,"Histogram",i,o);var a=this.view;return new this.painter(e.data,i.get("start"),i.get("end"),this.config.to_key_value_dict(),n,(e=>a.get_base_color(e))).draw(t,t.canvas.width,t.canvas.height,o),new $t(this,i,o,t.canvas,e.data)},get_canvas_height:function(e,t,n,i){if("bigwig"===e.dataset_type)return this.summary_draw_height;var o=this.dataset.get_metadata("sample_names")?this.dataset.get_metadata("sample_names").length:0;return 0===o&&0!==e.data.length&&(o=null===(o=e.data[0][7].match(/,/g))?1:o.length+1),new this.painter(null,null,null,this.config.to_key_value_dict(),t).get_required_height(o)},predraw_init:function(){var e=[Ut.prototype.predraw_init.call(this)];return this.dataset.get_metadata("sample_names")||e.push(this.dataset.fetch()),e},postdraw_actions:function(e,t,n,i){Vt.prototype.postdraw_actions.call(this,e,t,n,i);var a=u.default.filter(e,(e=>e instanceof zt)),s=this.dataset.get_metadata("sample_names");if(0===a.length&&this.config.get_value("show_labels")&&s&&s.length>1){var r;if(0===this.container_div.find(".yaxislabel.variant").length&&(r=this.config.get_value("summary_height")/2,this.tiles_div.prepend(o()("<div/>").text("Summary").addClass("yaxislabel variant top").css({"font-size":`${r}px`,top:(this.config.get_value("summary_height")-r)/2+"px"})),this.config.get_value("show_sample_data"))){var l=s.join("<br/>");this.tiles_div.prepend(o()("<div/>").html(l).addClass("yaxislabel variant top sample").css({top:this.config.get_value("summary_height")}))}r=("Squish"===this.mode?5:10)+"px",o()(this.tiles_div).find(".sample").css({"font-size":r,"line-height":r}),o()(this.tiles_div).find(".yaxislabel").css("color",this.config.get_value("label_color"))}else this.container_div.find(".yaxislabel.variant").remove()}});var en=function(e,t,n){Xt.call(this,e,t,n),this.painter=bt.ReadPainter,this.update_icons()};Mt(en.prototype,Pt.prototype,Vt.prototype,Xt.prototype,{build_config_params:function(){return u.default.union(Pt.prototype.config_params,[{key:"block_color",label:"Histogram color",type:"color"},{key:"detail_block_color",label:"Sense strand block color",type:"color",default_value:"#AAAAAA"},{key:"reverse_strand_color",label:"Antisense strand block color",type:"color",default_value:"#DDDDDD"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})}});var tn={CompositeTrack:Zt,DrawableGroup:jt,DiagonalHeatmapTrack:Kt,FeatureTrack:Xt,LineTrack:Jt,ReadTrack:en,VariantTrack:Qt,VcfTrack:Qt},nn=(e,t,n)=>{if("copy"in e)return e.copy(n);var i=e.obj_type;return i||(i=e.track_type),new tn[i](t,n,e)};const on={TracksterView:Yt,DrawableGroup:jt,LineTrack:Jt,FeatureTrack:Xt,DiagonalHeatmapTrack:Kt,ReadTrack:en,VariantTrack:Qt,CompositeTrack:Zt,object_from_template:nn};class an extends r().Model{constructor(e){super(e)}initialize(e){this.baseURL=e}save_viz(){const e=(0,a.Bz)();e.modal.show({title:"Saving...",body:"progress"});var t=[];o()(".bookmark").each((()=>{t.push({position:o()(this).children(".position").text(),annotation:o()(this).children(".annotation").text()})}));var n=this.view.overview_drawable?this.view.overview_drawable.config.get_value("name"):null,i={view:this.view.to_dict(),viewport:{chrom:this.view.chrom,start:this.view.low,end:this.view.high,overview:n},bookmarks:t};return o().ajax({url:`${(0,_.getAppRoot)()}visualization/save`,type:"POST",dataType:"json",data:{id:this.view.vis_id,title:this.view.config.get_value("name"),dbkey:this.view.dbkey,type:"trackster",vis_json:JSON.stringify(i)}}).success((t=>{e.modal.hide(),this.view.vis_id=t.vis_id,this.view.has_changes=!1,window.history.pushState({},"",t.url+window.top.location.hash)})).error((()=>{e.modal.show({title:(0,M.ZP)("Could Not Save"),body:"Could not save visualization. Please try again later.",buttons:{Cancel:()=>{e.modal.hide()}}})}))}createButtonMenu(){var e=$([{icon_class:"plus-button",title:(0,M.ZP)("Add tracks"),on_click:()=>{we.select_datasets({dbkey:this.view.dbkey},(e=>{u.default.each(e,(e=>{this.view.add_drawable(on.object_from_template(e,this.view,this.view))}))}))}},{icon_class:"block--plus",title:(0,M.ZP)("Add group"),on_click:()=>{this.view.add_drawable(new on.DrawableGroup(this.view,this.view,{name:"New Group"}))}},{icon_class:"globe",title:(0,M.ZP)("Circster"),on_click:()=>{const e=this.view.vis_id;var t="id="+e;null==e&&(t=`dataset_id=${this.view.drawables[0].dataset.id}&hda_ldda=${this.view.drawables[0].dataset.attributes.hda_ldda}`),window.top.location=`${this.baseURL}visualization/circster?${t}`}},{icon_class:"disk--arrow",title:(0,M.ZP)("Save"),on_click:()=>{this.save_viz()}},{icon_class:"cross-circle",title:(0,M.ZP)("Close"),on_click:()=>{this.handle_unsaved_changes(this.view)}}],{tooltip_config:{placement:"bottom"}});return this.buttonMenu=e,e}add_bookmark(e,t,n){var i=o()("#right .unified-panel-body"),a=o()("<div/>").addClass("bookmark").appendTo(i),s=o()("<div/>").addClass("position").appendTo(a);o()("<a href='javascript:void(0)'/>").text(e).appendTo(s).click((()=>(this.view.go_to(e),!1)));var r=o()("<div/>").text(t).appendTo(a);if(n){var l=o()("<div/>").addClass("delete-icon-container").prependTo(a).click((()=>(a.slideUp("fast"),a.remove(),this.view.has_changes=!0,!1)));o()("<a href='javascript:void(0)'/>").addClass("icon-button delete").appendTo(l),r.make_text_editable({num_rows:3,use_textarea:!0,help_text:"Edit bookmark note"}).addClass("annotation")}return this.view.has_changes=!0,a}create_visualization(e,t,n,i,a){return this.view=new on.TracksterView(u.default.extend(e,{header:!1})),this.view.editor=!0,o().when(this.view.load_chroms_deferred).then((e=>{var o,s=null;if(t){var r=t.chrom,l=t.start,d=t.end;s=t.overview,r&&void 0!==l&&d?this.view.change_chrom(r,l,d):this.view.change_chrom(e[0].chrom)}else this.view.change_chrom(e[0].chrom);if(n)for(let e=0;e<n.length;e++)this.view.add_drawable(on.object_from_template(n[e],this.view,this.view));for(let e=0;e<this.view.drawables.length;e++)if(this.view.drawables[e].config.get_value("name")===s){this.view.set_overview(this.view.drawables[e]);break}if(i)for(let e=0;e<i.length;e++)o=i[e],this.add_bookmark(o.position,o.annotation,a);this.view.has_changes=!1})),this.set_up_router({view:this.view}),this.view}set_up_router(e){new we.TrackBrowserRouter(e),r().history.start()}init_keyboard_nav(e){o()(document).keyup((t=>{if(!o()(t.srcElement).is(":input"))switch(t.which){case 37:e.move_fraction(.25);break;case 38:e.viewport_container.scrollTop(e.viewport_container.scrollTop()-20);break;case 39:e.move_fraction(-.25);break;case 40:e.viewport_container.scrollTop(e.viewport_container.scrollTop()+20)}}))}handle_unsaved_changes(e){const t=(0,a.Bz)();e.has_changes?t.modal.show({title:(0,M.ZP)("Close visualization"),body:"There are unsaved changes to your visualization which will be lost if you do not save them.",buttons:{Cancel:()=>{t.modal.hide()},"Leave without Saving":()=>{o()(window).off("beforeunload"),window.top.location=`${(0,_.getAppRoot)()}visualizations/list`},Save:()=>{o().when(this.save_viz()).then((()=>{window.top.location=`${(0,_.getAppRoot)()}visualizations/list`}))}}}):window.top.location=`${(0,_.getAppRoot)()}visualizations/list`}}class sn extends r().View{constructor(e){super(e)}initialize(){this.ui=new an((0,_.getAppRoot)()),this.ui.createButtonMenu(),this.ui.buttonMenu.$el.attr("style","float: right"),o()("#center .unified-panel-header-inner").append(this.ui.buttonMenu.$el),o()("#right .unified-panel-title").append("Bookmarks"),o()("#right .unified-panel-icons").append("<a id='add-bookmark-button' class='icon-button menu-button plus-button' href='javascript:void(0);' title='Add bookmark'></a>"),o()("#right-border").click((()=>{this.ui.view.resize_window()})),window.galaxy_config.app.id?this.view_existing():Pe.Z.get("dataset_id")?this.choose_existing_or_new():this.view_new()}choose_existing_or_new(){const e=(0,a.Bz)();var t=Pe.Z.get("dbkey"),n={dbkey:t,dataset_id:Pe.Z.get("dataset_id"),hda_ldda:Pe.Z.get("hda_ldda"),gene_region:Pe.Z.get("gene_region")};e.modal.show({title:"View Data in a New or Saved Visualization?",body:`<p><ul style='list-style: disc inside none'>You can add this dataset as:<li>a new track to one of your existing, saved Trackster sessions if they share the genome build: <b>${t||"Not available."}</b></li><li>or create a new session with this dataset as the only track</li></ul></p>`,buttons:{Cancel:()=>{window.top.location=`${(0,_.getAppRoot)()}visualizations/list`},"View in saved visualization":()=>{this.view_in_saved(n)},"View in new visualization":()=>{this.view_new()}}})}view_in_saved(e){const t=(0,a.Bz)();var n=new ae.Z({url_base:`${(0,_.getAppRoot)()}visualization/list_tracks`,embedded:!0});t.modal.show({title:(0,M.ZP)("Add Data to Saved Visualization"),body:n.$el,buttons:{Cancel:()=>{window.top.location=`${(0,_.getAppRoot)()}visualizations/list`},"Add to visualization":()=>{o()(window.parent.document).find("input[name=id]:checked").each((()=>{e.id=o()(this).val(),window.top.location=`${(0,_.getAppRoot)()}visualization/trackster?${o().param(e)}`}))}}})}view_existing(){var e=window.galaxy_config.app.viz_config;this.ui.create_visualization({container:o()("#center .unified-panel-body"),name:e.title,vis_id:e.vis_id,dbkey:e.dbkey},e.viewport,e.tracks,e.bookmarks,!0),this.init_editor()}view_new(){const e=(0,a.Bz)();o().ajax({url:`${(0,_.getAppRoot)()}api/genomes?chrom_info=True`,data:{},error:()=>{alert("Couldn't create new browser.")},success:t=>{e.modal.show({title:(0,M.ZP)("New Visualization"),body:this.template_view_new(t),buttons:{Cancel:()=>{window.top.location=`${(0,_.getAppRoot)()}visualizations/list`},Create:()=>{this.create_browser(o()("#new-title").val(),o()("#new-dbkey").val()),e.modal.hide()}}});var n=t.map((e=>e[1]));window.galaxy_config.app.default_dbkey&&u.default.contains(n,window.galaxy_config.app.default_dbkey)&&o()("#new-dbkey").val(window.galaxy_config.app.default_dbkey),o()("#new-title").focus(),o()("select[name='dbkey']").select2(),o()("#overlay").css("overflow","auto")}})}template_view_new(e){var t='<form id="new-browser-form" action="javascript:void(0);" method="post" onsubmit="return false;"><div class="form-row"><label for="new-title">Browser name:</label><div class="form-row-input"><input type="text" name="title" id="new-title" value="Unnamed"></input></div><div style="clear: both;"></div></div><div class="form-row"><label for="new-dbkey">Reference genome build (dbkey): </label><div class="form-row-input"><select name="dbkey" id="new-dbkey">';for(let n=0;n<e.length;n++)t+=`<option value="${e[n][1]}">${e[n][0]}</option>`;return t+=`</select></div><div style="clear: both;"></div></div><div class="form-row">Is the build not listed here? <a href="${(0,_.getAppRoot)()}custom_builds" target="_top">Add a Custom Build</a></div></form>`}init_editor(){o()("#center .unified-panel-title").text(`${this.ui.view.config.get_value("name")} (${this.ui.view.dbkey})`),window.galaxy_config.app.add_dataset&&o().ajax({url:`${(0,_.getAppRoot)()}api/datasets/${window.galaxy_config.app.add_dataset}`,data:{hda_ldda:"hda",data_type:"track_config"},dataType:"json",success:e=>{this.ui.view.add_drawable(on.object_from_template(e,this.ui.view,this.ui.view))}}),o()("#add-bookmark-button").click((()=>{var e=`${this.ui.view.chrom}:${this.ui.view.low}-${this.ui.view.high}`;return this.ui.add_bookmark(e,"Bookmark description",!0)})),this.ui.init_keyboard_nav(this.ui.view),o()(window).on("beforeunload",(()=>{if(this.ui.view.has_changes)return"There are unsaved changes to your visualization that will be lost if you leave this page."}))}create_browser(e,t){o()(document).trigger("convert_to_values"),this.ui.create_visualization({container:o()("#center .unified-panel-body"),name:e,dbkey:t},window.galaxy_config.app.gene_region),this.init_editor(),this.ui.view.editor=!0}}var rn=n(50190),ln=n(72316),dn=n(18181),cn=n(55806);const un=ln.Model.extend({defaults:{url_base:"",async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},can_async_op:function(e){return-1!==dn.indexOf(this.attributes.async_ops,e)},add_filter:function(e,t,n){if(n){var i,o=this.attributes.filters[e];if(null==o)i=t;else if("string"==typeof o)if("All"==o||o==t)i=t;else{var a=[];a[0]=o,a[1]=t,i=a}else-1===(i=o).indexOf(t)&&i.push(t);this.attributes.filters[e]=i}else this.attributes.filters[e]=t},remove_filter:function(e,t){var n=this.attributes.filters[e];if(null==n)return!1;if("string"==typeof n)this.attributes.filters[e]="";else{var i=dn.indexOf(n,t);-1!==i&&(n[i]="")}},get_url_data:function(){var e={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(e.operation=this.attributes.operation),this.attributes.item_ids&&(e.id=this.attributes.item_ids);return dn.each(dn.pairs(this.attributes.filters),(t=>{e[`f-${t[0]}`]=t[1]})),e},get_url:function(e){return`${this.get("url_base")}?${cn.param(this.get_url_data())}&${cn.param(e)}`}});var hn=n(27856),pn=n(55806),fn=n(18181);const mn={grid:function(e){var t="";return t=e.embedded?this.grid_header(e)+this.grid_table(e):`<div class="loading-elt-overlay"></div><table><tr><td width="75%">${this.grid_header(e)}</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>${this.grid_table(e)}`,e.info_text&&(t+=`<br><div class="toolParamHelp" style="clear: both;">${e.info_text}</div>`),t},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(e){var t='<div class="grid-header">';if(e.embedded||(t+=`<h2>${e.title}</h2>`),e.global_actions){t+='<ul class="manage-table-actions">';var n=e.global_actions.length>=3;n&&(t+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');for(let n of e.global_actions)t+=`<li><a class="action-button use-target" target="${n.target}" href="${n.url_args}" onclick="return false;" >${n.label}</a></li>`;n&&(t+="</div>"),t+="</ul>"}return e.insert&&(t+=e.insert),t+=this.grid_filters(e),t+="</div>"},header:function(e){var t="<tr>";e.show_item_checkboxes&&(t+="<th>",e.items.length>0&&(t+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),t+="</th>");for(let n of e.columns)n.visible&&(t+=`<th id="${n.key}-header">`,n.href?t+=`<a href="${n.href}" class="sort-link" sort_key="${n.key}">${n.label}</a>`:t+=n.label,t+=`<span class="sort-arrow">${n.extra}</span></th>`);return t+="</tr>"},body:function(e){var t="";0===e.items.length&&(t+='<tr><td colspan="100"><em>No items</em></td></tr>');for(let d of e.items){t+="<tr ",e.current_item_id==d.id&&(t+='class="current"'),t+=">",e.show_item_checkboxes&&(t+=`<td style="width: 1.5em;"><input type="checkbox" name="id" value="${d.encode_id}" id="${d.encode_id}" class="grid-row-select-checkbox" /></td>`);for(let c of e.columns)if(c.visible){var n="";c.nowrap&&(n='style="white-space:nowrap;"');var i=d.column_config[c.label],o=i.link,a=i.value,s=i.target;"string"===pn.type(a)&&(a=a.replace(/\/\//g,"/"));var r="",l="";c.attach_popup&&(r=`grid-${d.encode_id}-popup`,l="menubutton",""!==o&&(l+=" split"),l+=" popup"),t+=`<td ${n}>`,o?(0!==e.operations.length&&(t+=`<div id="${r}" class="${l}" style="float: left;">`),t+=`<a class="menubutton-label use-target" target="${s}" href="${o}" onclick="return false;">${a}</a>`,0!==e.operations.length&&(t+="</div>")):t+=`<div id="${r}" class="${l}"><label id="${c.label_id_prefix}${d.encode_id}" for="${d.encode_id}">${a||""}</label></div>`,t+="</td>"}t+="</tr>"}return t},footer:function(e){var t="";if(e.use_paging&&e.num_pages>1){var n=e.num_page_links,i=e.cur_page_num,o=e.num_pages;const h=e.allow_fetching_all_results;var a=n/2,s=i-a,r=0;s<=0&&(r=a-(i-(s=1)));var l,d=a+r,c=i+d;0!==(l=c<=o?0:d-((c=o)+1-i))&&(s-=l)<1&&(s=1),t+='<tr id="page-links-row">',e.show_item_checkboxes&&(t+="<td></td>"),t+='<td colspan="100"><span id="page-link-container">Page:',s>1&&(t+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var u=s;u<c+1;u++)u==e.cur_page_num?t+=`<span class="page-link inactive-link" id="page-link-${u}">${u}</span>`:t+=`<span class="page-link" id="page-link-${u}"><a href="javascript:void(0);" onclick="return false;" page_num="${u}">${u}</a></span>`;c<o&&(t+=`...<span class="page-link" id="page-link-${o}"><a href="javascript:void(0);" onclick="return false;" page_num="${o}">${o}</a></span>`),t+="</span>",h&&(t+='\n                        <span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                        </td>\n                    </tr>')}if(e.show_item_checkboxes){t+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items:\n            ';for(let n of e.operations)n.allow_multiple&&(t+=`<input type="button" value="${n.label}" class="operation-button action-button">&nbsp;`);t+="</td></tr>"}var h=!1;for(let t of e.operations)if(t.global_operation){h=!0;break}if(h){t+='<tr><td colspan="100">';for(let n of e.operations)n.global_operation&&(t+=`<a class="action-button" href="${n.global_operation}">${n.label}</a>`);t+="</td></tr>"}return e.legend&&(t+=`<tr><td colspan="100">${e.legend}</td></tr>`),t},message:function(e){var t=e.status;return-1!=["success","ok"].indexOf(t)&&(t="done"),`<p><div class="${t}message transient-message">${fn.escape(e.message)}</div><div style="clear: both"></div></p>`},grid_filters:function(e){var t=e.default_filter_dict,n=e.filters,i="none";e.advanced_search&&(i="block");var o=!1;for(let l of e.columns)if("advanced"==l.filterable){var a=l.key,s=n[a],r=t[a];s&&r&&s!=r&&(i="block"),o=!0}var l="block";"block"==i&&(l="none");var d=`<div id="standard-search" style="display: ${l};"><table><tr><td style="padding: 0;"><table>`;for(let t of e.columns)"standard"==t.filterable&&(d+=this.grid_column_filter(e,t));d+="</table></td></tr><tr><td>",o&&(d+='<a href="javascript:void(0)" class="advanced-search-toggle">Advanced Search</a>'),d+="</td></tr></table></div>",d+=`<div id="advanced-search" style="display: ${i}; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="javascript:void(0)" class="advanced-search-toggle">Close Advanced Search</a></td></tr>`;for(let t of e.columns)"advanced"==t.filterable&&(d+=this.grid_column_filter(e,t));return d+="</table></div>"},grid_column_filter:function(e,t){var n=e.filters,i=t.label,o=t.key;"advanced"==t.filterable&&(i=i.toLowerCase());var a="<tr>";if("advanced"==t.filterable&&(a+=`<td align="left" style="padding-left: 10px">${i}:</td>`),a+='<td style="padding-bottom: 1px;">',t.is_text){a+=`<form class="text-filter-form" column_key="${o}" action="${e.url}" method="get" >`;for(let t of e.columns){var s=n[t.key];s&&"All"!=s&&(t.is_text&&(s=JSON.stringify(s)),a+=`<input type="hidden" id="${t.key}" name="f-${t.key}" value="${s}"/>`)}a+=`<span id="${o}-filtering-criteria">`;var r=n[o];if(r){var l=pn.type(r);if("string"==l&&"All"!=r&&(a+=this.filter_element(o,r)),"array"==l)for(let e in r){r.slice(e),a+=this.filter_element(o,r[e])}}a+="</span>";var d="",c=20;"standard"==t.filterable&&((d=t.label.toLowerCase()).length<20&&(c=d.length),c+=4),a+=`\n                <span class="search-box">\n                    <input class="search-box-input" id="input-${o}-filter" name="f-${o}" type="text" placeholder="${d}" size="${c}"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>`}else{a+=`<span id="${o}-filtering-criteria">`;var u=!1;for(var h in e.categorical_filters[o]){var p=e.categorical_filters[o][h],f="",m="";for(var _ in p)f=_,m=p[_];u&&(a+=" | "),u=!0;var v=n[o];v&&p[o]&&v==m?a+=`<span class="categorical-filter ${o}-filter current-filter">${h}</span>`:a+=`<span class="categorical-filter ${o}-filter"><a href="javascript:void(0);" filter_key="${f}" filter_val="${m}">${h}</a></span>`}a+="</span>"}return a+="</td></tr>"},filter_element:function(e,t){return`<span class="text-filter-val">${t=(0,hn.sanitize)(t)}<a href="javascript:void(0);" filter_key="${e}" filter_val="${t}"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>`}};var _n=n(78724),vn=n(20050);o().ajaxSettings.traditional=!0;var gn=o();const yn=r().View.extend({grid:null,initialize:function(e){this.grid=new un,this.dict_format=e.dict_format,this.title=e.title,this.title_id=e.title_id;var t=this;if(window.add_tag_to_grid_filter=(e,n)=>{var i=e+(void 0!==n&&""!==n?`:${n}`:"");gn("#advanced-search").is(":visible")||(gn("#standard-search").slideToggle("fast"),gn("#advanced-search").slideToggle("fast")),t.add_filter_condition("tags",i)},this.dict_format)if(this.setElement("<div/>"),e.url_base&&!e.items){var n=e.url_data||{};u.default.each(e.filters,((e,t)=>{n[`f-${t}`]=e})),gn.ajax({url:`${e.url_base}?${gn.param(n)}`,success:function(n){n.embedded=e.embedded,n.filters=e.filters||{},t.init_grid(n)}})}else this.init_grid(e);else this.setElement("#grid-container"),this.init_grid(e);e.use_panels&&gn("#center").css({padding:"10px",overflow:"auto"})},handle_refresh:function(e){e&&gn.inArray("history",e)>-1&&window.top.Galaxy&&window.top.Galaxy.currHistoryPanel&&window.top.Galaxy.currHistoryPanel.loadCurrentHistory()},init_grid:function(e){this.grid.set(e);var t=this.grid.attributes;this.allow_title_display&&t.title&&l.ZP.setWindowTitle(t.title),this.handle_refresh(t.refresh_frames);var n=this.grid.get("url_base");if(n=n.replace(/^.*\/\/[^\/]+/,""),this.grid.set("url_base",n),this.$el.html(mn.grid(t)),this.$el.find("#grid-table-header").html(mn.header(t)),this.$el.find("#grid-table-body").html(mn.body(t)),this.$el.find("#grid-table-footer").html(mn.footer(t)),t.message){this.$el.find("#grid-message").html(mn.message(t));var i=this;t.use_hide_message&&setTimeout((()=>{i.$el.find("#grid-message").html("")}),5e3)}this.init_grid_elements(),this.init_grid_controls(),(0,vn.L)()},init_grid_controls:function(){var e=this;this.$el.find(".operation-button").each((function(){gn(this).off(),gn(this).click((function(){return e.submit_operation(this),!1}))})),this.$el.find("input[type=text]").each((function(){gn(this).off(),gn(this).click((function(){gn(this).select()})).keyup((function(){gn(this).css("font-style","normal")}))})),this.$el.find(".sort-link").each((function(){gn(this).off(),gn(this).click((function(){return e.set_sort_condition(gn(this).attr("sort_key")),!1}))})),this.$el.find(".text-filter-form").each((function(){gn(this).off(),gn(this).submit((function(){var t=gn(this).attr("column_key"),n=gn(`#input-${t}-filter`),i=n.val();return n.val(""),e.add_filter_condition(t,i),!1}))})),this.$el.find(".text-filter-val > a").each((function(){gn(this).off(),gn(this).click((function(){return gn(this).parent().remove(),e.remove_filter_condition(gn(this).attr("filter_key"),gn(this).attr("filter_val")),!1}))})),this.$el.find(".categorical-filter > a").each((function(){gn(this).off(),gn(this).click((function(){return e.set_categorical_filter(gn(this).attr("filter_key"),gn(this).attr("filter_val")),!1}))})),this.$el.find(".advanced-search-toggle").each((function(){gn(this).off(),gn(this).click((()=>(e.$el.find("#standard-search").slideToggle("fast"),e.$el.find("#advanced-search").slideToggle("fast"),!1)))})),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",(()=>{e.check_all_items()}))},init_grid_elements:function(){this.$el.find(".grid").each((function(){var e=gn(this).find("input.grid-row-select-checkbox"),t=gn(this).find("span.grid-selected-count"),n=()=>{t.text(gn(e).filter(":checked").length)};gn(e).each((function(){gn(this).change(n)})),n()})),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var e=this.grid.attributes,t=this;this.$el.find(".page-link > a").each((function(){gn(this).click((function(){return t.set_page(gn(this).attr("page_num")),!1}))})),this.$el.find(".use-target").each((function(){gn(this).click((function(){return t.execute({href:gn(this).attr("href"),target:gn(this).attr("target")}),!1}))})),0!==e.items.length&&u.default.each(e.items,((n,i)=>{var o=t.$(`#grid-${n.encode_id}-popup`).off(),a=new _n.Z(o);u.default.each(e.operations,(e=>{t._add_operation(a,e,n)}))}))},_add_operation:function(e,t,n){var i=this,o=n.operation_config[t.label];o.allowed&&t.allow_popup&&e.addItem({html:t.label,href:o.url_args,target:o.target,confirmation_text:t.confirm,func:function(e){e.preventDefault();var o=gn(e.target).html();t.onclick?t.onclick(n.encode_id):i.execute(this.findItemByHtml(o))}})},add_filter_condition:function(e,t){if(""===t)return!1;this.grid.add_filter(e,t,!0);var n=gn(mn.filter_element(e,t)),i=this;n.click((function(){gn(this).remove(),i.remove_filter_condition(e,t)})),this.$el.find(`#${e}-filtering-criteria`).append(n),this.go_page_one(),this.execute()},remove_filter_condition:function(e,t){this.grid.remove_filter(e,t),this.go_page_one(),this.execute()},set_sort_condition:function(e){var t=this.grid.get("sort_key"),n=e;-1!==t.indexOf(e)&&"-"!==t.substring(0,1)&&(n=`-${e}`),this.$el.find(".sort-arrow").remove();var i="-"==n.substring(0,1)?"&uarr;":"&darr;",o=gn(`<span>${i}</span>`).addClass("sort-arrow");this.$el.find(`#${e}-header`).append(o),this.grid.set("sort_key",n),this.go_page_one(),this.execute()},set_categorical_filter:function(e,t){var n=this.grid.get("categorical_filters")[e],i=this.grid.get("filters")[e],o=this;this.$el.find(`.${e}-filter`).each((function(){var a=gn.trim(gn(this).text()),s=n[a][e];if(s==t)gn(this).empty(),gn(this).addClass("current-filter"),gn(this).append(a);else if(s==i){gn(this).empty();var r=gn(`<a href="javascript:void(0)" role="button">${a}</a>`);r.click((()=>{o.set_categorical_filter(e,s)})),gn(this).removeClass("current-filter"),gn(this).append(r)}})),this.grid.add_filter(e,t),this.go_page_one(),this.execute()},set_page:function(e){var t=this;this.$el.find(".page-link").each((function(){var n,i=gn(this).attr("id"),o=parseInt(i.split("-")[2],10),a=t.grid.get("cur_page");if(o===e)n=gn(this).children().text(),gn(this).empty(),gn(this).addClass("inactive-link"),gn(this).text(n);else if(o===a){n=gn(this).text(),gn(this).empty(),gn(this).removeClass("inactive-link");var s=gn(`<a href="javascript:void(0)" role="button">${n}</a>`);s.click((()=>{t.set_page(o)})),gn(this).append(s)}})),"all"===e?this.grid.set("cur_page",e):this.grid.set("cur_page",parseInt(e,10)),this.execute()},submit_operation:function(e,t){var n=gn(e).val();if(this.$el.find('input[name="id"]:checked').length<1)return!1;var i=u.default.findWhere(this.grid.attributes.operations,{label:n});i&&!t&&(t=i.confirm||"");var o=[];this.$el.find("input[name=id]:checked").each((function(){o.push(gn(this).val())}));var a={operation:n,id:o,confirmation_text:t};return"top"!=i.target&&"center"!=i.target||(a=u.default.extend(a,{href:i.href,target:i.target})),this.execute(a),!0},check_all_items:function(){var e=this.$(".grid-row-select-checkbox"),t=this.$("#check_all").prop("checked");u.default.each(e,(e=>{gn(e).prop("checked",t)})),this.init_grid_elements()},go_page_one:function(){var e=this.grid.get("cur_page");null!=e&&"all"!==e&&this.grid.set("cur_page",1)},execute:function(e){var t=null,n=null,i=null,o=null,a=null;if(e&&(n=e.href,i=e.operation,t=e.id,o=e.confirmation_text,a=e.target,void 0!==n&&-1!=n.indexOf("operation="))){var s=n.split("?");if(s.length>1)for(var r=s[1].split("&"),l=0;l<r.length;l++)-1!=r[l].indexOf("operation")?i=(i=r[l].split("=")[1]).replace(/\+/g," "):-1!=r[l].indexOf("id")&&(t=r[l].split("=")[1])}return i&&t?(o&&""!==o&&"None"!=o&&"null"!=o&&!confirm(o)||(i=i.toLowerCase(),this.grid.set({operation:i,item_ids:t}),"top"==a?window.top.location=`${n}?${gn.param(this.grid.get_url_data())}`:"center"==a?gn("#galaxy_main").attr("src",`${n}?${gn.param(this.grid.get_url_data())}`):this.grid.can_async_op(i)||this.dict_format?this.update_grid():this.go_to(a,n)),!1):n?(this.go_to(a,n),!1):(this.grid.get("async")||this.dict_format?this.update_grid():this.go_to(a,n),!1)},go_to:function(e,t){var n=this.grid.get("async");this.grid.set("async",!1);var i=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",i),t||(t=`${this.grid.get("url_base")}?${gn.param(this.grid.get_url_data())}`),this.grid.set({operation:void 0,item_ids:void 0,async:n}),e){case"center":gn("#galaxy_main").attr("src",t);break;case"top":window.top.location=t;break;default:window.location=t}},update_grid:function(){var e=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var t=this;gn.ajax({type:e,url:t.grid.get("url_base"),data:t.grid.get_url_data(),error:function(){alert("Grid refresh failed")},success:function(e){var n=t.grid.get("embedded"),i=t.grid.get("insert"),o=t.$el.find("#advanced-search").is(":visible"),a=t.dict_format?e:gn.parseJSON(e);a.embedded=n,a.insert=i,a.advanced_search=o,t.init_grid(a),t.$el.find(".loading-elt-overlay").hide()},complete:function(){t.grid.set({operation:void 0,item_ids:void 0})}})}});function bn(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function wn(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()-t,e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function kn(e,t,n,i){var a,s,r=e,l=[],d=(a=new Date,new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),0,0));for(s=0;s<24;s++)l.push(wn(d,s));var c=[];for(s=0;s<30;s++)c.push(bn(d,s));var u=60,h=50,p=60,f=300,m=0;"hours"==n?m=12.5:"days"==n&&(m=10);var _,v=f+p+30,g=1.75,y=150;_=0!==Y.max(r)?y/Y.max(r):1;var b=y+u+h;o()(".charts").css("height",b*g);var w=Y.select(`#${t}`).attr("width",v).attr("height",b).attr("preserveAspectRatio","xMidYMin").attr("viewBox",`0 0 ${v} ${b}`).on("click",(function(){var e=Y.select(this).attr("class");e=e.split(" "),Y.selectAll(`.${e[0]}`).filter(`.${e[1]}`).style("cursor","zoom-in").transition().duration(750).attr("height",b).attr("width",v),Y.select(this).style("cursor","default").transition().duration(750).attr("height",b*g).attr("width",v*g)})),k=w.selectAll("g").data(r).enter().append("g").attr("transform",((e,t)=>{var n=p;return`translate(${n+=+t*m},${u})`})).on("mouseenter",(e=>{for(var t=1,n=e;n>=10;)n/=10,t++;var i=4*t+10;Y.select(Y.event.target.parentElement).select(".tool_tip").select("text").attr("transform",`translate( ${p-5}, ${y-e*_+u+10} )`).attr("visibility","visible").text(e),Y.select(Y.event.target.parentElement).select(".tool_tip").attr("width",`${i}px`).attr("height","15px").select("rect").attr("transform",`translate( ${p-i}, ${y-e*_+u} )`).attr("width",`${i}px`).attr("height","15px").attr("fill","#ebd9b2")})).on("mouseleave",(e=>{Y.select(Y.event.target.parentElement).select(".tool_tip").select("text").attr("visibility","hidden"),Y.select(Y.event.target.parentElement).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","").text(e)}));w.append("g").append("text").attr("class","title").attr("text-anchor","end").attr("transform",(()=>"translate( 300,15 )")).text(i),w.append("g").attr("class","axis").append("path").attr("class","x").attr("d",(()=>{var e=u+y;return`M${p} ${e} L ${p+f} ${e}`}));var C=Y.scale.linear().range([y,0]),x=Y.svg.axis().scale(C).orient("left").tickFormat((e=>Y.round(e*Y.max(r),0)));w.append("g").attr("class","y axis").attr("id",`y_${t}`).attr("text-anchor","end").attr("transform",`translate( ${p},${u})`).call(x).select(".domain"),w.append("g").append("text").attr("class","ax_title").attr("transform",(()=>{var e=Y.select(`#y_${t}`).node();return`translate(${p-e.getBoundingClientRect().width-5},${u+e.getBoundingClientRect().height/2-30})rotate(-90)`})).text("Number of Jobs"),k.append("rect").attr("y",(e=>y-e*_)).attr("height",(e=>e*_)).attr("width",m-1);var S=!1;if("hours"==n){k.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(()=>`translate( ${m/2}, 150)`)),k.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 10, 160 )").text(((e,t)=>l[t].getHours()<10?`0${String(l[t].getHours())}`:l[t].getHours()));var M="";S=!1,k.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",((e,t)=>{var n=0;return l[t].getDate()!=M&&(S?n=20:(n=27,S=!0),M=l[t].getDate()),n})).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(()=>"translate( 0, 150)")),M="";var T="";S=!1,k.append("text").attr("fill","rgb(0,0,0)").attr("pointer-events","none").text(((e,t)=>{var n="";return l[t].getDate()!=T&&(n=String(l[t].toLocaleString("en-us",{month:"long"})),n+=` ${String(l[t].getDate())}`,T=l[t].getDate()),n})).attr("transform",(function(e,t){var n=y,i=Y.select(this).node().getBBox().width;return l[t].getDate()!=M&&(S?n+=18:(n+=26,S=!0),M=l[t].getDate()),`translate( ${i+2}, ${n} )`}))}else if("days"==n){k.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(()=>`translate( ${m/2}, 150)`)),k.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 9, 160 )").text(((e,t)=>c[t].getDate()<10?`0${String(c[t].getDate())}`:c[t].getDate()));var L="";S=!1,k.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",((e,t)=>{var n=0;return c[t].getMonth()!=L&&(S?n=20:(n=27,S=!0),L=c[t].getMonth()),n})).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(()=>"translate( 0, 150)")),L="";var D="";S=!1,k.append("text").attr("fill","rgb(0,100,0)").attr("pointer-events","none").text(((e,t)=>{var n="";return c[t].getMonth()!=D&&(n=String(c[t].toLocaleString("en-us",{month:"long"})),n+=` ${String(c[t].getFullYear())}`,D=c[t].getMonth()),n})).attr("transform",(function(e,t){var n=y,i=Y.select(this).node().getBBox().width;return c[t].getMonth()!=L&&(S?n+=18:(n+=26,S=!0),L=c[t].getMonth()),`translate( ${i+2}, ${n} )`}))}w.append("g").attr("class","tool_tip").append("rect"),w.select(".tool_tip").append("text"),"jc_dy_chart"!=t&&"jc_hr_chart"!=t||Y.select(`#${t}`).attr("height",b*g).attr("width",v*g).style("cursor","default")}function Cn(e,t,n){var i=e,o=60,a=60,s=150,r=s+o+50,l=300+a+30,d=Y.scale.linear().domain([0,Y.max(i)]).range([0,300]);i=Y.layout.histogram().bins(d.ticks(20))(i);for(var c,u=[],h=0;h<i.length;h++)u.push(i[h].length);c=0!==Y.max(i)?s/Y.max(u):1;var p=Y.scale.linear().domain([0,Y.max(i,(e=>e.y))]).range([s,0]);var f=Y.select(`#${t}`).attr("viewBox",`0 0 ${l} ${r}`).attr("width",l).attr("height",r).attr("preserveAspectRatio","xMidYMin").on("click",(function(){var e=Y.select(this).attr("class");e=e.split(" "),Y.selectAll(`.${e[0]}`).filter(`.${e[1]}`).style("cursor","zoom-in").transition().duration(750).attr("height",r).attr("width",l),Y.select(this).style("cursor","default").transition().duration(750).attr("height",1.75*r).attr("width",1.75*l)}));f.append("g").append("text").attr("class","title").attr("transform",(()=>"translate( 300,15 )")).text(n);var m,_=f.selectAll(".bar").data(i).enter().append("g").attr("class","bar").attr("transform",(e=>`translate(${+d(e.x)+a},${+p(e.y)+o})`)).on("mouseenter",(e=>{for(var t=0,n=e.length;n>=1;)n/=10,t++;var i=4*t+10;Y.select(Y.event.target.parentElement).select(".tool_tip").select("text").attr("transform",`translate( ${a-5}, ${s-e.length*c+o+10} )`).attr("visibility","visible").text(e.length),Y.select(Y.event.target.parentElement).select(".tool_tip").attr("width",`${i}px`).attr("height","15px").select("rect").attr("transform",`translate( ${a-i}, ${s-e.length*c+o} )`).attr("width",`${i}px`).attr("height","15px").attr("fill","#ebd9b2")})).on("mouseleave",(()=>{Y.select(Y.event.target.parentElement).select(".tool_tip").select("text").attr("visibility","hidden"),Y.select(Y.event.target.parentElement).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","")}));m=void 0===i[0]?1:d(i[0].dx),_.append("rect").attr("x",1).attr("width",m-1).attr("height",(e=>s-p(e.y)));var v=Y.svg.axis().scale(d).orient("bottom").tickFormat((e=>{var t=Math.floor(e/60),n=Math.floor(e-60*t);return t<10&&(t=`0${t}`),n<10&&(n=`0${n}`),`${t}:${n}`}));f.append("g").attr("class","x axis").attr("id",`x_${t}`).attr("transform",`translate( ${a},${150+o})`).call(v),f.append("g").append("text").attr("class","ax_title").attr("transform",(()=>{var e=Y.select(`#x_${t}`).node();return`translate(${a+e.getBoundingClientRect().width/2+30},${o+s+e.getBoundingClientRect().height+10})`})).text("ETA - hrs:mins");var g=Y.svg.axis().scale(p).orient("left");f.append("g").attr("class","y axis").attr("id",`y_${t}`).attr("transform",`translate( ${a},${o})`).call(g),f.append("g").append("text").attr("class","ax_title").attr("transform",(()=>{var e=Y.select(`#y_${t}`).node();return`translate(${a-e.getBoundingClientRect().width-5},${o+e.getBoundingClientRect().height/2-30})rotate(-90)`})).text("Number of Jobs"),f.append("g").attr("class","tool_tip").append("rect"),f.select(".tool_tip").append("text")}var xn=n(8901);const Sn=n.n(xn)();var Mn=n(54282),Tn=r().View.extend({className:"UserMenuBase",isAcceptableValue:function(e,t,n){var i,o=e.val(),a=e.attr("displayLabel")||e.attr("id").replace("phyloViz","");return i=o,isNaN(parseFloat(i))||!isFinite(i)?(alert(`${a} is not a number!`),!1):o>n?(alert(`${a} is too large.`),!1):!(o<t)||(alert(`${a} is too small.`),!1)},hasIllegalJsonCharacters:function(e){return-1!==e.val().search(/"|'|\\/)&&(alert("Named fields cannot contain these illegal characters: double quote(\"), single guote('), or back slash(\\). "),!0)}});function Ln(){var e=this,t=Y.layout.hierarchy().sort(null).value(null),n=360,i="Linear",o=18,a=200,s=0;function r(e,t,n,i){var o=e.children,l=0,d=e.dist||.5;return d=d>1?1:d,e.dist=d,e.y0=null!==i?i.y0+d*a:50,o?(o.forEach((i=>{i.parent=e,l+=r(i,t,n,e)})),e.x0=l/o.length):(e.x0=s*n,s+=1),e.x=e.x0,e.y=e.y0,e.x0}return e.leafHeight=t=>void 0===t?o:(o=t,e),e.layoutMode=t=>void 0===t?i:(i=t,e),e.layoutAngle=t=>void 0===t?n:(isNaN(t)||t<0||t>360||(n=t),e),e.separation=t=>void 0===t?a:(a=t,e),e.links=e=>Y.layout.tree().links(e),e.nodes=(a,l)=>{"[object Array]"===toString.call(a)&&(a=a[0]);var d=t.call(e,a,l),c=[],u=0,h=0;return window._d=a,window._nodes=d,d.forEach((e=>{u=e.depth>u?e.depth:u,c.push(e)})),c.forEach((e=>{e.children||(h+=1,e.depth=u)})),o="Circular"===i?n/h:o,s=0,r(c[0],u,o,null),c},e}var Dn=we.Visualization.extend({defaults:{layout:"Linear",separation:250,leafHeight:18,type:"phyloviz",title:(0,M.ZP)("Title"),scaleFactor:1,translate:[0,0],fontSize:12,selectedNode:null,nodeAttrChangedTime:0},initialize:function(e){this.set("dataset",new ne({id:e.dataset_id}))},root:{},toggle:function(e){void 0!==e&&(e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null))},toggleAll:function(e){e.children&&0!==e.children.length&&(e.children.forEach(this.toggleAll),this.toggle(e))},getData:function(){return this.root},save:function(){!function e(t){delete t.parent,t._selected&&delete t._selected;t.children&&t.children.forEach(e);t._children&&t._children.forEach(e)}(this.root);var e=o().extend(!0,{},this.attributes);return e.selectedNode=null,(0,Mn.Xt)("Saving to Galaxy","progress"),o().ajax({url:this.url(),type:"POST",dataType:"json",data:{config:JSON.stringify(e),type:"phyloviz"},success:function(e){(0,Mn.MA)()}})}}),En=r().View.extend({defaults:{nodeRadius:4.5},stdInit:function(e){var t=this;t.model.on("change:separation change:leafHeight change:fontSize change:nodeAttrChangedTime",t.updateAndRender,t),t.vis=e.vis,t.i=0,t.maxDepth=-1,t.width=e.width,t.height=e.height},updateAndRender:function(e){var t=this;e=e||t.model.root,t.renderNodes(e),t.renderLinks(e),t.addTooltips()},renderLinks:function(e){var t=this,n=t.vis.selectAll("g.completeLink").data(t.tree.links(t.nodes),(e=>e.target.id)),i=e=>{e.pos0=`${e.source.y0} ${e.source.x0}`,e.pos1=`${e.source.y0} ${e.target.x0}`,e.pos2=`${e.target.y0} ${e.target.x0}`};n.enter().insert("svg:g","g.node").attr("class","completeLink").append("svg:path").attr("class","link").attr("d",(e=>(i(e),`M ${e.pos0} L ${e.pos1}`))),n.transition().duration(500).select("path.link").attr("d",(e=>(i(e),`M ${e.pos0} L ${e.pos1} L ${e.pos2}`))),n.exit().remove()},selectNode:function(e){Y.selectAll("g.node").classed("selectedHighlight",(t=>e.id===t.id&&(e._selected?(delete e._selected,!1):(e._selected=!0,!0)))),this.model.set("selectedNode",e),o()("#phyloVizSelectedNodeName").val(e.name),o()("#phyloVizSelectedNodeDist").val(e.dist),o()("#phyloVizSelectedNodeAnnotation").val(e.annotation||"")},addTooltips:function(){o()(".tooltip").remove(),o()(".node").attr("data-original-title",(function(){var e=this.__data__,t=e.annotation||"None";return e?`${e.name?`${e.name}<br/>`:""}Dist: ${e.dist} <br/>Annotation1: ${t}${e.bootstrap?`<br/>Confidence level: ${Math.round(100*e.bootstrap)}`:""}`:""})).tooltip({placement:"top",trigger:"hover"})}}).extend({initialize:function(e){var t=this;t.margins=e.margins,t.layoutMode="Linear",t.stdInit(e),t.layout(),t.updateAndRender(t.model.root)},layout:function(){this.tree=(new Ln).layoutMode("Linear"),this.diagonal=Y.svg.diagonal().projection((e=>[e.y,e.x]))},renderNodes:function(e){var t=this,n=`${t.model.get("fontSize")}px`;t.tree.separation(t.model.get("separation")).leafHeight(t.model.get("leafHeight"));var i=t.tree.separation(t.model.get("separation")).nodes(t.model.root),o=t.vis.selectAll("g.node").data(i,(e=>e.name+e.id||(e.id=++t.i)));t.nodes=i,t.duration=500;var a=o.enter().append("svg:g").attr("class","node").on("dblclick",(()=>{Y.event.stopPropagation()})).on("click",(e=>{if(Y.event.altKey)t.selectNode(e);else{if(e.children&&0===e.children.length)return;t.model.toggle(e),t.updateAndRender(e)}}));"[object Array]"===toString.call(e)&&(e=e[0]),a.attr("transform",(t=>`translate(${e.y0},${e.x0})`)),a.append("svg:circle").attr("r",1e-6).style("fill",(e=>e._children?"lightsteelblue":"#fff")),a.append("svg:text").attr("class","nodeLabel").attr("x",(e=>e.children||e._children?-10:10)).attr("dy",".35em").attr("text-anchor",(e=>e.children||e._children?"end":"start")).style("fill-opacity",1e-6);var s=o.transition().duration(500);s.attr("transform",(e=>`translate(${e.y},${e.x})`)),s.select("circle").attr("r",t.defaults.nodeRadius).style("fill",(e=>e._children?"lightsteelblue":"#fff")),s.select("text").style("fill-opacity",1).style("font-size",n).text((e=>e.name&&""!==e.name?e.name:e.bootstrap?Math.round(100*e.bootstrap):""));var r=o.exit().transition().duration(500).remove();r.select("circle").attr("r",1e-6),r.select("text").style("fill-opacity",1e-6),i.forEach((e=>{e.x0=e.x,e.y0=e.y}))}}),On=r().View.extend({className:"phyloviz",initialize:function(e){var t=this;t.MIN_SCALE=.05,t.MAX_SCALE=5,t.MAX_DISPLACEMENT=500,t.margins=[10,60,10,80],t.width=o()("#PhyloViz").width(),t.height=o()("#PhyloViz").height(),t.radius=t.width,t.data=e.data,o()(window).resize((()=>{t.width=o()("#PhyloViz").width(),t.height=o()("#PhyloViz").height(),t.render()})),t.phyloTree=new Dn(e.config),t.phyloTree.root=t.data,t.zoomFunc=Y.behavior.zoom().scaleExtent([t.MIN_SCALE,t.MAX_SCALE]),t.zoomFunc.translate(t.phyloTree.get("translate")),t.zoomFunc.scale(t.phyloTree.get("scaleFactor")),t.navMenu=new An(t),t.settingsMenu=new In({phyloTree:t.phyloTree}),t.nodeSelectionView=new Pn({phyloTree:t.phyloTree}),t.search=new Rn,setTimeout((()=>{t.zoomAndPan()}),1e3)},render:function(){var e=this;o()("#PhyloViz").empty(),e.mainSVG=Y.select("#PhyloViz").append("svg:svg").attr("width",e.width).attr("height",e.height).attr("pointer-events","all").call(e.zoomFunc.on("zoom",(()=>{e.zoomAndPan()}))),e.boundingRect=e.mainSVG.append("svg:rect").attr("class","boundingRect").attr("width",e.width).attr("height",e.height).attr("stroke","black").attr("fill","white"),e.vis=e.mainSVG.append("svg:g").attr("class","vis"),e.layoutOptions={model:e.phyloTree,width:e.width,height:e.height,vis:e.vis,margins:e.margins},o()("#title").text(`Phylogenetic Tree from ${e.phyloTree.get("title")}:`),new En(e.layoutOptions)},zoomAndPan:function(e){var t,n;void 0!==e&&(t=e.zoom,n=e.translate);var i,o=this,a=o.zoomFunc.scale(),s=o.zoomFunc.translate(),r="";switch(t){case"reset":a=1,s=[0,0];break;case"+":a*=1.1;break;case"-":a*=.9;break;default:"number"==typeof t?a=t:null!==Y.event&&(a=Y.event.scale)}if(!(a<o.MIN_SCALE||a>o.MAX_SCALE)){if(o.zoomFunc.scale(a),i=`translate(${o.margins[3]},${o.margins[0]}) scale(${a})`,null!==Y.event)r=`translate(${Y.event.translate})`;else{if(void 0!==n){var l=n.split(",")[0],d=n.split(",")[1];isNaN(l)||isNaN(d)||(s=[s[0]+parseFloat(l),s[1]+parseFloat(d)])}o.zoomFunc.translate(s),r=`translate(${s})`}o.phyloTree.set("scaleFactor",a),o.phyloTree.set("translate",s),o.vis.attr("transform",r+i)}},reloadViz:function(){var e=this,t=o()("#phylovizNexSelector :selected").val();o().getJSON(e.phyloTree.get("dataset").url(),{tree_index:t,data_type:"raw_data"},(t=>{e.data=t.data,e.config=t,e.render()}))}}),An=r().View.extend({initialize:function(e){var t=this;t.phylovizView=e,o()("#panelHeaderRightBtns").empty(),o()("#phyloVizNavBtns").empty(),o()("#phylovizNexSelector").off(),t.initNavBtns(),t.initRightHeaderBtns(),o()("#phylovizNexSelector").off().on("change",(()=>{t.phylovizView.reloadViz()}))},initRightHeaderBtns:function(){var e=this,t=$([{icon_class:"gear",title:(0,M.ZP)("PhyloViz Settings"),on_click:function(){o()("#SettingsMenu").show(),e.settingsMenu.updateUI()}},{icon_class:"disk",title:(0,M.ZP)("Save visualization"),on_click:function(){var t=o()("#phylovizNexSelector option:selected").text();t&&e.phylovizView.phyloTree.set("title",t),e.phylovizView.phyloTree.save()}},{icon_class:"chevron-expand",title:"Search / Edit Nodes",on_click:function(){o()("#nodeSelectionView").show()}},{icon_class:"information",title:(0,M.ZP)("Phyloviz Help"),on_click:function(){window.open("https://galaxyproject.org/learn/visualization/phylogenetic-tree/")}}],{tooltip_config:{placement:"bottom"}});o()("#panelHeaderRightBtns").append(t.$el)},initNavBtns:function(){var e=this,t=$([{icon_class:"zoom-in",title:(0,M.ZP)("Zoom in"),on_click:function(){e.phylovizView.zoomAndPan({zoom:"+"})}},{icon_class:"zoom-out",title:(0,M.ZP)("Zoom out"),on_click:function(){e.phylovizView.zoomAndPan({zoom:"-"})}},{icon_class:"arrow-circle",title:"Reset Zoom/Pan",on_click:function(){e.phylovizView.zoomAndPan({zoom:"reset"})}}],{tooltip_config:{placement:"bottom"}});o()("#phyloVizNavBtns").append(t.$el)}}),In=Tn.extend({className:"Settings",initialize:function(e){var t=this;t.phyloTree=e.phyloTree,t.el=o()("#SettingsMenu"),t.inputs={separation:o()("#phyloVizTreeSeparation"),leafHeight:o()("#phyloVizTreeLeafHeight"),fontSize:o()("#phyloVizTreeFontSize")},o()("#settingsCloseBtn").off().on("click",(()=>{t.el.hide()})),o()("#phylovizResetSettingsBtn").off().on("click",(()=>{t.resetToDefaults()})),o()("#phylovizApplySettingsBtn").off().on("click",(()=>{t.apply()}))},apply:function(){var e=this;e.isAcceptableValue(e.inputs.separation,50,2500)&&e.isAcceptableValue(e.inputs.leafHeight,5,30)&&e.isAcceptableValue(e.inputs.fontSize,5,20)&&o().each(e.inputs,((t,n)=>{e.phyloTree.set(t,n.val())}))},updateUI:function(){var e=this;o().each(e.inputs,((t,n)=>{n.val(e.phyloTree.get(t))}))},resetToDefaults:function(){o()(".tooltip").remove();var e=this;o().each(e.phyloTree.defaults,((t,n)=>{e.phyloTree.set(t,n)})),e.updateUI()},render:function(){}}),Pn=Tn.extend({className:"Settings",initialize:function(e){var t=this;t.el=o()("#nodeSelectionView"),t.phyloTree=e.phyloTree,t.UI={enableEdit:o()("#phylovizEditNodesCheck"),saveChanges:o()("#phylovizNodeSaveChanges"),cancelChanges:o()("#phylovizNodeCancelChanges"),name:o()("#phyloVizSelectedNodeName"),dist:o()("#phyloVizSelectedNodeDist"),annotation:o()("#phyloVizSelectedNodeAnnotation")},t.valuesOfConcern={name:null,dist:null,annotation:null},o()("#nodeSelCloseBtn").off().on("click",(()=>{t.el.hide()})),t.UI.saveChanges.off().on("click",(()=>{t.updateNodes()})),t.UI.cancelChanges.off().on("click",(()=>{t.cancelChanges()})),(e=>{e.fn.enable=function(t){return e(this).each((function(){t?e(this).removeAttr("disabled"):e(this).attr("disabled","disabled")}))}})(o()),t.UI.enableEdit.off().on("click",(()=>{t.toggleUI()}))},toggleUI:function(){var e=this,t=e.UI.enableEdit.is(":checked");t||e.cancelChanges(),o().each(e.valuesOfConcern,((n,i)=>{e.UI[n].enable(t)})),t?(e.UI.saveChanges.show(),e.UI.cancelChanges.show()):(e.UI.saveChanges.hide(),e.UI.cancelChanges.hide())},cancelChanges:function(){var e=this,t=e.phyloTree.get("selectedNode");t&&o().each(e.valuesOfConcern,((n,i)=>{e.UI[n].val(t[n])}))},updateNodes:function(){var e=this,t=e.phyloTree.get("selectedNode");if(t){if(!e.isAcceptableValue(e.UI.dist,0,1)||e.hasIllegalJsonCharacters(e.UI.name)||e.hasIllegalJsonCharacters(e.UI.annotation))return;o().each(e.valuesOfConcern,((n,i)=>{t[n]=e.UI[n].val()})),e.phyloTree.set("nodeAttrChangedTime",new Date)}else alert("No node selected")}}),Rn=Tn.extend({initialize:function(){var e=this;o()("#phyloVizSearchBtn").on("click",(()=>{var t=o()("#phyloVizSearchTerm"),n=o()("#phyloVizSearchCondition").val().split("-"),i=n[0],a=n[1];e.hasIllegalJsonCharacters(t),"dist"===i&&e.isAcceptableValue(t,0,1),e.searchTree(i,a,t.val())}))},searchTree:function(e,t,n){Y.selectAll("g.node").classed("searchHighlight",(i=>{var o=i[e];if(null!=o)if("dist"===e)switch(t){case"greaterEqual":return o>=+n;case"lesserEqual":return o<=+n;default:return}else if("name"===e||"annotation"===e)return-1!==o.toLowerCase().indexOf(n.toLowerCase())}))}}),jn=r().Model.extend({defaults:{inputs:null,values:null}}),Yn=r().Model.extend({defaults:{tool:null,tree_data:null},initialize:function(e){var t=this;this.get("tool").get("inputs").each((e=>{e.on("change:min change:max change:num_samples",(e=>{e.get("in_ptree")&&t.set_tree_data()}),t),e.on("change:in_ptree",(e=>{e.get("in_ptree")?t.add_param(e):t.remove_param(e),t.set_tree_data()}),t)})),e.config&&u.default.each(e.config,(e=>{var n=t.get("tool").get("inputs").find((t=>t.get("name")===e.name));t.add_param(n),n.set(e)}))},add_param:function(e){e.get("ptree_index")||(e.set("in_ptree",!0),e.set("ptree_index",this.get_tree_params().length))},remove_param:function(e){e.set("in_ptree",!1),e.set("ptree_index",null),(0,u.default)(this.get_tree_params()).each(((e,t)=>{e.set("ptree_index",t+1)}))},set_tree_data:function(){var e=u.default.map(this.get_tree_params(),(e=>({param:e,samples:e.get_samples()}))),t=0,n=(e,i)=>{var o=e[i],a=o.param,s=o.samples;return e.length-1===i?u.default.map(s,(e=>({id:t++,name:e,param:a,value:e}))):u.default.map(s,(o=>({id:t++,name:o,param:a,value:o,children:n(e,i+1)})))};this.set("tree_data",{name:"Root",id:t++,children:0!==e.length?n(e,0):null})},get_tree_params:function(){return(0,u.default)(this.get("tool").get("inputs").where({in_ptree:!0})).sortBy((e=>e.get("ptree_index")))},get_num_leaves:function(){return this.get_tree_params().reduce(((e,t)=>e*t.get_samples().length),1)},get_node_settings:function(e){var t=this.get("tool").get_inputs_dict(),n=e.parent;if(n)for(;0!==n.depth;)t[n.param.get("name")]=n.value,n=n.parent;var i=this,o=(e,t)=>(e.param&&(t[e.param.get("name")]=e.value),e.children?u.default.flatten(u.default.map(e.children,(e=>o(e,u.default.clone(t))))):new jn({inputs:i.get("tool").get("inputs"),values:t})),a=o(e,t);return u.default.isArray(a)||(a=[a]),a},get_connected_nodes:function(e){for(var t=e=>e.children?u.default.flatten([e,u.default.map(e.children,(e=>t(e)))]):e,n=[],i=e.parent;i;)n.push(i),i=i.parent;return u.default.flatten([n,t(e)])},get_leaf:function(e){for(var t,n=this.get("tree_data");n.children;)t=n.children,n=u.default.find(t,(t=>e[t.param.get("name")]===t.value));return n},toJSON:function(){return this.get_tree_params().map((e=>({name:e.get("name"),min:e.get("min"),max:e.get("max"),num_samples:e.get("num_samples")})))}}),Hn=r().Model.extend({defaults:{track:null,mode:"Pack",settings:null,regions:null},initialize:function(e){if(this.set("regions",e.regions),e.track){var t=u.default.extend({data_url:`${(0,_.getAppRoot)()}dummy1`,converted_datasets_state_url:`${(0,_.getAppRoot)()}dummy2`},e.track);this.set("track",on.object_from_template(t,{},null))}},same_settings:function(e){var t=this.get("settings"),n=e.get("settings");for(var i in t)if(!n[i]||t[i]!==n[i])return!1;return!0},toJSON:function(){return{track:this.get("track").to_dict(),settings:this.get("settings"),regions:this.get("regions")}}}),Nn=r().Collection.extend({model:Hn}),Fn=we.Visualization.extend({defaults:u.default.extend({},we.Visualization.prototype.defaults,{dataset:null,tool:null,parameter_tree:null,regions:null,tracks:null,default_mode:"Pack"}),initialize:function(e){this.set("dataset",new ne(e.dataset)),this.set("tool",new qe.Tool(e.tool)),this.set("regions",new we.GenomeRegionCollection(e.regions)),this.set("tracks",new Nn(e.tracks));var t=this.get("tool");this.set("tool_with_samplable_inputs",t),t.remove_inputs(["data","hidden_data","conditional","text"]),this.set("parameter_tree",new Yn({tool:t,config:e.tree_config}))},add_track:function(e){this.get("tracks").add(e)},toJSON:function(){return{id:this.get("id"),title:`Parameter exploration for dataset '${this.get("dataset").get("name")}'`,type:"sweepster",dataset_id:this.get("dataset").id,tool_id:this.get("tool").id,regions:this.get("regions").toJSON(),tree_config:this.get("parameter_tree").toJSON(),tracks:this.get("tracks").toJSON()}}}),Bn=r().View.extend({tagName:"tr",TILE_LEN:250,initialize:function(e){this.canvas_manager=e.canvas_manager,this.render(),this.model.on("change:track change:mode",this.draw_tiles,this)},render:function(){var e=this.model.get("settings"),t=e.get("values"),n=o()("<td/>").addClass("settings").appendTo(this.$el),i=o()("<div/>").addClass("track-info").hide().appendTo(n);i.append(o()("<div/>").css("font-weight","bold").text("Track Settings")),e.get("inputs").each((e=>{i.append(`${e.get("label")}: ${t[e.get("name")]}<br/>`)}));var a=this;o()("<button/>").appendTo(i).text("Run on complete dataset").click((()=>{i.toggle(),a.trigger("run_on_dataset",e)}));var s=$([{title:(0,M.ZP)("Settings"),icon_class:"gear track-settings",on_click:function(){i.toggle()}},{title:(0,M.ZP)("Remove"),icon_class:"cross-circle",on_click:function(){a.$el.remove(),o()(".tooltip").remove()}}]);n.prepend(s.$el),this.model.get("regions").each((()=>{a.$el.append(o()("<td/>").addClass("tile").html(o()("<img/>").attr("src",`${(0,_.getAppRoot)()}images/loading_large_white_bg.gif`)))})),this.model.get("track")&&this.draw_tiles()},draw_tiles:function(){var e=this,t=this.model.get("track"),n=this.model.get("regions"),i=this.$el.find("td.tile");t&&o().when(t.data_manager.data_is_ready()).then((a=>{n.each(((n,a)=>{var s=n.length()/e.TILE_LEN,r=1/s,l=e.model.get("mode");o().when(t.data_manager.get_data(n,l,s,{})).then((s=>{var d=e.canvas_manager.new_canvas();d.width=e.TILE_LEN,d.height=t.get_canvas_height(s,l,r,d.width),t.draw_tile(s,d.getContext("2d"),l,n,r),o()(i[a]).empty().append(d)}))}))}))}}),$n=r().View.extend({number_input_template:'<div class="form-row-input sweep"><input class="min" type="text" size="6" value="<%= min %>"> - <input class="max" type="text" size="6" value="<%= max %>"> samples: <input class="num_samples" type="text" size="1" value="<%= num_samples %>"></div>',select_input_template:'<div class="form-row-input sweep"><%= options %></div>',initialize:function(e){this.$el=e.tool_row,this.render()},render:function(){var e=this.model,t=this.$el.find(".form-row-input"),n=null;if(t.find(":input").change((function(){e.set("value",o()(this).val())})),e instanceof qe.IntegerToolParameter)n=o()(u.default.template(this.number_input_template)(this.model.toJSON()));else if(e instanceof qe.SelectToolParameter){var i=u.default.map(this.$el.find("select option"),(e=>o()(e).val())).join(", ");n=o()(u.default.template(this.select_input_template)({options:i}))}n.insertAfter(t);var a=this,s=$([{title:(0,M.ZP)("Add parameter to tree"),icon_class:"plus-button",on_click:function(){e.set("in_ptree",!0),t.hide(),n.show(),o()(this).hide(),a.$el.find(".icon-button.toggle").show()}},{title:(0,M.ZP)("Remove parameter from tree"),icon_class:"toggle",on_click:function(){e.set("in_ptree",!1),n.hide(),t.show(),o()(this).hide(),a.$el.find(".icon-button.plus-button").show()}}],{});this.$el.prepend(s.$el),e.get("in_ptree")?(t.hide(),a.$el.find(".icon-button.plus-button").hide()):(a.$el.find(".icon-button.toggle").hide(),n.hide()),u.default.each(["min","max","num_samples"],(t=>{n.find(`.${t}`).change((function(){e.set(t,parseFloat(o()(this).val()))}))}))}}),zn=r().View.extend({className:"tree-design",initialize:function(e){this.render()},render:function(){var e=new qe.ToolFormView({model:this.model.get("tool")});e.render(),this.$el.append(e.$el);var t=this.model.get("tool").get("inputs");this.$el.find(".form-row").not(".form-actions").each((function(e){new $n({model:t.at(e),tool_row:o()(this)})}))}}),Wn=r().View.extend({className:"tool-parameter-tree",initialize:function(e){this.model.on("change:tree_data",this.render,this)},render:function(){this.$el.children().remove();var e=this.model.get_tree_params();if(e.length){this.width=100*(2+e.length),this.height=15*this.model.get_num_leaves();var t=this,n=Y.layout.cluster().size([this.height,this.width-160]),i=Y.svg.diagonal().projection((e=>[e.y,e.x])),a=n.nodes(this.model.get("tree_data")),s=u.default.uniq(u.default.pluck(a,"y"));u.default.each(e,((e,n)=>{var i=s[n+1],a=o()("#center").position().left;t.$el.append(o()("<div>").addClass("label").text(e.get("label")).css("left",i+a))}));var r=Y.select(this.$el[0]).append("svg").attr("width",this.width).attr("height",this.height+30).append("g").attr("transform","translate(40, 20)");r.selectAll("path.link").data(n.links(a)).enter().append("path").attr("class","link").attr("d",i);var l=r.selectAll("g.node").data(a).enter().append("g").attr("class","node").attr("transform",(e=>`translate(${e.y},${e.x})`)).on("mouseover",(e=>{var n=u.default.pluck(t.model.get_connected_nodes(e),"id");l.filter((e=>void 0!==u.default.find(n,(t=>t===e.id)))).style("fill","#f00")})).on("mouseout",(()=>{l.style("fill","#000")}));l.append("circle").attr("r",9),l.append("text").attr("dx",(e=>e.children?-12:12)).attr("dy",3).attr("text-anchor",(e=>e.children?"end":"start")).text((e=>e.name))}}}),Un=r().View.extend({className:"Sweepster",helpText:"<div><h4>Getting Started</h4><ol><li>Create a parameter tree by using the icons next to the tool's parameter names to add or remove parameters.<li>Adjust the tree by using parameter inputs to select min, max, and number of samples<li>Run the tool with different settings by clicking on tree nodes</ol></div>",initialize:function(e){this.canvas_manager=new we.CanvasManager(this.$el.parents("body")),this.tool_param_tree_view=new Wn({model:this.model.get("parameter_tree")}),this.track_collection_container=o()("<table/>").addClass("tracks"),this.model.get("parameter_tree").on("change:tree_data",this.handle_node_clicks,this);var t=this;this.model.get("tracks").each((e=>{e.get("track").view=t})),this.config=Z.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"},{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"}],{})},render:function(){var e=new zn({model:this.model.get("parameter_tree")});o()("#left").append(e.$el);var t=this,n=t.model.get("regions"),i=o()("<tr/>").appendTo(this.track_collection_container);n.each((e=>{i.append(o()("<th>").text(e.toString()))})),i.children().first().attr("colspan",2);var a=o()("<div>").addClass("tiles");o()("#right").append(a.append(this.track_collection_container)),t.model.get("tracks").each((e=>{t.add_track(e)}));var s=o()(this.helpText).addClass("help"),r=$([{title:(0,M.ZP)("Close"),icon_class:"cross-circle",on_click:function(){o()(".tooltip").remove(),s.remove()}}]);s.prepend(r.$el.css("float","right")),o()("#center").append(s),this.tool_param_tree_view.render(),o()("#center").append(this.tool_param_tree_view.$el),this.handle_node_clicks();var l=$([{icon_class:"chevron-expand",title:"Set display mode"},{icon_class:"cross-circle",title:(0,M.ZP)("Close"),on_click:function(){window.top.location=`${(0,_.getAppRoot)()}visualizations/list`}}],{tooltip_config:{placement:"bottom"}}),d={};u.default.each(["Squish","Pack"],(e=>{d[e]=()=>{t.model.set("default_mode",e),t.model.get("tracks").each((t=>{t.set("mode",e)}))}})),(0,H.J)(l.$el.find(".chevron-expand"),d),l.$el.attr("style","float: right"),o()("#right .unified-panel-header-inner").append(l.$el)},get_base_color:function(e){return this.config.get_value(`${e.toLowerCase()}_color`)||this.config.get_value("n_color")},run_tool_on_dataset:function(e){var t=this.model.get("tool"),n=t.get("name"),i=this.model.get("dataset");t.set_input_values(e.get("values")),o().when(t.rerun(i)).then((e=>{})),(0,Mn.LJ)(`Running ${n} on complete dataset`,`${n} is running on dataset '${i.get("name")}'. Outputs are in the dataset's history.`,{Ok:function(){(0,Mn.MA)()}})},add_track:function(e){var t=this,n=this.model.get("parameter_tree");t.model.add_track(e);var i=new Bn({model:e,canvas_manager:t.canvas_manager});return i.on("run_on_dataset",t.run_tool_on_dataset,t),t.track_collection_container.append(i.$el),i.$el.hover((()=>{var i=n.get_leaf(e.get("settings").get("values")),o=u.default.pluck(n.get_connected_nodes(i),"id");Y.select(t.tool_param_tree_view.$el[0]).selectAll("g.node").filter((e=>void 0!==u.default.find(o,(t=>t===e.id)))).style("fill","#f00")}),(()=>{Y.select(t.tool_param_tree_view.$el[0]).selectAll("g.node").style("fill","#000")})),e},handle_node_clicks:function(){var e=this,t=this.model.get("parameter_tree"),n=this.model.get("regions");Y.select(this.tool_param_tree_view.$el[0]).selectAll("g.node").on("click",((i,a)=>{var s=e.model.get("tool"),r=e.model.get("dataset"),l=t.get_node_settings(i),d=o().Deferred();l.length>=10?(0,Mn.LJ)("Whoa there cowboy!",`You clicked on a node to try ${e.model.get("tool").get("name")} with ${l.length} different combinations of settings. You can only run 10 jobs at a time.`,{Ok:function(){(0,Mn.MA)(),d.resolve(!1)}}):d.resolve(!0),o().when(d).then((t=>{if(t){var i=u.default.map(l,(t=>{var i=new Hn({settings:t,regions:n,mode:e.model.get("default_mode")});return e.add_track(i),i}));u.default.each(i,((t,i)=>{setTimeout((()=>{s.set_input_values(t.get("settings").get("values")),o().when(s.rerun(r,n)).then((n=>{var i=n.first(),o=i.get("track_config");o.dataset=i,o.tool=null,o.prefs=e.config.to_key_value_dict();var a=on.object_from_template(o,e,null);a.init_for_tool_data(),t.set("track",a)}))}),1e4*i)}))}}))}))}}),Vn=o();const qn=function(e,t,n,i,o,a,s,r,l){void 0===o&&(o=30),void 0===s&&(s=4),Vn(`#${e}`).off().click((()=>{if(!(Vn("#renaming-active").length>0)){var e,d=Vn(`#${t}`),c=d.text();(e=a?Vn("<textarea></textarea>").attr({rows:s,cols:o}).text(Vn.trim(c)):Vn("<input type='text'></input>").attr({value:Vn.trim(c),size:o})).attr("id","renaming-active"),e.blur((function(){Vn(this).remove(),d.show(),l&&l(e)})),e.keyup((function(o){if(27===o.keyCode)Vn(this).trigger("blur");else if(13===o.keyCode){var a={};a[i]=Vn(this).val(),Vn(this).trigger("blur"),Vn.ajax({url:n,data:a,error:function(){alert(`Text editing for elt ${t} failed`)},success:function(t){""!==t?d.text(t):d.html("<em>None</em>"),l&&l(e)}})}})),r&&r(e),d.hide(),e.insertAfter(d),e.focus(),e.select()}}))};var Zn=n(94206),Gn=n(79546),Jn=n.n(Gn);function Kn(e){new sn(e)}function Xn(e){new Ae.GalaxyApp(e)}function Qn(e){return new j(e)}},29761:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11411);const o={props:{oncancel:{type:Function,required:!0},renderExtensionsToggle:{type:Boolean,default:!1},hideSourceItems:{type:Boolean,required:!0},suggestedName:{type:String,required:!1,default:""}},data:function(){return{titleForHelp:(0,i.ZP)("Expand or Close Help"),hideOriginalsText:(0,i.ZP)("Hide original elements?"),titleMoreHelp:(0,i.ZP)("Close and show more help"),placeholderEnterName:(0,i.ZP)("Enter a name for your new collection"),dropdownText:(0,i.ZP)("Create a <i>single</> pair"),isExpanded:!1,collectionName:this.suggestedName,removeFileExtensionsText:"Remove file extensions?",localHideSourceItems:this.hideSourceItems}},computed:{validInput:function(){return this.collectionName.length>0}},watch:{localHideSourceItems(){this.$emit("onUpdateHideSourceItems",this.localHideSourceItems)}},methods:{l:e=>(0,i.ZP)(e),_clickForHelp:function(){return this.isExpanded=!this.isExpanded,this.isExpanded},_cancelCreate:function(){this.oncancel()},_getName:function(){return this.collectionName}}};const a={components:{CollectionCreator:(0,n(51900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"collection-creator"},[t("div",{staticClass:"header flex-row no-flex"},[t("div",{staticClass:"main-help well clear",class:{expanded:e.isExpanded}},[t("a",{staticClass:"more-help",attrs:{href:"javascript:void(0);",role:"button",title:e.titleForHelp},on:{click:e._clickForHelp}},[e.isExpanded?t("div",[t("i",{staticClass:"fas fa-chevron-up"})]):t("div",[t("i",{staticClass:"fas fa-chevron-down"})])]),e._v(" "),t("div",{staticClass:"help-content"},[e._t("help-content"),e._v(" "),t("a",{staticClass:"more-help",attrs:{href:"javascript:void(0);",role:"button",title:e.titleForHelp},on:{click:e._clickForHelp}})],2)])]),e._v(" "),t("div",{staticClass:"middle flex-row flex-row-container"},[e._t("middle-content")],2),e._v(" "),t("div",{staticClass:"footer flex-row no-flex"},[t("div",{staticClass:"attributes clear"},[t("div",{staticClass:"clear"},[e.renderExtensionsToggle?t("label",{staticClass:"setting-prompt float-right"},[e._v("\n                    "+e._s(e.removeFileExtensionsText)+"\n                    "),t("input",{staticClass:"remove-extensions float-right",attrs:{type:"checkbox",checked:""},on:{click:function(t){return e.$emit("remove-extensions-toggle")}}})]):e._e(),e._v(" "),t("label",{staticClass:"setting-prompt float-right"},[e._v("\n                    "+e._s(e.hideOriginalsText)+"\n                    "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localHideSourceItems,expression:"localHideSourceItems"}],staticClass:"hide-originals float-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.localHideSourceItems)?e._i(e.localHideSourceItems,null)>-1:e.localHideSourceItems},on:{change:function(t){var n=e.localHideSourceItems,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.localHideSourceItems=n.concat([null])):a>-1&&(e.localHideSourceItems=n.slice(0,a).concat(n.slice(a+1)))}else e.localHideSourceItems=o}}})])]),e._v(" "),t("div",{staticClass:"clear"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.collectionName,expression:"collectionName"}],staticClass:"collection-name form-control float-right",attrs:{placeholder:e.placeholderEnterName},domProps:{value:e.collectionName},on:{input:function(t){t.target.composing||(e.collectionName=t.target.value)}}}),e._v(" "),t("div",{staticClass:"collection-name-prompt float-right"},[e._v("\n                    "+e._s(e.l("Name:"))+"\n                ")])])]),e._v(" "),t("div",{staticClass:"actions clear vertically-spaced"},[t("div",{staticClass:"float-left"},[t("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e._cancelCreate}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])]),e._v(" "),t("div",{staticClass:"main-options float-right"},[t("button",{staticClass:"create-collection btn btn-primary",attrs:{disabled:!e.validInput},on:{click:function(t){return e.$emit("clicked-create",e.collectionName)}}},[e._v("\n                    "+e._s(e.l("Create collection"))+"\n                ")])])])])])}),[],!1,null,null,null).exports},props:{initialElements:{required:!0,type:Array},creationFn:{type:Function,required:!0},oncancel:{type:Function,required:!0},oncreate:{type:Function,required:!0},defaultHideSourceItems:{type:Boolean,required:!1,default:!0}},data(){return{hideSourceItems:this.defaultHideSourceItems}},methods:{onUpdateHideSourceItems(e){this.hideSourceItems=e},_naiveStartingAndEndingLCS:function(e,t){for(var n="",i="",o=0,a=0;o<e.length&&o<t.length&&e[o]===t[o];)n+=e[o],o+=1;if(o===e.length)return e;if(o===t.length)return t;for(o=e.length-1,a=t.length-1;o>=0&&a>=0&&e[o]===t[a];)i=[e[o],i].join(""),o-=1,a-=1;return n+i}}}},8199:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});class i{constructor(e){this.root=e,this.navigation=[]}getUrl(e){if(e)this.navigation.push(e);else{this.navigation.pop();const t=this.navigation.length;e=t>0?this.navigation[t-1]:this.root}return e}atRoot(){return 0==this.navigation.length}}},73463:(e,t,n)=>{"use strict";n.d(t,{c:()=>w});var i=n(70538),o=n(9382),a=n(51436),s=n(57810),r=n(73106),l=n(15193),d=n(62101),c=n(8199);const u=(e,t)=>function(e,t){return e!==t&&t.startsWith(e)}(h(e),h(t));function h(e){return e.endsWith("/")?e:e+"/"}var p=n(66747),f=n(7767),m=n(50452);class _{constructor(e={}){Object.defineProperty(this,"values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multiple",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.values={},this.multiple=e.multiple||!1}add(e){this.multiple||(this.values={});const t=e.id;if(!t)throw Error("Invalid record with no <id>.");this.values[t]?delete this.values[t]:this.values[t]=e}count(){return Object.keys(this.values).length}exists(e){return!!this.values[e]}pathExists(e){return Object.values(this.values).some((t=>u(e,t.url)))}unselectUnderPath(e){Object.keys(this.values).forEach((t=>{const n=this.values[t];n&&u(e,n.url)&&delete this.values[t]}))}finalize(){const e=[];return Object.values(this.values).forEach((t=>{e.push(t)})),e.length>0&&!this.multiple?e.at(0):e}}var v=n(35655),g=n(33204),y=n(35409);const b=(0,i.defineComponent)({__name:"FilesDialog",props:{multiple:{type:Boolean,default:!1},mode:{default:"file"},requireWritable:{type:Boolean,default:!1},filterOptions:{default:void 0},callback:{type:Function,default:()=>{}}},setup(e){const t=e;o.vI.add(a.Uu6);const{config:n,isConfigLoaded:h}=(0,f.Z)(),b=(0,i.ref)(new _({multiple:t.multiple})),w=(0,i.ref)(!1),k=(0,i.ref)([]),C=(0,i.ref)(),x=(0,i.ref)(),S=(0,i.ref)([]),M=(0,i.ref)(!0),T=(0,i.ref)(!1),L=(0,i.ref)(!1),D=(0,i.ref)(!1),E=(0,i.ref)(!0),O=(0,i.ref)(!0),A=(0,i.ref)(!1),I=(0,i.ref)(),P=(0,i.ref)(!1),R=(0,i.ref)(p.L.unselected),j=(0,i.ref)(new c.B("")),Y=(0,i.computed)((()=>"file"==t.mode)),H=(0,i.computed)((()=>Y.value&&!D.value||A.value||!Y.value&&j.value.atRoot()));function N(e,n=!1){const i=b.value.exists(e.id);i&&F(e.url,!0),n&&i||b.value.add(e),D.value=b.value.count()>0,t.multiple?$():J()}function F(e,t=!1,n){k.value=k.value.filter((i=>{if(n===i.id)return!1;let o;return o=t?u(i.url,e):u(i.url,e)||u(e,i.url),!o})),t||b.value.unselectUnderPath(e)}function B(e){if(z(e.id)||b.value.pathExists(e.url))F(e.url,!1,e.id);else{k.value.push(e);const t=!0;A.value=!0,(0,d.Mg)(e.url,t).then((e=>{e.forEach((e=>{const t=Z(e);t.isLeaf?N(t,!0):k.value.push(t)})),A.value=!1}))}}function $(){var e;const t=(e,t)=>e?p.L.selected:b.value.pathExists(t)?p.L.mixed:p.L.unselected;D.value=b.value.count()>0||k.value.length>0;for(const e of S.value){let n="active";e.isLeaf||!Y.value?n=b.value.exists(e.id)?"success":"default":e.isLeaf||(n=t(z(e.id),e.url)),i.default.set(e,"_rowVariant",n)}w.value=W(),(null===(e=I.value)||void 0===e?void 0:e.url)&&(R.value=t(w.value,I.value.url))}function z(e){return k.value.some((({id:t})=>t===e))}function W(){const e=Boolean(S.value.length)&&S.value.every((({id:e})=>b.value.exists(e)||z(e)));return e&&I.value&&!z(I.value.id)&&k.value.push(I.value),e}function U(e){V(e)}function V(e){var n;if(I.value=j.value.getUrl(e),P.value="gxftp://"===(null==e?void 0:e.url),x.value=void 0,T.value=!1,L.value=!j.value.atRoot(),j.value.atRoot()||C.value)C.value=void 0,(0,d.Oq)(t.filterOptions).then((e=>{const n=e.filter((e=>!t.requireWritable||e.writable)).map(G);S.value=n,$(),T.value=!0,E.value=!1,O.value=!0})).catch((e=>{C.value=(0,m.a)(e)}));else{if(!I.value)return;if("source"===t.mode)return S.value=[],T.value=!0,E.value=!1,void(O.value=!1);(0,d.Mg)(null===(n=I.value)||void 0===n?void 0:n.url,!1,t.requireWritable).then((e=>{S.value=q(e).map(Z),$(),T.value=!0,E.value=!0,O.value=!1})).catch((e=>{C.value=(0,m.a)(e)}))}}function q(e){return Y.value?e:e.filter((e=>"Directory"===e.class))}function Z(e){return{id:e.uri,label:e.name,time:"File"===e.class?e.ctime:"",details:"File"===e.class?e.ctime:"",isLeaf:"File"===e.class,url:e.uri,labelTitle:e.uri,size:"File"===e.class?e.size:0}}function G(e){return{id:e.id,label:e.label,details:e.doc,isLeaf:!1,url:e.uri_root,labelTitle:e.uri_root}}function J(){const e=b.value.finalize();M.value=!1,t.callback(e)}return(0,i.onMounted)((()=>{V()})),{__sfc:!0,props:t,config:n,isConfigLoaded:h,selectionModel:b,allSelected:w,selectedDirectories:k,errorMessage:C,filter:x,items:S,modalShow:M,optionsShow:T,undoShow:L,hasValue:D,showTime:E,showDetails:O,isBusy:A,currentDirectory:I,showFTPHelper:P,selectAllIcon:R,urlTracker:j,fileMode:Y,okButtonDisabled:H,clicked:function(e){Y.value&&(e.isLeaf?N(e):j.value.atRoot()?U(e):B(e),$())},selectSingleRecord:N,unselectPath:F,selectDirectoryRecursive:B,formatRows:$,isDirectorySelected:z,checkIfAllSelected:W,open:U,load:V,filterByMode:q,entryToRecord:Z,fileSourcePluginToRecord:G,toggleSelectAll:function(){if(!I.value)return;const e=b.value.pathExists(I.value.url);for(const t of S.value)e?(b.value.exists(t.id)||b.value.pathExists(t.id))&&(t.isLeaf?b.value.add(t):B(t)):t.isLeaf?b.value.add(t):B(t);e||0===S.value.length?z(I.value.id)&&B(I.value):k.value.push(I.value),D.value=b.value.count()>0,$()},finalize:J,goBack:function(){V()},onOk:function(){!Y.value&&I.value&&N(I.value),J()},FontAwesomeIcon:s.GN,BAlert:r.F,BButton:l.T,DataDialogSearch:v.Z,DataDialogTable:g.Z,SelectionDialog:y.Z}}});const w=(0,n(51900).Z)(b,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.SelectionDialog,{attrs:{"error-message":n.errorMessage,"options-show":n.optionsShow,"modal-show":n.modalShow,"hide-modal":()=>n.modalShow=!1,"back-func":n.goBack,"undo-show":n.undoShow},scopedSlots:e._u([{key:"search",fn:function(){return[t(n.DataDialogSearch,{model:{value:n.filter,callback:function(e){n.filter=e},expression:"filter"}})]},proxy:!0},{key:"helper",fn:function(){return[n.showFTPHelper&&n.isConfigLoaded?t(n.BAlert,{attrs:{id:"helper",variant:"info",show:""}},[e._v("\n            This Galaxy server allows you to upload files via FTP. To upload some files, log in to the FTP server at\n            "),t("strong",[e._v(e._s(n.config.ftp_upload_site))]),e._v(" using your Galaxy credentials. For help visit the\n            "),t("a",{attrs:{href:"https://galaxyproject.org/ftp-upload/",target:"_blank"}},[e._v("tutorial")]),e._v(".\n            "),n.config.enable_oidc?t("span",[t("br"),e._v("If you are signed-in to Galaxy using a third-party identity and you\n                "),t("strong",[e._v("do not have a Galaxy password")]),e._v(" please use the reset password option in the login\n                form with your email to create a password for your account.")]):e._e()]):e._e()]},proxy:!0},{key:"options",fn:function(){return[n.optionsShow?t(n.DataDialogTable,{attrs:{items:n.items,multiple:e.multiple,filter:n.filter,"select-all-icon":n.selectAllIcon,"show-select-icon":n.undoShow&&e.multiple,"show-details":n.showDetails,"show-time":n.showTime,"is-busy":n.isBusy},on:{clicked:n.clicked,open:n.open,toggleSelectAll:n.toggleSelectAll}}):e._e()]},proxy:!0},{key:"buttons",fn:function(){return[n.undoShow?t(n.BButton,{staticClass:"float-left",attrs:{id:"back-btn",size:"sm"},on:{click:function(e){return n.load()}}},[t(n.FontAwesomeIcon,{attrs:{icon:["fas","caret-left"]}}),e._v("\n            Back\n        ")],1):e._e(),e._v(" "),e.multiple||!n.fileMode?t(n.BButton,{staticClass:"float-right ml-1 file-dialog-modal-ok",attrs:{id:"ok-btn",size:"sm",variant:"primary",disabled:n.okButtonDisabled},on:{click:n.onOk}},[e._v("\n            "+e._s(n.fileMode?"Ok":"Select this folder")+"\n        ")]):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports},74664:(e,t,n)=>{"use strict";n.d(t,{BX:()=>a,G$:()=>r,UO:()=>o,X5:()=>s});var i=n(18181);function o(e,t,n,s){for(var r in s=Object.assign({},s),i.default.each(e,(e=>{e&&e.type&&e.name&&(s[e.name]=e)})),e){var l=e[r];l.name=l.name||r;var d=n?`${n}|${l.name}`:l.name;switch(l.type){case"repeat":i.default.each(l.cache,((e,n)=>{o(e,t,`${d}_${n}`,s)}));break;case"conditional":if(l.test_param){t(l.test_param,`${d}|${l.test_param.name}`,s);var c=a(l,l.test_param.value);-1!=c?o(l.cases[c].inputs,t,d,s):console.debug(`Form.utilities::visitInputs() - Invalid case for ${d}.`)}else console.debug(`Form.utilities::visitInputs() - Conditional test parameter missing for ${d}.`);break;case"section":o(l.inputs,t,d,s);break;default:t(l,d,s)}}}function a(e,t){"boolean"==e.test_param.type&&(t=["true",!0].includes(t)?void 0!==e.test_param.truevalue?e.test_param.truevalue:"true":void 0!==e.test_param.falsevalue?e.test_param.falsevalue:"false");for(let n=0;n<e.cases.length;n++)if(e.cases[n].value==t)return n;return-1}function s(e,t){var n={};return function t(i,o){if("string"==typeof o)e[i]&&(n[i]=o);else for(var a in o){var s=a;if(""!==i){var r="|";o instanceof Array&&(r="_"),s=i+r+s}t(s,o[a])}}("",t),n}function r(e,t,n=!1){let i=-1,o=null;for(const a in t){const s=t[a],r=e[a];if(r&&!r.step_linked){if(!r.optional&&"hidden"!=r.type&&(null==s||n&&""===s))return[a,"Please provide a value for this option."];if(r.wp_linked&&r.text_value==s)return[a,"Please provide a value for this workflow parameter."];if(s&&Array.isArray(s.values)&&0==s.values.length&&!r.optional)return[a,"Please provide data for this input."];if(s){if(s.rules&&0==s.rules.length)return[a,"No rules defined, define at least one rule."];if(s.mapping&&0==s.mapping.length)return[a,"No collection identifiers defined, specify at least one collection identifier."];if(s.rules&&s.rules.length>0)for(const e of s.rules)if(e.error)return[a,"Error detected in one or more rules."]}if(s&&s.batch){const e=s.values.length,t=e>0&&s.values[0]&&s.values[0].src;if(t)if(null===o)o=t;else if(o!==t)return[a,"Please select either dataset or dataset list fields for all batch mode fields."];if(-1===i)i=e;else if(i!==e)return[a,`Please make sure that you select the same number of inputs for all batch mode fields. This field contains <b>${e}</b> selection(s) while a previous field contains <b>${i}</b>.`]}}}return null}},60268:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var i=n(47011);const o=["new","waiting","queued","running","resubmitted","upload"],a=["error","failed","deleted"];class s extends Map{constructor(e={}){const{job_state_summary:t={},populated_state:n=null}=e;super(Object.entries(t)),this.populated_state=n}hasJobs(e){return!!this.has(e)&&this.get(e)>0}anyHasJobs(...e){return e.some((e=>this.hasJobs(e)))}get state(){return this.jobCount?this.isErrored?i.P.error:this.isRunning?i.P.running:this.isNew?i.P.loading:this.isTerminal?i.P.ok:i.P.queued:this.populated_state}get isNew(){return!this.populated_state||this.populated_state==i.P.new}get isErrored(){return this.populated_state==i.P.error||this.anyHasJobs(...a)}get isTerminal(){return!this.isNew&&!this.anyHasJobs(...o)}get isRunning(){return this.hasJobs(i.P.running)}get okCount(){return this.get("ok")}get okCountText(){return`${this.okCount} OK`}get jobCount(){return this.get("all_jobs")}get jobCountText(){return`${this.jobCount} Total Jobs`}get errorCount(){return(this.get("error")||0)+(this.get("failed")||0)+(this.get("deleted")||0)}get errorCountText(){return`${this.errorCount} Error`}get runningCount(){return this.get("running")}get runningCountText(){return`${this.runningCount} Running`}get waitingCount(){return(this.get("queued")||0)+(this.get("waiting")||0)+(this.get("paused")||0)}get waitingCountText(){return`${this.waitingCount} Waiting`}}},58494:(e,t,n)=>{"use strict";n.d(t,{G:()=>u});var i=n(47011);const o=(0,n(70538).defineComponent)({__name:"StatesInfo",props:{excludeStates:{type:Array,required:!1,default:()=>["empty","failed","upload"]}},emits:["set-filter"],setup(e,{emit:t}){const n=e,o=i.P;if(n.excludeStates)for(const e of n.excludeStates)delete o[e];return{__sfc:!0,props:n,emit:t,states:o,helpText:{failed:"The job failed to run.",ok:"The dataset has no errors."},onFilter:function(e){t("set-filter","state",e)}}}}),a=o;const s=(0,n(51900).Z)(a,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("p",[e._v("Here are all available item states in Galaxy:")]),e._v(" "),e._m(0),e._v(" "),e._l(n.states,(function(i,o,a){return t("dl",{key:a},[t("div",{class:["alert","content-item","alert-"+i.status],attrs:{"data-state":o}},[t("dt",[t("a",{staticClass:"text-decoration-none",attrs:{href:"javascript:void(0)"},on:{click:function(e){return n.onFilter(o)}}},[t("code",[e._v(e._s(o))])]),e._v(" "),i.icon?t("icon",{attrs:{icon:i.icon}}):e._e()],1),e._v(" "),t("dd",[e._v(e._s(n.helpText[o]||i.text))])])])}))],2)}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[t("i",[e._v("(Note that the colors for each state correspond to content item state colors in the history)")])])}],!1,null,null,null).exports;var r=n(1460);const l=["empty","failed","upload"],d=Object.keys(i.P).filter((e=>!l.includes(e))),c={name:{placeholder:"name",type:String,handler:(0,r.r3)("name"),menuItem:!0},extension:{placeholder:"extension",type:String,handler:(0,r.fS)("extension"),menuItem:!0},tag:{placeholder:"tag",type:String,handler:(0,r.r3)("tags","tag",r._U),menuItem:!0},state:{placeholder:"state",type:String,handler:(0,r.fS)("state"),datalist:d,helpInfo:s,menuItem:!0},genome_build:{placeholder:"database",type:String,handler:(0,r.r3)("genome_build"),menuItem:!0},related:{placeholder:"related",type:Number,handler:(0,r.fS)("related"),menuItem:!0},hid:{placeholder:"index",type:Number,handler:(0,r.fS)("hid"),isRangeInput:!0,menuItem:!0},hid_ge:{handler:(0,r.qu)("hid","ge"),menuItem:!1},hid_le:{handler:(0,r.qu)("hid","le"),menuItem:!1},create_time:{placeholder:"creation time",type:Date,handler:(0,r.qu)("create_time","le",r.ZU),isRangeInput:!0,menuItem:!0},create_time_ge:{handler:(0,r.qu)("create_time","ge",r.ZU),menuItem:!1},create_time_le:{handler:(0,r.qu)("create_time","le",r.ZU),menuItem:!1},deleted:{placeholder:"Deleted",type:Boolean,handler:(0,r.fS)("deleted","deleted",r.AM),default:!1,menuItem:!0},visible:{placeholder:"Visible",type:Boolean,handler:(0,r.fS)("visible","visible",r.AM),default:!0,menuItem:!0},update_time:{handler:(0,r.qu)("update_time","le",r.ZU),menuItem:!1},update_time_ge:{handler:(0,r.qu)("update_time","ge",r.ZU),menuItem:!1},update_time_gt:{handler:(0,r.qu)("update_time","gt",r.ZU),menuItem:!1},update_time_le:{handler:(0,r.qu)("update_time","le",r.ZU),menuItem:!1},update_time_lt:{handler:(0,r.qu)("update_time","lt",r.ZU),menuItem:!1}},u=new r.ZP(c)},87441:(e,t,n)=>{"use strict";n.d(t,{Gv:()=>c,NC:()=>l,S5:()=>u,YG:()=>d,yd:()=>r});var i=n(51120),o=n(74448);const a=e=>{if(200!=e.status)throw new Error(e);return e.data};function s(e){return Object.entries(e).map((([e,t])=>`q=${e}&qv=${t}`)).join("&")}async function r(e,t={}){const n=Object.assign({},{purge:!1,recursive:!1,stop_job:!0},t),{history_id:s,history_content_type:r,id:l}=e,d=`api/histories/${s}/contents/${r}s/${l}`,c=await i.Z.delete((0,o.Vd)(d),{params:n});return a(c)}async function l(e,t={}){const{history_id:n,id:s,history_content_type:r}=e,l=`api/histories/${n}/contents/${r}s/${s}`,d=await i.Z.put((0,o.Vd)(l),t);return a(d)}async function d(e,t={},n="dataset"){const r=`api/histories/${e}/contents/${n}s?v=dev&${s(t)}`,l=await i.Z.get((0,o.Vd)(r));return a(l)}async function c(e,t,n,r=[],l=null){const{id:d}=e,c=`api/histories/${d}/contents/bulk?${s(n)}`,u={operation:t,items:r,params:l},h=await i.Z.put((0,o.Vd)(c),u);return a(h)}async function u(e,t={}){const n=Object.assign({},{collection_type:"list",copy_elements:!0,name:"list",element_identifiers:[],hide_source_items:!0,type:"dataset_collection"},t),s=`api/histories/${e.id}/contents`,r=await i.Z.post((0,o.Vd)(s),n);return a(r)}},66811:(e,t,n)=>{"use strict";n.d(t,{VC:()=>h,ZP:()=>m,tz:()=>p});var i=n(88608),o=n.n(i),a=n(18181),s=n(11411);const r="new",l=function(e,t){if(0==e.length)return"no columns";if(1==e.length)return`column ${t[e[0]]}`;{const n=e.map((e=>t[e]));return`columns ${[n.slice(0,-1).join(", "),n.slice(-1)[0]].join(" and ")}`}},d=function(e,t){const n=[];for(const i in e)-1===t.indexOf(i)&&n.push(e[i]);return n},c=function(e,t,n,i,a){let s;try{s=o()(String(e))}catch(e){return{error:"Invalid regular expression specified."}}let r=0;return n=n.map((function(e){const n=e[t],o=s.exec(n);return o?i?e.concat([s.pyreReplace(o[0],i)]):(a=a&&parseInt(a,10))?o.length!=a+1?(r++,null):e.concat(o.splice(1,o.length)):e.concat([o[0]]):(r++,null)})),r>0?{error:`${r} row(s) failed to match specified regular expression.`}:{data:n}},u=(e,t)=>t.reduce(((t,n)=>t.concat(e(n))),[]),h={add_column_basename:{title:(0,s.ZP)("Basename of Path of URL"),display:(e,t)=>`Add column using basename of column ${t[e.target_column]}`,init:(e,t)=>{e.addColumnBasenameTarget=t?t.target_column:0},save:(e,t)=>{t.target_column=e.addColumnBasenameTarget},apply:(e,t,n,i)=>{const o=e.target_column,a=c("[^/]*$",o,t);return i.push(r),a.columns=i,a}},add_column_rownum:{title:(0,s.ZP)("Row Number"),display:(e,t)=>"Add column for the current row number.",init:(e,t)=>{e.addColumnRownumStart=t?t.start:1},save:(e,t)=>{t.start=parseInt(e.addColumnRownumStart,10)},apply:(e,t,n,i)=>{let o=e.start;return t=t.map((function(e){const t=e.slice();return t.push(String(o)),o+=1,t})),i.push(r),{data:t,columns:i}}},add_column_value:{title:(0,s.ZP)("Fixed Value"),display:(e,t)=>`Add column for the constant value of ${e.value}.`,init:(e,t)=>{e.addColumnValue=t?t.value:""},save:(e,t)=>{t.value=e.addColumnValue},apply:(e,t,n,i)=>{const o=e.value;return t=t.map((function(e){const t=e.slice();return t.push(o),t})),i.push(r),{data:t,columns:i}}},add_column_metadata:{title:(0,s.ZP)("Add Column from Metadata"),display:(e,t)=>`Add column for ${e.value}.`,init:(e,t)=>{e.addColumnMetadataValue=t?t.value:null},save:(e,t)=>{t.value=e.addColumnMetadataValue},apply:(e,t,n,i)=>{const o=e.value;let a;if(0==o.indexOf("identifier")){const e=parseInt(o.substring(10),10);a=(t,i)=>{const o=t.slice();return o.push(n[i].identifiers[e]),o}}else if("tags"==o)a=(e,t)=>{const i=e.slice(),o=n[t].tags;return o.sort(),i.push(o.join(",")),i};else{if("hid"!=o&&"name"!=o&&"path"!=o&&"uri"!=o)return{error:`Unknown metadata type [${o}]`};a=(e,t)=>{const i=e.slice();return i.push(n[t][o]),i}}return t=t.map(a),i.push(r),{data:t,columns:i}}},add_column_group_tag_value:{title:(0,s.ZP)("Add Column from Group Tag Value"),display:(e,t)=>`Add column for value of group tag ${e.value}.`,init:(e,t)=>{t?(e.addColumnGroupTagValueValue=t.value,e.addColumnGroupTagValueDefault=t.default_value):(e.addColumnGroupTagValueValue=null,e.addColumnGroupTagValueDefault="")},save:(e,t)=>{t.value=e.addColumnGroupTagValueValue,t.default_value=e.addColumnGroupTagValueDefault},apply:(e,t,n,i)=>{const o=`group:${e.value}:`;return t=t.map(((t,i)=>{const a=t.slice(),s=n[i].tags;s.sort();let r=e.default_value;for(const e in s){const t=s[e];if(0==t.indexOf(o)){r=t.substr(o.length);break}}return a.push(r),a})),i.push(r),{data:t,columns:i}}},add_column_regex:{title:(0,s.ZP)("Using a Regular Expression"),display:(e,t)=>`Add new column using ${e.expression} applied to column ${t[e.target_column]}`,init:(e,t)=>{t?(e.addColumnRegexTarget=t.target_column,e.addColumnRegexExpression=t.expression,e.addColumnRegexReplacement=t.replacement,e.addColumnRegexGroupCount=parseInt(t.group_count)):(e.addColumnRegexTarget=0,e.addColumnRegexExpression="",e.addColumnRegexReplacement=null,e.addColumnRegexGroupCount=null);let n="global";e.addColumnRegexGroupCount?n="groups":e.addColumnRegexReplacement&&(n="replacement"),e.addColumnRegexType=n},save:(e,t)=>{t.target_column=e.addColumnRegexTarget,t.expression=e.addColumnRegexExpression,"replacement"==e.addColumnRegexType&&e.addColumnRegexReplacement?(t.replacement=e.addColumnRegexReplacement,t.group_count=null):"groups"==e.addColumnRegexType&&e.addColumnRegexGroupCount?(t.group_count=parseInt(e.addColumnRegexGroupCount),t.replacement=null):"global"==e.addColumnRegexType&&(t.replacement=null,t.group_count=null)},apply:(e,t,n,i)=>{const o=e.target_column,a=c(e.expression,o,t,e.replacement,e.group_count);if(e.group_count)for(let t=0;t<e.group_count;t++)i.push(r);else i.push(r);return a.columns=i,a}},add_column_concatenate:{title:(0,s.ZP)("Concatenate Columns"),display:(e,t)=>`Concatenate column ${t[e.target_column_0]} and column ${t[e.target_column_1]}`,init:(e,t)=>{t?(e.addColumnConcatenateTarget0=t.target_column_0,e.addColumnConcatenateTarget1=t.target_column_1):(e.addColumnConcatenateTarget0=0,e.addColumnConcatenateTarget1=0)},save:(e,t)=>{t.target_column_0=e.addColumnConcatenateTarget0,t.target_column_1=e.addColumnConcatenateTarget1},apply:(e,t,n,i)=>{const o=e.target_column_0,a=e.target_column_1;return t=t.map((function(e){const t=e.slice();return t.push(e[o]+e[a]),t})),i.push(r),{data:t,columns:i}}},add_column_substr:{title:(0,s.ZP)("Keep or Trim Prefix or Suffix"),display:(e,t)=>{const n=e.substr_type;let i;return i="keep_prefix"==n?`Keep only ${e.length} characters from the start of column ${t[e.target_column]}`:"drop_prefix"==n?`Remove ${e.length} characters from the start of column ${t[e.target_column]}`:"keep_suffix"==n?`Keep only ${e.length} characters from the end of column ${t[e.target_column]}`:`Remove ${e.length} characters from the end of column ${t[e.target_column]}`,i},init:(e,t)=>{t?(e.addColumnSubstrTarget=t.target_column,e.addColumnSubstrLength=t.length,e.addColumnSubstrType=t.substr_type):(e.addColumnSubstrTarget=0,e.addColumnSubstrType="keep_prefix",e.addColumnSubstrLength=1)},save:(e,t)=>{t.target_column=e.addColumnSubstrTarget,t.length=parseInt(e.addColumnSubstrLength,10),t.substr_type=e.addColumnSubstrType},apply:(e,t,n,i)=>{const o=e.target_column,a=e.length,s=e.substr_type;return t=t.map((function(e){const t=e.slice(),n=e[o];let i=0,r=n.length;return"keep_prefix"==s?r=a:"drop_prefix"==s?i=a:"keep_suffix"==s?(i=r-a,i<0&&(i=0)):(r-=a,r<0&&(r=0)),t.push(n.substr(i,r)),t})),i.push(r),{data:t}}},remove_columns:{title:(0,s.ZP)("Remove Column(s)"),display:(e,t)=>{const n=e.target_columns;return`Remove ${l(n,t)}`},init:(e,t)=>{e.removeColumnTargets=t?t.target_columns:[]},save:(e,t)=>{t.target_columns=e.removeColumnTargets},apply:(e,t,n,i)=>{const o=e.target_columns;return t=t.map((function(e){const t=[];for(const n in e)-1==o.indexOf(parseInt(n,10))&&t.push(e[n]);return t})),{data:t,columns:i=d(i,o)}}},add_filter_regex:{title:(0,s.ZP)("Using a Regular Expression"),display:(e,t)=>`Filter rows using regular expression ${e.expression} on column ${t[e.target_column]}`,init:(e,t)=>{t?(e.addFilterRegexTarget=t.target_column,e.addFilterRegexExpression=t.expression,e.addFilterRegexInvert=t.invert):(e.addFilterRegexTarget=0,e.addFilterRegexExpression="",e.addFilterRegexInvert=!1)},save:(e,t)=>{t.target_column=e.addFilterRegexTarget,t.expression=e.addFilterRegexExpression,t.invert=e.addFilterRegexInvert},apply:(e,t,n,i)=>{const a=String(e.expression);var s;try{s=o()(a)}catch(e){return{error:"Invalid regular expression specified."}}const r=e.target_column,l=e.invert,d=function(e,n){const i=t[parseInt(n,10)];return s.exec(i[r])?!l:l};return n=n.filter(d),{data:t=t.filter(d),sources:n}}},add_filter_count:{title:(0,s.ZP)("First or Last N Rows"),display:(e,t)=>{const n=e.which,i=e.invert;return"first"!=n||i?"first"==n&&i?`Keep only first ${e.count} row(s).`:"last"!=n||i?`Keep only last ${e.count} row(s).`:`Filter out last ${e.count} row(s).`:`Filter out first ${e.count} row(s).`},init:(e,t)=>{t?(e.addFilterCountN=parseInt(t.count,10),e.addFilterCountWhich=t.which,e.addFilterCountInvert=t.inverse):(e.addFilterCountN=0,e.addFilterCountWhich="first",e.addFilterCountInvert=!1)},save:(e,t)=>{t.count=parseInt(e.addFilterCountN,10),t.which=e.addFilterCountWhich,t.invert=e.addFilterCountInvert},apply:(e,t,n,i)=>{const o=e.count,a=e.invert,s=e.which,r=t.length,l=function(e,t){let n;return n="first"==s?t>=o:t<r-o,n?!a:a};return n=n.filter(l),{data:t=t.filter(l),sources:n}}},add_filter_empty:{title:(0,s.ZP)("On Emptiness"),display:(e,t)=>`Filter rows if no value for column ${t[e.target_column]}`,init:(e,t)=>{t?(e.addFilterEmptyTarget=t.target_column,e.addFilterEmptyInvert=t.invert):(e.addFilterEmptyTarget=0,e.addFilterEmptyInvert=!1)},save:(e,t)=>{t.target_column=e.addFilterEmptyTarget,t.invert=e.addFilterEmptyInvert},apply:(e,t,n,i)=>{const o=e.target_column,a=e.invert,s=function(e,n){return t[parseInt(n,10)][o].length?!a:a};return n=n.filter(s),{data:t=t.filter(s),sources:n}}},add_filter_matches:{title:(0,s.ZP)("Matching a Supplied Value"),display:(e,t)=>`Filter rows with value ${e.value} for column ${t[e.target_column]}`,init:(e,t)=>{t?(e.addFilterMatchesTarget=t.target_column,e.addFilterMatchesValue=t.value,e.addFilterMatchesInvert=t.invert):(e.addFilterMatchesTarget=0,e.addFilterMatchesValue="",e.addFilterMatchesInvert=!1)},save:(e,t)=>{t.target_column=e.addFilterMatchesTarget,t.value=e.addFilterMatchesValue,t.invert=e.addFilterMatchesInvert},apply:(e,t,n,i)=>{const o=e.target_column,a=e.invert,s=e.value,r=function(e,n){return t[parseInt(n,10)][o]==s?!a:a};return n=n.filter(r),{data:t=t.filter(r),sources:n}}},add_filter_compare:{title:(0,s.ZP)("By Comparing to a Numeric Value"),display:(e,t)=>`Filter rows with value ${e.compare_type} ${e.value} for column ${t[e.target_column]}`,init:(e,t)=>{t?(e.addFilterCompareTarget=t.target_column,e.addFilterCompareValue=t.value,e.addFilterCompareType=t.compare_type):(e.addFilterCompareTarget=0,e.addFilterCompareValue=0,e.addFilterCompareType="less_than")},save:(e,t)=>{t.target_column=e.addFilterCompareTarget,t.value=e.addFilterCompareValue,t.compare_type=e.addFilterCompareType},apply:(e,t,n,i)=>{const o=e.target_column,a=e.compare_type,s=e.value,r=function(e,n){const i=t[parseInt(n,10)],r=parseFloat(i[o]);let l;return"less_than"==a?l=r<s:"less_than_equal"==a?l=r<=s:"greater_than"==a?l=r>s:"greater_than_equal"==a&&(l=r>=s),l};return n=n.filter(r),{data:t=t.filter(r),sources:n}}},sort:{title:(0,s.ZP)("Sort"),display:(e,t)=>`Sort on column ${t[e.target_column]}`,init:(e,t)=>{t?(e.addSortingTarget=t.target_column,e.addSortingNumeric=t.numeric):(e.addSortingTarget=0,e.addSortingNumeric=!1)},save:(e,t)=>{t.target_column=e.addSortingTarget,t.numeric=e.addSortingNumeric},apply:(e,t,n,i)=>{const o=e.target_column,s=e.numeric,r=a.default.zip(t,n);r.sort(((e,t)=>{let n=e[0][o],i=t[0][o];return s&&(n=parseFloat(n),i=parseFloat(i)),n<i?-1:i<n?1:0}));const l=[],d=[];return r.map((e=>{l.push(e[0]),d.push(e[1])})),{data:l,sources:d}}},swap_columns:{title:(0,s.ZP)("Swap Column(s)"),display:(e,t)=>`Swap ${l([e.target_column_0,e.target_column_1],t)}`,init:(e,t)=>{t?(e.swapColumnsTarget0=t.target_column_0,e.swapColumnsTarget1=t.target_column_1):(e.swapColumnsTarget0=0,e.swapColumnsTarget1=0)},save:(e,t)=>{t.target_column_0=e.swapColumnsTarget0,t.target_column_1=e.swapColumnsTarget1},apply:(e,t,n,i)=>{const o=e.target_column_0,a=e.target_column_1;t=t.map((function(e){const t=e.slice();return t[o]=e[a],t[a]=e[o],t}));const s=i[o];return i[o]=i[a],i[a]=s,{data:t,columns:i}}},split_columns:{title:(0,s.ZP)("Split Column(s)"),display:(e,t)=>"Duplicate each row and split up columns",init:(e,t)=>{t?(e.splitColumnsTargets0=t.target_columns_0,e.splitColumnsTargets1=t.target_columns_1):(e.splitColumnsTargets0=[],e.splitColumnsTargets1=[])},save:(e,t)=>{t.target_columns_0=e.splitColumnsTargets0,t.target_columns_1=e.splitColumnsTargets1},apply:(e,t,n,i)=>{const o=e.target_columns_0,a=e.target_columns_1;return{data:t=u((function(e){const t=[],n=[];for(let i in e)i=parseInt(i,10),o.indexOf(i)>-1?t.push(e[i]):(a.indexOf(i)>-1||t.push(e[i]),n.push(e[i]));return[t,n]}),t),sources:n=u((e=>[e,e]),n),columns:i=d(i,o)}}}},p={list_identifiers:{multiple:!0,label:(0,s.ZP)("List Identifier(s)"),columnHeader:(0,s.ZP)("List Identifier"),help:(0,s.ZP)("This should be a short description of the replicate, sample name, condition, etc... that describes each level of the list structure."),importType:"collections"},paired_identifier:{label:(0,s.ZP)("Paired-end Indicator"),columnHeader:(0,s.ZP)("Paired Indicator"),help:(0,s.ZP)("This should be set to '1', 'R1', 'forward', 'f', or 'F' to indicate forward reads, and '2', 'r', 'reverse', 'R2', 'R', or 'R2' to indicate reverse reads."),importType:"collections"},collection_name:{label:(0,s.ZP)("Collection Name"),help:(0,s.ZP)("If this is set, all rows with the same collection name will be joined into a collection and it is possible to create multiple collections at once."),modes:["raw","ftp","datasets","library_datasets"],importType:"collections"},name_tag:{label:(0,s.ZP)("Name Tag"),help:(0,s.ZP)("Add a name tag or hash tag based on the specified column value for imported datasets."),importType:"datasets",modes:["raw","ftp"]},tags:{multiple:!0,label:(0,s.ZP)("General Purpose Tag(s)"),help:(0,s.ZP)("Add a general purpose tag based on the specified column value, use : to separate key-value pairs if desired. These tags are not propagated to derived datasets the way name and group tags are."),modes:["raw","ftp","datasets","library_datasets","collection_contents"]},group_tags:{multiple:!0,label:(0,s.ZP)("Group Tag(s)"),help:(0,s.ZP)("Add a group tag based on the specified column value, use : to separate key-value pairs. These tags are propagated to derived datasets and may be useful for factorial experiments."),modes:["raw","ftp","datasets","library_datasets","collection_contents"]},name:{label:(0,s.ZP)("Name"),importType:"datasets"},dbkey:{label:(0,s.ZP)("Genome"),modes:["raw","ftp"]},file_type:{label:(0,s.ZP)("Type"),modes:["raw","ftp"],help:(0,s.ZP)("This should be the Galaxy file type corresponding to this file.")},url:{label:(0,s.ZP)("URL"),modes:["raw"],help:(0,s.ZP)("This should be a URL (or Galaxy-aware URI) the file can be downloaded from.")},url_deferred:{label:(0,s.ZP)("Deferred URL"),modes:["raw"],help:(0,s.ZP)("This should be a URL (or Galaxy-aware URI) th efile can be downloaded from - the file will not be downloaded until it used by a tool.")},info:{label:(0,s.ZP)("Info"),help:(0,s.ZP)("Unstructured text associated with the dataset that shows up in the history panel, this is optional and can be whatever you would like."),modes:["raw","ftp"]},ftp_path:{label:(0,s.ZP)("FTP Path"),modes:["raw","ftp"],help:(0,s.ZP)("This should be the path to the target file to include relative to your FTP directory on the Galaxy server"),requiresFtp:!0}},f=function(e,t){return 0==e.length?t?t.map(((e,t)=>String.fromCharCode(65+t))):[]:e[0].map(((e,t)=>String.fromCharCode(65+t)))},m={applyRules:function(e,t,n,i,o=[]){const a=Array.from(o);let r=!1;for(var l in i){a[l]=f(e,n);const o=i[l];if(o.error=null,o.warn=null,r){o.warn=(0,s.ZP)("Skipped due to previous errors.");continue}var d=o.type;const c=h[d].apply(o,e,t,n);c.error?(r=!0,o.error=c.error):(c.warn&&(o.warn=c.warn),e=c.data||e,t=c.sources||t,n=c.columns||n)}return{data:e,sources:t,columns:n,colHeadersPerRule:a}},columnDisplay:function(e,t){let n;return n="object"==typeof e?e.map((e=>t[e])):[t[e]],2==n.length?"columns "+n[0]+" and "+n[1]:n.length>2?"columns "+n.slice(0,-1).join(", ")+", and "+n[n.length-1]:"column "+n[0]},colHeadersFor:f,RULES:h,MAPPING_TARGETS:p}},1500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(35655),o=n(33204);const a={components:{"selection-dialog":n(35409).Z,"data-dialog-table":o.Z,"data-dialog-search":i.Z},props:{callback:{type:Function,default:()=>{}}}}},66747:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});const i={selected:"success",unselected:"default",mixed:"secondary"}},94206:(e,t,n)=>{"use strict";n.d(t,{iZ:()=>u,OB:()=>L});var i=n(17010),o=n.n(i),a=n(39327);const s=/^([^\s.:])+(.[^\s.:]+)*(:[^\s.:]+)?$/;class r{constructor(e){let t={};switch(typeof e){case"string":t={text:e};break;case"object":t=e}Object.assign(this,t),this.text=t.text??"",this.label=this.text.replace(/^name:/,"#"),this.text=this.text.replace(/^#/,"name:"),this.style="",this.text.startsWith("name:")&&(this.style+="font-weight: bold;");const{primary:n,darker:i}=(0,a.D)(this.text);this.style+=`background-color: ${n};`,this.style+="color: black;",this.style+=`border-color: ${i};`,this.valid=s.test(this.text)}equals(e){return this.text===e.text}toString(){return this.text}}function l(e){return new r(e)}const d={components:{VueTagsInput:o()},props:{value:{type:Array,required:!1,default:()=>[]},autocompleteItems:{type:Array,required:!1,default:()=>[]},maxVisibleTags:{type:Number,required:!1,default:5},useToggleLink:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1}},data(){return{tagText:"",tagToggle:!(this.useToggleLink&&this.value.length>this.maxVisibleTags),triggerKeys:[13," "],validation:[{classes:"error",rule:s}]}},computed:{tagContainerClasses(){return{disabled:this.disabled}},tagModels(){const e=[...this.value];return e.sort(((e,t)=>t.indexOf("name:")-e.indexOf("name:"))),e.map(l)},autocompleteTags(){return this.autocompleteItems.map(l)},linkText(){return`${this.tagModels.length} Tags`},linkVisible(){return this.useToggleLink&&this.tagModels.length>this.maxVisibleTags},tagsVisible(){return!this.useToggleLink||this.tagToggle}},watch:{tagText(e){this.$emit("tag-input-changed",e)}},methods:{tagsChanged(e){this.$emit("input",this.pluckLabels(e))},pluckLabels:e=>e.map((e=>l(e).toString())),toggleTagDisplay(){this.tagToggle=!this.tagToggle,this.$emit("show",this.tagToggle)},beforeAddingTag(e){if(!this.emitHookEvent("before-adding-tag",e)){const{tag:t,addTag:n}=e;n(t)}},beforeDeletingTag(e){if(!this.emitHookEvent("before-deleting-tag",e)){const{tag:t,deleteTag:n}=e;n(t)}},emitHookEvent(e,t){return!!this.hasHandler(e)&&(this.$emit(e,t),!0)},hasHandler(e){return Object.keys(this.$listeners).includes(e)}}};var c=n(51900);const u=(0,c.Z)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tags-display",class:e.tagContainerClasses},[e.linkVisible?t("a",{staticClass:"toggle-link",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.toggleTagDisplay.apply(null,arguments)}}},[e._v("\n        "+e._s(e.linkText)+"\n    ")]):e._e(),e._v(" "),e.tagsVisible?t("VueTagsInput",{staticClass:"tags-input tag-area",attrs:{tags:e.tagModels,"autocomplete-items":e.autocompleteTags,disabled:e.disabled,placeholder:"Add Tags","add-on-key":e.triggerKeys,validation:e.validation},on:{"before-adding-tag":e.beforeAddingTag,"before-deleting-tag":e.beforeDeletingTag,"tags-changed":e.tagsChanged},scopedSlots:e._u([{key:"tag-center",fn:function(n){return[t("div",{staticClass:"tag-name",on:{click:function(t){return e.$emit("tag-click",n.tag)}}},[e._v(e._s(n.tag.label))])]}}],null,!1,4090180873),model:{value:e.tagText,callback:function(t){e.tagText=t},expression:"tagText"}}):e._e()],1)}),[],!1,null,null,null).exports;var h=n(29127),p=n(70538),f=n(80275),m=n(20629),_=n(51120),v=n(40961),g=n(16716),y=n(94975),b=n(42965),w=n(53741),k=n(34978);class C{constructor({id:e,itemClass:t,context:n,debounceInterval:i=150}){this.id=e,this.itemClass=t,this.context=n,this.debounceInterval=i,this._searchText=new g.x}get autocompleteOptions(){return this._searchText.pipe((0,h.U)((e=>e.replace("name:",""))),(0,y.h)((e=>e.length)),(0,b.b)(this.debounceInterval),(0,w.x)(),(0,k.w)((e=>this.autocomplete(e))))}set autocompleteSearchText(e){this._searchText.next(e)}async save(e){const{id:t,itemClass:n,context:i}=this,o=l(e);if(!o.valid)throw new Error("Invalid tag");const a=`${(0,v.getAppRoot)()}tag/add_tag_async`,s={params:{item_id:t,item_class:n,context:i,new_tag:o.text}};if(200!==(await _.Z.get(a,s)).status)throw new Error(`Unable to save tag: ${o}`);return l(o)}async delete(e){const{id:t,itemClass:n,context:i}=this,o=l(e),a=`${(0,v.getAppRoot)()}tag/remove_tag_async`,s={params:{item_id:t,item_class:n,context:i,tag_name:o.text}};if(200!==(await _.Z.get(a,s)).status)throw new Error(`Unable to delete tag: ${o}`);return o}async autocomplete(e){const{id:t,itemClass:n}=this,i=`${(0,v.getAppRoot)()}tag/tag_autocomplete_data`,o={params:{item_id:t,item_class:n,q:e}},a=await _.Z.get(i,o);if(200!==a.status)throw new Error(`Unable to retrieve autocomplete tags for search string: ${e}`);return(s=a.data,s.split("\n").filter((e=>e.includes("|"))).map((e=>e.split("|")[0])).filter((e=>e.length)).filter((e=>"#Header"!==e))).map(l);var s}}p.default.use(f.Z);const x={components:{StatelessTags:u},props:{tags:{type:Array,required:!1,default:()=>[]},tagService:{type:C,required:!0},storeKey:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1}},computed:{observedTags:{get(){return this.$store.getters.getTagsById(this.storeKey)},set(e){this.updateTags({key:this.storeKey,tags:e})}}},subscriptions(){return{autocompleteItems:this.tagService.autocompleteOptions.pipe((0,h.U)((e=>((e,t)=>{const n=e.map(l),i=t.map(l);return n.filter((e=>!i.some((t=>t.equals(e)))))})(e,this.tags))))}},mounted(){this.initializeTags({key:this.storeKey,tags:this.tags})},methods:{onClick(e){this.$emit("tag-click",e)},beforeAddingTag({tag:e,addTag:t}){this.tagService.save(e).then((()=>t(e))).catch((e=>console.warn("Unable to save tag",e)))},beforeDeletingTag({tag:e,deleteTag:t}){this.tagService.delete(e).then((()=>t(e))).catch((e=>console.warn("Unable to delete tag",e)))},updateTagSearch(e){this.tagService.autocompleteSearchText=e},...(0,m.nv)(["updateTags","initializeTags"])}};const S=(0,c.Z)(x,(function(){var e=this;return(0,e._self._c)("StatelessTags",{attrs:{disabled:e.disabled,"autocomplete-items":e.autocompleteItems},on:{"tag-click":e.onClick,"tag-input-changed":e.updateTagSearch,"before-adding-tag":e.beforeAddingTag,"before-deleting-tag":e.beforeDeletingTag},model:{value:e.observedTags,callback:function(t){e.observedTags=t},expression:"observedTags"}})}),[],!1,null,null,null).exports;var M=n(32511),T=n(74448);const L=(e={},t)=>{const{id:n,itemClass:i,tags:o=[],disabled:a=!1,context:s="unspecified"}=e,r={storeKey:`${i}-${n}`,tagService:new C({id:n,itemClass:i,context:s}),tags:o,disabled:a},l=(0,M.b)(S)(r,t);return l.$on("tag-click",D(e,l)),l},D=(e,t)=>function(n){if(!n)return;const{tagClickFn:i="none",clickUrl:o}=e;switch(i){case"community_tag_click":if(void 0!==o){const e=n.value?`:${n.value}`:"",t=`${o}?f-tags=${n.text}${e}`;(0,T.nL)(t)}break;case"add_tag_to_grid_filter":t.$store.dispatch("toggleSearchTag",n)}}},50190:(e,t,n)=>{"use strict";n.d(t,{V:()=>b});var i=n(51120),o=n(97061),a=n(32511),s=n(28732),r=n(92865),l=n(24382),d=n(53376);const c={props:{step:{type:Object},isPlaying:{type:Boolean},isLast:{type:Boolean}},computed:{targetElement(){return this.step.element?document.querySelector(this.step.element):null}},mounted(){this.createStep()},methods:{createStep(){this.targetElement&&(0,d.fi)(this.targetElement,this.$refs["tour-element"],{modifiers:[{name:"preventOverflow",options:{altAxis:!0,tether:!1,padding:20}}],strategy:"absolute",placement:"auto"})}}};var u=n(51900);const h=(0,u.Z)(c,(function(){var e=this,t=e._self._c;return t("div",{ref:"tour-element",staticClass:"tour-element",class:{"tour-element-sticky":!e.targetElement,"tour-has-title":!!e.step.title}},[e.step.title?t("div",{staticClass:"tour-header"},[t("div",{staticClass:"tour-title",domProps:{innerHTML:e._s(e.step.title)}})]):e._e(),e._v(" "),e.step.content?t("div",{staticClass:"tour-content",domProps:{innerHTML:e._s(e.step.content)}}):e._e(),e._v(" "),t("div",{staticClass:"tour-buttons"},[e.isLast?t("div",[t("button",{staticClass:"tour-button tour-end",on:{click:function(t){return t.preventDefault(),e.$emit("end")}}},[e._v("Close")])]):e.isPlaying?t("div",[t("button",{staticClass:"tour-button tour-stop",on:{click:function(t){return t.preventDefault(),e.$emit("play",!1)}}},[e._v("Stop")])]):t("div",[t("button",{staticClass:"tour-button tour-end",on:{click:function(t){return t.preventDefault(),e.$emit("end")}}},[e._v("Cancel")]),e._v(" "),t("button",{staticClass:"tour-button tour-play",on:{click:function(t){return t.preventDefault(),e.$emit("play",!0)}}},[e._v("Play")]),e._v(" "),t("button",{staticClass:"tour-button tour-next",on:{click:function(t){return t.preventDefault(),e.$emit("next")}}},[e._v("Continue")])])]),e._v(" "),e.targetElement?t("div",{staticClass:"tour-arrow",attrs:{"data-popper-arrow":""}}):e._e()])}),[],!1,null,null,null).exports,p={components:{TourStep:h},props:{steps:{type:Array,required:!0},requirements:{type:Array,required:!0}},data:()=>({currentIndex:-1,isPlaying:!1,showRequirementDialog:!0}),computed:{...(0,s.rn)(l.L,["currentUser"]),...(0,s.rn)(r.z,["currentHistory","historiesLoading"]),currentStep(){return this.steps[this.currentIndex]},numberOfSteps(){return this.steps.length},isLast(){return this.currentIndex===this.steps.length-1},hasBegun(){return this.currentIndex>=1}},beforeDestroy(){window.removeEventListener("keyup",this.handleKeyup)},mounted(){this.start()},methods:{...(0,s.nv)(r.z,["createNewHistory"]),start(){window.addEventListener("keyup",this.handleKeyup),this.currentIndex=0},play(e){this.isPlaying=e,this.isPlaying&&this.next()},loginRequired(e){return!this.hasBegun&&this.requirements.indexOf("logged_in")>=0&&e.isAnonymous},adminRequired(e){return!this.hasBegun&&this.requirements.indexOf("admin")>=0&&!e.is_admin},newHistoryRequired(e){if(this.hasBegun)return!1;return!!(this.requirements.indexOf("new_history")>=0)&&!(!e||0==e.size)},async next(){this.currentStep&&this.currentStep.onNext&&await this.currentStep.onNext();const e=this.currentIndex+1;if(e<this.numberOfSteps&&-1!==this.currentIndex){const t=this.steps[e];t.onBefore&&(await t.onBefore(),this.isPlaying&&setTimeout((()=>{this.isPlaying&&this.next()}),3e3))}this.currentIndex=e},end(){this.currentIndex=-1,this.isPlaying=!1},handleKeyup(e){switch(e.keyCode){case 39:this.next();break;case 27:this.end()}}}};const f=(0,u.Z)(p,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-column"},[e.historiesLoading?t("div",[e._v("computing tour requirements...")]):e.loginRequired(e.currentUser)?t("b-modal",{attrs:{id:"tour-requirement-unment",static:"","ok-only":"","hide-header":""},model:{value:e.showRequirementDialog,callback:function(t){e.showRequirementDialog=t},expression:"showRequirementDialog"}},[t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" You must log in to Galaxy to use this tour. ")])],1):e.adminRequired(e.currentUser)?t("b-modal",{attrs:{id:"tour-requirement-unment",static:"","ok-only":"","hide-header":""},model:{value:e.showRequirementDialog,callback:function(t){e.showRequirementDialog=t},expression:"showRequirementDialog"}},[t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" You must be an admin user to use this tour. ")])],1):e.newHistoryRequired(e.currentHistory)?t("b-modal",{attrs:{id:"tour-requirement-unment",static:"","ok-only":"","hide-header":""},model:{value:e.showRequirementDialog,callback:function(t){e.showRequirementDialog=t},expression:"showRequirementDialog"}},[t("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n            This tour is designed to run on a new history, please create a new history before running it.\n            "),t("a",{on:{click:function(t){return t.preventDefault(),e.createNewHistory()}}},[e._v("Click here")]),e._v(" to create a new history.\n        ")])],1):e.currentStep?t("TourStep",{key:e.currentIndex,attrs:{step:e.currentStep,"is-playing":e.isPlaying,"is-last":e.isLast},on:{next:e.next,end:e.end,play:e.play}}):e._e()],1)}),[],!1,null,null,null).exports,m=200,_=200;function v(e){if(e)try{return document.querySelector(e)}catch(t){throw Error(`Tour - Invalid selector. ${e}`)}}function g(e,t,n,i){if(e){v(e)?t():i>0?setTimeout((()=>{g(e,t,n,i-1)}),_):(console.error("Tour - Element not found.",e),n())}else t()}function y(e){e&&e.forEach((e=>{const t=v(e);t?t.click():console.error("Tour - Click target not found.",e)}))}async function b(e,t=null){t||(t=await async function(e){const t=`${(0,o.Bg)()}api/tours/${e}`,{data:n}=await i.Z.get(t);return n}(e));const n=[];Object.values(t.steps).forEach((e=>{n.push({element:e.element,title:e.title,content:e.content,onBefore:()=>new Promise(((t,n)=>{g(e.element,t,n,m)})).then((()=>{let t=e.preclick;!0===t&&(t=[e.element]),y(t),function(e,t){if(null!==t){const n=v(e);if(n){n.value=t;const e=new Event("input");n.dispatchEvent(e)}else console.error("Tour - Insert target not found.",e)}}(e.element,e.textinsert)})),onNext:()=>{let t=e.postclick;!0===t&&(t=[e.element]),y(t)}})}));const s=t.requirements||[];return function(e){const t=document.createElement("div");return document.querySelector("body").append(t),(0,a.b)(f)(e,t)}({steps:n,requirements:s})}},21904:(e,t,n)=>{"use strict";n.d(t,{uE:()=>r,F0:()=>l,F4:()=>d,sW:()=>c,LN:()=>u,sQ:()=>h,ZP:()=>w,xc:()=>m,gf:()=>g,oe:()=>y,Of:()=>_,AA:()=>v,Sb:()=>b,C6:()=>k});var i=n(50452),o=n(21718);const a=n(71314)._.path("/api/genomes").method("get").create();var s=n(62101);const r={id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically. If your file is not detected properly as one of the known formats, it most likely means that it has some format problems (e.g., different number of columns on different rows). You can still coerce the system to set your data to the format you think it should be.  You can also upload compressed files, which will automatically be decompressed."},l=[{id:"list",text:"List"},{id:"paired",text:"Pair"},{id:"list:paired",text:"List of Pairs"}],d="?",c="auto",u="New File",h=[{id:"collections",text:"Collections"},{id:"datasets",text:"Datasets"}];let p,f;function m(e,t){return e.find((e=>e.id==t))||{}}async function _(e,t){const n=await async function(){if(p)return p;const{data:e}=await(0,o.kI)({extension_only:!1}),t=[];for(var n in e)t.push({id:e[n].extension,text:e[n].extension,description:e[n].description,description_url:e[n].description_url,composite_files:e[n].composite_files,upload_warning:e[n].upload_warning});return t.sort(((e,t)=>{var n=e.text&&e.text.toLowerCase(),i=t.text&&t.text.toLowerCase();return n>i?1:n<i?-1:0})),p=t,t}(),i=[...n];return e||i.unshift(t),i}async function v(e){const t=await async function(){if(f)return f;const{data:e}=await a(),t=[];for(var n in e)t.push({id:e[n][1],text:e[n][0]});return f=t,t}(),n=[...t];return n.sort(function(e){return(t,n)=>t.id==e?-1:n.id==e||t.text>n.text?1:t.text<n.text?-1:0}(e)),n}async function g(e,t){try{const{data:t}=await(0,s.lT)();e(t)}catch(e){t((0,i.a)(e))}}async function y(e){try{const{data:t}=await(0,s.lT)({target:e});return t}catch(e){(0,i.t)(e)}}function b(){return window.File&&window.FormData&&window.XMLHttpRequest&&window.FileList}const w={AUTO_EXTENSION:r,DEFAULT_DBKEY:d,DEFAULT_EXTENSION:c,findExtension:m,getRemoteEntries:g,getRemoteEntriesAt:y,getUploadDatatypes:_,getUploadDbKeys:v};function k(e,t){let n;e.forEach((e=>{n=document.querySelector(`iframe#${e}`),n&&(n.style.pointerEvents=t?"none":"auto")}))}},37185:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={tool:"fa-wrench",data_input:"fa-file-o",data_collection_input:"fa-folder-o",subworkflow:"fa-sitemap fa-rotate-270",parameter_input:"fa-pencil",pause:"fa-pause"}},7729:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,q:()=>d});var i=n(51120),o=n(40961),a=n(8766),s=n(61282),r=n(50452),l=n(22567);const d=(0,s.F)((async function({id:e}){const t=`${(0,o.getAppRoot)()}dataset/get_edit?dataset_id=${e}`;try{const{data:e}=await i.Z.get(t);return e}catch(e){(0,r.t)(e)}})),c=(0,s.F)(a.nG,l.cC)},57498:(e,t,n)=>{"use strict";n.d(t,{Cd:()=>l,SA:()=>c,ls:()=>d});var i=n(51120),o=n(61282),a=n(40961),s=n(50452),r=n(22567);const l=(0,o.F)((async function({jobId:e}){const t=`${(0,a.getAppRoot)()}api/jobs/${e}?full=True`;try{const{data:e}=await i.Z.get(t);return e}catch(e){(0,s.t)(e)}}),r.cC),d=(0,o.F)((async function({jobId:e}){const t=`${(0,a.getAppRoot)()}api/jobs/${e}/common_problems`;try{const{data:e}=await i.Z.get(t);return e}catch(e){(0,s.t)(e)}}),r.cC);function c(e,t,n={}){const{root:o,...a}=e,s=`${o}api/jobs`,l=(0,r.BC)(a);return i.Z.get(s,{params:{...l,...n}}).then((e=>{const n=e.data;return t&&t(e),n||[]}))}},61282:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});var i=n(40705),o=n.n(i),a=n(6628),s=n(22567);const r=(e,t=(e=>!1))=>{const n=new Map;return{mixins:[s.gp],props:{useCache:{type:Boolean,default:!1},autoRefresh:{type:Boolean,default:!1},autoTime:{type:Number,default:3e3}},data:()=>({result:null,error:null,timeoutId:null}),created(){this.queue=new a.h(this.autoTime)},computed:{loading(){return null===this.result},cacheKey(){return o()(this.$attrs||{})}},mounted(){this.doQuery()},destroyed(){this.timeoutId&&clearTimeout(this.timeoutId)},render(){return this.$scopedSlots.default&&this.$scopedSlots.default({loading:this.loading,result:this.result,error:this.error})},methods:{doQuery(){let i;this.useCache?(i=n.get(this.cacheKey),i||(i=e(this.$attrs),n.set(this.cacheKey,i))):i=this.queue.enqueue(e,this.attributes),i.then((e=>{this.result=e,this.$emit("update:result",e),this.error=null,this.autoRefresh&&!t(e)&&(this.timeoutId=setTimeout((()=>{this.doQuery()}),this.autoTime))}),(e=>{this.result={},this.error=e,this.$emit("error",e),console.debug("Failed to fulfill promise.",e)}))}}}}},2461:(e,t,n)=>{"use strict";n.d(t,{S9:()=>s,zx:()=>r.Z,Sk:()=>i.Sk,xS:()=>i.xS,Pr:()=>h,JV:()=>i.JV,k9:()=>i.k9});var i=n(66680),o=n(61282),a=n(49871);const s=(0,o.F)(a.m0,(e=>"ok"===e.populated_state));var r=n(7729),l=n(51120),d=n(40961),c=n(50452);const u=["ok","error","deleted","paused"];const h=(0,o.F)((async function({id:e}){try{const{data:t}=await l.Z.get(`${(0,d.getAppRoot)()}api/invocations/any/steps/${e}`);return t}catch(e){(0,c.t)(e)}}),(e=>["scheduled","cancelled","failed"].includes(e.state)&&e.jobs.every((e=>u.includes(e.state)))))},66680:(e,t,n)=>{"use strict";n.d(t,{ZS:()=>f,Sk:()=>u,xS:()=>c,JV:()=>p,k9:()=>h});var i=n(51120),o=n(28732),a=n(21904);const s=(0,o.Q_)("dbKeyStore",{state:()=>({uploadDbKeys:[]}),getters:{getUploadDbKeys:e=>e.uploadDbKeys},actions:{async fetchUploadDbKeys(){try{const e=await a.ZP.getUploadDbKeys(a.ZP.DEFAULT_DBKEY);this.uploadDbKeys=e}catch(e){console.log("Error: unable to load Database/Builds",e)}}}});var r=n(74448);const l=(0,o.Q_)("datatypeStore",{state:()=>({uploadDatatypes:[]}),getters:{getUploadDatatypes:e=>e.uploadDatatypes},actions:{async fetchUploadDatatypes(){try{const e=await a.ZP.getUploadDatatypes(!1,a.ZP.AUTO_EXTENSION);this.uploadDatatypes=e}catch(e){console.log("Error: unable to load datatypes",e)}}}});n(22567);const d={props:{id:{type:String,required:!0}},data:()=>({loading:!1,item:null}),watch:{id:{immediate:!0,handler(e,t){e!==t&&this.load()}}},methods:{async load(){this.loading=!0;const{data:e}=await i.Z.get(this.url);this.item=e,this.loading=!1},async save(e){this.loading=!0;const{data:t}=await i.Z.put(this.url,e);this.item=t,this.loading=!1}},render(){return this.$scopedSlots.default({loading:this.loading,item:this.item,save:this.save,result:this.item})}},c={mixins:[d],props:{id:null},async mounted(){await this.load()},methods:{...(0,o.nv)(s,["fetchUploadDbKeys"]),async load(){this.loading=!0;let e=this.getUploadDbKeys;null!=e&&0!=e.length||(await this.fetchUploadDbKeys(),e=this.getUploadDbKeys),this.item=e,this.loading=!1}},computed:{...(0,o.rn)(s,["getUploadDbKeys"])}},u={mixins:[d],props:{id:null},async mounted(){await this.load()},methods:{...(0,o.nv)(l,["fetchUploadDatatypes"]),async load(){this.loading=!0;let e=this.getUploadDatatypes;null!=e&&0!=e.length||(await this.fetchUploadDatatypes(),e=this.getUploadDatatypes),this.item=e,this.loading=!1}},computed:{...(0,o.rn)(l,["getUploadDatatypes"])}},h={mixins:[d],computed:{url(){return(0,r.Vd)(`/api/dataset_collections/${this.id}/suitable_converters`)}}},p={mixins:[d],computed:{url(){return(0,r.Vd)(`api/jobs/${this.id}?full=true`)}}},f={mixins:[d],computed:{url(){return(0,r.Vd)(`api/dataset_collection_element/${this.id}`)}}}},22567:(e,t,n)=>{"use strict";n.d(t,{BC:()=>r,cC:()=>a,gp:()=>s});var i=n(96486),o=n(86290);function a(e){return!o.Z.NON_TERMINAL_STATES.includes(e.state)}const s={computed:{attributes(){return this.toCamelCase(this.$attrs)}},methods:{toCamelCase(e){const t={};for(const n in e){t[n.replace(/-./g,(e=>e[1].toUpperCase()))]=e[n]}return t}}};function r(e){const t={};return Object.entries(e).map((([e,n])=>{"perPage"===e&&(e="limit"),n&&(t[(0,i.snakeCase)(e)]=n)})),t.current_page&&t.limit&&(t.offset=(t.current_page-1)*t.limit,delete t.current_page),t}},3410:(e,t,n)=>{"use strict";n.d(t,{N:()=>a,f:()=>o});let i=(0,n(70538).ref)(null);function o(e){i=e}function a(){return{openGlobalUploadModal:e=>{i.value?.open(e)}}}},38046:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(70538),o=0;function a(e=""){const t=o;o+=1;return(0,i.computed)((()=>`${(0,i.unref)(e)}${t}`))}},23504:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={name:"production",debug:!1,rxjsDebug:!1,caching:{adapter:"idb",revs_limit:1,pageSize:60},buildTimestamp:"2024-02-14T22:27:39.913Z"}},54282:(e,t,n)=>{"use strict";n.d(t,{LJ:()=>l,MA:()=>r,OG:()=>c,Xt:()=>d,u_:()=>a});var i=n(55806),o=n.n(i);const a=function(e){this.$overlay=e.overlay,this.$dialog=e.dialog,this.$header=this.$dialog.find(".modal-header"),this.$body=this.$dialog.find(".modal-body"),this.$footer=this.$dialog.find(".modal-footer"),this.$backdrop=e.backdrop,this.$header.find(".close").on("click",o().proxy(this.hide,this))};let s;function r(){s.hide()}function l(e,t,n,i,o){s.setContent({title:e,body:t,buttons:n,extra_buttons:i}),s.show({backdrop:!0},o)}function d(e,t,n,i,o){s.setContent({title:e,body:t,buttons:n,extra_buttons:i}),s.show({backdrop:!1},o)}function c(e){const t=e.width||"600",n=e.height||"400",i=e.scroll||"auto";o()("#overlay-background").bind("click.overlay",(()=>{r(),o()("#overlay-background").unbind("click.overlay")})),s.setContent({closeButton:!0,title:"&nbsp;",body:o()(`<div style='margin: -5px;'><iframe style='margin: 0; padding: 0;' src='${e.url}' width='${t}' height='${n}' scrolling='${i}' frameborder='0'></iframe></div>`)}),s.show({backdrop:!0})}o().extend(a.prototype,{setContent:function(e){this.$header.hide(),e.title&&(this.$header.find(".title").html(e.title),this.$header.show()),e.closeButton?(this.$header.find(".close").show(),this.$header.show()):this.$header.find(".close").hide(),this.$footer.hide();const t=this.$footer.find(".buttons").html("");e.buttons&&(o().each(e.buttons,((e,n)=>{t.append(o()("<button></button> ").text(e).click(n)).append(" ")})),this.$footer.show());const n=this.$footer.find(".extra_buttons").html("");e.extra_buttons&&(o().each(e.extra_buttons,((e,t)=>{n.append(o()("<button></button>").text(e).click(t)).append(" ")})),this.$footer.show());let i=e.body;"progress"==i&&(i=o()("<div class='progress progress-striped active'><div class='progress-bar' style='width: 100%'></div></div>")),this.$body.html(i)},show:function(e,t){e.backdrop?this.$backdrop.addClass("in"):this.$backdrop.removeClass("in"),this.$overlay.show(),this.$dialog.show(),this.$overlay.addClass("in"),this.$body.css("min-width",this.$body.width()),this.$body.css("max-height",o()(window).height()/1.5),t&&t()},hide:function(){const e=this;e.$dialog.fadeOut((()=>{e.$overlay.hide(),e.$backdrop.removeClass("in"),e.$body.children().remove(),e.$body.css("min-width",void 0)}))}}),o()((()=>{s=new a({overlay:o()("#top-modal"),dialog:o()("#top-modal-dialog"),backdrop:o()("#top-modal-backdrop")})}))},47047:(e,t,n)=>{var i,o,a=n(55806);i=[n(58565),n(58295),n(68523)],void 0===(o=function(e,t){"use strict";function n(){}function i(e){e&&(this.id=e)}function o(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}var s=e.Range,r=e.union,l=e.intersection,d=t.inflateBuffer,c=t.arrayCopy,u=256,h=65536,p=16777216,f=4294967296,m=new RegExp("^[0-9]+,[0-9]+,[0-9]+");function _(e,t,n){Math.pow(10,6);return a.ajax({type:"GET",dataType:"native",url:e,timeout:5e3,beforeSend:function(e){e.setRequestHeader("Range","bytes="+t+"-"+(t+(n-1)))},xhrFields:{responseType:"arraybuffer"}})}function v(e,t){return e[t]+e[t+1]*u+e[t+2]*h+e[t+3]*p+e[t+4]*f}function g(){}function y(e,t,n,i){this.bwg=e,this.cirTreeOffset=t,this.cirTreeLength=n,this.isSummary=i}function b(e,t,n,i,o){this.bbi=e,this.type=t,this.fieldCount=n,this.offset=i,this.field=o}return g.prototype.readChromTree=function(){var e=this;this.chromsToIDs={},this.idsToChroms={},this.maxID=0;var t=this.unzoomedDataOffset;return t=t+4-(t-this.chromTreeOffset&3),a.when(_(this.url,this.chromTreeOffset,t-this.chromTreeOffset)).then((function(t){var n=new Uint8Array(t),i=new Int16Array(t),o=new Int32Array(t),a=(o[0],o[1],o[2]),s=(o[3],v(n,16),function(t){var o=n[t],r=i[t/2+1];t+=4;for(var l=0;l<r;++l)if(0===o){var d=v(n,t+=a);t+=8,d-=e.chromTreeOffset,s(d)}else{for(var c="",u=0;u<a;++u){var h=n[t++];0!==h&&(c+=String.fromCharCode(h))}var p=n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t+0];n[t+7],n[t+6],n[t+5],n[t+4];t+=8,e.chromsToIDs[c]=p,0===c.indexOf("chr")&&(e.chromsToIDs[c.substr(3)]=p),e.idsToChroms[p]=c,e.maxID=Math.max(e.maxID,p)}});s(32)}))},y.prototype.readWigData=function(e,t,n){var i=this.bwg.chromsToIDs[e];return void 0===i?[]:this.readWigDataById(i,t,n)},y.prototype.readWigDataById=function(e,t,n){var i=this,o=a.Deferred();if(!this.cirHeader)return a.when(_(i.bwg.url,this.cirTreeOffset,48)).then((function(s){i.cirHeader=s;var r=new Int32Array(i.cirHeader);i.cirBlockSize=r[1],a.when(i.readWigDataById(e,t,n)).then((function(e){o.resolve(e)}))})),o;var l=[],d=0,c=(Date.now(),function(i,o,a,s){return(e<0||i==e)&&o<=n&&a>=t}),u=function(e,t){if(i.bwg.instrument&&console.log("level="+t+"; offset="+e+"; time="+(0|Date.now())),d+=e.length,1==e.length&&e[0]-i.cirTreeOffset==48&&i.cachedCirRoot)return p(i.cachedCirRoot,0,t),void(0===--d&&a.when(i.fetchFeatures(c,l)).then((function(e){o.resolve(e)})));for(var n,u=4+32*i.cirBlockSize,f=0;f<e.length;++f){var m=new s(e[f],e[f]+u);n=n?r(n,m):m}for(var _=n.ranges(),v=0;v<_.length;++v){var g=_[v];h(e,g,t)}},h=function(e,t,n,s){t.max(),t.min();a.when(_(i.bwg.url,t.min(),t.max()-t.min())).then((function(s){for(var r=0;r<e.length;++r)t.contains(e[r])&&(p(s,e[r]-t.min(),n),e[r]-i.cirTreeOffset==48&&e[r]-t.min()==0&&(i.cachedCirRoot=s),0===--d&&a.when(i.fetchFeatures(c,l)).then((function(e){o.resolve(e)})))}))},p=function(i,o,a){var s=new Uint8Array(i),r=new Int16Array(i),d=new Int32Array(i),c=s[o],h=r[o/2+1];if(o+=4,0!==c)for(var p=0;p<h;++p){var f=d[k=o/4],m=d[k+1],_=d[k+2],g=d[k+3],y=v(s,o+16),b=v(s,o+24);(e<0||f<e||f==e&&m<=n)&&(e<0||_>e||_==e&&g>=t)&&l.push({offset:y,size:b}),o+=32}else{var w=[];for(p=0;p<h;++p){var k;f=d[k=o/4],m=d[k+1],_=d[k+2],g=d[k+3],y=v(s,o+16);(e<0||f<e||f==e&&m<=n)&&(e<0||_>e||_==e&&g>=t)&&w.push(y),o+=24}w.length>0&&u(w,a+1)}};return u([i.cirTreeOffset+48],1),o},y.prototype.fetchFeatures=function(e,t){var i=this,o=a.Deferred();if(t.sort((function(e,t){return(0|e.offset)-(0|t.offset)})),0===t.length)return[];var s=[],r=function(e,t,o,a){a||(a={});var r=new n;for(var l in r._chromId=e,r.segment=i.bwg.idsToChroms[e],r.min=t,r.max=o,r.type=i.bwg.type,a)r[l]=a[l];s.push(r)},l=function(){if(0===t.length){Date.now();return o.resolve(s)}var n=t[0];if(n.data)i.parseFeatures(n.data,r,e),t.splice(0,1),l();else{for(var u=n.offset,h=n.size,p=1;p<t.length&&t[p].offset==u+h;)h+=t[p].size,++p;a.when(_(i.bwg.url,u,h)).then((function(e){for(var n=0,o=0;n<h;){var a,s=t[o];if(i.bwg.uncompressBufSize>0)a=d(e,n+2,s.size-2);else{var r=new Uint8Array(s.size);c(new Uint8Array(e,n,s.size),0,r,0,s.size),a=r.buffer}s.data=a,n+=s.size,++o}l()}))}};return l(),o},y.prototype.parseFeatures=function(e,t,n){var o=new Uint8Array(e);if(this.isSummary)for(var d=new Int16Array(e),c=new Int32Array(e),u=new Float32Array(e),h=e.byteLength/32,p=0;p<h;++p){var f=c[8*p],_=c[8*p+1],v=c[8*p+2],g=c[8*p+3],y=(u[8*p+4],u[8*p+5]),b=u[8*p+6];u[8*p+7];if(n(f,_+1,v)){var w={type:"bigwig",score:b/g,maxScore:y};"bigbed"==this.bwg.type&&(w.type="density"),t(f,_+1,v,w)}}else if("bigwig"==this.bwg.type){d=new Int16Array(e),c=new Int32Array(e),u=new Float32Array(e),f=c[0];var k=c[1],C=(c[2],c[3]),x=c[4],S=o[20];h=d[11];if(3==S)for(p=0;p<h;++p){var M=u[p+6],T=k+p*C+1,L=k+p*C+x;n(f,T,L)&&t(f,T,L,{score:M})}else if(2==S)for(p=0;p<h;++p){v=(_=c[2*p+6]+1)+x-1,M=u[2*p+7];n(f,_,v)&&t(f,_,v,{score:M})}else if(1==S)for(p=0;p<h;++p){_=c[3*p+6]+1,v=c[3*p+7],M=u[3*p+8];_>v&&(_=v),n(f,_,v)&&t(f,_,v,{score:M})}else console.log("Currently not handling bwgType="+S)}else{if("bigbed"!=this.bwg.type)throw Error("Don't know what to do with "+this.bwg.type);for(var D=0,E=this.bwg.definedFieldCount,O=this.bwg.schema;D<o.length;){f=o[D+3]<<24|o[D+2]<<16|o[D+1]<<8|o[D+0],_=o[D+7]<<24|o[D+6]<<16|o[D+5]<<8|o[D+4],v=o[D+11]<<24|o[D+10]<<16|o[D+9]<<8|o[D+8];D+=12;for(var A="";;){var I=o[D++];if(0==I)break;A+=String.fromCharCode(I)}var P,R={};if((P=A.length>0?A.split("\t"):[]).length>0&&E>3&&(R.label=P[0]),P.length>1&&E>4){M=parseInt(P[1]);isNaN(M)||(R.score=M)}if(P.length>2&&E>5&&(R.orientation=P[2]),P.length>5&&E>8){var j=P[5];m.test(j)&&(R.itemRgb="rgb("+j+")")}if(P.length>E-3&&O)for(var Y=E-3;Y<P.length;++Y)R[O.fields[Y+3].name]=P[Y];if(n(f,_+1,v,P))if(E<12)t(f,_+1,v,R);else{var H=0|P[3],N=0|P[4],F=0|P[6],B=P[7].split(","),$=P[8].split(",");if(R.exonFrames){var z=R.exonFrames.split(",");R.exonFrames=void 0}R.type="transcript";var W=new i;for(var U in R)W[U]=R[U];if(W.id=P[0],W.segment=this.bwg.idsToChroms[f],W.min=_+1,W.max=v,W.notes=[],R.groups=[W],P.length>9){var V=R.geneName||P[9],q=V;P.length>10&&(q=P[10]),R.geneName2&&(q=R.geneName2);var Z=a.extend({},W);Z.id=V,Z.label=q,Z.type="gene",R.groups.push(Z)}for(var G=[],J=0;J<F;++J){var K=(0|$[J])+_,X=K+(0|B[J]),Q=new s(K,X);G.push(Q)}for(var ee=r(G),te=ee.ranges(),ne=0;ne<te.length;++ne){t(f,(de=te[ne]).min()+1,de.max(),R)}if(N>H){var ie="+"==R.orientation?new s(H,N+3):new s(H-3,N),oe=l(ee,ie);if(oe){R.type="translation";for(var ae=oe.ranges(),se=0,re=0;ae[0].min()>te[re].max();)re++;for(ne=0;ne<ae.length;++ne){var le=ne;"-"==R.orientation&&(le=ae.length-ne-1);var de=ae[le];if(R.readframe=se,z){var ce=parseInt(z[le+re]);"number"==typeof ce&&ce>=0&&ce<=2&&(R.readframe=ce,R.readframeExplicit=!0)}se=(se+(de.max()-de.min()))%3,t(f,de.min()+1,de.max(),R)}}}}}}},y.prototype.getFirstAdjacent=function(e,t,n,i){var o=this.bwg.chromsToIDs[e];if(void 0===o)return i([]);this.getFirstAdjacentById(o,t,n,i)},y.prototype.getFirstAdjacentById=function(e,t,n,i){var o=this;if(this.cirHeader){var a=null,l=-1,d=-1,c=0,u=(Date.now(),function(e,t){c+=e.length;for(var n,i=4+32*o.cirBlockSize,a=0;a<e.length;++a){var l=new s(e[a],e[a]+i);n=n?r(n,l):l}for(var d=n.ranges(),u=0;u<d.length;++u){var p=d[u];h(e,p,t)}}),h=function(s,r,l,d){r.max(),r.min();o.bwg.data.slice(r.min(),r.max()-r.min()).fetch((function(d){for(var u=0;u<s.length;++u)if(r.contains(s[u])&&(p(d,s[u]-r.min(),l),0==--c)){if(!a)return n>0&&(0!=e||t>0)?o.getFirstAdjacentById(0,0,n,i):n<0&&(e!=o.bwg.maxID||t<1e9)?o.getFirstAdjacentById(o.bwg.maxID,1e9,n,i):i([]);o.fetchFeatures((function(i,o,a,s){return n<0&&(i<e||a<t)||n>0&&(i>e||o>t)}),[a],(function(e){for(var t=null,o=-1,a=-1,s=0;s<e.length;++s){var r=e[s],l=r._chromId,d=r.min,c=r.max;(null==t||n<0&&(l>o||c>a)||n>0&&(l<o||d<a))&&(t=r,a=n<0?c:d,o=l)}return i(null!=t?[t]:[])}))}}))},p=function(i,s,r){var c=new Uint8Array(i),h=new Int16Array(i),p=new Int32Array(i),f=c[s],m=h[s/2+1];if(s+=4,0!=f)for(var _=0;_<m;++_){var g=p[M=s/4],y=p[M+1],b=p[M+2],w=p[M+3],k=v(c,s+16),C=v(c,s+24);(n<0&&(g<e||g==e&&y<=t)||n>0&&(b>e||b==e&&w>=t))&&(/_random/.exec(o.bwg.idsToChroms[g])||(null==a||n<0&&(b>l||b==l&&w>d)||n>0&&(g<l||g==l&&y<d))&&(a={offset:k,size:C},d=n<0?w:y,l=n<0?b:g)),s+=32}else{var x=-1,S=-1;for(_=0;_<m;++_){var M;g=p[M=s/4],y=p[M+1],b=p[M+2],w=p[M+3],k=p[M+4]<<32|p[M+5];(n<0&&(g<e||g==e&&y<=t)&&b>=e||n>0&&(b>e||b==e&&w>=t)&&g<=e)&&(x<0||w>S)&&(x=k,S=n<0?w:y,n<0?b:g),s+=24}x>=0&&u([x],r+1)}};u([o.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch((function(a){o.cirHeader=a;var s=new Int32Array(o.cirHeader);o.cirBlockSize=s[1],o.getFirstAdjacentById(e,t,n,i)}))},g.prototype.readWigData=function(e,t,n){var i,o=n-t;if(o<=25e3||0===this.zoomLevels.length)i=this.getUnzoomedView();else for(var a=0;a<this.zoomLevels.length;a++)if(o/this.zoomLevels[a].reduction<25e3){i=this.getZoomedView(a);break}return i.readWigData(e,t,n)},g.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var e=4e3;this.zoomLevels[0]&&(e=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset),this.unzoomedView=new y(this,this.unzoomedIndexOffset,e,!1)}return this.unzoomedView},g.prototype.getZoomedView=function(e){var t=this.zoomLevels[e];return t.view||(t.view=new y(this,t.indexOffset,4e3,!0)),t.view},g.prototype._tsFetch=function(e,t,n,i,o){var a=this;if(!(e>=this.zoomLevels.length-1))return(e<0?this.getUnzoomedView():this.getZoomedView(e)).readWigDataById(t,n,i,o);if(this.topLevelReductionCache){for(var s=[],r=this.topLevelReductionCache,l=0;l<r.length;++l)r[l]._chromId==t&&s.push(r[l]);return o(s)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3e8,(function(s){return a.topLevelReductionCache=s,a._tsFetch(e,t,n,i,o)}))},g.prototype.thresholdSearch=function(e,t,n,i,o){n=n<0?-1:1;for(var a=this,s=this.chromsToIDs[e],r=[{chrOrd:0,chr:s,zoom:a.zoomLevels.length-4,min:0,max:3e8,fromRef:!0}],l=1;l<=this.maxID+1;++l){var d=(s+n*l)%(this.maxID+1);d<0&&(d+=this.maxID+1),r.push({chrOrd:l,chr:d,zoom:a.zoomLevels.length-1,min:0,max:3e8})}!function e(){if(0==r.length)return o(null);r.sort((function(e,t){var i=e.zoom-t.zoom;return 0!=i||0!=(i=e.chrOrd-t.chrOrd)?i:e.min-t.min*n}));var s=r.splice(0,1)[0];a._tsFetch(s.zoom,s.chr,s.min,s.max,(function(a){var l=n>0?0:3e8;s.fromRef&&(l=t);for(var d=0;d<a.length;++d){var c,u=a[d];if(c=null!=u.maxScore?u.maxScore:u.score,n>0){if(c>i)if(s.zoom<0){if(u.min>l)return o(u)}else u.max>l&&r.push({chr:s.chr,chrOrd:s.chrOrd,zoom:s.zoom-2,min:u.min,max:u.max,fromRef:s.fromRef})}else if(c>i)if(s.zoom<0){if(u.max<l)return o(u)}else u.min<l&&r.push({chr:s.chr,chrOrd:s.chrOrd,zoom:s.zoom-2,min:u.min,max:u.max,fromRef:s.fromRef})}e()}))}()},g.prototype.getAutoSQL=function(e){if(!this.asOffset)return e(null);a.when(_(this.url,this.asOffset,2048)).then((function(t){for(var n=new Uint8Array(t),i="",o=0;o<n.length&&0!=n[o];++o)i+=String.fromCharCode(n[o]);var a=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,s=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/.exec(i);if(s){var r={declType:s[1],name:s[2],comment:s[4],fields:[]};i=i.substring(s[0]);for(var l=a.exec(i);null!=l;l=a.exec(i))r.fields.push({type:l[1],name:l[2],comment:l[4]});return e(r)}}))},g.prototype.getExtraIndices=function(e){var t=this;if(this.version<4||0==this.extHeaderOffset||"bigbed"!=this.type)return e(null);this.data.slice(this.extHeaderOffset,64).fetch((function(n){if(!n)return e(null,"Couldn't fetch extension header");var i=new Uint8Array(n),o=new Int16Array(n),a=(new Int32Array(n),o[0],o[1]),s=v(i,4);if(0==a)return e(null);t.data.slice(s,20*a).fetch((function(n){if(!n)return e(null,"Couldn't fetch index info");for(var i=new Uint8Array(n),o=new Int16Array(n),s=(new Int32Array(n),[]),r=0;r<a;++r){var l=o[10*r],d=o[10*r+1],c=v(i,20*r+4),u=o[10*r+8],h=new b(t,l,d,c,u);s.push(h)}e(s)}))}))},b.prototype.lookup=function(e,t){var n=this;this.bbi.data.slice(this.offset,32).fetch((function(i){var a=new Uint8Array(i),s=(new Int16Array(i),new Int32Array(i)),r=(s[0],s[1]),l=s[2],d=s[3];v(a,16);!function i(a){n.bbi.data.slice(a,4+r*(l+d)).fetch((function(a){var s=new Uint8Array(a),r=new Uint16Array(a),c=(new Uint32Array(a),s[0]),u=r[1],h=4;if(0!=c){for(_=0;_<u;++_){for(g="",y=0;y<l;++y){0!=(b=s[h++])&&(g+=String.fromCharCode(b))}if(g==e){var p=v(s,h),f=o(s,h+8);return n.bbi.getUnzoomedView().fetchFeatures((function(t,i,o,a){if(a&&a.length>n.field-3)return a[n.field-3]==e}),[{offset:p,size:f}],t)}h+=d}return t([])}for(var m=null,_=0;_<u;++_){for(var g="",y=0;y<l;++y){var b;0!=(b=s[h++])&&(g+=String.fromCharCode(b))}var w=v(s,h);if(h+=8,e.localeCompare(g)<0&&m)return void i(m);m=w}i(m)}))}(n.offset+32)}))},{makeBwg:function(e){var t=a.Deferred(),n=new g;return n.url=e,a.when(_(n.url,0,512)).then((function(e){if(!e)return t.resolve(null,"Couldn't fetch file");var i=e,o=new Uint8Array(i),s=new Int16Array(i),r=new Int32Array(i),l=o[0]+u*o[1]+h*o[2]+p*o[3];if(2291137574==l)n.type="bigwig";else{if(2273964779!=l)return 654086024==l||3958540679==l?t.resolve(null,"Currently don't support big-endian BBI files"):t.resolve(null,"Not a supported format, magic=0x"+l.toString(16));n.type="bigbed"}n.version=s[2],n.numZoomLevels=s[3],n.chromTreeOffset=v(o,8),n.unzoomedDataOffset=v(o,16),n.unzoomedIndexOffset=v(o,24),n.fieldCount=s[16],n.definedFieldCount=s[17],n.asOffset=v(o,36),n.totalSummaryOffset=v(o,44),n.uncompressBufSize=r[13],n.extHeaderOffset=v(o,56),n.zoomLevels=[];for(var d=0;d<n.numZoomLevels;++d){var c=r[6*d+16],f=v(o,24*d+72),m=v(o,24*d+80);n.zoomLevels.push({reduction:c,dataOffset:f,indexOffset:m})}a.when(n.readChromTree()).then((function(){n.getAutoSQL((function(e){return n.schema=e,t.resolve(n)}))}))})),t}}}.apply(t,i))||(e.exports=o)},68523:function(e,t,n){var i,o,a,s=n(55806);o=[n(55806)],void 0===(a="function"==typeof(i=function(e){var t=e.ajaxSettings;t.responseFields.native="responseNative",t.converters["* native"]=!0;var n={},i=0,o={0:200,1223:204},a={},r=s.ajaxSettings.xhr();window.ActiveXObject&&e(window).on("unload",(function(){for(var e in a)a[e]()})),n.cors=!!r&&"withCredentials"in r,n.ajax=r=!!r,e.ajaxTransport("native",(function(e){var t;if(n.cors||r&&!e.crossDomain)return{send:function(n,s){var r,l=e.xhr(),d=++i,c={};if(l.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)l[r]=e.xhrFields[r];for(r in e.mimeType&&l.overrideMimeType&&l.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)l.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete a[d],t=l.onload=l.onerror=null,"abort"===e?l.abort():"error"===e?s(l.status,l.statusText):(l.response&&(c.native=l.response),s(o[l.status]||l.status,l.statusText,c,l.getAllResponseHeaders())))}},l.onload=t(),l.onerror=t("error"),t=a[d]=t("abort");try{l.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),e.getNative=function(t,n){return e.ajax({dataType:"native",url:t,xhrFields:{responseType:"arraybuffer"},success:n})}})?i.apply(t,o):i)||(e.exports=a)},58295:(e,t)=>{var n;void 0===(n=function(){var e=15,t=-2,n=-3,i=-5,o=13,a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],s=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],r=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function h(){}function p(){this.was=[0]}h.prototype.inflateInit=function(e,t){return e||(e=15),t&&(t=!1),this.istate=new p,this.istate.inflateInit(this,t?-e:e)},h.prototype.inflate=function(e){return null==this.istate?t:this.istate.inflate(this,e)},h.prototype.inflateEnd=function(){if(null==this.istate)return t;var e=istate.inflateEnd(this);return this.istate=null,e},h.prototype.inflateSync=function(){return istate.inflateSync(this)},h.prototype.inflateSetDictionary=function(e,t){return istate.inflateSetDictionary(this,e,t)},p.prototype.inflateReset=function(e){return null==e||null==e.istate?t:(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=0!=e.istate.nowrap?7:0,e.istate.blocks.reset(e,null),0)},p.prototype.inflateEnd=function(e){return null!=this.blocks&&this.blocks.free(e),this.blocks=null,0},p.prototype.inflateInit=function(e,n){return e.msg=null,this.blocks=null,nowrap=0,n<0&&(n=-n,nowrap=1),n<8||n>15?(this.inflateEnd(e),t):(this.wbits=n,e.istate.blocks=new _(e,0!=e.istate.nowrap?null:this,1<<n),this.inflateReset(e),0)},p.prototype.inflate=function(e,a){var s,r;if(null==e||null==e.istate||null==e.next_in)return t;for(a=4==a?i:0,s=i;;)switch(e.istate.mode){case 0:if(0==e.avail_in)return s;if(s=a,e.avail_in--,e.total_in++,8!=(15&(e.istate.method=e.next_in[e.next_in_index++]))){e.istate.mode=o,e.msg="unknown compression method",e.istate.marker=5;break}if(8+(e.istate.method>>4)>e.istate.wbits){e.istate.mode=o,e.msg="invalid window size",e.istate.marker=5;break}e.istate.mode=1;case 1:if(0==e.avail_in)return s;if(s=a,e.avail_in--,e.total_in++,r=255&e.next_in[e.next_in_index++],((e.istate.method<<8)+r)%31!=0){e.istate.mode=o,e.msg="incorrect header check",e.istate.marker=5;break}if(0==(32&r)){e.istate.mode=7;break}e.istate.mode=2;case 2:if(0==e.avail_in)return s;s=a,e.avail_in--,e.total_in++,e.istate.need=(255&e.next_in[e.next_in_index++])<<24&4278190080,e.istate.mode=3;case 3:if(0==e.avail_in)return s;s=a,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<16&16711680,e.istate.mode=4;case 4:if(0==e.avail_in)return s;s=a,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<8&65280,e.istate.mode=5;case 5:return 0==e.avail_in?s:(s=a,e.avail_in--,e.total_in++,e.istate.need+=255&e.next_in[e.next_in_index++],e.adler=e.istate.need,e.istate.mode=6,2);case 6:return e.istate.mode=o,e.msg="need dictionary",e.istate.marker=0,t;case 7:if((s=e.istate.blocks.proc(e,s))==n){e.istate.mode=o,e.istate.marker=0;break}if(0==s&&(s=a),1!=s)return s;if(s=a,e.istate.blocks.reset(e,e.istate.was),0!=e.istate.nowrap){e.istate.mode=12;break}e.istate.mode=8;case 8:if(0==e.avail_in)return s;s=a,e.avail_in--,e.total_in++,e.istate.need=(255&e.next_in[e.next_in_index++])<<24&4278190080,e.istate.mode=9;case 9:if(0==e.avail_in)return s;s=a,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<16&16711680,e.istate.mode=10;case 10:if(0==e.avail_in)return s;s=a,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<8&65280,e.istate.mode=11;case 11:if(0==e.avail_in)return s;if(s=a,e.avail_in--,e.total_in++,e.istate.need+=255&e.next_in[e.next_in_index++],e.istate.was[0]!=e.istate.need){e.istate.mode=o,e.msg="incorrect data check",e.istate.marker=5;break}e.istate.mode=12;case 12:return 1;case o:return n;default:return t}},p.prototype.inflateSetDictionary=function(e,i,o){var a=0,s=o;return null==e||null==e.istate||6!=e.istate.mode?t:e._adler.adler32(1,i,0,o)!=e.adler?n:(e.adler=e._adler.adler32(0,null,0,0),s>=1<<e.istate.wbits&&(a=o-(s=(1<<e.istate.wbits)-1)),e.istate.blocks.set_dictionary(i,a,s),e.istate.mode=7,0)};var f=[0,0,255,255];p.prototype.inflateSync=function(e){var a,s,r,l,d;if(null==e||null==e.istate)return t;if(e.istate.mode!=o&&(e.istate.mode=o,e.istate.marker=0),0==(a=e.avail_in))return i;for(s=e.next_in_index,r=e.istate.marker;0!=a&&r<4;)e.next_in[s]==f[r]?r++:r=0!=e.next_in[s]?0:4-r,s++,a--;return e.total_in+=s-e.next_in_index,e.next_in_index=s,e.avail_in=a,e.istate.marker=r,4!=r?n:(l=e.total_in,d=e.total_out,this.inflateReset(e),e.total_in=l,e.total_out=d,e.istate.mode=7,0)},p.prototype.inflateSyncPoint=function(e){return null==e||null==e.istate||null==e.istate.blocks?t:e.istate.blocks.sync_point()};var m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function _(e,t,n){this.hufts=new Int32Array(4320),this.window=new Uint8Array(n),this.end=n,this.checkfn=t,this.mode=0,this.reset(e,null),this.left=0,this.table=0,this.index=0,this.blens=null,this.bb=new Int32Array(1),this.tb=new Int32Array(1),this.codes=new v,this.last=0,this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.check=0,this.inftree=new g}_.prototype.reset=function(e,t){t&&(t[0]=this.check),6==this.mode&&this.codes.free(e),this.mode=0,this.bitk=0,this.bitb=0,this.read=this.write=0,this.checkfn&&(e.adler=this.check=e._adler.adler32(0,null,0,0))},_.prototype.proc=function(e,i){var s,r,l,d,c,u,h;for(d=e.next_in_index,c=e.avail_in,r=this.bitb,l=this.bitk,h=(u=this.write)<this.read?this.read-u-1:this.end-u;;)switch(this.mode){case 0:for(;l<3;){if(0==c)return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);i=0,c--,r|=(255&e.next_in[d++])<<l,l+=8}switch(s=7&r,this.last=1&s,s>>>1){case 0:r>>>=3,r>>>=s=7&(l-=3),l-=s,this.mode=1;break;case 1:y(v=new Int32Array(1),g=new Int32Array(1),b=[],k=[],e),this.codes.init(v[0],g[0],b[0],0,k[0],0,e),r>>>=3,l-=3,this.mode=6;break;case 2:r>>>=3,l-=3,this.mode=3;break;case 3:return r>>>=3,l-=3,this.mode=o,e.msg="invalid block type",i=n,this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i)}break;case 1:for(;l<32;){if(0==c)return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);i=0,c--,r|=(255&e.next_in[d++])<<l,l+=8}if((~r>>>16&65535)!=(65535&r))return this.mode=o,e.msg="invalid stored block lengths",i=n,this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);this.left=65535&r,r=l=0,this.mode=0!=this.left?2:0!=this.last?7:0;break;case 2:if(0==c)return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,write=u,this.inflate_flush(e,i);if(0==h&&(u==end&&0!=read&&(h=(u=0)<this.read?this.read-u-1:this.end-u),0==h&&(this.write=u,i=this.inflate_flush(e,i),h=(u=this.write)<this.read?this.read-u-1:this.end-u,u==this.end&&0!=this.read&&(h=(u=0)<this.read?this.read-u-1:this.end-u),0==h)))return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);if(i=0,(s=this.left)>c&&(s=c),s>h&&(s=h),w(e.next_in,d,this.window,u,s),d+=s,c-=s,u+=s,h-=s,0!=(this.left-=s))break;this.mode=0!=this.last?7:0;break;case 3:for(;l<14;){if(0==c)return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);i=0,c--,r|=(255&e.next_in[d++])<<l,l+=8}if(this.table=s=16383&r,(31&s)>29||(s>>5&31)>29)return this.mode=9,e.msg="too many length or distance symbols",i=n,this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);if(s=258+(31&s)+(s>>5&31),null==this.blens||this.blens.length<s)this.blens=new Int32Array(s);else for(var p=0;p<s;p++)this.blens[p]=0;r>>>=14,l-=14,this.index=0,mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;l<3;){if(0==c)return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);i=0,c--,r|=(255&e.next_in[d++])<<l,l+=8}this.blens[m[this.index++]]=7&r,r>>>=3,l-=3}for(;this.index<19;)this.blens[m[this.index++]]=0;if(this.bb[0]=7,0!=(s=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,e)))return(i=s)==n&&(this.blens=null,this.mode=9),this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,write=u,this.inflate_flush(e,i);this.index=0,this.mode=5;case 5:for(;s=this.table,this.index<258+(31&s)+(s>>5&31);){var f,_;for(s=this.bb[0];l<s;){if(0==c)return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);i=0,c--,r|=(255&e.next_in[d++])<<l,l+=8}if(s=this.hufts[3*(this.tb[0]+(r&a[s]))+1],(_=this.hufts[3*(this.tb[0]+(r&a[s]))+2])<16)r>>>=s,l-=s,this.blens[this.index++]=_;else{for(p=18==_?7:_-14,f=18==_?11:3;l<s+p;){if(0==c)return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);i=0,c--,r|=(255&e.next_in[d++])<<l,l+=8}if(l-=s,f+=(r>>>=s)&a[p],r>>>=p,l-=p,(p=this.index)+f>258+(31&(s=this.table))+(s>>5&31)||16==_&&p<1)return this.blens=null,this.mode=9,e.msg="invalid bit length repeat",i=n,this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);_=16==_?this.blens[p-1]:0;do{this.blens[p++]=_}while(0!=--f);this.index=p}}this.tb[0]=-1;var v=new Int32Array(1),g=new Int32Array(1),b=new Int32Array(1),k=new Int32Array(1);if(v[0]=9,g[0]=6,s=this.table,0!=(s=this.inftree.inflate_trees_dynamic(257+(31&s),1+(s>>5&31),this.blens,v,g,b,k,this.hufts,e)))return s==n&&(this.blens=null,this.mode=o),i=s,this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);this.codes.init(v[0],g[0],this.hufts,b[0],this.hufts,k[0],e),this.mode=6;case 6:if(this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,1!=(i=this.codes.proc(this,e,i)))return this.inflate_flush(e,i);if(i=0,this.codes.free(e),d=e.next_in_index,c=e.avail_in,r=this.bitb,l=this.bitk,h=(u=this.write)<this.read?this.read-u-1:this.end-u,0==this.last){this.mode=0;break}this.mode=7;case 7:if(this.write=u,i=this.inflate_flush(e,i),h=(u=this.write)<this.read?this.read-u-1:this.end-u,this.read!=this.write)return this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);mode=12;case 8:return i=1,this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);case 9:return i=n,this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i);default:return i=t,this.bitb=r,this.bitk=l,e.avail_in=c,e.total_in+=d-e.next_in_index,e.next_in_index=d,this.write=u,this.inflate_flush(e,i)}},_.prototype.free=function(e){this.reset(e,null),this.window=null,this.hufts=null},_.prototype.set_dictionary=function(e,t,n){w(e,t,window,0,n),this.read=this.write=n},_.prototype.sync_point=function(){return 1==this.mode},_.prototype.inflate_flush=function(e,t){var n,o,a;return o=e.next_out_index,(n=((a=this.read)<=this.write?this.write:this.end)-a)>e.avail_out&&(n=e.avail_out),0!=n&&t==i&&(t=0),e.avail_out-=n,e.total_out+=n,null!=this.checkfn&&(e.adler=this.check=e._adler.adler32(this.check,this.window,a,n)),w(this.window,a,e.next_out,o,n),o+=n,(a+=n)==this.end&&(a=0,this.write==this.end&&(this.write=0),(n=this.write-a)>e.avail_out&&(n=e.avail_out),0!=n&&t==i&&(t=0),e.avail_out-=n,e.total_out+=n,null!=this.checkfn&&(e.adler=this.check=e._adler.adler32(this.check,this.window,a,n)),w(this.window,a,e.next_out,o,n),o+=n,a+=n),e.next_out_index=o,this.read=a,t};function v(){}function g(){}function y(e,t,n,i,o){return e[0]=9,t[0]=5,n[0]=s,i[0]=r,0}v.prototype.init=function(e,t,n,i,o,a,s){this.mode=0,this.lbits=e,this.dbits=t,this.ltree=n,this.ltree_index=i,this.dtree=o,this.dtree_index=a,this.tree=null},v.prototype.proc=function(e,i,o){var s,r,l,d,c,u,h,p=0,f=0,m=0;for(m=i.next_in_index,d=i.avail_in,p=e.bitb,f=e.bitk,u=(c=e.write)<e.read?e.read-c-1:e.end-c;;)switch(this.mode){case 0:if(u>=258&&d>=10&&(e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,o=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,e,i),m=i.next_in_index,d=i.avail_in,p=e.bitb,f=e.bitk,u=(c=e.write)<e.read?e.read-c-1:e.end-c,0!=o)){this.mode=1==o?7:9;break}this.need=this.lbits,this.tree=this.ltree,this.tree_index=this.ltree_index,this.mode=1;case 1:for(s=this.need;f<s;){if(0==d)return e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);o=0,d--,p|=(255&i.next_in[m++])<<f,f+=8}if(r=3*(this.tree_index+(p&a[s])),p>>>=this.tree[r+1],f-=this.tree[r+1],0==(l=this.tree[r])){this.lit=this.tree[r+2],this.mode=6;break}if(0!=(16&l)){this.get=15&l,this.len=this.tree[r+2],this.mode=2;break}if(0==(64&l)){this.need=l,this.tree_index=r/3+this.tree[r+2];break}if(0!=(32&l)){this.mode=7;break}return this.mode=9,i.msg="invalid literal/length code",o=n,e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);case 2:for(s=this.get;f<s;){if(0==d)return e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);o=0,d--,p|=(255&i.next_in[m++])<<f,f+=8}this.len+=p&a[s],p>>=s,f-=s,this.need=this.dbits,this.tree=this.dtree,this.tree_index=this.dtree_index,this.mode=3;case 3:for(s=this.need;f<s;){if(0==d)return e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);o=0,d--,p|=(255&i.next_in[m++])<<f,f+=8}if(r=3*(this.tree_index+(p&a[s])),p>>=this.tree[r+1],f-=this.tree[r+1],0!=(16&(l=this.tree[r]))){this.get=15&l,this.dist=this.tree[r+2],this.mode=4;break}if(0==(64&l)){this.need=l,this.tree_index=r/3+this.tree[r+2];break}return this.mode=9,i.msg="invalid distance code",o=n,e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);case 4:for(s=this.get;f<s;){if(0==d)return e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);o=0,d--,p|=(255&i.next_in[m++])<<f,f+=8}this.dist+=p&a[s],p>>=s,f-=s,this.mode=5;case 5:for(h=c-this.dist;h<0;)h+=e.end;for(;0!=this.len;){if(0==u&&(c==e.end&&0!=e.read&&(u=(c=0)<e.read?e.read-c-1:e.end-c),0==u&&(e.write=c,o=e.inflate_flush(i,o),u=(c=e.write)<e.read?e.read-c-1:e.end-c,c==e.end&&0!=e.read&&(u=(c=0)<e.read?e.read-c-1:e.end-c),0==u)))return e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);e.window[c++]=e.window[h++],u--,h==e.end&&(h=0),this.len--}this.mode=0;break;case 6:if(0==u&&(c==e.end&&0!=e.read&&(u=(c=0)<e.read?e.read-c-1:e.end-c),0==u&&(e.write=c,o=e.inflate_flush(i,o),u=(c=e.write)<e.read?e.read-c-1:e.end-c,c==e.end&&0!=e.read&&(u=(c=0)<e.read?e.read-c-1:e.end-c),0==u)))return e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);o=0,e.window[c++]=this.lit,u--,this.mode=0;break;case 7:if(f>7&&(f-=8,d++,m--),e.write=c,o=e.inflate_flush(i,o),u=(c=e.write)<e.read?e.read-c-1:e.end-c,e.read!=e.write)return e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);this.mode=8;case 8:return o=1,e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);case 9:return o=n,e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o);default:return o=t,e.bitb=p,e.bitk=f,i.avail_in=d,i.total_in+=m-i.next_in_index,i.next_in_index=m,e.write=c,e.inflate_flush(i,o)}},v.prototype.free=function(e){},v.prototype.inflate_fast=function(e,t,i,o,s,r,l,d){var c,u,h,p,f,m,_,v,g,y,b,k,C,x,S,M;_=d.next_in_index,v=d.avail_in,f=l.bitb,m=l.bitk,y=(g=l.write)<l.read?l.read-g-1:l.end-g,b=a[e],k=a[t];do{for(;m<20;)v--,f|=(255&d.next_in[_++])<<m,m+=8;if(0!=(p=(u=i)[M=3*((h=o)+(c=f&b))]))for(;;){if(f>>=u[M+1],m-=u[M+1],0!=(16&p)){for(p&=15,C=u[M+2]+(f&a[p]),f>>=p,m-=p;m<15;)v--,f|=(255&d.next_in[_++])<<m,m+=8;for(p=(u=s)[M=3*((h=r)+(c=f&k))];;){if(f>>=u[M+1],m-=u[M+1],0!=(16&p)){for(p&=15;m<p;)v--,f|=(255&d.next_in[_++])<<m,m+=8;if(x=u[M+2]+(f&a[p]),f>>=p,m-=p,y-=C,g>=x)S=g-x,l.window[g++]=l.window[S++],l.window[g++]=l.window[S++],C-=2;else{S=g-x;do{S+=l.end}while(S<0);if(C>(p=l.end-S)){if(C-=p,g-S>0&&p>g-S)do{l.window[g++]=l.window[S++]}while(0!=--p);else w(l.window,S,l.window,g,p),g+=p,S+=p,p=0;S=0}}do{l.window[g++]=l.window[S++]}while(0!=--C);break}if(0!=(64&p))return d.msg="invalid distance code",v+=C=m>>3<(C=d.avail_in-v)?m>>3:C,_-=C,m-=C<<3,l.bitb=f,l.bitk=m,d.avail_in=v,d.total_in+=_-d.next_in_index,d.next_in_index=_,l.write=g,n;c+=u[M+2],p=u[M=3*(h+(c+=f&a[p]))]}break}if(0!=(64&p))return 0!=(32&p)?(v+=C=m>>3<(C=d.avail_in-v)?m>>3:C,_-=C,m-=C<<3,l.bitb=f,l.bitk=m,d.avail_in=v,d.total_in+=_-d.next_in_index,d.next_in_index=_,l.write=g,1):(d.msg="invalid literal/length code",v+=C=m>>3<(C=d.avail_in-v)?m>>3:C,_-=C,m-=C<<3,l.bitb=f,l.bitk=m,d.avail_in=v,d.total_in+=_-d.next_in_index,d.next_in_index=_,l.write=g,n);if(c+=u[M+2],0==(p=u[M=3*(h+(c+=f&a[p]))])){f>>=u[M+1],m-=u[M+1],l.window[g++]=u[M+2],y--;break}}else f>>=u[M+1],m-=u[M+1],l.window[g++]=u[M+2],y--}while(y>=258&&v>=10);return v+=C=m>>3<(C=d.avail_in-v)?m>>3:C,_-=C,m-=C<<3,l.bitb=f,l.bitk=m,d.avail_in=v,d.total_in+=_-d.next_in_index,d.next_in_index=_,l.write=g,0},g.prototype.huft_build=function(t,o,a,s,r,l,d,c,u,h,p){var f,m,_,v,g,y,b,k,C,x,S,M,T,L,D;x=0,g=a;do{this.c[t[o+x]]++,x++,g--}while(0!=g);if(this.c[0]==a)return d[0]=-1,c[0]=0,0;for(k=c[0],y=1;y<=e&&0==this.c[y];y++);for(b=y,k<y&&(k=y),g=e;0!=g&&0==this.c[g];g--);for(_=g,k>g&&(k=g),c[0]=k,L=1<<y;y<g;y++,L<<=1)if((L-=this.c[y])<0)return n;if((L-=this.c[g])<0)return n;for(this.c[g]+=L,this.x[1]=y=0,x=1,T=2;0!=--g;)this.x[T]=y+=this.c[x],T++,x++;g=0,x=0;do{0!=(y=t[o+x])&&(this.v[this.x[y]++]=g),x++}while(++g<a);for(a=this.x[_],this.x[0]=g=0,x=0,v=-1,M=-k,this.u[0]=0,S=0,D=0;b<=_;b++)for(f=this.c[b];0!=f--;){for(;b>M+k;){if(v++,D=(D=_-(M+=k))>k?k:D,(m=1<<(y=b-M))>f+1&&(m-=f+1,T=b,y<D))for(;++y<D&&!((m<<=1)<=this.c[++T]);)m-=this.c[T];if(D=1<<y,this.hn[0]+D>1440)return n;this.u[v]=S=this.hn[0],this.hn[0]+=D,0!=v?(this.x[v]=g,this.r[0]=y,this.r[1]=k,y=g>>>M-k,this.r[2]=S-this.u[v-1]-y,w(this.r,0,u,3*(this.u[v-1]+y),3)):d[0]=S}for(this.r[1]=b-M,x>=a?this.r[0]=192:p[x]<s?(this.r[0]=this.v[x]<256?0:96,this.r[2]=this.v[x++]):(this.r[0]=l[this.v[x]-s]+16+64,this.r[2]=r[this.v[x++]-s]),m=1<<b-M,y=g>>>M;y<D;y+=m)w(this.r,0,u,3*(S+y),3);for(y=1<<b-1;0!=(g&y);y>>>=1)g^=y;for(g^=y,C=(1<<M)-1;(g&C)!=this.x[v];)v--,C=(1<<(M-=k))-1}return 0!=L&&1!=_?i:0},g.prototype.inflate_trees_bits=function(e,t,o,a,s){var r;return this.initWorkArea(19),this.hn[0]=0,(r=this.huft_build(e,0,19,19,null,null,o,t,a,this.hn,this.v))==n?s.msg="oversubscribed dynamic bit lengths tree":r!=i&&0!=t[0]||(s.msg="incomplete dynamic bit lengths tree",r=n),r},g.prototype.inflate_trees_dynamic=function(e,t,o,a,s,r,h,p,f){var m;return this.initWorkArea(288),this.hn[0]=0,0!=(m=this.huft_build(o,0,e,257,l,d,r,a,p,this.hn,this.v))||0==a[0]?(m==n?f.msg="oversubscribed literal/length tree":-4!=m&&(f.msg="incomplete literal/length tree",m=n),m):(this.initWorkArea(288),0!=(m=this.huft_build(o,e,t,0,c,u,h,s,p,this.hn,this.v))||0==s[0]&&e>257?(m==n?f.msg="oversubscribed distance tree":m==i?(f.msg="incomplete distance tree",m=n):-4!=m&&(f.msg="empty distance tree with lengths",m=n),m):0)},g.prototype.initWorkArea=function(t){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(t),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(e),this.x=new Int32Array(16)),this.v.length<t&&(this.v=new Int32Array(t));for(var n=0;n<t;n++)this.v[n]=0;for(n=0;n<16;n++)this.c[n]=0;for(n=0;n<3;n++)this.r[n]=0;w(this.c,0,this.u,0,e),w(this.c,0,this.x,0,16)};var b="function"==typeof new Uint8Array(1).subarray;function w(e,t,n,i,o){if(0!=o){if(!e)throw"Undef src";if(!n)throw"Undef dest";0==t&&o==e.length?k(e,n,i):b?k(e.subarray(t,t+o),n,i):1==e.BYTES_PER_ELEMENT&&o>100?k(new Uint8Array(e.buffer,e.byteOffset+t,o),n,i):function(e,t,n,i,o){for(var a=0;a<o;++a)n[i+a]=e[t+a]}(e,t,n,i,o)}}function k(e,t,n){t.set(e,n)}return{inflateBuffer:function(e,t,n,o){e=t?n?new Uint8Array(e,t,n):new Uint8Array(e,t,e.byteLength-t):new Uint8Array(e);var a=new h;a.inflateInit(15,!0),a.next_in=e,a.next_in_index=0,a.avail_in=e.length;for(var s=[],r=0;;){var l=new Uint8Array(32e3);a.next_out=l,a.next_out_index=0,a.avail_out=l.length;var d=a.inflate(0);if(0!=d&&1!=d&&d!=i)throw a.msg;if(0!=a.avail_out){var c=new Uint8Array(l.length-a.avail_out);w(l,0,c,0,l.length-a.avail_out),l=c}if(s.push(l),r+=l.length,1==d||d==i)break}if(o&&(o[0]=(t||0)+a.next_in_index),1==s.length)return s[0].buffer;for(var u=new Uint8Array(r),p=0,f=0;f<s.length;++f){var m=s[f];w(m,0,u,p,m.length),p+=m.length}return u.buffer},arrayCopy:w}}.apply(t,[]))||(e.exports=n)},58565:(e,t)=>{var n;void 0===(n=function(){"use strict";function e(e,t){if("number"!=typeof e||"number"!=typeof t)throw"Bad range "+e+","+t;this._min=e,this._max=t}function t(e){var t=e.sort(n),i=[],o=t.shift();t.forEach((function(e){e._min<=o._max?e._max>o._max&&(o._max=e._max):(i.push(o),o=e)})),i.push(o),this._ranges=i}function n(e,t){return e._min<t._min?-1:e._min>t._min?1:e._max<t._max?-1:t._max>e._max?1:0}return e.prototype.min=function(){return this._min},e.prototype.max=function(){return this._max},e.prototype.contains=function(e){return e>=this._min&&e<=this._max},e.prototype.isContiguous=function(){return!0},e.prototype.ranges=function(){return[this]},e.prototype._pushRanges=function(e){e.push(this)},e.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"},t.prototype.min=function(){return this._ranges[0].min()},t.prototype.max=function(){return this._ranges[this._ranges.length-1].max()},t.prototype.lower_bound=function(e){var t=this.ranges();if(e>this.max())return t.length;if(e<this.min())return 0;for(var n=0,i=t.length-1;n<=i;){var o=Math.floor((n+i)/2);if(e>t[o]._max)n=o+1;else{if(!(e<t[o]._min))return o;i=o-1}}return n},t.prototype.contains=function(e){var t=this.lower_bound(e);return!!(t<this._ranges.length&&this._ranges[t].contains(e))},t.prototype.insertRange=function(e){var t=this.lower_bound(e._min);if(t!==this._ranges.length){var n=this.ranges();if(e._max<n[t]._min)this._ranges.splice(t,0,e);else{n[t]._min<e._min&&(e._min=n[t]._min);for(var i=t+1;i<n.length&&n[i]._min<=e._max;)i++;n[--i]._max>e._max&&(e._max=n[i]._max),this._ranges.splice(t,i-t+1,e)}}else this._ranges.push(e)},t.prototype.isContiguous=function(){return this._ranges.length>1},t.prototype.ranges=function(){return this._ranges},t.prototype._pushRanges=function(e){for(var t=0;t<this._ranges.length;++t)e.push(this._ranges[t])},t.prototype.toString=function(){for(var e="",t=0;t<this._ranges.length;++t)t>0&&(e+=","),e+=this._ranges[t].toString();return e},{Range:e,union:function(e,n){return e instanceof t||(e instanceof Array||(e=[e]),e=new t(e)),n&&e.insertRange(n),e},intersection:function(n,i){for(var o=n.ranges(),a=i.ranges(),s=o.length,r=a.length,l=0,d=0,c=[];l<s&&d<r;){n=o[l],i=a[d];var u=Math.max(n.min(),i.min()),h=Math.min(n.max(),i.max());h>=u&&c.push(new e(u,h)),n.max()>i.max()?++d:++l}return 0==c.length?null:1==c.length?c[0]:new t(c)},coverage:function(e){for(var t=0,n=e.ranges(),i=0;i<n.length;++i){var o=n[i];t+=o.max()-o.min()+1}return t},rangeOver:function(e,t){return e.min()<t.min()?-1:e.min()>t.min()?1:e.max()<t.max()?-1:t.max()>e.max()?1:0},_rangeOrder:n}}.apply(t,[]))||(e.exports=n)},49917:(e,t,n)=>{var i,o=n(55806);(i=o).fn.farbtastic=function(e){return i.farbtastic(this,e),this},i.farbtastic=function(e,t){return(e=i(e)[0]).farbtastic||(e.farbtastic=new i._farbtastic(e,t))},i._farbtastic=function(e,t){var n=this;n.linkTo=function(e){return"object"==typeof n.callback&&i(n.callback).unbind("keyup",n.updateValue),n.color=null,"function"==typeof e?n.callback=e:"object"!=typeof e&&"string"!=typeof e||(n.callback=i(e),n.callback.bind("keyup",n.updateValue),n.callback[0].value&&n.setColor(n.callback[0].value)),this},n.updateValue=function(e){this.value&&this.value!=n.color&&n.setColor(this.value)},n.setColor=function(e){var t=n.unpack(e);return n.color!=e&&t&&(n.color=e,n.rgb=t,n.hsl=n.RGBToHSL(n.rgb),n.updateDisplay()),this},n.setHSL=function(e){return n.hsl=e,n.rgb=n.HSLToRGB(e),n.color=n.pack(n.rgb),n.updateDisplay(),this},n.initWidget=function(){var o={width:t.width,height:t.width};i(e).html('<div class="farbtastic" style="position: relative"><div class="farbtastic-solid"></div><canvas class="farbtastic-mask"></canvas><canvas class="farbtastic-overlay"></canvas></div>').find("*").attr(o).css(o).end().find("div>*").css("position","absolute"),i.browser.msie,n.radius=(t.width-t.wheelWidth)/2-1,n.square=Math.floor(.7*(n.radius-t.wheelWidth/2))-1,n.mid=Math.floor(t.width/2),n.markerSize=.3*t.wheelWidth,n.solidFill=i(".farbtastic-solid",e).css({width:2*n.square-1,height:2*n.square-1,left:n.mid-n.square,top:n.mid-n.square}),n.cnvMask=i(".farbtastic-mask",e),n.ctxMask=n.cnvMask[0].getContext("2d"),n.cnvOverlay=i(".farbtastic-overlay",e),n.ctxOverlay=n.cnvOverlay[0].getContext("2d"),n.ctxMask.translate(n.mid,n.mid),n.ctxOverlay.translate(n.mid,n.mid),n.drawCircle(),n.drawMask()},n.drawCircle=function(){new Date;var e,o,a=n.radius,s=t.wheelWidth,r=8/a/24*Math.PI,l=n.ctxMask,d=0;l.save(),l.lineWidth=s/a,l.scale(a,a);for(var c=0;c<=24;++c){var u=c/24,h=u*Math.PI*2,p=Math.sin(d),f=-Math.cos(d);if(x2=Math.sin(h),y2=-Math.cos(h),am=(d+h)/2,tan=1/Math.cos((h-d)/2),xm=Math.sin(am)*tan,ym=-Math.cos(am)*tan,color2=n.pack(n.HSLToRGB([u,1,.5])),c>0)if(i.browser.msie){var m=(1+Math.min(Math.abs(Math.tan(d)),Math.abs(Math.tan(Math.PI/2-d))))/24;e=n.pack(n.HSLToRGB([o-.15*m,1,.5])),color2=n.pack(n.HSLToRGB([u+.15*m,1,.5])),(g=l.createLinearGradient(p,f,x2,y2)).addColorStop(0,e),g.addColorStop(1,color2),l.fillStyle=g;var _=(a+s/2)/a,v=(a-s/2)/a;l.beginPath(),l.moveTo(p*_,f*_),l.quadraticCurveTo(xm*_,ym*_,x2*_,y2*_),l.lineTo(x2*v,y2*v),l.quadraticCurveTo(xm*v,ym*v,p*v,f*v),l.fill()}else{var g;(g=l.createLinearGradient(p,f,x2,y2)).addColorStop(0,e),g.addColorStop(1,color2),l.strokeStyle=g,l.beginPath(),l.moveTo(p,f),l.quadraticCurveTo(xm,ym,x2,y2),l.stroke()}d=h-r,e=color2,o=u}l.restore()},n.drawMask=function(){new Date;var e=2*n.square,t=n.square;function o(e,t,n){for(var i=1/e,o=1/t,a=0;a<=t;++a)for(var s=1-a*o,r=0;r<=e;++r){var l=1-r*i,d=1-2*Math.min(s*l,(1-s)*l);n(r,a,d>0?.5*(2*s-1+d)/d:0,d)}}if(n.ctxMask.getImageData){var a=Math.floor(e/2),s=document.createElement("canvas");s.width=s.height=a+1;var r=s.getContext("2d"),l=r.getImageData(0,0,a+1,a+1),d=0;o(a,a,(function(e,t,n,i){l.data[d++]=l.data[d++]=l.data[d++]=255*n,l.data[d++]=255*i})),r.putImageData(l,0,0),n.ctxMask.drawImage(s,0,0,a+1,a+1,-t,-t,2*t,2*t)}else if(i.browser.msie){var c,u,h=Math.floor(e/6);o(h,6,(function(e,o,a,s){if(0==e&&(c=u,u=[]),a=Math.round(255*a),s=Math.round(255*s),o>0){var r=c[e][0],l=c[e][1],d=n.packDX(r,l),p=n.packDX(a,s),f=Math.round(n.mid+(.333*(o-1)-1)*t),m=Math.round(n.mid+(.333*o-1)*t);i("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(StartColorStr="+d+", EndColorStr="+p+", GradientType=0)",top:f,height:m-f,left:n.mid+(6*e-t-1),width:6-(e==h?Math.round(3):0)}).appendTo(n.cnvMask)}u.push([a,s])}))}else o(a=Math.floor(e/2),a,(function(e,i,o,a){o=Math.round(255*o),n.ctxMask.fillStyle="rgba("+o+", "+o+", "+o+", "+a+")",n.ctxMask.fillRect(2*e-t-1,2*i-t-1,2,2)}))},n.drawMarkers=function(){var e=t.width,i=Math.ceil(n.markerSize/4),o=n.markerSize-i+1,a=6.28*n.hsl[0],s=Math.sin(a)*n.radius,r=-Math.cos(a)*n.radius,l=2*n.square*(.5-n.hsl[1]),d=2*n.square*(.5-n.hsl[2]),c=n.invert?"#fff":"#000",u=n.invert?"#000":"#fff",h=[{x:s,y:r,r:o,c:"#000",lw:i+1},{x:s,y:r,r:n.markerSize,c:"#fff",lw:i},{x:l,y:d,r:o,c:u,lw:i+1},{x:l,y:d,r:n.markerSize,c,lw:i}];n.ctxOverlay.clearRect(-n.mid,-n.mid,e,e);for(var p=0;p<h.length;p++){var f=h[p];n.ctxOverlay.lineWidth=f.lw,n.ctxOverlay.strokeStyle=f.c,n.ctxOverlay.beginPath(),n.ctxOverlay.arc(f.x,f.y,f.r,0,2*Math.PI,!0),n.ctxOverlay.stroke()}},n.updateDisplay=function(){n.invert=.3*n.rgb[0]+.59*n.rgb[1]+.11*n.rgb[2]<=.6,n.solidFill.css("backgroundColor",n.pack(n.HSLToRGB([n.hsl[0],1,.5]))),n.drawMarkers(),"object"==typeof n.callback?(i(n.callback).css({backgroundColor:n.color,color:n.invert?"#fff":"#000"}),i(n.callback).each((function(){"string"==typeof this.value&&this.value!=n.color&&(this.value=n.color)})).change()):"function"==typeof n.callback&&n.callback.call(n,n.color)},n.widgetCoords=function(e){return{x:e.pageX-n.offset.left-n.mid,y:e.pageY-n.offset.top-n.mid}},n.mousedown=function(t){i._farbtastic.dragging||(i(document).bind("mousemove",n.mousemove).bind("mouseup",n.mouseup),i._farbtastic.dragging=!0),n.offset=i(e).offset();var o=n.widgetCoords(t);return n.circleDrag=Math.max(Math.abs(o.x),Math.abs(o.y))>n.square+2,n.mousemove(t),!1},n.mousemove=function(e){var t=n.widgetCoords(e);if(n.circleDrag){var i=Math.atan2(t.x,-t.y)/6.28;n.setHSL([(i+1)%1,n.hsl[1],n.hsl[2]])}else{var o=Math.max(0,Math.min(1,-t.x/n.square/2+.5)),a=Math.max(0,Math.min(1,-t.y/n.square/2+.5));n.setHSL([n.hsl[0],o,a])}return!1},n.mouseup=function(){i(document).unbind("mousemove",n.mousemove),i(document).unbind("mouseup",n.mouseup),i._farbtastic.dragging=!1},n.dec2hex=function(e){return(e<16?"0":"")+e.toString(16)},n.packDX=function(e,t){return"#"+n.dec2hex(t)+n.dec2hex(e)+n.dec2hex(e)+n.dec2hex(e)},n.pack=function(e){var t=Math.round(255*e[0]),i=Math.round(255*e[1]),o=Math.round(255*e[2]);return"#"+n.dec2hex(t)+n.dec2hex(i)+n.dec2hex(o)},n.unpack=function(e){if(7==e.length){function t(t){return parseInt(e.substring(t,t+2),16)/255}return[t(1),t(3),t(5)]}if(4==e.length){function t(t){return parseInt(e.substring(t,t+1),16)/15}return[t(1),t(2),t(3)]}},n.HSLToRGB=function(e){var t,n,i=e[0],o=e[1],a=e[2];return t=2*a-(n=a<=.5?a*(o+1):a+o-a*o),[this.hueToRGB(t,n,i+.33333),this.hueToRGB(t,n,i),this.hueToRGB(t,n,i-.33333)]},n.hueToRGB=function(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(.66666-n)*6:e},n.RGBToHSL=function(e){var t=e[0],n=e[1],i=e[2],o=Math.min(t,n,i),a=Math.max(t,n,i),s=a-o,r=0,l=0,d=(o+a)/2;return d>0&&d<1&&(l=s/(d<.5?2*d:2-2*d)),s>0&&(a==t&&a!=n&&(r+=(n-i)/s),a==n&&a!=i&&(r+=2+(i-t)/s),a==i&&a!=t&&(r+=4+(t-n)/s),r/=6),[r,l,d]},t.callback||(t={callback:t}),t=i.extend({width:300,wheelWidth:(t.width||300)/10,callback:null},t),n.initWidget(),i("canvas.farbtastic-overlay",e).mousedown(n.mousedown),t.callback&&n.linkTo(t.callback),n.color||n.setColor("#808080")}},76233:(e,t,n)=>{var i=n(20615);n(26822),n(80510),n(58900),n(62268),n(77766),n(35670),n(91777),n(8257),n(44809),n(22862),n(7218),n(10340),e.exports=i},45215:(e,t,n)=>{var i,o,a,s,r,l=n(55806);!function(e,t){function n(t,n){var o,a,s,r=t.nodeName.toLowerCase();return"area"===r?(a=(o=t.parentNode).name,!(!t.href||!a||"map"!==o.nodeName.toLowerCase())&&(!!(s=e("img[usemap=#"+a+"]")[0])&&i(s))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r&&t.href||n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var o=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each((function(){var i=this;setTimeout((function(){e(i).focus(),n&&n.call(i)}),t)})):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,o,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(i=a.css("position"))||"relative"===i||"fixed"===i)&&(o=parseInt(a.css("zIndex"),10),!isNaN(o)&&0!==o))return o;a=a.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++o)}))},removeUniqueId:function(){return this.each((function(){a.test(this.id)&&e(this).removeAttr("id")}))}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(n,i){function o(t,n,i,o){return e.each(a,(function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)})),n}var a="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?r["inner"+i].call(this):this.each((function(){e(this).css(s,o(this,n)+"px")}))},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?r["outer"+i].call(this,t):this.each((function(){e(this).css(s,o(this,t,!0,n)+"px")}))}})),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(t,!o)}}),e((function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"})),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!t.length,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var o,a=e.ui[t].prototype;for(o in i)a.plugins[o]=a.plugins[o]||[],a.plugins[o].push([n,i[o]])},call:function(e,t,n){var i,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0||(t[i]=1,o=t[i]>0,t[i]=0,o)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,i,o,a,s){return e.ui.isOverAxis(t,i,a)&&e.ui.isOverAxis(n,o,s)}}))}(l),i=l,a=0,s=Array.prototype.slice,r=i.cleanData,i.cleanData=function(e){for(var t,n=0;null!=(t=e[n]);n++)try{i(t).triggerHandler("remove")}catch(e){}r(e)},i.widget=function(e,t,n){var o,a,s,r,l=e.split(".")[0];e=e.split(".")[1],o=l+"-"+e,n||(n=t,t=i.Widget),i.expr[":"][o.toLowerCase()]=function(e){return!!i.data(e,o)},i[l]=i[l]||{},a=i[l][e],s=i[l][e]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},i.extend(s,a,{version:n.version,_proto:i.extend({},n),_childConstructors:[]}),(r=new t).options=i.widget.extend({},r.options),i.each(n,(function(e,o){i.isFunction(o)&&(n[e]=function(){var n=function(){return t.prototype[e].apply(this,arguments)},i=function(n){return t.prototype[e].apply(this,n)};return function(){var e,t=this._super,a=this._superApply;return this._super=n,this._superApply=i,e=o.apply(this,arguments),this._super=t,this._superApply=a,e}}())})),s.prototype=i.widget.extend(r,{widgetEventPrefix:r.widgetEventPrefix||e},n,{constructor:s,namespace:l,widgetName:e,widgetBaseClass:o,widgetFullName:o}),a?(i.each(a._childConstructors,(function(e,t){var n=t.prototype;i.widget(n.namespace+"."+n.widgetName,s,t._proto)})),delete a._childConstructors):t._childConstructors.push(s),i.widget.bridge(e,s)},i.widget.extend=function(e){for(var t,n,a=s.call(arguments,1),r=0,l=a.length;r<l;r++)for(t in a[r])n=a[r][t],a[r].hasOwnProperty(t)&&n!==o&&(i.isPlainObject(n)?e[t]=i.isPlainObject(e[t])?i.widget.extend({},e[t],n):i.widget.extend({},n):e[t]=n);return e},i.widget.bridge=function(e,t){var n=t.prototype.widgetFullName;i.fn[e]=function(a){var r="string"==typeof a,l=s.call(arguments,1),d=this;return a=!r&&l.length?i.widget.extend.apply(null,[a].concat(l)):a,r?this.each((function(){var t,s=i.data(this,n);return s?i.isFunction(s[a])&&"_"!==a.charAt(0)?(t=s[a].apply(s,l))!==s&&t!==o?(d=t&&t.jquery?d.pushStack(t.get()):t,!1):void 0:i.error("no such method '"+a+"' for "+e+" widget instance"):i.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")})):this.each((function(){var e=i.data(this,n);e?e.option(a||{})._init():new t(a,this)})),d}},i.Widget=function(){},i.Widget._childConstructors=[],i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,t){t=i(t||this.defaultElement||this)[0],this.element=i(t),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=i.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=i(),this.hoverable=i(),this.focusable=i(),t!==this&&(i.data(t,this.widgetName,this),i.data(t,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=i(t.style?t.ownerDocument:t.document||t),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:i.noop,_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(i.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:i.noop,widget:function(){return this.element},option:function(e,t){var n,a,s,r=e;if(0===arguments.length)return i.widget.extend({},this.options);if("string"==typeof e)if(r={},n=e.split("."),e=n.shift(),n.length){for(a=r[e]=i.widget.extend({},this.options[e]),s=0;s<n.length-1;s++)a[n[s]]=a[n[s]]||{},a=a[n[s]];if(e=n.pop(),t===o)return a[e]===o?null:a[e];a[e]=t}else{if(t===o)return this.options[e]===o?null:this.options[e];r[e]=t}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,t){var n,o=this;t?(e=n=i(e),this.bindings=this.bindings.add(e)):(t=e,e=this.element,n=this.widget()),i.each(t,(function(t,a){function s(){if(!0!==o.options.disabled&&!i(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||i.guid++);var r=t.match(/^(\w+)\s*(.*)$/),l=r[1]+o.eventNamespace,d=r[2];d?n.delegate(d,l,s):e.bind(l,s)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){i(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){i(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){i(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){i(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,n){var o,a,s=this.options[e];if(n=n||{},(t=i.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],a=t.originalEvent)for(o in a)o in t||(t[o]=a[o]);return this.element.trigger(t,n),!(i.isFunction(s)&&!1===s.apply(this.element[0],[t].concat(n))||t.isDefaultPrevented())}},i.each({show:"fadeIn",hide:"fadeOut"},(function(e,t){i.Widget.prototype["_"+e]=function(n,o,a){"string"==typeof o&&(o={effect:o});var s,r=o?!0===o||"number"==typeof o?t:o.effect||t:e;"number"==typeof(o=o||{})&&(o={duration:o}),s=!i.isEmptyObject(o),o.complete=a,o.delay&&n.delay(o.delay),s&&i.effects&&(i.effects.effect[r]||!1!==i.uiBackCompat&&i.effects[r])?n[e](o):r!==e&&n[r]?n[r](o.duration,o.easing,a):n.queue((function(t){i(this)[e](),a&&a.call(n[0]),t()}))}})),!1!==i.uiBackCompat&&(i.Widget.prototype._getCreateOptions=function(){return i.metadata&&i.metadata.get(this.element[0])[this.widgetName]}),function(e,t){var n=!1;e(document).mouseup((function(e){n=!1})),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,o=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(o&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(l),function(e,t){function n(e,t,n){return[parseInt(e[0],10)*(p.test(e[0])?t/100:1),parseInt(e[1],10)*(p.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var o,a=Math.max,s=Math.abs,r=Math.round,d=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var n,i,a=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=a.children()[0];return e("body").append(a),n=s.offsetWidth,a.css("overflow","scroll"),n===(i=s.offsetWidth)&&(i=a[0].clientWidth),a.remove(),o=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,a="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,l,p,m,_,v=e(t.of),g=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo(g),b=v[0],w=(t.collision||"flip").split(" "),k={};return 9===b.nodeType?(l=v.width(),p=v.height(),m={top:0,left:0}):e.isWindow(b)?(l=v.width(),p=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):b.preventDefault?(t.at="left top",l=p=0,m={top:b.pageY,left:b.pageX}):(l=v.outerWidth(),p=v.outerHeight(),m=v.offset()),_=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=d.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=d.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",e=u.exec(i[0]),n=u.exec(i[1]),k[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?_.left+=l:"center"===t.at[0]&&(_.left+=l/2),"bottom"===t.at[1]?_.top+=p:"center"===t.at[1]&&(_.top+=p/2),o=n(k.at,l,p),_.left+=o[0],_.top+=o[1],this.each((function(){var d,c,u=e(this),h=u.outerWidth(),f=u.outerHeight(),b=i(this,"marginLeft"),C=i(this,"marginTop"),x=h+b+i(this,"marginRight")+y.width,S=f+C+i(this,"marginBottom")+y.height,M=e.extend({},_),T=n(k.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?M.left-=h:"center"===t.my[0]&&(M.left-=h/2),"bottom"===t.my[1]?M.top-=f:"center"===t.my[1]&&(M.top-=f/2),M.left+=T[0],M.top+=T[1],e.support.offsetFractions||(M.left=r(M.left),M.top=r(M.top)),d={marginLeft:b,marginTop:C},e.each(["left","top"],(function(n,i){e.ui.position[w[n]]&&e.ui.position[w[n]][i](M,{targetWidth:l,targetHeight:p,elemWidth:h,elemHeight:f,collisionPosition:d,collisionWidth:x,collisionHeight:S,offset:[o[0]+T[0],o[1]+T[1]],my:t.my,at:t.at,within:g,elem:u})})),e.fn.bgiframe&&u.bgiframe(),t.using&&(c=function(e){var n=m.left-M.left,i=n+l-h,o=m.top-M.top,r=o+p-f,d={target:{element:v,left:m.left,top:m.top,width:l,height:p},element:{element:u,left:M.left,top:M.top,width:h,height:f},horizontal:i<0?"left":n>0?"right":"center",vertical:r<0?"top":o>0?"bottom":"middle"};l<h&&s(n+i)<l&&(d.horizontal="center"),p<f&&s(o+r)<p&&(d.vertical="middle"),a(s(n),s(i))>a(s(o),s(r))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),u.offset(e.extend(M,{using:c}))}))},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,r=e.left-t.collisionPosition.marginLeft,l=o-r,d=r+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&d<=0?(n=e.left+l+t.collisionWidth-s-o,e.left+=l-n):e.left=d>0&&l<=0?o:l>d?o+s-t.collisionWidth:o:l>0?e.left+=l:d>0?e.left-=d:e.left=a(e.left-r,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,r=e.top-t.collisionPosition.marginTop,l=o-r,d=r+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&d<=0?(n=e.top+l+t.collisionHeight-s-o,e.top+=l-n):e.top=d>0&&l<=0?o:l>d?o+s-t.collisionHeight:o:l>0?e.top+=l:d>0?e.top-=d:e.top=a(e.top-r,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,a=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-r-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];c<0?((n=e.left+h+p+f+t.collisionWidth-r-a)<0||n<s(c))&&(e.left+=h+p+f):u>0&&((i=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||s(i)<u)&&(e.left+=h+p+f)},top:function(e,t){var n,i,o=t.within,a=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-r-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];c<0?(i=e.top+h+p+f+t.collisionHeight-r-a,e.top+h+p+f>c&&(i<0||i<s(c))&&(e.top+=h+p+f)):u>0&&(n=e.top-t.collisionPosition.marginTop+h+p+f-l,e.top+h+p+f>u&&(n>0||s(n)<u)&&(e.top+=h+p+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,o,a,s=document.getElementsByTagName("body")[0],r=document.createElement("div");for(a in t=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[a]=i[a];t.appendChild(r),(n=s||document.documentElement).insertBefore(t,n.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",o=e(r).offset().left,e.support.offsetFractions=o>10&&o<11,t.innerHTML="",n.removeChild(t)}(),!1!==e.uiBackCompat&&function(e){var n=e.fn.position;e.fn.position=function(i){if(!i||!i.offset)return n.call(this,i);var o=i.offset.split(" "),a=i.at.split(" ");return 1===o.length&&(o[1]=o[0]),/^\d/.test(o[0])&&(o[0]="+"+o[0]),/^\d/.test(o[1])&&(o[1]="+"+o[1]),1===a.length&&(/left|center|right/.test(a[0])?a[1]="center":(a[1]=a[0],a[0]="center")),n.call(this,e.extend(i,{at:a[0]+o[0]+" "+a[1]+o[1],offset:t}))}}(l)}(l),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var a=e.ui.keyCode;switch(o.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",o);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case a.UP:t=!0,this._keyEvent("previous",o);break;case a.DOWN:t=!0,this._keyEvent("next",o);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case a.TAB:this.menu.active&&this.menu.select(o);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void i.preventDefault();if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(i){i.target!==t.element[0]&&i.target!==n&&!e.contains(n,i.target)&&t.close()}))}))},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(i){t===n&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(l),function(e,t){var n,i,o,a,s="ui-button ui-widget ui-state-default ui-corner-all",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout((function(){t.button("refresh")}),1)},d=function(t){var n=t.name,i=t.form,o=e([]);return n&&(o=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter((function(){return!this.form}))),o};e.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(c?"":" ui-state-active"),h="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){r.disabled||(e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active"))})).bind("mouseleave"+this.eventNamespace,(function(){r.disabled||e(this).removeClass(u)})).bind("click"+this.eventNamespace,(function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){t.buttonElement.addClass(h)})).bind("blur"+this.eventNamespace,(function(){t.buttonElement.removeClass(h)})),c&&(this.element.bind("change"+this.eventNamespace,(function(){a||t.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(e){r.disabled||(a=!1,i=e.pageX,o=e.pageY)})).bind("mouseup"+this.eventNamespace,(function(e){r.disabled||i===e.pageX&&o===e.pageY||(a=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(r.disabled||a)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(r.disabled||a)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];d(n).not(n).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(r.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",(function(){n=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(r.disabled)return!1;e(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(t){if(r.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace,(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" ui-state-hover ui-state-active  "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?d(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(r),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,o=i.primary&&i.secondary,a=[];i.primary||i.secondary?(this.options.text&&a.push("ui-button-text-icon"+(o?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(a.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(l),function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!n&&i.not(".ui-state-disabled").length&&(n=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,o,a,s,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",a=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),a===o?s=!0:a=o+a,r=new RegExp("^"+n(a),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return r.test(e(this).children("a").text())})),(i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(a=String.fromCharCode(t.keyCode),r=new RegExp("^"+n(a),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return r.test(e(this).children("a").text())}))),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=a,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});(t=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),i.each((function(){var t=e(this),i=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",i.attr("id"))})),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,a,s,r;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,a=this.activeMenu.scrollTop(),s=this.activeMenu.height(),r=t.height(),o<0?this.activeMenu.scrollTop(a+o):o+r>s&&this.activeMenu.scrollTop(a+o-s+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-o<0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,o;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+o>0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(l),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,n,i=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(!0===i.range&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),n=i.values&&i.values.length||1,t=o.length;t<n;t++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=o.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(e){e.preventDefault()})).mouseenter((function(){i.disabled||e(this).addClass("ui-state-hover")})).mouseleave((function(){e(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))})).blur((function(){e(this).removeClass("ui-state-focus")})),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t)})),this._on(this.handles,{keydown:function(t){var n,i,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,a)))return}switch(o=this.options.step,n=i=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-o)}this._slide(t,a,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,o,a,s,r,l,d=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var n=Math.abs(i-d.values(t));o>n&&(o=n,a=e(this),s=t)})),!0===c.range&&this.values(1)===c.min&&(s+=1,a=e(this.handles[s])),!1!==this._start(t,s)&&(this._mouseSliding=!0,this._handleIndex=s,a.addClass("ui-state-active").focus(),r=a.offset(),l=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-a.width()/2,top:t.pageY-r.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,o,a;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),a=this._valueMin()+i*o,this._trimAlignValue(a)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,o,a;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&n>i||1===t&&n<i)&&(n=i),n!==this.values(t)&&((o=this.values())[t]=n,a=this._trigger("slide",e,{handle:this.handles[t],value:n,values:o}),i=this.values(t?0:1),!1!==a&&this.values(t,n,!0))):n!==this.value()&&(!1!==(a=this._trigger("slide",e,{handle:this.handles[t],value:n}))&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,o,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,o=arguments[0],a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(o[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,n){var i,o=0;switch(e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<o;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,o,a,s=this.options.range,r=this.options,l=this,d=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[d?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[d?"animate":"css"]({left:n+"%"},r.animate),1===i&&l.range[d?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:r.animate})):(0===i&&l.range.stop(1,1)[d?"animate":"css"]({bottom:n+"%"},r.animate),1===i&&l.range[d?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:r.animate}))),t=n})):(i=this.value(),o=this._valueMin(),a=this._valueMax(),n=a!==o?(i-o)/(a-o)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[d?"animate":"css"](c,r.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:n+"%"},r.animate),"max"===s&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:r.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:n+"%"},r.animate),"max"===s&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:r.animate}))}})}(l)},71143:(e,t,n)=>{!function(e){e.fn.drag=function(t,n,i){var o="string"==typeof t?t:"",a=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==o.indexOf("drag")&&(o="drag"+o),i=(t==a?n:i)||{},a?this.bind(o,i,a):this.trigger(o)};var t=e.event,n=t.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,i.datakey),o=t.data||{};n.related+=1,e.each(i.defaults,(function(e,t){void 0!==o[e]&&(n[e]=o[e])}))},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){if(!e.data(this,i.datakey)){var n=e.extend({related:0},i.defaults);e.data(this,i.datakey,n),t.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(e.data(this,i.datakey)||{}).related||(e.removeData(this,i.datakey),t.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(o){if(!i.touched){var a,s=o.data;if(!(0!=o.which&&s.which>0&&o.which!=s.which)&&!e(o.target).is(s.not)&&(!s.handle||e(o.target).closest(s.handle,o.currentTarget).length)&&(i.touched="touchstart"==o.type?this:null,s.propagates=1,s.mousedown=this,s.interactions=[i.interaction(this,s)],s.target=o.target,s.pageX=o.pageX,s.pageY=o.pageY,s.dragging=null,a=i.hijack(o,"draginit",s),s.propagates))return(a=i.flatten(a))&&a.length&&(s.interactions=[],e.each(a,(function(){s.interactions.push(i.interaction(this,s))}))),s.propagates=s.interactions.length,!1!==s.drop&&n.drop&&n.drop.handler(o,s),i.textselect(!1),i.touched?t.add(i.touched,"touchmove touchend",i.handler,s):t.add(document,"mousemove mouseup",i.handler,s),!(!i.touched||s.live)&&void 0}},interaction:function(t,n){var o=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new i.callback,droppable:[],offset:o}},handler:function(o){var a=o.data;switch(o.type){case!a.dragging&&"touchmove":o.preventDefault();case!a.dragging&&"mousemove":if(Math.pow(o.pageX-a.pageX,2)+Math.pow(o.pageY-a.pageY,2)<Math.pow(a.distance,2))break;o.target=a.target,i.hijack(o,"dragstart",a),a.propagates&&(a.dragging=!0);case"touchmove":o.preventDefault();case"mousemove":if(a.dragging){if(i.hijack(o,"drag",a),a.propagates){!1!==a.drop&&n.drop&&n.drop.handler(o,a);break}o.type="mouseup"}default:i.touched?t.remove(i.touched,"touchmove touchend",i.handler):t.remove(document,"mousemove mouseup",i.handler),a.dragging?(!1!==a.drop&&n.drop&&n.drop.handler(o,a),i.hijack(o,"dragend",a)):i.hijack(o,"dragclickonly",a),i.textselect(!0),!1===a.click&&a.dragging&&e.data(a.mousedown,"suppress.click",(new Date).getTime()+5),a.dragging=i.touched=!1}},hijack:function(n,o,a,s,r){if(a){var l,d,c,u={event:n.originalEvent,type:n.type},h=o.indexOf("drop")?"drag":"drop",p=s||0,f=isNaN(s)?a.interactions.length:s;n.type=o,n.originalEvent=null,a.results=[];do{if(d=a.interactions[p]){if("dragend"!==o&&d.cancelled)continue;c=i.properties(n,a,d),d.results=[],e(r||d[h]||a.droppable).each((function(s,r){if(c.target=r,n.isPropagationStopped=function(){return!1},!1===(l=r?t.dispatch.call(r,n,c):null)?("drag"==h&&(d.cancelled=!0,a.propagates-=1),"drop"==o&&(d[h][s]=null)):"dropinit"==o&&d.droppable.push(i.element(l)||r),"dragstart"==o&&(d.proxy=e(i.element(l)||d.drag)[0]),d.results.push(l),delete n.result,"dropinit"!==o)return l})),a.results[p]=i.flatten(d.results),"dropinit"==o&&(d.droppable=i.flatten(d.droppable)),"dragstart"!=o||d.cancelled||c.update()}}while(++p<f);return n.type=u.type,n.originalEvent=u.event,i.flatten(a.results)}},properties:function(e,t,n){var o=n.callback;return o.drag=n.drag,o.proxy=n.proxy||n.drag,o.startX=t.pageX,o.startY=t.pageY,o.deltaX=e.pageX-t.pageX,o.deltaY=e.pageY-t.pageY,o.originalX=n.offset.left,o.originalY=n.offset.top,o.offsetX=o.originalX+o.deltaX,o.offsetY=o.originalY+o.deltaY,o.drop=i.flatten((n.drop||[]).slice()),o.available=i.flatten((n.droppable||[]).slice()),o.update(),o},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,(function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?i.flatten(t):t}))},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,(function(e){n.drop.locate(this,e)}))}};var o=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return o.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var a=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&e.each(a.props,(function(e,n){t[n]=i[n]}))}return t}};n.draginit=n.dragstart=n.dragend=i}(n(55806))},93384:(e,t,n)=>{!function(e){e.fn._hover=e.fn.hover,e.fn.hover=function(e,t,n){return n&&this.bind("hoverstart",e),t&&this.bind("hoverend",n||t),e?this.bind("hover",n?t:e):this.trigger("hover")};var t=e.event.special.hover={delay:100,speed:100,setup:function(i){i=e.extend({speed:t.speed,delay:t.delay,hovered:0},i||{}),e.event.add(this,"mouseenter mouseleave",n,i)},teardown:function(){e.event.remove(this,"mouseenter mouseleave",n)}};function n(t){var i=t.data||t;switch(t.type){case"mouseenter":i.dist2=0,i.event=t,t.type="hoverstart",!1!==e.event.dispatch.call(this,t)&&(i.elem=this,e.event.add(this,"mousemove",n,i),i.timer=setTimeout(o,i.delay));break;case"mousemove":i.dist2+=Math.pow(t.pageX-i.event.pageX,2)+Math.pow(t.pageY-i.event.pageY,2),i.event=t;break;case"mouseleave":clearTimeout(i.timer),i.hovered?(t.type="hoverend",e.event.dispatch.call(this,t),i.hovered--):e.event.remove(i.elem,"mousemove",n);break;default:i.dist2<=Math.pow(i.speed*(i.delay/1e3),2)?(e.event.remove(i.elem,"mousemove",n),i.event.type="hover",!1!==e.event.dispatch.call(i.elem,i.event)&&i.hovered++):i.timer=setTimeout(o,i.delay),i.dist2=0}function o(){n(i)}}}(n(55806))},89928:(e,t,n)=>{var i=n(55806);!function(e){"use strict";var t={};t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData;var n=!!e.fn.prop;function i(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function o(t){var n=t.target,i=e(n);if(!i.is("[type=submit],[type=image]")){var o=i.closest("[type=submit]");if(0===o.length)return;n=o[0]}var a=this;if(a.clk=n,"image"==n.type)if(void 0!==t.offsetX)a.clk_x=t.offsetX,a.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var s=i.offset();a.clk_x=t.pageX-s.left,a.clk_y=t.pageY-s.top}else a.clk_x=t.pageX-n.offsetLeft,a.clk_y=t.pageY-n.offsetTop;setTimeout((function(){a.clk=a.clk_x=a.clk_y=null}),100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(i){if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var o,s,r,l=this;"function"==typeof i?i={success:i}:void 0===i&&(i={}),o=i.type||this.attr2("method"),(r=(r="string"==typeof(s=i.url||this.attr2("action"))?e.trim(s):"")||window.location.href||"")&&(r=(r.match(/^([^#]+)/)||[])[1]),i=e.extend(!0,{url:r,success:e.ajaxSettings.success,type:o||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var d={};if(this.trigger("form-pre-serialize",[this,i,d]),d.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&!1===i.beforeSerialize(this,i))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var c=i.traditional;void 0===c&&(c=e.ajaxSettings.traditional);var u,h=[],p=this.formToArray(i.semantic,h);if(i.data&&(i.extraData=i.data,u=e.param(i.data,c)),i.beforeSubmit&&!1===i.beforeSubmit(p,this,i))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,i,d]),d.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=e.param(p,c);u&&(f=f?f+"&"+u:u),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+f,i.data=null):i.data=f;var m=[];if(i.resetForm&&m.push((function(){l.resetForm()})),i.clearForm&&m.push((function(){l.clearForm(i.includeHidden)})),!i.dataType&&i.target){var _=i.success||function(){};m.push((function(t){var n=i.replaceTarget?"replaceWith":"html";e(i.target)[n](t).each(_,arguments)}))}else i.success&&m.push(i.success);if(i.success=function(e,t,n){for(var o=i.context||this,a=0,s=m.length;a<s;a++)m[a].apply(o,[e,t,n||l,l])},i.error){var v=i.error;i.error=function(e,t,n){var o=i.context||this;v.apply(o,[e,t,n,l])}}if(i.complete){var g=i.complete;i.complete=function(e,t){var n=i.context||this;g.apply(n,[e,t,l])}}var y=e("input[type=file]:enabled",this).filter((function(){return""!==e(this).val()})).length>0,b="multipart/form-data",w=l.attr("enctype")==b||l.attr("encoding")==b,k=t.fileapi&&t.formdata;a("fileAPI :"+k);var C,x=(y||w)&&!k;!1!==i.iframe&&(i.iframe||x)?i.closeKeepAlive?e.get(i.closeKeepAlive,(function(){C=M(p)})):C=M(p):C=(y||w)&&k?function(t){for(var n=new FormData,a=0;a<t.length;a++)n.append(t[a].name,t[a].value);if(i.extraData){var s=function(t){var n,o,a=e.param(t,i.traditional).split("&"),s=a.length,r=[];for(n=0;n<s;n++)a[n]=a[n].replace(/\+/g," "),o=a[n].split("="),r.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return r}(i.extraData);for(a=0;a<s.length;a++)s[a]&&n.append(s[a][0],s[a][1])}i.data=null;var r=e.extend(!0,{},e.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:o||"POST"});i.uploadProgress&&(r.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",(function(e){var t=0,n=e.loaded||e.position,o=e.total;e.lengthComputable&&(t=Math.ceil(n/o*100)),i.uploadProgress(e,n,o,t)}),!1),t});r.data=null;var l=r.beforeSend;return r.beforeSend=function(e,t){i.formData?t.data=i.formData:t.data=n,l&&l.call(this,e,t)},e.ajax(r)}(p):e.ajax(i),l.removeData("jqxhr").data("jqxhr",C);for(var S=0;S<h.length;S++)h[S]=null;return this.trigger("form-submit-notify",[this,i]),this;function M(t){var s,r,d,c,u,p,f,m,_,v,g,y,b=l[0],w=e.Deferred();if(w.abort=function(e){m.abort(e)},t)for(r=0;r<h.length;r++)s=e(h[r]),n?s.prop("disabled",!1):s.removeAttr("disabled");if((d=e.extend(!0,{},e.ajaxSettings,i)).context=d.context||d,u="jqFormIO"+(new Date).getTime(),d.iframeTarget?(v=(p=e(d.iframeTarget)).attr2("name"))?u=v:p.attr2("name",u):(p=e('<iframe name="'+u+'" src="'+d.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),f=p[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";a("aborting upload... "+n),this.aborted=1;try{f.contentWindow.document.execCommand&&f.contentWindow.document.execCommand("Stop")}catch(e){}p.attr("src",d.iframeSrc),m.error=n,d.error&&d.error.call(d.context,m,n,t),c&&e.event.trigger("ajaxError",[m,d,n]),d.complete&&d.complete.call(d.context,m,n)}},(c=d.global)&&0==e.active++&&e.event.trigger("ajaxStart"),c&&e.event.trigger("ajaxSend",[m,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,m,d))return d.global&&e.active--,w.reject(),w;if(m.aborted)return w.reject(),w;(_=b.clk)&&(v=_.name)&&!_.disabled&&(d.extraData=d.extraData||{},d.extraData[v]=_.value,"image"==_.type&&(d.extraData[v+".x"]=b.clk_x,d.extraData[v+".y"]=b.clk_y));var k=1,C=2;function x(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){a("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){a("cannot get iframe.contentDocument: "+n),t=e.document}return t}var S=e("meta[name=csrf-token]").attr("content"),M=e("meta[name=csrf-param]").attr("content");function T(){var t=l.attr2("target"),n=l.attr2("action");b.setAttribute("target",u),o&&!/post/i.test(o)||b.setAttribute("method","POST"),n!=d.url&&b.setAttribute("action",d.url),d.skipEncodingOverride||o&&!/post/i.test(o)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(y=setTimeout((function(){g=!0,A(k)}),d.timeout));var i=[];try{if(d.extraData)for(var s in d.extraData)d.extraData.hasOwnProperty(s)&&(e.isPlainObject(d.extraData[s])&&d.extraData[s].hasOwnProperty("name")&&d.extraData[s].hasOwnProperty("value")?i.push(e('<input type="hidden" name="'+d.extraData[s].name+'">').val(d.extraData[s].value).appendTo(b)[0]):i.push(e('<input type="hidden" name="'+s+'">').val(d.extraData[s]).appendTo(b)[0]));d.iframeTarget||p.appendTo("body"),f.attachEvent?f.attachEvent("onload",A):f.addEventListener("load",A,!1),setTimeout((function e(){try{var t=x(f).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){a("Server abort: ",e," (",e.name,")"),A(C),y&&clearTimeout(y),y=void 0}}),15);try{b.submit()}catch(e){document.createElement("form").submit.apply(b)}}finally{b.setAttribute("action",n),t?b.setAttribute("target",t):l.removeAttr("target"),e(i).remove()}}M&&S&&(d.extraData=d.extraData||{},d.extraData[M]=S),d.forceSync?T():setTimeout(T,10);var L,D,E,O=50;function A(t){if(!m.aborted&&!E){if((D=x(f))||(a("cannot access response document"),t=C),t===k&&m)return m.abort("timeout"),void w.reject(m,"timeout");if(t==C&&m)return m.abort("server abort"),void w.reject(m,"error","server abort");if(D&&D.location.href!=d.iframeSrc||g){f.detachEvent?f.detachEvent("onload",A):f.removeEventListener("load",A,!1);var n,i="success";try{if(g)throw"timeout";var o="xml"==d.dataType||D.XMLDocument||e.isXMLDoc(D);if(a("isXml="+o),!o&&window.opera&&(null===D.body||!D.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(A,250);var s=D.body?D.body:D.documentElement;m.responseText=s?s.innerHTML:null,m.responseXML=D.XMLDocument?D.XMLDocument:D,o&&(d.dataType="xml"),m.getResponseHeader=function(e){return{"content-type":d.dataType}[e.toLowerCase()]},s&&(m.status=Number(s.getAttribute("status"))||m.status,m.statusText=s.getAttribute("statusText")||m.statusText);var r=(d.dataType||"").toLowerCase(),l=/(json|script|text)/.test(r);if(l||d.textarea){var u=D.getElementsByTagName("textarea")[0];if(u)m.responseText=u.value,m.status=Number(u.getAttribute("status"))||m.status,m.statusText=u.getAttribute("statusText")||m.statusText;else if(l){var h=D.getElementsByTagName("pre")[0],_=D.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:_&&(m.responseText=_.textContent?_.textContent:_.innerText)}}else"xml"==r&&!m.responseXML&&m.responseText&&(m.responseXML=I(m.responseText));try{L=R(m,r,d)}catch(e){i="parsererror",m.error=n=e||i}}catch(e){a("error caught: ",e),i="error",m.error=n=e||i}m.aborted&&(a("upload aborted"),i=null),m.status&&(i=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===i?(d.success&&d.success.call(d.context,L,"success",m),w.resolve(m.responseText,"success",m),c&&e.event.trigger("ajaxSuccess",[m,d])):i&&(void 0===n&&(n=m.statusText),d.error&&d.error.call(d.context,m,i,n),w.reject(m,"error",n),c&&e.event.trigger("ajaxError",[m,d,n])),c&&e.event.trigger("ajaxComplete",[m,d]),c&&! --e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,m,i),E=!0,d.timeout&&clearTimeout(y),setTimeout((function(){d.iframeTarget?p.attr("src",d.iframeSrc):p.remove(),m.responseXML=null}),100)}}}var I=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},R=function(t,n,i){var o=t.getResponseHeader("content-type")||"",a="xml"===n||!n&&o.indexOf("xml")>=0,s=a?t.responseXML:t.responseText;return a&&"parsererror"===s.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(s=i.dataFilter(s,n)),"string"==typeof s&&("json"===n||!n&&o.indexOf("json")>=0?s=P(s):("script"===n||!n&&o.indexOf("javascript")>=0)&&e.globalEval(s)),s};return w}},e.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&e.isFunction(e.fn.on),!t.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(a("DOM not ready, queuing ajaxForm"),e((function(){e(n.s,n.c).ajaxForm(t)})),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,o).on("submit.form-plugin",this.selector,t,i).on("click.form-plugin",this.selector,t,o),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,i).bind("click.form-plugin",t,o)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,i){var o=[];if(0===this.length)return o;var a,s,r,l,d,c,u,h=this[0],p=n?h.getElementsByTagName("*"):h.elements;if(!p)return o;for(a=0,c=p.length;a<c;a++)if((r=(d=p[a]).name)&&!d.disabled)if(n&&h.clk&&"image"==d.type)h.clk==d&&(o.push({name:r,value:e(d).val(),type:d.type}),o.push({name:r+".x",value:h.clk_x},{name:r+".y",value:h.clk_y}));else if((l=e.fieldValue(d,!0))&&l.constructor==Array)for(i&&i.push(d),s=0,u=l.length;s<u;s++)o.push({name:r,value:l[s]});else if(t.fileapi&&"file"==d.type){i&&i.push(d);var f=d.files;if(f.length)for(s=0;s<f.length;s++)o.push({name:r,value:f[s],type:d.type});else o.push({name:r,value:"",type:d.type})}else null!=l&&(i&&i.push(d),o.push({name:r,value:l,type:d.type,required:d.required}));if(!n&&h.clk){var m=e(h.clk),_=m[0];(r=_.name)&&!_.disabled&&"image"==_.type&&(o.push({name:r,value:m.val()}),o.push({name:r+".x",value:h.clk_x},{name:r+".y",value:h.clk_y}))}return o},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each((function(){var i=this.name;if(i){var o=e.fieldValue(this,t);if(o&&o.constructor==Array)for(var a=0,s=o.length;a<s;a++)n.push({name:i,value:o[a]});else null!=o&&n.push({name:this.name,value:o})}})),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,o=this.length;i<o;i++){var a=this[i],s=e.fieldValue(a,t);null==s||s.constructor==Array&&!s.length||(s.constructor==Array?e.merge(n,s):n.push(s))}return n},e.fieldValue=function(t,n){var i=t.name,o=t.type,a=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!t.checked||("submit"==o||"image"==o)&&t.form&&t.form.clk!=t||"select"==a&&-1==t.selectedIndex))return null;if("select"==a){var s=t.selectedIndex;if(s<0)return null;for(var r=[],l=t.options,d="select-one"==o,c=d?s+1:l.length,u=d?s:0;u<c;u++){var h=l[u];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),d)return p;r.push(p)}}return r}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,o=this.tagName.toLowerCase();n.test(i)||"textarea"==o?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==o?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1}(void 0!==i?i:window.Zepto)},20615:function(e,t){var n,i,o;i="undefined"!=typeof window?window:this,o=function(i,o){var a=[],s=i.document,r=a.slice,l=a.concat,d=a.push,c=a.indexOf,u={},h=u.toString,p=u.hasOwnProperty,f={},m="2.2.4",_=function(e,t){return new _.fn.init(e,t)},v=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g=/^-ms-/,y=/-([\da-z])/gi,b=function(e,t){return t.toUpperCase()};function w(e){var t=!!e&&"length"in e&&e.length,n=_.type(e);return"function"!==n&&!_.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:m,constructor:_,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:d,sort:a.sort,splice:a.splice},_.extend=_.fn.extend=function(){var e,t,n,i,o,a,s=arguments[0]||{},r=1,l=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[r]||{},r++),"object"==typeof s||_.isFunction(s)||(s={}),r===l&&(s=this,r--);r<l;r++)if(null!=(e=arguments[r]))for(t in e)n=s[t],s!==(i=e[t])&&(d&&i&&(_.isPlainObject(i)||(o=_.isArray(i)))?(o?(o=!1,a=n&&_.isArray(n)?n:[]):a=n&&_.isPlainObject(n)?n:{},s[t]=_.extend(d,a,i)):void 0!==i&&(s[t]=i));return s},_.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===_.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!_.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==_.type(e)||e.nodeType||_.isWindow(e))return!1;if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||p.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[h.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=_.trim(e))&&(1===e.indexOf("use strict")?((t=s.createElement("script")).text=e,s.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(g,"ms-").replace(y,b)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(w(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(v,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(w(Object(e))?_.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,a=e.length,s=!n;o<a;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,a=0,s=[];if(w(e))for(i=e.length;a<i;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return l.apply([],s)},guid:1,proxy:function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),_.isFunction(e))return i=r.call(arguments,2),o=function(){return e.apply(t||this,i.concat(r.call(arguments)))},o.guid=e.guid=e.guid||_.guid++,o},now:Date.now,support:f}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=a[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var k=function(e){var t,n,i,o,a,s,r,l,d,c,u,h,p,f,m,_,v,g,y,b="sizzle"+1*new Date,w=e.document,k=0,C=0,x=ae(),S=ae(),M=ae(),T=function(e,t){return e===t&&(u=!0),0},L=1<<31,D={}.hasOwnProperty,E=[],O=E.pop,A=E.push,I=E.push,P=E.slice,R=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Y="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+Y+"*("+H+")(?:"+Y+"*([*^$|!~]?=)"+Y+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+Y+"*\\]",F=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",B=new RegExp(Y+"+","g"),$=new RegExp("^"+Y+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Y+"+$","g"),z=new RegExp("^"+Y+"*,"+Y+"*"),W=new RegExp("^"+Y+"*([>+~]|"+Y+")"+Y+"*"),U=new RegExp("="+Y+"*([^\\]'\"]*?)"+Y+"*\\]","g"),V=new RegExp(F),q=new RegExp("^"+H+"$"),Z={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Y+"*(even|odd|(([+-]|)(\\d*)n|)"+Y+"*(?:([+-]|)"+Y+"*(\\d+)|))"+Y+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+Y+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Y+"*((?:-\\d)?\\d*)"+Y+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+Y+"?|("+Y+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=function(){h()};try{I.apply(E=P.call(w.childNodes),w.childNodes),E[w.childNodes.length].nodeType}catch(e){I={apply:E.length?function(e,t){A.apply(e,P.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function oe(e,t,i,o){var a,r,d,c,u,f,v,g,k=t&&t.ownerDocument,C=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return i;if(!o&&((t?t.ownerDocument||t:w)!==p&&h(t),t=t||p,m)){if(11!==C&&(f=X.exec(e)))if(a=f[1]){if(9===C){if(!(d=t.getElementById(a)))return i;if(d.id===a)return i.push(d),i}else if(k&&(d=k.getElementById(a))&&y(t,d)&&d.id===a)return i.push(d),i}else{if(f[2])return I.apply(i,t.getElementsByTagName(e)),i;if((a=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(i,t.getElementsByClassName(a)),i}if(n.qsa&&!M[e+" "]&&(!_||!_.test(e))){if(1!==C)k=t,g=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(ee,"\\$&"):t.setAttribute("id",c=b),r=(v=s(e)).length,u=q.test(c)?"#"+c:"[id='"+c+"']";r--;)v[r]=u+" "+me(v[r]);g=v.join(","),k=Q.test(e)&&pe(t.parentNode)||t}if(g)try{return I.apply(i,k.querySelectorAll(g)),i}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return l(e.replace($,"$1"),t,i,o)}function ae(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function se(e){return e[b]=!0,e}function re(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function de(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return se((function(t){return t=+t,se((function(n,i){for(var o,a=e([],n.length,t),s=a.length;s--;)n[o=a[s]]&&(n[o]=!(i[o]=n[o]))}))}))}function pe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},a=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=oe.setDocument=function(e){var t,o,s=e?e.ownerDocument||e:w;return s!==p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,m=!a(p),(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ie,!1):o.attachEvent&&o.attachEvent("onunload",ie)),n.attributes=re((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=re((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(p.getElementsByClassName),n.getById=re((function(e){return f.appendChild(e).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),n.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}},i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],_=[],(n.qsa=K.test(p.querySelectorAll))&&(re((function(e){f.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+Y+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\["+Y+"*(?:value|"+j+")"),e.querySelectorAll("[id~="+b+"-]").length||_.push("~="),e.querySelectorAll(":checked").length||_.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||_.push(".#.+[+~]")})),re((function(e){var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name"+Y+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")}))),(n.matchesSelector=K.test(g=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&re((function(e){n.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),v.push("!=",F)})),_=_.length&&new RegExp(_.join("|")),v=v.length&&new RegExp(v.join("|")),t=K.test(f.compareDocumentPosition),y=t||K.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===p||e.ownerDocument===w&&y(w,e)?-1:t===p||t.ownerDocument===w&&y(w,t)?1:c?R(c,e)-R(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,s=[e],r=[t];if(!o||!a)return e===p?-1:t===p?1:o?-1:a?1:c?R(c,e)-R(c,t):0;if(o===a)return de(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)r.unshift(n);for(;s[i]===r[i];)i++;return i?de(s[i],r[i]):s[i]===w?-1:r[i]===w?1:0},p):p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(U,"='$1']"),n.matchesSelector&&m&&!M[t+" "]&&(!v||!v.test(t))&&(!_||!_.test(t)))try{var i=g.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return oe(t,p,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),y(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var o=i.attrHandle[t.toLowerCase()],a=o&&D.call(i.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==a?a:n.attributes||!m?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],o=0,a=0;if(u=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(T),u){for(;t=e[a++];)t===e[a]&&(o=i.push(a));for(;o--;)e.splice(i[o],1)}return c=null,e},o=oe.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},i=oe.selectors={cacheLength:50,createPseudo:se,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+Y+")"+e+"("+Y+"|$)"))&&x(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=oe.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(B," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),r="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var d,c,u,h,p,f,m=a!==s?"nextSibling":"previousSibling",_=t.parentNode,v=r&&t.nodeName.toLowerCase(),g=!l&&!r,y=!1;if(_){if(a){for(;m;){for(h=t;h=h[m];)if(r?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&g){for(y=(p=(d=(c=(u=(h=_)[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===k&&d[1])&&d[2],h=p&&_.childNodes[p];h=++p&&h&&h[m]||(y=p=0)||f.pop();)if(1===h.nodeType&&++y&&h===t){c[e]=[k,p,y];break}}else if(g&&(y=p=(d=(c=(u=(h=t)[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===k&&d[1]),!1===y)for(;(h=++p&&h&&h[m]||(y=p=0)||f.pop())&&((r?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(g&&((c=(u=h[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]=[k,y]),h!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return o[b]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,n){for(var i,a=o(e,t),s=a.length;s--;)e[i=R(e,a[s])]=!(n[i]=a[s])})):function(e){return o(e,0,n)}):o}},pseudos:{not:se((function(e){var t=[],n=[],i=r(e.replace($,"$1"));return i[b]?se((function(e,t,n,o){for(var a,s=i(e,null,o,[]),r=e.length;r--;)(a=s[r])&&(e[r]=!(t[r]=a))})):function(e,o,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}})),has:se((function(e){return function(t){return oe(e,t).length>0}})),contains:se((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}})),lang:se((function(e){return q.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he((function(){return[0]})),last:he((function(e,t){return[t-1]})),eq:he((function(e,t,n){return[n<0?n+t:n]})),even:he((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:he((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:he((function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e})),gt:he((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ue(t);function fe(){}function me(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function _e(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,a)}:function(t,n,s){var r,l,d,c=[k,a];if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if((r=(l=(d=t[b]||(t[b]={}))[t.uniqueID]||(d[t.uniqueID]={}))[i])&&r[0]===k&&r[1]===a)return c[2]=r[2];if(l[i]=c,c[2]=e(t,n,s))return!0}}}function ve(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function ge(e,t,n,i,o){for(var a,s=[],r=0,l=e.length,d=null!=t;r<l;r++)(a=e[r])&&(n&&!n(a,i,o)||(s.push(a),d&&t.push(r)));return s}function ye(e,t,n,i,o,a){return i&&!i[b]&&(i=ye(i)),o&&!o[b]&&(o=ye(o,a)),se((function(a,s,r,l){var d,c,u,h=[],p=[],f=s.length,m=a||function(e,t,n){for(var i=0,o=t.length;i<o;i++)oe(e,t[i],n);return n}(t||"*",r.nodeType?[r]:r,[]),_=!e||!a&&t?m:ge(m,h,e,r,l),v=n?o||(a?e:f||i)?[]:s:_;if(n&&n(_,v,r,l),i)for(d=ge(v,p),i(d,[],r,l),c=d.length;c--;)(u=d[c])&&(v[p[c]]=!(_[p[c]]=u));if(a){if(o||e){if(o){for(d=[],c=v.length;c--;)(u=v[c])&&d.push(_[c]=u);o(null,v=[],d,l)}for(c=v.length;c--;)(u=v[c])&&(d=o?R(a,u):h[c])>-1&&(a[d]=!(s[d]=u))}}else v=ge(v===s?v.splice(f,v.length):v),o?o(null,s,v,l):I.apply(s,v)}))}function be(e){for(var t,n,o,a=e.length,s=i.relative[e[0].type],r=s||i.relative[" "],l=s?1:0,c=_e((function(e){return e===t}),r,!0),u=_e((function(e){return R(t,e)>-1}),r,!0),h=[function(e,n,i){var o=!s&&(i||n!==d)||((t=n).nodeType?c(e,n,i):u(e,n,i));return t=null,o}];l<a;l++)if(n=i.relative[e[l].type])h=[_e(ve(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(o=++l;o<a&&!i.relative[e[o].type];o++);return ye(l>1&&ve(h),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace($,"$1"),n,l<o&&be(e.slice(l,o)),o<a&&be(e=e.slice(o)),o<a&&me(e))}h.push(n)}return ve(h)}return fe.prototype=i.filters=i.pseudos,i.setFilters=new fe,s=oe.tokenize=function(e,t){var n,o,a,s,r,l,d,c=S[e+" "];if(c)return t?0:c.slice(0);for(r=e,l=[],d=i.preFilter;r;){for(s in n&&!(o=z.exec(r))||(o&&(r=r.slice(o[0].length)||r),l.push(a=[])),n=!1,(o=W.exec(r))&&(n=o.shift(),a.push({value:n,type:o[0].replace($," ")}),r=r.slice(n.length)),i.filter)!(o=Z[s].exec(r))||d[s]&&!(o=d[s](o))||(n=o.shift(),a.push({value:n,type:s,matches:o}),r=r.slice(n.length));if(!n)break}return t?r.length:r?oe.error(e):S(e,l).slice(0)},r=oe.compile=function(e,t){var n,o=[],a=[],r=M[e+" "];if(!r){for(t||(t=s(e)),n=t.length;n--;)(r=be(t[n]))[b]?o.push(r):a.push(r);r=M(e,function(e,t){var n=t.length>0,o=e.length>0,a=function(a,s,r,l,c){var u,f,_,v=0,g="0",y=a&&[],b=[],w=d,C=a||o&&i.find.TAG("*",c),x=k+=null==w?1:Math.random()||.1,S=C.length;for(c&&(d=s===p||s||c);g!==S&&null!=(u=C[g]);g++){if(o&&u){for(f=0,s||u.ownerDocument===p||(h(u),r=!m);_=e[f++];)if(_(u,s||p,r)){l.push(u);break}c&&(k=x)}n&&((u=!_&&u)&&v--,a&&y.push(u))}if(v+=g,n&&g!==v){for(f=0;_=t[f++];)_(y,b,s,r);if(a){if(v>0)for(;g--;)y[g]||b[g]||(b[g]=O.call(l));b=ge(b)}I.apply(l,b),c&&!a&&b.length>0&&v+t.length>1&&oe.uniqueSort(l)}return c&&(k=x,d=w),y};return n?se(a):a}(a,o)),r.selector=e}return r},l=oe.select=function(e,t,o,a){var l,d,c,u,h,p="function"==typeof e&&e,f=!a&&s(e=p.selector||e);if(o=o||[],1===f.length){if((d=f[0]=f[0].slice(0)).length>2&&"ID"===(c=d[0]).type&&n.getById&&9===t.nodeType&&m&&i.relative[d[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return o;p&&(t=t.parentNode),e=e.slice(d.shift().value.length)}for(l=Z.needsContext.test(e)?0:d.length;l--&&(c=d[l],!i.relative[u=c.type]);)if((h=i.find[u])&&(a=h(c.matches[0].replace(te,ne),Q.test(d[0].type)&&pe(t.parentNode)||t))){if(d.splice(l,1),!(e=a.length&&me(d)))return I.apply(o,a),o;break}}return(p||r(e,f))(a,t,!m,o,!t||Q.test(e)&&pe(t.parentNode)||t),o},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!u,h(),n.sortDetached=re((function(e){return 1&e.compareDocumentPosition(p.createElement("div"))})),re((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||le("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&re((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||le("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),re((function(e){return null==e.getAttribute("disabled")}))||le(j,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),oe}(i);_.find=k,_.expr=k.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=k.uniqueSort,_.text=k.getText,_.isXMLDoc=k.isXML,_.contains=k.contains;var C=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&_(e).is(n))break;i.push(e)}return i},x=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},S=_.expr.match.needsContext,M=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function L(e,t,n){if(_.isFunction(t))return _.grep(e,(function(e,i){return!!t.call(e,i,e)!==n}));if(t.nodeType)return _.grep(e,(function(e){return e===t!==n}));if("string"==typeof t){if(T.test(t))return _.filter(t,e,n);t=_.filter(t,e)}return _.grep(e,(function(e){return c.call(t,e)>-1!==n}))}_.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?_.find.matchesSelector(i,e)?[i]:[]:_.find.matches(e,_.grep(t,(function(e){return 1===e.nodeType})))},_.fn.extend({find:function(e){var t,n=this.length,i=[],o=this;if("string"!=typeof e)return this.pushStack(_(e).filter((function(){for(t=0;t<n;t++)if(_.contains(o[t],this))return!0})));for(t=0;t<n;t++)_.find(e,o[t],i);return(i=this.pushStack(n>1?_.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(L(this,e||[],!1))},not:function(e){return this.pushStack(L(this,e||[],!0))},is:function(e){return!!L(this,"string"==typeof e&&S.test(e)?_(e):e||[],!1).length}});var D,E=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(_.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:E.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:s,!0)),M.test(i[1])&&_.isPlainObject(t))for(i in t)_.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=s.getElementById(i[2]))&&o.parentNode&&(this.length=1,this[0]=o),this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):_.isFunction(e)?void 0!==n.ready?n.ready(e):e(_):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),_.makeArray(e,this))}).prototype=_.fn,D=_(s);var O=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(_.contains(this,t[e]))return!0}))},closest:function(e,t){for(var n,i=0,o=this.length,a=[],s=S.test(e)||"string"!=typeof e?_(e,t||this.context):0;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&_.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?_.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?c.call(_(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return C(e,"parentNode")},parentsUntil:function(e,t,n){return C(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return C(e,"nextSibling")},prevAll:function(e){return C(e,"previousSibling")},nextUntil:function(e,t,n){return C(e,"nextSibling",n)},prevUntil:function(e,t,n){return C(e,"previousSibling",n)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return e.contentDocument||_.merge([],e.childNodes)}},(function(e,t){_.fn[e]=function(n,i){var o=_.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=_.filter(i,o)),this.length>1&&(A[e]||_.uniqueSort(o),O.test(e)&&o.reverse()),this.pushStack(o)}}));var P,R=/\S+/g;function j(){s.removeEventListener("DOMContentLoaded",j),i.removeEventListener("load",j),_.ready()}_.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return _.each(e.match(R)||[],(function(e,n){t[n]=!0})),t}(e):_.extend({},e);var t,n,i,o,a=[],s=[],r=-1,l=function(){for(o=e.once,i=t=!0;s.length;r=-1)for(n=s.shift();++r<a.length;)!1===a[r].apply(n[0],n[1])&&e.stopOnFalse&&(r=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},d={add:function(){return a&&(n&&!t&&(r=a.length-1,s.push(n)),function t(n){_.each(n,(function(n,i){_.isFunction(i)?e.unique&&d.has(i)||a.push(i):i&&i.length&&"string"!==_.type(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return _.each(arguments,(function(e,t){for(var n;(n=_.inArray(t,a,n))>-1;)a.splice(n,1),n<=r&&r--})),this},has:function(e){return e?_.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=s=[],n||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},_.extend({Deferred:function(e){var t=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return _.Deferred((function(n){_.each(t,(function(t,a){var s=_.isFunction(e[t])&&e[t];o[a[1]]((function(){var e=s&&s.apply(this,arguments);e&&_.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this===i?n.promise():this,s?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?_.extend(e,i):i}},o={};return i.pipe=i.then,_.each(t,(function(e,a){var s=a[2],r=a[3];i[a[1]]=s.add,r&&s.add((function(){n=r}),t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?i:this,arguments),this},o[a[0]+"With"]=s.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,a=r.call(arguments),s=a.length,l=1!==s||e&&_.isFunction(e.promise)?s:0,d=1===l?e:_.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?r.call(arguments):o,i===t?d.notifyWith(n,i):--l||d.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);o<s;o++)a[o]&&_.isFunction(a[o].promise)?a[o].promise().progress(c(o,n,t)).done(c(o,i,a)).fail(d.reject):--l;return l||d.resolveWith(i,a),d.promise()}}),_.fn.ready=function(e){return _.ready.promise().done(e),this},_.extend({isReady:!1,readyWait:1,holdReady:function(e){e?_.readyWait++:_.ready(!0)},ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||(P.resolveWith(s,[_]),_.fn.triggerHandler&&(_(s).triggerHandler("ready"),_(s).off("ready"))))}}),_.ready.promise=function(e){return P||(P=_.Deferred(),"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?i.setTimeout(_.ready):(s.addEventListener("DOMContentLoaded",j),i.addEventListener("load",j))),P.promise(e)},_.ready.promise();var Y=function(e,t,n,i,o,a,s){var r=0,l=e.length,d=null==n;if("object"===_.type(n))for(r in o=!0,n)Y(e,t,r,n[r],!0,a,s);else if(void 0!==i&&(o=!0,_.isFunction(i)||(s=!0),d&&(s?(t.call(e,i),t=null):(d=t,t=function(e,t,n){return d.call(_(e),n)})),t))for(;r<l;r++)t(e[r],n,s?i:i.call(e[r],r,t(e[r],n)));return o?e:d?t.call(e):l?t(e[0],n):a},H=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function N(){this.expando=_.expando+N.uid++}N.uid=1,N.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!H(e))return{};var t=e[this.expando];return t||(t={},H(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[t]=n;else for(i in t)o[i]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(i=this.get(e,t))?i:this.get(e,_.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,o,a=e[this.expando];if(void 0!==a){if(void 0===t)this.register(e);else{_.isArray(t)?i=t.concat(t.map(_.camelCase)):(o=_.camelCase(t),i=t in a?[t,o]:(i=o)in a?[i]:i.match(R)||[]),n=i.length;for(;n--;)delete a[i[n]]}(void 0===t||_.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var F=new N,B=new N,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/[A-Z]/g;function W(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:$.test(n)?_.parseJSON(n):n)}catch(e){}B.set(e,t,n)}else n=void 0;return n}_.extend({hasData:function(e){return B.hasData(e)||F.hasData(e)},data:function(e,t,n){return B.access(e,t,n)},removeData:function(e,t){B.remove(e,t)},_data:function(e,t,n){return F.access(e,t,n)},_removeData:function(e,t){F.remove(e,t)}}),_.fn.extend({data:function(e,t){var n,i,o,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(o=B.get(a),1===a.nodeType&&!F.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=_.camelCase(i.slice(5)),W(a,i,o[i]));F.set(a,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){B.set(this,e)})):Y(this,(function(t){var n,i;if(a&&void 0===t)return void 0!==(n=B.get(a,e)||B.get(a,e.replace(z,"-$&").toLowerCase()))?n:(i=_.camelCase(e),void 0!==(n=B.get(a,i))||void 0!==(n=W(a,i,void 0))?n:void 0);i=_.camelCase(e),this.each((function(){var n=B.get(this,i);B.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&B.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){B.remove(this,e)}))}}),_.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=F.get(e,t),n&&(!i||_.isArray(n)?i=F.access(e,t,_.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=_.queue(e,t),i=n.length,o=n.shift(),a=_._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,(function(){_.dequeue(e,t)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return F.get(e,n)||F.access(e,n,{empty:_.Callbacks("once memory").add((function(){F.remove(e,[t+"queue",n])}))})}}),_.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?_.queue(this[0],e):void 0===t?this:this.each((function(){var n=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&_.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){_.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=_.Deferred(),a=this,s=this.length,r=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=F.get(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(r));return r(),o.promise(t)}});var U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+U+")([a-z%]*)$","i"),q=["Top","Right","Bottom","Left"],Z=function(e,t){return e=t||e,"none"===_.css(e,"display")||!_.contains(e.ownerDocument,e)};function G(e,t,n,i){var o,a=1,s=20,r=i?function(){return i.cur()}:function(){return _.css(e,t,"")},l=r(),d=n&&n[3]||(_.cssNumber[t]?"":"px"),c=(_.cssNumber[t]||"px"!==d&&+l)&&V.exec(_.css(e,t));if(c&&c[3]!==d){d=d||c[3],n=n||[],c=+l||1;do{c/=a=a||".5",_.style(e,t,c+d)}while(a!==(a=r()/l)&&1!==a&&--s)}return n&&(c=+c||+l||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=d,i.start=c,i.end=o)),o}var J=/^(?:checkbox|radio)$/i,K=/<([\w:-]+)/,X=/^$|\/(?:java|ecma)script/i,Q={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ee(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&_.nodeName(e,t)?_.merge([e],n):n}function te(e,t){for(var n=0,i=e.length;n<i;n++)F.set(e[n],"globalEval",!t||F.get(t[n],"globalEval"))}Q.optgroup=Q.option,Q.tbody=Q.tfoot=Q.colgroup=Q.caption=Q.thead,Q.th=Q.td;var ne,ie,oe=/<|&#?\w+;/;function ae(e,t,n,i,o){for(var a,s,r,l,d,c,u=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((a=e[p])||0===a)if("object"===_.type(a))_.merge(h,a.nodeType?[a]:a);else if(oe.test(a)){for(s=s||u.appendChild(t.createElement("div")),r=(K.exec(a)||["",""])[1].toLowerCase(),l=Q[r]||Q._default,s.innerHTML=l[1]+_.htmlPrefilter(a)+l[2],c=l[0];c--;)s=s.lastChild;_.merge(h,s.childNodes),(s=u.firstChild).textContent=""}else h.push(t.createTextNode(a));for(u.textContent="",p=0;a=h[p++];)if(i&&_.inArray(a,i)>-1)o&&o.push(a);else if(d=_.contains(a.ownerDocument,a),s=ee(u.appendChild(a),"script"),d&&te(s),n)for(c=0;a=s[c++];)X.test(a.type||"")&&n.push(a);return u}ne=s.createDocumentFragment().appendChild(s.createElement("div")),(ie=s.createElement("input")).setAttribute("type","radio"),ie.setAttribute("checked","checked"),ie.setAttribute("name","t"),ne.appendChild(ie),f.checkClone=ne.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!ne.cloneNode(!0).lastChild.defaultValue;var se=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,le=/^([^.]*)(?:\.(.+)|)/;function de(){return!0}function ce(){return!1}function ue(){try{return s.activeElement}catch(e){}}function he(e,t,n,i,o,a){var s,r;if("object"==typeof t){for(r in"string"!=typeof n&&(i=i||n,n=void 0),t)he(e,r,n,i,t[r],a);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=ce;else if(!o)return e;return 1===a&&(s=o,o=function(e){return _().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=_.guid++)),e.each((function(){_.event.add(this,t,o,i,n)}))}_.event={global:{},add:function(e,t,n,i,o){var a,s,r,l,d,c,u,h,p,f,m,v=F.get(e);if(v)for(n.handler&&(n=(a=n).handler,o=a.selector),n.guid||(n.guid=_.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(t){return void 0!==_&&_.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),d=(t=(t||"").match(R)||[""]).length;d--;)p=m=(r=le.exec(t[d])||[])[1],f=(r[2]||"").split(".").sort(),p&&(u=_.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=_.event.special[p]||{},c=_.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&_.expr.match.needsContext.test(o),namespace:f.join(".")},a),(h=l[p])||((h=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(p,s)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),_.event.global[p]=!0)},remove:function(e,t,n,i,o){var a,s,r,l,d,c,u,h,p,f,m,v=F.hasData(e)&&F.get(e);if(v&&(l=v.events)){for(d=(t=(t||"").match(R)||[""]).length;d--;)if(p=m=(r=le.exec(t[d])||[])[1],f=(r[2]||"").split(".").sort(),p){for(u=_.event.special[p]||{},h=l[p=(i?u.delegateType:u.bindType)||p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=h.length;a--;)c=h[a],!o&&m!==c.origType||n&&n.guid!==c.guid||r&&!r.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));s&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,f,v.handle)||_.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)_.event.remove(e,p+t[d],n,i,!0);_.isEmptyObject(l)&&F.remove(e,"handle events")}},dispatch:function(e){e=_.event.fix(e);var t,n,i,o,a,s,l=r.call(arguments),d=(F.get(this,"events")||{})[e.type]||[],c=_.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=_.event.handlers.call(this,e,d),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(a.namespace)||(e.handleObj=a,e.data=a.data,void 0!==(i=((_.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,a,s=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;n<r;n++)void 0===i[o=(a=t[n]).selector+" "]&&(i[o]=a.needsContext?_(o,this).index(l)>-1:_.find(o,this,null,[l]).length),i[o]&&i.push(a);i.length&&s.push({elem:l,handlers:i})}return r<t.length&&s.push({elem:this,handlers:t.slice(r)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,a=t.button;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||s).documentElement,o=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[_.expando])return e;var t,n,i,o=e.type,a=e,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=re.test(o)?this.mouseHooks:se.test(o)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,e=new _.Event(a),t=i.length;t--;)e[n=i[t]]=a[n];return e.target||(e.target=s),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ue()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ue()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&_.nodeName(this,"input"))return this.click(),!1},_default:function(e){return _.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?de:ce):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||_.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:ce,isPropagationStopped:ce,isImmediatePropagationStopped:ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=de,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=de,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=de,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,o=e.handleObj;return i&&(i===this||_.contains(this,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),_.fn.extend({on:function(e,t,n,i){return he(this,e,t,n,i)},one:function(e,t,n,i){return he(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,_(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ce),this.each((function(){_.event.remove(this,e,n,t)}))}});var pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,fe=/<script|<style|<link/i,me=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^true\/(.*)/,ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ge(e,t){return _.nodeName(e,"table")&&_.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ye(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function be(e){var t=_e.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function we(e,t){var n,i,o,a,s,r,l,d;if(1===t.nodeType){if(F.hasData(e)&&(a=F.access(e),s=F.set(t,a),d=a.events))for(o in delete s.handle,s.events={},d)for(n=0,i=d[o].length;n<i;n++)_.event.add(t,o,d[o][n]);B.hasData(e)&&(r=B.access(e),l=_.extend({},r),B.set(t,l))}}function ke(e,t,n,i){t=l.apply([],t);var o,a,s,r,d,c,u=0,h=e.length,p=h-1,m=t[0],v=_.isFunction(m);if(v||h>1&&"string"==typeof m&&!f.checkClone&&me.test(m))return e.each((function(o){var a=e.eq(o);v&&(t[0]=m.call(this,o,a.html())),ke(a,t,n,i)}));if(h&&(a=(o=ae(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=a),a||i)){for(r=(s=_.map(ee(o,"script"),ye)).length;u<h;u++)d=o,u!==p&&(d=_.clone(d,!0,!0),r&&_.merge(s,ee(d,"script"))),n.call(e[u],d,u);if(r)for(c=s[s.length-1].ownerDocument,_.map(s,be),u=0;u<r;u++)d=s[u],X.test(d.type||"")&&!F.access(d,"globalEval")&&_.contains(c,d)&&(d.src?_._evalUrl&&_._evalUrl(d.src):_.globalEval(d.textContent.replace(ve,"")))}return e}function Ce(e,t,n){for(var i,o=t?_.filter(t,e):e,a=0;null!=(i=o[a]);a++)n||1!==i.nodeType||_.cleanData(ee(i)),i.parentNode&&(n&&_.contains(i.ownerDocument,i)&&te(ee(i,"script")),i.parentNode.removeChild(i));return e}_.extend({htmlPrefilter:function(e){return e.replace(pe,"<$1></$2>")},clone:function(e,t,n){var i,o,a,s,r,l,d,c=e.cloneNode(!0),u=_.contains(e.ownerDocument,e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||_.isXMLDoc(e)))for(s=ee(c),i=0,o=(a=ee(e)).length;i<o;i++)r=a[i],l=s[i],d=void 0,"input"===(d=l.nodeName.toLowerCase())&&J.test(r.type)?l.checked=r.checked:"input"!==d&&"textarea"!==d||(l.defaultValue=r.defaultValue);if(t)if(n)for(a=a||ee(e),s=s||ee(c),i=0,o=a.length;i<o;i++)we(a[i],s[i]);else we(e,c);return(s=ee(c,"script")).length>0&&te(s,!u&&ee(e,"script")),c},cleanData:function(e){for(var t,n,i,o=_.event.special,a=0;void 0!==(n=e[a]);a++)if(H(n)){if(t=n[F.expando]){if(t.events)for(i in t.events)o[i]?_.event.remove(n,i):_.removeEvent(n,i,t.handle);n[F.expando]=void 0}n[B.expando]&&(n[B.expando]=void 0)}}}),_.fn.extend({domManip:ke,detach:function(e){return Ce(this,e,!0)},remove:function(e){return Ce(this,e)},text:function(e){return Y(this,(function(e){return void 0===e?_.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return ke(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ge(this,e).appendChild(e)}))},prepend:function(){return ke(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ge(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(ee(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return _.clone(this,e,t)}))},html:function(e){return Y(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!fe.test(e)&&!Q[(K.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(_.cleanData(ee(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return ke(this,arguments,(function(t){var n=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(ee(this)),n&&n.replaceChild(t,this))}),e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){_.fn[e]=function(e){for(var n,i=[],o=_(e),a=o.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),_(o[s])[t](n),d.apply(i,n.get());return this.pushStack(i)}}));var xe,Se={HTML:"block",BODY:"block"};function Me(e,t){var n=_(t.createElement(e)).appendTo(t.body),i=_.css(n[0],"display");return n.detach(),i}function Te(e){var t=s,n=Se[e];return n||("none"!==(n=Me(e,t))&&n||((t=(xe=(xe||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=Me(e,t),xe.detach()),Se[e]=n),n}var Le=/^margin/,De=new RegExp("^("+U+")(?!px)[a-z%]+$","i"),Ee=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Oe=function(e,t,n,i){var o,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in o=n.apply(e,i||[]),t)e.style[a]=s[a];return o},Ae=s.documentElement;function Ie(e,t,n){var i,o,a,s,r=e.style;return""!==(s=(n=n||Ee(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==s||_.contains(e.ownerDocument,e)||(s=_.style(e,t)),n&&!f.pixelMarginRight()&&De.test(s)&&Le.test(t)&&(i=r.width,o=r.minWidth,a=r.maxWidth,r.minWidth=r.maxWidth=r.width=s,s=n.width,r.width=i,r.minWidth=o,r.maxWidth=a),void 0!==s?s+"":s}function Pe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,n,o,a=s.createElement("div"),r=s.createElement("div");function l(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r.innerHTML="",Ae.appendChild(a);var s=i.getComputedStyle(r);e="1%"!==s.top,o="2px"===s.marginLeft,t="4px"===s.width,r.style.marginRight="50%",n="4px"===s.marginRight,Ae.removeChild(a)}r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===r.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(r),_.extend(f,{pixelPosition:function(){return l(),e},boxSizingReliable:function(){return null==t&&l(),t},pixelMarginRight:function(){return null==t&&l(),n},reliableMarginLeft:function(){return null==t&&l(),o},reliableMarginRight:function(){var e,t=r.appendChild(s.createElement("div"));return t.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",r.style.width="1px",Ae.appendChild(a),e=!parseFloat(i.getComputedStyle(t).marginRight),Ae.removeChild(a),r.removeChild(t),e}}))}();var Re=/^(none|table(?!-c[ea]).+)/,je={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},He=["Webkit","O","Moz","ms"],Ne=s.createElement("div").style;function Fe(e){if(e in Ne)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=He.length;n--;)if((e=He[n]+t)in Ne)return e}function Be(e,t,n){var i=V.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function $e(e,t,n,i,o){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,s=0;a<4;a+=2)"margin"===n&&(s+=_.css(e,n+q[a],!0,o)),i?("content"===n&&(s-=_.css(e,"padding"+q[a],!0,o)),"margin"!==n&&(s-=_.css(e,"border"+q[a]+"Width",!0,o))):(s+=_.css(e,"padding"+q[a],!0,o),"padding"!==n&&(s+=_.css(e,"border"+q[a]+"Width",!0,o)));return s}function ze(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=Ee(e),s="border-box"===_.css(e,"boxSizing",!1,a);if(o<=0||null==o){if(((o=Ie(e,t,a))<0||null==o)&&(o=e.style[t]),De.test(o))return o;i=s&&(f.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+$e(e,t,n||(s?"border":"content"),i,a)+"px"}function We(e,t){for(var n,i,o,a=[],s=0,r=e.length;s<r;s++)(i=e[s]).style&&(a[s]=F.get(i,"olddisplay"),n=i.style.display,t?(a[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Z(i)&&(a[s]=F.access(i,"olddisplay",Te(i.nodeName)))):(o=Z(i),"none"===n&&o||F.set(i,"olddisplay",o?n:_.css(i,"display"))));for(s=0;s<r;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[s]||"":"none"));return e}function Ue(e,t,n,i,o){return new Ue.prototype.init(e,t,n,i,o)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ie(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,r=_.camelCase(t),l=e.style;if(t=_.cssProps[r]||(_.cssProps[r]=Fe(r)||r),s=_.cssHooks[t]||_.cssHooks[r],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t];"string"==(a=typeof n)&&(o=V.exec(n))&&o[1]&&(n=G(e,t,o),a="number"),null!=n&&n==n&&("number"===a&&(n+=o&&o[3]||(_.cssNumber[r]?"":"px")),f.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n))}},css:function(e,t,n,i){var o,a,s,r=_.camelCase(t);return t=_.cssProps[r]||(_.cssProps[r]=Fe(r)||r),(s=_.cssHooks[t]||_.cssHooks[r])&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=Ie(e,t,i)),"normal"===o&&t in Ye&&(o=Ye[t]),""===n||n?(a=parseFloat(o),!0===n||isFinite(a)?a||0:o):o}}),_.each(["height","width"],(function(e,t){_.cssHooks[t]={get:function(e,n,i){if(n)return Re.test(_.css(e,"display"))&&0===e.offsetWidth?Oe(e,je,(function(){return ze(e,t,i)})):ze(e,t,i)},set:function(e,n,i){var o,a=i&&Ee(e),s=i&&$e(e,t,i,"border-box"===_.css(e,"boxSizing",!1,a),a);return s&&(o=V.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=_.css(e,t)),Be(0,n,s)}}})),_.cssHooks.marginLeft=Pe(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ie(e,"marginLeft"))||e.getBoundingClientRect().left-Oe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),_.cssHooks.marginRight=Pe(f.reliableMarginRight,(function(e,t){if(t)return Oe(e,{display:"inline-block"},Ie,[e,"marginRight"])})),_.each({margin:"",padding:"",border:"Width"},(function(e,t){_.cssHooks[e+t]={expand:function(n){for(var i=0,o={},a="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+q[i]+t]=a[i]||a[i-2]||a[0];return o}},Le.test(e)||(_.cssHooks[e+t].set=Be)})),_.fn.extend({css:function(e,t){return Y(this,(function(e,t,n){var i,o,a={},s=0;if(_.isArray(t)){for(i=Ee(e),o=t.length;s<o;s++)a[t[s]]=_.css(e,t[s],!1,i);return a}return void 0!==n?_.style(e,t,n):_.css(e,t)}),e,t,arguments.length>1)},show:function(){return We(this,!0)},hide:function(){return We(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){Z(this)?_(this).show():_(this).hide()}))}}),_.Tween=Ue,Ue.prototype={constructor:Ue,init:function(e,t,n,i,o,a){this.elem=e,this.prop=n,this.easing=o||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(_.cssNumber[n]?"":"px")},cur:function(){var e=Ue.propHooks[this.prop];return e&&e.get?e.get(this):Ue.propHooks._default.get(this)},run:function(e){var t,n=Ue.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ue.propHooks._default.set(this),this}},Ue.prototype.init.prototype=Ue.prototype,Ue.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[_.cssProps[e.prop]]&&!_.cssHooks[e.prop]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},Ue.propHooks.scrollTop=Ue.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},_.fx=Ue.prototype.init,_.fx.step={};var Ve,qe,Ze=/^(?:toggle|show|hide)$/,Ge=/queueHooks$/;function Je(){return i.setTimeout((function(){Ve=void 0})),Ve=_.now()}function Ke(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=q[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function Xe(e,t,n){for(var i,o=(Qe.tweeners[t]||[]).concat(Qe.tweeners["*"]),a=0,s=o.length;a<s;a++)if(i=o[a].call(n,t,e))return i}function Qe(e,t,n){var i,o,a=0,s=Qe.prefilters.length,r=_.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=Ve||Je(),n=Math.max(0,d.startTime+d.duration-t),i=1-(n/d.duration||0),a=0,s=d.tweens.length;a<s;a++)d.tweens[a].run(i);return r.notifyWith(e,[d,i,n]),i<1&&s?n:(r.resolveWith(e,[d]),!1)},d=r.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:t,originalOptions:n,startTime:Ve||Je(),duration:n.duration,tweens:[],createTween:function(t,n){var i=_.Tween(e,d.opts,t,n,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(i),i},stop:function(t){var n=0,i=t?d.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)d.tweens[n].run(1);return t?(r.notifyWith(e,[d,1,0]),r.resolveWith(e,[d,t])):r.rejectWith(e,[d,t]),this}}),c=d.props;for(function(e,t){var n,i,o,a,s;for(n in e)if(o=t[i=_.camelCase(n)],a=e[n],_.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=_.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=o);else t[i]=o}(c,d.opts.specialEasing);a<s;a++)if(i=Qe.prefilters[a].call(d,e,c,d.opts))return _.isFunction(i.stop)&&(_._queueHooks(d.elem,d.opts.queue).stop=_.proxy(i.stop,i)),i;return _.map(c,Xe,d),_.isFunction(d.opts.start)&&d.opts.start.call(e,d),_.fx.timer(_.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}_.Animation=_.extend(Qe,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return G(n.elem,e,V.exec(t),n),n}]},tweener:function(e,t){_.isFunction(e)?(t=e,e=["*"]):e=e.match(R);for(var n,i=0,o=e.length;i<o;i++)n=e[i],Qe.tweeners[n]=Qe.tweeners[n]||[],Qe.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,a,s,r,l,d,c=this,u={},h=e.style,p=e.nodeType&&Z(e),f=F.get(e,"fxshow");for(i in n.queue||(null==(r=_._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,c.always((function(){c.always((function(){r.unqueued--,_.queue(e,"fx").length||r.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(d=_.css(e,"display"))?F.get(e,"olddisplay")||Te(e.nodeName):d)&&"none"===_.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",c.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),t)if(o=t[i],Ze.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!f||void 0===f[i])continue;p=!0}u[i]=f&&f[i]||_.style(e,i)}else d=void 0;if(_.isEmptyObject(u))"inline"===("none"===d?Te(e.nodeName):d)&&(h.display=d);else for(i in f?"hidden"in f&&(p=f.hidden):f=F.access(e,"fxshow",{}),a&&(f.hidden=!p),p?_(e).show():c.done((function(){_(e).hide()})),c.done((function(){var t;for(t in F.remove(e,"fxshow"),u)_.style(e,t,u[t])})),u)s=Xe(p?f[i]:0,i,c),i in f||(f[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?Qe.prefilters.unshift(e):Qe.prefilters.push(e)}}),_.speed=function(e,t,n){var i=e&&"object"==typeof e?_.extend({},e):{complete:n||!n&&t||_.isFunction(e)&&e,duration:e,easing:n&&t||t&&!_.isFunction(t)&&t};return i.duration=_.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in _.fx.speeds?_.fx.speeds[i.duration]:_.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){_.isFunction(i.old)&&i.old.call(this),i.queue&&_.dequeue(this,i.queue)},i},_.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Z).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=_.isEmptyObject(e),a=_.speed(t,n,i),s=function(){var t=Qe(this,_.extend({},e),a);(o||F.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",a=_.timers,s=F.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&Ge.test(o)&&i(s[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||_.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=F.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],a=_.timers,s=i?i.length:0;for(n.finish=!0,_.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),_.each(["toggle","show","hide"],(function(e,t){var n=_.fn[t];_.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Ke(t,!0),e,i,o)}})),_.each({slideDown:Ke("show"),slideUp:Ke("hide"),slideToggle:Ke("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){_.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),_.timers=[],_.fx.tick=function(){var e,t=0,n=_.timers;for(Ve=_.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||_.fx.stop(),Ve=void 0},_.fx.timer=function(e){_.timers.push(e),e()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){qe||(qe=i.setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){i.clearInterval(qe),qe=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(e,t){return e=_.fx&&_.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var o=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(o)}}))},function(){var e=s.createElement("input"),t=s.createElement("select"),n=t.appendChild(s.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=n.selected,t.disabled=!0,f.optDisabled=!n.disabled,(e=s.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var et,tt=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return Y(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){_.removeAttr(this,e)}))}}),_.extend({attr:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?_.prop(e,t,n):(1===a&&_.isXMLDoc(e)||(t=t.toLowerCase(),o=_.attrHooks[t]||(_.expr.match.bool.test(t)?et:void 0)),void 0!==n?null===n?void _.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=_.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&_.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,o=0,a=t&&t.match(R);if(a&&1===e.nodeType)for(;n=a[o++];)i=_.propFix[n]||n,_.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),et={set:function(e,t,n){return!1===t?_.removeAttr(e,n):e.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=tt[t]||_.find.attr;tt[t]=function(e,t,i){var o,a;return i||(a=tt[t],tt[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,tt[t]=a),o}}));var nt=/^(?:input|select|textarea|button)$/i,it=/^(?:a|area)$/i;_.fn.extend({prop:function(e,t){return Y(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[_.propFix[e]||e]}))}}),_.extend({prop:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&_.isXMLDoc(e)||(t=_.propFix[t]||t,o=_.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):nt.test(e.nodeName)||it.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){_.propFix[this.toLowerCase()]=this}));var ot=/[\t\r\n\f]/g;function at(e){return e.getAttribute&&e.getAttribute("class")||""}_.fn.extend({addClass:function(e){var t,n,i,o,a,s,r,l=0;if(_.isFunction(e))return this.each((function(t){_(this).addClass(e.call(this,t,at(this)))}));if("string"==typeof e&&e)for(t=e.match(R)||[];n=this[l++];)if(o=at(n),i=1===n.nodeType&&(" "+o+" ").replace(ot," ")){for(s=0;a=t[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");o!==(r=_.trim(i))&&n.setAttribute("class",r)}return this},removeClass:function(e){var t,n,i,o,a,s,r,l=0;if(_.isFunction(e))return this.each((function(t){_(this).removeClass(e.call(this,t,at(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(R)||[];n=this[l++];)if(o=at(n),i=1===n.nodeType&&(" "+o+" ").replace(ot," ")){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");o!==(r=_.trim(i))&&n.setAttribute("class",r)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):_.isFunction(e)?this.each((function(n){_(this).toggleClass(e.call(this,n,at(this),t),t)})):this.each((function(){var t,i,o,a;if("string"===n)for(i=0,o=_(this),a=e.match(R)||[];t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=at(this))&&F.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":F.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+at(n)+" ").replace(ot," ").indexOf(t)>-1)return!0;return!1}});var st=/\r/g,rt=/[\x20\t\r\n\f]+/g;_.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=_.isFunction(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,_(this).val()):e)?o="":"number"==typeof o?o+="":_.isArray(o)&&(o=_.map(o,(function(e){return null==e?"":e+""}))),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=_.valHooks[o.type]||_.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(st,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:_.trim(_.text(e)).replace(rt," ")}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,a="select-one"===e.type||o<0,s=a?null:[],r=a?o+1:i.length,l=o<0?r:a?o:0;l<r;l++)if(((n=i[l]).selected||l===o)&&(f.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!_.nodeName(n.parentNode,"optgroup"))){if(t=_(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,a=_.makeArray(t),s=o.length;s--;)((i=o[s]).selected=_.inArray(_.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),_.each(["radio","checkbox"],(function(){_.valHooks[this]={set:function(e,t){if(_.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},f.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var lt=/^(?:focusinfocus|focusoutblur)$/;_.extend(_.event,{trigger:function(e,t,n,o){var a,r,l,d,c,u,h,f=[n||s],m=p.call(e,"type")?e.type:e,v=p.call(e,"namespace")?e.namespace.split("."):[];if(r=l=n=n||s,3!==n.nodeType&&8!==n.nodeType&&!lt.test(m+_.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[_.expando]?e:new _.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:_.makeArray(t,[e]),h=_.event.special[m]||{},o||!h.trigger||!1!==h.trigger.apply(n,t))){if(!o&&!h.noBubble&&!_.isWindow(n)){for(d=h.delegateType||m,lt.test(d+m)||(r=r.parentNode);r;r=r.parentNode)f.push(r),l=r;l===(n.ownerDocument||s)&&f.push(l.defaultView||l.parentWindow||i)}for(a=0;(r=f[a++])&&!e.isPropagationStopped();)e.type=a>1?d:h.bindType||m,(u=(F.get(r,"events")||{})[e.type]&&F.get(r,"handle"))&&u.apply(r,t),(u=c&&r[c])&&u.apply&&H(r)&&(e.result=u.apply(r,t),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),t)||!H(n)||c&&_.isFunction(n[m])&&!_.isWindow(n)&&((l=n[c])&&(n[c]=null),_.event.triggered=m,n[m](),_.event.triggered=void 0,l&&(n[c]=l)),e.result}},simulate:function(e,t,n){var i=_.extend(new _.Event,n,{type:e,isSimulated:!0});_.event.trigger(i,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each((function(){_.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return _.event.trigger(e,t,n,!0)}}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){_.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),_.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),f.focusin="onfocusin"in i,f.focusin||_.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=F.access(i,t);o||i.addEventListener(e,n,!0),F.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=F.access(i,t)-1;o?F.access(i,t,o):(i.removeEventListener(e,n,!0),F.remove(i,t))}}}));var dt=i.location,ct=_.now(),ut=/\?/;_.parseJSON=function(e){return JSON.parse(e+"")},_.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+e),t};var ht=/#.*$/,pt=/([?&])_=[^&]*/,ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,mt=/^(?:GET|HEAD)$/,_t=/^\/\//,vt={},gt={},yt="*/".concat("*"),bt=s.createElement("a");function wt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,a=t.toLowerCase().match(R)||[];if(_.isFunction(n))for(;i=a[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function kt(e,t,n,i){var o={},a=e===gt;function s(r){var l;return o[r]=!0,_.each(e[r]||[],(function(e,r){var d=r(t,n,i);return"string"!=typeof d||a||o[d]?a?!(l=d):void 0:(t.dataTypes.unshift(d),s(d),!1)})),l}return s(t.dataTypes[0])||!o["*"]&&s("*")}function Ct(e,t){var n,i,o=_.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&_.extend(!0,e,i),e}bt.href=dt.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(dt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ct(Ct(e,_.ajaxSettings),t):Ct(_.ajaxSettings,e)},ajaxPrefilter:wt(vt),ajaxTransport:wt(gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,a,r,l,d,c,u,h=_.ajaxSetup({},t),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?_(p):_.event,m=_.Deferred(),v=_.Callbacks("once memory"),g=h.statusCode||{},y={},b={},w=0,k="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!r)for(r={};t=ft.exec(a);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)g[t]=[g[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||k;return n&&n.abort(t),x(0,t),this}};if(m.promise(C).complete=v.add,C.success=C.done,C.error=C.fail,h.url=((e||h.url||dt.href)+"").replace(ht,"").replace(_t,dt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=_.trim(h.dataType||"*").toLowerCase().match(R)||[""],null==h.crossDomain){d=s.createElement("a");try{d.href=h.url,d.href=d.href,h.crossDomain=bt.protocol+"//"+bt.host!=d.protocol+"//"+d.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=_.param(h.data,h.traditional)),kt(vt,h,t,C),2===w)return C;for(u in(c=_.event&&h.global)&&0==_.active++&&_.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!mt.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(ut.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=pt.test(o)?o.replace(pt,"$1_="+ct++):o+(ut.test(o)?"&":"?")+"_="+ct++)),h.ifModified&&(_.lastModified[o]&&C.setRequestHeader("If-Modified-Since",_.lastModified[o]),_.etag[o]&&C.setRequestHeader("If-None-Match",_.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+yt+"; q=0.01":""):h.accepts["*"]),h.headers)C.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(!1===h.beforeSend.call(p,C,h)||2===w))return C.abort();for(u in k="abort",{success:1,error:1,complete:1})C[u](h[u]);if(n=kt(gt,h,t,C)){if(C.readyState=1,c&&f.trigger("ajaxSend",[C,h]),2===w)return C;h.async&&h.timeout>0&&(l=i.setTimeout((function(){C.abort("timeout")}),h.timeout));try{w=1,n.send(y,x)}catch(e){if(!(w<2))throw e;x(-1,e)}}else x(-1,"No Transport");function x(e,t,s,r){var d,u,y,b,k,x=t;2!==w&&(w=2,l&&i.clearTimeout(l),n=void 0,a=r||"",C.readyState=e>0?4:0,d=e>=200&&e<300||304===e,s&&(b=function(e,t,n){for(var i,o,a,s,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in r)if(r[o]&&r[o].test(i)){l.unshift(o);break}if(l[0]in n)a=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}s||(s=o)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),n[a]}(h,C,s)),b=function(e,t,n,i){var o,a,s,r,l,d={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)d[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=d[l+" "+a]||d["* "+a]))for(o in d)if((r=o.split(" "))[1]===a&&(s=d[l+" "+r[0]]||d["* "+r[0]])){!0===s?s=d[o]:!0!==d[o]&&(a=r[0],c.unshift(r[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(h,b,C,d),d?(h.ifModified&&((k=C.getResponseHeader("Last-Modified"))&&(_.lastModified[o]=k),(k=C.getResponseHeader("etag"))&&(_.etag[o]=k)),204===e||"HEAD"===h.type?x="nocontent":304===e?x="notmodified":(x=b.state,u=b.data,d=!(y=b.error))):(y=x,!e&&x||(x="error",e<0&&(e=0))),C.status=e,C.statusText=(t||x)+"",d?m.resolveWith(p,[u,x,C]):m.rejectWith(p,[C,x,y]),C.statusCode(g),g=void 0,c&&f.trigger(d?"ajaxSuccess":"ajaxError",[C,h,d?u:y]),v.fireWith(p,[C,x]),c&&(f.trigger("ajaxComplete",[C,h]),--_.active||_.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return _.get(e,t,n,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],(function(e,t){_[t]=function(e,n,i,o){return _.isFunction(n)&&(o=o||i,i=n,n=void 0),_.ajax(_.extend({url:e,type:t,dataType:o,data:n,success:i},_.isPlainObject(e)&&e))}})),_._evalUrl=function(e){return _.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},_.fn.extend({wrapAll:function(e){var t;return _.isFunction(e)?this.each((function(t){_(this).wrapAll(e.call(this,t))})):(this[0]&&(t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return _.isFunction(e)?this.each((function(t){_(this).wrapInner(e.call(this,t))})):this.each((function(){var t=_(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=_.isFunction(e);return this.each((function(n){_(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)})).end()}}),_.expr.filters.hidden=function(e){return!_.expr.filters.visible(e)},_.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var xt=/%20/g,St=/\[\]$/,Mt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,i){var o;if(_.isArray(t))_.each(t,(function(t,o){n||St.test(e)?i(e,o):Dt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)}));else if(n||"object"!==_.type(t))i(e,t);else for(o in t)Dt(e+"["+o+"]",t[o],n,i)}_.param=function(e,t){var n,i=[],o=function(e,t){t=_.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,(function(){o(this.name,this.value)}));else for(n in e)Dt(n,e[n],t,o);return i.join("&").replace(xt,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&Lt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!J.test(e))})).map((function(e,t){var n=_(this).val();return null==n?null:_.isArray(n)?_.map(n,(function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}})):{name:t.name,value:n.replace(Mt,"\r\n")}})).get()}}),_.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Et={0:200,1223:204},Ot=_.ajaxSettings.xhr();f.cors=!!Ot&&"withCredentials"in Ot,f.ajax=Ot=!!Ot,_.ajaxTransport((function(e){var t,n;if(f.cors||Ot&&!e.crossDomain)return{send:function(o,a){var s,r=e.xhr();if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)r[s]=e.xhrFields[s];for(s in e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)r.setRequestHeader(s,o[s]);t=function(e){return function(){t&&(t=n=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?a(0,"error"):a(r.status,r.statusText):a(Et[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=t(),n=r.onerror=t("error"),void 0!==r.onabort?r.onabort=n:r.onreadystatechange=function(){4===r.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{r.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),_.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain)return{send:function(i,o){t=_("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),s.head.appendChild(t[0])},abort:function(){n&&n()}}}));var At=[],It=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=At.pop()||_.expando+"_"+ct++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",(function(e,t,n){var o,a,s,r=!1!==e.jsonp&&(It.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(e.data)&&"data");if(r||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=_.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(It,"$1"+o):!1!==e.jsonp&&(e.url+=(ut.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||_.error(o+" was not called"),s[0]},e.dataTypes[0]="json",a=i[o],i[o]=function(){s=arguments},n.always((function(){void 0===a?_(i).removeProp(o):i[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,At.push(o)),s&&_.isFunction(a)&&a(s[0]),s=a=void 0})),"script"})),_.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||s;var i=M.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=ae([e],t,o),o&&o.length&&_(o).remove(),_.merge([],i.childNodes))};var Pt=_.fn.load;function Rt(e){return _.isWindow(e)?e:9===e.nodeType&&e.defaultView}_.fn.load=function(e,t,n){if("string"!=typeof e&&Pt)return Pt.apply(this,arguments);var i,o,a,s=this,r=e.indexOf(" ");return r>-1&&(i=_.trim(e.slice(r)),e=e.slice(0,r)),_.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&_.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){a=arguments,s.html(i?_("<div>").append(_.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){_.fn[t]=function(e){return this.on(t,e)}})),_.expr.filters.animated=function(e){return _.grep(_.timers,(function(t){return e===t.elem})).length},_.offset={setOffset:function(e,t,n){var i,o,a,s,r,l,d=_.css(e,"position"),c=_(e),u={};"static"===d&&(e.style.position="relative"),r=c.offset(),a=_.css(e,"top"),l=_.css(e,"left"),("absolute"===d||"fixed"===d)&&(a+l).indexOf("auto")>-1?(s=(i=c.position()).top,o=i.left):(s=parseFloat(a)||0,o=parseFloat(l)||0),_.isFunction(t)&&(t=t.call(e,n,_.extend({},r))),null!=t.top&&(u.top=t.top-r.top+s),null!=t.left&&(u.left=t.left-r.left+o),"using"in t?t.using.call(e,u):c.css(u)}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){_.offset.setOffset(this,e,t)}));var t,n,i=this[0],o={top:0,left:0},a=i&&i.ownerDocument;return a?(t=a.documentElement,_.contains(t,i)?(o=i.getBoundingClientRect(),n=Rt(a),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===_.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),_.nodeName(e[0],"html")||(i=e.offset()),i.top+=_.css(e[0],"borderTopWidth",!0),i.left+=_.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-_.css(n,"marginTop",!0),left:t.left-i.left-_.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||Ae}))}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;_.fn[e]=function(i){return Y(this,(function(e,i,o){var a=Rt(e);if(void 0===o)return a?a[t]:e[i];a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[i]=o}),e,i,arguments.length)}})),_.each(["top","left"],(function(e,t){_.cssHooks[t]=Pe(f.pixelPosition,(function(e,n){if(n)return n=Ie(e,t),De.test(n)?_(e).position()[t]+"px":n}))})),_.each({Height:"height",Width:"width"},(function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){_.fn[i]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return Y(this,(function(t,n,i){var o;return _.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?_.css(t,n,s):_.style(t,n,i,s)}),t,a?i:void 0,a,null)}}))})),_.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),_.fn.andSelf=_.fn.addBack,void 0===(n=function(){return _}.apply(t,[]))||(e.exports=n);var jt=i.jQuery,Yt=i.$;return _.noConflict=function(e){return i.$===_&&(i.$=Yt),e&&i.jQuery===_&&(i.jQuery=jt),_},o||(i.jQuery=i.$=_),_},"object"==typeof e.exports?e.exports=i.document?o(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return o(e)}:o(i)},47160:(e,t,n)=>{var i=n(55806),o=n(55806);i&&function(e){if(!e.support.opacity&&!e.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}e.fn.rating=function(t){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var n=arguments;return this.each((function(){e.fn.rating.apply(e(this),n)}))}return e.fn.rating[arguments[0]].apply(this,e.makeArray(arguments).slice(1)||[]),this}t=e.extend({},e.fn.rating.options,t||{});return e.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each((function(){var n,i=e(this),o=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),a=e(this.form||document.body),s=a.data("rating");s&&s.call==e.fn.rating.calls||(s={count:0,call:e.fn.rating.calls});var r=s[o]||a.data("rating"+o);r&&(n=r.data("rating")),r&&n?n.count++:((n=e.extend({},t||{},(e.metadata?i.metadata():e.meta?i.data():null)||{},{count:0,stars:[],inputs:[]})).serial=s.count++,r=e('<span class="star-rating-control"/>'),i.before(r),r.addClass("rating-to-be-drawn"),(i.attr("disabled")||i.hasClass("disabled"))&&(n.readOnly=!0),i.hasClass("required")&&(n.required=!0),r.append(n.cancel=e('<div class="rating-cancel"><a title="'+n.cancel+'">'+n.cancelValue+"</a></div>").on("mouseover",(function(){e(this).rating("drain"),e(this).addClass("star-rating-hover")})).on("mouseout",(function(){e(this).rating("draw"),e(this).removeClass("star-rating-hover")})).on("click",(function(){e(this).rating("select")})).data("rating",n)));var l=e('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+n.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(r.append(l),this.id&&l.attr("id",this.id),this.className&&l.addClass(this.className),n.half&&(n.split=2),"number"==typeof n.split&&n.split>0){var d=(e.fn.width?l.width():0)||n.starWidth,c=n.count%n.split,u=Math.floor(d/n.split);l.width(u).find("a").css({"margin-left":"-"+c*u+"px"})}n.readOnly?l.addClass("star-rating-readonly"):l.addClass("star-rating-live").on("mouseover",(function(){e(this).rating("fill"),e(this).rating("focus")})).on("mouseout",(function(){e(this).rating("draw"),e(this).rating("blur")})).on("click",(function(){e(this).rating("select")})),this.checked&&(n.current=l),"A"==this.nodeName&&e(this).hasClass("selected")&&(n.current=l),i.hide(),i.on("change.rating",(function(t){if(t.selfTriggered)return!1;e(this).rating("select")})),l.data("rating.input",i.data("rating.star",l)),n.stars[n.stars.length]=l[0],n.inputs[n.inputs.length]=i[0],n.rater=s[o]=r,n.context=a,i.data("rating",n),r.data("rating",n),l.data("rating",n),a.data("rating",s),a.data("rating"+o,r)})),e(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},e.extend(e.fn.rating,{calls:0,focus:function(){var t=this.data("rating");if(!t)return this;if(!t.focus)return this;var n=e(this).data("rating.input")||e("INPUT"==this.tagName?this:null);t.focus&&t.focus.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},blur:function(){var t=this.data("rating");if(!t)return this;if(!t.blur)return this;var n=e(this).data("rating.input")||e("INPUT"==this.tagName?this:null);t.blur&&t.blur.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},fill:function(){var e=this.data("rating");if(!e)return this;e.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+e.serial).addClass("star-rating-hover"))},drain:function(){var e=this.data("rating");if(!e)return this;e.readOnly||e.rater.children().filter(".rater-"+e.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var t=this.data("rating");if(!t)return this;this.rating("drain");var n=e(t.current),i=n.length?n.prevAll().addBack().filter(".rater-"+t.serial):null;i&&i.addClass("star-rating-on"),t.cancel[t.readOnly||t.required?"hide":"show"](),this.siblings()[t.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(t,n){var i=this.data("rating");if(!i)return this;if(!i.readOnly){if(i.current=null,void 0!==t||this.length>1){if("number"==typeof t)return e(i.stars[t]).rating("select",void 0,n);if("string"==typeof t)return e.each(i.stars,(function(){e(this).data("rating.input").val()==t&&e(this).rating("select",void 0,n)})),this}else i.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+i.serial)?this:null;this.data("rating",i),this.rating("draw");var o=e(i.current?i.current.data("rating.input"):null),a=e(i.inputs).filter(":checked");return e(i.inputs).not(o).prop("checked",!1),o.prop("checked",!0),e(o.length?o:a).trigger({type:"change",selfTriggered:!0}),(n||null==n)&&i.callback&&i.callback.apply(o[0],[o.val(),e("a",i.current)[0]]),this}},readOnly:function(t,n){var i=this.data("rating");if(!i)return this;i.readOnly=!(!t&&null!=t),n?e(i.inputs).attr("disabled","disabled"):e(i.inputs).removeAttr("disabled"),this.data("rating",i),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),e.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},e((function(){e("input[type=radio].star").rating()}))}(o)},10383:(e,t,n)=>{var i,o,a;!function(s){"use strict";o=[n(55806)],i=function(e,t){if(e.jstree)return;var n,i,o=0,a=!1,s=!1,r=!1,l=[],d=e("script:last").attr("src"),c=document,u=c.createElement("LI");u.setAttribute("role","treeitem"),(n=c.createElement("I")).className="jstree-icon jstree-ocl",u.appendChild(n),(n=c.createElement("A")).className="jstree-anchor",n.setAttribute("href","#"),(i=c.createElement("I")).className="jstree-icon jstree-themeicon",n.appendChild(i),u.appendChild(n),n=i=null,e.jstree={version:"3.0.3",defaults:{plugins:[]},plugins:{},path:d&&-1!==d.indexOf("/")?d.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%]/g},e.jstree.create=function(t,n){var i=new e.jstree.core(++o),a=n;return n=e.extend(!0,{},e.jstree.defaults,n),a&&a.plugins&&(n.plugins=a.plugins),e.each(n.plugins,(function(e,t){"core"!==e&&(i=i.plugin(t,n[t]))})),i.init(t,n),i},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[]}}},e.jstree.reference=function(t){var n=null,i=null;if(t&&t.id&&(t=t.id),!i||!i.length)try{i=e(t)}catch(e){}if(!i||!i.length)try{i=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return i&&i.length&&(i=i.closest(".jstree")).length&&(i=i.data("jstree"))?n=i:e(".jstree").each((function(){var i=e(this).data("jstree");if(i&&i._model.data[t])return n=i,!1})),n},e.fn.jstree=function(n){var i="string"==typeof n,o=Array.prototype.slice.call(arguments,1),a=null;return this.each((function(){var s=e.jstree.reference(this),r=i&&s?s[n]:null;if(a=i&&r?r.apply(s,o):null,s||i||n!==t&&!e.isPlainObject(n)||e(this).data("jstree",new e.jstree.create(this,n)),(s&&!i||!0===n)&&(a=s||!1),null!==a&&a!==t)return!1})),null!==a&&a!==t?a:this},e.expr[":"].jstree=e.expr.createPseudo((function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}})),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1},e.jstree.core.prototype={plugin:function(t,n){var i=e.jstree.plugins[t];return i?(this._data[t]={},i.prototype=this,new i(n,this)):this},init:function(t,n){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this.element.bind("destroyed",e.proxy(this.teardown,this)),this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter((function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))})).remove(),this.element.html("<ul class='jstree-container-ul jstree-children'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this._data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(e){e||this.element.empty(),this.element.unbind("destroyed",this.teardown),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",(function(){return this.className.replace(/jstree[^ ]*|$/gi,"")})),this.element=null},bind:function(){this.element.on("dblclick.jstree",(function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(e){}}})).on("click.jstree",".jstree-ocl",e.proxy((function(e){this.toggle_node(e.target)}),this)).on("click.jstree",".jstree-anchor",e.proxy((function(t){t.preventDefault(),e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)}),this)).on("keydown.jstree",".jstree-anchor",e.proxy((function(t){if("INPUT"===t.target.tagName)return!0;var n=null;switch(t.which){case 13:case 32:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(n=this.get_prev_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 38:t.preventDefault(),(n=this.get_prev_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,(function(e){this.get_node(e,!0).children(".jstree-anchor").focus()})):(n=this.get_next_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 40:t.preventDefault(),(n=this.get_next_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 46:t.preventDefault(),(n=this.get_node(t.currentTarget))&&n.id&&"#"!==n.id&&(n=this.is_selected(n)?this.get_selected():n);break;case 113:t.preventDefault(),n=this.get_node(t.currentTarget)}}),this)).on("load_node.jstree",e.proxy((function(t,n){if(n.status&&("#"!==n.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this.trigger("loaded")),!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length)){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var i,o,a=[];for(i=0,o=this._data.core.selected.length;i<o;i++)a=a.concat(this._model.data[this._data.core.selected[i]].parents);for(i=0,o=(a=e.vakata.array_unique(a)).length;i<o;i++)this.open_node(a[i],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout(e.proxy((function(){this.trigger("ready")}),this),0)}}),this)).on("init.jstree",e.proxy((function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)}),this)).on("loading.jstree",e.proxy((function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()}),this)).on("blur.jstree",".jstree-anchor",e.proxy((function(t){e(t.currentTarget).filter(".jstree-hovered").mouseleave()}),this)).on("focus.jstree",".jstree-anchor",e.proxy((function(t){this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter()}),this)).on("mouseenter.jstree",".jstree-anchor",e.proxy((function(e){this.hover_node(e.currentTarget)}),this)).on("mouseleave.jstree",".jstree-anchor",e.proxy((function(e){this.dehover_node(e.currentTarget)}),this))},unbind:function(){this.element.off(".jstree"),e(document).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children:eq(0)")},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){var i;t&&t.id&&(t=t.id);try{if(this._model.data[t])t=this._model.data[t];else if(((i=e(t,this.element)).length||(i=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length)&&this._model.data[i.closest(".jstree-node").attr("id")])t=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=e(t,this.element)).length||!i.hasClass("jstree"))return!1;t=this._model.data["#"]}return n&&(t="#"===t.id?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(e,t,n){if(!(e=e.parents?e:this.get_node(e))||"#"===e.id||!e.parents)return!1;var i,o,a=[];for(a.push(n?e.id:e.text),i=0,o=e.parents.length;i<o;i++)a.push(n?e.parents[i]:this.get_text(e.parents[i]));return a=a.reverse().slice(1),t?a.join(t):a},get_next_dom:function(t,n){var i;return(t=this.get_node(t,!0))[0]===this.element[0]?!!(i=this._firstChild(this.get_container_ul()[0]))&&e(i):!(!t||!t.length)&&(n?!!(i=this._nextSibling(t[0]))&&e(i):t.hasClass("jstree-open")?!!(i=this._firstChild(t.children(".jstree-children")[0]))&&e(i):null!==(i=this._nextSibling(t[0]))?e(i):t.parentsUntil(".jstree",".jstree-node").next(".jstree-node").eq(0))},get_prev_dom:function(t,n){var i;if((t=this.get_node(t,!0))[0]===this.element[0])return!!(i=this.get_container_ul()[0].lastChild)&&e(i);if(!t||!t.length)return!1;if(n)return!!(i=this._previousSibling(t[0]))&&e(i);if(null!==(i=this._previousSibling(t[0]))){for(t=e(i);t.hasClass("jstree-open");)t=t.children(".jstree-children:eq(0)").children(".jstree-node:last");return t}return!(!(i=t[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&e(i)},get_parent:function(e){return!(!(e=this.get_node(e))||"#"===e.id)&&e.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var i,o,a,s,r;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(!(t=this.get_node(t)))return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,i=0,o=t.children_d.length;i<o;i++){for(a=0,s=t.parents.length;a<s;a++)this._model.data[t.parents[a]].children_d=e.vakata.array_remove_item(this._model.data[t.parents[a]].children_d,t.children_d[i]);this._model.data[t.children_d[i]].state.selected&&(r=!0,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.children_d[i])),delete this._model.data[t.children_d[i]]}t.children=[],t.children_d=[],r&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading"),this._load_node(t,e.proxy((function(e){(t=this._model.data[t.id]).state.loading=!1,t.state.loaded=e;var i=this.get_node(t,!0);t.state.loaded&&!t.children.length&&i&&i.length&&!i.hasClass("jstree-leaf")&&i.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),i.removeClass("jstree-loading"),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)}),this)),!0},_load_nodes:function(e,t,n){var i,o,a=!0,s=function(){this._load_nodes(e,t,!0)},r=this._model.data;for(i=0,o=e.length;i<o;i++)!r[e[i]]||r[e[i]].state.loaded&&n||(this.is_loading(e[i])||this.load_node(e[i],s),a=!1);a&&t&&!t.done&&(t.call(this,e),t.done=!0)},_load_node:function(t,n){var i,o=this.settings.core.data;return o?e.isFunction(o)?o.call(this,t,e.proxy((function(i){!1===i&&n.call(this,!1),this["string"==typeof i?"_append_html_data":"_append_json_data"](t,"string"==typeof i?e(i):i,(function(e){n.call(this,e)}))}),this)):"object"==typeof o?o.url?(o=e.extend(!0,{},o),e.isFunction(o.url)&&(o.url=o.url.call(this,t)),e.isFunction(o.data)&&(o.data=o.data.call(this,t)),e.ajax(o).done(e.proxy((function(i,o,a){var s=a.getResponseHeader("Content-Type");return-1!==s.indexOf("json")||"object"==typeof i?this._append_json_data(t,i,(function(e){n.call(this,e)})):-1!==s.indexOf("html")||"string"==typeof i?this._append_html_data(t,e(i),(function(e){n.call(this,e)})):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))}),this)).fail(e.proxy((function(e){n.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)}),this))):(i=e.isArray(o)||e.isPlainObject(o)?JSON.parse(JSON.stringify(o)):o,"#"===t.id?this._append_json_data(t,i,(function(e){n.call(this,e)})):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof o?"#"===t.id?this._append_html_data(t,e(o),(function(e){n.call(this,e)})):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):"#"===t.id?this._append_html_data(t,this._data.core.original_container_html.clone(!0),(function(e){n.call(this,e)})):n.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&this._model.changed.push(e.id)},_append_html_data:function(t,n,i){(t=this.get_node(t)).children=[],t.children_d=[];var o,a,s,r=n.is("ul")?n.children():n,l=t.id,d=[],c=[],u=this._model.data,h=u[l],p=this._data.core.selected.length;for(r.each(e.proxy((function(t,n){(o=this._parse_model_from_html(e(n),l,h.parents.concat()))&&(d.push(o),c.push(o),u[o].children_d.length&&(c=c.concat(u[o].children_d)))}),this)),h.children=d,h.children_d=c,a=0,s=h.parents.length;a<s;a++)u[h.parents[a]].children_d=u[h.parents[a]].children_d.concat(c);this.trigger("model",{nodes:c,parent:l}),"#"!==l?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==p&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(t,n,i){(t=this.get_node(t)).children=[],t.children_d=[],n.d&&"string"==typeof(n=n.d)&&(n=JSON.parse(n)),e.isArray(n)||(n=[n]);var o=null,a={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},s=function(e,t){e.data&&(e=e.data);var n,i,o,a,s=e.dat,r=e.par,l=[],d=[],c=[],u=e.df,h=e.t_id,p=e.t_cnt,f=e.m,m=f[r],_=e.sel,v=function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var o,a,s,r,l=e.id.toString(),d={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in u)u.hasOwnProperty(o)&&(d.state[o]=u[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),e&&e.data&&(d.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(d.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(d.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(d.li_attr[o]=e.li_attr[o]);if(d.li_attr.id||(d.li_attr.id=l),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(d.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),f[d.id]=d,o=0,a=d.children.length;o<a;o++)s=v(f[d.children[o]],d.id,i),r=f[s],d.children_d.push(s),r.children_d.length&&(d.children_d=d.children_d.concat(r.children_d));return delete e.data,delete e.children,f[d.id].original=e,d.state.selected&&c.push(d.id),d.id},g=function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var o,a,s,r,l,d=!1;do{d="j"+h+"_"+ ++p}while(f[d]);for(o in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},u)u.hasOwnProperty(o)&&(l.state[o]=u[o]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),e&&e.data&&(l.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,a=e.children.length;o<a;o++)s=g(e.children[o],l.id,i),r=f[s],l.children.push(s),r.children_d.length&&(l.children_d=l.children_d.concat(r.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,f[l.id]=l,l.state.selected&&c.push(l.id),l.id};if(s.length&&s[0].id!==t&&s[0].parent!==t){for(i=0,o=s.length;i<o;i++)s[i].children||(s[i].children=[]),f[s[i].id.toString()]=s[i];for(i=0,o=s.length;i<o;i++)f[s[i].parent.toString()].children.push(s[i].id.toString()),m.children_d.push(s[i].id.toString());for(i=0,o=m.children.length;i<o;i++)n=v(f[m.children[i]],r,m.parents.concat()),d.push(n),f[n].children_d.length&&(d=d.concat(f[n].children_d));for(i=0,o=m.parents.length;i<o;i++)f[m.parents[i]].children_d=f[m.parents[i]].children_d.concat(d);a={cnt:p,mod:f,sel:_,par:r,dpc:d,add:c}}else{for(i=0,o=s.length;i<o;i++)(n=g(s[i],r,m.parents.concat()))&&(l.push(n),d.push(n),f[n].children_d.length&&(d=d.concat(f[n].children_d)));for(m.children=l,m.children_d=d,i=0,o=m.parents.length;i<o;i++)f[m.parents[i]].children_d=f[m.parents[i]].children_d.concat(d);a={cnt:p,mod:f,sel:_,par:r,dpc:d,add:c}}return a},r=function(t,n){if(this._cnt=t.cnt,this._model.data=t.mod,n){var o,a,s=t.add,r=t.sel,l=this._data.core.selected.slice(),d=this._model.data;if(r.length!==l.length||e.vakata.array_unique(r.concat(l)).length!==r.length){for(o=0,a=r.length;o<a;o++)-1===e.inArray(r[o],s)&&-1===e.inArray(r[o],l)&&(d[r[o]].state.selected=!1);for(o=0,a=l.length;o<a;o++)-1===e.inArray(l[o],r)&&(d[l[o]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),"#"!==t.par?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString().replace(/return ([^;}]+)[\s;}]+$/,"postMessage($1);}")],{type:"text/javascript"}))),(o=new window.Worker(this._wrk)).onmessage=e.proxy((function(e){r.call(this,e.data,!0),this._data.core.working=!1,this._data.core.worker_queue.length&&this._append_json_data.apply(this,this._data.core.worker_queue.shift())}),this),this._data.core.working?this._data.core.worker_queue.push([t,n,i]):(this._data.core.working=!0,o.postMessage(a))}catch(e){r.call(this,s(a),!1)}else r.call(this,s(a),!1)},_parse_model_from_html:function(t,n,i){i=i?[].concat(i):[],n&&i.unshift(n);var o,a,s,r,l,d=this._model.data,c={id:!1,text:!1,icon:!0,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in this._model.default_state)this._model.default_state.hasOwnProperty(s)&&(c.state[s]=this._model.default_state[s]);if(r=e.vakata.attributes(t,!0),e.each(r,(function(t,n){if(!(n=e.trim(n)).length)return!0;c.li_attr[t]=n,"id"===t&&(c.id=n.toString())})),(r=t.children("a").eq(0)).length&&(r=e.vakata.attributes(r,!0),e.each(r,(function(t,n){(n=e.trim(n)).length&&(c.a_attr[t]=n)}))),(r=t.children("a:eq(0)").length?t.children("a:eq(0)").clone():t.clone()).children("ins, i, ul").remove(),r=r.html(),r=e("<div />").html(r),c.text=this.settings.core.force_text?r.text():r.html(),r=t.data(),c.data=r?e.extend(!0,{},r):null,c.state.opened=t.hasClass("jstree-open"),c.state.selected=t.children("a").hasClass("jstree-clicked"),c.state.disabled=t.children("a").hasClass("jstree-disabled"),c.data&&c.data.jstree)for(s in c.data.jstree)c.data.jstree.hasOwnProperty(s)&&(c.state[s]=c.data.jstree[s]);(r=t.children("a").children(".jstree-themeicon")).length&&(c.icon=!r.hasClass("jstree-themeicon-hidden")&&r.attr("rel")),c.state.icon&&(c.icon=c.state.icon),r=t.children("ul").children("li");do{l="j"+this._id+"_"+ ++this._cnt}while(d[l]);return c.id=c.li_attr.id?c.li_attr.id.toString():l,r.length?(r.each(e.proxy((function(t,n){o=this._parse_model_from_html(e(n),c.id,i),a=this._model.data[o],c.children.push(o),a.children_d.length&&(c.children_d=c.children_d.concat(a.children_d))}),this)),c.children_d=c.children_d.concat(c.children)):t.hasClass("jstree-closed")&&(c.state.loaded=!1),c.li_attr.class&&(c.li_attr.class=c.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),c.a_attr.class&&(c.a_attr.class=c.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),d[c.id]=c,c.state.selected&&this._data.core.selected.push(c.id),c.id},_parse_model_from_flat_json:function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var o,a,s,r,l=e.id.toString(),d=this._model.data,c=this._model.default_state,u={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in c)c.hasOwnProperty(o)&&(u.state[o]=c[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),e&&e.data&&(u.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(u.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(u.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(u.li_attr[o]=e.li_attr[o]);if(u.li_attr.id||(u.li_attr.id=l),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(u.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(u.state.loaded=!1,u.children=[],u.children_d=[]),d[u.id]=u,o=0,a=u.children.length;o<a;o++)r=d[s=this._parse_model_from_flat_json(d[u.children[o]],u.id,i)],u.children_d.push(s),r.children_d.length&&(u.children_d=u.children_d.concat(r.children_d));return delete e.data,delete e.children,d[u.id].original=e,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_json:function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var o,a,s,r,l,d=!1,c=this._model.data,u=this._model.default_state;do{d="j"+this._id+"_"+ ++this._cnt}while(c[d]);for(o in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},u)u.hasOwnProperty(o)&&(l.state[o]=u[o]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),e&&e.data&&(l.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,a=e.children.length;o<a;o++)r=c[s=this._parse_model_from_json(e.children[o],l.id,i)],l.children.push(s),r.children_d.length&&(l.children_d=l.children_d.concat(r.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,c[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var e,t,n,i=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),o=document.createElement("UL");for(t=0,n=i.length;t<n;t++)(e=this.redraw_node(i[t],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&o.appendChild(e);this._model.force_full_redraw&&(o.className=this.get_container_ul()[0].className,this.element.empty().append(o)),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:i})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},redraw_node:function(t,n,i){var o=this.get_node(t),a=!1,s=!1,r=!1,l=!1,d=!1,c=!1,h="",p=document,f=this._model.data,m=!1,_=!1,v=null;if(!o)return!1;if("#"===o.id)return this.redraw(!0);if(n=n||0===o.children.length,t=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(o.id[0])?"\\3"+o.id[0]+" "+o.id.substr(1).replace(e.jstree.idregex,"\\$&"):o.id.replace(e.jstree.idregex,"\\$&"))):document.getElementById(o.id))t=e(t),i||((a=t.parent().parent()[0])===this.element[0]&&(a=null),s=t.index()),n||!o.children.length||t.children(".jstree-children").length||(n=!0),n||(r=t.children(".jstree-children")[0]),_=t.attr("aria-selected"),m=t.children(".jstree-anchor")[0]===document.activeElement,t.remove();else if(n=!0,!i){if(!(null===(a="#"!==o.parent?e("#"+o.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&f[o.parent].state.opened))return!1;s=e.inArray(o.id,null===a?f["#"].children:f[o.parent].children)}for(l in t=u.cloneNode(!0),h="jstree-node ",o.li_attr)if(o.li_attr.hasOwnProperty(l)){if("id"===l)continue;"class"!==l?t.setAttribute(l,o.li_attr[l]):h+=o.li_attr[l]}for(d in _&&"false"!==_&&t.setAttribute("aria-selected",!0),o.state.loaded&&!o.children.length?h+=" jstree-leaf":(h+=o.state.opened&&o.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",o.state.opened&&o.state.loaded)),null!==o.parent&&f[o.parent].children[f[o.parent].children.length-1]===o.id&&(h+=" jstree-last"),t.id=o.id,t.className=h,h=(o.state.selected?" jstree-clicked":"")+(o.state.disabled?" jstree-disabled":""),o.a_attr)if(o.a_attr.hasOwnProperty(d)){if("href"===d&&"#"===o.a_attr[d])continue;"class"!==d?t.childNodes[1].setAttribute(d,o.a_attr[d]):h+=" "+o.a_attr[d]}if(h.length&&(t.childNodes[1].className="jstree-anchor "+h),(o.icon&&!0!==o.icon||!1===o.icon)&&(!1===o.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===o.icon.indexOf("/")&&-1===o.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+o.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage="url("+o.icon+")",t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(p.createTextNode(o.text)):t.childNodes[1].innerHTML+=o.text,n&&o.children.length&&o.state.opened&&o.state.loaded){for((c=p.createElement("UL")).setAttribute("role","group"),c.className="jstree-children",l=0,d=o.children.length;l<d;l++)c.appendChild(this.redraw_node(o.children[l],n,!0));t.appendChild(c)}if(r&&t.appendChild(r),!i){for(a||(a=this.element[0]),l=0,d=a.childNodes.length;l<d;l++)if(a.childNodes[l]&&a.childNodes[l].className&&-1!==a.childNodes[l].className.indexOf("jstree-children")){v=a.childNodes[l];break}v||((v=p.createElement("UL")).setAttribute("role","group"),v.className="jstree-children",a.appendChild(v)),s<(a=v).childNodes.length?a.insertBefore(t,a.childNodes[s]):a.appendChild(t),m&&t.childNodes[1].focus()}return o.state.opened&&!o.state.loaded&&(o.state.opened=!1,setTimeout(e.proxy((function(){this.open_node(o.id,!1,0)}),this),0)),t},open_node:function(n,i,o){var a,s,r,l;if(e.isArray(n)){for(a=0,s=(n=n.slice()).length;a<s;a++)this.open_node(n[a],i,o);return!0}if(!(n=this.get_node(n))||"#"===n.id)return!1;if(o=o===t?this.settings.core.animation:o,!this.is_closed(n))return i&&i.call(this,n,!1),!1;if(this.is_loaded(n))r=this.get_node(n,!0),l=this,r.length&&(n.children.length&&!this._firstChild(r.children(".jstree-children")[0])&&(n.state.opened=!0,this.redraw_node(n,!0),r=this.get_node(n,!0)),o?(this.trigger("before_open",{node:n}),r.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(o,(function(){this.style.display="",l.trigger("after_open",{node:n})}))):(this.trigger("before_open",{node:n}),r[0].className=r[0].className.replace("jstree-closed","jstree-open"),r[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,i&&i.call(this,n,!0),r.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),o&&r.length||this.trigger("after_open",{node:n});else{if(this.is_loading(n))return setTimeout(e.proxy((function(){this.open_node(n,i,o)}),this),500);this.load_node(n,(function(e,t){return t?this.open_node(e,i,o):!!i&&i.call(this,e,!1)}))}},_open_to:function(t){if(!(t=this.get_node(t))||"#"===t.id)return!1;var n,i,o=t.parents;for(n=0,i=o.length;n<i;n+=1)"#"!==n&&this.open_node(o[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,i){var o,a,s,r;if(e.isArray(n)){for(o=0,a=(n=n.slice()).length;o<a;o++)this.close_node(n[o],i);return!0}return!(!(n=this.get_node(n))||"#"===n.id)&&(!this.is_closed(n)&&(i=i===t?this.settings.core.animation:i,s=this,(r=this.get_node(n,!0)).length&&(i?r.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(i,(function(){this.style.display="",r.children(".jstree-children").remove(),s.trigger("after_close",{node:n})})):(r[0].className=r[0].className.replace("jstree-open","jstree-closed"),r.attr("aria-expanded",!1).children(".jstree-children").remove())),n.state.opened=!1,this.trigger("close_node",{node:n}),void(i&&r.length||this.trigger("after_close",{node:n}))))},toggle_node:function(t){var n,i;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(e,t,n){if(e||(e="#"),!(e=this.get_node(e)))return!1;var i,o,a,s="#"===e.id?this.get_container_ul():this.get_node(e,!0);if(!s.length){for(i=0,o=e.children_d.length;i<o;i++)this.is_closed(this._model.data[e.children_d[i]])&&(this._model.data[e.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:e})}n=n||s,a=this,(s=this.is_closed(e)?s.find(".jstree-closed").addBack():s.find(".jstree-closed")).each((function(){a.open_node(this,(function(e,i){i&&this.is_parent(e)&&this.open_all(e,t,n)}),t||0)})),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(t,n){if(t||(t="#"),!(t=this.get_node(t)))return!1;var i,o,a="#"===t.id?this.get_container_ul():this.get_node(t,!0),s=this;if(!a.length){for(i=0,o=t.children_d.length;i<o;i++)this._model.data[t.children_d[i]].state.opened=!1;return this.trigger("close_all",{node:t})}a=this.is_open(t)?a.find(".jstree-open").addBack():a.find(".jstree-open"),e(a.get().reverse()).each((function(){s.close_node(this,n||0)})),this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var n,i;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.enable_node(t[n]);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled"),this.trigger("enable_node",{node:t})},disable_node:function(t){var n,i;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.disable_node(t[n]);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled"),this.trigger("disable_node",{node:t})},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var i,o,a=this.get_node(e).id,s=this._data.core.last_clicked.id,r=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(i=0,o=r.length;i<o;i+=1)r[i]===a&&(l=!l),r[i]===s&&(l=!l),l||r[i]===a||r[i]===s?this.select_node(r[i],!1,!1,n):this.deselect_node(r[i],!1,n)}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e)})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout((function(){n.attr("aria-activedescendant",e[0].id),e.attr("aria-selected",!0)}),0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(t,n,i,o){var a,s,r;if(e.isArray(t)){for(s=0,r=(t=t.slice()).length;s<r;s++)this.select_node(t[s],n,i,o);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;a=this.get_node(t,!0),t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),i||(a=this._open_to(t)),a&&a.length&&a.children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:o}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:o}))},deselect_node:function(t,n,i){var o,a,s;if(e.isArray(t)){for(o=0,a=(t=t.slice()).length;o<a;o++)this.deselect_node(t[o],n,i);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;s=this.get_node(t,!0),t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:i}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:i}))},select_all:function(e){var t,n,i=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),t=0,n=this._data.core.selected.length;t<n;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:i})},deselect_all:function(e){var t,n,i=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;t<n;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked"),this.trigger("deselect_all",{selected:this._data.core.selected,node:i}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:i})},is_selected:function(e){return!(!(e=this.get_node(e))||"#"===e.id)&&e.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy((function(e){return this.get_node(e)}),this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,i,o,a,s=this.get_selected(!0),r={};for(n=0,i=s.length;n<i;n++)r[s[n].id]=s[n];for(n=0,i=s.length;n<i;n++)for(o=0,a=s[n].children_d.length;o<a;o++)r[s[n].children_d[o]]&&delete r[s[n].children_d[o]];for(n in s=[],r)r.hasOwnProperty(n)&&s.push(n);return t?e.map(s,e.proxy((function(e){return this.get_node(e)}),this)):s},get_bottom_selected:function(t){var n,i,o=this.get_selected(!0),a=[];for(n=0,i=o.length;n<i;n++)o[n].children.length||a.push(o[n].id);return t?e.map(a,e.proxy((function(e){return this.get_node(e)}),this)):a},get_state:function(){var e,t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(e in this._model.data)this._model.data.hasOwnProperty(e)&&"#"!==e&&(this._model.data[e].state.opened&&t.core.open.push(e),this._model.data[e].state.selected&&t.core.selected.push(e));return t},set_state:function(n,i){if(n){if(n.core){var o,a,s;if(n.core.open)return e.isArray(n.core.open)?(o=!0,!1,a=this,e.each(n.core.open.concat([]),(function(t,s){a.get_node(s)&&(a.is_loaded(s)?(a.is_closed(s)&&a.open_node(s,!1,0),n&&n.core&&n.core.open&&e.vakata.array_remove_item(n.core.open,s)):(a.is_loading(s)||a.open_node(s,e.proxy((function(t,o){!o&&n&&n.core&&n.core.open&&e.vakata.array_remove_item(n.core.open,t.id),this.set_state(n,i)}),a),0),o=!1))})),o&&(delete n.core.open,this.set_state(n,i)),!1):(delete n.core.open,this.set_state(n,i),!1);if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,i),!1;if(n.core.selected)return s=this,this.deselect_all(),e.each(n.core.selected,(function(e,t){s.select_node(t)})),delete n.core.selected,this.set_state(n,i),!1;if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,i),!1}return!e.isEmptyObject(n)||(n=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=!0===n?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var i=this.get_container_ul()[0].className;t||this.element.html("<ul class='"+i+"'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.load_node("#",(function(t,n){n&&(this.get_container_ul()[0].className=i,this.set_state(e.extend(!0,{},this._data.core.state),(function(){this.trigger("refresh")}))),this._data.core.state=null}))},refresh_node:function(t){if(!(t=this.get_node(t))||"#"===t.id)return!1;var n=[],i=[];this._data.core.selected.concat([]);i.push(t.id),!0===t.state.opened&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each((function(){n.push(this.id)})),this._load_nodes(i,e.proxy((function(e){this.open_node(n,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:t,nodes:e})}),this))},set_id:function(t,n){if(!(t=this.get_node(t))||"#"===t.id)return!1;var i,o,a=this._model.data;for(n=n.toString(),a[t.parent].children[e.inArray(t.id,a[t.parent].children)]=n,i=0,o=t.parents.length;i<o;i++)a[t.parents[i]].children_d[e.inArray(t.id,a[t.parents[i]].children_d)]=n;for(i=0,o=t.children.length;i<o;i++)a[t.children[i]].parent=n;for(i=0,o=t.children_d.length;i<o;i++)a[t.children_d[i]].parents[e.inArray(t.id,a[t.children_d[i]].parents)]=n;return-1!==(i=e.inArray(t.id,this._data.core.selected))&&(this._data.core.selected[i]=n),(i=this.get_node(t.id,!0))&&i.attr("id",n),delete a[t.id],t.id=n,a[n]=t,!0},get_text:function(e){return!(!(e=this.get_node(e))||"#"===e.id)&&e.text},set_text:function(t,n){var i,o;if(e.isArray(t)){for(i=0,o=(t=t.slice()).length;i<o;i++)this.set_text(t[i],n);return!0}return!(!(t=this.get_node(t))||"#"===t.id)&&(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(e,t,n){if(!(e=this.get_node(e||"#")))return!1;t&&t.flat&&!n&&(n=[]);var i,o,a={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:e.li_attr,a_attr:e.a_attr,state:{},data:(!t||!t.no_data)&&e.data};if(t&&t.flat?a.parent=e.parent:a.children=[],!t||!t.no_state)for(i in e.state)e.state.hasOwnProperty(i)&&(a.state[i]=e.state[i]);if(t&&t.no_id&&(delete a.id,a.li_attr&&a.li_attr.id&&delete a.li_attr.id),t&&t.flat&&"#"!==e.id&&n.push(a),!t||!t.no_children)for(i=0,o=e.children.length;i<o;i++)t&&t.flat?this.get_json(e.children[i],t,n):a.children.push(this.get_json(e.children[i],t));return t&&t.flat?n:"#"===e.id?a.children:a},create_node:function(n,i,o,a,s){if(null===n&&(n="#"),!(n=this.get_node(n)))return!1;if(!(o=o===t?"last":o).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return this.load_node(n,(function(){this.create_node(n,i,o,a,!0)}));var r,l,d,c;switch(i||(i={text:this.get_string("New node")}),i.text===t&&(i.text=this.get_string("New node")),"#"===n.id&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":r=this.get_node(n.parent),o=e.inArray(n.id,r.children),n=r;break;case"after":r=this.get_node(n.parent),o=e.inArray(n.id,r.children)+1,n=r;break;case"inside":case"first":o=0;break;case"last":o=n.children.length;break;default:o||(o=0)}if(o>n.children.length&&(o=n.children.length),i.id||(i.id=!0),!this.check("create_node",i,n,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===i.id&&delete i.id,!(i=this._parse_model_from_json(i,n.id,n.parents.concat())))return!1;for(r=this.get_node(i),(l=[]).push(i),l=l.concat(r.children_d),this.trigger("model",{nodes:l,parent:n.id}),n.children_d=n.children_d.concat(l),d=0,c=n.parents.length;d<c;d++)this._model.data[n.parents[d]].children_d=this._model.data[n.parents[d]].children_d.concat(l);for(i=r,r=[],d=0,c=n.children.length;d<c;d++)r[d>=o?d+1:d]=n.children[d];return r[o]=i.id,n.children=r,this.redraw_node(n,!0),a&&a.call(this,this.get_node(i)),this.trigger("create_node",{node:this.get_node(i),parent:n.id,position:o}),i.id},rename_node:function(t,n){var i,o,a;if(e.isArray(t)){for(i=0,o=(t=t.slice()).length;i<o;i++)this.rename_node(t[i],n);return!0}return!(!(t=this.get_node(t))||"#"===t.id)&&(a=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:a}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,i,o,a,s,r,l,d,c,u;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.delete_node(t[n]);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;if(o=this.get_node(t.parent),a=e.inArray(t.id,o.children),u=!1,!this.check("delete_node",t,o,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==a&&(o.children=e.vakata.array_remove(o.children,a)),(s=t.children_d.concat([])).push(t.id),d=0,c=s.length;d<c;d++){for(r=0,l=t.parents.length;r<l;r++)-1!==(a=e.inArray(s[d],this._model.data[t.parents[r]].children_d))&&(this._model.data[t.parents[r]].children_d=e.vakata.array_remove(this._model.data[t.parents[r]].children_d,a));this._model.data[s[d]].state.selected&&(u=!0,-1!==(a=e.inArray(s[d],this._data.core.selected))&&(this._data.core.selected=e.vakata.array_remove(this._data.core.selected,a)))}for(this.trigger("delete_node",{node:t,parent:o.id}),u&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:o.id}),d=0,c=s.length;d<c;d++)delete this._model.data[s[d]];return this.redraw_node(o,!0),!0},check:function(t,n,i,o,a){n=n&&n.id?n:this.get_node(n),i=i&&i.id?i:this.get_node(i);var s=t.match(/^move_node|copy_node|create_node$/i)?i:n,r=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||a&&a.is_multi||n.id!==i.id&&e.inArray(n.id,i.children)!==o&&-1===e.inArray(i.id,n.children_d)?(s&&s.data&&(s=s.data),s&&s.functions&&(!1===s.functions[t]||!0===s.functions[t])?(!1===s.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s.functions[t]):!(!1===r||e.isFunction(r)&&!1===r.call(this,t,n,i,o,a)||r&&!1===r[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,i,o,a,s){var r,l,d,c,u,h,p,f,m,_,v,g,y,b;if(i=this.get_node(i),o=o===t?0:o,!i)return!1;if(!o.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(i))return this.load_node(i,(function(){this.move_node(n,i,o,a,!0)}));if(e.isArray(n)){for(r=0,l=(n=n.reverse().slice()).length;r<l;r++)this.move_node(n[r],i,o,a,s);return!0}if(!(n=n&&n.id?n:this.get_node(n))||"#"===n.id)return!1;if(d=(n.parent||"#").toString(),u=o.toString().match(/^(before|after)$/)&&"#"!==i.id?this.get_node(i.parent):i,p=!(h=n.instance?n.instance:this._model.data[n.id]?this:e.jstree.reference(n.id))||!h._id||this._id!==h._id,c=h&&h._id&&d&&h._model.data[d]&&h._model.data[d].children?e.inArray(n.id,h._model.data[d].children):-1,p)return!!this.copy_node(n,i,o,a,s)&&(h&&h.delete_node(n),!0);switch("#"===u.id&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(i.id,u.children);break;case"after":o=e.inArray(i.id,u.children)+1;break;case"inside":case"first":o=0;break;case"last":o=u.children.length;break;default:o||(o=0)}if(o>u.children.length&&(o=u.children.length),!this.check("move_node",n,u,o,{core:!0,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===u.id){for(f=u.children.concat(),-1!==(m=e.inArray(n.id,f))&&(f=e.vakata.array_remove(f,m),o>m&&o--),m=[],_=0,v=f.length;_<v;_++)m[_>=o?_+1:_]=f[_];m[o]=n.id,u.children=m,this._node_changed(u.id),this.redraw("#"===u.id)}else{for((m=n.children_d.concat()).push(n.id),_=0,v=n.parents.length;_<v;_++){for(f=[],g=0,y=(b=h._model.data[n.parents[_]].children_d).length;g<y;g++)-1===e.inArray(b[g],m)&&f.push(b[g]);h._model.data[n.parents[_]].children_d=f}for(h._model.data[d].children=e.vakata.array_remove_item(h._model.data[d].children,n.id),_=0,v=u.parents.length;_<v;_++)this._model.data[u.parents[_]].children_d=this._model.data[u.parents[_]].children_d.concat(m);for(f=[],_=0,v=u.children.length;_<v;_++)f[_>=o?_+1:_]=u.children[_];for(f[o]=n.id,u.children=f,u.children_d.push(n.id),u.children_d=u.children_d.concat(n.children_d),n.parent=u.id,(m=u.parents.concat()).unshift(u.id),b=n.parents.length,n.parents=m,m=m.concat(),_=0,v=n.children_d.length;_<v;_++)this._model.data[n.children_d[_]].parents=this._model.data[n.children_d[_]].parents.slice(0,-1*b),Array.prototype.push.apply(this._model.data[n.children_d[_]].parents,m);this._node_changed(d),this._node_changed(u.id),this.redraw("#"===d||"#"===u.id)}return a&&a.call(this,n,u,o),this.trigger("move_node",{node:n,parent:u.id,position:o,old_parent:d,old_position:c,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),!0},copy_node:function(n,i,o,a,s){var r,l,d,c,u,h,p,f,m,_;if(i=this.get_node(i),o=o===t?0:o,!i)return!1;if(!o.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(i))return this.load_node(i,(function(){this.copy_node(n,i,o,a,!0)}));if(e.isArray(n)){for(r=0,l=(n=n.reverse().slice()).length;r<l;r++)this.copy_node(n[r],i,o,a,s);return!0}if(!(n=n&&n.id?n:this.get_node(n))||"#"===n.id)return!1;switch(f=(n.parent||"#").toString(),m=o.toString().match(/^(before|after)$/)&&"#"!==i.id?this.get_node(i.parent):i,!(_=n.instance?n.instance:this._model.data[n.id]?this:e.jstree.reference(n.id))||!_._id||this._id!==_._id,"#"===m.id&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(i.id,m.children);break;case"after":o=e.inArray(i.id,m.children)+1;break;case"inside":case"first":o=0;break;case"last":o=m.children.length;break;default:o||(o=0)}if(o>m.children.length&&(o=m.children.length),!this.check("copy_node",n,m,o,{core:!0,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(p=_?_.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===p.id&&delete p.id,!(p=this._parse_model_from_json(p,m.id,m.parents.concat())))return!1;for(c=this.get_node(p),n&&n.state&&!1===n.state.loaded&&(c.state.loaded=!1),(d=[]).push(p),d=d.concat(c.children_d),this.trigger("model",{nodes:d,parent:m.id}),u=0,h=m.parents.length;u<h;u++)this._model.data[m.parents[u]].children_d=this._model.data[m.parents[u]].children_d.concat(d);for(d=[],u=0,h=m.children.length;u<h;u++)d[u>=o?u+1:u]=m.children[u];return d[o]=c.id,m.children=d,m.children_d.push(c.id),m.children_d=m.children_d.concat(c.children_d),this._node_changed(m.id),this.redraw("#"===m.id),a&&a.call(this,c,m,o),this.trigger("copy_node",{node:c,original:n,parent:m.id,position:o,old_parent:f,old_position:_&&_._id&&f&&_._model.data[f]&&_._model.data[f].children?e.inArray(n.id,_._model.data[f].children):-1,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id,old_instance:_,new_instance:this}),c.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,i,o,l=[];for(i=0,o=t.length;i<o;i++)(n=this.get_node(t[i]))&&n.id&&"#"!==n.id&&l.push(n);if(!l.length)return!1;a=l,r=this,s="move_node",this.trigger("cut",{node:t})},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,i,o,l=[];for(i=0,o=t.length;i<o;i++)(n=this.get_node(t[i]))&&n.id&&"#"!==n.id&&l.push(n);if(!l.length)return!1;a=l,r=this,s="copy_node",this.trigger("copy",{node:t})},get_buffer:function(){return{mode:s,node:a,inst:r}},can_paste:function(){return!1!==s&&!1!==a},paste:function(e,t){if(!((e=this.get_node(e))&&s&&s.match(/^(copy_node|move_node)$/)&&a))return!1;this[s](a,e,t)&&this.trigger("paste",{parent:e.id,node:a,mode:s}),a=!1,s=!1,r=!1},edit:function(t,n){if(!(t=this.get_node(t)))return!1;if(!1===this.settings.core.check_callback)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t);var i=this._data.core.rtl,o=this.element.width(),a=t.children(".jstree-anchor"),s=e("<span>"),r=n,l=e("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=e("<input />",{value:r,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy((function(){var n=s.children(".jstree-rename-input").val();""===n&&(n=r),l.remove(),s.replaceWith(a),s.remove(),this.set_text(t,r),!1===this.rename_node(t,e("<div></div>").text(n)[this.settings.core.force_text?"text":"html"]())&&this.set_text(t,r)}),this),keydown:function(e){var t=e.which;27===t&&(this.value=r),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){d.width(Math.min(l.text("pW"+this.value).width(),o))},keypress:function(e){if(13===e.which)return!1}}),c={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""};s.attr("class",a.attr("class")).append(a.contents().clone()).append(d),a.replaceWith(s),l.css(c),d.css(c).width(Math.min(l.text("pW"+d[0].value).width(),o))[0].select()},set_theme:function(t,n){if(!t)return!1;if(!0===n){var i=this.settings.core.themes.dir;i||(i=e.jstree.path+"/themes"),n=i+"/"+t+"/style.css"}n&&-1===e.inArray(n,l)&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),l.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(t,n){var i,o,a,s;if(e.isArray(t)){for(i=0,o=(t=t.slice()).length;i<o;i++)this.set_icon(t[i],n);return!0}return!(!(t=this.get_node(t))||"#"===t.id)&&(s=t.icon,t.icon=n,a=this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===n?this.hide_icon(t):!0===n?a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"):-1===n.indexOf("/")&&-1===n.indexOf(".")?(a.removeClass(s).css("background",""),a.addClass(n+" jstree-themeicon-custom").attr("rel",n)):(a.removeClass(s).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+n+"') center center no-repeat").attr("rel",n)),!0)},get_icon:function(e){return!(!(e=this.get_node(e))||"#"===e.id)&&e.icon},hide_icon:function(t){var n,i;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.hide_icon(t[n]);return!0}return!(!(t=this.get_node(t))||"#"===t)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,i,o;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.show_icon(t[n]);return!0}return!(!(t=this.get_node(t))||"#"===t)&&(o=this.get_node(t,!0),t.icon=!o.length||o.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),o.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var i=n?{}:[];return t&&t.attributes&&e.each(t.attributes,(function(t,o){-1===e.inArray(o.nodeName.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==o.nodeValue&&""!==e.trim(o.nodeValue)&&(n?i[o.nodeName]=o.nodeValue:i.push(o.nodeName))})),i},e.vakata.array_unique=function(e){var t,n,i,o=[];for(t=0,i=e.length;t<i;t++){for(n=0;n<=t&&e[t]!==e[n];n++);n===t&&o.push(e[t])}return o},e.vakata.array_remove=function(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,i),e},e.vakata.array_remove_item=function(t,n){var i=e.inArray(n,t);return-1!==i?e.vakata.array_remove(t,i):t};var h=document.createElement("I");h.className="jstree-icon jstree-checkbox",e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},e.jstree.plugins.checkbox=function(t,n){this.bind=function(){n.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy((function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")}),this)).on("loading.jstree",e.proxy((function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()}),this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy((function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)}),this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy((function(e,t){var n,i,o=this._model.data,a=(o[t.parent],t.nodes);for(n=0,i=a.length;n<i;n++)o[a[n]].state.checked=o[a[n]].original&&o[a[n]].original.state&&o[a[n]].original.state.checked,o[a[n]].state.checked&&this._data.checkbox.selected.push(a[n])}),this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",e.proxy((function(t,n){var i,o,a,s,r,l,d=this._model.data,c=d[n.parent],u=n.nodes,h=[],p=this.settings.checkbox.cascade,f=this.settings.checkbox.tie_selection;if(-1!==p.indexOf("down"))if(c.state[f?"selected":"checked"]){for(o=0,a=u.length;o<a;o++)d[u[o]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(u)}else for(o=0,a=u.length;o<a;o++)if(d[u[o]].state[f?"selected":"checked"]){for(s=0,r=d[u[o]].children_d.length;s<r;s++)d[d[u[o]].children_d[s]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(d[u[o]].children_d)}if(-1!==p.indexOf("up")){for(o=0,a=c.children_d.length;o<a;o++)d[c.children_d[o]].children.length||h.push(d[c.children_d[o]].parent);for(s=0,r=(h=e.vakata.array_unique(h)).length;s<r;s++)for(c=d[h[s]];c&&"#"!==c.id;){for(i=0,o=0,a=c.children.length;o<a;o++)i+=d[c.children[o]].state[f?"selected":"checked"];if(i!==a)break;c.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(c.id),(l=this.get_node(c,!0))&&l.length&&l.children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[f?"core":"checkbox"].selected=e.vakata.array_unique(this._data[f?"core":"checkbox"].selected)}),this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy((function(t,n){var i,o,a,s,r=n.node,l=this._model.data,d=this.get_node(r.parent),c=this.get_node(r,!0),u=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(-1!==u.indexOf("down"))for(this._data[h?"core":"checkbox"].selected=e.vakata.array_unique(this._data[h?"core":"checkbox"].selected.concat(r.children_d)),i=0,o=r.children_d.length;i<o;i++)(s=l[r.children_d[i]]).state[h?"selected":"checked"]=!0,s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1);if(-1!==u.indexOf("up"))for(;d&&"#"!==d.id;){for(a=0,i=0,o=d.children.length;i<o;i++)a+=l[d.children[i]].state[h?"selected":"checked"];if(a!==o)break;d.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(d.id),(s=this.get_node(d,!0))&&s.length&&s.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}-1!==u.indexOf("down")&&c.length&&c.find(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked")}),this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy((function(e,t){var n,i,o,a=this.get_node("#"),s=this._model.data;for(n=0,i=a.children_d.length;n<i;n++)(o=s[a.children_d[n]])&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1)}),this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy((function(t,n){var i,o,a,s=n.node,r=this.get_node(s,!0),l=this.settings.checkbox.cascade,d=this.settings.checkbox.tie_selection;if(s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1),-1!==l.indexOf("down"))for(i=0,o=s.children_d.length;i<o;i++)(a=this._model.data[s.children_d[i]]).state[d?"selected":"checked"]=!1,a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1);if(-1!==l.indexOf("up"))for(i=0,o=s.parents.length;i<o;i++)(a=this._model.data[s.parents[i]]).state[d?"selected":"checked"]=!1,a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1),(a=this.get_node(s.parents[i],!0))&&a.length&&a.children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked");for(a=[],i=0,o=this._data[d?"core":"checkbox"].selected.length;i<o;i++)-1!==l.indexOf("down")&&-1!==e.inArray(this._data[d?"core":"checkbox"].selected[i],s.children_d)||-1!==l.indexOf("up")&&-1!==e.inArray(this._data[d?"core":"checkbox"].selected[i],s.parents)||a.push(this._data[d?"core":"checkbox"].selected[i]);this._data[d?"core":"checkbox"].selected=e.vakata.array_unique(a),-1!==l.indexOf("down")&&r.length&&r.find(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked")}),this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy((function(e,t){for(var n,i,o,a,s=this.get_node(t.parent),r=this._model.data,l=this.settings.checkbox.tie_selection;s&&"#"!==s.id;){for(o=0,n=0,i=s.children.length;n<i;n++)o+=r[s.children[n]].state[l?"selected":"checked"];if(o!==i)break;s.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(s.id),(a=this.get_node(s,!0))&&a.length&&a.children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}}),this)).on("move_node.jstree",e.proxy((function(t,n){var i,o,a,s,r,l=n.is_multi,d=n.old_parent,c=this.get_node(n.parent),u=this._model.data,h=this.settings.checkbox.tie_selection;if(!l)for(i=this.get_node(d);i&&"#"!==i.id;){for(o=0,a=0,s=i.children.length;a<s;a++)o+=u[i.children[a]].state[h?"selected":"checked"];if(o!==s)break;i.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(i.id),(r=this.get_node(i,!0))&&r.length&&r.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=c;i&&"#"!==i.id;){for(o=0,a=0,s=i.children.length;a<s;a++)o+=u[i.children[a]].state[h?"selected":"checked"];if(o===s)i.state[h?"selected":"checked"]||(i.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(i.id),(r=this.get_node(i,!0))&&r.length&&r.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"));else{if(!i.state[h?"selected":"checked"])break;i.state[h?"selected":"checked"]=!1,this._data[h?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[h?"core":"checkbox"].selected,i.id),(r=this.get_node(i,!0))&&r.length&&r.children(".jstree-anchor").removeClass(h?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}}),this))},this._undetermined=function(){var t,n,i=this._model.data,o=this.settings.checkbox.tie_selection,a=this._data[o?"core":"checkbox"].selected,s=[],r=this;for(t=0,n=a.length;t<n;t++)i[a[t]]&&i[a[t]].parents&&(s=s.concat(i[a[t]].parents));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each((function(){var e,o=r.get_node(this);if(o.state.loaded)for(t=0,n=o.children_d.length;t<n;t++)!(e=i[o.children_d[t]]).state.loaded&&e.original&&e.original.state&&e.original.state.undetermined&&!0===e.original.state.undetermined&&(s.push(e.id),s=s.concat(e.parents));else o.original&&o.original.state&&o.original.state.undetermined&&!0===o.original.state.undetermined&&(s.push(o.id),s=s.concat(o.parents))})),s=e.vakata.array_unique(s),s=e.vakata.array_remove_item(s,"#"),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),t=0,n=s.length;t<n;t++)i[s[t]].state[o?"selected":"checked"]||(a=this.get_node(s[t],!0))&&a.length&&a.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")},this.redraw_node=function(t,i,o){if(t=n.redraw_node.call(this,t,i,o)){var a,s,r=null;for(a=0,s=t.childNodes.length;a<s;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){r=t.childNodes[a];break}r&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(r.className+=" jstree-checked"),r.insertBefore(h.cloneNode(!1),r.childNodes[0]))}return o||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,i,o=this.settings.checkbox.cascade,a=this.settings.checkbox.tie_selection,s=this._data[a?"core":"checkbox"].selected,r=this._model.data;if(!t||!0===t.state[a?"selected":"checked"]||-1===o.indexOf("undetermined")||-1===o.indexOf("down")&&-1===o.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(n=0,i=t.children_d.length;n<i;n++)if(-1!==e.inArray(t.children_d[n],s)||!r[t.children_d[n]].state.loaded&&r[t.children_d[n]].original.state.undetermined)return!0;return!1},this.activate_node=function(t,i){if(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(i.target).hasClass("jstree-checkbox"))return n.activate_node.call(this,t,i);this.is_checked(t)?this.uncheck_node(t,i):this.check_node(t,i),this.trigger("activate_node",{node:this.get_node(t)})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var i,o,a;if(e.isArray(t)){for(o=0,a=(t=t.slice()).length;o<a;o++)this.check_node(t[o],n);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;i=this.get_node(t,!0),t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var i,o,a;if(e.isArray(t)){for(i=0,o=(t=t.slice()).length;i<o;i++)this.uncheck_node(t[i],n);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;a=this.get_node(t,!0),t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),a.length&&a.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e,t;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data["#"].children_d.concat(),e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):!(!(e=this.get_node(e))||"#"===e.id)&&e.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy((function(e){return this.get_node(e)}),this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,i,o,a,s=this.get_checked(!0),r={};for(n=0,i=s.length;n<i;n++)r[s[n].id]=s[n];for(n=0,i=s.length;n<i;n++)for(o=0,a=s[n].children_d.length;o<a;o++)r[s[n].children_d[o]]&&delete r[s[n].children_d[o]];for(n in s=[],r)r.hasOwnProperty(n)&&s.push(n);return t?e.map(s,e.proxy((function(e){return this.get_node(e)}),this)):s},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,i,o=this.get_checked(!0),a=[];for(n=0,i=o.length;n<i;n++)o[n].children.length||a.push(o[n].id);return t?e.map(a,e.proxy((function(e){return this.get_node(e)}),this)):a}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.create_node(i,{},"last",(function(e){setTimeout((function(){n.edit(e)}),0)}))}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.edit(i)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.delete_node(n.get_selected()):n.delete_node(i)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.cut(n.get_selected()):n.cut(i)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.copy(n.get_selected()):n.copy(i)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.paste(i)}}}}}}},e.jstree.plugins.contextmenu=function(n,i){this.bind=function(){i.bind.call(this);var t=0;this.element.on("contextmenu.jstree",".jstree-anchor",e.proxy((function(e){e.preventDefault(),t=e.ctrlKey?e.timeStamp:0,this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e)}),this)).on("click.jstree",".jstree-anchor",e.proxy((function(n){this._data.contextmenu.visible&&(!t||n.timeStamp-t>250)&&e.vakata.context.hide()}),this)),e(document).on("context_hide.vakata",e.proxy((function(){this._data.contextmenu.visible=!1}),this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),i.teardown.call(this)},this.show_contextmenu=function(n,i,o,a){if(!(n=this.get_node(n))||"#"===n.id)return!1;var s=this.settings.contextmenu,r=this.get_node(n,!0).children(".jstree-anchor"),l=!1,d=!1;(s.show_at_node||i===t||o===t)&&(l=r.offset(),i=l.left,o=l.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,a),d=s.items,e.isFunction(d)&&(d=d.call(this,n,e.proxy((function(e){this._show_contextmenu(n,i,o,e)}),this))),e.isPlainObject(d)&&this._show_contextmenu(n,i,o,d)},this._show_contextmenu=function(t,n,i,o){var a=this.get_node(t,!0).children(".jstree-anchor");e(document).one("context_show.vakata",e.proxy((function(t,n){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(i)}),this)),this._data.contextmenu.visible=!0,e.vakata.context.show(a,{x:n,y:i},o),this.trigger("show_contextmenu",{node:t,x:n,y:i})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(document).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return!(!(t=n.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,i){if(!t)return!1;i||(n.html="",n.items=[]);var o,a="",s=!1;return i&&(a+="<ul>"),e.each(t,(function(t,i){if(!i)return!0;n.items.push(i),!s&&i.separator_before&&(a+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),s=!1,a+="<li class='"+(i._class||"")+(!0===i._disabled||e.isFunction(i._disabled)&&i._disabled({item:i,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(i.shortcut?" data-shortcut='"+i.shortcut+"' ":"")+">",a+="<a href='#' rel='"+(n.items.length-1)+"'>",e.vakata.context.settings.icons&&(a+="<i ",i.icon&&(-1!==i.icon.indexOf("/")||-1!==i.icon.indexOf(".")?a+=" style='background:url(\""+i.icon+"\") center center no-repeat' ":a+=" class='"+i.icon+"' "),a+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),a+=(e.isFunction(i.label)?i.label({item:t,reference:n.reference,element:n.element}):i.label)+(i.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+i.shortcut+'">'+(i.shortcut_label||"")+"</span>":"")+"</a>",i.submenu&&(o=e.vakata.context._parse(i.submenu,!0))&&(a+=o),a+="</li>",i.separator_after&&(a+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",s=!0)})),a=a.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),i&&(a+="</ul>"),i||(n.html=a,e.vakata.context._trigger("parse")),a.length>10&&a},_show_submenu:function(n){if((n=e(n)).length&&n.children("ul").length){var i=n.children("ul"),o=n.offset().left+n.outerWidth(),a=n.offset().top,s=i.width(),r=i.height(),l=e(window).width()+e(window).scrollLeft(),d=e(window).height()+e(window).scrollTop();t?n[o-(s+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[o+s+10>l?"addClass":"removeClass"]("vakata-context-right"),a+r+10>d&&i.css("bottom","-1px"),i.show()}},show:function(i,o,a){var s,r,l,d,c,u,h,p,f=!0;switch(n.element&&n.element.length&&n.element.width(""),f){case!o&&!i:return!1;case!!o&&!!i:n.reference=i,n.position_x=o.x,n.position_y=o.y;break;case!o&&!!i:n.reference=i,s=i.offset(),n.position_x=s.left+i.outerHeight(),n.position_y=s.top;break;case!!o&&!i:n.position_x=o.x,n.position_y=o.y}i&&!a&&e(i).data("vakata_contextmenu")&&(a=e(i).data("vakata_contextmenu")),e.vakata.context._parse(a)&&n.element.html(n.html),n.items.length&&(r=n.element,l=n.position_x,d=n.position_y,c=r.width(),u=r.height(),h=e(window).width()+e(window).scrollLeft(),p=e(window).height()+e(window).scrollTop(),t&&(l-=r.outerWidth())<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20),l+c+20>h&&(l=h-(c+20)),d+u+20>p&&(d=p-(u+20)),n.element.css({left:l,top:d}).show().find("a:eq(0)").focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e((function(){t="rtl"===e("body").css("direction");var i=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",(function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(i&&clearTimeout(i),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))})).on("mouseleave","li",(function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")})).on("mouseleave",(function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(i=setTimeout((function(){e.vakata.context.hide()}),e.vakata.context.settings.hide_onmouseleave))})).on("click","a",(function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()})).on("keydown","a",(function(t){var i=null;switch(t.which){case 13:case 32:t.type="mouseup",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&((i=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(i=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&((i=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(i=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}})).on("keydown",(function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.mouseup()})).appendTo("body"),e(document).on("mousedown",(function(t){n.is_visible&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()})).on("context_show.vakata",(function(e,i){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()}))}))}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0},e.jstree.plugins.dnd=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",e.proxy((function(t){var n=this.get_node(t.target),i=this.is_selected(n)?this.get_selected().length:1;if(n&&n.id&&"#"!==n.id&&(1===t.which||"touchstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,i>1?this.get_selected(!0):[n])))return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,{jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:i>1?this.get_selected():[n.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+(i>1?i+" "+this.get_string("nodes"):this.get_text(t.currentTarget,!0))+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}),this))}},e((function(){var t=!1,n=!1,i=!1,o=e('<div id="jstree-marker">&#160;</div>').hide().appendTo("body");e(document).bind("dnd_start.vakata",(function(e,n){t=!1})).bind("dnd_move.vakata",(function(a,s){if(i&&clearTimeout(i),s&&s.data&&s.data.jstree&&(!s.event.target.id||"jstree-marker"!==s.event.target.id)){var r,l,d,c,u,h,p,f,m,_,v,g,y,b,w=e.jstree.reference(s.event.target),k=!1,C=!1,x=!1;if(w&&w._data&&w._data.dnd)if(o.attr("class","jstree-"+w.get_theme()+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")),s.helper.children().attr("class","jstree-"+w.get_theme()+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy:eq(0)")[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"show":"hide"](),s.event.target!==w.element[0]&&s.event.target!==w.get_container_ul()[0]||0!==w.get_container_ul().children().length){if((k=e(s.event.target).closest(".jstree-anchor"))&&k.length&&k.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(C=k.offset(),x=s.event.pageY-C.top,d=k.height(),h=x<d/3?["b","i","a"]:x>d-d/3?["a","i","b"]:x>d/2?["i","a","b"]:["i","b","a"],e.each(h,(function(a,x){switch(x){case"b":r=C.left-6,l=C.top,c=w.get_parent(k),u=k.parent().index();break;case"i":y=w.settings.dnd.inside_pos,b=w.get_node(k.parent()),r=C.left-2,l=C.top+d/2+1,c=b.id,u="first"===y?0:"last"===y?b.children.length:Math.min(y,b.children.length);break;case"a":r=C.left-6,l=C.top+d,c=w.get_parent(k),u=k.parent().index()+1}for(p=!0,f=0,m=s.data.nodes.length;f<m;f++)if(_=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",v=u,"move_node"===_&&"a"===x&&s.data.origin&&s.data.origin===w&&c===w.get_parent(s.data.nodes[f])&&(g=w.get_node(c),v>e.inArray(s.data.nodes[f],g.children)&&(v-=1)),!(p=p&&(w&&w.settings&&w.settings.dnd&&!1===w.settings.dnd.check_while_dragging||w.check(_,s.data.origin&&s.data.origin!==w?s.data.origin.get_node(s.data.nodes[f]):s.data.nodes[f],c,v,{dnd:!0,ref:w.get_node(k.parent()),pos:x,is_multi:s.data.origin&&s.data.origin!==w,is_foreign:!s.data.origin})))){w&&w.last_error&&(n=w.last_error());break}if(p)return"i"===x&&k.parent().is(".jstree-closed")&&w.settings.dnd.open_timeout&&(i=setTimeout((S=w,M=k,function(){S.open_node(M)}),w.settings.dnd.open_timeout)),t={ins:w,par:c,pos:"i"!==x||"last"!==y||0!==u||w.is_loaded(b)?u:"last"},o.css({left:r+"px",top:l+"px"}).show(),s.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok"),n={},h=!0,!1;var S,M})),!0===h))return}else{for(p=!0,f=0,m=s.data.nodes.length;f<m&&(p=p&&w.check(s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",s.data.origin&&s.data.origin!==w?s.data.origin.get_node(s.data.nodes[f]):s.data.nodes[f],"#","last",{dnd:!0,ref:w.get_node("#"),pos:"i",is_multi:s.data.origin&&s.data.origin!==w,is_foreign:!s.data.origin}));f++);if(p)return t={ins:w,par:"#",pos:"last"},o.hide(),void s.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok")}t=!1,s.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),o.hide()}})).bind("dnd_scroll.vakata",(function(e,n){n&&n.data&&n.data.jstree&&(o.hide(),t=!1,n.helper.find(".jstree-icon:eq(0)").removeClass("jstree-ok").addClass("jstree-er"))})).bind("dnd_stop.vakata",(function(a,s){if(i&&clearTimeout(i),s&&s.data&&s.data.jstree){o.hide();var r,l,d=[];if(t){for(r=0,l=s.data.nodes.length;r<l;r++)d[r]=s.data.origin?s.data.origin.get_node(s.data.nodes[r]):s.data.nodes[r],s.data.origin&&(d[r].instance=s.data.origin);t.ins[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node"](d,t.par,t.pos)}else(r=e(s.event.target).closest(".jstree")).length&&n&&n.error&&"check"===n.error&&(r=r.jstree(!0))&&r.settings.core.error.call(this,n)}})).bind("keyup keydown",(function(t,n){(n=e.vakata.dnd._get())&&n.data&&n.data.jstree&&n.helper.find(".jstree-copy:eq(0)")[n.data.origin&&(n.data.origin.settings.dnd.always_copy||n.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"]()}))})),function(e){var t={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(t,n){var i=e.vakata.dnd._get();i.event=n,e(document).triggerHandler("dnd_"+t+".vakata",i)},_get:function(){return{data:t.data,element:t.element,helper:t.helper}},_clean:function(){t.helper&&t.helper.remove(),t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1),t={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(document).off("mousemove touchmove",e.vakata.dnd.drag),e(document).off("mouseup touchend",e.vakata.dnd.stop)},_scroll:function(n){if(!t.scroll_e||!t.scroll_l&&!t.scroll_t)return t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1),!1;if(!t.scroll_i)return t.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===n)return!1;var i=t.scroll_e.scrollTop(),o=t.scroll_e.scrollLeft();t.scroll_e.scrollTop(i+t.scroll_t*e.vakata.dnd.settings.scroll_speed),t.scroll_e.scrollLeft(o+t.scroll_l*e.vakata.dnd.settings.scroll_speed),i===t.scroll_e.scrollTop()&&o===t.scroll_e.scrollLeft()||e.vakata.dnd._trigger("scroll",t.scroll_e)},start:function(n,i,o){"touchstart"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),t.is_drag&&e.vakata.dnd.stop({});try{n.currentTarget.unselectable="on",n.currentTarget.onselectstart=function(){return!1},n.currentTarget.style&&(n.currentTarget.style.MozUserSelect="none")}catch(e){}return t.init_x=n.pageX,t.init_y=n.pageY,t.data=i,t.is_down=!0,t.element=n.currentTarget,t.target=n.target,t.is_touch="touchstart"===n.type,!1!==o&&(t.helper=e("<div id='vakata-dnd'></div>").html(o).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(document).bind("mousemove touchmove",e.vakata.dnd.drag),e(document).bind("mouseup touchend",e.vakata.dnd.stop),!1},drag:function(n){if("touchmove"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),t.is_down){if(!t.is_drag){if(!(Math.abs(n.pageX-t.init_x)>(t.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(n.pageY-t.init_y)>(t.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;t.helper&&(t.helper.appendTo("body"),t.helper_w=t.helper.outerWidth()),t.is_drag=!0,e.vakata.dnd._trigger("start",n)}var i=!1,o=!1,a=!1,s=!1,r=!1,l=!1,d=!1,c=!1,u=!1,h=!1;return t.scroll_t=0,t.scroll_l=0,t.scroll_e=!1,e(e(n.target).parentsUntil("body").addBack().get().reverse()).filter((function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)})).each((function(){var i=e(this),o=i.offset();if(this.scrollHeight>this.offsetHeight&&(o.top+i.height()-n.pageY<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),n.pageY-o.top<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(o.left+i.width()-n.pageX<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),n.pageX-o.left<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1)),t.scroll_t||t.scroll_l)return t.scroll_e=e(this),!1})),t.scroll_e||(i=e(document),o=e(window),a=i.height(),s=o.height(),r=i.width(),l=o.width(),d=i.scrollTop(),c=i.scrollLeft(),a>s&&n.pageY-d<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1),a>s&&s-(n.pageY-d)<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),r>l&&n.pageX-c<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1),r>l&&l-(n.pageX-c)<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),(t.scroll_t||t.scroll_l)&&(t.scroll_e=i)),t.scroll_e&&e.vakata.dnd._scroll(!0),t.helper&&(u=parseInt(n.pageY+e.vakata.dnd.settings.helper_top,10),h=parseInt(n.pageX+e.vakata.dnd.settings.helper_left,10),a&&u+25>a&&(u=a-50),r&&h+t.helper_w>r&&(h=r-(t.helper_w+2)),t.helper.css({left:h+"px",top:u+"px"})),e.vakata.dnd._trigger("move",n),!1}},stop:function(n){if("touchend"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),t.is_drag)e.vakata.dnd._trigger("stop",n);else if("touchend"===n.type&&n.target===t.target){var i=setTimeout((function(){e(n.target).click()}),100);e(n.target).one("click",(function(){i&&clearTimeout(i)}))}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(t,n){this.bind=function(){n.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this.element.on("before_open.jstree",e.proxy((function(t,n){var i,o,a=this._data.search.res,s=[],r=e();if(a&&a.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(a,(function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")})).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this.settings.search.show_only_matches&&this._data.search.res.length)){for(i=0,o=a.length;i<o;i++)s=s.concat(this.get_node(a[i]).parents);r=(s=e.vakata.array_remove_item(e.vakata.array_unique(s),"#")).length?e(this.element[0].querySelectorAll("#"+e.map(s,(function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")})).join(", #"))):e(),this.element.find(".jstree-node").hide().filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last"),(r=r.add(this._data.search.dom)).parentsUntil(".jstree").addBack().show().filter(".jstree-children").each((function(){e(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))}}),this)),this.settings.search.show_only_matches&&this.element.on("search.jstree",(function(t,n){n.nodes.length&&(e(this).find(".jstree-node").hide().filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last"),n.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each((function(){e(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})))})).on("clear_search.jstree",(function(t,n){n.nodes.length&&e(this).find(".jstree-node").css("display","").filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last")}))},this.search=function(t,n){if(!1===t||""===e.trim(t.toString()))return this.clear_search();t=t.toString();var i=this.settings.search,o=!!i.ajax&&i.ajax,a=null,s=[],r=[];if(this._data.search.res.length&&this.clear_search(),!n&&!1!==o)return e.isFunction(o)?o.call(this,t,e.proxy((function(n){n&&n.d&&(n=n.d),this._load_nodes(e.isArray(n)?e.vakata.array_unique(n):[],(function(){this.search(t,!0)}),!0)}),this)):((o=e.extend({},o)).data||(o.data={}),o.data.str=t,e.ajax(o).fail(e.proxy((function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(o)},this.settings.core.error.call(this,this._data.core.last_error)}),this)).done(e.proxy((function(n){n&&n.d&&(n=n.d),this._load_nodes(e.isArray(n)?e.vakata.array_unique(n):[],(function(){this.search(t,!0)}),!0)}),this)));this._data.search.str=t,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],a=new e.vakata.search(t,!0,{caseSensitive:i.case_sensitive,fuzzy:i.fuzzy}),e.each(this._model.data,(function(e,n){n.text&&(i.search_callback&&i.search_callback.call(this,t,n)||!i.search_callback&&a.search(n.text).isMatch)&&(!i.search_leaves_only||n.state.loaded&&0===n.children.length)&&(s.push(e),r=r.concat(n.parents))})),s.length&&(r=e.vakata.array_unique(r),this._search_open(r),this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(s,(function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")})).join(", #"))),this._data.search.res=s,this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),this.trigger("search",{nodes:this._data.search.dom,str:t,res:this._data.search.res})},this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this._search_open=function(t){var n=this;e.each(t.concat([]),(function(i,o){if("#"===o)return!0;try{o=e("#"+o.replace(e.jstree.idregex,"\\$&"),n.element)}catch(e){}o&&o.length&&n.is_closed(o)&&(n._data.search.opn.push(o[0].id),n.open_node(o,(function(){n._search_open(t)}),0))}))}},function(e){e.vakata.search=function(e,t,n){!1!==(n=n||{}).fuzzy&&(n.fuzzy=!0),e=n.caseSensitive?e:e.toLowerCase();var i,o,a,s,r=n.location||0,l=n.distance||100,d=n.threshold||.6,c=e.length;return c>32&&(n.fuzzy=!1),n.fuzzy&&(i=1<<c-1,o=function(){var t={},n=0;for(n=0;n<c;n++)t[e.charAt(n)]=0;for(n=0;n<c;n++)t[e.charAt(n)]|=1<<c-n-1;return t}(),a=function(e,t){var n=e/c,i=Math.abs(r-t);return l?n+i/l:i?1:n}),s=function(t){if(t=n.caseSensitive?t:t.toLowerCase(),e===t||-1!==t.indexOf(e))return{isMatch:!0,score:0};if(!n.fuzzy)return{isMatch:!1,score:1};var s,l,u,h,p,f,m,_,v,g=t.length,y=d,b=t.indexOf(e,r),w=c+g,k=1,C=[];for(-1!==b&&(y=Math.min(a(0,b),y),-1!==(b=t.lastIndexOf(e,r+c))&&(y=Math.min(a(0,b),y))),b=-1,s=0;s<c;s++){for(u=0,h=w;u<h;)a(s,r+h)<=y?u=h:w=h,h=Math.floor((w-u)/2+u);for(w=h,f=Math.max(1,r-h+1),m=Math.min(r+h,g)+c,(_=new Array(m+2))[m+1]=(1<<s)-1,l=m;l>=f;l--)if(v=o[t.charAt(l-1)],_[l]=0===s?(_[l+1]<<1|1)&v:(_[l+1]<<1|1)&v|(p[l+1]|p[l])<<1|1|p[l+1],_[l]&i&&(k=a(s,l-1))<=y){if(y=k,b=l-1,C.push(b),!(b>r))break;f=Math.max(1,2*r-b)}if(a(s+1,r)>y)break;p=_}return{isMatch:b>=0,score:k}},!0===t?{search:s}:s(t)}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy((function(e,t){this.sort(t.parent,!0)}),this)).on("rename_node.jstree create_node.jstree",e.proxy((function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)}),this)).on("move_node.jstree copy_node.jstree",e.proxy((function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)}),this))},this.sort=function(t,n){var i,o;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(i=0,o=t.children_d.length;i<o;i++)this.sort(t.children_d[i],!1)}};var p=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy((function(){this.element.on(this.settings.state.events,e.proxy((function(){p&&clearTimeout(p),p=setTimeout(e.proxy((function(){this.save_state()}),this),100)}),this))}),this);this.element.on("ready.jstree",e.proxy((function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()}),this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.element.one("set_state.jstree",(function(n,i){i.instance.trigger("restore_state",{state:e.extend(!0,{},t)})})),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={"#":{},default:{}},e.jstree.plugins.types=function(n,i){this.init=function(e,n){var o,a;if(n&&n.types&&n.types.default)for(o in n.types)if("default"!==o&&"#"!==o&&n.types.hasOwnProperty(o))for(a in n.types.default)n.types.default.hasOwnProperty(a)&&n.types[o][a]===t&&(n.types[o][a]=n.types.default[a]);i.init.call(this,e,n),this._model.data["#"].type="#"},this.refresh=function(e,t){i.refresh.call(this,e,t),this._model.data["#"].type="#"},this.bind=function(){this.element.on("model.jstree",e.proxy((function(e,n){var i,o,a=this._model.data,s=n.nodes,r=this.settings.types,l="default";for(i=0,o=s.length;i<o;i++)l="default",a[s[i]].original&&a[s[i]].original.type&&r[a[s[i]].original.type]&&(l=a[s[i]].original.type),a[s[i]].data&&a[s[i]].data.jstree&&a[s[i]].data.jstree.type&&r[a[s[i]].data.jstree.type]&&(l=a[s[i]].data.jstree.type),a[s[i]].type=l,!0===a[s[i]].icon&&r[l].icon!==t&&(a[s[i]].icon=r[l].icon);a["#"].type="#"}),this)),i.bind.call(this)},this.get_json=function(t,n,o){var a,s,r=this._model.data,l=n?e.extend(!0,{},n,{no_id:!1}):{},d=i.get_json.call(this,t,l,o);if(!1===d)return!1;if(e.isArray(d))for(a=0,s=d.length;a<s;a++)d[a].type=d[a].id&&r[d[a].id]&&r[d[a].id].type?r[d[a].id].type:"default",n&&n.no_id&&(delete d[a].id,d[a].li_attr&&d[a].li_attr.id&&delete d[a].li_attr.id);else d.type=d.id&&r[d.id]&&r[d.id].type?r[d.id].type:"default",n&&n.no_id&&(d=this._delete_ids(d));return d},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,i=t.length;n<i;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,o,a,s,r){if(!1===i.check.call(this,n,o,a,s,r))return!1;o=o&&o.id?o:this.get_node(o),a=a&&a.id?a:this.get_node(a);var l,d,c,u,h=o&&o.id?e.jstree.reference(o.id):null;switch(h=h&&h._model&&h._model.data?h._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===e.inArray(o.id,a.children)){if((l=this.get_rules(a)).max_children!==t&&-1!==l.max_children&&l.max_children===a.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:s,obj:!(!o||!o.id)&&o.id,par:!(!a||!a.id)&&a.id})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(o.type,l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:s,obj:!(!o||!o.id)&&o.id,par:!(!a||!a.id)&&a.id})},!1;if(h&&o.children_d&&o.parents){for(d=0,c=0,u=o.children_d.length;c<u;c++)d=Math.max(d,h[o.children_d[c]].parents.length);d=d-o.parents.length+1}(d<=0||d===t)&&(d=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<d)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:s,obj:!(!o||!o.id)&&o.id,par:!(!a||!a.id)&&a.id})},!1;a=this.get_node(a.parent),l=this.get_rules(a),d++}while(a)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return!!(t=this.get_node(t))&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,i){var o,a,s,r,l;if(e.isArray(n)){for(a=0,s=(n=n.slice()).length;a<s;a++)this.set_type(n[a],i);return!0}return o=this.settings.types,n=this.get_node(n),!(!o[i]||!n)&&(r=n.type,l=this.get_icon(n),n.type=i,(!0===l||o[r]&&o[r].icon&&l===o[r].icon)&&this.set_icon(n,o[i].icon===t||o[i].icon),!0)}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,i){this.check=function(t,n,o,a,s){if(!1===i.check.call(this,t,n,o,a,s))return!1;if(n=n&&n.id?n:this.get_node(n),!(o=o&&o.id?o:this.get_node(o))||!o.children)return!0;var r,l,d="rename_node"===t?a:n.text,c=[],u=this.settings.unique.case_sensitive,h=this._model.data;for(r=0,l=o.children.length;r<l;r++)c.push(u?h[o.children[r]].text:h[o.children[r]].text.toLowerCase());switch(u||(d=d.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return(r=-1===e.inArray(d,c)||n.text&&n.text[u?"toString":"toLowerCase"]()===d)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),r;case"create_node":return(r=-1===e.inArray(d,c))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),r;case"copy_node":return(r=-1===e.inArray(d,c))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),r;case"move_node":return(r=n.parent===o.id||-1===e.inArray(d,c))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),r}return!0},this.create_node=function(n,o,a,s,r){if(!o||o.text===t){if(null===n&&(n="#"),!(n=this.get_node(n)))return i.create_node.call(this,n,o,a,s,r);if(!(a=a===t?"last":a).toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(n))return i.create_node.call(this,n,o,a,s,r);o||(o={});var l,d,c,u,h,p=this._model.data,f=this.settings.unique.case_sensitive,m=this.settings.unique.duplicate;for(d=l=this.get_string("New node"),c=[],u=0,h=n.children.length;u<h;u++)c.push(f?p[n.children[u]].text:p[n.children[u]].text.toLowerCase());for(u=1;-1!==e.inArray(f?d:d.toLowerCase(),c);)d=m.call(this,l,++u).toString();o.text=d}return i.create_node.call(this,n,o,a,s,r)}};var f=document.createElement("DIV");f.setAttribute("unselectable","on"),f.className="jstree-wholerow",f.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy((function(){this.hide_dots()}),this)).on("init.jstree loading.jstree ready.jstree",e.proxy((function(){this.get_container_ul().addClass("jstree-wholerow-ul")}),this)).on("deselect_all.jstree",e.proxy((function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")}),this)).on("changed.jstree",e.proxy((function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,i,o=!1;for(n=0,i=t.selected.length;n<i;n++)(o=this.get_node(t.selected[n],!0))&&o.length&&o.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}),this)).on("open_node.jstree",e.proxy((function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}),this)).on("hover_node.jstree dehover_node.jstree",e.proxy((function(e,t){this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")}),this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy((function(t){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n)}),this)).on("click.jstree",".jstree-wholerow",(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n).focus()})).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy((function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n).focus()}),this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy((function(e){return e.stopImmediatePropagation(),this.hover_node(e.currentTarget),!1}),this)).on("mouseleave.jstree",".jstree-node",e.proxy((function(e){this.dehover_node(e.currentTarget)}),this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,i,o){if(t=n.redraw_node.call(this,t,i,o)){var a=f.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(a.className+=" jstree-wholerow-clicked"),t.insertBefore(a,t.childNodes[0])}return t}}},void 0===(a="function"==typeof i?i.apply(t,o):i)||(e.exports=a)}()},24717:(e,t,n)=>{var i,o=n(55806);void 0===(i=o).fn.each2&&i.extend(i.fn,{each2:function(e){for(var t=i([0]),n=-1,o=this.length;++n<o&&(t.context=t[0]=this[n])&&!1!==e.call(t[0],n,t););return this}}),function(e,t){"use strict";if(window.Select2===t){var n,i,o,a,s,r,l,d,c={x:0,y:0},u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case u.SHIFT:case u.CTRL:case u.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},h={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"};r=e(document),d=1,a=function(){return d++},n=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,o,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+a()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(D(n.containerCss,this.opts.element)),this.container.addClass(D(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",w),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",w),this.results=i=this.container.find(s),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",w),this.results.on("mousemove",(function(n){var i=c;i!==t&&i.x===n.pageX&&i.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind((function(e){this._touchEvent=!0,this.highlightUnderEvent(e)}))),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(e,t){var n=b(e,(function(e){t.trigger("scroll-debounced",e)}));t.on("scroll",(function(e){m(e.target,t.get())>=0&&n(e)}))}(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&i.mousewheel((function(e,t,n,o){var a=i.scrollTop();o>0&&a-o<=0?(i.scrollTop(0),w(e)):o<0&&i.get(0).scrollHeight-i.scrollTop()+o<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),w(e))})),y(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",(function(){o.addClass("select2-focused")})),o.on("blur",(function(){o.removeClass("select2-focused")})),this.dropdown.on("mouseup",s,this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(e){e.stopPropagation()})),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var r=n.element.prop("disabled");r===t&&(r=!1),this.enable(!r);var d=n.element.prop("readonly");d===t&&(d=!1),this.readonly(d),l=l||function(){var t=e("<div class='select2-measure-scrollbar'></div>");t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&e.each((function(){this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),O.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:_(e.attr("locked"),"locked")||_(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,o,s,r,l=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(n=e.extend({},{populateResults:function(i,o,s){var r,d=this.opts.id,c=this.liveRegion;r=function(i,o,u){var h,p,f,m,_,v,g,y,b,w,k=[];for(h=0,p=(i=n.sortResults(i,o,s)).length;h<p;h+=1)m=!(_=!0===(f=i[h]).disabled)&&d(f)!==t,v=f.children&&f.children.length>0,(g=e("<li></li>")).addClass("select2-results-dept-"+u),g.addClass("select2-result"),g.addClass(m?"select2-result-selectable":"select2-result-unselectable"),_&&g.addClass("select2-disabled"),v&&g.addClass("select2-result-with-children"),g.addClass(l.opts.formatResultCssClass(f)),g.attr("role","presentation"),(y=e(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+a()),y.attr("role","option"),(w=n.formatResult(f,y,s,l.opts.escapeMarkup))!==t&&(y.html(w),g.append(y)),v&&((b=e("<ul></ul>")).addClass("select2-result-sub"),r(f.children,b,u+1),g.append(b)),g.data("select2-data",f),k.push(g[0]);o.append(k),c.text(n.formatMatches(i.length))},r(o,i,0)}},e.fn.select2.defaults,n)).id&&(s=n.id,n.id=function(e){return e[s]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(o?(n.query=this.bind((function(e){var n,o,a,s={results:[],more:!1},r=e.term;a=function(t,n){var i;t.is("option")?e.matcher(r,t.text(),t)&&n.push(l.optionToData(t)):t.is("optgroup")&&(i=l.optionToData(t),t.children().each2((function(e,t){a(t,i.children)})),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(o=this.getPlaceholderOption())&&(n=n.not(o)),n.each2((function(e,t){a(t,s.results)})),e.callback(s)})),n.id=function(e){return e.id}):"query"in n||("ajax"in n?((r=n.element.data("ajax-url"))&&r.length>0&&(n.ajax.url=r),n.query=S.call(n.element,n.ajax)):"data"in n?n.query=M(n.data):"tags"in n&&(n.query=T(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var o=[];e(v(t.val(),n.separator)).each((function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each((function(){if(_(this.id,t.id))return t=this,!1})),o.push(t)})),i(o)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,o=this;i.on("change.select2",this.bind((function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(D(this.opts.containerCssClass,this.opts.element)),k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(this.opts.dropdownCssClass,this.opts.element))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",o._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(t){e.each(t,o._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,o,a,s=this.dropdown,r=this.container.offset(),d=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),h=e(window),p=h.width(),f=h.height(),m=h.scrollLeft()+p,_=h.scrollTop()+f,v=r.top+d,g=r.left,y=v+u<=_,b=r.top-u>=h.scrollTop(),w=s.outerWidth(!1),k=g+w<=m;s.hasClass("select2-drop-above")?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(s.hide(),r=this.container.offset(),d=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),m=h.scrollLeft()+p,_=h.scrollTop()+f,v=r.top+d,k=(g=r.left)+(w=s.outerWidth(!1))<=m,s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(a=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),(w=s.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:l.width))>c?c=w:w=c,u=s.outerHeight(!1),k=g+w<=m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(v-=(t=this.body.offset()).top,g-=t.left),k||(g=r.left+this.container.outerWidth(!1)-w),o={left:g,width:c},n?(o.top=r.top-u,o.bottom="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(o.top=v,o.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),o=e.extend(o,D(this.opts.dropdownCss,this.opts.element)),s.css(o)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),r.on("mousemove.select2Event",(function(e){c.x=e.pageX,c.y=e.pageY})),!0)},opening:function(){var t,n=this.containerEventName,i="scroll."+n,o="resize."+n,a="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",(function(n){p(t);var i,o=e("#select2-drop");o.length>0&&((i=o.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),n.preventDefault(),n.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each((function(){e(this).on(o+" "+i+" "+a,(function(e){s.opened()&&s.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,o="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(n).off(i).off(o)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),r.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return D(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,o,a,s,r,l,d=this.results;(n=this.highlight())<0||(0!=n?(t=this.findHighlightableChoices().find(".select2-result-label"),o=(l=((i=e(t[n])).offset()||{}).top||0)+i.outerHeight(!0),n===t.length-1&&(r=d.find("li.select2-more-results")).length>0&&(o=r.offset().top+r.outerHeight(!0)),o>(a=d.offset().top+d.outerHeight(!0))&&d.scrollTop(d.scrollTop()+(o-a)),(s=l-d.offset().top)<0&&"none"!=i.css("display")&&d.scrollTop(d.scrollTop()+s)):d.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var o=e(n[i+=t]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,o=this.findHighlightableChoices();if(0===arguments.length)return m(o.filter(".select2-highlighted")[0],o.get());t>=o.length&&(t=o.length-1),t<0&&(t=0),this.removeHighlight(),(n=e(o[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,i=this,o=this.search.val(),a=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:a,matcher:this.opts.matcher,callback:this.bind((function(s){i.opened()&&(i.opts.populateResults.call(this,e,s.results,{term:o,page:n,context:a}),i.postprocessResults(s,!1,!1),!0===s.more?(t.detach().appendTo(e).text(D(i.opts.formatLoadMore,i.opts.element,n+1)),window.setTimeout((function(){i.loadMoreIfNeeded()}),10)):t.remove(),i.positionDropdown(),i.resultsPage=n,i.context=s.context,this.opts.element.trigger({type:"select2-loaded",items:s}))}))}))},tokenize:function(){},updateResults:function(n){var i,o,a,s=this.search,r=this.results,l=this.opts,d=this,c=s.val(),u=e.data(this.container,"select2-last-term");if((!0===n||!u||!_(c,u))&&(e.data(this.container,"select2-last-term",c),!0===n||!1!==this.showSearchInput&&this.opened())){a=++this.queryCount;var h=this.getMaximumSelectionSize();if(!(h>=1&&(i=this.data(),e.isArray(i)&&i.length>=h&&L(l.formatSelectionTooBig,"formatSelectionTooBig"))))return s.val().length<l.minimumInputLength?(L(l.formatInputTooShort,"formatInputTooShort")?f("<li class='select2-no-results'>"+D(l.formatInputTooShort,l.element,s.val(),l.minimumInputLength)+"</li>"):f(""),void(n&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&s.val().length>l.maximumInputLength?L(l.formatInputTooLong,"formatInputTooLong")?f("<li class='select2-no-results'>"+D(l.formatInputTooLong,l.element,s.val(),l.maximumInputLength)+"</li>"):f(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&f("<li class='select2-searching'>"+D(l.formatSearching,l.element)+"</li>"),s.addClass("select2-active"),this.removeHighlight(),(o=this.tokenize())!=t&&null!=o&&s.val(o),this.resultsPage=1,l.query({element:l.element,term:s.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(i){var o;a==this.queryCount&&(this.opened()?i.hasError!==t&&L(l.formatAjaxError,"formatAjaxError")?f("<li class='select2-ajax-error'>"+D(l.formatAjaxError,l.element,i.jqXHR,i.textStatus,i.errorThrown)+"</li>"):(this.context=i.context===t?null:i.context,this.opts.createSearchChoice&&""!==s.val()&&(o=this.opts.createSearchChoice.call(d,s.val(),i.results))!==t&&null!==o&&d.id(o)!==t&&null!==d.id(o)&&0===e(i.results).filter((function(){return _(d.id(this),d.id(o))})).length&&this.opts.createSearchChoicePosition(i.results,o),0===i.results.length&&L(l.formatNoMatches,"formatNoMatches")?f("<li class='select2-no-results'>"+D(l.formatNoMatches,l.element,s.val())+"</li>"):(r.empty(),d.opts.populateResults.call(this,r,i.results,{term:s.val(),page:this.resultsPage,context:null}),!0===i.more&&L(l.formatLoadMore,"formatLoadMore")&&(r.append("<li class='select2-more-results'>"+l.escapeMarkup(D(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){d.loadMoreIfNeeded()}),10)),this.postprocessResults(i,n),p(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))}))})));f("<li class='select2-selection-limit'>"+D(l.formatSelectionTooBig,l.element,h)+"</li>")}function p(){s.removeClass("select2-active"),d.positionDropdown(),r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.liveRegion.text(r.text()):d.liveRegion.text(d.opts.formatMatches(r.find(".select2-result-selectable").length))}function f(e){r.html(e),p()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var t,n=e[0],i=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))}),0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,i,o,a,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(a=0,s=(i=n.split(";")).length;a<s;a+=1)if(null!==(o=i[a].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&o.length>=1)return o[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),i=A(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,o;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((i=n.createTextRange()).collapse(!1),i.select()):n.setSelectionRange&&(o=this.search.val().length,n.setSelectionRange(o,o))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),O.call(this,"selection","focusser")},initContainer:function(){var t,n,i=this.container,o=this.dropdown,s=a();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==u.PAGE_UP&&e.which!==u.PAGE_DOWN)switch(e.which){case u.UP:case u.DOWN:return this.moveHighlight(e.which===u.UP?-1:1),void w(e);case u.ENTER:return this.selectHighlighted(),void w(e);case u.TAB:return void this.selectHighlighted({noFocus:!0});case u.ESC:return this.cancel(e),void w(e)}else w(e)}))),this.search.on("blur",this.bind((function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==u.TAB&&!u.isControl(e)&&!u.isFunctionKey(e)&&e.which!==u.ESC){if(!1!==this.opts.openOnEnter||e.which!==u.ENTER){if(e.which==u.DOWN||e.which==u.UP||e.which==u.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void w(e)}return e.which==u.DELETE||e.which==u.BACKSPACE?(this.opts.allowClear&&this.clear(),void w(e)):void 0}w(e)}}))),y(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown touchstart","abbr",this.bind((function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection.focus())}))),t.on("mousedown touchstart",this.bind((function(n){p(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),w(n)}))),o.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),t.on("focus",this.bind((function(e){w(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))}))}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var o=n.val(),a=null;t.query({matcher:function(e,n,i){var s=_(o,t.id(i));return s&&(a=i),s},callback:e.isFunction(i)?function(){i(a)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,o=this;if(this.findHighlightableChoices().each2((function(e,t){if(_(o.id(t.data("select2-data")),o.opts.element.val()))return i=e,!1})),!1!==n&&(!0===t&&i>=0?this.highlight(i):this.highlight(0)),!0===t){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(E(e.results)>=a)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),_(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),o.empty(),null!==e&&(n=this.opts.formatSelection(e,o,this.opts.escapeMarkup)),n!==t&&o.append(n),(i=this.opts.formatSelectionCssClass(e,o))!==t&&o.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,o=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return i=o.optionToData(t),!1})),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:a});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){o.opts.element.val(e?o.id(e):""),o.updateSelection(e),o.setPlaceholder(),n&&o.triggerChange({added:e,removed:a})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==t&&(n=null),n;arguments.length>1&&(i=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)}}),o=A(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){i.push(n.optionToData(t))})),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var o=v(n.val(),t.separator),a=[];t.query({matcher:function(n,i,s){var r=e.grep(o,(function(e){return _(e,t.id(s))})).length;return r&&a.push(s),r},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<o.length;n++)for(var s=o[n],r=0;r<a.length;r++){var l=a[r];if(_(s,t.id(l))){e.push(l),a.splice(r,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),O.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(t){i.search[0].focus(),i.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+a()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(n){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),o=i.prev(".select2-search-choice:not(.select2-locked)"),a=i.next(".select2-search-choice:not(.select2-locked)"),s=function(t){var n=0,i=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var o=document.selection.createRange();i=document.selection.createRange().text.length,o.moveStart("character",-t.value.length),n=o.text.length-i}return{offset:n,length:i}}(this.search);if(i.length&&(n.which==u.LEFT||n.which==u.RIGHT||n.which==u.BACKSPACE||n.which==u.DELETE||n.which==u.ENTER)){var r=i;return n.which==u.LEFT&&o.length?r=o:n.which==u.RIGHT?r=a.length?a:null:n.which===u.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),r=o.length?o:a):n.which==u.DELETE?this.unselect(i.first())&&(this.search.width(10),r=a.length?a:null):n.which==u.ENTER&&(r=null),this.selectChoice(r),w(n),void(r&&r.length||this.open())}if((n.which===u.BACKSPACE&&1==this.keydowns||n.which==u.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void w(n);if(this.selectChoice(null),this.opened())switch(n.which){case u.UP:case u.DOWN:return this.moveHighlight(n.which===u.UP?-1:1),void w(n);case u.ENTER:return this.selectHighlighted(),void w(n);case u.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case u.ESC:return this.cancel(n),void w(n)}if(n.which!==u.TAB&&!u.isControl(n)&&!u.isFunctionKey(n)&&n.which!==u.BACKSPACE&&n.which!==u.ESC){if(n.which===u.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==u.PAGE_UP&&n.which!==u.PAGE_DOWN||w(n),n.which===u.ENTER&&w(n)}}}))),this.search.on("keyup",this.bind((function(e){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],i=[],o=this;e(t).each((function(){m(o.id(this),n)<0&&(n.push(o.id(this)),i.push(this))})),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each((function(){o.addSelectedChoice(this)})),o.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.moveHighlight(1),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.clearSearch(),this.updateResults(),this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,o,a=!n.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=a?s:r,d=this.id(n),c=this.getVal();(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),(o=this.opts.formatSelectionCssClass(n,l.find("div")))!=t&&l.addClass(o),a&&l.find(".select2-search-choice-close").on("mousedown",w).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),w(t),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),c.push(d),this.setVal(c)},unselect:function(t){var n,i,o=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var a=e.Event("select2-removing");if(a.val=this.id(n),a.choice=n,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;(i=m(this.id(n),o))>=0;)o.splice(i,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),s=this;o.each2((function(e,t){m(s.id(t.data("select2-data")),i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),a.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&s.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&L(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+D(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-g(this.search)},resizeSearch:function(){var t,n,i,o,a=g(this.search);t=function(t){if(!s){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);(s=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e("body").append(s)}return s.text(t.val()),s.width()}(this.search)+10,n=this.search.offset().left,(o=(i=this.selection.width())-(n-this.selection.offset().left)-a)<t&&(o=i-a),o<40&&(o=i-a),o<=0&&(o=t),this.search.width(Math.floor(o))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:v(e=this.opts.element.val(),this.opts.separator)},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each((function(){m(this,n)<0&&n.push(this)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)_(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var o,a=this;if(0===arguments.length)return this.getVal();if((o=this.data()).length||(o=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var n=e.map(t,a.id);a.setVal(n),a.updateSelection(t),a.clearSearch(),i&&a.triggerChange(a.buildChangeDetails(o,a.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(n.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,n){var i,o,a=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get();o=this.data(),t||(t=[]),i=e.map(t,(function(e){return a.opts.id(e)})),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(o,this.data()))}}),e.fn.select2=function(){var n,i,o,a,s,r=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],c=["val","data"],u={search:"externalSearch"};return this.each((function(){if(0===r.length||"object"==typeof r[0])(n=0===r.length?{}:e.extend({},r[0])).element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?s=n.element.prop("multiple"):(s=n.multiple||!1,"tags"in n&&(n.multiple=s=!0)),(i=s?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof r[0])throw"Invalid arguments to select2 plugin: "+r;if(m(r[0],l)<0)throw"Unknown method: "+r[0];if(a=t,(i=e(this).data("select2"))===t)return;if("container"===(o=r[0])?a=i.container:"dropdown"===o?a=i.dropdown:(u[o]&&(o=u[o]),a=i[o].apply(i,r.slice(1))),m(r[0],d)>=0||m(r[0],c)>=0&&1==r.length)return!1}})),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var o=[];return C(e.text,n.term,o,i),o.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return f(""+t).toUpperCase().indexOf(f(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,n,i,o){var a,s,r,l,d,c=e,u=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(s=-1,r=0,l=o.tokenSeparators.length;r<l&&(d=o.tokenSeparators[r],!((s=e.indexOf(d))>=0));r++);if(s<0)break;if(a=e.substring(0,s),e=e.substring(s+d.length),a.length>0&&(a=o.createSearchChoice.call(this,a,n))!==t&&null!==a&&o.id(a)!==t&&null!==o.id(a)){for(u=!1,r=0,l=n.length;r<l;r++)if(_(o.id(a),o.id(n[r]))){u=!0;break}u||i(a)}}return c!==e?e:void 0},escapeMarkup:x,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:S,local:M,tags:T},util:{debounce:b,markMatch:C,escapeMarkup:x,stripDiacritics:f},class:{abstract:n,single:i,multi:o}}}function p(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function f(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return h[e]||e}))}function m(e,t){for(var n=0,i=t.length;n<i;n+=1)if(_(e,t[n]))return n;return-1}function _(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function v(t,n){var i,o,a;if(null===t||t.length<1)return[];for(o=0,a=(i=t.split(n)).length;o<a;o+=1)i[o]=e.trim(i[o]);return i}function g(e){return e.outerWidth(!1)-e.width()}function y(n){var i="keyup-change-value";n.on("keydown",(function(){e.data(n,i)===t&&e.data(n,i,n.val())})),n.on("keyup",(function(){var o=e.data(n,i);o!==t&&n.val()!==o&&(e.removeData(n,i),n.trigger("keyup-change"))}))}function b(e,n,i){var o;return i=i||t,function(){var t=arguments;window.clearTimeout(o),o=window.setTimeout((function(){n.apply(i,t)}),e)}}function w(e){e.preventDefault(),e.stopPropagation()}function k(t,n,i){var o,a,s=[];(o=e.trim(t.attr("class")))&&e((o=""+o).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&s.push(this)})),(o=e.trim(n.attr("class")))&&e((o=""+o).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(a=i(this))&&s.push(a)})),t.attr("class",s.join(" "))}function C(e,t,n,i){var o=f(e.toUpperCase()).indexOf(f(t.toUpperCase())),a=t.length;o<0?n.push(i(e)):(n.push(i(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(i(e.substring(o,o+a))),n.push("</span>"),n.push(i(e.substring(o+a,e.length))))}function x(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function S(n){var i,o=null,a=n.quietMillis||100,s=n.url,r=this;return function(l){window.clearTimeout(i),i=window.setTimeout((function(){var i=n.data,a=s,d=n.transport||e.fn.select2.ajaxDefaults.transport,c={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,c);i=i?i.call(r,l.term,l.page,l.context):null,a="function"==typeof a?a.call(r,l.term,l.page,l.context):a,o&&"function"==typeof o.abort&&o.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(r)):e.extend(u,n.params)),e.extend(u,{url:a,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),o=d.call(r,u)}),a)}}function M(t){var n,i,o=t,a=function(e){return""+e.text};e.isArray(o)&&(o={results:i=o}),!1===e.isFunction(o)&&(i=o,o=function(){return i});var s=o();return s.text&&(a=s.text,e.isFunction(a)||(n=s.text,a=function(e){return e[n]})),function(t){var n,i=t.term,s={results:[]};""!==i?(n=function(o,s){var r,l;if((o=o[0]).children){for(l in r={},o)o.hasOwnProperty(l)&&(r[l]=o[l]);r.children=[],e(o.children).each2((function(e,t){n(t,r.children)})),(r.children.length||t.matcher(i,a(r),o))&&s.push(r)}else t.matcher(i,a(o),o)&&s.push(o)},e(o().results).each2((function(e,t){n(t,s.results)})),t.callback(s)):t.callback(o())}}function T(n){var i=e.isFunction(n);return function(o){var a=o.term,s={results:[]},r=i?n(o):n;e.isArray(r)&&(e(r).each((function(){var e=this.text!==t,n=e?this.text:this;(""===a||o.matcher(a,n))&&s.results.push(e?this:{id:this,text:this})})),o.callback(s))}}function L(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function D(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function E(t){var n=0;return e.each(t,(function(e,t){t.children?n+=E(t.children):n++})),n}function O(){var t=this;e.each(arguments,(function(e,n){t[n].remove(),t[n]=null}))}function A(t,n){var i=function(){};return(i.prototype=new t).constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}}(o)},38900:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i={UPLOAD:"upload",QUEUED:"queued",RUNNING:"running",SETTING_METADATA:"setting_metadata",NEW:"new",EMPTY:"empty",OK:"ok",PAUSED:"paused",FAILED_METADATA:"failed_metadata",NOT_VIEWABLE:"noPermission",DISCARDED:"discarded",DEFERRED:"deferred",ERROR:"error"};i.READY_STATES=[i.OK,i.EMPTY,i.PAUSED,i.FAILED_METADATA,i.NOT_VIEWABLE,i.DEFERRED,i.DISCARDED,i.ERROR],i.NOT_READY_STATES=[i.UPLOAD,i.QUEUED,i.RUNNING,i.SETTING_METADATA,i.NEW];const o=i},37183:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(81924),o=n(72316),a=n.n(o),s=n(55806),r=n.n(s),l=n(18181);const d=a().Model.extend({defaults:{url_base:"",title_id:void 0,async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},add_filter:function(e,t,n){if(n){var i,o=this.attributes.filters[e];if(null==o)i=t;else if("string"==typeof o)if("All"==o||o==t)i=t;else{var a=[];a[0]=o,a[1]=t,i=a}else-1===(i=o).indexOf(t)&&i.push(t);this.attributes.filters[e]=i}else this.attributes.filters[e]=t},remove_filter:function(e,t){var n=this.attributes.filters[e];if(null==n)return!1;if("string"==typeof n)this.attributes.filters[e]="";else{var i=l.default.indexOf(n,t);-1!==i&&(n[i]="")}},get_url_data:function(){var e={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(e.operation=this.attributes.operation),this.attributes.item_ids&&(e.id=this.attributes.item_ids);return l.default.each(l.default.pairs(this.attributes.filters),(t=>{e[`f-${t[0]}`]=t[1]})),e},get_url:function(e){return`${this.get("url_base")}?${r().param(this.get_url_data())}&${r().param(e)}`}});var c=n(27856);const u={grid:function(e){let t;return t=e.embedded?this.grid_header(e)+this.grid_table(e):`\n                <div class="loading-elt-overlay"></div>\n                <table class="grid-table">\n                    <tr>\n                        <td width="75%">${this.grid_header(e)}</td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                    <tr>\n                        <td width="100%" id="grid-message" valign="top"></td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                </table>\n                ${this.grid_table(e)}\n            `,e.info_text&&(t+=`<br><div class="toolParamHelp" style="clear: both;">${e.info_text}</div>`),t},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(e){var t='<div class="grid-header">';if(!e.embedded){let n="";e.title_id&&(n+=` id="${e.title_id}"`),t+=`<h2${n}>${e.title}</h2>`}if(e.global_actions){t+='<ul class="manage-table-actions">';var n=e.global_actions.length>=3;n&&(t+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');for(const n of e.global_actions)t+=`<li><a class="action-button use-target" target="${n.target}" href="${n.url_args}" onclick="return false;" >${n.label}</a></li>`;n&&(t+="</div>"),t+="</ul>"}return e.insert&&(t+=e.insert),t+=this.grid_filters(e),t+="</div>"},header:function(e){var t="<tr>";e.show_item_checkboxes&&(t+="<th>",e.items.length>0&&(t+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),t+="</th>");for(const n of e.columns)n.visible&&(t+=`<th id="${n.key}-header">`,n.sortable?t+=`<a href="javascript:void(0)" class="sort-link" sort_key="${n.key}">${n.label}</a>`:t+=n.label,t+=`<span class="sort-arrow">${n.extra}</span></th>`);return t+="</tr>"},body:function(e){var t="";if(0===e.items.length){const n=e.filters,i=n["free-text-search"]||"",o=n.tags&&"All"!==n.tags?`tags:${n.tags} `:"",a=n.name&&"All"!==n.name?`name:${n.name}`:"",s=i||`${o}${a}`;t+=`<tr><td colspan="100"><em>${s?`No matching entries found for <strong>${s}</strong>`:"No items"}</em></td></tr>`}for(const d of e.items){t+="<tr ",e.current_item_id==d.id&&(t+='class="current"'),t+=">",e.show_item_checkboxes&&(t+=`<td style="width: 1.5em;"><input type="checkbox" name="id" value="${d.encode_id}" id="${d.encode_id}" class="grid-row-select-checkbox" /></td>`);for(const c of e.columns)if(c.visible){var n="";c.nowrap&&(n='style="white-space:nowrap;"');var i=d.column_config[c.label],o=i.link,a=i.value,s=i.target;"string"===r().type(a)&&(a=a.replace(/\/\//g,"/"));var l="";c.attach_popup&&(l=`grid-${d.encode_id}-popup`),t+=`<td ${n}>`,c.delayed?t+=`<div class="delayed-value-${c.key}" data-id="${d.encode_id}" data-value="${a}"><span class="fa fa-spinner fa-spin"></span></div>`:c.attach_popup&&o?t+=`<div class="btn-group">\n                                    <button class="btn btn-secondary use-target" target="${s}" href="${o}" onclick="return false;">${a}</button>\n                                    <button id="${l}" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"/>\n                                </div>`:c.attach_popup?t+=`<button id="${l}" class="btn dropdown-toggle" data-toggle="dropdown">${a}</button>`:t+=o?`<a class="use-target" target="${s}" href="${o}" onclick="return false;">${a}</a>`:`<label>${a||""}</label>`,t+="</td>"}t+="</tr>"}return t},footer:function(e){var t="";if(e.use_paging&&e.num_pages>1){var n=e.num_page_links,i=e.cur_page_num,o=e.num_pages,a=n/2,s=i-a,r=0;s<=0&&(r=a-(i-(s=1)));var l,d=a+r,c=i+d;0!==(l=c<=o?0:d-((c=o)+1-i))&&(s-=l)<1&&(s=1),t+='<tr id="page-links-row">',e.show_item_checkboxes&&(t+="<td></td>"),t+='<td colspan="100"><span id="page-link-container">Page:',s>1&&(t+='<span class="page-link-grid" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var u=s;u<c+1;u++)u==e.cur_page_num?t+=`<span class="page-link-grid inactive-link" id="page-link-${u}">${u}</span>`:t+=`<span class="page-link-grid" id="page-link-${u}"><a href="javascript:void(0);" onclick="return false;" page_num="${u}">${u}</a></span>`;c<o&&(t+=`...<span class="page-link-grid" id="page-link-${o}"><a href="javascript:void(0);" onclick="return false;" page_num="${o}">${o}</a></span>`),t+="</span>",t+='\n                    <span class="page-link-grid" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                    </td>\n                </tr>'}if(e.show_item_checkboxes){t+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items:\n            ';for(const n of e.operations)n.allow_multiple&&(t+=`<input type="button" value="${n.label}" class="operation-button action-button">&nbsp;`);t+="</td></tr>"}var h=!1;for(const t of e.operations)if(t.global_operation){h=!0;break}if(h){t+='<tr><td colspan="100">';for(const n of e.operations)n.global_operation&&(t+=`<a class="action-button" href="${n.global_operation}">${n.label}</a>`);t+="</td></tr>"}return e.legend&&(t+=`<tr><td colspan="100">${e.legend}</td></tr>`),t},message:function(e){var t=e.status;return-1!=["success","ok"].indexOf(t)&&(t="done"),`<p><div class="${t}message transient-message">${l.default.escape(e.message)}</div><div style="clear: both"></div></p>`},grid_filters:function(e){var t=e.default_filter_dict,n=e.filters,i="none";e.advanced_search&&(i="block");var o=!1;for(const l of e.columns)if("advanced"==l.filterable){var a=l.key,s=n[a],r=t[a];s&&r&&s!=r&&(i="block"),o=!0}var l="block";"block"==i&&(l="none");var d=`<div id="standard-search" style="display: ${l};"><table><tr><td style="padding: 0;"><table>`;for(const t of e.columns)"standard"==t.filterable&&(d+=this.grid_column_filter(e,t));d+="</table></td></tr><tr><td>",o&&(d+='<a href="javascript:void(0)" class="advanced-search-toggle">Advanced Search</a>'),d+="</td></tr></table></div>",d+=`<div id="advanced-search" style="display: ${i}; margin-top: 5px;"><table><tr><td style="text-align: left" colspan="100"><a href="javascript:void(0)" class="advanced-search-toggle">Close Advanced Search</a></td></tr>`;for(const t of e.columns)"advanced"==t.filterable&&(d+=this.grid_column_filter(e,t));return d+="</table></div>"},grid_column_filter:function(e,t){var n=e.filters,i=t.label,o=t.key;"advanced"==t.filterable&&(i=i.toLowerCase());var a="<tr>";if("advanced"==t.filterable&&(a+=`<td align="left" style="padding-left: 10px">${i}:</td>`),a+='<td style="padding-bottom: 1px;">',t.is_text){a+=`<form class="text-filter-form" column_key="${o}" action="${e.url}" method="get" >`;for(const t of e.columns){var s=n[t.key];s&&"All"!=s&&(t.is_text&&(s=JSON.stringify(s)),a+=`<input type="hidden" id="${t.key}" name="f-${t.key}" value="${s}"/>`)}a+=`<span id="${o}-filtering-criteria">`;var l=n[o];if(l){var d=r().type(l);if("string"==d&&"All"!=l&&(a+=this.filter_element(o,l)),"array"==d)for(const e in l){l.slice(e),a+=this.filter_element(o,l[e])}}a+="</span>";var c="",u=20;"standard"==t.filterable&&((c=t.label.toLowerCase()).length<20&&(u=c.length),u+=4),a+=`\n                <span class="search-box">\n                    <input class="search-box-input" id="input-${o}-filter" name="f-${o}" type="text" placeholder="${c}" size="${u}"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>`}else{a+=`<span id="${o}-filtering-criteria">`;var h=!1;for(var p in e.categorical_filters[o]){var f=e.categorical_filters[o][p],m="",_="";for(var v in f)m=v,_=f[v];h&&(a+=" | "),h=!0;var g=n[o];g&&f[o]&&g==_?a+=`<span class="categorical-filter ${o}-filter current-filter">${p}</span>`:a+=`<span class="categorical-filter ${o}-filter"><a href="javascript:void(0);" filter_key="${m}" filter_val="${_}">${p}</a></span>`}a+="</span>"}return a+="</td></tr>"},filter_element:function(e,t){return`<span class="text-filter-val">${t=(0,c.sanitize)(t)}<a href="javascript:void(0);" filter_key="${e}" filter_val="${t}"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>`}};var h=n(78724),p=n(20050),f=n(31304),m=n.n(f),_=n(79446),v=n(42773),g=n(39953);r().ajaxSettings.traditional=!0;const y=a().View.extend({grid:null,initialize:function(e){this.grid=new d,this.title=e.title,this.active_tab=e.active_tab;var t=this;if(g.Z.watch((e=>e.gridSearch.searchTags),(e=>{const n=Array.from(e);t.grid.add_filter("tags",n,!1),t.openAdvancedSearch(),t.render_filter_button("tags",n),t.go_page_one(),t.execute()})),e.url_base&&!e.items){_.Z.markViewAsLoading(this);var n=e.url_data||{};l.default.each(e.filters,((e,t)=>{n[`f-${t}`]=e})),r().ajax({url:`${e.url_base}?${r().param(n)}`,success:function(n){n.embedded=e.embedded,n.filters=e.filters||{},t.init_grid(n)}})}else this.setElement("<div>"),this.init_grid(e);e.use_panels&&r()("#center").css({padding:"10px",overflow:"auto"})},openAdvancedSearch:function(){r()("#advanced-search").is(":visible")||(r()("#standard-search").slideToggle("fast"),r()("#advanced-search").slideToggle("fast"))},handle_refresh:function(e){if(e&&r().inArray("history",e)>-1){const e=(0,i.Bz)();e&&e.currHistoryPanel&&e.currHistoryPanel.loadCurrentHistory()}},init_grid:function(e){this.grid.set(e);var t=this.grid.attributes;this.allow_title_display&&t.title&&v.ZP.setWindowTitle(t.title),this.handle_refresh(t.refresh_frames);var n=this.grid.get("url_base");if(n=n.replace(/^.*\/\/[^/]+/,""),this.grid.set("url_base",n),this.$el.html(u.grid(t)),this.$el.addClass(this.getRootClassName(e)),this.$el.find("#grid-table-header").html(u.header(t)),this.$el.find("#grid-table-body").html(u.body(t)),this.$el.find("#grid-table-footer").html(u.footer(t)),t.message){this.$el.find("#grid-message").html(u.message(t));var i=this;t.use_hide_message&&window.setTimeout((()=>{i.$el.find("#grid-message").html("")}),5e3)}this.init_grid_elements(),this.init_grid_controls(),(0,p.L)()},init_grid_controls:function(){var e=this;this.$el.find(".operation-button").each((function(){r()(this).off(),r()(this).click((function(){return e.submit_operation(this),!1}))})),this.$el.find("input[type=text]").each((function(){r()(this).off(),r()(this).click((function(){r()(this).select()})).keyup((function(){r()(this).css("font-style","normal")}))})),this.$el.find(".sort-link").each((function(){r()(this).off(),r()(this).click((function(){return e.set_sort_condition(r()(this).attr("sort_key")),!1}))})),this.$el.find(".text-filter-form").each((function(){r()(this).off(),r()(this).submit((function(){var t=r()(this).attr("column_key"),n=r()(`#input-${t}-filter`),i=n.val();return n.val(""),e.add_filter_condition(t,i),!1}))})),this.$el.find(".text-filter-val > a").each((function(){r()(this).off(),r()(this).click((function(){return r()(this).parent().remove(),e.remove_filter_condition(r()(this).attr("filter_key"),r()(this).attr("filter_val")),!1}))})),this.$el.find(".categorical-filter > a").each((function(){r()(this).off(),r()(this).click((function(){return e.set_categorical_filter(r()(this).attr("filter_key"),r()(this).attr("filter_val")),!1}))})),this.$el.find(".advanced-search-toggle").each((function(){r()(this).off(),r()(this).click((()=>(e.$el.find("#standard-search").slideToggle("fast"),e.$el.find("#advanced-search").slideToggle("fast"),!1)))})),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",(()=>{e.check_all_items()}))},init_grid_elements:function(){this.$el.find(".grid").each((function(){var e=r()(this).find("input.grid-row-select-checkbox"),t=r()(this).find("span.grid-selected-count"),n=()=>{t.text(r()(e).filter(":checked").length)};r()(e).each((function(){r()(this).change(n)})),n()})),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var e=this.grid.attributes,t=this;this.$el.find(".page-link-grid > a").each((function(){r()(this).click((function(){return t.set_page(r()(this).attr("page_num")),!1}))})),this.$el.find(".use-target").each((function(){r()(this).click((function(){return t.execute({href:r()(this).attr("href"),target:r()(this).attr("target")}),!1}))})),0!==e.items.length&&l.default.each(e.items,((n,i)=>{var o=t.$(`#grid-${n.encode_id}-popup`).off(),a=new h.Z(o);l.default.each(e.operations,(e=>{t.add_operation(a,e,n)}))}))},add_operation:function(e,t,n){var i=this,o=n.operation_config[t.label];o.allowed&&t.allow_popup&&e.addItem({html:t.label,href:o.url_args,target:o.target,confirmation_text:t.confirm,func:function(e){e.preventDefault();var o=r()(e.target).html();t.onclick?t.onclick(n.encode_id):i.execute(this.findItemByHtml(o))}})},add_filter_condition:function(e,t){if(""===t)return!1;this.grid.add_filter(e,t,!0),this.render_filter_button(e,t),this.go_page_one(),this.execute()},render_filter_button:function(e,t){var n=r()(u.filter_element(e,t)),i=this;n.click((function(){r()(this).remove(),i.remove_filter_condition(e,t)})),this.$el.find(`#${e}-filtering-criteria`).append(n)},remove_filter_condition:function(e,t){this.grid.remove_filter(e,t),"tags"==e&&g.Z.dispatch("removeSearchTag",{text:t}),this.go_page_one(),this.execute()},set_sort_condition:function(e){var t=this.grid.get("sort_key"),n=e;-1!==t.indexOf(e)&&"-"!==t.substring(0,1)&&(n=`-${e}`),this.$el.find(".sort-arrow").remove();var i="-"==n.substring(0,1)?"&uarr;":"&darr;",o=r()(`<span>${i}</span>`).addClass("sort-arrow");this.$el.find(`#${e}-header`).append(o),this.grid.set("sort_key",n),this.go_page_one(),this.execute()},set_categorical_filter:function(e,t){var n=this.grid.get("categorical_filters")[e],i=this.grid.get("filters")[e],o=this;this.$el.find(`.${e}-filter`).each((function(){var a=r().trim(r()(this).text()),s=n[a][e];if(s==t)r()(this).empty(),r()(this).addClass("current-filter"),r()(this).append(a);else if(s==i){r()(this).empty();var l=r()(`<a href="javascript:void(0)" role="button">${a}</a>`);l.click((()=>{o.set_categorical_filter(e,s)})),r()(this).removeClass("current-filter"),r()(this).append(l)}})),this.grid.add_filter(e,t),this.go_page_one(),this.execute()},set_page:function(e){var t=this;this.$el.find(".page-link").each((function(){var n,i=r()(this).attr("id"),o=parseInt(i.split("-")[2],10),a=t.grid.get("cur_page");if(o===e)n=r()(this).children().text(),r()(this).empty(),r()(this).addClass("inactive-link"),r()(this).text(n);else if(o===a){n=r()(this).text(),r()(this).empty(),r()(this).removeClass("inactive-link");var s=r()(`<a href="javascript:void(0)" role="button">${n}</a>`);s.click((()=>{t.set_page(o)})),r()(this).append(s)}})),"all"===e?this.grid.set("cur_page",e):this.grid.set("cur_page",parseInt(e,10)),this.execute()},submit_operation:function(e,t){var n=r()(e).val();if(this.$el.find('input[name="id"]:checked').length<1)return!1;var i=l.default.findWhere(this.grid.attributes.operations,{label:n});i&&!t&&(t=i.confirm||"");var o=[];this.$el.find("input[name=id]:checked").each((function(){o.push(r()(this).val())}));var a={operation:n,id:o,confirmation_text:t};return"top"!=i.target&&"center"!=i.target||(a=l.default.extend(a,{href:i.href,target:i.target})),this.execute(a),!0},check_all_items:function(){var e=this.$(".grid-row-select-checkbox"),t=this.$("#check_all").prop("checked");l.default.each(e,(e=>{r()(e).prop("checked",t)})),this.init_grid_elements()},go_page_one:function(){var e=this.grid.get("cur_page");null!=e&&"all"!==e&&this.grid.set("cur_page",1)},execute:function(e){var t=null,n=null,i=null,o=null,a=null;if(e&&(n=e.href,i=e.operation,t=e.id,o=e.confirmation_text,a=e.target,void 0!==n&&-1!=n.indexOf("operation="))){var s=n.split("?");if(s.length>1)for(var l=s[1].split("&"),d=0;d<l.length;d++)-1!=l[d].indexOf("operation")?i=(i=l[d].split("=")[1]).replace(/\+/g," "):-1!=l[d].indexOf("id")&&(t=l[d].split("=")[1])}return i&&t?(o&&""!==o&&"None"!=o&&"null"!=o&&!window.confirm(o)||(i=i.toLowerCase(),this.grid.set({operation:i,item_ids:t}),"top"==a?window.top.location=`${n}?${r().param(this.grid.get_url_data())}`:"center"==a?r()("#galaxy_main").attr("src",`${n}?${r().param(this.grid.get_url_data())}`):this.update_grid()),!1):n?(this.go_to(a,n),!1):(this.update_grid(),!1)},go_to:function(e,t){var n=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",n),t||(t=`${this.grid.get("url_base")}?${r().param(this.grid.get_url_data())}`),this.grid.set({operation:void 0,item_ids:void 0}),e){case"center":r()("#galaxy_main").attr("src",t);break;case"top":window.top.location=t;break;default:window.location=t}},update_grid:function(){var e=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var t=this;r().ajax({type:e,url:t.grid.get("url_base"),data:t.grid.get_url_data(),error:function(){alert("Grid refresh failed")},success:function(e){var n=t.grid.get("embedded"),i=t.grid.get("insert"),o=t.$el.find("#advanced-search").is(":visible"),a=e;a.embedded=n,a.insert=i,a.advanced_search=o,t.init_grid(a),t.$el.find(".loading-elt-overlay").hide()},complete:function(){t.grid.set({operation:void 0,item_ids:void 0})}})},getRootClassName:({title:e="grid"})=>m()(e).toLowerCase()})},78724:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(72316),o=n.n(i),a=n(55806),s=n.n(a),r=n(18181);const l=o().View.extend({initialize:function(e,t){this.$button=e,this.$button.length||(this.$button=s()("<div/>")),this.options=t||[],this.$button.data("popupmenu",this),this.$button.click((e=>(s()(".popmenu-wrapper").remove(),this._renderAndShow(e),!1)))},_renderAndShow:function(e){this.render(),this.$el.appendTo("body").css(this._getShownPosition(e)).show(),this._setUpCloseBehavior()},render:function(){return this.$el.addClass("popmenu-wrapper").hide().css({position:"absolute"}).html(this.template(this.$button.attr("id"),this.options)),this.options.length&&this.$(".popupmenu-option").each(((e,t)=>{const n=this.options[e];n.func&&s()(t).click((e=>{n.func.call(this,e,n),e.preventDefault()}))})),this},template:function(e,t){return`<div id="${e}-menu" class="dropdown-menu ${e}-menu">\n                    ${this._templateOptions(t)}\n                </div>`},_templateOptions:function(e){return e.length?r.default.map(e,(e=>{if(e.divider)return'<div class="popupmenu-option dropdown-divider"/>';if(e.header)return`<div class="popupmenu-option dropdown-header">${e.html}</div>`;const t=e.href||"javascript:void(0);",n=e.target?`target="${e.target}"`:"",i=e.checked?'<span class="fa fa-check mr-1"/>':"";return`<a class="popupmenu-option dropdown-item" href="${t}" ${e.title?`title="${e.title}"`:""} ${n}>${i}${e.html}</a>`})).join(""):'<div class="dropdown-header">(no options)</div>'},_getShownPosition:function(e){const t=this.$el.width();let n=e.pageX-t/2;return n=Math.min(n,s()(document).scrollLeft()+s()(window).width()-t-5),n=Math.max(n,s()(document).scrollLeft()+5),{top:e.pageY,left:n}},_setUpCloseBehavior:function(){const e=e=>{if(!e.target.classList.contains("dropdown-header")){s()(document).off("click.close_popup");try{window&&window.parent!==window?s()(window.parent.document).off("click.close_popup"):s()("iframe#galaxy_main").contents().off("click.close_popup")}catch(e){e instanceof DOMException?console.debug("Error clearing parent popups, likely cross-origin frame access from the toolshed and not problematic."):console.debug(e)}this.remove()}};s()("html").on("click.close_popup",e);try{window&&window.parent!==window?s()(window.parent.document).find("html").on("click.close_popup",e):s()("iframe#galaxy_main").contents().on("click.close_popup",e)}catch(e){e instanceof DOMException?console.debug("Error clearing parent popups, likely cross-origin frame access from the toolshed and not problematic."):console.debug(e)}},addItem:function(e,t){return t=t>=0?t:this.options.length,this.options.splice(t,0,e),this},removeItem:function(e){return e>=0&&this.options.splice(e,1),this},findIndexByHtml:function(e){for(let t=0;t<this.options.length;t++)if(r.default.has(this.options[t],"html")&&this.options[t].html===e)return t;return null},findItemByHtml:function(e){return this.options[this.findIndexByHtml(e)]},toString:function(){return"PopupMenu"}});l.create=function(e,t){return new l(e,t)};const d=l},69210:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(72316),o=n.n(i),a=n(55806),s=n.n(a),r=n(18181);const l={View:o().View.extend({className:"ui-modal",optionsDefault:{container:"body",title:"ui-modal",cls:"ui-modal",body:"",backdrop:!0,height:null,width:null,xlarge:!1,closing_events:!1,closing_callback:null,title_separator:!0},buttonList:{},initialize:function(e){this.options=r.default.defaults(e||{},this.optionsDefault),s()(this.options.container).prepend(this.el),e&&this.render()},show:function(e){e&&(this.options=r.default.defaults(e,this.optionsDefault),this.render()),this.visible||(this.visible=!0,this.$el.fadeIn("fast")),this.options.closing_events&&(s()(document).on("keyup.ui-modal",(e=>{27==e.keyCode&&this.hide(!0)})),this.$backdrop.on("click",(()=>{this.hide(!0)}))),this.$el.find(".title").focus()},hide:function(e){this.visible=!1,this.$el.fadeOut("fast"),this.options.closing_callback&&this.options.closing_callback(e),s()(document).off("keyup.ui-modal"),this.$backdrop.off("click")},render:function(){var e=this;if(this.$el.html(this._template()),this.$header=this.$(".modal-header"),this.$dialog=this.$(".modal-dialog"),this.options.extra_class&&this.$dialog.addClass(this.options.extra_class),this.$body=this.$(".modal-body"),this.$footer=this.$(".modal-footer"),this.$backdrop=this.$(".modal-backdrop"),this.$buttons=this.$(".buttons"),"progress"==this.options.body&&(this.options.body=s()('<div class="progress progress-striped active"><div class="progress-bar progress-bar-info" style="width:100%"/></div>')),this.$el.removeClass().addClass("modal").addClass(this.options.cls),this.$header.find(".title").html(this.options.title),this.$body.html(this.options.body),this.$buttons.empty(),this.buttonList={},this.options.buttons){var t=0;s().each(this.options.buttons,((n,i)=>{var o=s()("<button/>").attr("id","button-"+t++).text(n).click(i);e.$buttons.append(o).append("&nbsp;"),e.buttonList[n]=o}))}else this.$footer.hide();this.$backdrop[this.options.backdrop?"addClass":"removeClass"]("in"),this.$header[this.options.title_separator?"removeClass":"addClass"]("no-separator"),this.$body.removeAttr("style"),this.options.height?(this.$body.css("height",this.options.height),this.$body.css("overflow","hidden")):this.$body.css("max-height",s()(window).height()/2),this.options.width&&this.$dialog.css("width",this.options.width),this.options.xlarge&&this.$dialog.css("max-width","3000px")},getButton:function(e){return this.buttonList[e]},enableButton:function(e){this.getButton(e).prop("disabled",!1)},disableButton:function(e){this.getButton(e).prop("disabled",!0)},showButton:function(e){this.getButton(e).show()},hideButton:function(e){this.getButton(e).hide()},scrollTop:function(){return this.$body.scrollTop()},_template:function(){return'<div class="modal-backdrop fade"/><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="title" tabindex="0"/></div><div class="modal-body"/><div class="modal-footer"><div class="buttons"/></div></div></div>'}})}},20050:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var i=n(55806),o=n.n(i);function a(){console.log("init_refresh_on_change"),o()("select[refresh_on_change='true']").off("change").change((function(){var e=o()(this),t=e.val(),n=e.attr("refresh_on_change_values");if(n){n=n.split(",");var i=e.attr("last_selected_value");if(-1===o().inArray(t,n)&&-1===o().inArray(i,n))return}o()(window).trigger("refresh_on_change"),o()(document).trigger("convert_to_values"),e.get(0).form.submit()})),o()(":checkbox[refresh_on_change='true']").off("click").click((function(){var e=o()(this),t=e.val(),n=e.attr("refresh_on_change_values");if(n){n=n.split(",");var i=e.attr("last_selected_value");if(-1===o().inArray(t,n)&&-1===o().inArray(i,n))return}o()(window).trigger("refresh_on_change"),e.get(0).form.submit()})),o()("a[confirm]").off("click").click((function(){return confirm(o()(this).attr("confirm"))}))}},97061:(e,t,n)=>{"use strict";n.d(t,{GL:()=>d.GL,Bg:()=>c.getAppRoot,j4:()=>i.j,HE:()=>F});n(43734);var i=n(88998);n.p=`${(0,i.j)().replace(/\/+$/,"")}/static/dist/`;var o=n(9382),a=n(23504);const s=JSON.parse('[{"iconName":"galaxyLogo","prefix":"gxd","icon":[591,469,[],"",["M194.29,325.126L211.812,342.648L186.974,367.487L186.974,336.766C186.974,331.643 189.963,327.213 194.29,325.126ZM186.974,371.402L211.812,396.24L186.974,421.078L186.974,371.402ZM186.974,424.993L211.812,449.831L194.29,467.354C189.963,465.266 186.974,460.836 186.974,455.714L186.974,424.993ZM196.647,468.218L213.423,451.442L230.611,468.63L199.89,468.63C198.77,468.63 197.683,468.487 196.647,468.218ZM235.121,468.63L216.323,449.831L240.219,425.935L264.115,449.831L245.317,468.63L235.121,468.63ZM252.405,468.63L267.015,454.02L281.625,468.63L252.405,468.63ZM291.29,468.63C285.648,462.988 272.492,449.831 272.492,449.831L293.811,428.513C293.811,428.513 315.129,449.831 315.129,449.831C315.129,449.831 301.973,462.988 296.331,468.63L291.29,468.63ZM308.574,468.63L320.606,456.597L332.639,468.63L308.574,468.63ZM364.743,468.63L374.198,459.175C374.198,459.175 379.061,464.038 383.653,468.63L364.743,468.63ZM420.912,468.63L427.789,461.752L434.667,468.63L420.912,468.63ZM478.691,468.63C480.234,467.087 481.381,465.94 481.381,465.94C481.381,465.94 482.527,467.087 484.07,468.63L478.691,468.63ZM484.07,323.85L481.381,326.539C481.381,326.539 480.234,325.392 478.691,323.85L484.07,323.85ZM434.667,323.85L427.789,330.728L420.912,323.85L434.667,323.85ZM383.653,323.85C379.061,328.442 374.198,333.305 374.198,333.305C374.198,333.305 369.335,328.442 364.743,323.85L383.653,323.85ZM332.639,323.85L320.606,335.883L308.574,323.85L332.639,323.85ZM296.331,323.85L315.129,342.648C315.129,342.648 293.811,363.967 293.811,363.967C293.811,363.967 272.492,342.648 272.492,342.648C272.492,342.648 285.648,329.492 291.29,323.85L296.331,323.85ZM281.625,323.85L267.015,338.46L252.405,323.85L281.625,323.85ZM245.317,323.85L264.115,342.648L240.219,366.545L216.323,342.648L235.121,323.85L245.317,323.85ZM230.611,323.85L213.423,341.038L196.647,324.261C197.683,323.993 198.77,323.85 199.89,323.85L230.611,323.85ZM508.176,458.585L499.423,449.831L508.176,441.078L516.93,449.831L508.176,458.585ZM328.661,449.831L347.402,431.09L366.143,449.831L347.402,468.572L328.661,449.831ZM188.239,423.036L213.423,397.851L238.608,423.036L213.423,448.22L188.239,423.036ZM400.993,466.639L384.185,449.831L400.993,433.023L417.801,449.831L400.993,466.639ZM534.972,428.89L529.118,423.036L534.972,417.182L540.826,423.036L534.972,428.89ZM320.606,349.414L340.636,369.444L320.606,389.474L300.576,369.444L320.606,349.414ZM293.811,374.921L315.129,396.24C315.129,396.24 293.811,417.558 293.811,417.558C293.811,417.559 272.492,396.24 272.492,396.24C272.492,396.24 293.811,374.921 293.811,374.921ZM213.423,344.259L238.608,369.444L213.423,394.629L188.239,369.444L213.423,344.259ZM267.015,346.837L289.622,369.444L267.015,392.052L244.407,369.444L267.015,346.837ZM356.745,423.036L374.198,405.583C374.198,405.583 391.65,423.036 391.65,423.036C391.65,423.036 374.198,440.488 374.198,440.488C374.198,440.488 356.745,423.036 356.745,423.036ZM240.219,372.344L264.115,396.24L240.219,420.136L216.323,396.24L240.219,372.344ZM374.198,351.992L391.65,369.444C391.65,369.444 374.198,386.897 374.198,386.897C374.198,386.897 356.745,369.444 356.745,369.444C356.745,369.444 374.198,351.992 374.198,351.992ZM588.563,425.023L586.576,423.036L588.563,421.048L590.551,423.036L588.563,425.023ZM454.585,462.773L441.643,449.831L454.585,436.889L467.527,449.831L454.585,462.773ZM540.826,369.444L534.972,375.298L529.118,369.444L534.972,363.59L540.826,369.444ZM427.789,437.911L412.914,423.036L427.789,408.161L442.664,423.036L427.789,437.911ZM561.768,453.752L557.847,449.831L561.768,445.91L565.689,449.831L561.768,453.752ZM565.689,342.648L561.768,346.569L557.847,342.648L561.768,338.728L565.689,342.648ZM347.402,323.907L366.143,342.648L347.402,361.39L328.661,342.648L347.402,323.907ZM467.527,396.24L454.585,409.182L441.643,396.24L454.585,383.298L467.527,396.24ZM442.664,369.444L427.789,384.319L412.914,369.444L427.789,354.569L442.664,369.444ZM516.93,396.24L508.176,404.993L499.423,396.24L508.176,387.486L516.93,396.24ZM300.576,423.036L320.606,403.006L340.636,423.036L320.606,443.065L300.576,423.036ZM516.93,342.648L508.176,351.402L499.423,342.648L508.176,333.895L516.93,342.648ZM244.407,423.036L267.015,400.428L289.622,423.036L267.015,445.643L244.407,423.036ZM481.381,433.722L470.694,423.036C470.694,423.036 481.381,412.349 481.381,412.349C481.381,412.349 492.067,423.036 492.067,423.036C492.067,423.036 481.381,433.722 481.381,433.722ZM400.993,325.84L417.801,342.648L400.993,359.457L384.185,342.648L400.993,325.84ZM590.551,369.444L588.563,371.432L586.576,369.444L588.563,367.456L590.551,369.444ZM492.067,369.444L481.381,380.131C481.381,380.131 470.694,369.444 470.694,369.444C470.694,369.444 481.381,358.758 481.381,358.758C481.381,358.758 492.067,369.444 492.067,369.444ZM347.402,377.499L366.143,396.24L347.402,414.981L328.661,396.24L347.402,377.499ZM400.993,379.432L417.801,396.24L400.993,413.048L384.185,396.24L400.993,379.432ZM467.527,342.648L454.585,355.59L441.643,342.648L454.585,329.707L467.527,342.648ZM565.689,396.24L561.768,400.161L557.847,396.24L561.768,392.319L565.689,396.24Z","M418.226,173.733L418.226,294.896C418.226,301.415 412.934,306.708 406.415,306.708L11.811,306.708C5.292,306.708 0,301.415 0,294.896L0,173.733C0,167.214 5.292,161.922 11.811,161.922L406.415,161.922C412.934,161.922 418.226,167.214 418.226,173.733ZM511.717,11.811L511.717,132.974C511.717,139.493 506.425,144.785 499.906,144.785L11.811,144.785C5.292,144.785 0,139.493 0,132.974L0,11.811C0,5.292 5.292,0 11.811,0L499.906,0C506.425,0 511.717,5.292 511.717,11.811Z"]]},{"iconName":"textLarger","prefix":"gxd","icon":[64,52,[],"",["M20.895,46.858L20.404,45.453L6.771,45.453L4.484,52L0,52L11.256,22L15.964,22L23.078,41.038L20.895,46.858ZM8.072,41.821L19.103,41.821L13.587,26.26L8.072,41.821Z","M23.238,52L40.121,7L47.184,7L64,52L57.274,52L53.843,42.179L33.395,42.179L29.964,52L23.238,52ZM35.345,36.731L51.892,36.731L43.619,13.39L35.345,36.731Z"]]},{"iconName":"textSmaller","prefix":"gxd","icon":[64,52,[],"",["M33.33,49.979L30.605,42.179L10.157,42.179L6.726,52L0,52L16.883,7L23.946,7L36.756,41.278L33.33,49.979ZM12.108,36.731L28.655,36.731L20.381,13.39L12.108,36.731Z","M36.825,52L48.081,22L52.789,22L64,52L59.516,52L57.229,45.453L43.596,45.453L41.309,52L36.825,52ZM44.897,41.821L55.928,41.821L50.413,26.26L44.897,41.821Z"]]}]');var r=n(3967),l=n(70538);var d=n(18677),c=n(40961),u=n(40564),h=n(29127),p=n(31207),f=n(81924);const m=(e,t="Galaxy")=>(0,f.RV)((n=>{const{options:i,bootstrapped:o}=e,a=new n(i,o);return console.debug(`${t} app`),a}));var _=n(38577);const v=()=>null,g=e=>Object.keys(e).filter((t=>"function"==typeof e[t])).reduce(((e,t)=>(e[t]=v,e)),{});function y(e){"Galaxy"!=e&&function(e,t=null,n=null){const i=`window.${e}`,o=(s=e,1==k()[s]),a=o?console:g(console);var s;Object.defineProperty(window,e,{enumerable:!0,configurable:!1,get(){let n;a.groupCollapsed(`${i} read`),a.trace();try{n=t?t():window._monitorStorage[e],a.log(n)}catch(e){a.warn("Unable to retrieve"),a.warn(e)}return a.groupEnd(),n},set(t){a.groupCollapsed(`${i} write...`,String(t)),a.trace();try{n?n(t):window._monitorStorage[e]=t}catch(e){a.log("Unable to set value on window facade"),a.warn(e)}a.groupEnd()}})}(e)}function b(e,t=!0){const n=k();return t?n[e]=!0:e in n&&delete n[e],function(e){sessionStorage.setItem("global_monitors",JSON.stringify(e))}(n),n}function w(){const e=k();console.log(e)}function k(){const e=sessionStorage.getItem("global_monitors");return e?JSON.parse(e):{}}function C(){const e=Object.keys(k());console.groupCollapsed("monitor init"),console.log("The following global properties are monitored because they were setup in the javascript source manually:",e),console.log("To toggle messages on/off, type toggleGlobalMonitor('Galaxy', true|false) into the console"),console.log("You can set up any other variable by typing installMonitor('a window variable name')"),console.groupEnd(),e.forEach(y),window.installMonitor=y,window.showMonitorToggles=w,window.toggleGlobalMonitor=b}window._monitorStorage=window._monitorStorage||{};var x=n(55806),S=n.n(x);function M(){console.log("adjustIframeLinks"),S()("a").click((function(){var e=S()(this),t=window.parent.frames&&window.parent.frames.galaxy_main;if("galaxy_main"==e.attr("target")&&!t){var n=e.attr("href");-1==n.indexOf("?")?n+="?":n+="&",n+="use_panels=True",e.attr("href",n),e.attr("target","_self")}return e}))}function T(){console.log("addIframeClass"),window.self!==window.top&&(console.log(">>> We are in an iframe"),document.body.classList.add("framed"))}var L=n(20050),D=n(69210);function E(e){console.log("initModals"),e.modal||(e.modal=new D.Z.View)}var O=n(19011),A=n(64487),I=n(33646);const P=(e,t)=>{if(console.log("initSentry"),t.sentry){const{sentry_dsn_public:n,email:i}=t.sentry;let o=e.config.version_major;e.config.version_minor&&(o+=`.${e.config.version_minor}`),O.S1({dsn:n,release:o}),i&&A.e((e=>{e.setUser({email:i})})),e.Sentry=I}};function R(){console.log("initTooltips"),S().fn.tooltip&&(S()(".unified-panel-header [title]").tooltip({placement:"bottom"}),S()("[title]").tooltip())}var j=n(42773),Y=n(72570);function H(e){e.config.enable_webhooks&&Y.Z.load({type:"onload",callback:function(e){e.forEach((e=>{e.activate&&e.script&&j.ZP.appendScriptStyle(e)}))}})}function N(e,t,n){console.log("replace_big_select_inputs"),S().fn.select2?(void 0===e&&(e=20),void 0===t&&(t=3e3),(n=n||S()("select")).each((function(){var n,i,o=S()(this).not("[multiple]"),a=o.find("option").length;a<e||a>t||(o.hasClass("no-autocomplete")||(n=o,i={placeholder:"Click to select",closeOnSelect:!S()(n).is("[MULTIPLE]"),dropdownAutoWidth:!0,containerCssClass:"select2-minwidth"},n.select2(i)))}))):console.warn("No select 2")}function F(e="Galaxy",t=m){(0,d.Bz)(C,P,T,M,E,R,L.L,(()=>N(20,1500)),_.M,H);const n=c.config$.pipe((0,h.U)((n=>t(n,e))));(0,u.a)([c.config$,n,d.PL]).subscribe((([t,n,i])=>{console.group("runInitializations",e,(0,p.H)()),i.forEach((e=>e(n,t))),(0,d.RT)(),console.groupEnd()}))}!function(){let e=!0;e=!1;const t=(0,r._aR)("console-debugging-enabled",e);let n=null;(0,l.watch)((()=>t.value),(e=>{e?(console.log("The Galaxy console has been enabled.  You can disable it by running disableDebugging() in devtools."),n&&(console=n)):(console.log("The Galaxy console has been disabled.  You can enable it by running enableDebugging() in devtools."),n=console,console={},Object.keys(n).forEach((e=>{console[e]=()=>{}})))}),{immediate:!0}),window.enableDebugging=()=>{t.value=!0},window.disableDebugging=()=>{t.value=!1}}(),!0==!a.Z.testBuild&&(console.log(`Galaxy Client '${a.Z.name}' build, dated ${a.Z.buildTimestamp}`),console.debug("Full configuration:",a.Z)),o.vI.add(s)},18677:(e,t,n)=>{"use strict";n.d(t,{Bz:()=>l,GL:()=>r,PL:()=>s,RT:()=>d});var i=n(86515),o=n(94975);const a=new i.X([]),s=a.pipe((0,o.h)((e=>e.length>0))),r=(...e)=>{const t=[...a.getValue(),...e];a.next(t)},l=(...e)=>{const t=[...e,...a.getValue()];a.next(t)},d=()=>a.next([])},59687:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addInitialization:()=>c.GL,config$:()=>f,get:()=>_,getAppRoot:()=>v,set:()=>m});var i=n(16716),o=n(86515),a=n(94975),s=n(56542),r=n(42965),l=n(88998);const d={options:{root:(0,l.j)()},bootstrapped:{},form_input_auto_focus:!1,sentry:{}};var c=n(18677);const u=new i.x,h=u.pipe((0,a.h)((e=>e instanceof Object)),(0,s.R)(((e,t)=>Object.assign({},e,t)),d)),p=new o.X(d);h.subscribe(p);const f=p.asObservable().pipe((0,a.h)(Boolean),(0,r.b)(100));function m(...e){e.forEach((e=>u.next(e)))}function _(){return p.getValue()}function v(e="/",t=!1){let n=e;try{n=_().options.root}catch(t){try{n=(0,l.j)(e)}catch(e){console.warn("Unable to find index link in head",e)}}return t&&(n=(n||"").replace(/\/$/,"")),n}},64252:(e,t,n)=>{"use strict";n(92676),n(35666)},78670:(e,t,n)=>{"use strict";n.d(t,{A7:()=>k,UU:()=>w});var i=n(81924),o=n(28732),a=n(39953),s=n(96364),r=n(92865),l=n(69387),d=n(60047),c=n(12439),u=n(2746),h=n(6987);const p=1e3;let f=3e3,m=null,_=null,v=new Date,g=!1;function y(){"visible"===document.visibilityState?(f=3e3,k()):f=6e4}async function b(e){const t=(0,r.z)(),n=(0,s.v)(),a=(0,h.A)(),f=(0,u.P)();m=null;const g=new Date,y=await(0,l.oZ)(_),{lastCheckedTime:b}=(0,o.Jk)(n);if(b.value=g,y&&y.id&&(!_||_<y.update_time)){const e=y.id;_=y.update_time,n.setLastUpdateTime();const o={v:"dev",limit:p,q:"update_time-ge",qv:v.toISOString()},s=function(){const e=[],t="expanded-history-items";return(0,d.M)(t).forEach((t=>{const n=t.split("-")[1];n?.trim()&&e.push(n)})),e}();s.length&&(o.details=s.join(","));const r=`/api/histories/${e}/contents`;v=new Date;const l=await(0,c.e)({url:r,params:o});l&&l.length==p&&console.debug(`Reached limit of monitored changes (limit=${p}).`),t.setHistory(y),a.saveDatasets(l),n.saveHistoryItems(e,l),f.saveCollections(l);const u=(0,i.Bz)();u&&u.user.fetch({url:`${u.user.urlRoot()}/${u.user.id||"current"}`})}}async function w(e=a.Z){const{isWatching:t}=(0,o.Jk)((0,s.v)());!1===g&&(g=!0,t.value=g,document.addEventListener("visibilitychange",y));try{await b()}catch(e){console.warn(e),g=!1,t.value=g}finally{m=setTimeout((()=>{w(e)}),f)}}function k(){m&&(clearTimeout(m),w())}},39953:(e,t,n)=>{"use strict";n.d(t,{Z:()=>$});var i=n(23504),o=n(69483),a=n.n(o),s=n(70538),r=n(20629),l=n(988),d=n(3168),c=n(51120),u=n(40961);const h={saveDatasetExtFiles:(e,{history_dataset_id:t,datasetExtFiles:n})=>{s.default.set(e.datasetExtFilesById,t,n)}},p={state:{datasetExtFilesById:{}},getters:{getDatasetExtFiles:e=>t=>e.datasetExtFilesById[t]||null},actions:{fetchDatasetExtFiles:async({commit:e},t)=>{const{data:n}=await c.Z.get(`${(0,u.getAppRoot)()}api/histories/${t}/contents/${t}/extra_files`);e("saveDatasetExtFiles",{history_dataset_id:t,datasetExtFiles:n})}},mutations:h};var f=n(8766);const m={state:{datasetPathDestination:{}},getters:{pathDestination:e=>(t,n)=>e.datasetPathDestination[t]?e.datasetPathDestination[t][n]:void 0},actions:{fetchPathDestination:async({commit:e},{history_dataset_id:t,path:n})=>{const i=await(async(e,t)=>{let n=$.getters.getDatasetExtFiles(e);return null==n&&(await $.dispatch("fetchDatasetExtFiles",e),n=$.getters.getDatasetExtFiles(e)),(i=>{if(void 0===t||"undefined"===t)return i;const o=t,a=n.find((e=>o===e.path));if(a){if("Directory"===a.class)return i.isDirectory=!0,i.filepath=o,i;i.fileLink=(0,f.UU)(e,a.path)}return i})({datasetContent:n})})(t,n);e("savePathDestination",{history_dataset_id:t,path:n,pathDestination:i})}},mutations:{savePathDestination:(e,{history_dataset_id:t,path:n,pathDestination:i})=>{e.datasetPathDestination[t]={[n]:i}}}},_={state:{searchTags:new Set},mutations:{setSearchTags(e,t){e.searchTags=new Set(t)}},actions:{toggleSearchTag({state:e,commit:t},{text:n}){const i=new Set(e.searchTags);i.has(n)?i.delete(n):i.add(n),t("setSearchTags",i)},removeSearchTag({state:e,commit:t},{text:n}){const i=new Set(e.searchTags);i.delete(n),t("setSearchTags",i)},clearSearchTags({state:e,commit:t}){t("setSearchTags",new Set)}}},v={saveInvocationForId:(e,{invocationId:t,invocationData:n})=>{s.default.set(e.invocationDetailsById,t,n)},saveInvocationJobsSummaryForId:(e,{invocationId:t,jobsSummary:n})=>{s.default.set(e.invocationJobsSummaryById,t,n)},saveInvocationStepById:(e,{invocationStepId:t,invocationStepData:n})=>{s.default.set(e.invocationStepById,t,n)}},g={state:{invocationDetailsById:{},invocationJobsSummaryById:{},invocationStepById:{}},getters:{getInvocationById:e=>t=>e.invocationDetailsById[t],getInvocationJobsSummaryById:e=>t=>e.invocationJobsSummaryById[t],getInvocationStepById:e=>t=>e.invocationStepById[t]},actions:{fetchInvocationForId:async({commit:e},t)=>{const{data:n}=await c.Z.get(`${(0,u.getAppRoot)()}api/invocations/${t}`);e("saveInvocationForId",{invocationId:t,invocationData:n})},fetchInvocationJobsSummaryForId:async({commit:e},t)=>{const{data:n}=await c.Z.get(`${(0,u.getAppRoot)()}api/invocations/${t}/jobs_summary`);e("saveInvocationJobsSummaryForId",{invocationId:t,jobsSummary:n})},fetchInvocationStepById:async({commit:e},t)=>{const{data:n}=await c.Z.get(`${(0,u.getAppRoot)()}api/invocations/any/steps/${t}`);e("saveInvocationStepById",{invocationStepId:t,invocationStepData:n})}},mutations:v},y={saveJobDestinationParamsForJobId:(e,{jobId:t,jobDestinationParams:n})=>{s.default.set(e.jobDestinationParametersByJobId,t,n)}},b={state:{jobDestinationParametersByJobId:{}},getters:{jobDestinationParams:e=>t=>e.jobDestinationParametersByJobId[t]||[]},actions:{fetchJobDestinationParams:async({commit:e},t)=>{const{data:n}=await c.Z.get(`${(0,u.getAppRoot)()}api/jobs/${t}/destination_params`);e("saveJobDestinationParamsForJobId",{jobId:t,jobDestinationParams:n})}},mutations:y};var w=n(81924),k=n(19917),C=n(68515),x=n(16697),S=n(26625),M=n(22401),T=n(29127),L=n(94975),D=n(74727),E=n(83505);var O=n(27606),A=n(34978),I=n(24382);function P(e){return e.pipe((0,O.j)("user"),(0,A.w)((e=>function(e,t="change"){return(0,M.R)(e,t).pipe((0,T.U)((([e])=>e.toJSON())))}(e)))).subscribe((e=>{const t=(0,I.L)();t?.setCurrentUser(e)}),(e=>console.log("syncUserToGalaxy error",e)),(()=>console.log("syncUserToGalaxy complete")))}const R=e=>{P((0,k.P)((()=>function(e,t={}){const{spamTime:n=100,timeout:i=1e4,isValid:o=(e=>void 0!==e)}=t;return(0,x.F)(n).pipe((0,T.U)((()=>e())),(0,L.h)(o),(0,D.q)(1),(0,E.R)((0,S.H)(i)))}((()=>(0,w.Bz)())).pipe((0,C.d)(1)))))},j={getTagsById:e=>t=>{if(e.modelTagCache.has(t)){const n=e.modelTagCache.get(t);return Array.from(n)}return[]}},Y={updateTags({commit:e},{key:t,tags:n}){e("setTags",{key:t,tags:n})},initializeTags({dispatch:e,state:t},{key:n,tags:i}){t.modelTagCache.has(n)||e("updateTags",{key:n,tags:i})}},H={setTags(e,{key:t,tags:n}){e.modelTagCache=new Map(e.modelTagCache),e.modelTagCache.set(t,new Set(n))},reset(e){e.userTagList=[],e.modelTagCache=new Map}},N={state:{userTagList:[],modelTagCache:new Map},getters:j,actions:Y,mutations:H};s.default.use(r.ZP);const F=a().createInstance({});F.config({driver:[a().INDEXEDDB,a().LOCALSTORAGE],name:"galaxyIndexedDB",version:1,storeName:"galaxyStore"});const B=new d.ZP({storage:F,asyncStorage:!0,reducer:e=>{const{panels:t}=e;return{panels:t}}});const $=function(){const e={plugins:[(0,l.ZP)(),B.plugin],modules:{destinationParameters:b,datasetExtFiles:p,datasetPathDestination:m,invocations:g,gridSearch:_,tags:N}};return i.Z.testBuild||e.plugins.push(R),new r.ZP.Store(e)}()},37485:(e,t,n)=>{"use strict";n.d(t,{B:()=>d});var i=n(51120),o=n(72307),a=n.n(o),s=n(40961),r=n(28732),l=n(50452);const d=(0,r.Q_)("entryPointStore",{state:()=>({entryPoints:[],pollTimeout:void 0}),getters:{entryPointsForJob:e=>t=>e.entryPoints.filter((e=>e.job_id===t)),entryPointsForHda:e=>t=>e.entryPoints.filter((e=>e.output_datasets_ids.includes(t)))},actions:{async ensurePollingEntryPoints(){await this.fetchEntryPoints(),this.pollTimeout=setTimeout((()=>{this.ensurePollingEntryPoints()}),1e4)},stopPollingEntryPoints(){this.pollTimeout=clearTimeout(this.pollTimeout)},async fetchEntryPoints(){this.stopPollingEntryPoints();const e=(0,s.getAppRoot)()+"api/entry_points";i.Z.get(e,{params:{running:!0}}).then((e=>{this.updateEntryPoints(e.data)})).catch((e=>{(0,l.t)(e)}))},updateEntryPoints(e){let t=this.entryPoints.length!==e.length;if(0===this.entryPoints.length)this.entryPoints=e;else{const o=[];for(const s of e){const e=this.entryPoints.filter((e=>e.id===s.id))[0];t||a()(e,s)||(t=!0),o.push((n=e,i=s,{...n,...i}))}t&&(this.entryPoints=o)}var n,i},removeEntryPoint(e){const t=this.entryPoints.findIndex((t=>t.id===e));t>=0&&this.entryPoints.splice(t,1)}}})},69387:(e,t,n)=>{"use strict";n.d(t,{PH:()=>l,Sk:()=>p,VS:()=>c,XH:()=>_,bz:()=>d,m:()=>v,nM:()=>f,oZ:()=>u,u2:()=>m,xC:()=>h});var i=n(51120),o=n(74448);function a(e){if(200!==e.status)throw new Error(e);return e.data}const s={view:"summary"},r={view:"summary",keys:"size,contents_active,user_id"};async function l(){const e=await i.Z.get((0,o.Vd)("history/create_new_current"));if(!(e?.data?.id||null))throw new Error("failed to create and select new history");return a(e)}async function d(e,t,n){const r={name:t,current:!0,all_datasets:n,history_id:e.id};return a(await i.Z.post((0,o.Vd)("api/histories"),r,{params:s}))}async function c(e,t=!1){const n=`api/histories/${e}`+(t?"?purge=True":"");return a(await i.Z.delete((0,o.Vd)(n),{params:s}))}async function u(e=void 0){return a(await i.Z.get((0,o.Vd)("history/current_history_json"),{params:{since:e}}))}async function h(e){return a(await i.Z.get((0,o.Vd)("history/set_as_current"),{params:{id:e}}))}async function p(e=0,t=null,n=""){let s=`api/histories?${`view=summary&order=update_time&offset=${e}`}`;null!==t&&(s+=`&limit=${t}`),""!==n&&(s+=`&${n}`);return a(await i.Z.get((0,o.Vd)(s)))}async function f(){return a(await i.Z.get((0,o.Vd)("api/histories/count")))}async function m(e){const t=`api/histories/${e}`;return a(await i.Z.get((0,o.Vd)(t),{params:r}))}async function _(e){const{id:t}=e,n=await i.Z.post((0,o.Vd)("history/make_private"),function(e={}){return Object.keys(e).reduce(((t,n)=>(t.set(n,e[n]),t)),new FormData)}({history_id:t}));if(200!==n.status)throw new Error(n.statusText);return await m(t)}async function v(e,t){const n=`api/histories/${e}`;return a(await i.Z.put((0,o.Vd)(n),t,{params:r}))}},79446:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(55806),o=n.n(i),a=o();function s(e,t){var n=this;return t=o().extend({cover:!1},t||{}),n.show=(i,o,s)=>{var r,l;return i=i||"loading...",o=o||"fast",e.parent().find(".loading-indicator").remove(),n.$indicator=(r=['<div class="loading-indicator">','<div class="loading-indicator-text">','<span class="fa fa-spinner fa-spin fa-lg"></span>','<span class="loading-indicator-message">loading...</span>',"</div>","</div>"].join("\n"),l=a(r).hide().css(t.css||{position:"fixed"}),l.children(".loading-indicator-text"),t.cover?(l.css({"z-index":2,top:e.css("top"),bottom:e.css("bottom"),left:e.css("left"),right:e.css("right"),opacity:.5,"background-color":"white","text-align":"center"}),l.children(".loading-indicator-text").css({"margin-top":"20px"})):l.children(".loading-indicator-text").css({margin:"12px 0px 0px 10px",opacity:"0.85",color:"grey"}).children(".loading-indicator-message").css({margin:"0px 8px 0px 0px","font-style":"italic"}),l).insertBefore(e),n.message(i),n.$indicator.fadeIn(o,s),n},n.message=e=>{n.$indicator.find("i").text(e)},n.hide=(e,t)=>(e=e||"fast",n.$indicator&&n.$indicator.length?n.$indicator.fadeOut(e,(()=>{n.$indicator.remove(),t&&t()})):t&&t(),n),n}const r={LoadingIndicator:s,markViewAsLoading:function(e){e.setElement(a('<div><div class="loading"></div></div>')),new s(e.$(".loading")).show()}}},38577:(e,t,n)=>{"use strict";n.d(t,{J:()=>r,M:()=>l});var i=n(55806),o=n.n(i),a=n(18181),s=o();function r(e,t){var n=e.data("menu_options");e.data("menu_options",t),n||e.bind("click.show_popup",(t=>(s(".popmenu-wrapper").remove(),setTimeout((()=>{var n=s(`<div class="dropdown-menu" id="${e.attr("id")}-menu"/>`),i=e.data("menu_options");a.default.size(i)<=0&&s('<div class="dropdown-item">No Options.</div>').appendTo(n),s.each(i,((e,t)=>{if(t){const i=t.action||t,o=t.url||"javascript:void(0);",a=s("<a>").addClass("dropdown-item").attr("href",o).html(e).click(i);t.class&&a.addClass(t.class),n.append(a)}else n.append(s("<div/>").addClass("dropdown-item head").append(s("<a href='javascript:void(0)' role='button'></a>").html(e)))}));var o=s("<div class='popmenu-wrapper' style='position: absolute;left: 0;'></div>").append(n).appendTo("body"),r=t.pageX-o.width()/2;r=Math.min(r,s(document).scrollLeft()+s(window).width()-s(o).width()-5),r=Math.max(r,s(document).scrollLeft()+5),o.css({top:t.pageY,left:r})}),10),setTimeout((()=>{var e=e=>{s(e).bind("click.close_popup",(()=>{s(".popmenu-wrapper").remove(),e.unbind("click.close_popup")}))};e(s(window.document)),e(s(window.top.document));for(var t=window.top.frames.length;t--;){e(s(window.top.frames[t].document))}}),50),!1)))}function l(){s("div[popupmenu]").each((function(){var e={},t=s(this);t.find("a").each((function(){var t=s(this),n=t.get(0),i=n.getAttribute("confirm"),o=n.getAttribute("href"),a=n.getAttribute("target");e[t.text()]=o?{url:o,action:function(e){if(!i||confirm(i)){if(a)return window.open(o,a),!1;t.click()}else e.preventDefault()}}:null}));var n=s(`#${t.attr("popupmenu")}`);n.find("a").bind("click",(e=>(e.stopPropagation(),!0))),r(n,e),n.addClass("popup"),t.remove()}))}},51146:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(55806),o=n.n(i);class a{constructor(e){this.deferred=o().Deferred(),this.queue=[],this.responses=[],this.numToProcess=0,this.running=!1,this.init(e||[]),this.start()}init(e){e.forEach((e=>{this.add(e)}))}add(e){var t=this.queue.length;return this.numToProcess+=1,this.queue.push((()=>{var n=t,i=e();i.done((e=>{this.deferred.notify({curr:n,total:this.numToProcess,response:e})})),i.always((e=>{this.responses.push(e),this.queue.length?this.queue.shift()():this.stop()}))})),this}start(){return this.queue.length&&(this.running=!0,this.queue.shift()()),this}stop(e,t){return this.running=!1,this.queue=[],e?this.deferred.reject(t):this.deferred.resolve(this.responses),this.numToProcess=0,this.deferred=o().Deferred(),this}done(e){return this.deferred.done(e)}fail(e){return this.deferred.fail(e)}always(e){return this.deferred.always(e)}progress(e){return this.deferred.progress(e)}static create(e){return new a(e).deferred}}class s extends a{constructor(e){super(e),this.names={}}add(e){if(!Object.prototype.hasOwnProperty.call(e,"name")||!Object.prototype.hasOwnProperty.call(e,"fn"))throw new Error(`NamedAjaxQueue.add requires an object with both "name" and "fn": ${JSON.stringify(e)}`);if(!Object.prototype.hasOwnProperty.call(this.names,e.name))return this.names[e.name]=!0,super.add(e.fn)}clear(){return this.names={},this}static create(e){return new s(e).deferred}}const r={AjaxQueue:a,NamedAjaxQueue:s}},43954:(e,t,n)=>{"use strict";n.d(t,{J:()=>o});var i=n(9944);function o(e,t){navigator.clipboard?navigator.clipboard.writeText(e).then((()=>{t&&i.FN.info(t)})):prompt("Copy to clipboard: Ctrl+C, Enter",e)}},39327:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var i=n(2134),o=n(42773);function a(e){const t=(0,o.nF)(e),n=Math.abs((t>>4)%360);let a=75+(15&t);n>=70&&n<=95&&256==(256&t)&&(a+=.75*(100-a));const s=new i.n;s.hsluv_h=n,s.hsluv_s=100,s.hsluv_l=a,s.hsluvToHex();const r=`rgb(${parseInt(255*s.rgb_r)},${parseInt(255*s.rgb_g)},${parseInt(255*s.rgb_b)})`;s.hsluv_l=.9*a,s.hsluvToHex();const l=s.hex;s.hsluv_l=.95*a,s.hsluvToHex();return{primary:r,darker:l,dimmed:s.hex}}},38944:(e,t,n)=>{"use strict";n.d(t,{B8:()=>b,Ue:()=>y,WZ:()=>_,hy:()=>v,of:()=>m});var i=n(81924),o=n(51120),a=n(73463),s=n(3410),r=n(55806),l=n.n(r),d=n(40961),c=n(78670),u=n(70538),h=n(23460),p=n(27521),f=n(99454);n(95651);async function m(){const e=(0,i.Bz)();return e.currHistoryPanel&&e.currHistoryPanel.model.id?e.currHistoryPanel.model.id:o.Z.get(`${(0,d.getAppRoot)()}history/current_history_json`).then((e=>e.data.id)).catch((e=>(console.error("Error fetching current user history:",e),null)))}function _(e,t={}){m().then((n=>{if(Object.assign(t,{callback:e,history:n}),t.new){const{openGlobalUploadModal:e}=(0,s.N)();e(t)}else g(f.Z,t)}))}function v(e,t={}){Object.assign(t,{callback:e}),g(a.c,t)}function g(e,t){const n=u.default.extend(e),i=document.createElement("div");l()("body").append(i),new n({propsData:t}).$mount(i)}function y(e){(async function(){return e.history_id?e.history_id:m()})().then((t=>{(0,p.N)({success:t=>{b(),e.success&&e.success(t)},error:e.error,data:{payload:(0,h.Dh)([e],t)}})}))}function b(){const e=(0,i.Bz)();e?.currHistoryPanel?.refreshContents(),(0,c.A7)()}},86290:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(72316),o=n.n(i),a=n(40961),s=(n(51146),["new","queued","running","waiting"]),r=["error","deleted"],l=["ok","skipped"].concat(r);var d=o().Model.extend({url:function(){return`${(0,a.getAppRoot)()}api/histories/${this.attributes.history_id}/contents/dataset_collections/${this.attributes.collection_id}/jobs_summary`},hasDetails:function(){return this.has("populated_state")},new:function(){return!this.hasDetails()||"new"==this.get("populated_state")},populationFailed:function(){return"failed"===this.get("populated_state")},errored:function(){return this.populationFailed()||this.anyWithStates(r)},states:function(){return this.get("states")||{}},anyWithState:function(e){return(this.states()[e]||0)>0},anyWithStates:function(e){var t=this.states();for(var n in e)if((t[e[n]]||0)>0)return!0;return!1},numWithStates:function(e){var t=this.states(),n=0;for(var i in e)n+=t[e[i]]||0;return n},numInError:function(){return this.numWithStates(r)},numTerminal:function(){return this.numWithStates(l)},running:function(){return this.anyWithState("running")},terminal:function(){return!this.new()&&!this.anyWithStates(s)},jobCount:function(){var e=this.states(),t=0;for(var n in e)t+=e[n];return t},toString:function(){return`JobStatesSummary(id=${this.get("id")})`}});const c={JobStatesSummary:d,JobStatesSummaryCollection:o().Collection.extend({model:d,initialize:function(){this.on({add:e=>{this.active||e.fetch()}}),this.updateTimeoutId=null,this.active=!0},trackModel:function(e){if(e.has("job_states_summary"))return;const t=this.historyId;if("dataset_collection"===e.attributes.history_content_type){var n=e.attributes.job_source_type,i=e.attributes.job_source_id;n&&(this.add({id:i,model:n,history_id:t,collection_id:e.attributes.id}),e.jobStatesSummary=this.get(i))}},url:function(){var e=this.models.filter((e=>!e.terminal())),t=e.map((e=>e.get("id"))).join(","),n=e.map((e=>e.get("model"))).join(",");return`${(0,a.getAppRoot)()}api/histories/${this.historyId}/jobs_summary?ids=${t}&types=${n}`},monitor:function(){if(this.clearUpdateTimeout(),this.active){var e=()=>{this.updateTimeoutId=setTimeout((()=>{this.monitor()}),2e3)},t=this.models.filter((e=>!e.terminal()));t.length,t.length>0?this.fetch({remove:!1}).done(e):e()}},clearUpdateTimeout:function(){this.updateTimeoutId&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)},toString:function(){return"JobStatesSummaryCollection()"}}),FETCH_STATE_ON_ADD:false,NON_TERMINAL_STATES:s,ERROR_STATES:r}},11411:(e,t,n)=>{"use strict";n.d(t,{Dx:()=>r,JE:()=>l,NC:()=>s,ZP:()=>d});var i=n(36156),o=n.n(i);let a=[];function s(e){return a[e]||e}function r(e,t){const n=!(!t.default_locale||"auto"==t.default_locale)&&t.default_locale.toLowerCase();let i={};e&&e.attributes.preferences&&"extra_user_preferences"in e.attributes.preferences&&(i=JSON.parse(e.attributes.preferences.extra_user_preferences));let o="localization|locale"in i&&i["localization|locale"].toLowerCase();"auto"==o&&(o=!1);const a="undefined"==typeof navigator?"__root":(navigator.language||navigator.userLanguage||"__root").toLowerCase(),s=o||a||n;sessionStorage.setItem("currentLocale",s)}function l(e,t){let n=null;return Object.prototype.hasOwnProperty.call(o(),"__root")&&(n=sessionStorage.getItem("currentLocale"),n&&(a=o()["__"+n]||o()["__"+n.split("-")[0]]||o().__root)),n}const d=s},32511:(e,t,n)=>{"use strict";n.d(t,{b:()=>x,Z:()=>S});var i=n(75357),o=n(9382),a=n(51436),s=n(57810);o.vI.add(a.FPD,a.qmU,a.BDt,a.eTv,a.heh,a.koM,a.a3n,a.SZw,a.uM9,a.mh3,a.rWw,a.Qj4,a.kZ_,a.q7m,a.cNd,a.iV1,a.Ssp,a.Xjp,a.Mdf,a.W2U,a.ca9,a.G_j,a.gMD,a.Pk,a.b7W,a.vc8,a.sqG,a.aNY,a.nNP,a.Zrf,a.byT,a.El_,a.XQY,a.IwR,a.zc,a.r8p,a.CPW,a.Psp,a.EfQ,a.Hw7,a.aC2,a.tho,a.CgH,a.$aW,a.ZeM,a.eHv,a.X7o,a.FJU,a.klh);const r={components:{Icon:s.GN}},l={install(e){e.mixin(r)}};var d=n(11411);const c=/\r?\n|\r/g,u=/\s\s+/g;const h={install(e,t=d.ZP){e.filter("localize",t),e.filter("l",t),e.directive("localize",function(e){return{bind(t,n,i){t.childNodes.forEach((t=>{const n=t.textContent.replace(c," ").replace(u," ").trim();t.textContent=e(n)}))}}}(t)),e.mixin(function(e){return{methods:{l:e,localize:e}}}(t))}};var p=n(9141),f=n(27606),m=n(80275);const _=e=>t=>{e&&console.log(`[${e}] next`,t)},v=e=>t=>{e&&console.warn(`[${e}] error`,t)},g=e=>()=>{e&&console.log(`[${e}] complete`)},y={methods:{watch$(e,t=!0){const n={immediate:t};return this.$watchAsObservable(e,n).pipe((0,f.j)("newValue"))},listenTo(e,t={}){const n=t instanceof Function?{next:t}:t,{label:i=null,next:o=_(i),error:a=v(i),complete:s=g(i)}=n;(0,p.b)(e)?this.$subscribeTo(e,o,a,s):console.warn("Object provided to listenTo was not an observable")}}},b={install(e){e.use(m.Z),e.mixin(y)}};var w=n(70538),k=n(20629),C=n(39953);w.default.use(k.ZP),w.default.use(i.ZPm),w.default.use(h),w.default.use(b),w.default.use(l);const x=e=>{const t=w.default.extend(e);return(e,n)=>new t({store:C.Z,propsData:e,el:n})},S=(e,t,n={})=>{const i=document.createElement("div");e.replaceChildren(i);const o=w.default.extend(t);return((e,t)=>new o({propsData:e,el:t}))(n,i)}},6628:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});class i{constructor(e=1e3){this.throttlePeriod=e,this.nextPromise={},this.pendingPromise=!1}async enqueue(e,t,n=0){return new Promise(((i,o)=>{this.nextPromise[n]={action:e,args:t,resolve:i,reject:o},this.dequeue()}))}async dequeue(){const e=Object.keys(this.nextPromise);if(!this.pendingPromise&&e.length>0){const t=e[0],n=this.nextPromise[t];delete this.nextPromise[t],this.pendingPromise=!0;try{const e=await n.action(n.args);n.resolve(e)}catch(e){n.reject(e)}finally{setTimeout((()=>{this.pendingPromise=!1,this.dequeue()}),this.throttlePeriod)}}}}},26069:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(18181);const o={get:function(e,t=null){t=t||window.location.search.substr(1);var n=new RegExp(`${e}=([^&#$]+)`,"g"),o=t.match(n);if(o&&o.length)return 1===(o=i.default.map(o,(t=>decodeURIComponent(t.substr(e.length+1).replace(/\+/g," "))))).length?o[0]:o},parse:function(e){if(!e)return{};var t={};return e.split("&").forEach((e=>{var n=e.split("=");t[n[0]]=decodeURI(n[1])})),t}}},60047:(e,t,n)=>{"use strict";function i(e,t){try{const n=Array.from(t),i=JSON.stringify(n);sessionStorage.setItem(e,i)}catch(t){console.warn("Error saving set to cache.",e,t),sessionStorage.removeItem(e)}}function o(e){try{const t=sessionStorage.getItem(e),n=t?JSON.parse(t):null;return Array.isArray(n)?new Set(n):new Set}catch(t){return console.warn("Error loading cached list.",e,t),sessionStorage.removeItem(e),new Set}}n.d(t,{M:()=>o,e:()=>i})},36594:(e,t,n)=>{"use strict";n.d(t,{f:()=>o,s:()=>a});var i=n(58625);function o(e,t=null){const n=(0,i.b)();t&&(e.dataTransfer.setData("text",JSON.stringify([t])),n.setDragData(t)),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move";const o=document.getElementById("drag-ghost");e.dataTransfer.setDragImage(o,0,0)}function a(){(0,i.b)().clearDragData()}},23460:(e,t,n)=>{"use strict";n.d(t,{Dh:()=>s});const i="New File",o=["http://","https://","ftp://","file://","gxfiles://","gximport://","gxuserimport://","gxftp://","drs://"];function a(e){return o.some((t=>e.startsWith(t)))}function s(e,t,n=!1){const o=[],s=e.map((e=>{if(!e.optional||e.fileSize>0){let t=e.fileName;t===i&&(t=null);const n=(e.fileUri||e.filePath||e.fileContent||"").trim(),s=e.fileData&&e.fileData.size>0;if(0===n.length&&!s)throw new Error("Content not available.");const r={dbkey:e.dbKey??"?",ext:e.extension??"auto",name:t,space_to_tab:e.spaceToTab,to_posix_lines:e.toPosixLines,deferred:e.deferred};switch(e.fileMode){case"new":return a(n)?n.split("\n").map((e=>{const t=e.trim();if(a(t))return{src:"url",url:t,...r};throw new Error(`Invalid url: ${t}`)})):{src:"pasted",paste_content:e.fileContent,...r};case"url":if(a(n))return{src:"url",url:n,...r};throw new Error(`Invalid url: ${n}.`);case"local":return o.push(e.fileData),{src:"files",...r};default:throw new Error(`Unknown file mode: ${e.fileMode}.`)}}})).filter((e=>e)).flat();if(0===s.length)throw new Error("No valid items provided.");const r={destination:{type:"hdas"},elements:s};if(n){const e=[{src:"composite",dbkey:s[0].dbkey,ext:s[0].ext,composite:{items:r.elements}}];delete r.elements,r.items=e}return{history_id:t,targets:[r],auto_decompress:!0,files:o}}},27521:(e,t,n)=>{"use strict";n.d(t,{N:()=>c,y:()=>r});var i=n(51120),o=n(40961),a=n(70331);function s(e){return async t=>["tus-br",t.name,t.type,t.size,t.lastModified,e.data.history_id].join("-")}function r(e,t){i.Z.post(`${(0,o.getAppRoot)()}api/tools/fetch`,e).then((e=>{t.success(e.data)})).catch((e=>{t.error(e.response?.data.err_msg||"Request failed.")}))}function l(e,t,n,i,o){const c=performance.now(),u=o.chunkSize,h=e[t];if(!h)return delete n.files,r(n,o);console.debug(`Starting chunked upload for ${h.name} [chunkSize=${u}].`);const p=new a.gq(h,{endpoint:i,retryDelays:[0,3e3,1e4],fingerprint:s(o),chunkSize:u,storeFingerprintForResuming:!1,onError:function(e){const t=e.originalResponse?.getStatus();403==t?(console.error(`Failed because of missing authorization: ${e}`),o.error(e)):(console.log(`Failed because: ${e}\n, will retry in 10 seconds`),setTimeout((()=>d(p)),1e4))},onChunkComplete:function(e,t,n){const i=(t/n*100).toFixed(2);console.log(t,n,i+"%"),o.progress(Math.round(i))},onSuccess:function(){console.log(`Upload of ${h.name} to ${p.url} took ${(performance.now()-c)/1e3} seconds`),n[`files_${t}|file_data`]={session_id:p.url.split("/").at(-1),name:h.name},l(e,t+1,n,i,o)}});d(p)}function d(e){e.findPreviousUploads().then((t=>{t.length&&(console.log("previous Upload",t),e.resumeFromPreviousUpload(t[0])),e.start()}))}function c(e){const t={data:{},success:()=>{},error:()=>{},warning:()=>{},progress:()=>{},attempts:7e4,timeout:5e3,error_file:"File not provided.",error_attempt:"Maximum number of attempts reached.",error_tool:"Tool submission failed.",chunkSize:10485760,isComposite:!1,...e};var n=t.data;if(n.error_message)return void t.error(n.error_message);const i=`${(0,o.getAppRoot)()}api/upload/resumable_upload/`;if(n.files.length||t.isComposite)return l(n.files,0,n,i,t);if(n.targets.length&&n.targets[0].elements.length){const e=n.targets[0].elements[0];if("url"==e.src)return r(n,t);{const o=new Blob([e.paste_content]);return o.name=n.targets[0].elements[0].name||"default",l([o],0,n,i,t)}}}},12439:(e,t,n)=>{"use strict";n.d(t,{c:()=>r,e:()=>s});var i=n(51120),o=n(74448),a=n(50452);async function s({url:e,headers:t,params:n,errorSimplify:s=!0}){try{t=t||{},n=n||{};const{data:a}=await i.Z.get((0,o.dq)(e),{headers:t,params:n});return a}catch(e){if(!s)throw e;(0,a.t)(e)}}function r(e,t){const n=-1==e.indexOf("?")?"?":"&",i=new URLSearchParams(t).toString();return i?`${e}${n}${i}`:e}},72570:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(51120),o=n(72316),a=n.n(o),s=n(40961),r=n(42773),l=n(50452);let d;async function c(){if(void 0===d)try{const{data:e}=await i.Z.get(`${(0,s.getAppRoot)()}api/webhooks`);d=e}catch(e){(0,l.t)(e)}return d}function u(e,t){let n=e;return t.type&&(n=function(e,t){return e.filter((e=>{const n=e.type;return!!n&&-1!==n.indexOf(t)}))}(e,t.type)),n}const h={WebhookView:a().View.extend({el:"#webhook-view",initialize:function(e){const t=e.toolId||"",n=e.toolVersion||"";this.$el.attr("tool_id",t),this.$el.attr("tool_version",n),c().then((t=>{const n=u(t,e);n.length>0&&this.render(function(e){const t=e.map((e=>e.weight)),n=t.reduce(((e,t)=>e+t)),i=new Map;t.forEach(((e,t)=>{i.set(t,parseFloat((e/n).toFixed(2)))}));const o=[];for(const[e,t]of i)for(let n=0;n<100*t;n++)o.push(e);return e.at(o[Math.floor(Math.random()*o.length)])}(n))}))},render:function(e){return this.$el.html(`<div id="${e.id}"></div>`),r.ZP.appendScriptStyle(e),this}}),load:e=>{c().then((t=>{e.callback(u(t,e))}))}}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(e,t,n,i)=>{if(!t){var o=1/0;for(l=0;l<deferred.length;l++){t=deferred[l][0],n=deferred[l][1],i=deferred[l][2];for(var a=!0,s=0;s<t.length;s++)(!1&i||o>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[s])))?t.splice(s--,1):(a=!1,i<o&&(o=i));if(a){deferred.splice(l--,1);var r=n();void 0!==r&&(e=r)}}return e}i=i||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>i;l--)deferred[l]=deferred[l-1];deferred[l]=[t,n,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var i={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&t&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(n,i),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>(({199:"ListCollectionCreator",266:"Screenshot",544:"ToolSourceDisplay",621:"workflowLayout",637:"cite",837:"PairCollectionCreator"}[e]||e)+".bundled.js"),__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="@galaxyproject/galaxy-client:",__webpack_require__.l=(e,t,n,i)=>{if(inProgress[e])inProgress[e].push(t);else{var o,a;if(void 0!==n)for(var s=document.getElementsByTagName("script"),r=0;r<s.length;r++){var l=s[r];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==dataWebpackPrefix+n){o=l;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",dataWebpackPrefix+n),o.src=e),inProgress[e]=[t];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(c);var i=inProgress[e];if(delete inProgress[e],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},c=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),a&&document.head.appendChild(o)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.j=237,(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&!e;)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={237:0,348:0};__webpack_require__.f.j=(t,n)=>{var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else if(348!=t){var o=new Promise(((n,o)=>i=e[t]=[n,o]));n.push(i[2]=o);var a=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(a,(n=>{if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,a=n[0],s=n[1],r=n[2],l=0;if(a.some((t=>0!==e[t]))){for(i in s)__webpack_require__.o(s,i)&&(__webpack_require__.m[i]=s[i]);if(r)var d=r(__webpack_require__)}for(t&&t(n);l<a.length;l++)o=a[l],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(d)},n=self.webpackChunk_galaxyproject_galaxy_client=self.webpackChunk_galaxyproject_galaxy_client||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.O(void 0,[348,977],(()=>__webpack_require__(64252))),__webpack_require__.O(void 0,[348,977],(()=>__webpack_require__(53515)));var __webpack_exports__=__webpack_require__.O(void 0,[348,977],(()=>__webpack_require__(10104)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=analysis.bundled.js.map